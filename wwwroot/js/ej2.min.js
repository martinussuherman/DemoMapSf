/*!
 * filename: ej2.min.js
 * version : 18.4.47
 * Copyright Syncfusion Inc. 2001 - 2021. All rights reserved.
 * Use of this code is subject to the terms of our license.
 * A copy of the current license can be obtained at any time by e-mailing
 * licensing@syncfusion.com. Any infringement will be prosecuted under
 * applicable laws.
 */!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){t.copy=function e(t,i,s,n){var o=t||{},r=arguments.length;n&&(r-=1);for(var a=function(t){if(!l[t])return"continue";var i=l[t];Object.keys(i).forEach(function(t){var s,r=o[t],a=i[t];n&&(ejs.base.isObject(a)||Array.isArray(a))?ejs.base.isObject(a)?(s=r||{},o[t]=e({},s,a,n)):(s=r||[],o[t]=e([],s,a,n)):o[t]=a})},l=arguments,h=1;h<r;h++)a(h);return o}},function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"blazorCultureFormats",function(){return rt}),i.d(s,"IntlBase",function(){return ot}),i.d(s,"Ajax",function(){return ht}),i.d(s,"Animation",function(){return vs}),i.d(s,"rippleEffect",function(){return ys}),i.d(s,"isRippleEnabled",function(){return ws}),i.d(s,"enableRipple",function(){return Es}),i.d(s,"Base",function(){return _i}),i.d(s,"getComponent",function(){return qi}),i.d(s,"removeChildInstance",function(){return Wi}),i.d(s,"Browser",function(){return bt}),i.d(s,"versionBasedStatePersistence",function(){return Ms}),i.d(s,"enableVersionBasedPersistence",function(){return Ps}),i.d(s,"Component",function(){return Ns}),i.d(s,"ChildProperty",function(){return Ls}),i.d(s,"Position",function(){return qs}),i.d(s,"Draggable",function(){return Ws}),i.d(s,"Droppable",function(){return Ys}),i.d(s,"EventHandler",function(){return Ct}),i.d(s,"onIntlChange",function(){return Ue}),i.d(s,"rightToLeft",function(){return Ge}),i.d(s,"cldrData",function(){return Ye}),i.d(s,"defaultCulture",function(){return Xe}),i.d(s,"defaultCurrencyCode",function(){return Ke}),i.d(s,"Internationalization",function(){return Qe}),i.d(s,"setCulture",function(){return Je}),i.d(s,"setCurrencyCode",function(){return $e}),i.d(s,"loadCldr",function(){return et}),i.d(s,"enableRtl",function(){return tt}),i.d(s,"getNumericObject",function(){return it}),i.d(s,"getNumberDependable",function(){return st}),i.d(s,"getDefaultDateObject",function(){return nt}),i.d(s,"KeyboardEvents",function(){return Qs}),i.d(s,"L10n",function(){return Js}),i.d(s,"ModuleLoader",function(){return Ts}),i.d(s,"Property",function(){return os}),i.d(s,"Complex",function(){return rs}),i.d(s,"ComplexFactory",function(){return as}),i.d(s,"Collection",function(){return ls}),i.d(s,"CollectionFactory",function(){return hs}),i.d(s,"Event",function(){return cs}),i.d(s,"NotifyPropertyChanges",function(){return ps}),i.d(s,"CreateBuilder",function(){return us}),i.d(s,"SwipeSettings",function(){return tn}),i.d(s,"Touch",function(){return nn}),i.d(s,"HijriParser",function(){return we}),i.d(s,"blazorTemplates",function(){return Gt}),i.d(s,"getRandomId",function(){return Yt}),i.d(s,"compile",function(){return Xt}),i.d(s,"updateBlazorTemplate",function(){return Kt}),i.d(s,"resetBlazorTemplate",function(){return Zt}),i.d(s,"setTemplateEngine",function(){return Qt}),i.d(s,"getTemplateEngine",function(){return Jt}),i.d(s,"disableBlazorMode",function(){return Q}),i.d(s,"createInstance",function(){return J}),i.d(s,"setImmediate",function(){return $}),i.d(s,"getValue",function(){return ee}),i.d(s,"setValue",function(){return te}),i.d(s,"deleteObject",function(){return ie}),i.d(s,"isObject",function(){return se}),i.d(s,"getEnumValue",function(){return ne}),i.d(s,"merge",function(){return oe}),i.d(s,"extend",function(){return re}),i.d(s,"isNullOrUndefined",function(){return ae}),i.d(s,"isUndefined",function(){return le}),i.d(s,"getUniqueID",function(){return he}),i.d(s,"debounce",function(){return ce}),i.d(s,"queryParams",function(){return pe}),i.d(s,"isObjectArray",function(){return de}),i.d(s,"compareElementParent",function(){return ue}),i.d(s,"throwError",function(){return me}),i.d(s,"print",function(){return fe}),i.d(s,"formatUnit",function(){return ge}),i.d(s,"enableBlazorMode",function(){return ve}),i.d(s,"isBlazor",function(){return ye}),i.d(s,"getElement",function(){return be}),i.d(s,"getInstance",function(){return Ce}),i.d(s,"addInstance",function(){return Se}),i.d(s,"uniqueID",function(){return xe}),i.d(s,"createElement",function(){return yi}),i.d(s,"addClass",function(){return bi}),i.d(s,"removeClass",function(){return Ci}),i.d(s,"isVisible",function(){return xi}),i.d(s,"prepend",function(){return wi}),i.d(s,"append",function(){return Ei}),i.d(s,"detach",function(){return Ti}),i.d(s,"remove",function(){return Li}),i.d(s,"attributes",function(){return Di}),i.d(s,"select",function(){return Ii}),i.d(s,"selectAll",function(){return Oi}),i.d(s,"closest",function(){return Mi}),i.d(s,"siblings",function(){return Pi}),i.d(s,"getAttributeOrDefault",function(){return Ni}),i.d(s,"setStyleAttribute",function(){return Ri}),i.d(s,"classList",function(){return Bi}),i.d(s,"matches",function(){return Hi}),i.d(s,"includeInnerHTML",function(){return Fi}),i.d(s,"containsClass",function(){return ji}),i.d(s,"cloneNode",function(){return Vi}),i.d(s,"Observer",function(){return We}),i.d(s,"SanitizeHtmlHelper",function(){return ln});var n={};i.r(n),i.d(n,"AccordionActionSettings",function(){return gn}),i.d(n,"AccordionAnimationSettings",function(){return vn}),i.d(n,"AccordionItem",function(){return yn}),i.d(n,"Accordion",function(){return bn});var o={};i.r(o),i.d(o,"PositionData",function(){return so}),i.d(o,"Popup",function(){return lo}),i.d(o,"getScrollableParent",function(){return ho}),i.d(o,"getZindexPartial",function(){return co}),i.d(o,"getMaxZindex",function(){return po});var r={};i.r(r),i.d(r,"calculateRelativeBasedPosition",function(){return kn}),i.d(r,"calculatePosition",function(){return Tn}),i.d(r,"fit",function(){return Hn}),i.d(r,"isCollide",function(){return Fn}),i.d(r,"flip",function(){return jn});var a={};i.r(a),i.d(a,"buttonObserver",function(){return Do}),i.d(a,"Button",function(){return Po});var l={};i.r(l),i.d(l,"CheckBox",function(){return jo});var h={};i.r(h),i.d(h,"RadioButton",function(){return qo});var c={};i.r(c),i.d(c,"Switch",function(){return Go});var p={};i.r(p),i.d(p,"classNames",function(){return Ko}),i.d(p,"ChipList",function(){return Zo}),i.d(p,"Chip",function(){return Qo});var d={};i.r(d),i.d(d,"ButtonProps",function(){return Nr}),i.d(d,"AnimationSettings",function(){return Rr}),i.d(d,"Dialog",function(){return Wr}),i.d(d,"DialogUtility",function(){return Ar});var u={};i.r(u),i.d(u,"Animation",function(){return Yr}),i.d(u,"Tooltip",function(){return Xr});var m={};i.r(m),i.d(m,"Spinner",function(){return fa}),i.d(m,"createSpinner",function(){return ga}),i.d(m,"showSpinner",function(){return Ia}),i.d(m,"hideSpinner",function(){return Aa}),i.d(m,"setSpinner",function(){return Ma});var f={};i.r(f),i.d(f,"NumericTextBox",function(){return _a});var g={};i.r(g),i.d(g,"regularExpressions",function(){return Ka}),i.d(g,"createMask",function(){return Za}),i.d(g,"applyMask",function(){return Qa}),i.d(g,"wireEvents",function(){return Ja}),i.d(g,"unwireEvents",function(){return $a}),i.d(g,"bindClearEvent",function(){return el}),i.d(g,"unstrippedValue",function(){return sl}),i.d(g,"strippedValue",function(){return nl}),i.d(g,"maskInputFocusHandler",function(){return rl}),i.d(g,"maskInputBlurHandler",function(){return al}),i.d(g,"maskInputDropHandler",function(){return cl}),i.d(g,"mobileRemoveFunction",function(){return ul}),i.d(g,"setMaskValue",function(){return kl}),i.d(g,"setElementValue",function(){return Tl}),i.d(g,"maskInput",function(){return Ll}),i.d(g,"getVal",function(){return Il}),i.d(g,"getMaskedVal",function(){return Ol}),i.d(g,"MaskUndo",function(){return Pl}),i.d(g,"MaskedTextBox",function(){return Hl});var v={};i.r(v),i.d(v,"Input",function(){return Na});var y={};i.r(y),i.d(y,"regex",function(){return Kh}),i.d(y,"ErrorOption",function(){return Ml}),i.d(y,"FormValidator",function(){return Zh});var b={};i.r(b),i.d(b,"FilesProp",function(){return pc}),i.d(b,"ButtonsProps",function(){return dc}),i.d(b,"AsyncSettings",function(){return uc}),i.d(b,"Uploader",function(){return mc});var C={};i.r(C),i.d(C,"DropDownButton",function(){return Lc});var S={};i.r(S),i.d(S,"SpinSettings",function(){return Bc}),i.d(S,"AnimationSettings",function(){return Hc}),i.d(S,"ProgressButton",function(){return Fc});var x={};i.r(x),i.d(x,"ColorPicker",function(){return tp});var w={};i.r(w),i.d(w,"TextBox",function(){return op});var E={};i.r(E),i.d(E,"DataManager",function(){return Ip}),i.d(E,"Deferred",function(){return Op}),i.d(E,"Query",function(){return up}),i.d(E,"Predicate",function(){return mp}),i.d(E,"Adaptor",function(){return bp}),i.d(E,"JsonAdaptor",function(){return Cp}),i.d(E,"UrlAdaptor",function(){return Sp}),i.d(E,"ODataAdaptor",function(){return xp}),i.d(E,"ODataV4Adaptor",function(){return wp}),i.d(E,"WebApiAdaptor",function(){return Ep}),i.d(E,"WebMethodAdaptor",function(){return kp}),i.d(E,"RemoteSaveAdaptor",function(){return Tp}),i.d(E,"AjaxAdaptor",function(){return Lp}),i.d(E,"CacheAdaptor",function(){return Dp}),i.d(E,"DataUtil",function(){return gp});var k={};i.r(k),i.d(k,"cssClass",function(){return Ap}),i.d(k,"ListBase",function(){return dp}),i.d(k,"getFieldValues",function(){return Mp});var T={};i.r(T),i.d(T,"Sortable",function(){return qp}),i.d(T,"moveTo",function(){return Wp});var L={};i.r(L),i.d(L,"AutoComplete",function(){return Cd});var D={};i.r(D),i.d(D,"dropDownListClasses",function(){return hd}),i.d(D,"DropDownList",function(){return pd});var I={};i.r(I),i.d(I,"ComboBox",function(){return fd});var O={};i.r(O),i.d(O,"HScroll",function(){return qd});var A={};i.r(A),i.d(A,"VScroll",function(){return Gd});var M={};i.r(M),i.d(M,"addScrolling",function(){return Yd}),i.d(M,"destroyScroll",function(){return Xd});var P={};i.r(P),i.d(P,"ContextMenu",function(){return hu});var N={};i.r(N),i.d(N,"Panel",function(){return gu}),i.d(N,"DashboardLayout",function(){return vu});var R={};i.r(R),i.d(R,"DatePicker",function(){return Ou});var B={};i.r(B),i.d(B,"CalendarBase",function(){return ku}),i.d(B,"Calendar",function(){return Tu}),i.d(B,"Islamic",function(){return Au});var H={};i.r(H),i.d(H,"Presets",function(){return Qu}),i.d(H,"DateRangePicker",function(){return Ju});var F={};i.r(F),i.d(F,"Item",function(){return wm}),i.d(F,"Toolbar",function(){return Em});var j={};i.r(j),i.d(j,"Menu",function(){return Dm});var V={};i.r(V),i.d(V,"TabActionSettings",function(){return Bm}),i.d(V,"TabAnimationSettings",function(){return Hm}),i.d(V,"Header",function(){return Fm}),i.d(V,"TabItem",function(){return jm}),i.d(V,"Tab",function(){return Vm});var z={};i.r(z),i.d(z,"FieldsSettings",function(){return nf}),i.d(z,"ActionSettings",function(){return of}),i.d(z,"NodeAnimationSettings",function(){return rf}),i.d(z,"TreeView",function(){return af});var _={};i.r(_),i.d(_,"Fields",function(){return gf}),i.d(_,"TreeSettings",function(){return vf}),i.d(_,"DropDownTree",function(){return yf});var q={};i.r(q),i.d(q,"Pager",function(){return Xf}),i.d(q,"ExternalMessage",function(){return Kf}),i.d(q,"NumericContainer",function(){return _f}),i.d(q,"PagerMessage",function(){return qf}),i.d(q,"PagerDropDown",function(){return ug});var W={};i.r(W),i.d(W,"TextStyle",function(){return Vg}),i.d(W,"TooltipBorder",function(){return zg}),i.d(W,"AreaBounds",function(){return _g}),i.d(W,"ToolLocation",function(){return qg}),i.d(W,"Tooltip",function(){return Wg}),i.d(W,"getTooltipThemeColor",function(){return xg}),i.d(W,"measureText",function(){return Eg}),i.d(W,"findDirection",function(){return kg}),i.d(W,"Size",function(){return Tg}),i.d(W,"Rect",function(){return Lg}),i.d(W,"Side",function(){return Dg}),i.d(W,"CustomizeOption",function(){return Ig}),i.d(W,"TextOption",function(){return Og}),i.d(W,"getElement",function(){return Ag}),i.d(W,"removeElement",function(){return Mg}),i.d(W,"drawSymbol",function(){return Pg}),i.d(W,"calculateShapes",function(){return Ng}),i.d(W,"PathOption",function(){return Rg}),i.d(W,"textElement",function(){return Bg}),i.d(W,"TooltipLocation",function(){return Hg}),i.d(W,"SvgRenderer",function(){return Cg}),i.d(W,"CanvasRenderer",function(){return Sg});var U={};i.r(U),i.d(U,"ProgressBar",function(){return Dv}),i.d(U,"Margin",function(){return uv}),i.d(U,"Font",function(){return mv}),i.d(U,"Animation",function(){return fv}),i.d(U,"ProgressAnnotationSettings",function(){return gv}),i.d(U,"RangeColor",function(){return vv}),i.d(U,"ProgressAnnotation",function(){return xv}),i.d(U,"Rect",function(){return Gg}),i.d(U,"Size",function(){return Yg}),i.d(U,"Pos",function(){return Xg}),i.d(U,"RectOption",function(){return Kg}),i.d(U,"ColorValue",function(){return Zg}),i.d(U,"convertToHexCode",function(){return Qg}),i.d(U,"componentToHex",function(){return Jg}),i.d(U,"convertHexToColor",function(){return $g}),i.d(U,"colorNameToHex",function(){return ev}),i.d(U,"TextOption",function(){return tv}),i.d(U,"degreeToLocation",function(){return iv}),i.d(U,"getPathArc",function(){return sv}),i.d(U,"stringToNumber",function(){return nv}),i.d(U,"setAttributes",function(){return ov}),i.d(U,"effect",function(){return rv}),i.d(U,"annotationRender",function(){return av}),i.d(U,"getElement",function(){return lv}),i.d(U,"removeElement",function(){return hv}),i.d(U,"ProgressLocation",function(){return cv}),i.d(U,"ProgressAnimation",function(){return Cv});var G={};i.r(G),i.d(G,"ToastPosition",function(){return Yv}),i.d(G,"ButtonModelProps",function(){return Xv}),i.d(G,"ToastAnimations",function(){return Kv}),i.d(G,"ToastAnimationSettings",function(){return Zv}),i.d(G,"Toast",function(){return Qv});var Y=i(0),X="ej2_instances",K=0,Z=!1;function Q(){Z=!1}function J(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function $(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var s="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),n=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===s&&(e(),t())};return window.addEventListener("message",n,!1),window.postMessage(s,"*"),t=function(){window.removeEventListener("message",n),e=n=s=void 0}}function ee(e,t){for(var i=t,s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<s.length&&!le(i);n++)i=i[s[n]];return i}function te(e,t,i){var s,n,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=i||{},a=r,l=o.length;for(s=0;s<l;s++)n=o[s],s+1===l?a[n]=void 0===t?{}:t:ae(a[n])&&(a[n]={}),a=a[n];return r}function ie(e,t){delete e[t]}function se(e){return!ae(e)&&e.constructor==={}.constructor}function ne(e,t){return e[t]}function oe(e,t){if(!ae(t))for(var i=e,s=t,n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];ae(i.deepMerge)||-1===i.deepMerge.indexOf(r)||!se(s[r])&&!Array.isArray(s[r])?i[r]=s[r]:re(i[r],i[r],s[r],!0)}}function re(e,t,i,s){var n=e&&"object"==typeof e?e:{},o=arguments.length;s&&(o-=1);for(var r=function(e){if(!a[e])return"continue";var t=a[e];Object.keys(t).forEach(function(e){var i,o=n[e],r=t[e],a=Array.isArray(r)&&Array.isArray(o)&&r.length!==o.length,l=!ye()||!(o instanceof Event||a);s&&l&&(se(r)||Array.isArray(r))?se(r)?(i=o||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?re(i,{},r,s):n[e]=re(i,{},r,s)):(i=ye()?o&&Object.keys(r).length:o||[],n[e]=re([],i,r,s)):n[e]=r})},a=arguments,l=1;l<o;l++)r(l);return n}function ae(e){return null==e}function le(e){return void 0===e}function he(e){return e+"_"+K++}function ce(e,t){var i;return function(){var s=this,n=arguments;clearTimeout(i),i=setTimeout(function(){return i=null,e.apply(s,n)},t)}}function pe(e){for(var t=[],i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];t.push(encodeURIComponent(n)+"="+encodeURIComponent(""+e[n]))}return t.join("&")}function de(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)&&"[object Object]"===t.call(e[0])}function ue(e,t){return e===t||!(e===document||!e)&&ue(e.parentNode,t)}function me(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function fe(e,t){var i=document.createElement("div"),s=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),n="";ae(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(e.cloneNode(!0));for(var o=0,r=s.length;o<r;o++)n+=s[o].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+n+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var a=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(a))},500);return t}function ge(e){var t=e+"";return t.match(/auto|%|px|vh|vm|vmax|vmin|em/)?t:t+"px"}function ve(){Z=!0}function ye(){return Z}function be(e){return e instanceof Node||!ye()||ae(e.xPath)?e:document.evaluate(e.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function Ce(e,t){var i="string"==typeof e?document.querySelector(e):e;if(i[X])for(var s=0,n=i[X];s<n.length;s++){var o=n[s];if(o instanceof t)return o}return null}function Se(e,t){var i="string"==typeof e?document.querySelector(e):e;i[X]?i[X].push(t):i[X]=[t]}function xe(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}var we,Ee={latn:{_digits:"0123456789",_type:"numeric"}},ke={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},Te=[0,1,2,3,4,5,6,7,8,9],Le=function(){function e(){}return e.getMainObject=function(e,t){return ee(ye()?t:"main."+t,e)},e.getNumberingSystem=function(e){return ee("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},s=0,n=t||Object.keys(e);s<n.length;s++){var o=n[s];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,s=Object.keys(ke);i<s.length;i++){var n=s[i];t[e[n]]=ke[n]}return t},e.constructRegex=function(e){for(var t=e.length,i="",s=0;s<t;s++)i+=s!==t-1?e[s]+"|":e[s];return i},e.convertValueParts=function(e,t,i){return e.replace(t,function(e){return i[e]})},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=ee("numbers",e),t.nSystem=ee("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,s){var n={},o=this.getDefaultNumberingSystem(e);if(!le(o.nSystem)||s){var r=s?ee("obj.mapperDigits",o):ee(o.nSystem+"._digits",t);le(r)||(n.numericPair=this.reverseObject(r,Te),n.numberParseRegex=new RegExp(this.constructRegex(r),"g"),n.numericRegex="["+r[0]+"-"+r[9]+"]",i&&(n.numericRegex=r[0]+"-"+r[9],n.symbolNumberSystem=ee(s?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=o.nSystem))}return n},e.getNumberMapper=function(e,t,i){var s={mapper:{}},n=this.getDefaultNumberingSystem(e);if(!le(n.nSystem)){s.numberSystem=n.nSystem,s.numberSymbols=ee("symbols-numberSystem-"+n.nSystem,n.obj),s.timeSeparator=ee("timeSeparator",s.numberSymbols);var o=ee(n.nSystem+"._digits",t);if(!le(o))for(var r=0,a=Te;r<a.length;r++){var l=a[r];s.mapper[l]=o[l]}}return s},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=Ee,e}(),De={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),s=e.getMonth(),n=e.getFullYear(),o=s+1,r=n;o<3&&(r-=1,o+=12);var a=Math.floor(r/100),l=a-Math.floor(a/4)-2,h=Math.floor(365.25*(r+4716))+Math.floor(30.6001*(o+1))+i-l-1524,c=h+(l=(a=Math.floor((h-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,p=Math.floor((c-122.1)/365.25),d=Math.floor(365.25*p),u=Math.floor((c-d)/30.6001);i=c-d-Math.floor(30.6001*u),(s=Math.floor((c-d)/20.6001))>13&&(p+=1,s-=12),s-=1,n=p-4716;var m=h-24e5,f=h-1948084,g=Math.floor(f/10631);f-=10631*g;var v=Math.floor((f-.1335)/(10631/30)),y=30*g+v;f-=Math.floor(v*(10631/30)+.1335);var b=Math.floor((f+28.5001)/29.5);13===b&&(b=12);for(var C=f-Math.floor(29.5001*b-29),S=0;S<t.length&&!(t[S]>m);S++);var x=S+16260,w=Math.floor((x-1)/12),E=w+1,k=x-12*w,T=m-t[S-1]+1;return(T+"").length>2&&(T=C,k=b,E=y),{year:E,month:k,date:T}},e.toGregorian=function(e,i,s){var n=s+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(n+.5),r=Math.floor((o-1867216.25)/36524.25),a=1524+(r=o+1+r-Math.floor(r/4)),l=Math.floor((a-122.1)/365.25),h=Math.floor(365.25*l),c=Math.floor((a-h)/30.6001),p=a-h-Math.floor(30.6001*c),d=c-(c>13.5?13:1),u=l-(d>2.5?4716:4715);return u<=0&&d--,new Date(u+"/"+d+"/"+p)}}(we||(we={}));var Ie=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,Oe=["sun","mon","tue","wed","thu","fri","sat"],Ae={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},Me={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},Pe=function(){function e(){}return e.dateFormat=function(e,t,i){var s=this,n=ot.getDependables(i,e,t.calendar),o=ee("parserObject.numbers",n),r=n.dateObject,a={isIslamic:ot.islamicRegex.test(t.calendar)};ye()&&t.isServerRendered&&(t=ot.compareBlazorDateFormats(t,e));var l=t.format||ot.getResultantPattern(t.skeleton,n.dateObject,t.type,!1,ye()?e:"");if(a.dateSeperator=ye()?ee("dateSeperator",r):ot.getDateSeparator(n.dateObject),le(l))me("Format options or type given must be invalid");else{l=ot.ConvertDateToWeekFormat(l),ye()&&(l=l.replace(/tt/,"a")),a.pattern=l,a.numMapper=ye()?re({},o):Le.getNumberMapper(n.parserObject,Le.getNumberingSystem(i));for(var h=0,c=l.match(Ie)||[];h<c.length;h++){var p=c[h],d=p.length,u=p[0];"K"===u&&(u="h");switch(u){case"E":case"c":ye()?a.weekday=ee("days."+ot.monthIndex[d],r):a.weekday=n.dateObject[ot.days]["stand-alone"][ot.monthIndex[d]];break;case"M":case"L":ye()?a.month=ee("months."+ot.monthIndex[d],r):a.month=n.dateObject[ot.month]["stand-alone"][ot.monthIndex[d]];break;case"a":a.designator=ye()?ee("dayPeriods",r):ee("dayPeriods.format.wide",r);break;case"G":var m=d<=3?"eraAbbr":4===d?"eraNames":"eraNarrow";a.era=ye()?ee("eras",r):ee("eras."+m,n.dateObject);break;case"z":a.timeZone=ee("dates.timeZoneNames",n.parserObject)}}}return function(e){return isNaN(e.getDate())?null:s.intDateFormatter(e,a)}},e.intDateFormatter=function(e,t){for(var i="",s=t.pattern.match(ot.dateParseRegex),n=this.getCurrentDateValue(e,t.isIslamic),o=0,r=s;o<r.length;o++){var a=r[o],l=a.length,h=a[0];"K"===h&&(h="h");var c=void 0,p="",d=void 0,u=void 0,m="";switch(h){case"M":case"L":c=n.month,l>2?i+=t.month[c]:d=!0;break;case"E":case"c":i+=t.weekday[Oe[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(d=!0,"d"===h)c=n.date;else if("f"===h){d=!1,u=!0;var f=(p=(p=e[Ae[h]]().toString()).substring(0,l)).length;if(l!==f){if(l>3)continue;for(var g=0;g<l-f;g++)p="0"+p.toString()}m+=p}else c=e[Ae[h]]();"h"===h&&(c=c%12||12);break;case"y":u=!0,m+=n.year,2===l&&(m=m.substr(m.length-2));break;case"a":var v=e.getHours()<12?"am":"pm";i+=t.designator[v];break;case"G":var y=e.getFullYear()<0?0:1,b=t.era[y];ae(b)&&(b=t.era[y?0:1]),i+=b||"";break;case"'":i+="''"===a?"'":a.replace(/\'/g,"");break;case"z":var C=e.getTimezoneOffset(),S=l<4?"+H;-H":t.timeZone.hourFormat;S=S.replace(/:/g,t.numMapper.timeSeparator),0===C?i+=t.timeZone.gmtZeroFormat:(u=!0,m=this.getTimeZoneValue(C,S)),m=t.timeZone.gmtFormat.replace(/\{0\}/,m);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;case"W":d=!0,c=ot.getWeekOfYear(e);break;default:i+=a}d&&(u=!0,m=this.checkTwodigitNumber(c,l)),u&&(i+=Le.convertValueParts(m,ot.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?we.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,s=t.split(";")[e>0?1:0],n=Math.abs(e);return s.replace(/HH?|mm/g,function(e){var t=e.length,s=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(s?n/60:n%60),t)})},e}(),Ne={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Re=["infinity","nan","group","decimal","exponential"],Be=function(){function e(){}return e.numberFormatter=function(e,t,i){var s,n=this,o=re({},t),r={},a={},l=ot.getDependables(i,e,"",!0),h=l.numericObject;a.numberMapper=ye()?re({},h):Le.getNumberMapper(l.parserObject,Le.getNumberingSystem(i),!0),a.currencySymbol=ye()?ee("currencySymbol",h):ot.getCurrencySymbol(l.numericObject,o.currency||Ke,t.altSymbol),a.percentSymbol=ye()?ee("numberSymbols.percentSign",h):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=ye()?ee("numberSymbols.minusSign",h):a.numberMapper.numberSymbols.minusSign;var c=a.numberMapper.numberSymbols;if(t.format&&!ot.formatRegex.test(t.format))r=ot.customFormat(t.format,a,l.numericObject);else{if(re(o,ot.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,ye()||(s=ot.getSymbolPattern(o.type,a.numberMapper.numberSystem,l.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),le(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),le(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!ye()&&(s=s.replace(/\u00A4/g,ot.defaultCurrency)),ye())r.nData=re({},{},ee(o.type+"nData",h)),r.pData=re({},{},ee(o.type+"pData",h)),"currency"===o.type&&t.currency&&ot.replaceBlazorCurrency([r.pData,r.nData],a.currencySymbol,t.currency);else{var p=s.split(";");r.nData=ot.getFormatData(p[1]||"-"+p[0],!0,a.currencySymbol),r.pData=ot.getFormatData(p[0],!1,a.currencySymbol),o.useGrouping&&(o.groupSeparator=c[Re[2]],o.groupData=this.getGroupingDetails(p[0]))}if(le(o.minimumFractionDigits)&&(o.minimumFractionDigits=r.nData.minimumFraction),le(o.maximumFractionDigits)){var d=r.nData.maximumFraction;o.maximumFractionDigits=le(d)&&o.isPercent?0:d}var u=o.minimumFractionDigits,m=o.maximumFractionDigits;le(u)||le(m)||u>m&&(o.maximumFractionDigits=u)}return re(r.nData,o),re(r.pData,o),function(e){return isNaN(e)?c[Re[1]]:isFinite(e)?n.intNumberFormatter(e,r,a):c[Re[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(ot.negativeDataRegex);if(i&&i[4]){var s=i[4],n=s.lastIndexOf(",");if(-1!==n){var o=s.split(".")[0];t.primary=o.length-n-1;var r=s.lastIndexOf(",",n-1);-1!==r&&(t.secondary=n-1-r)}}return t},e.checkValueRange=function(e,t,i,s){var n=s?"f":"s",o=0,r=Ne["l"+n],a=Ne["m"+n];if(le(e)||(this.checkRange(e,r,s),o++),le(t)||(this.checkRange(t,a,s),o++),2===o){if(!(e<t))return!0;me(a+"specified must be less than the"+r)}else i&&1===o&&me("Both"+a+"and"+a+"must be present");return!1},e.checkRange=function(e,t,i){var s=i?[0,20]:[1,21];(e<s[0]||e>s[1])&&me(t+"value must be within the range"+s[0]+"to"+s[1])},e.intNumberFormatter=function(e,t,i){var s;if(!le(t.nData.type)){e<0?(e*=-1,s=t.nData):s=0===e&&t.zeroData||t.pData;var n="";return s.isPercent&&(e*=100),s.groupOne?n=this.processSignificantDigits(e,s.minimumSignificantDigits,s.maximumSignificantDigits):(n=this.processFraction(e,s.minimumFractionDigits,s.maximumFractionDigits),s.minimumIntegerDigits&&(n=this.processMinimumIntegers(n,s.minimumIntegerDigits))),"scientific"===s.type&&(n=(n=e.toExponential(s.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[Re[4]])),n=n.replace(".",i.numberMapper.numberSymbols[Re[3]]),s.useGrouping&&(n=this.groupNumbers(n,s.groupData.primary,s.groupSeparator||",",i.numberMapper.numberSymbols[Re[3]]||".",s.groupData.secondary)),n=Le.convertValueParts(n,ot.latnParseRegex,i.numberMapper.mapper),"N/A"===s.nlead?s.nlead:s.nlead+n+s.nend}},e.processSignificantDigits=function(e,t,i){var s=e+"";return s.length<t?e.toPrecision(t):+(s=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,s,n){for(var o=!ae(n)&&0!==n,r=e.split(s),a=r[0],l=a.length,h="";l>t;)h=a.slice(l-t,l)+(h.length?i+h:""),l-=t,o&&(t=n,o=!1);return r[0]=a.slice(0,l)+(h.length?i:"")+h,r.join(s)},e.processFraction=function(e,t,i){var s=(e+"").split(".")[1],n=s?s.length:0;if(t&&n<t){var o="";if(0!==n){o+=e;for(var r=0;r<t-n;r++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!ae(i)&&(n>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),s=i[0],n=s.length;if(n<t){for(var o=0;o<t-n;o++)s="0"+s;i[0]=s}return i.join(".")},e}(),He=/^[0-9]*$/,Fe={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},je=function(){function e(){}return e.dateParser=function(e,t,i){var s=this,n=ot.getDependables(i,e,t.calendar),o=Le.getCurrentNumericOptions(n.parserObject,Le.getNumberingSystem(i),!1,ye()),r={};ye()&&t.isServerRendered&&(t=ot.compareBlazorDateFormats(t,e));var a,l=t.format||ot.getResultantPattern(t.skeleton,n.dateObject,t.type,!1,ye()?e:""),h="";if(le(l))me("Format options or type given must be invalid");else{l=ot.ConvertDateToWeekFormat(l),r={isIslamic:ot.islamicRegex.test(t.calendar),pattern:l,evalposition:{},culture:e};for(var c=l.match(ot.dateParseRegex)||[],p=c.length,d=0,u=0,m=!1,f=o.numericRegex,g=ye()?n.parserObject.numbers:Le.getNumberMapper(n.parserObject,Le.getNumberingSystem(i)),v=0;v<p;v++){var y=c[v],b=y.length,C="K"===y[0]?"h":y[0],S=void 0,x=void 0,w=Me[C],E=2===b?"":"?";switch(m&&(d=u,m=!1),C){case"E":case"c":var k=void 0;k=ye()?ee("days."+ot.monthIndex[b],n.dateObject):n.dateObject[ot.days]["stand-alone"][ot.monthIndex[b]];var T=Le.reverseObject(k);h+="("+Object.keys(T).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(x=!0,("M"===C||"L"===C)&&b>2){var L=void 0;L=ye()?ee("months."+ot.monthIndex[b],n.dateObject):n.dateObject.months["stand-alone"][ot.monthIndex[b]],r[w]=Le.reverseObject(L),h+="("+Object.keys(r[w]).join("|")+")"}else if("f"===C){if(b>3)continue;S=!0,h+="("+f+f+"?"+f+"?)"}else S=!0,h+="("+f+f+E+")";"h"===C&&(r.hour12=!0);break;case"W":h+="("+f+(1===b?"?":"")+f+")";break;case"y":x=S=!0,h+=2===b?"("+f+f+")":"("+f+"{"+b+",})";break;case"a":x=!0;var D=ye()?ee("dayPeriods",n.dateObject):ee("dayPeriods.format.wide",n.dateObject);r[w]=Le.reverseObject(D),h+="("+Object.keys(r[w]).join("|")+")";break;case"G":x=!0;var I=b<=3?"eraAbbr":4===b?"eraNames":"eraNarrow";r[w]=Le.reverseObject(ye()?ee("eras",n.dateObject):ee("eras."+I,n.dateObject)),h+="("+Object.keys(r[w]).join("|")+"?)";break;case"z":x=0!==(new Date).getTimezoneOffset(),r[w]=ee("dates.timeZoneNames",n.parserObject);var O=r[w],A=(a=b<4)?"+H;-H":O.hourFormat;A=A.replace(/:/g,g.timeSeparator),h+="("+this.parseTimeZoneRegx(A,O,f)+")?",m=!0,u=a?6:12;break;case"'":h+="("+y.replace(/\'/g,"")+")?";break;default:h+="([\\D])"}x&&(r.evalposition[w]={isNumber:S,pos:v+1+d,hourOnly:a}),v!==p-1||ae(h)||(r.parserRegex=new RegExp("^"+h+"$","i"))}}return function(e){var t=s.internalDateParse(e,r,o);if(ae(t)||!Object.keys(t).length)return null;if(r.isIslamic){var i={},n=t.year,a=t.day,l=t.month,h=n?n+"":"",c=2===h.length;n&&l&&a&&!c||(i=we.getHijriDate(new Date)),c&&(n=parseInt((i.year+"").slice(0,2)+h,10));var p=we.toGregorian(n||i.year,l||i.month,a||i.date);t.year=p.getFullYear(),t.month=p.getMonth()+1,t.day=p.getDate()}return s.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var s=e.year,n=e.designator,o=e.timeZone;if(!le(s)){if((s+"").length<=2)s+=100*Math.floor(i.getFullYear()/100);i.setFullYear(s)}for(var r=0,a=["hour","minute","second","milliseconds","month","day"];r<a.length;r++){var l=a[r],h=e[l];if(le(h)&&"day"===l&&i.setDate(1),!le(h))if("month"===l){if((h-=1)<0||h>11)return new Date("invalid");var c=i.getDate();i.setDate(1),i[Fe[l]](h);var p=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(c<p?c:p)}else{if("day"===l){var d=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>d)return null}i[Fe[l]](h)}}if(!le(n)){var u=i.getHours();"pm"===n?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!le(o)){var m=o-i.getTimezoneOffset();0!==m&&i.setMinutes(i.getMinutes()+m)}return i},e.internalDateParse=function(e,t,i){var s=e.match(t.parserRegex),n={hour:0,minute:0,second:0};i.numericRegex;if(ae(s))return null;for(var o=0,r=Object.keys(t.evalposition);o<r.length;o++){var a=r[o],l=t.evalposition[a],h=s[l.pos];if(l.isNumber)n[a]=this.internalNumberParser(h,i);else if("timeZone"!==a||le(h))h="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?h:h[0].toUpperCase()+h.substring(1).toLowerCase(),n[a]=t[a][h];else{var c=l.pos,p=void 0,d=s[c+1],u=!le(d);l.hourOnly?p=60*this.getZoneValue(u,d,s[c+4],i):(p=60*this.getZoneValue(u,d,s[c+7],i),p+=this.getZoneValue(u,s[c+4],s[c+10],i)),ae(p)||(n[a]=p)}}return t.hour12&&(n.hour12=!0),n},e.internalNumberParser=function(e,t){return e=Le.convertValueParts(e,t.numberParseRegex,t.numericPair),He.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var s,n,o=t.gmtFormat,r="("+i+")("+i+")";return s=e.replace("+","\\+"),n=(s=-1!==e.indexOf("HH")?s.replace(/HH|mm/g,"("+r+")"):s.replace(/H|m/g,"("+r+"?)")).split(";").map(function(e){return o.replace("{0}",e)}),s=n.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,s){var n=e?t:i;if(!n)return 0;var o=this.internalNumberParser(n,s);return e?-o:o},e}(),Ve=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,ze=/,/g,_e=["minusSign","infinity"],qe=function(){function e(){}return e.numberParser=function(e,t,i){var s,n=this,o=ot.getDependables(i,e,"",!0),r={custom:!0};ot.formatRegex.test(t.format)||!t.format?(re(r,ot.getProperNumericSkeleton(t.format||"N")),r.custom=!1,r.fractionDigits||t.maximumFractionDigits&&(r.maximumFractionDigits=t.maximumFractionDigits)):re(r,ot.customFormat(t.format,null,null));var a,l=ee("numbers",o.parserObject);if(s=Le.getCurrentNumericOptions(o.parserObject,Le.getNumberingSystem(i),!0,ye()),r.symbolRegex=Le.getSymbolRegex(Object.keys(s.symbolMatch)),r.infinity=s.symbolNumberSystem[_e[1]],ye())r.nData=re({},{},ee(r.type+"nData",l)),r.pData=re({},{},ee(r.type+"pData",l)),"currency"===r.type&&t.currency&&ot.replaceBlazorCurrency([r.pData,r.nData],ee("currencySymbol",l),t.currency);else if(a=ot.getSymbolPattern(r.type,s.numberSystem,o.numericObject,r.isAccount)){var h=(a=a.replace(/\u00A4/g,ot.defaultCurrency)).split(";");r.nData=ot.getFormatData(h[1]||"-"+h[0],!0,""),r.pData=ot.getFormatData(h[0],!0,"")}return function(e){return n.getParsedNumber(e,r,s)}},e.getParsedNumber=function(e,t,i){var s,n,o,r,a,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=Le.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=Le.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var h=e.match(Ve);if(ae(h))return NaN;r=h[1],o=h[2];var c=h[5];return a=h[6],n=(s=t.custom?r===t.nData.nlead&&a===t.nData.nend:-1!==r.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(ze,""),c&&(o+=c),l=+o,("percent"===t.type||n)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(l=this.convertMaxFracDigits(o,t,l,s)),s&&(l*=-1),l},e.convertMaxFracDigits=function(e,t,i,s){var n=e.split(".");return n[1]&&n[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},e}(),We=function(){function e(e){this.ranArray=[],this.boundedEvents={},ae(e)||(this.context=e)}return e.prototype.on=function(e,t,i,s){if(!ae(t)){var n=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:n}]:ae(s)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:n}):-1===this.ranArray.indexOf(s)&&(this.ranArray.push(s),this.boundedEvents[e].push({handler:t,context:n,id:s}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var s=ee(e,this.boundedEvents);if(t){for(var n=0;n<s.length;n++)if(i){if(s[n].id===i){s.splice(n,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===s[n].handler){s.splice(n,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,i,s){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var n=ee(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(n,t,i,s,0);for(var o=0,r=n;o<r.length;o++){var a=r[o];a.handler.call(a.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,s,n){var o=this,r=n===e.length-1;if(n<e.length){var a=e[n],l=a.handler.call(a.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then(function(l){if(l="string"==typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,re(t,t,l,!0),!i||!r)return o.blazorCallback(e,t,i,s,n+1);i.call(a.context,t)}).catch(function(e){s&&s.call(a.context,"string"==typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)})}else{if(!i||!r)return this.blazorCallback(e,t,i,s,n+1);i.call(a.context,t)}}},e.prototype.dateReviver=function(e,t){return ye&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,s=e;i<s.length;i++){if(s[i].handler===t)return!0}return!1},e}(),Ue=new We,Ge=!1,Ye={},Xe="en-US",Ke="USD",Ze=["numericObject","dateObject"],Qe=function(){function e(e){e&&(this.culture=e)}return e.prototype.getDateFormat=function(e){return Pe.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},Ye)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=Ke),ye()&&e&&!e.format&&(e.minimumFractionDigits=0),Be.numberFormatter(this.getCulture(),e||{},Ye)},e.prototype.getDateParser=function(e){return je.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},Ye)},e.prototype.getNumberParser=function(e){return ye()&&e&&!e.format&&(e.minimumFractionDigits=0),qe.numberParser(this.getCulture(),e||{format:"N"},Ye)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return ot.getActualDateTimeFormat(this.getCulture(),e,Ye,t)},e.prototype.getNumberPattern=function(e,t){return ot.getActualNumberFormat(this.getCulture(),e,Ye,t)},e.prototype.getFirstDayOfWeek=function(){return ot.getWeekData(this.getCulture(),Ye)},e.prototype.getCulture=function(){return this.culture||Xe},e}();function Je(e){Xe=e,Ue.notify("notifyExternalChange",{locale:Xe})}function $e(e){Ke=e,Ue.notify("notifyExternalChange",{currencyCode:Ke})}function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,s=e;i<s.length;i++){var n=s[i];re(Ye,n,{},!0)}}function tt(e){void 0===e&&(e=!0),Ge=e,Ue.notify("notifyExternalChange",{enableRtl:Ge})}function it(e,t){var i=ot.getDependables(Ye,e,"",!0)[Ze[0]],s=ot.getDependables(Ye,e,"")[Ze[1]],n=ee("defaultNumberingSystem",i),o=ye()?ee("numberSymbols",i):ee("symbols-numberSystem-"+n,i),r=ot.getSymbolPattern(t||"decimal",n,i,!1);return re(o,ot.getFormatData(r,!0,"",!0),{dateSeparator:ot.getDateSeparator(s)})}function st(e,t){var i=ot.getDependables(Ye,e,"",!0);return ot.getCurrencySymbol(i.numericObject,t)}function nt(e){return ot.getDependables(Ye,"",e,!1)[Ze[1]]}var ot,rt={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],s=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;var o="sun";e.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(t,i,s,n,o){var r,a=s||"date";if(o)r=d({skeleton:t},o).format||d({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(r=ee(a+"Formats."+t,i),"dateTime"===a){var l=ee("dateFormats."+t,i),h=ee("timeFormats."+t,i);r=r.replace("{1}",l).replace("{0}",h)}}else r=ee("dateTimeFormats.availableFormats."+t,i);le(r)&&"yMd"===t&&(r="M/d/y")}return r}function h(t,i,s,n){var o={},r=s||"gregorian";if(o.parserObject=Le.getMainObject(t,i)||(ye()?e.blazorDefaultObject:e.defaultObject),n)o.numericObject=ee("numbers",o.parserObject);else{var a=ye()?"dates":"dates.calendars."+r;o.dateObject=ee(a,o.parserObject)}return o}function c(e,t,i,s){return ee(e+"Formats-numberSystem-"+t+(s?".accounting":".standard"),i)||(s?ee(e+"Formats-numberSystem-"+t+".standard",i):"")}function p(t){var i=t.match(e.dateConverterMapper);if(i&&ye()){var s=3===i[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,s)}return t}function d(e,t){var i=e.format||e.skeleton,s=ee((t||"en-US")+"."+i,rt);return s||(s=ee("en-US."+i,rt)),s&&(s=p(s),e.format=s.replace(/tt/,"a")),e}function u(t){var i=t.match(e.formatRegex),s={},n=i[1].toUpperCase();return s.isAccount="A"===n,s.type=e.patternMatcher[n],t.length>1&&(s.fractionDigits=parseInt(i[2],10)),s}function m(i,s,n,o){var r=o?{}:{nlead:"",nend:""},a=i.match(e.customRegex);if(a){o||(r.nlead=f(a[1],n),r.nend=f(a[10],n),r.groupPattern=a[4]);var l=a[7];if(l&&s){var h=l.match(t);ae(h)?r.minimumFraction=0:r.minimumFraction=h.length,r.maximumFraction=l.length-1}}return r}function f(t,i){return t?t.replace(e.defaultCurrency,i):""}function g(e,t,i){return ee("currencies."+t+(i?"."+i:".symbol"),e)||ee("currencies."+t+".symbol-alt-narrow",e)||"$"}function v(t,s,n){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},r=t.match(e.customRegex);if(ae(r)||""===r[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=r[1],o.nend=r[10];var a=r[6];o.useGrouping=-1!==a.indexOf(","),a=a.replace(/,/g,"");var l=r[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),ae(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),ae(s)?re(o,y([o.nlead,o.nend],"%","%")):(re(o,y([o.nlead,o.nend],"$",s.currencySymbol)),o.isCurrency||re(o,y([o.nlead,o.nend],"%",s.percentSymbol))),!ae(n)){var h=c(o.type,s.numberMapper.numberSystem,n,!1);o.useGrouping&&(o.groupSeparator=s.numberMapper.numberSymbols[i[2]],o.groupData=Be.getGroupingDetails(h.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function y(e,t,i){for(var s={nlead:e[0],nend:e[1]},n=0;n<2;n++){var o=e[n],r=o.indexOf(t);if(-1!==r&&(r<o.indexOf("'")||r>o.lastIndexOf("'"))){s[a[n]]=o.substr(0,r)+i+o.substr(r+1),s[a[t]]=!0,s.type=s.isCurrency?"currency":"percent";break}}return s}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=l,e.getDependables=h,e.getSymbolPattern=c,e.ConvertDateToWeekFormat=p,e.compareBlazorDateFormats=d,e.getProperNumericSkeleton=u,e.getFormatData=m,e.getCurrencySymbol=g,e.customFormat=function(e,t,i){for(var s={},n=e.split(";"),o=["pData","nData","zeroData"],r=0;r<n.length;r++)s[o[r]]=v(n[r],t,i);return ae(s.nData)&&(s.nData=re({},s.pData),s.nData.nlead=ae(t)?"-"+s.nData.nlead:t.minusSymbol+s.nData.nlead),s},e.isCurrencyPercent=y,e.getDateSeparator=function(e){var t=(ee("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){var r=h(i,e,t.calendar);ye()&&(t=d(t,e));var a=t.format||l(t.skeleton,r.dateObject,t.type);if(o){if(-1!==(a=a.replace(s,function(e){return n[e]})).indexOf("z")){var c=a.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=Le.getNumberMapper(r.parserObject,Le.getNumberingSystem(i)),u.timeZone=ee("dates.timeZoneNames",r.parserObject);var m=(new Date).getTimezoneOffset(),f=c<4?"+H;-H":u.timeZone.hourFormat;f=f.replace(/:/g,u.numMapper.timeSeparator),0===m?p=u.timeZone.gmtZeroFormat:(p=Pe.getTimeZoneValue(m,f),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),a=a.replace(/[z]+/,'"'+p+'"')}a=a.replace(/ $/,"")}return a},e.getActualNumberFormat=function(t,i,s,n){var o,r,a=h(s,t,"",!0),l={custom:!0},p=a.numericObject,d={},f=(i.format||"").match(e.currencyFormatRegex),v=e.formatRegex.test(i.format)?u(i.format||"N"):{},y={};if(f){y.numberMapper=ye()?re({},a.numericObject):Le.getNumberMapper(a.parserObject,Le.getNumberingSystem(s),!0);var b=ye()?ee("currencySymbol",a.numericObject):g(a.numericObject,i.currency||Ke,i.altSymbol),C=c("currency",y.numberMapper.numberSystem,a.numericObject,/a/i.test(i.format)),S=(C=C.replace(/\u00A4/g,b)).split(";");d.hasNegativePattern=!!ye()||S.length>1,d.nData=ye()?ee(v.type+"nData",p):m(S[1]||"-"+S[0],!0,b),d.pData=ye()?ee(v.type+"pData",p):m(S[0],!1,b),f[2]||i.minimumFractionDigits||i.maximumFractionDigits||(o=m(C.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(re(l,u(i.format||"N")),l.custom=!1,r="###0",(l.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||o)&&(l.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=l.fractionDigits),r=function(e,t,i){e+=".";for(var s=0;s<t;s++)e+="0";if(t<i)for(var n=i-t,o=0;o<n;o++)e+="#";return e}(r,o||l.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)),i.minimumIntegerDigits&&(r=function(e,t){for(var i=e.split("."),s="",n=0;n<t;n++)s+="0";return i[1]?s+"."+i[1]:s}(r,i.minimumIntegerDigits)),i.useGrouping&&(r=function(e){var t=e.split("."),i=t[0],s=3-i.length%3;e="";for(var n=(i=(s&&1===s?"#":2===s?"##":"")+i).length-1;n>0;n-=3)e=","+i[n-2]+i[n-1]+i[n]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(r)),"currency"===l.type||l.type&&ye()){ye()&&"currency"!==l.type&&(d.pData=ee(l.type+"pData",p),d.nData=ee(l.type+"nData",p));var x=r;r=d.pData.nlead+x+d.pData.nend,(d.hasNegativePattern||ye())&&(r+=";"+d.nData.nlead+x+d.nData.nend)}"percent"!==l.type||ye()||(r+=" %")}else r=i.format.replace(/\'/g,'"');return Object.keys(y).length>0&&(r=n?r:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+ee("numberMapper.numberSymbols.group",t)+i[1].replace(".",ee("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",ee("numberMapper.numberSymbols.decimal",t));return e}(r,y)),r},e.getWeekData=function(e,t){var i=o,s=ee("supplemental.weekData.firstDay",t),n=e;return/en-/.test(n)&&(n=n.slice(3)),n=n.slice(0,2).toUpperCase()+n.substr(2),s&&(i=s[n]||o),r[i]},e.replaceBlazorCurrency=function(e,t,i){var s=ee(i||"",De);if(t!==s)for(var n=0,o=e;n<o.length;n++){var r=o[n];r.nend=r.nend.replace(t,s),r.nlead=r.nlead.replace(t,s)}},e.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),s=i.getDay();s=s>=0?s:s+7;var n=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(s<4){if((t=Math.floor((n+s-1)/7)+1)>52){var o=new Date(this.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((n+s-1)/7);return t}}(ot||(ot={}));var at=/^(.*?):[ \t]*([^\r\n]*)$/gm,lt="GET",ht=function(){function e(e,t,i,s){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():lt,this.mode=!!ae(i)||i):"object"==typeof e&&(this.options=e,oe(this,this.options)),this.type=this.type?this.type.toUpperCase():lt,this.contentType=void 0!==this.contentType?this.contentType:s}return e.prototype.send=function(e){var t=this;this.data=ae(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise(function(e,s){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,s)},ae(t.onLoad)||(t.httpRequest.onload=t.onLoad),ae(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),ae(t.onAbort)||(t.httpRequest.onabort=t.onAbort),ae(t.onError)||(t.httpRequest.onerror=t.onError),ae(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),ae(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(ae(t.data)?null:t.data)})},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(e){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var s=at.exec(this.httpRequest.getAllResponseHeaders());s;)t[s[1].toLowerCase()]=s[2],s=at.exec(this.httpRequest.getAllResponseHeaders());return ae(i=t[e.toLowerCase()])?null:i},e}(),ct=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,pt=/msie|trident/i,dt=/Trident\/7\./,ut=/(ipad|iphone|ipod touch)/i,mt=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,ft=/android/i,gt=/trident|windows phone|edge/i,vt=/(version)[ \/]([\w.]+)/i,yt={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var bt=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],s=0,n=Object.keys(yt);s<n.length;s++){var o=n[s];if(i=e.userAgent.match(yt[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(dt)){t.name="msie";break}var r=e.userAgent.match(vt);"safari"===t.name&&r&&(t.version=r[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer&&!e.isWindows?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var s=window.browserDetails;return void 0===s[t]?s[t]=i.test(e.userAgent):s[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return le(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",pt)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return le(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return le(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return le(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",ct)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",ut)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",mt)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",ft)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return le(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(le(window.cordova)&&le(window.PhoneGap)&&le(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",gt)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return le(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return le(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return le(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return le(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),Ct=function(){function e(){}return e.addOrGetEventData=function(e){return e?"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[]):[]},e.add=function(t,i,s,n,o){var r,a=e.addOrGetEventData(t);r=o?ce(s,o):s,n&&(r=r.bind(n));for(var l=i.split(" "),h=0;h<l.length;h++)a.push({name:l[h],listener:s,debounce:r}),bt.isIE?t.addEventListener(l[h],r):t.addEventListener(l[h],r,{passive:!1});return r},e.remove=function(t,i,s){for(var n=e.addOrGetEventData(t),o=i.split(" "),r=function(e){var i,r=-1;n&&0!==n.length&&n.some(function(t,n){return t.name===o[e]&&t.listener===s&&(r=n,i=t.debounce,!0)}),-1!==r&&n.splice(r,1),i&&t.removeEventListener(o[e],i)},a=0;a<o.length;a++)r(a)},e.clearEvents=function(t){var i,s;s=re([],s,i=e.addOrGetEventData(t));for(var n=0;n<s.length;n++)t.removeEventListener(s[n].name,s[n].debounce),i.shift()},e.trigger=function(t,i,s){for(var n=0,o=e.addOrGetEventData(t);n<o.length;n++){var r=o[n];r.name===i&&r.debounce.call(this,s)}},e}(),St=new RegExp("\\n|\\r|\\s\\s+","g"),xt=new RegExp(/'|"/g),wt=new RegExp("if ?\\("),Et=new RegExp("else if ?\\("),kt=new RegExp("else"),Tt=new RegExp("for ?\\("),Lt=new RegExp("(/if|/for)"),Dt=new RegExp("\\((.*)\\)",""),It=new RegExp("^[0-9]+$","g"),Ot=new RegExp("[\\w\"'.\\s+]+","g"),At=new RegExp('"(.*?)"',"g"),Mt=new RegExp("[\\w\"'@#$.\\s+]+","g"),Pt=new RegExp("\\${([^}]*)}","g"),Nt=/^\..*/gm,Rt=/\\/gi,Bt=/\\\\/gi,Ht=new RegExp("[\\w\"'@#$.\\s+]+","g"),Ft=/\window\./gm;function jt(e,t){var i=function(e,t,i){var s=0,n=[],o=e.match(/class="([^\"]+|)\s{2}/g),r="";o&&o.forEach(function(t){r=t.replace(/\s\s+/g," "),e=e.replace(t,r)});return e.replace(St,"").replace(At,"'$1'").replace(Pt,function(e,o,r,a){var l=o.match(Dt);if(l){var h=l[1];if(Et.test(o))o='";} '+o.replace(l[1],h.replace(Ot,function(e){return Vt(e=e.trim(),!xt.test(e)&&-1===n.indexOf(e),t,n)}))+'{ \n str = str + "';else if(wt.test(o))o='"; '+o.replace(l[1],h.replace(Mt,function(e){return qt(e,t,n,!0)}))+'{ \n str = str + "';else if(Tt.test(o)){var c=l[1].split(" of ");o='"; '+o.replace(l[1],function(e){return n.push(c[0]),n.push(c[0]+"Index"),"var i"+(s+=1)+"=0; i"+s+" < "+Vt(c[1],!0,t,n)+".length; i"+s+"++"})+"{ \n var "+c[0]+"= "+Vt(c[1],!0,t,n)+"[i"+s+"]; \n var "+c[0]+"Index=i"+s+'; \n str = str + "'}else{var p=o.split("("),d=i&&i.hasOwnProperty(p[0])?"this.":"global";d=/\./.test(p[0])?"":d;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===d?t+"."+l[1]:l[1]);if(Ft.test(o)&&/\]\./gm.test(o)||/\@|\$|\#/gm.test(o)){/\@|\$|\#|\]\./gm.test(o)&&(o='"+ '+("global"===d?"":d)+o.replace(l[1],h.replace(Ht,function(e){return qt(e,t,n)}))+'+ "')}else o='" + '+("global"===d?"":d)+o.replace(h,Vt(l[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==d,t,n))+'+"'}}else kt.test(o)?o='"; '+o.replace(kt,'} else { \n str = str + "'):o.match(Lt)?o=o.replace(Lt,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(o)?(o.match(Rt)&&(o=_t(o)),o='"+'+zt(o,-1===n.indexOf(o),t,n)+'"]+"'):o=o.match(Rt)?'"+'+zt(o=_t(o),-1===n.indexOf(o),t,n)+'"]+"':'"+'+Vt(o.replace(/\,/gi,"+"+t+"."),-1===n.indexOf(o),t,n)+'+"';return o})}(e,"data",t);return new Function("data",'var str="'+i+'"; return str;').bind(t)}function Vt(e,t,i,s,n){return n&&""===e?e:t&&!It.test(e)&&-1===s.indexOf(e.split(".")[0])?i+"."+e:e}function zt(e,t,i,s){return t&&!It.test(e)&&-1===s.indexOf(e.split(".")[0])?i+'["'+e:e}function _t(e){return e=e.match(Bt)?e:e.replace(Rt,"\\\\")}function qt(e,t,i,s){e=e.trim();if(/\window\./gm.test(e))return e;var n=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=zt(e,-1===i.indexOf(e),t,i)+'"]'),Nt.test(e)?function(e,t,i,s){return!t||It.test(e)||-1!==s.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):Vt(e,!n.test(e)&&-1===i.indexOf(e),t,i,s)}var Wt=/^[\n\r.]+\<tr|^\<tr/,Ut=/^[\n\r.]+\<svg|^\<path|^\<g/,Gt={};function Yt(){return"-"+Math.random().toString(36).substr(2,5)}function Xt(e,t){var i=ei.compile(e,t);return function(e,t,s,n,o,r,a){var l=i(e,t,s,a);if(ye()&&!o){var h=n+Yt();if(Gt[n]||(Gt[n]=[]),ae(r))e.BlazorTemplateId=h,Gt[n].push(e);else for(var c=0,p=Object.keys(Gt[n][r]);c<p.length;c++){var d=p[c];"BlazorTemplateId"!==d&&e[d]&&(Gt[n][r][d]=e[d]),"BlazorTemplateId"===d&&(h=Gt[n][r][d])}return"rowTemplate"===s?[yi("tr",{id:h,className:"e-blazor-template"})]:[yi("div",{id:h,className:"e-blazor-template"})]}return"string"==typeof l?Ut.test(l)?yi("svg",{innerHTML:l}).childNodes:yi(Wt.test(l)?"table":"div",{innerHTML:l}).childNodes:l}}function Kt(e,t,i,s,n){if(ye()){window.sfBlazor.updateTemplate(t,Gt[e],e,i,n),!1!==s&&(Gt[e]=[])}}function Zt(e,t,i){var s=document.getElementById(e);if(s)for(var n=s.getElementsByClassName("blazor-inner-template"),o=0;o<n.length;o++){var r=" ";r=ae(i)?n[o].getAttribute("data-templateId"):n[i].getAttribute("data-templateId");var a=document.getElementById(r);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)ae(i)?n[o].appendChild(a.childNodes[0]):(n[i].appendChild(a.childNodes[0]),o=n.length)}}function Qt(e){ei.compile=e.compile}function Jt(){return ei.compile}var $t,ei={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),jt(e,t)},e}())).compile},ti=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ii=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,si=/^(\.|#)/,ni={".":"className","#":"id"},oi="(?=.*?\\b{value}\\b)",ri={className:"attributes.className",id:"attributes.id",tagName:"tagName"},ai=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],li=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],hi=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],ci=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],pi=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],di=["Script","style"],ui={tabindex:"tabIndex"},mi=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,fi=/^<\/([-A-Za-z0-9_]+)[^>]*>/,gi=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(e){function t(e,t){t&&e&&e.forEach(function(e){return se(e)&&(e.parent&&i(e),e.parent=t),e})}function i(e){var t=e.parent;if(t){var i=t.children.indexOf(e);-1!==i&&t.children.splice(i)}return t}function s(e,t){var i=e.match(si),s={};if(i){var n=ni[i[0]];if("className"===n){var o=t.filter(function(e){return e.hasOwnProperty("className")})[0],r=!1;o||(r=!0,o={});var a=o[n]||"";o[n]=a+oi.replace("{value}",e.replace(".","")),r&&t.push(o)}else s[n]=e.replace(i[0],""),t.push(s)}else t.push({tagName:e})}function n(e,t,i,s){if(e.children){var o=e.children.filter(function(e){if("string"!=typeof e){for(var i=!0,s=0,n=t;s<n.length;s++){var o=n[s],r=Object.keys(o)[0],a=o[r],l=ee(ri[r],e);if("className"===r){if(!new RegExp("^"+a+".*$").test(l)){i=!1;break}}else if(l!==a){i=!1;break}}return i}return!1});return s||o.length&&!i||e.children.forEach(function(e){se(e)&&(o=o.concat(n(e,t,i)))}),o}return[]}function o(e){for(var t,i=[],s=[],n=[];e;){t=!0;var o=r(s);if(o&&a(di,o))e=e.replace(new RegExp("([\\s\\S]*?)</"+r(n)+"[^>]*>"),function(e,t){return u(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""}),d("",r(s));else{if(0===e.indexOf("</"))(l=e.match(fi))&&(e=e.substring(l[0].length),l[0].replace(fi,d)),t=!1;else if(0===e.indexOf("<")){var l;(l=e.match(mi))&&(e=e.substring(l[0].length),l[0].replace(mi,p)),t=!1}if(t){var h=e.indexOf("<"),c=h<0?e:e.substring(0,h);e=h<0?"":e.substring(h),u(c)}}e}function p(e,t,o){if(t=t.toLowerCase(),a(li,t))for(;r(s)&&a(hi,r(s));)d("",r(s));a(ci,t)&&r(s)&&d("",t);var l=a(ai,t);l||s.push(t);var h={};o.replace(gi,function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var n=i[2]?i[2]:i[3]?i[3]:i[4]?i[4]:a(pi,t)?t:"";if("style"===t){for(var o=n.split(";"),r={},l=0,c=o.length;l<c;l++){var p=o[l].split(":");r[p[0]]=p[1]}n=r}t=ui[t]||t,h[t]=n}),h["data-id"]=Yt();var c={tagName:t,attributes:h};if(l){var p=n[0]||i;void 0===p.children&&(p.children=[]),c.parent=p,p.children.push(c)}else n.unshift(c)}function d(e,t){var o;if(t)for(o=s.length-1;o>=0&&s[o]!==t;o--);else o=0;if(o>=0){for(var r=n.length-1;r>=o;r--){var a=n.shift();if(0===n.length)i.push(a);else{var l=n[0];void 0===l.children&&(l.children=[]),a.parent=l,l.children.push(a)}}s.length=o}}function u(e){if(0===n.length)i.push(e);else{var t=n[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return i}function r(e){return e[e.length-1]}function a(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){var i=[],s=re({},{},t,!0);if(!ae(t)&&Object.keys(t).length&&(s.innerHTML&&(i=o(s.innerHTML),delete s.innerHTML),s.attrs&&(re(s,s.attrs),delete s.attrs),s.styles)){for(var n=s.styles.split(";"),r={},a=0,l=n.length;a<l;a++){var h=n[a].split(":");r[h[0]]=h[1]}delete s.styles,s.style=r}return{tagName:e,attributes:s||{},children:i}},e.assignParent=t,e.append=function(e,i){t(e,i),i.children?i.children=i.children.concat(e):i.children=[].concat(e)},e.prepend=function(e,i){if(t(e,i),i.children&&i.children.length)for(var s=e.length-1;s>=0;s--)i.children.unshift(e[s]);else i.children=[],i.children.concat(e)},e.detach=i,e.vDomSelector=function e(t){for(var i=t.ele,o=t.selector,r=t.selectAll,a=t.immediateParent,l=o.split(" "),h=i,c=0,p=l.length;c<p;c++){var d=!1,u=h,m=l[c],f=[];if(ti.test(m))s(m,f);else if(-1===m.indexOf(">"))for(var g=0,v=m.match(ii);g<v.length;g++)s(v[g],f);else if(-1!==m.indexOf(">")){d=!0;for(var y=i,b=void 0,C=0,S=0,x=m.split(">");S<x.length;S++){var w=x[S];if(!y)break;if(y.length){for(var E=[],k=0,T=y;k<T.length;k++){var L=T[k];E=E.concat(e({ele:L,selector:w,selectAll:r,immediateParent:!!C}))}b=E}else b=e({ele:y,selector:w,selectAll:r,immediateParent:!!C});C++,y=b}b&&(h=b)}if(!d)if(u.length){for(var D=[],I=0,O=u;I<O.length;I++){var A=O[I];D=D.concat(n(A,f,r,a))}h=D}else h=n(u,f,r,a)}return r?h:h[0]||null},e.accessElement=n,e.ConvertHTMLToJSon=o,e.cloneNode=function(e,t){return se(e)?t?re({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style?e.attributes.style=re({},t):e.attributes.style=re(e.attributes.style,t)}}($t||($t={}));var vi=/^svg|^path|^g/;function yi(e,t){var i=vi.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t?i:(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&Di(i,t.attrs),i)}function bi(e,t){for(var i=Si(t),s=0,n=e;s<n.length;s++){var o=n[s];if(o&&i)for(var r=0,a=i;r<a.length;r++){var l=a[r];if(se(o)){var h=ee("attributes.className",o);ae(h)?te("attributes.className",l,o):new RegExp("\\b"+l+"\\b","i").test(h)||te("attributes.className",h+" "+l,o)}else o.classList.contains(l)||o.classList.add(l)}}return e}function Ci(e,t){for(var i=Si(t),s=0,n=e;s<n.length;s++){var o=n[s];if(o&&i){var r=se(o);if(r?ee("attributes.className",o):""!==o.className)for(var a=0,l=i;a<l.length;a++){var h=l[a];if(r){var c=ee("attributes.className",o).split(" "),p=c.indexOf(h);-1!==p&&c.splice(p,1),te("attributes.className",c.join(" "),o)}else o.classList.remove(h)}}}return e}function Si(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function xi(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function wi(e,t,i){if(se(t))$t.prepend(e,t);else{for(var s=document.createDocumentFragment(),n=0,o=e;n<o.length;n++){var r=o[n];s.appendChild(r)}t.insertBefore(s,t.firstElementChild),i&&ki(t)}return e}function Ei(e,t,i){if(se(t))$t.append(e,t);else{for(var s=document.createDocumentFragment(),n=0,o=e;n<o.length;n++){var r=o[n];s.appendChild(r)}t.appendChild(s),i&&ki(t)}return e}function ki(e){e.querySelectorAll("script").forEach(function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),Ti(t)})}function Ti(e){if(se(e))return $t.detach(e);var t=e.parentNode;return t?t.removeChild(e):void 0}function Li(e){if(se(e))$t.detach(e);else{var t=e.parentNode;Ct.clearEvents(e),t.removeChild(e)}}function Di(e,t){var i=Object.keys(t),s=e;if(s)for(var n=0,o=i;n<o.length;n++){var r=o[n];if(se(s)){var a=r;"tabindex"===r&&(a="tabIndex"),s.attributes[a]=t[r]}else s.setAttribute(r,t[r])}return s}function Ii(e,t,i){return void 0===t&&(t=document),se(t)&&i?$t.vDomSelector({ele:t,selector:e,selectAll:!1}):(e=Ai(e),t.querySelector(e))}function Oi(e,t,i){return void 0===t&&(t=document),se(t)&&!i?$t.vDomSelector({ele:t,selector:e,selectAll:!0}):(e=Ai(e),t.querySelectorAll(e))}function Ai(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var i=e.split(","),s=0;s<i.length;s++){for(var n=i[s].split(" "),o=0;o<n.length;o++)if(n[o].indexOf("#")>-1&&!n[o].match(/\[.*\]/)){var r=n[o].split("#");if(r[1].match(/^\d/)||r[1].match(t)){var a=n[o].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[o]=a.join(".")}}i[s]=n.join(" ")}return i.join(",")}return e}function Mi(e,t){var i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(Hi(i,t))return i;i=i.parentNode}return null}function Pi(e){for(var t=[],i=0,s=Array.prototype.slice.call(e.parentNode.childNodes);i<s.length;i++){var n=s[i];n.nodeType===Node.ELEMENT_NODE&&e!==n&&t.push(n)}return t}function Ni(e,t,i){var s,n=se(e);return ae(s=n?ee("attributes."+t,e):e.getAttribute(t))&&i&&(n?e.attributes[t]=i:e.setAttribute(t,i.toString()),s=i),s}function Ri(e,t){void 0!==t&&(se(e)?$t.setStyleAttribute(e,t):Object.keys(t).forEach(function(i){e.style[i]=t[i]}))}function Bi(e,t,i){bi([e],t),Ci([e],i)}function Hi(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}function Fi(e,t){if(se(e))if(""===t)e.children=[];else{var i=$t.ConvertHTMLToJSon(t);i.length&&($t.assignParent(i,e),e.children=i)}else e.innerHTML=t}function ji(e,t){return se(e)?new RegExp("\\b"+t+"\\b","i").test(e.attributes.className):e.classList.contains(t)}function Vi(e,t){return se(e)?t?re({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)}var zi=new RegExp("]"),_i=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new We(this),le(t)||(this.element="string"==typeof t?document.querySelector(t):t,ae(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),le(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,oe(this,e),!0!==t?(oe(this.changedProperties,e),this.dataBind()):ye()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];if(t[n]instanceof Array)for(var o=0,r=t[n];o<r.length;o++){var a=r[o];void 0!==a.dataBind&&a.dataBind()}else t[n].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,s=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,s),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(ye()){e=e||{},re(this.bulkChanges,{},e,!0);this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,i){if(ye()){var s={};s[e]=t,this.serverDataBind(s)}this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=$(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,s){var n=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var r=this.modelObserver.notify(e,t,i,s);if(zi.test(e)){var a=ee(e,this);if(a){if(window.Blazor){var l=a.call(this,t);l&&"function"==typeof l.then?i?l.then(function(e){i&&(e="string"==typeof e&&n.modelObserver.isJson(e)?JSON.parse(e):e,i.call(n,e))}).catch(function(e){s&&(e="string"==typeof e&&n.modelObserver.isJson(e)?JSON.parse(e):e,s.call(n,e))}):r=l:i&&i.call(this,t)}else a.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,r}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();bi([this.element],["e-lib",e]),ae(this.element.ej2_instances)?te("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),Ci([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&Ci([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function qi(e,t){var i,s,n="string"==typeof e?document.getElementById(e):e;for(s=0;s<n.ej2_instances.length;s++){if(i=n.ej2_instances[s],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}}function Wi(e){for(var t=[].slice.call(e.getElementsByClassName("e-control")),i=0;i<t.length;i++){var s=t[i].classList[1].split("e-")[1],n=qi(t[i],s);le(n)||n.destroy()}}function Ui(e,t,i,s){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof s||(e.properties[t]=J(s,[e,t,i])),e.properties[t]}function Gi(e,t,i,s,n,o){for(var r=[],a=i?i.length:0,l=0;l<a;l++){var h=s;if(o&&(h=s(i[l],e)),n){var c=J(h,[e,t,{},!0]);c.setProperties(i[l],!0),r.push(c)}else r.push(J(h,[e,t,i[l],!1]))}return r}function Yi(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function Xi(e,t){return function(i){if(this.properties[t]!==i){var s=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,s),this.properties[t]=i}}}function Ki(e,t,i){return function(){return Ui(this,t,e,i)}}function Zi(e,t,i){return function(s){Ui(this,t,e,i).setProperties(s)}}function Qi(e,t,i){return function(){var s=i({});return this.properties.hasOwnProperty(t)?this.properties[t]:Ui(this,t,e,s)}}function Ji(e,t,i){return function(s){var n=i(s,this);Ui(this,t,e,n).setProperties(s)}}function $i(e,t,i){return function(){var s=this;if(!this.properties.hasOwnProperty(t)){var n=Gi(this,t,e,i,!1);this.properties[t]=n}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach(function(e){var n={value:ss(e,t,i,s.properties[t]).bind(s),configurable:!0};Object.defineProperty(s.properties[t],e,n)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function es(e,t,i){return function(s){this.isComplexArraySetter=!0;var n=Gi(this,t,e,i,!1),o=Gi(this,t,s,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,n),this.properties[t]=o}}function ts(e,t,i){return function(s){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=Gi(this,t,s,i,!0,!0);this.saveChanges(t,o,n),this.properties[t]=o}}function is(e,t,i){return function(){var s=i({});if(!this.properties.hasOwnProperty(t)){var n=Gi(this,t,e,s,!1);this.properties[t]=n}return this.properties[t]}}function ss(e,t,i,s){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var r=0;r<i.length;r++){Array.prototype[e].apply(s,[i[r]]);var a=ns(o+(s.length-1),i[r],!this.controlParent,e);this.serverDataBind(a,i[r],!1,e)}break;case"pop":Array.prototype[e].apply(s);var l=ns(o+s.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return s}}function ns(e,t,i,s){var n=e;if(i&&((n={})[e]=t,t&&"object"==typeof t)){n[e].ejsAction=s}return n}function os(e){return function(t,i){var s={set:Xi(e,i),get:Yi(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),ds(t,i,"prop",e)}}function rs(e,t){return function(i,s){var n={set:Zi(e,s,t),get:Ki(e,s,t),enumerable:!0,configurable:!0};Object.defineProperty(i,s,n),ds(i,s,"complexProp",e,t)}}function as(e){return function(t,i){var s={set:Ji({},i,e),get:Qi({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),ds(t,i,"complexProp",{},e)}}function ls(e,t){return function(i,s){var n={set:es(e,s,t),get:$i(e,s,t),enumerable:!0,configurable:!0};Object.defineProperty(i,s,n),ds(i,s,"colProp",e,t)}}function hs(e){return function(t,i){var s={set:ts([],i,e),get:is([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),ds(t,i,"colProp",{},e)}}function cs(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var s=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var s=ee("propName",t);return s&&(i=s+"-"+i),e(ee("parentObj",t),i)}(this,t);!1===le(i)&&s.context.removeEventListener(s.prefix,i),s.context.addEventListener(s.prefix,e),this.properties[t]=e}},get:Yi(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),ds(e,t,"event")}}function ps(e){}function ds(e,t,i,s,n){le(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:s,type:n}),e.propList[i+"Names"].push(t)}function us(e){var t=function(e){return this.element=e,this};return function(i){return t.prototype.hasOwnProperty("create")||((t.prototype=function e(t){if(le(t.prototype.builderObject)){t.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0,this.propCollections.push(re({},this.properties,{}))}};for(var i=/complex/,s=0,n=Object.keys(t.prototype.propList);s<n.length;s++)for(var o=n[s],r=function(s){i.test(o)?t.prototype.builderObject[s.propertyName]=function(t){var i,n={};return oe(n,e(s.type)),t(n),i=n.isPropertyArray?n.propCollections:re({},n.properties,{}),this.properties[s.propertyName]=i,n.properties={},n.propCollections=[],n.isPropertyArray=!1,this}:t.prototype.builderObject[s.propertyName]=function(e){return this.properties[s.propertyName]=e,this}},a=0,l=t.prototype.propList[o];a<l.length;a++)r(l[a])}return t.prototype.builderObject}(e)).create=function(){var t=re({},{},this.properties);return this.properties={},new e(t,this.element)}),new t(i)}}var ms,fs=(ms=function(e,t){return(ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ms(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),gs=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},vs=function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return fs(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var s=this.getModel(t);if("string"==typeof e)for(var n=0,o=Array.prototype.slice.call(Oi(e,document));n<o.length;n++){var r=o[n];s.element=r,i.delayAnimation(s)}else s.element=e,i.delayAnimation(s)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var s=parseInt(i,10);cancelAnimationFrame(s),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout(function(){i.applyAnimation(e)},e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,s=0,n=0,o=e.duration;e.element.setAttribute("e-animate","true");var r=function(a){try{if(a){n=0===n?a:n,e.timeStamp=a+e.timeStamp-n,n=a,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(r)):(cancelAnimationFrame(s),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else performance.now(),s=requestAnimationFrame(r),e.element.setAttribute("e-animation-id",s.toString())}catch(i){cancelAnimationFrame(s),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,i)}};r()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},gs([os("FadeIn")],t.prototype,"name",void 0),gs([os(400)],t.prototype,"duration",void 0),gs([os("ease")],t.prototype,"timingFunction",void 0),gs([os(0)],t.prototype,"delay",void 0),gs([cs()],t.prototype,"progress",void 0),gs([cs()],t.prototype,"begin",void 0),gs([cs()],t.prototype,"end",void 0),gs([cs()],t.prototype,"fail",void 0),t=i=gs([ps],t)}(_i);function ys(e,t,i){var s=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===s.rippleFlag||void 0===s.rippleFlag&&!ws?Function:(e.setAttribute("data-ripple","true"),Ct.add(e,"mousedown",bs,{parent:e,rippleOptions:s}),Ct.add(e,"mouseup",Cs,{parent:e,rippleOptions:s,done:i}),Ct.add(e,"mouseleave",Ss,{parent:e,rippleOptions:s}),bt.isPointer&&Ct.add(e,"transitionend",Ss,{parent:e,rippleOptions:s}),function(){e.removeAttribute("data-ripple"),Ct.remove(e,"mousedown",bs),Ct.remove(e,"mouseup",Cs),Ct.remove(e,"mouseleave",Ss),Ct.remove(e,"transitionend",Ss)})}function bs(e){var t=e.target,i=this.rippleOptions.selector,s=i?Mi(t,i):t;if(!(!s||this.rippleOptions&&Mi(t,this.rippleOptions.ignore))){var n=s.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,r=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-n.left),Math.abs(o-n.right)),l=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom)),h=Math.sqrt(a*a+l*l),c=2*h+"px",p=o-n.left-h,d=r-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(p=0,d=0,c="100%"),s.classList.add("e-ripple");var u=yi("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+p+"px;top: "+d+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});s.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",s!==this.parent&&Ct.add(s,"mouseleave",Ss,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Cs(e){xs(e,this)}function Ss(e){xs(e,this)}function xs(e,t){var i=t.rippleOptions.duration,s=e.target,n=t.rippleOptions.selector,o=n?Mi(s,n):s;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var r=Oi(".e-ripple-element",o),a=r[r.length-1];a&&(a.style.opacity="0.5"),t.parent!==o&&Ct.remove(o,"mouseleave",Ss),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)},i)}}var ws=!1;function Es(e){return ws=e}var ks,Ts=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var s=0;s<i;s++)for(var n=e[s],o=0,r=t;o<r.length;o++){var a=r[o],l=n.member;if(a.prototype.getModuleName()===n.member&&!this.isModuleLoaded(l)){var h=J(a,n.args),c=this.getMemberName(l);n.isProperty?te(c,a,this.parent):te(c,h,this.parent);var p=n;p.member=c,this.loadedModules.push(p)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||ee(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map(function(e){return t.getMemberName(e.member)}),s=0,n=this.loadedModules.filter(function(e){return-1===i.indexOf(e.member)});s<n.length;s++){var o=n[s];o.isProperty||ee(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),ie(this.parent,o.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),Ls=function(){function e(e,t,i,s){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=ee("callChildDataBind",_i),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=s,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(oe(this,e),this.updateChange(!1,this.propName),this.clearChanges()):oe(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(te(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),te(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,s){this.controlParent.isProtectedOnChange||(s||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,s){if(ye()&&!this.parentObj.isComplexArraySetter){var n,o={},r=i?this.getParentKey(!0)+"."+e:e;if(-1!==r.indexOf(".")){var a=r.split(".");n=o;for(var l=0;l<a.length;l++){var h=l===a.length-1;n[a[l]]=h?t:{},n=h?n:n[a[l]]}}else o[r]={},n=o[r],o[r][e]=t;if(this.isParentArray){n.ejsAction=s||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var s=this.parentObj[this.propName].length;s=e?s:s>0?s-1:0,i+=t=-1!==t?"-"+t:"-"+s}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),Ds=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Is=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Os=0,As=0,Ms=!1;function Ps(e){Ms=e}var Ns=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.randomId=xe(),s.isStringTemplate=!1,s.needsID=!1,s.isReactHybrid=!1,ae(s.enableRtl)&&s.setProperties({enableRtl:Ge},!0),ae(s.locale)&&s.setProperties({locale:Xe},!0),s.moduleLoader=new Ts(s),s.localObserver=new We(s),Ue.on("notifyExternalChange",s.detectFunction,s,s.randomId),le(i)||s.appendTo(),s}return Ds(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(Ci([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),Ue.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new We(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return Ms?window.localStorage.getItem(e+this.ej2StatePersistenceVersion):window.localStorage.getItem(e)},t.prototype.appendTo=function(t){if(ae(t)||"string"!=typeof t?ae(t)||(this.element=t):this.element=Ii(t,document),!ae(this.element)){var i="e-"+this.getModuleName().toLowerCase();bi([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var s=ee("ej2_instances",this.element);s&&-1!==s.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(ye()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(var s=0,n=e;s<n.length;s++){var o=n[s];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var i=0,s=e;i<s.length;i++){var n=s[i];this.localObserver.off(n.event,n.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},t.prototype.createElement=function(e,t,i){return i&&this.isReactHybrid?(t&&(t={}),t["data-id"]=Yt(),$t.createElement(e,t)):yi(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e;ae(e=Ms?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||(Ms?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},t.prototype.renderReactTemplates=function(){},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(Os=0),ks=this.pageID(location.href),As=history.length,e+"_"+ks+"_"+Os++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return ks!==this.pageID(location.href)||As!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},s=0,n=e;s<n.length;s++){var o,r=n[s];le(o=ee(r,this))||te(r,this.getActualProperties(o),i)}return JSON.stringify(i,function(e,i){return t.getActualProperties(i)})},t.prototype.getActualProperties=function(e){return e instanceof Ls?ee("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},s=function(s){if(-1===t.indexOf(s)){var o=e[s];if("object"!=typeof o||o instanceof Array)i[s]=o;else{var r=t.filter(function(e){return new RegExp(s+".").test(e)}).map(function(e){return e.replace(s+".","")});i[s]=n.iterateJsonProperties(n.getActualProperties(o),r)}}},n=this,o=0,r=Object.keys(e);o<r.length;o++){s(r[o])}return i},Is([os(!1)],t.prototype,"enablePersistence",void 0),Is([os()],t.prototype,"enableRtl",void 0),Is([os()],t.prototype,"locale",void 0),t=Is([ps],t)}(_i);"undefined"!=typeof window&&window.addEventListener("popstate",function(){Os=0});var Rs,Bs,Hs,Fs,js=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Vs=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},zs={left:0,top:0,bottom:0,right:0},_s={isDragged:!1},qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return js(t,e),Vs([os(0)],t.prototype,"left",void 0),Vs([os(0)],t.prototype,"top",void 0),t}(Ls),Ws=function(e){function t(t,s){var n=e.call(this,s,t)||this;return n.dragLimit=i.getDefaultPosition(),n.borderWidth=i.getDefaultPosition(),n.padding=i.getDefaultPosition(),n.diffX=0,n.prevLeft=0,n.prevTop=0,n.dragProcessStarted=!1,n.tapHoldTimer=0,n.externalInitialize=!1,n.diffY=0,n.parentScrollX=0,n.parentScrollY=0,n.droppables={},n.bind(),n}var i;return js(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),bt.isIE&&bi([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return re({},zs)},t.prototype.toggleEvents=function(e){var t;le(this.handle)||(t=Ii(this.handle,this.element));var i=this.enableTapHold&&bt.isDevice&&bt.isTouch?this.mobileInitialize:this.initialize;e?Ct.remove(t||this.element,bt.touchStartEvent,i):Ct.add(t||this.element,bt.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)},this.tapHoldThreshold),Ct.add(document,bt.touchMoveEvent,this.removeTapholdTimer,this),Ct.add(document,bt.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),Ct.remove(document,bt.touchMoveEvent,this.removeTapholdTimer),Ct.remove(document,bt.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return ae(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),ae(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var s=0;s<i.length;s++)if(!ae(Mi(e.target,i[s])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!le(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var n=this.getCoordinates(e);if(this.initialPosition={x:n.pageX,y:n.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=n.pageX-(o.left+this.parentScrollX),this.relativeYPosition=n.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(Ct.add(document,bt.touchMoveEvent,this.intDragStart,this),Ct.add(document,bt.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,Ct.trigger(document.documentElement,bt.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!le(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,s=this.getCoordinates(e),n=getComputedStyle(this.element);this.margin={left:parseInt(n.marginLeft,10),top:parseInt(n.marginTop,10),right:parseInt(n.marginRight,10),bottom:parseInt(n.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var r=Mi(e.target,this.dragTarget);ae(r)||(o=r)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var a=this.initialPosition.x-s.pageX,l=this.initialPosition.y-s.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var h=this.getHelperElement(e);if(!h||ae(h))return;var c=this.helperElement=h;if(this.parentClientRect=this.calculateParentPosition(c.offsetParent),this.dragStart){var p={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:ye()?this.bindDragEvents.bind(this):null,dragElement:c};this.trigger("dragStart",p)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var d=getComputedStyle(o),u=parseFloat(d.marginTop);this.clone&&0!==u&&(i.top+=u);var m=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},Ri(c,this.getDragPosition({position:"absolute",left:m.left,top:m.top})),Ct.remove(document,bt.touchMoveEvent,this.intDragStart),Ct.remove(document,bt.touchEndEvent,this.intDestroy),ye()||this.bindDragEvents(c)}}},t.prototype.bindDragEvents=function(e){xi(e)?(Ct.add(document,bt.touchMoveEvent,this.intDrag,this),Ct.add(document,bt.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(ae(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(le(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e,this.isDragScroll);var s=this.getDocumentWidthHeight("Height");s<this.position.top&&(this.position.top=s);var n=this.getDocumentWidthHeight("Width");if(n<this.position.left&&(this.position.left=n),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var r=this.checkTargetElement(e);if(r.target&&r.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==r.instance?this.triggerOutFunction(e,r):a=!1),a&&(r.instance.dragData[this.scope]=this.droppables[this.scope],r.instance.intOver(e,r.target),this.hoverObject=r)}else this.hoverObject&&this.triggerOutFunction(e,r);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var h=this.parentClientRect.left,c=this.parentClientRect.top,p=this.getCoordinates(e),d=p.pageX,u=p.pageY,m=this.position.left-this.diffX,f=this.position.top-this.diffY,g=getComputedStyle(l),v=parseFloat(g.marginTop);if(this.dragArea){if(this.pageX!==d||this.skipDistanceCheck){var y=l.offsetWidth+(parseFloat(g.marginLeft)+parseFloat(g.marginRight));t=this.dragLimit.left>m&&m>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<m+y&&m>0?m-(m-this.dragLimit.right)+window.pageXOffset-y:m<0?this.dragLimit.left:m}if(this.pageY!==u||this.skipDistanceCheck){var b=l.offsetHeight+(parseFloat(g.marginTop)+parseFloat(g.marginBottom));i=this.dragLimit.top>f&&f>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<f+b&&f>0?f-(f-this.dragLimit.bottom)+window.pageYOffset-b:f<0?this.dragLimit.top:f}}else t=m,i=f;var C,S,x=c+this.borderWidth.top,w=h+this.borderWidth.left;if(this.dragProcessStarted&&(ae(i)&&(i=this.prevTop),ae(t)&&(t=this.prevLeft)),this.dragArea){if(this.dragLimit.top=this.clone?this.dragLimit.top:0,C=i-x<0?this.dragLimit.top:i-x,S=t-w<0?this.dragElePosition.left:t-w,v>0&&(this.clone&&(C+=this.element.offsetTop,f<0&&(this.element.offsetTop+f>=0?C=this.element.offsetTop+f:C-=this.element.offsetTop),C=this.dragLimit.bottom<C?this.dragLimit.bottom:C),i-x<0))if(f+v+(l.offsetHeight-x)>=0){var E=this.dragLimit.top+f-x;E+v+x<0?C-=v+x:C=E}else C-=v+x}else C=i-x,S=t-w;var k=this.getProcessedPositionValue({top:C+"px",left:S+"px"});Ri(l,this.getDragPosition(k)),!this.elementInViewport(l)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=d,this.pageY=u}},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=re({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,le(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),Ct.remove(document,bt.touchMoveEvent,this.intDragStart),Ct.remove(document,bt.touchEndEvent,this.intDragStop),Ct.remove(document,bt.touchEndEvent,this.intDestroy),Ct.remove(document,bt.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(_s.isDragged=!_s.isDragged),_s.isDragged},t.prototype.setDragArea=function(){var e,t,i,s=0,n=0;if(i="string"===typeof this.dragArea?Ii(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:o.right-o.left,t=i.scrollHeight?i.scrollHeight:o.bottom-o.top;for(var r=["Top","Left","Bottom","Right"],a=getComputedStyle(i),l=0;l<r.length;l++){var h=r[l],c=a["border"+h+"Width"],p=a["padding"+h],d=h.toLowerCase();this.borderWidth[d]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[d]=isNaN(parseFloat(p))?0:parseFloat(p)}s=o.top,n=o.left,this.dragLimit.left=n+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=n+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),s=this.helperElement.style.pointerEvents||"";return ue(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=s):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return ae(this.currentStateTarget)||this.currentStateTarget===e?ae(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,s,n=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),r=ae(n.offsetParent);return t?(i=this.clone?o.pageX:o.pageX+(r?0:n.offsetParent.scrollLeft)-this.relativeXPosition,s=this.clone?o.pageY:o.pageY+(r?0:n.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,s=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),this.clone||(this.getScrollableValues(),s-=this.tempScrollHeight?this.parentScrollY:0,i-=this.tempScrollWidth?this.parentScrollY:0),{left:i-(this.margin.left+this.cursorAt.left),top:s-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=yi("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!ae(t.parentNode)){var s=Mi(t.parentNode,".e-droppable")||t.parentElement;s&&(i=this.getDropInstance(s))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var s=0,n=i;s<n.length;s++){var o=n[s];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Vs([rs({},qs)],t.prototype,"cursorAt",void 0),Vs([os(!0)],t.prototype,"clone",void 0),Vs([os()],t.prototype,"dragArea",void 0),Vs([os()],t.prototype,"isDragScroll",void 0),Vs([os()],t.prototype,"isReplaceDragEle",void 0),Vs([os(!0)],t.prototype,"isPreventSelect",void 0),Vs([cs()],t.prototype,"drag",void 0),Vs([cs()],t.prototype,"dragStart",void 0),Vs([cs()],t.prototype,"dragStop",void 0),Vs([os(1)],t.prototype,"distance",void 0),Vs([os()],t.prototype,"handle",void 0),Vs([os()],t.prototype,"abort",void 0),Vs([os()],t.prototype,"helper",void 0),Vs([os("default")],t.prototype,"scope",void 0),Vs([os("")],t.prototype,"dragTarget",void 0),Vs([os()],t.prototype,"axis",void 0),Vs([os()],t.prototype,"queryPositionInfo",void 0),Vs([os(!1)],t.prototype,"enableTailMode",void 0),Vs([os(!1)],t.prototype,"skipDistanceCheck",void 0),Vs([os(!0)],t.prototype,"preventDefault",void 0),Vs([os(!1)],t.prototype,"enableAutoScroll",void 0),Vs([os(!1)],t.prototype,"enableTapHold",void 0),Vs([os(750)],t.prototype,"tapHoldThreshold",void 0),t=i=Vs([ps],t)}(_i),Us=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Gs=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Ys=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.mouseOver=!1,s.dragData={},s.dragStopCalled=!1,s.bind(),s}return Us(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){Ct.add(this.element,bt.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,s=!0,n=this.dragData[this.scope],o=!!n&&(n.helper&&xi(n.helper));o&&(i=this.isDropArea(e,n.helper,t),this.accept&&(s=Hi(n.helper,this.accept))),o&&this.drop&&i.canDrop&&s&&this.trigger("drop",{event:e,target:i.target,droppedElement:n.helper,dragData:n}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var s={canDrop:!0,target:i||e.target},n="touchend"===e.type;if(n||s.target===t){t.style.display="none";var o=n?e.changedTouches[0]:e,r=document.elementFromPoint(o.clientX,o.clientY);s.canDrop=!1,s.canDrop=ue(r,this.element),s.canDrop&&(s.target=r),t.style.display=""}return s},t.prototype.destroy=function(){Ct.remove(this.element,bt.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},Gs([os()],t.prototype,"accept",void 0),Gs([os("default")],t.prototype,"scope",void 0),Gs([cs()],t.prototype,"drop",void 0),Gs([cs()],t.prototype,"over",void 0),Gs([cs()],t.prototype,"out",void 0),t=Gs([ps],t)}(_i),Xs=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ks=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Zs={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Qs=function(e){function t(t,s){var n=e.call(this,s,t)||this;return n.keyPressHandler=function(e){for(var t=e.altKey,s=e.ctrlKey,o=e.shiftKey,r=e.which,a=0,l=Object.keys(n.keyConfigs);a<l.length;a++)for(var h=l[a],c=0,p=n.keyConfigs[h].split(",");c<p.length;c++){var d=p[c],u=i.getKeyConfigData(d.trim());t===u.altKey&&s===u.ctrlKey&&o===u.shiftKey&&r===u.keyCode&&(e.action=h,n.keyAction&&n.keyAction(e))}},n.bind(),n}var i;return Xs(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),s={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?s.keyCode=Number(t[t.length-1]):s.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=s,s},t.getKeyCode=function(e){return Zs[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Ks([os({})],t.prototype,"keyConfigs",void 0),Ks([os("keyup")],t.prototype,"eventName",void 0),Ks([cs()],t.prototype,"keyAction",void 0),t=i=Ks([ps],t)}(_i),Js=function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||Xe)}return e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=re(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return ae(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={},e}(),$s=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),en=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $s(t,e),en([os(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Ls),sn=/(Up|Down)/,nn=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.touchAction=!0,s.tapCount=0,s.startEvent=function(e){if(!0===s.touchAction){var t=s.updateChangeTouches(e);void 0!==e.changedTouches&&(s.touchAction=!1),s.isTouchMoved=!1,s.movedDirection="",s.startPoint=s.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},s.startEventData=t,s.hScrollLocked=s.vScrollLocked=!1,s.tStampStart=Date.now(),s.timeOutTapHold=setTimeout(function(){s.tapHoldEvent(e)},s.tapHoldThreshold),Ct.add(s.element,bt.touchMoveEvent,s.moveEvent,s),Ct.add(s.element,bt.touchEndEvent,s.endEvent,s),Ct.add(s.element,bt.touchCancelEvent,s.cancelEvent,s)}},s.moveEvent=function(e){var t=s.updateChangeTouches(e);s.movedPoint=t,s.isTouchMoved=!(t.clientX===s.startPoint.clientX&&t.clientY===s.startPoint.clientY);var i={};s.isTouchMoved&&(clearTimeout(s.timeOutTapHold),s.calcScrollPoints(e),i=re(i,{},{startEvents:s.startEventData,originalEvent:e,startX:s.startPoint.clientX,startY:s.startPoint.clientY,distanceX:s.distanceX,distanceY:s.distanceY,scrollDirection:s.scrollDirection,velocity:s.getVelocity(t)}),s.trigger("scroll",i),s.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},s.cancelEvent=function(e){clearTimeout(s.timeOutTapHold),clearTimeout(s.timeOutTap),s.tapCount=0,s.swipeFn(e),Ct.remove(s.element,bt.touchCancelEvent,s.cancelEvent)},s.endEvent=function(e){s.swipeFn(e),s.isTouchMoved||"function"==typeof s.tap&&(s.trigger("tap",{originalEvent:e,tapCount:++s.tapCount}),s.timeOutTap=setTimeout(function(){s.tapCount=0},s.tapThreshold)),s.modeclear()},s.swipeFn=function(e){clearTimeout(s.timeOutTapHold),clearTimeout(s.timeOutTap);var t=s.updateChangeTouches(e),i=t.clientX-s.startPoint.clientX,n=t.clientY-s.startPoint.clientY;i=Math.floor(i<0?-1*i:i),n=Math.floor(n<0?-1*n:i),s.isTouchMoved=i>1||n>1,/Mozilla|Firefox/.test(bt.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(s.isTouchMoved=!1),s.endPoint=t,s.calcPoints(e);var o={originalEvent:e,startEvents:s.startEventData,startX:s.startPoint.clientX,startY:s.startPoint.clientY,distanceX:s.distanceX,distanceY:s.distanceY,swipeDirection:s.movedDirection,velocity:s.getVelocity(t)};if(s.isTouchMoved){var r=void 0,a=s.swipeSettings.swipeThresholdDistance;r=re(r,s.defaultArgs,o);var l=!1,h=s.element,c=s.isScrollable(h),p=sn.test(s.movedDirection);(a<s.distanceX&&!p||a<s.distanceY&&p)&&(l=!c||s.checkSwipe(h,p)),l&&s.trigger("swipe",r)}s.modeclear()},s.modeclear=function(){s.modeClear=setTimeout(function(){s.touchAction=!0},"function"!=typeof s.tap?0:20),s.lastTapTime=(new Date).getTime(),Ct.remove(s.element,bt.touchMoveEvent,s.moveEvent),Ct.remove(s.element,bt.touchEndEvent,s.endEvent),Ct.remove(s.element,bt.touchCancelEvent,s.cancelEvent)},s.bind(),s}return $s(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),bt.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){Ct.add(this.element,bt.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){Ct.remove(this.element,bt.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,Ct.remove(this.element,bt.touchMoveEvent,this.moveEvent),Ct.remove(this.element,bt.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),Ct.remove(this.element,bt.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,s=Date.now(),n=t-this.startPoint.clientX,o=i-this.startPoint.clientX,r=s-this.tStampStart;return Math.sqrt(n*n+o*o)/r},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],s=t?["Height","Top"]:["Width","Left"];return e[i[0]+s[0]]<=e[i[1]+s[0]]||(0===e[i[0]+s[1]]||e[i[1]+s[0]]+e[i[0]+s[1]]>=e[i[0]+s[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},en([cs()],t.prototype,"tap",void 0),en([cs()],t.prototype,"tapHold",void 0),en([cs()],t.prototype,"swipe",void 0),en([cs()],t.prototype,"scroll",void 0),en([os(350)],t.prototype,"tapThreshold",void 0),en([os(750)],t.prototype,"tapHoldThreshold",void 0),en([rs({},tn)],t.prototype,"swipeSettings",void 0),t=en([ps],t)}(_i),on=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],rn=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],an=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],ln=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:on,attributes:rn}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[t].attributes,s=0;s<i.length;s++)this.wrapElement.children[t].removeAttribute(i[s].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(function(e){Ti(e)})},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+an.join("],[")+"]");e.length>0&&e.forEach(function(e){an.forEach(function(t){e.hasAttribute(t)&&e.removeAttribute(t)})})},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach(function(t,i){var s=e.wrapElement.querySelectorAll(t.selector);s.length>0&&s.forEach(function(e){e.removeAttribute(t.attribute)})})},e}(),hn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),cn=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},pn="e-accordion",dn="e-acrdn-item",un="e-acrdn-header",mn="e-acrdn-panel",fn="e-acrdn-content",gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hn(t,e),cn([os("SlideDown")],t.prototype,"effect",void 0),cn([os(400)],t.prototype,"duration",void 0),cn([os("linear")],t.prototype,"easing",void 0),t}(Ls),vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hn(t,e),cn([rs({effect:"SlideUp",duration:400,easing:"linear"},gn)],t.prototype,"collapse",void 0),cn([rs({effect:"SlideDown",duration:400,easing:"linear"},gn)],t.prototype,"expand",void 0),t}(Ls),yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hn(t,e),cn([os(null)],t.prototype,"content",void 0),cn([os(null)],t.prototype,"header",void 0),cn([os(null)],t.prototype,"cssClass",void 0),cn([os(null)],t.prototype,"iconCss",void 0),cn([os(!1)],t.prototype,"expanded",void 0),cn([os(!0)],t.prototype,"visible",void 0),cn([os(!1)],t.prototype,"disabled",void 0),t}(Ls),bn=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},s}return hn(t,e),t.prototype.destroy=function(){var t=this;this.isReact&&this.clearTemplate();var i=this.element;if(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(i.children).forEach(function(e){i.removeChild(e)}),this.trgtEle)for(;this.ctrlTem.firstElementChild;)i.appendChild(this.ctrlTem.firstElementChild);i.classList.remove("e-acrdn-root"),i.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(function(e){t.element.removeAttribute(e)}),!this.isNested&&ws&&this.removeRippleEffect()},t.prototype.preRender=function(){var e=Mi(this.element,"."+mn);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),ae(e)?this.element.classList.add("e-acrdn-root"):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.isServerRendered?this.wireFocusEvents():(this.initializeheaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl()),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=ge(this.width),t=ge(this.height);Ri(this.element,{width:e,height:t});ae(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),Di(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?Ii("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.wireFocusEvents=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+dn));e<t.length;e++){var i=t[e],s=i.querySelector("."+un);i.childElementCount>0&&s&&(Ct.clearEvents(s),Ct.add(s,"focus",this.focusIn,this),Ct.add(s,"blur",this.focusOut,this))}},t.prototype.unwireEvents=function(){Ct.remove(this.element,"click",this.clickHandler),ae(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){Ct.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=ys(this.element,{selector:"."+un})),this.isNested||(this.keyModule=new Qs(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return Xt(document.querySelector(e).innerHTML.trim())}catch(t){return Xt(e)}},t.prototype.initializeheaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},t.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},t.prototype.getheaderTemplate=function(){return this.headerTemplateFn},t.prototype.getItemTemplate=function(){return this.itemTemplateFn},t.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},t.prototype.ctrlTemplate=function(){var e;this.ctrlTem=this.element.cloneNode(!0);var t=Ii(".e-accordion-container",this.element);e=t?t.children:this.element.children;var i=[];[].slice.call(e).forEach(function(e){i.push({header:e.childElementCount>0&&e.children[0]?e.children[0]:"",content:e.childElementCount>1&&e.children[1]?e.children[1]:""}),e.parentNode.removeChild(e)}),t&&this.element.removeChild(t),this.setProperties({items:i},!0)},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:"e-toggle-icon"}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[t]);this.isReact&&this.renderReactTemplates()}},t.prototype.renderItems=function(){var e,t,i=this,s=this.element;if(ae(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach(function(e,n){t=i.renderInnerItem(e,n),s.appendChild(t),t.childElementCount>0&&(Ct.add(t.querySelector("."+un),"focus",i.focusIn,i),Ct.add(t.querySelector("."+un),"blur",i.focusOut,i))});else{var n=this.items;s&&n.length>0&&n.forEach(function(t,n){e=i.renderInnerItem(t,n),s.appendChild(e),e.childElementCount>0&&(Ct.add(e.querySelector("."+un),"focus",i.focusIn,i),Ct.add(e.querySelector("."+un),"blur",i.focusOut,i))})}this.isReact&&this.renderReactTemplates()},t.prototype.clickHandler=function(e){var t,i,s=this,n=e.target,o=this.getItems(),r={};if(Mi(n,"."+pn)===this.element){n.classList.add("e-target");var a,l=Mi(n,"."+dn),h=Mi(n,"."+un),c=Mi(n,"."+mn);if(l&&(ae(h)||ae(c))&&(h=l.children[0],c=l.children[1]),h&&(i=Ii(".e-toggle-icon",h)),h?a=Mi(h,"."+dn):c&&(a=Mi(c,"."+dn)),t=this.getIndexByItem(l),a&&(r.item=o[this.getIndexByItem(a)]),r.originalEvent=e,!(!ae(i)&&l.childElementCount<=1)||!ae(c)&&ae(Ii(".e-acrdn-header .e-toggle-icon",a)))this.afterContentRender(n,r,l,h,c,a);else if(this.isServerRendered){var p=l.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",t).then(function(){s.isDestroyed||s.afterContentRender(n,r,l,h,c,a)}):this.interopAdaptor.invokeMethodAsync("OnDataClick",p).then(function(){s.isDestroyed||s.afterContentRender(n,r,l,h,c,a)})}else l.appendChild(this.contentRendering(t)),this.ariaAttrUpdate(l),this.afterContentRender(n,r,l,h,c,a);this.isReact&&this.renderReactTemplates()}},t.prototype.afterContentRender=function(e,t,i,s,n,o){var r=this,a=[];this.trigger("clicked",t);var l=n&&!ae(Ii(".e-target",n)),h=n&&!ae(Ii("."+pn,n))&&ae(Mi(e,".e-acrdn-panel .e-accordion")),c=n&&ae(Ii("."+pn,n))||!(Mi(e,"."+pn)===this.element);if(l=l&&(h||c),e.classList.remove("e-target"),!(e.classList.contains(mn)||e.classList.contains(fn)||l)){var p=this.element.querySelector(".e-accordion-container"),d=p?p.children:this.element.children;[].slice.call(d).forEach(function(e){e.classList.contains("e-active")&&a.push(e)});var u=[].slice.call(this.element.querySelectorAll(".e-acrdn-item [e-animate]"));if(u.length>0)for(var m=0,f=u;m<f.length;m++){var g=f[m];a.push(g.parentElement)}var v=-1!==a.indexOf(o)&&"true"===n.getAttribute("e-animate"),y=!1;if(!ae(i)&&!ae(s)){var b=Ii("."+mn,i),C=Mi(i,".e-acrdn-root").querySelector(".e-expand-state");if(ae(b))return;y=C===i,!xi(b)||v&&!o.classList.contains("e-selected")?(a.length>0&&"Single"===this.expandMode&&!v&&a.forEach(function(e){r.collapse(Ii("."+mn,e)),e.classList.remove("e-expand-state")}),this.expand(b)):this.collapse(b),ae(C)||y||C.classList.remove("e-expand-state")}}},t.prototype.eleMoveFocus=function(e,t,i){var s,n=Mi(i,"."+dn);i===t?s=("moveUp"===e?i.lastElementChild:i).querySelector("."+un):i.classList.contains(un)&&(n="moveUp"===e?n.previousElementSibling:n.nextElementSibling)&&(s=Ii("."+un,n)),s&&s.focus()},t.prototype.keyActionHandler=function(e){var t=e.target;if(!ae(Mi(e.target,un))||t.classList.contains(pn)||t.classList.contains(un)){var i,s=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,s,t);break;case"space":case"enter":!ae(i=t.nextElementSibling)&&i.classList.contains(mn)?"true"!==i.getAttribute("e-animate")&&t.click():t.click();break;case"home":case"end":("home"===e.action?s.firstElementChild.children[0]:s.lastElementChild.children[0]).focus()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:un,id:he("acrdn_header")});return Di(e,{tabindex:"0",role:"heading","aria-selected":"false","aria-disabled":"false","aria-level":this.getItems().length.toString()}),e},t.prototype.renderInnerItem=function(e,t){var i;if((i=this.createElement("div",{className:dn})).id=he("acrdn_item"),Di(i,{"aria-expanded":"false"}),this.headerTemplate){var s=this.headerEleGenerate(),n=this.createElement("div",{className:"e-acrdn-header-content"});return s.appendChild(n),Ei(this.getheaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),n),i.appendChild(s),s.appendChild(this.toggleIconGenerate()),this.add(i,"e-select"),i}if(e.header&&this.angularnativeCondiCheck(e,"header")){this.enableHtmlSanitizer&&"string"==typeof e.header&&(e.header=ln.sanitize(e.header));s=this.headerEleGenerate(),n=this.createElement("div",{className:"e-acrdn-header-content"});s.appendChild(n),s.appendChild(this.fetchElement(n,e.header,t,!0)),i.appendChild(s)}var o=Ii("."+un,i);if(!e.expanded||ae(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&bi([i],e.cssClass.split(" ")),e.disabled&&bi([i],"e-overlay"),!1===e.visible&&bi([i],"e-hide"),e.iconCss){var r=this.createElement("div",{className:"e-acrdn-header-icon"}),a=this.createElement("span",{className:e.iconCss+" e-icons"});r.appendChild(a),ae(o)?((o=this.headerEleGenerate()).appendChild(r),i.appendChild(o)):o.insertBefore(r,o.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var l=this.toggleIconGenerate();ae(o)&&(o=this.headerEleGenerate(),i.appendChild(o)),o.appendChild(l),this.add(i,"e-select")}return i},t.prototype.angularnativeCondiCheck=function(e,t){var i="content"===t?e.content:e.header;if(this.isAngular&&!ae(i.elementRef)){var s=i.elementRef.nativeElement.data;if(ae(s)||""===s||-1===s.indexOf("bindings="))return!0;var n=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!ae(n)&&"false"===n["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,i,s){var n,o,r;try{if(document.querySelectorAll(t).length&&"Button"!==t){var a=document.querySelector(t);o=a.outerHTML.trim(),e.appendChild(a),a.style.display=""}}catch(i){"string"==typeof t?e.innerHTML=ln.sanitize(t):!ae(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):n=Xt(t)}if(!ae(n)){this.isReact&&this.renderReactTemplates();var l=void 0,h=void 0;e.classList.contains("e-acrdn-header-content")?(l=this.element.id+i+"_header",h="header"):e.classList.contains(fn)&&(l=this.element.id+i+"_content",h="content"),r=n({},this,h,l,this.isStringTemplate)}return ae(r)||!(r.length>0)||ae(r[0].tagName)&&1===r.length?0===e.childElementCount&&(e.innerHTML=ln.sanitize(t)):[].slice.call(r).forEach(function(t){ae(t.tagName)||(t.style.display=""),e.appendChild(t)}),ae(o)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=Ii("."+un,e),i=Ii("."+mn,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id),i.setAttribute("role","definition")},t.prototype.contentRendering=function(e){var t=this.createElement("div",{className:mn+" e-content-hide",id:he("acrdn_panel")});Di(t,{"aria-hidden":"true"});var i=this.createElement("div",{className:fn});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),Ei(this.getItemTemplate()(this.dataSource[e],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),t.appendChild(i)):(this.enableHtmlSanitizer&&(this.items[e].content,1)&&(this.items[e].content=ln.sanitize(this.items[e].content)),t.appendChild(this.fetchElement(i,this.items[e].content,e,!1))),t},t.prototype.expand=function(e){var t,i=this,s=this.getItems(),n=Mi(e,"."+dn);if(!(ae(e)||xi(e)&&"true"!==e.getAttribute("e-animate")||n.classList.contains("e-overlay"))){var o=Mi(n,".e-acrdn-root").querySelector(".e-expand-state"),r={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},a=Ii(".e-toggle-icon",n).firstElementChild;t={element:n,item:s[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+mn),isExpanded:!0},this.trigger("expanding",t,function(t){t.cancel||(a.classList.add("e-toggle-animation"),i.expandedItemsPush(n),ae(o)||o.classList.remove("e-expand-state"),n.classList.add("e-expand-state"),"None"===r.name?(i.expandProgress("begin",a,e,n,t),i.expandProgress("end",a,e,n,t)):i.expandAnimation(r.name,a,e,n,r,t))})}},t.prototype.expandAnimation=function(e,t,i,s,n,o){var r,a=this;this.lastActiveItemId=s.id,"SlideDown"===e?(n.begin=function(){a.expandProgress("begin",t,i,s,o),i.style.position="absolute",r=s.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",s.style.maxHeight=""},n.progress=function(){s.style.minHeight=r+i.offsetHeight+"px"},n.end=function(){Ri(i,{position:"",maxHeight:""}),s.style.minHeight="",a.expandProgress("end",t,i,s,o)}):(n.begin=function(){a.expandProgress("begin",t,i,s,o)},n.end=function(){a.expandProgress("end",t,i,s,o)}),new vs(n).animate(i)},t.prototype.expandProgress=function(e,t,i,s,n){this.remove(i,"e-content-hide"),this.add(s,"e-selected"),this.add(t,"e-expand-icon"),"end"===e&&(this.add(s,"e-active"),i.setAttribute("aria-hidden","false"),Di(s,{"aria-expanded":"true"}),Di(i.previousElementSibling,{"aria-selected":"true"}),t.classList.remove("e-toggle-animation"),this.trigger("expanded",n))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){var i=[].slice.call(this.expandedIndices);i.push(t),this.setProperties({expandedIndices:i},!0)}},t.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},t.prototype.getItemElements=function(){var e=[],t=this.element.children;return[].slice.call(t).forEach(function(t){t.classList.contains(dn)&&e.push(t)}),e},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(t),1),this.setProperties({expandedIndices:i},!0)},t.prototype.collapse=function(e){var t,i=this,s=this.getItems(),n=Mi(e,"."+dn);if(!ae(e)&&xi(e)&&!n.classList.contains("e-overlay")){var o={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},r=Ii(".e-toggle-icon",n).firstElementChild;t={element:n,item:s[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+mn),isExpanded:!1},this.trigger("expanding",t,function(t){t.cancel||(i.expandedItemsPop(n),n.classList.add("e-expand-state"),r.classList.add("e-toggle-animation"),"None"===o.name?(i.collapseProgress("begin",r,e,n,t),i.collapseProgress("end",r,e,n,t)):i.collapseAnimation(o.name,e,n,r,o,t))})}},t.prototype.collapseAnimation=function(e,t,i,s,n,o){var r,a,l,h,c=this;this.lastActiveItemId=i.id,"SlideUp"===e?(n.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",r=i.offsetHeight,a=t.offsetHeight,t.style.maxHeight=a+"px",c.collapseProgress("begin",s,t,i,o)},n.progress=function(){(h=r-(a-t.offsetHeight))<l&&(i.style.minHeight=h+"px")},n.end=function(){t.style.display="none",c.collapseProgress("end",s,t,i,o),i.style.minHeight="",Ri(t,{position:"",maxHeight:"",display:""})}):(n.begin=function(){c.collapseProgress("begin",s,t,i,o)},n.end=function(){c.collapseProgress("end",s,t,i,o)}),new vs(n).animate(t)},t.prototype.collapseProgress=function(e,t,i,s,n){this.remove(t,"e-expand-icon"),this.remove(s,"e-selected"),"end"===e&&(this.add(i,"e-content-hide"),t.classList.remove("e-toggle-animation"),this.remove(s,"e-active"),i.setAttribute("aria-hidden","true"),Di(s,{"aria-expanded":"false"}),Di(i.previousElementSibling,{"aria-selected":"false"}),this.trigger("expanded",n))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.itemAttribUpdate=function(){var e=this.getItems(),t=this.getItemElements(),i=e.length;t.forEach(function(e){Ii("."+un,e).setAttribute("aria-level",""+i)})},t.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},t.prototype.addItem=function(e,t){var i=this,s=this.element,n=this.getItemElements(),o=this.getItems();(ae(t)&&(t=o.length),s.childElementCount>=t)&&(e instanceof Array?e:[e]).forEach(function(e,r){var a=t+r;o.splice(a,0,e);var l=i.renderInnerItem(e,a);s.childElementCount===a?s.appendChild(l):s.insertBefore(l,n[a]),Ct.add(l.querySelector("."+un),"focus",i.focusIn,i),Ct.add(l.querySelector("."+un),"blur",i.focusOut,i),i.itemAttribUpdate(),i.expandedIndices=[],i.expandedItemRefresh(s),e&&e.expanded&&i.expandItem(!0,a)});this.isReact&&this.renderReactTemplates()},t.prototype.expandedItemRefresh=function(e){var t=this,i=this.getItemElements();[].slice.call(i).forEach(function(e){e.classList.contains("e-selected")&&t.expandedItemsPush(e)})},t.prototype.removeItem=function(e){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],e);var t=this.getItemElements()[e],i=this.getItems();ae(t)||(this.restoreContent(e),Ti(t),i.splice(e,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.getItemElements()[e];ae(t)||ae(Ii("."+un,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var i=this.getItemElements()[e];ae(i)||(ae(t)&&(t=!0),t?this.add(i,"e-hide"):this.remove(i,"e-hide"))},t.prototype.enableItem=function(e,t){var i=this.getItemElements()[e];if(!ae(i)){var s=i.firstElementChild;t?(this.remove(i,"e-overlay"),Di(s,{tabindex:"0","aria-disabled":"false"}),s.focus()):(i.classList.contains("e-active")&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,s)),this.add(i,"e-overlay"),s.setAttribute("aria-disabled","true"),s.removeAttribute("tabindex"))}},t.prototype.refresh=function(){this.isServerRendered||e.prototype.refresh.call(this)},t.prototype.expandItem=function(e,t){var i=this,s=this.getItemElements();if(ae(t))if("Single"===this.expandMode&&e){var n=s[s.length-1];this.itemExpand(e,n,this.getIndexByItem(n))}else{var o=Ii("#"+this.lastActiveItemId,this.element);[].slice.call(s).forEach(function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove("e-expand-state")});var r=Ii(".e-expand-state",this.element);r&&r.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{if(ae(n=s[t])||!n.classList.contains("e-select")||n.classList.contains("e-active")&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,n,t)}},t.prototype.itemExpand=function(e,t,i){var s=this,n=t.children[1];if(!t.classList.contains("e-overlay")){if(ae(n)&&e)if(this.isServerRendered){var o=t.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",i).then(function(){s.isDestroyed||(n=t.children[1],s.expand(n))}):this.interopAdaptor.invokeMethodAsync("OnDataClick",o).then(function(){s.isDestroyed||(n=t.children[1],s.expand(n))})}else n=this.contentRendering(i),t.appendChild(n),this.ariaAttrUpdate(t),this.expand(n);else ae(n)||(e?this.expand(n):this.collapse(n));this.isReact&&this.renderReactTemplates()}},t.prototype.destroyItems=function(){this.restoreContent(null),this.isReact&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+dn)).forEach(function(e){Ti(e)})},t.prototype.restoreContent=function(e){var t;t=ae(e)?this.element:this.element.querySelectorAll("."+dn)[e],this.templateEle.forEach(function(e){ae(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")})},t.prototype.updateItem=function(e,t){if(!ae(e)){var i=this.getItems(),s=i[t];i.splice(t,1),this.restoreContent(t),Ti(e),this.addItem(s,t)}},t.prototype.setTemplate=function(e,t,i){t.innerHTML="",this.templateCompile(t,e,i),this.isReact&&this.renderReactTemplates()},t.prototype.templateCompile=function(e,t,i){var s=this.createElement("div");this.fetchElement(s,t,i,!1),0!==s.childNodes.length&&[].slice.call(s.childNodes).forEach(function(t){e.appendChild(t)})},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,s=!1,n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"items":if(this.isServerRendered){this.wireFocusEvents();break}if(e.items instanceof Array&&t.items instanceof Array)s=!0;else for(var r=Object.keys(e.items),a=0;a<r.length;a++){var l=parseInt(Object.keys(e.items)[a],10),h=Object.keys(e.items[l])[0],c=Oi("."+dn,this.element)[l],p=Object(t.items[l])[h],d=Object(e.items[l])[h];if(("header"===h||"iconCss"===h||"expanded"===h||"content"===h&&""===p)&&this.updateItem(c,l),"cssClass"!==h||ae(c)||(c.classList.remove(p),c.classList.add(d)),"visible"!==h||ae(c)||(!1===Object(e.items[l])[h]?c.classList.add("e-hide"):c.classList.remove("e-hide")),"disabled"!==h||ae(c)||this.enableItem(l,!d),"content"===h&&!ae(c)&&2===c.children.length)if("function"==typeof d){var u=c.querySelector("."+fn);u.innerHTML="",this.setTemplate(d,u,l)}else c.classList.contains("e-selected")&&this.expandItem(!1,l),Ti(c.querySelector("."+mn))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),s=!0;break;case"headerTemplate":this.initializeheaderTemplate(),s=!0;break;case"itemTemplate":this.initializeItemTemplate(),s=!0;break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl");break;case"height":Ri(this.element,{height:ge(e.height)});break;case"width":Ri(this.element,{width:ge(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}}s&&!this.isServerRendered&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},cn([ls([],yn)],t.prototype,"items",void 0),cn([os([])],t.prototype,"dataSource",void 0),cn([os()],t.prototype,"itemTemplate",void 0),cn([os()],t.prototype,"headerTemplate",void 0),cn([os("100%")],t.prototype,"width",void 0),cn([os("auto")],t.prototype,"height",void 0),cn([os([])],t.prototype,"expandedIndices",void 0),cn([os("Multiple")],t.prototype,"expandMode",void 0),cn([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),cn([rs({},vn)],t.prototype,"animation",void 0),cn([cs()],t.prototype,"clicked",void 0),cn([cs()],t.prototype,"expanding",void 0),cn([cs()],t.prototype,"expanded",void 0),cn([cs()],t.prototype,"created",void 0),cn([cs()],t.prototype,"destroyed",void 0),t=cn([ps],t)}(Ns),Cn={},Sn={};Object(Y.copy)(Cn,n),Object(Y.copy)(Sn,s);var xn,wn,En=!1;function kn(e,t){var i=!1,s={left:0,top:0},n=e;if(!e||!t)return s;for(ae(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left+=e.offsetLeft,s.top+=e.offsetTop,e=e.offsetParent;for(e=n;(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left-=e.scrollLeft,s.top-=e.scrollTop,e=e.parentElement;return s}function Tn(e,t,i,s,n){if(Bs=i+t==="topright"?void 0:n,Bs=n,En=!!s,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),Fs=e.ownerDocument,Hs=e;return function(e,t,i){switch(Rs=Hs.getBoundingClientRect(),t+e){case"topcenter":Ln(Bn(),i),Dn(Pn(),i);break;case"topright":Ln(Rn(),i),Dn(Pn(),i);break;case"centercenter":Ln(Bn(),i),Dn(Mn(),i);break;case"centerright":Ln(Rn(),i),Dn(Mn(),i);break;case"centerleft":Ln(Nn(),i),Dn(Mn(),i);break;case"bottomcenter":Ln(Bn(),i),Dn(An(),i);break;case"bottomright":Ln(Rn(),i),Dn(An(),i);break;case"bottomleft":Ln(Nn(),i),Dn(An(),i);break;default:case"topleft":Ln(Nn(),i),Dn(Pn(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Ln(e,t){t.left=e}function Dn(e,t){t.top=e}function In(){return Fs.documentElement.scrollTop||Fs.body.scrollTop}function On(){return Fs.documentElement.scrollLeft||Fs.body.scrollLeft}function An(){return En?Rs.bottom:Rs.bottom+In()}function Mn(){return Pn()+Rs.height/2}function Pn(){return En?Rs.top:Rs.top+In()}function Nn(){return Rs.left+On()}function Rn(){return Rs.right+On()-(Bs?Bs.width:0)}function Bn(){return Nn()+Rs.width/2}function Hn(e,t,i,s){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var n=e.getBoundingClientRect();if(wn=t,xn=e.ownerDocument,s||(s=Tn(e,"left","top")),i.X){var o=wn?qn():eo(),r=Xn(),a=Kn(),l=r-s.left,h=s.left+n.width-a;n.width>o?s.left=l>0&&h<=0?a-n.width:h>0&&l<=0?r:l>h?a-n.width:r:l>0?s.left+=l:h>0&&(s.left-=h)}if(i.Y){var c=wn?Wn():$n(),p=Yn(),d=Zn(),u=p-s.top,m=s.top+n.height-d;n.height>c?s.top=u>0&&m<=0?d-n.height:m>0&&u<=0?p:u>m?d-n.height:p:u>0?s.top+=u:m>0&&(s.top-=m)}return s}function Fn(e,t,i,s){void 0===t&&(t=null);var n=Tn(e,"left","top");i&&(n.left=i),s&&(n.top=s);var o=[];wn=t,xn=e.ownerDocument;var r=e.getBoundingClientRect(),a=n.top,l=n.left,h=n.left+r.width,c=_n(a,n.top+r.height),p=zn(l,h);return c.topSide&&o.push("top"),p.rightSide&&o.push("right"),p.leftSide&&o.push("left"),c.bottomSide&&o.push("bottom"),o}function jn(e,t,i,s,n,o,r,a,l){if(void 0===r&&(r=null),void 0===a&&(a={X:!0,Y:!0}),t&&e&&n&&o&&(a.X||a.Y)){var h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null},p=e.style.visibility;e.style.visibility="hidden",e.style.display="block";var d=e.getBoundingClientRect();e.style.removeProperty("display"),e.style.visibility=p;var u={posX:n,posY:o,offsetX:i,offsetY:s,position:{left:0,top:0}};wn=r,xn=t.ownerDocument,function(e,t,i,s,n){i.position=Tn(e,i.posX,i.posY,s,n),t.TL=Tn(e,"left","top",s,n),t.TR=Tn(e,"right","top",s,n),t.BR=Tn(e,"left","bottom",s,n),t.BL=Tn(e,"right","bottom",s,n)}(t,h,u,l,d),Vn(c,u,d),a.X&&function e(t,i,s,n,o,r){var a=zn(i.TL.left,i.TR.left);s.TL.left-Jn()<=Xn()&&(a.leftSide=!1);s.TR.left>=Kn()&&(a.rightSide=!1);(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+o.width,n.offsetX=-1*n.offsetX,n.position=Tn(t,n.posX,n.posY,!1),Vn(i,n,o),r&&e(t,i,s,n,o,!1))}(t,c,h,u,d,!0),a.Y&&h.TL.top>-1&&function e(t,i,s,n,o,r){var a=_n(i.TL.top,i.BL.top);s.TL.top-Qn()<=Yn()&&(a.topSide=!1);s.BL.top>=Zn()&&t.getBoundingClientRect().bottom<window.innerHeight&&(a.bottomSide=!1);(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+o.height,n.offsetY=-1*n.offsetY,n.position=Tn(t,n.posX,n.posY,!1,o),Vn(i,n,o),r&&e(t,i,s,n,o,!1))}(t,c,h,u,d,!0),function(e,t,i){var s=0,n=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=Tn(e.offsetParent,"left","top",!1,i);s=o.left,n=o.top}e.style.top=t.position.top+t.offsetY-n+"px",e.style.left=t.position.left+t.offsetX-s+"px"}(e,u,d)}}function Vn(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function zn(e,t){var i=!1,s=!1;return e-Jn()<Xn()&&(i=!0),t>Kn()&&(s=!0),{leftSide:i,rightSide:s}}function _n(e,t){var i=!1,s=!1;return e-Qn()<Yn()&&(i=!0),t>Zn()&&(s=!0),{topSide:i,bottomSide:s}}function qn(){return wn.getBoundingClientRect().width}function Wn(){return wn.getBoundingClientRect().height}function Un(){return wn.getBoundingClientRect().left}function Gn(){return wn.getBoundingClientRect().top}function Yn(){return wn?Gn():0}function Xn(){return wn?Un():0}function Kn(){return wn?Jn()+Un()+qn():Jn()+eo()}function Zn(){return wn?Qn()+Gn()+Wn():Qn()+$n()}function Qn(){return xn.documentElement.scrollTop||xn.body.scrollTop}function Jn(){return xn.documentElement.scrollLeft||xn.body.scrollLeft}function $n(){return window.innerHeight}function eo(){var e=window.innerWidth;return e-(e-(ae(document.documentElement)?0:document.documentElement.offsetWidth))}var to=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),io=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},so=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return to(t,e),io([os("left")],t.prototype,"X",void 0),io([os("top")],t.prototype,"Y",void 0),t}(Ls),no="e-popup",oo="e-rtl",ro="e-popup-open",ao="e-popup-close",lo=function(e){function t(t,i){return e.call(this,i,t)||this}return to(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"width":Ri(this.element,{width:ge(e.width)});break;case"height":Ri(this.element,{height:ge(e.height)});break;case"zIndex":Ri(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var n=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+n).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove(no,oo,ro,ao),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(no);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=ge(this.width)),"auto"!==this.height&&(e.height=ge(this.height)),Ri(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){bt.isDevice&&Ct.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];Ct.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){bt.isDevice&&Ct.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];Ct.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||ae(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),s=0;s<i.length;s++)if(!this.isElementVisible(e,i[s]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(ae(this.checkGetBoundingClientRect(t))){var s=window,n={top:s.scrollY,left:s.scrollX,right:s.scrollX+s.outerWidth,bottom:s.scrollY+s.outerHeight},o=Tn(e),r={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},a={top:n.bottom-r.top,left:n.right-r.left,bottom:r.bottom-n.top,right:r.right-n.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(oo):this.element.classList.remove(oo)},t.prototype.setContent=function(){ae(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,t){ae(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var s=this.element.style.display,n=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){s=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=s}else e={left:0,top:0};ae(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return null}},t.prototype.getAnchorPosition=function(e,t,i,s,n){var o=this.checkGetBoundingClientRect(t),r=this.checkGetBoundingClientRect(e);if(ae(o)||ae(r))return null;var a=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=Tn(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(t=t.parentElement),l=kn(a,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=r.width/2-o.width/2:l.left+=r.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=r.width-o.width:l.left+=r.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=r.height/2-o.height/2:l.top+=r.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=r.height-o.height:l.top+=r.height}return l.left+=s,l.top+=n,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();jn(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Fn(this.element,this.viewPortElement).length)if(ae(this.viewPortElement)){var t=Hn(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(ae(i)||ae(s))return null;e&&!0===e.Y&&(s.top>i.top?this.element.style.top="0px":s.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-s.bottom)+"px")),e&&!0===e.X&&(s.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-s.right)+"px":s.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var i=this;if(this.wireEvents(),1e3===this.zIndex||!ae(t)){var s=ae(t)?this.element:t;this.zIndex=co(s),Ri(this.element,{zIndex:this.zIndex})}e=ae(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(Ci([this.element],ao),bi([this.element],ro),this.checkCollision(),Ci([this.element],ro),bi([this.element],ao)),ae(e)?(Ci([this.element],ao),bi([this.element],ro),this.trigger("open")):(e.begin=function(){i.isDestroyed||(Ci([i.element],ao),bi([i.element],ro))},e.end=function(){i.isDestroyed||i.trigger("open")},new vs(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=ae(e)||"object"!=typeof e?this.hideAnimation:e,ae(e)?(Ci([this.element],ro),bi([this.element],ao),this.trigger("close")):(e.end=function(){t.isDestroyed||(Ci([t.element],ro),bi([t.element],ao),t.trigger("close"))},new vs(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),ho(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,ae(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},io([os("auto")],t.prototype,"height",void 0),io([os("auto")],t.prototype,"width",void 0),io([os(null)],t.prototype,"content",void 0),io([os("container")],t.prototype,"targetType",void 0),io([os(null)],t.prototype,"viewPortElement",void 0),io([os({X:"none",Y:"none"})],t.prototype,"collision",void 0),io([os("")],t.prototype,"relateTo",void 0),io([rs({},so)],t.prototype,"position",void 0),io([os(0)],t.prototype,"offsetX",void 0),io([os(0)],t.prototype,"offsetY",void 0),io([os(1e3)],t.prototype,"zIndex",void 0),io([os(!1)],t.prototype,"enableRtl",void 0),io([os("reposition")],t.prototype,"actionOnScroll",void 0),io([os(null)],t.prototype,"showAnimation",void 0),io([os(null)],t.prototype,"hideAnimation",void 0),io([cs()],t.prototype,"open",void 0),io([cs()],t.prototype,"close",void 0),io([cs()],t.prototype,"targetExitViewport",void 0),t=io([ps],t)}(Ns);function ho(e,t){for(var i=getComputedStyle(e),s=[],n=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var r=getComputedStyle(o);"absolute"===i.position&&"static"===r.position||!n.test(r.overflow+r.overflowY+r.overflowX)||s.push(o),o=o.parentElement}return t||s.push(document),s}function co(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var s=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==s&&"static"!==n&&i.push(s),t=t.parentElement}for(var o=[],r=0;r<document.body.children.length;r++)if(!e.isEqualNode(document.body.children[r])){s=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("position");"auto"!==s&&"static"!==n&&o.push(s)}o.push("999");var a=[];if(!ae(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(r=0;r<l.length;r++){s=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("position");"auto"!==s&&"static"!==n&&a.push(s)}}var h=i.concat(o,a),c=Math.max.apply(Math,h)+1;return c>2147483647?2147483647:c}function po(e){void 0===e&&(e=["*"]);for(var t=[],i=0;i<e.length;i++)for(var s=document.getElementsByTagName(e[i]),n=0;n<s.length;n++){var o=document.defaultView.getComputedStyle(s[n],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(s[n],null).getPropertyValue("position");"auto"!==o&&"static"!==r&&t.push(o)}var a=Math.max.apply(Math,t)+1;return a>2147483647?2147483647:a}function uo(e,t,i,s,n,o){var r=s;if(s.tagName===t){var a=ee("ej2_instances",s);r=e("input",{attrs:{type:i}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,c=s.attributes.length;h<c;h++)-1===l.indexOf(s.attributes[h].nodeName)&&r.setAttribute(s.attributes[h].nodeName,s.attributes[h].nodeValue);Di(s,{class:n,role:o,"aria-checked":"false"}),s.appendChild(r),te("ej2_instances",a,r),ie(s,"ej2_instances")}return r}function mo(e){for(var t,i=e.childNodes,s=0;s<i.length;s++)if(3===(t=i[s]).nodeType)return t;return null}function fo(e,t,i){void 0===t&&(t=!1),void 0===i&&(i={});var s=e("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&bi([s],i.cssClass.split(" ")),i.enableRtl&&s.classList.add("e-rtl"),t){var n=e("span",{className:"e-ripple-container"});ys(n,{isCenterRipple:!0,duration:400}),s.appendChild(n)}var o=e("span",{className:"e-frame e-icons"});if(i.checked&&o.classList.add("e-check"),s.appendChild(o),i.label){var r=e("span",{className:"e-label",innerHTML:i.label});s.appendChild(r)}return s}function go(e,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}}function vo(e,t){e.element.getAttribute("ejs-for")&&t.appendChild(e.createElement("input",{attrs:{name:e.name||e.element.name,value:"false",type:"hidden"}}))}var yo,bo,Co,So,xo,wo,Eo,ko,To=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Lo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Do=new We,Io="e-rtl",Oo="e-btn",Ao="e-primary",Mo="e-icon-btn",Po=function(e){function t(t,i){return e.call(this,t,i)||this}return To(t,e),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=ys(this.element,{selector:"."+Oo}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&bi([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add(Ao),!ye()||ye()&&"progress-btn"!==this.getModuleName()){if(this.content){var e=this.enableHtmlSanitizer?ln.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add(Io),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Mo);var t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}},t.prototype.wireEvents=function(){this.isToggle&&Ct.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&Ct.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var t,i=[Ao,Io,Mo,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(i=i.concat(this.cssClass.split(" "))),e.prototype.destroy.call(this),Ci([this.element],i),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),(t=this.element.querySelector("span.e-btn-icon"))&&Ti(t),this.unWireEvents(),ws&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"isPrimary":e.isPrimary?this.element.classList.add(Ao):this.element.classList.remove(Ao);break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":var n=this.element.querySelector("span.e-btn-icon");n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&("Left"===this.iconPosition?n.classList.add("e-icon-left"):n.classList.add("e-icon-right"))):Ti(n):this.setIconCss();break;case"iconPosition":Ci([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&Ti(n),this.setIconCss();break;case"cssClass":t.cssClass&&Ci([this.element],t.cssClass.split(" ")),e.cssClass&&bi([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Io):this.element.classList.remove(Io);break;case"content":mo(this.element)||this.element.classList.remove(Mo),(!ye()||ye()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(e.content=ln.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss());break;case"isToggle":e.isToggle?Ct.add(this.element,"click",this.btnClickHandler,this):(Ct.remove(this.element,"click",this.btnClickHandler),Ci([this.element],["e-active"]))}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Lo([os("Left")],t.prototype,"iconPosition",void 0),Lo([os("")],t.prototype,"iconCss",void 0),Lo([os(!1)],t.prototype,"disabled",void 0),Lo([os(!1)],t.prototype,"isPrimary",void 0),Lo([os("")],t.prototype,"cssClass",void 0),Lo([os("")],t.prototype,"content",void 0),Lo([os(!1)],t.prototype,"isToggle",void 0),Lo([os()],t.prototype,"locale",void 0),Lo([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Lo([cs()],t.prototype,"created",void 0),t=Lo([ps],t)}(Ns),No=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ro=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Bo="e-frame",Ho="e-ripple-container",Fo=["title","class","style","disabled","readonly","name","value"],jo=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isFocused=!1,s.isMouseClick=!1,s}return No(t,e),t.prototype.changeState=function(e){var t,i,s=this.getWrapper().getElementsByClassName(Bo)[0];ws&&(i=this.getWrapper().getElementsByClassName(Ho)[0]),"check"===e?(s.classList.remove("e-stop"),s.classList.add("e-check"),i&&(i.classList.remove("e-ripple-stop"),i.classList.add("e-ripple-check")),t="true",this.element.checked=!0):"uncheck"===e?(Ci([s],["e-check","e-stop"]),i&&Ci([i],["e-ripple-check","e-ripple-stop"]),t="false",this.element.checked=!1):(s.classList.remove("e-check"),s.classList.add("e-stop"),i&&(i.classList.remove("e-ripple-check"),i.classList.add("e-ripple-stop")),t="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",t)},t.prototype.clickHandler=function(e){this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var t={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",t),e.stopPropagation()},t.prototype.destroy=function(){var t=this,i=this.getWrapper();e.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),Ti(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(e){t.element.removeAttribute(e)})):(["role","aria-checked","class"].forEach(function(e){i.removeAttribute(e)}),i.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.initialize=function(){ae(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains("e-checkbox-wrapper")||(e=this.createElement("div",{className:"e-checkbox-wrapper",attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));var t=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+Bo});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&bi([e],this.cssClass.split(" ")),e.appendChild(t),t.appendChild(this.element),vo(this,t),t.appendChild(i),ws){var s=this.createElement("span",{className:Ho});"Before"===this.labelPosition?t.appendChild(s):t.insertBefore(s,i),ys(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseHandler=function(e){this.isMouseClick=!0,go(e,this.getWrapper().getElementsByClassName(Ho)[0])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.getWrapper(),s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove("e-checkbox-disabled"),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&Ci([i],t.cssClass.split(" ")),e.cssClass&&bi([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":var o=i.getElementsByClassName("e-label")[0],r=i.getElementsByTagName("label")[0];Ti(o),"After"===e.labelPosition?r.appendChild(o):r.insertBefore(o,i.getElementsByClassName(Bo)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}},t.prototype.preRender=function(){var e=this.element;this.formElement=Mi(this.element,"form"),this.tagName=this.element.tagName,e=uo(this.createElement,"EJS-CHECKBOX","checkbox",e,"e-checkbox-wrapper","checkbox"),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=he("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add("e-checkbox-disabled"),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var t=this.getWrapper();if(t){var i=t.getElementsByClassName("e-label")[0];if(i)i.textContent=e;else{e=this.enableHtmlSanitizer?ln.sanitize(e):e,i=this.createElement("span",{className:"e-label",innerHTML:e});var s=t.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(i,t.getElementsByClassName(Bo)[0]):s.appendChild(i)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;Ct.remove(this.element,"click",this.clickHandler),Ct.remove(this.element,"keyup",this.keyUpHandler),Ct.remove(this.element,"focus",this.focusHandler),Ct.remove(this.element,"focusout",this.focusOutHandler);var t=e.getElementsByTagName("label")[0];Ct.remove(t,"mousedown",this.labelMouseHandler),Ct.remove(t,"mouseup",this.labelMouseHandler),this.formElement&&Ct.remove(this.formElement,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&Ct.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();Ct.add(this.element,"click",this.clickHandler,this),Ct.add(this.element,"keyup",this.keyUpHandler,this),Ct.add(this.element,"focus",this.focusHandler,this),Ct.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByTagName("label")[0];Ct.add(t,"mousedown",this.labelMouseHandler,this),Ct.add(t,"mouseup",this.labelMouseHandler,this),this.formElement&&Ct.add(this.formElement,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&Ct.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"==typeof this.value){var t=this.element.value;if(t&&this.value){if(!e){var i=this.value.indexOf(t);return this.checked?i<0&&this.value.push(t):i>-1&&this.value.splice(i,1),this.value}for(var s=0;s<this.value.length;s++)t===this.value[s]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Fo.indexOf(i)>-1){var s=this.getWrapper();if("class"===i)bi([s],this.htmlAttributes[i].split(" "));else if("title"===i)s.setAttribute(i,this.htmlAttributes[i]);else if("style"===i){this.getWrapper().getElementsByClassName(Bo)[0].setAttribute(i,this.htmlAttributes[i])}else this.element.setAttribute(i,this.htmlAttributes[i])}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Ro([cs()],t.prototype,"change",void 0),Ro([cs()],t.prototype,"created",void 0),Ro([os(!1)],t.prototype,"checked",void 0),Ro([os("")],t.prototype,"cssClass",void 0),Ro([os(!1)],t.prototype,"disabled",void 0),Ro([os(!1)],t.prototype,"indeterminate",void 0),Ro([os("")],t.prototype,"label",void 0),Ro([os("After")],t.prototype,"labelPosition",void 0),Ro([os("")],t.prototype,"name",void 0),Ro([os("")],t.prototype,"value",void 0),Ro([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ro([os({})],t.prototype,"htmlAttributes",void 0),t=Ro([ps],t)}(Ns),Vo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),zo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},_o=["title","class","style","disabled","readonly","name","value"],qo=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isFocused=!1,s}var i;return Vo(t,e),i=t,t.prototype.changeHandler=function(e){this.checked=!0,this.dataBind();var t=this.element.getAttribute("value");t=this.isVue&&t?this.element.value:this.value,this.trigger("change",{value:t,event:e}),"EJS-RADIOBUTTON"===this.tagName&&e.stopPropagation()},t.prototype.updateChange=function(){for(var e,t,s=this.getRadioGroup(),n=0;n<s.length;n++)(e=s[n])!==this.element&&((t=Ce(e,i)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(t.angularValue=this.value))},t.prototype.destroy=function(){var t=this,i=this.element.parentElement;e.prototype.destroy.call(this),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(i.parentNode&&i.parentNode.insertBefore(this.element,i),Ti(i),this.element.checked=!1,["name","value","disabled"].forEach(function(e){t.element.removeAttribute(e)})):(["role","aria-checked","class"].forEach(function(e){i.removeAttribute(e)}),i.innerHTML="")},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getLabel();e&&e.classList.remove("e-focus")},t.prototype.getModuleName=function(){return"radio"},t.prototype.getSelectedValue=function(){for(var e,t=this.getRadioGroup(),i=0,s=t.length;i<s;i++)if((e=t[i]).checked)return e.value;return""},t.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getLabel=function(){return this.element?this.element.nextElementSibling:null},t.prototype.initialize=function(){ae(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var e=this.element.getAttribute("value");this.isVue&&e&&e===this.value&&(this.checked=!0),(this.isVue?this.value&&!e:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e,t=this.element.parentElement;t.classList.contains("e-radio-wrapper")||(t=this.createElement("div",{className:"e-radio-wrapper"}),this.element.parentNode.insertBefore(t,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),ws&&(e=this.createElement("span",{className:"e-ripple-container"}),i.appendChild(e),ys(e,{duration:400,isCenterRipple:!0})),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add("e-rtl"),this.cssClass&&bi([i],this.cssClass.split(" ")),this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},t.prototype.labelRippleHandler=function(e){go(e,this.getLabel().getElementsByClassName("e-ripple-container")[0])},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&Di(this.element,{checked:"true"})},t.prototype.onPropertyChanged=function(e,t){for(var i=this.getLabel(),s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"checked":e.checked&&this.updateChange(),this.element.checked=e.checked;break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":t.cssClass&&Ci([i],t.cssClass.split(" ")),e.cssClass&&bi([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":"Before"===e.labelPosition?i.classList.add("e-right"):i.classList.remove("e-right");break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(!ae(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttribute()}}},t.prototype.preRender=function(){var e=this.element;if(this.formElement=Mi(this.element,"form"),this.tagName=this.element.tagName,e=uo(this.createElement,"EJS-RADIOBUTTON","radio",e,"e-radio-wrapper","radio"),this.element=e,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=he("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var t=this.element.getAttribute("formcontrolname");t&&(this.setProperties({name:t},!0),this.element.setAttribute("name",t))}},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.setDisabled=function(){this.element.disabled=!0},t.prototype.setText=function(e){var t=this.getLabel();if(t){var i=t.getElementsByClassName("e-label")[0];i?i.textContent=e:(e=this.enableHtmlSanitizer?ln.sanitize(e):e,i=this.createElement("span",{className:"e-label",innerHTML:e}),t.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")}},t.prototype.updateHtmlAttribute=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(_o.indexOf(i)>-1){var s=this.element.parentElement;"class"===i?bi([s],this.htmlAttributes[i].split(" ")):"title"===i||"style"===i?s.setAttribute(i,this.htmlAttributes[i]):this.element.setAttribute(i,this.htmlAttributes[i])}}},t.prototype.unWireEvents=function(){var e=this.getLabel();Ct.remove(this.element,"change",this.changeHandler),Ct.remove(this.element,"focus",this.focusHandler),Ct.remove(this.element,"focusout",this.focusOutHandler),Ct.remove(this.element,"keyup",this.keyUpHandler);var t=e.getElementsByClassName("e-label")[0];t&&(Ct.remove(t,"mousedown",this.labelRippleHandler),Ct.remove(t,"mouseup",this.labelRippleHandler)),this.formElement&&Ct.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.wireEvents=function(){var e=this.getLabel();Ct.add(this.element,"change",this.changeHandler,this),Ct.add(this.element,"keyup",this.keyUpHandler,this),Ct.add(this.element,"focus",this.focusHandler,this),Ct.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByClassName("e-label")[0];t&&(Ct.add(t,"mousedown",this.labelRippleHandler,this),Ct.add(t,"mouseup",this.labelRippleHandler,this)),this.formElement&&Ct.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},zo([cs()],t.prototype,"change",void 0),zo([cs()],t.prototype,"created",void 0),zo([os(!1)],t.prototype,"checked",void 0),zo([os("")],t.prototype,"cssClass",void 0),zo([os(!1)],t.prototype,"disabled",void 0),zo([os("")],t.prototype,"label",void 0),zo([os("After")],t.prototype,"labelPosition",void 0),zo([os("")],t.prototype,"name",void 0),zo([os("")],t.prototype,"value",void 0),zo([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),zo([os({})],t.prototype,"htmlAttributes",void 0),t=i=zo([ps],t)}(Ns),Wo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Uo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Go=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isFocused=!1,s.isDrag=!1,s}return Wo(t,e),t.prototype.changeState=function(e){var t,i,s=this.getWrapper(),n=s.querySelector(".e-switch-inner"),o=s.querySelector(".e-switch-handle");ws&&(i=s.getElementsByClassName("e-ripple-container")[0]),e?(bi([n,o],"e-switch-active"),t="true",this.element.checked=!0,this.checked=!0,i&&bi([i],["e-ripple-check"])):(Ci([n,o],"e-switch-active"),t="false",this.element.checked=!1,this.checked=!1,i&&Ci([i],["e-ripple-check"])),s.setAttribute("aria-checked",t)},t.prototype.clickHandler=function(e){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus();var t={checked:this.element.checked,event:e};this.trigger("change",t)},t.prototype.destroy=function(){var t,i;e.prototype.destroy.call(this),this.disabled||this.unWireEvents(),t=this,i=this.getWrapper(),"INPUT"===this.tagName?(i.parentNode.insertBefore(t.element,i),Ti(i),t.element.checked=!1,["name","value","disabled"].forEach(function(e){t.element.removeAttribute(e)})):(["role","aria-checked","class"].forEach(function(e){i.removeAttribute(e)}),i.innerHTML="")},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){this.getWrapper().classList.remove("e-focus")},t.prototype.getModuleName=function(){return"switch"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.initialize=function(){ae(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains("e-switch-wrapper")||(e=this.createElement("div",{className:"e-switch-wrapper",attrs:{role:"switch","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));var t=this.createElement("span",{className:"e-switch-inner"}),i=this.createElement("span",{className:"e-switch-on"}),s=this.createElement("span",{className:"e-switch-off"}),n=this.createElement("span",{className:"e-switch-handle"});if(e.appendChild(this.element),vo(this,e),t.appendChild(i),t.appendChild(s),e.appendChild(t),e.appendChild(n),ws){var o=this.createElement("span",{className:"e-ripple-container"});n.appendChild(o),ys(o,{duration:400,isCenterRipple:!0})}e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&bi([e],this.cssClass.split(" "))},t.prototype.onPropertyChanged=function(e,t){for(var i=this.getWrapper(),s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"checked":this.changeState(e.checked);break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove("e-switch-disabled"),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"value":this.element.setAttribute("value",e.value);break;case"name":this.element.setAttribute("name",e.name);break;case"onLabel":case"offLabel":this.setLabel(e.onLabel,e.offLabel);break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"cssClass":t.cssClass&&Ci([i],t.cssClass.split(" ")),e.cssClass&&bi([i],e.cssClass.split(" "))}}},t.prototype.preRender=function(){var e=this.element;this.formElement=Mi(this.element,"form"),this.tagName=this.element.tagName,function(e,t,i,s,n){s=uo(e.createElement,t,"checkbox",s,i,n),e.element=s,"checkbox"!==e.element.getAttribute("type")&&e.element.setAttribute("type","checkbox"),e.element.id||(e.element.id=he("e-"+n))}(this,"EJS-SWITCH","e-switch-wrapper",e,this.getModuleName())},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.rippleHandler=function(e){go(e,this.getWrapper().getElementsByClassName("e-ripple-container")[0]),"mousedown"===e.type&&e.currentTarget.classList.contains("e-switch-wrapper")&&1===e.which&&(this.isDrag=!0,this.isFocused=!1)},t.prototype.rippleTouchHandler=function(e){var t=this.getWrapper().getElementsByClassName("e-ripple-container")[0];if(t){var i=document.createEvent("MouseEvents");i.initEvent(e,!1,!0),t.dispatchEvent(i)}},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add("e-switch-disabled"),e.setAttribute("aria-disabled","true")},t.prototype.setLabel=function(e,t){var i=this.getWrapper();e&&(i.querySelector(".e-switch-on").textContent=e),t&&(i.querySelector(".e-switch-off").textContent=t)},t.prototype.switchFocusHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.switchMouseUp=function(e){var t=e.target;this.getWrapper().getElementsByClassName("e-ripple-container")[0];"touchmove"===e.type&&e.preventDefault(),"touchstart"===e.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===e.type&&t.className.indexOf("e-switch")<0||"touchend"===e.type)&&(this.clickHandler(e),this.rippleTouchHandler("mouseup"),e.preventDefault())},t.prototype.formResetHandler=function(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue},t.prototype.toggle=function(){this.clickHandler()},t.prototype.wireEvents=function(){var e=this.getWrapper();e.querySelector(".e-switch-handle");this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),Ct.add(e,"click",this.clickHandler,this),Ct.add(this.element,"focus",this.focusHandler,this),Ct.add(this.element,"focusout",this.focusOutHandler,this),Ct.add(this.element,"mouseup",this.delegateMouseUpHandler,this),Ct.add(this.element,"keyup",this.delegateKeyUpHandler,this),Ct.add(e,"mousedown mouseup",this.rippleHandler,this),Ct.add(e,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&Ct.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.unWireEvents=function(){var e=this.getWrapper();e.querySelector(".e-switch-handle");Ct.remove(e,"click",this.clickHandler),Ct.remove(this.element,"focus",this.focusHandler),Ct.remove(this.element,"focusout",this.focusOutHandler),Ct.remove(this.element,"mouseup",this.delegateMouseUpHandler),Ct.remove(this.element,"keyup",this.delegateKeyUpHandler),Ct.remove(e,"mousedown mouseup",this.rippleHandler),Ct.remove(e,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&Ct.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Uo([cs()],t.prototype,"change",void 0),Uo([cs()],t.prototype,"created",void 0),Uo([os(!1)],t.prototype,"checked",void 0),Uo([os("")],t.prototype,"cssClass",void 0),Uo([os(!1)],t.prototype,"disabled",void 0),Uo([os("")],t.prototype,"name",void 0),Uo([os("")],t.prototype,"onLabel",void 0),Uo([os("")],t.prototype,"offLabel",void 0),Uo([os("")],t.prototype,"value",void 0),t=Uo([ps],t)}(Ns),Yo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Xo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Ko={chipSet:"e-chip-set",chip:"e-chip",avatar:"e-chip-avatar",text:"e-chip-text",icon:"e-chip-icon",delete:"e-chip-delete",deleteIcon:"e-dlt-btn",multiSelection:"e-multi-selection",singleSelection:"e-selection",active:"e-active",chipWrapper:"e-chip-avatar-wrap",iconWrapper:"e-chip-icon-wrap",focused:"e-focused",disabled:"e-disabled",rtl:"e-rtl"},Zo=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.multiSelectedChip=[],s}return Yo(t,e),t.prototype.preRender=function(){},t.prototype.chipType=function(){return this.chips&&this.chips.length&&this.chips.length>0},t.prototype.render=function(){this.type=this.chips.length?"chipset":this.text||this.element.innerText?"chip":"chipset",ye()&&this.isServerRendered||(this.setAttributes(),this.createChip(),this.setRtl(),this.select(this.selectedChips,void 0)),this.wireEvent(!1),this.rippleFunction=ys(this.element,{selector:".e-chip"}),this.renderComplete()},t.prototype.createChip=function(){if(this.innerText=this.element.innerText.trim(),ye())for(var e=this.element.querySelectorAll(".e-chip"),t=0;t<e.length;t++)null!=e[t]&&Ti(e[t]);else this.element.innerHTML="";this.chipCreation("chip"===this.type?[this.innerText?this.innerText:this.text]:this.chips)},t.prototype.setAttributes=function(){"chip"===this.type?(this.element.tabIndex=0,this.element.setAttribute("role","option")):(this.element.classList.add(Ko.chipSet),this.element.setAttribute("role","listbox"),"Multiple"===this.selection?(this.element.classList.add(Ko.multiSelection),this.element.setAttribute("aria-multiselectable","true")):"Single"===this.selection?(this.element.classList.add(Ko.singleSelection),this.element.setAttribute("aria-multiselectable","false")):this.element.setAttribute("aria-multiselectable","false"))},t.prototype.setRtl=function(){this.element.classList[this.enableRtl?"add":"remove"](Ko.rtl)},t.prototype.chipCreation=function(e){for(var t=[],i=0;i<e.length;i++){var s=this.getFieldValues(e[i]),n=this.elementCreation(s),o=(Ko.chip+" "+(s.enabled?" ":Ko.disabled)+" "+(s.avatarIconCss||s.avatarText?Ko.chipWrapper:s.leadingIconCss?Ko.iconWrapper:" ")+" "+s.cssClass).split(" ").filter(function(e){return e});if(this.chipType()){var r=this.createElement("DIV",{className:o.join(" "),attrs:{tabIndex:"0",role:"option","aria-label":s.text,"aria-selected":"false"}});s.value&&r.setAttribute("data-value",s.value.toString()),Ei(n,r),t.push(r)}else t=n,bi([this.element],o),this.element.setAttribute("aria-label",s.text),s.value&&this.element.setAttribute("data-value",s.value.toString())}Ei(t,this.element)},t.prototype.getFieldValues=function(e){var t=!("false"===this.enabled.toString());return{text:"object"==typeof e?e.text?e.text.toString():this.text.toString():this.chipType()?e.toString():this.innerText?this.innerText:this.text.toString(),cssClass:"object"==typeof e&&e.cssClass?e.cssClass.toString():this.cssClass.toString(),leadingIconCss:"object"==typeof e&&e.leadingIconCss?e.leadingIconCss.toString():this.leadingIconCss.toString(),avatarIconCss:"object"==typeof e&&e.avatarIconCss?e.avatarIconCss.toString():this.avatarIconCss.toString(),avatarText:"object"==typeof e&&e.avatarText?e.avatarText.toString():this.avatarText.toString(),trailingIconCss:"object"==typeof e&&e.trailingIconCss?e.trailingIconCss.toString():this.trailingIconCss.toString(),enabled:"object"==typeof e?ae(e.enabled)?t:"false"!==e.enabled.toString():t,value:"object"==typeof e&&e.value?e.value.toString():null,leadingIconUrl:"object"==typeof e&&e.leadingIconUrl?e.leadingIconUrl.toString():this.leadingIconUrl,trailingIconUrl:"object"==typeof e&&e.trailingIconUrl?e.trailingIconUrl.toString():this.trailingIconUrl}},t.prototype.elementCreation=function(e){var t=[];if(e.avatarText||e.avatarIconCss){var i=(Ko.avatar+" "+e.avatarIconCss).trim(),s=this.createElement("span",{className:i});s.innerText=e.avatarText,t.push(s)}else if(e.leadingIconCss){i=(Ko.icon+" "+e.leadingIconCss).trim();var n=this.createElement("span",{className:i});t.push(n)}else if(e.leadingIconUrl){i=(Ko.avatar+" image-url").trim();(n=this.createElement("span",{className:i})).style.backgroundImage="url("+e.leadingIconUrl+")",t.push(n)}var o=this.createElement("span",{className:Ko.text});if(o.innerText=e.text,t.push(o),e.trailingIconCss||this.chipType()&&this.enableDelete){i=(Ko.delete+" "+(e.trailingIconCss?e.trailingIconCss:Ko.deleteIcon)).trim();var r=this.createElement("span",{className:i});t.push(r)}else if(e.trailingIconUrl){i="trailing-icon-url".trim();var a=this.createElement("span",{className:i});a.style.backgroundImage="url("+e.trailingIconUrl+")",t.push(a)}return t},t.prototype.find=function(e){var t,i=e instanceof HTMLElement?e:this.element.querySelectorAll("."+Ko.chip)[e];return i&&this.chipType()&&((t={text:void 0,index:void 0,element:void 0,data:void 0}).index=Array.prototype.slice.call(this.element.querySelectorAll("."+Ko.chip)).indexOf(i),t.text="object"==typeof this.chips[t.index]?this.chips[t.index].text?this.chips[t.index].text.toString():"":this.chips[t.index].toString(),t.data=this.chips[t.index],t.element=i),t},t.prototype.add=function(e){var t;if("chip"!==this.type){var i=e instanceof Array?e:[e];(t=this.chips).push.apply(t,i),this.chipCreation(i)}},t.prototype.select=function(e,t){this.onSelect(e,!1,t)},t.prototype.multiSelection=function(e){for(var t=this.element.querySelectorAll(".e-chip"),i=0;i<e.length;i++)if("string"==typeof e[i]){for(var s=0;s<t.length;s++)if(e[i]!==s&&e[i]===t[s].attributes[5].value){this.multiSelectedChip.push(s);break}}else this.multiSelectedChip.push(e[i])},t.prototype.onSelect=function(e,t,i){var s,n,o;if(this.chipType()&&"None"!==this.selection){if(t)for(var r=this.element.querySelectorAll("."+Ko.chip),a=0;a<r.length;a++)r[a].setAttribute("aria-selected","false"),r[a].classList.remove(Ko.active);var l=e instanceof Array?e:[e];for(a=0;a<l.length;a++){var h=l[a]instanceof HTMLElement?l[a]:this.element.querySelectorAll("."+Ko.chip)[l[a]];if("index"!==i)for(var c=0;c<this.chips.length;c++){n=this.element.querySelectorAll("."+Ko.chip)[c];var p=this.getFieldValues(this.chips[c]);"value"===i?null!==p.value&&(o=n.dataset.value):"text"===i&&(o=n.innerText),o===l[a].toString()&&(s=c,h=this.element.querySelectorAll("."+Ko.chip)[s])}h instanceof HTMLElement&&this.selectionHandler(h)}}},t.prototype.remove=function(e){var t=this;if(this.chipType()){var i=e instanceof Array?e:[e],s=[],n=this.element.querySelectorAll("."+Ko.chip);i.forEach(function(e){var t=e instanceof HTMLElement?e:n[e];t instanceof HTMLElement&&s.push(t)}),s.forEach(function(e){var i=t.element.querySelectorAll("."+Ko.chip),s=Array.prototype.slice.call(i).indexOf(e);t.deleteHandler(e,s)})}},t.prototype.getSelectedChips=function(){var e;if(this.chipType()&&"None"!==this.selection){for(var t={texts:[],Indexes:[],data:[],elements:[]},i=this.element.querySelectorAll("."+Ko.active),s=0;s<i.length;s++){var n=i[s];t.elements.push(n);var o=Array.prototype.slice.call(this.element.querySelectorAll("."+Ko.chip)).indexOf(n);t.Indexes.push(o),t.data.push(this.chips[o]);var r="object"==typeof this.chips[o]?this.chips[o].text?this.chips[o].text.toString():null:this.chips[o].toString();t.texts.push(r)}var a={text:t.texts[0],index:t.Indexes[0],data:t.data[0],element:t.elements[0]};e=ae(a.index)?void 0:"Multiple"===this.selection?t:a}return e},t.prototype.wireEvent=function(e){e?(Ct.remove(this.element,"click",this.clickHandler),Ct.remove(this.element,"focusout",this.focusOutHandler),Ct.remove(this.element,"keydown",this.keyHandler),Ct.remove(this.element,"keyup",this.keyHandler)):(Ct.add(this.element,"click",this.clickHandler,this),Ct.add(this.element,"focusout",this.focusOutHandler,this),Ct.add(this.element,"keydown",this.keyHandler,this),Ct.add(this.element,"keyup",this.keyHandler,this))},t.prototype.keyHandler=function(e){e.target.classList.contains(Ko.chip)&&("keydown"===e.type?13===e.keyCode?this.clickHandler(e):46===e.keyCode&&this.enableDelete&&this.clickHandler(e,!0):9===e.keyCode&&this.focusInHandler(e.target))},t.prototype.focusInHandler=function(e){e.classList.contains(Ko.focused)||e.classList.add(Ko.focused)},t.prototype.focusOutHandler=function(e){var t=Mi(e.target,"."+Ko.chip),i=this.chipType()?this.element.querySelector("."+Ko.focused):this.element.classList.contains(Ko.focused)?this.element:null;t&&i&&i.classList.remove(Ko.focused)},t.prototype.clickHandler=function(e,t){var i=this;void 0===t&&(t=!1);var s=Mi(e.target,"."+Ko.chip);if(s){var n=void 0;if(this.chipType())n=this.find(s);else{var o=Array.prototype.slice.call(this.element.querySelectorAll("."+Ko.chip)).indexOf(s);n={text:this.innerText?this.innerText:this.text,element:s,data:this.text,index:o}}n.event=e,n.cancel=!1,this.trigger("beforeClick",n,function(s){s.cancel||(s.element=ye()?be(s.element):s.element,i.clickEventHandler(s.element,e,t))})}},t.prototype.clickEventHandler=function(e,t,i){var s=this;if(this.chipType()){var n=this.find(e);if(n.event=t,(t.target.classList.contains(Ko.deleteIcon)?t.target:i?e.querySelector("."+Ko.deleteIcon):void 0)&&this.enableDelete){n.cancel=!1;var o=n;this.trigger("delete",o,function(e){e.cancel||(e.element=ye()?be(e.element):e.element,s.deleteHandler(e.element,e.index))})}else if("None"!==this.selection){this.selectionHandler(e),n.selected=e.classList.contains(Ko.active);var r=n;this.trigger("click",r)}else{this.focusInHandler(e);var a=n;this.trigger("click",a)}}else{this.focusInHandler(e);a={text:this.innerText?this.innerText:this.text,element:e,data:this.text,event:t};this.trigger("click",a)}},t.prototype.selectionHandler=function(e){if("Single"===this.selection){var t=this.element.querySelector("."+Ko.active);t&&t!==e&&(t.classList.remove(Ko.active),t.setAttribute("aria-selected","false")),this.setProperties({selectedChips:null},!0)}else this.setProperties({selectedChips:[]},!0);e.classList.contains(Ko.active)?(e.classList.remove(Ko.active),e.setAttribute("aria-selected","false")):(e.classList.add(Ko.active),e.setAttribute("aria-selected","true")),this.updateSelectedChips()},t.prototype.updateSelectedChips=function(){for(var e,t=this.element.querySelectorAll(".e-chip"),i=[],s=[],n=null,o=0;o<t.length;o++){var r=this.element.querySelectorAll(".e-chip")[o];if("true"===r.getAttribute("aria-selected")){if(e=r.getAttribute("data-value"),"Single"===this.selection&&r.classList.contains("e-active")){n=e||o;break}e?s.push(e):i.push(o)}}this.setProperties({selectedChips:"Single"===this.selection?n:e?s:i},!0)},t.prototype.deleteHandler=function(e,t){this.allowServerDataBinding=!0,this.chips.splice(t,1),this.setProperties({chips:this.chips},!0),this.serverDataBind(),this.allowServerDataBinding=!1,ye()&&this.isServerRendered||Ti(e)},t.prototype.destroy=function(){if(Ci([this.element],[Ko.chipSet,Ko.chip,Ko.rtl,Ko.multiSelection,Ko.singleSelection,Ko.disabled,Ko.chipWrapper,Ko.iconWrapper,Ko.active,Ko.focused].concat(this.cssClass.toString().split(" ").filter(function(e){return e}))),this.removeMultipleAttributes(["tabindex","role","aria-label","aria-multiselectable"],this.element),this.wireEvent(!0),this.rippleFunction(),ye())for(var t=this.chipType()?this.element.querySelectorAll(".e-chip"):this.element.querySelectorAll(".e-chip-text"),i=0;i<t.length;i++)null!=t[i]&&Ti(t[i]);else e.prototype.destroy.call(this),this.element.innerHTML="",this.element.innerText=this.innerText},t.prototype.removeMultipleAttributes=function(e,t){e.forEach(function(e){t.removeAttribute(e)})},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"chip-list"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"chips":case"text":case"avatarText":case"avatarIconCss":case"leadingIconCss":case"trailingIconCss":case"selection":case"enableDelete":case"enabled":ye()&&this.isServerRendered||(this.isServerRendered=!1,this.refresh(),this.isServerRendered=!0);break;case"cssClass":ye()&&this.isServerRendered||(this.chipType()?(this.isServerRendered=!1,this.refresh(),this.isServerRendered=!0):(Ci([this.element],t.cssClass.toString().split(" ").filter(function(e){return e})),bi([this.element],e.cssClass.toString().split(" ").filter(function(e){return e}))));break;case"selectedChips":Ci(this.element.querySelectorAll(".e-active"),"e-active");"Multiple"===this.selection?(this.multiSelectedChip=[],this.multiSelection(e.selectedChips),this.onSelect(this.multiSelectedChip,!0,void 0),this.updateSelectedChips()):this.onSelect(e.selectedChips,!0,void 0);break;case"enableRtl":this.setRtl()}}},Xo([os([])],t.prototype,"chips",void 0),Xo([os("")],t.prototype,"text",void 0),Xo([os("")],t.prototype,"avatarText",void 0),Xo([os("")],t.prototype,"avatarIconCss",void 0),Xo([os("")],t.prototype,"leadingIconCss",void 0),Xo([os("")],t.prototype,"trailingIconCss",void 0),Xo([os("")],t.prototype,"leadingIconUrl",void 0),Xo([os("")],t.prototype,"trailingIconUrl",void 0),Xo([os("")],t.prototype,"cssClass",void 0),Xo([os(!0)],t.prototype,"enabled",void 0),Xo([os([])],t.prototype,"selectedChips",void 0),Xo([os("None")],t.prototype,"selection",void 0),Xo([os(!1)],t.prototype,"enableDelete",void 0),Xo([cs()],t.prototype,"created",void 0),Xo([cs()],t.prototype,"click",void 0),Xo([cs()],t.prototype,"beforeClick",void 0),Xo([cs()],t.prototype,"delete",void 0),t=Xo([ps],t)}(Ns),Qo=function(){return function(){}}(),Jo=["north-west","north","north-east","west","east","south-west","south","south-east"],$o=0,er=0,tr=0,ir=0,sr=0,nr=0,or="e-resize-handle",rr="e-focused-handle",ar=["e-restrict-left"],lr="e-resize-viewport",hr=null,cr=null,pr=null,dr=!0,ur=0,mr=!0,fr=["north","west","east","south"];function gr(e){xr();var t=yi("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),yo.appendChild(t)}function vr(e){var t;return ae(e)||(t="string"==typeof e?document.querySelector(e):e),t}function yr(e){ae(e)&&(e=this);for(var t=yo.querySelectorAll("."+or),i=0;i<t.length;i++){bo=t[i],Ct.add(bo,"mousedown",Cr,e);var s="msie"===bt.info.name?"pointerdown":"touchstart";Ct.add(bo,s,wr,e)}var n=yo.querySelectorAll(".e-dialog-border-resize");if(!ae(n))for(i=0;i<n.length;i++){bo=n[i],Ct.add(bo,"mousedown",Cr,e);s="msie"===bt.info.name?"pointerdown":"touchstart";Ct.add(bo,s,wr,e)}}function br(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function Cr(e){if(e.preventDefault(),yo=e.target.parentElement,xr(),sr=e.pageX,nr=e.pageY,e.target.classList.add(rr),ae(hr)||!0!==hr(e,this)){var t=ae(Eo)?document:Eo;Ct.add(t,"mousemove",Er,this),Ct.add(document,"mouseup",Sr,this);for(var i=0;i<ar.length;i++)dr=!yo.classList.contains(ar[i])}}function Sr(e){var t="msie"===bt.info.name?"pointermove":"touchmove",i="msie"===bt.info.name?"pointerup":"touchend",s=ae(Eo)?document:Eo;Ct.remove(s,"mousemove",Er),Ct.remove(s,t,Er);var n="msie"===bt.info.name?"pointerdown":"touchstart";Ct.remove(s,n,Er),ae(document.body.querySelector("."+rr))||document.body.querySelector("."+rr).classList.remove(rr),ae(pr)||pr(e,this),Ct.remove(document,"mouseup",Sr),Ct.remove(document,i,Sr)}function xr(){$o=parseFloat(getComputedStyle(yo,null).getPropertyValue("width").replace("px","")),er=parseFloat(getComputedStyle(yo,null).getPropertyValue("height").replace("px","")),tr=yo.getBoundingClientRect().left,ir=yo.getBoundingClientRect().top}function wr(e){yo=e.target.parentElement,xr();var t=e.touches?e.changedTouches[0]:e;if(sr=t.pageX,nr=t.pageY,ae(hr)||!0!==hr(e,this)){var i="msie"===bt.info.name?"pointermove":"touchmove",s="msie"===bt.info.name?"pointerup":"touchend",n=ae(Eo)?document:Eo;Ct.add(n,i,Er,this),Ct.add(document,s,Sr)}}function Er(e){if(e.target.classList.contains(or)&&e.target.classList.contains(rr)?bo=e.target:ae(document.body.querySelector("."+rr))||(bo=document.body.querySelector("."+rr)),!ae(bo)){for(var t="",i=0;i<Jo.length;i++)bo.classList.contains("e-"+Jo[i])&&(t=Jo[i]);switch(ae(cr)||cr(e,this),t){case"south":Tr(e);break;case"north":Lr(e);break;case"west":Dr(e);break;case"east":Ir(e);break;case"south-east":Tr(e),Ir(e);break;case"south-west":Tr(e),Dr(e);break;case"north-east":Lr(e),Ir(e);break;case"north-west":Lr(e),Dr(e)}}}function kr(e){return e.getBoundingClientRect()}function Tr(e){var t,i=document.documentElement.clientHeight,s=!1,n=(e.touches?e.changedTouches[0]:e).pageY,o=kr(yo);ae(Eo)||(t=kr(Eo)),ae(Eo)?ae(Eo)&&(i-n>=0||o.top<0)&&(s=!0):s=!0;var r=er+(n-nr);r=r>Co?r:Co;var a=0;ae(Eo)||(a=t.top);var l=ae(Eo)?0:Eo.offsetHeight-Eo.clientHeight,h=o.top-a-l/2;if(h=h<0?0:h,o.top>0&&h+r>So){if(s=!1,yo.classList.contains(lr))return;yo.style.height=So-parseInt(h.toString(),10)+"px"}else{var c=0;if(s){o.top<0&&i+(o.height+o.top)>0&&r+(c=o.top)<=30&&(r=o.height-(o.height+o.top)+30),r+o.top>=So&&(yo.style.height=o.height+(i-(o.height+o.top))+"px");var p=ae(Eo)?c:h;r>=Co&&r+p<=So&&(yo.style.height=r+"px")}}}function Lr(e){var t,i=!1,s="mouse"===br(e.type)?e.pageY:e.touches[0].pageY,n=kr(yo);ae(Eo)||(t=kr(Eo)),!ae(Eo)&&n.top-t.top>0?i=!0:ae(Eo)&&s>0&&(i=!0);var o=er-(s-nr);if(i&&o>=Co&&o<=So){var r=0;ae(Eo)||(r=t.top);var a=ir-r+(s-nr);a=a>0?a:1,yo.style.height=o+"px",yo.style.top=a+"px"}}function Dr(e){var t,i=document.documentElement.clientWidth,s=!1;ae(Eo)||(t=kr(Eo));var n="mouse"===br(e.type)?e.pageX:e.touches[0].pageX,o=kr(yo),r=ae(Eo)?0:Eo.offsetWidth-Eo.clientWidth,a=ae(Eo)?0:t.left,l=ae(Eo)?0:t.width;ae(ko)&&(ae(Eo)?ko=i:(ko=o.left-a-r/2+o.width,ko+=l-r-ko)),!ae(Eo)&&Math.floor(o.left-t.left+o.width+(t.right-o.right))-r<=wo?s=!0:ae(Eo)&&n>=0&&(s=!0);var h=$o-(n-sr);if(dr&&(h=h>ko?ko:h),s&&h>=xo&&h<=wo){var c=0;ae(Eo)||(c=t.left);var p=tr-c+(n-sr);p=p>0?p:1,h!==ur&&mr&&(yo.style.width=h+"px"),dr&&(yo.style.left=p+"px",mr=1!==p)}ur=h}function Ir(e){var t,i=document.documentElement.clientWidth,s=!1;ae(Eo)||(t=kr(Eo));var n=(e.touches?e.changedTouches[0]:e).pageX,o=kr(yo);!ae(Eo)&&(o.left-t.left+o.width<wo||o.right-t.left>o.width)?s=!0:ae(Eo)&&i-n>0&&(s=!0);var r=$o+(n-sr),a=0;if(ae(Eo)||(a=t.left),o.left-a+r>wo){if(s=!1,yo.classList.contains(lr))return;yo.style.width=wo-(o.left-a)+"px"}s&&r>=xo&&r<=wo&&(yo.style.width=r+"px")}function Or(){for(var e=yo.querySelectorAll("."+or),t=0;t<e.length;t++)Ti(e[t]);var i=yo.querySelectorAll(".e-dialog-border-resize");if(!ae(i))for(t=0;t<i.length;t++)Ti(i[t])}var Ar,Mr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Pr=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mr(t,e),Pr([os()],t.prototype,"buttonModel",void 0),Pr([os("Button")],t.prototype,"type",void 0),Pr([cs()],t.prototype,"click",void 0),t}(Ls),Rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mr(t,e),Pr([os("Fade")],t.prototype,"effect",void 0),Pr([os(400)],t.prototype,"duration",void 0),Pr([os(0)],t.prototype,"delay",void 0),t}(Ls),Br="e-dialog",Hr="e-dlg-target",Fr="e-scroll-disabled",jr="e-dlg-fullscreen",Vr="Information",zr="e-scroll-disabled",_r="e-alert-dialog",qr="e-confirm-dialog",Wr=function(e){function t(t,i){return e.call(this,t,i)||this}return Mr(t,e),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.preRender=function(){var e=this;this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(t){e.hide(t)},this.dlgOverlayClickEventHandler=function(t){t.preventFocus=!1,e.trigger("overlayClick",t,function(t){t.preventFocus||e.focusContent()})};if(this.l10n=new Js("dialog",{close:"Close"},this.locale),this.checkPositionData(),ae(this.target)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!ae(this.position)){if(!ae(this.position.X)&&"number"!=typeof this.position.X)if(this.isNumberValue(this.position.X)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!ae(this.position.Y)&&"number"!=typeof this.position.Y)if(this.isNumberValue(this.position.Y)){e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}},t.prototype.getEle=function(e,t){for(var i=void 0,s=0;s<e.length;s++)if(e[s].classList.contains(t)){i=e[s];break}return i},t.prototype.getMinHeight=function(){var e="0px",t="0px";ae(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,"e-footer-content");ae(i)||(t=getComputedStyle(i).height);var s,n=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(t.slice(0,t.indexOf("p")),10);return s=n+30+(isNaN(o)?0:o),Co=s,n+30+o},t.prototype.onResizeStart=function(e,t){return t.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,t){t.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,t){t.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!ae(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");for(var e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,i="",s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){i="south north east west north-east north-west south-east south-west";break}var n="";switch(this.resizeHandles[s].toString()){case"SouthEast":n="south-east";break;case"SouthWest":n="south-west";break;case"NorthEast":n="north-east";break;case"NorthWest":n="north-west";break;default:n=this.resizeHandles[s].toString()}i+=n.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){hr=e.resizeBegin,cr=e.resizing,pr=e.resizeComplete,yo=vr(e.element),Eo=vr(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++)if(fr.indexOf(t[i])>=0&&t[i])gr(t[i]);else if(""!==t[i].trim()){var s=yi("div",{className:"e-icons "+or+" e-"+t[i]});yo.appendChild(s)}Co=e.minHeight,xo=e.minWidth,wo=e.maxWidth,So=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?yr(e.proxy):yr()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Or(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:t[t.length-1]}},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var i=void 0;ae(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),ae(this.btnObj)&&!ae(this.ftrTemplateContent)&&(i=this.getFocusElement(this.ftrTemplateContent)),ae(this.btnObj)&&ae(this.ftrTemplateContent)&&!ae(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),ae(i)||document.activeElement!==i.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),ae(i)||i.element.focus())}var s,n=document.activeElement,o=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,r=!1;(o||(r=n.hasAttribute("contenteditable")&&"true"===n.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),13===e.keyCode&&!e.ctrlKey&&"textarea"!==n.tagName.toLowerCase()&&o&&!ae(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===n.tagName.toLowerCase()||r)&&!ae(this.primaryButtonEle))&&(this.buttons.some(function(e,t){s=t;var i=e.buttonModel;return!ae(i)&&!0===i.isPrimary})&&"function"==typeof this.buttons[s].click&&setTimeout(function(){t.buttons[s].click.call(t,e)}))},t.prototype.initialize=function(){ae(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||bi([this.element],Br),bt.isDevice&&bi([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||Di(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&ae(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&ae(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||ae(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||ae(this.footerTemplate)?ae(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(ae(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!ae(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Di(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&ae(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var t=0,i=this.dlgContainer.children;t<i.length;t++)i[t].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=i[t])}if(!0!==this.element.classList.contains(_r)&&!0!==this.element.classList.contains(qr)&&!ae(this.element.parentElement)){var s=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),s.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}ae(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new lo(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(t){var i={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",i,function(t){t.preventFocus||e.focusContent()})},close:function(t){e.isModal&&bi([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var i=document.activeElement;ae(i)||ae(i.blur)||i.blur(),ae(e.storeActiveElement)||ae(e.storeActiveElement.focus)||e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(bi([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.enableRtl?"e-south-west":"e-south-east",i=this.element.querySelector("."+t);ae(i)||(i.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var t;t=ae(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.dragObj=new Ws(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(t){e.trigger("dragStart",t,function(e){ye()&&e.bindEvents(t.dragElement)})},dragStop:function(t){e.isModal&&(ae(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",t),e.element.classList.remove("e-restrict-left")},drag:function(t){e.trigger("drag",t)}}),ae(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var t=ae(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}e=0;for(var s,n=this.element.children;e<n.length;e++)n[e].classList.contains("e-footer-content")&&(s=n[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new Po(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!ae(this.ftrTemplateContent)&&"function"==typeof this.buttons[e].click&&s.length>0&&Ct.add(s[e],"click",this.buttons[e].click,this),this.isBlazorServerRender()||ae(this.ftrTemplateContent)||(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.setContent=function(){if(Di(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement)this.contentEle.appendChild(this.innerContentElement);else if(!ae(this.content)&&""!==this.content||!this.initialRender){Object.keys(window);"string"!=typeof this.content||ye()?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content"):this.contentEle.innerHTML=this.sanitizeHelper(this.content)}ae(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!bt.isIE||""!==this.element.style.width||ae(this.width)||(this.element.style.width=ge(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,t,i){var s,n,o;Object.keys(window);n=t.classList.contains("e-dlg-header")?this.element.id+"header":t.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",ae(e.outerHTML)?"string"!=typeof e||ye()&&!this.isStringTemplate?(s=Xt(e),o=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);var r=[];if(!ae(s)){for(var a=0,l=s({},this,i,n,!(ye()&&!this.isStringTemplate&&0===o.indexOf("<div>Blazor"))||this.isStringTemplate);a<l.length;a++){var h=l[a];r.push(h)}Ei([].slice.call(r),t)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var t=ln.beforeSanitize();re(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!ae(t.helper)?e=t.helper(e):t.cancel||(e=ln.serializeValue(t,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!ae(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,bt.isIE&&"auto"===this.height&&!ae(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?bi([this.element],"e-rtl"):Ci([this.element],"e-rtl")),ae(this.element.querySelector(".e-resize-handle"))||(Or(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(ae(this.content)||""===this.content){var t=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||t)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(t){8!==t.nodeType&&e.innerContentElement.appendChild(t)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Di(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||ae(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){ae(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))},t.prototype.renderCloseIcon=function(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new Po({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),ae(this.headerContent)?(this.createHeaderContent(),wi([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):wi([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){this.cssClass&&bi([this.element],this.cssClass.split(" ")),e&&Ci([this.element],e.split(" "))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),bi([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var t,i=0;i<e.length;i++){if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.focusableElements=function(e){if(!ae(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),s=this.getValidFocusNode(i);if(ye()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),ae(s)){if(!ae(s=this.focusableElements(this.contentEle)))return s;if(!ae(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=s;return t},t.prototype.disableElement=function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),t=ae(e)?this.element:e,i=bt.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){Ct.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){Ct.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return ye()&&this.isServerRendered},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,t){if(this.element.classList.contains(Br))for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"content":ae(this.content)||""===this.content?ae(this.contentEle)||(Ti(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),ae(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!ae(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),Ti(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||ae(this.header)?this.headerEle&&(Ti(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!ae(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||ae(this.footerTemplate)){if(!this.ftrTemplateContent)return;Ti(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!ae(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!ae(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():Ti(this.closeIcon):(Ti(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Ri(this.element,{height:ge(e.height)});break;case"width":Ri(this.element,{width:ge(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":var n=this.buttons.length;ae(this.ftrTemplateContent)||this.isBlazorServerRender()||(Ti(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var o=0;o<n;o++)ae(this.buttons[o].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!ae(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var r=ae(t.position.X)?this.position.X:t.position.X,a=ae(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+r+"-"+a)&&this.dlgContainer.classList.remove("e-dlg-"+r+"-"+a)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",ae(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(Ci([this.element],"e-dlg-modal"),Ci([document.body],[Hr,Fr]),Ti(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&Ct.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=co(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){var e;e=this.targetEle.clientWidth,wo=e,function(e){So=e}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(!this.isDestroyed){var t=["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left",jr,"e-device"],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(Ci([this.targetEle],[Hr,Fr]),!ae(this.element)&&this.element.classList.contains(jr)&&Ci([document.body],[Hr,Fr]),this.isModal&&Ci([ae(this.targetEle)?document.body:this.targetEle],Fr),this.unWireEvents(),!ae(this.btnObj))for(var s=0;s<this.btnObj.length;s++)this.btnObj[s].destroy();if(ae(this.dragObj)||this.dragObj.destroy(),!ae(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),Ci([this.element],t),ae(this.cssClass)||""===this.cssClass||Ci([this.element],this.cssClass.split(" ")),ae(this.refElement)||ae(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Ti(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(Ti(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Ti(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!ae(this.element.children))for(s=0;s<=this.element.children.length;s++)s-=s,Ti(this.element.children[s]);for(s=0;s<i.length;s++)this.element.removeAttribute(i[s]);this.isBlazorServerRender()?this.isDestroyed=!0:e.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&Ct.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&Ct.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&Ct.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&Ct.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!ae(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&Ct.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.show=function(e){var t=this;if(this.element.classList.contains(Br)){if(!this.element.classList.contains("e-popup-open")||!ae(e)){ae(e)||this.fullScreen(e);var i=ye()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,function(e){if(!e.cancel){t.element.style.maxHeight!==i.maxHeight&&(t.allowMaxHeight=!1,t.element.style.maxHeight=i.maxHeight),t.storeActiveElement=document.activeElement,t.element.tabIndex=-1,t.isModal&&!ae(t.dlgOverlay)&&(t.dlgOverlay.style.display="block",t.dlgContainer.style.display="flex",Ci([t.dlgOverlay],"e-fade"),ae(t.targetEle)?bi([document.body],[Hr,Fr]):(t.targetEle===document.body?t.dlgContainer.style.position="fixed":t.dlgContainer.style.position="absolute",t.dlgOverlay.style.position="absolute",t.element.style.position="relative",bi([t.targetEle],[Hr,Fr])));var s={name:t.animationSettings.effect+"In",duration:t.animationSettings.duration,delay:t.animationSettings.delay},n=t.isModal?t.element.parentElement:t.element;t.calculatezIndex&&(t.setzIndex(n,!0),Ri(t.element,{zIndex:t.zIndex}),t.isModal&&t.setOverlayZindex(t.zIndex)),"None"===t.animationSettings.effect?t.popupObj.show():t.popupObj.show(s),t.dialogOpen=!0;var o=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!0,t.preventVisibility=!0,t.isProtectedOnChange=o}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var t=this;if(this.element.classList.contains(Br)&&this.preventVisibility){var i=ye()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};this.closeArgs=i,this.trigger("beforeClose",i,function(e){if(!e.cancel){t.isModal&&(ae(t.targetEle)?Ci([document.body],[Hr,Fr]):Ci([t.targetEle],[Hr,Fr]));var i={name:t.animationSettings.effect+"Out",duration:t.animationSettings.duration,delay:t.animationSettings.delay};"None"===t.animationSettings.effect?t.popupObj.hide():t.popupObj.hide(i),t.dialogOpen=!1;var s=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!1,t.preventVisibility=!1,t.isProtectedOnChange=s}})}},t.prototype.fullScreen=function(e){this.element.offsetTop,this.element.offsetLeft;if(e){bi([this.element],jr);var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=ae(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,bi([document.body],[Hr,Fr]),this.allowDragging&&!ae(this.dragObj)&&this.dragObj.destroy()}else Ci([this.element],jr),Ci([document.body],[Hr,Fr]),this.allowDragging&&!ae(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return ae(e)?this.btnObj:this.btnObj[e]},Pr([os("")],t.prototype,"content",void 0),Pr([os(!0)],t.prototype,"enableHtmlSanitizer",void 0),Pr([os(!1)],t.prototype,"showCloseIcon",void 0),Pr([os(!1)],t.prototype,"isModal",void 0),Pr([os("")],t.prototype,"header",void 0),Pr([os(!0)],t.prototype,"visible",void 0),Pr([os(!1)],t.prototype,"enableResize",void 0),Pr([os(["South-East"])],t.prototype,"resizeHandles",void 0),Pr([os("auto")],t.prototype,"height",void 0),Pr([os("")],t.prototype,"minHeight",void 0),Pr([os("100%")],t.prototype,"width",void 0),Pr([os("")],t.prototype,"cssClass",void 0),Pr([os(1e3)],t.prototype,"zIndex",void 0),Pr([os(null)],t.prototype,"target",void 0),Pr([os("")],t.prototype,"footerTemplate",void 0),Pr([os(!1)],t.prototype,"allowDragging",void 0),Pr([ls([{}],Nr)],t.prototype,"buttons",void 0),Pr([os(!0)],t.prototype,"closeOnEscape",void 0),Pr([rs({},Rr)],t.prototype,"animationSettings",void 0),Pr([rs({X:"center",Y:"center"},so)],t.prototype,"position",void 0),Pr([cs()],t.prototype,"created",void 0),Pr([cs()],t.prototype,"open",void 0),Pr([cs()],t.prototype,"beforeSanitizeHtml",void 0),Pr([cs()],t.prototype,"beforeOpen",void 0),Pr([cs()],t.prototype,"close",void 0),Pr([cs()],t.prototype,"beforeClose",void 0),Pr([cs()],t.prototype,"dragStart",void 0),Pr([cs()],t.prototype,"dragStop",void 0),Pr([cs()],t.prototype,"drag",void 0),Pr([cs()],t.prototype,"overlayClick",void 0),Pr([cs()],t.prototype,"resizeStart",void 0),Pr([cs()],t.prototype,"resizing",void 0),Pr([cs()],t.prototype,"resizeStop",void 0),Pr([cs()],t.prototype,"destroyed",void 0),t=Pr([ps],t)}(Ns);!function(e){function t(e,t){var i=new Wr(e);return i.appendTo(t),i}function i(e,t){return e.header=ae(t.title)?Vr:t.title,e.content=ae(t.content)?"":t.content,e.isModal=!!ae(t.isModal)||t.isModal,e.showCloseIcon=!ae(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!ae(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!ae(t.closeOnEscape)&&t.closeOnEscape,e.position=ae(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=ae(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=ae(t.cssClass)?"":t.cssClass,e.zIndex=ae(t.zIndex)?1e3:t.zIndex,e.open=ae(t.open)?null:t.open,e}function s(e,t,i){var s=i;return ae(t.text)||(s.buttonModel.content=t.text),ae(t.icon)||(s.buttonModel.iconCss=t.icon),ae(t.cssClass)||(s.buttonModel.cssClass=t.cssClass),ae(t.click)||(s.click=t.click),s}e.alert=function(e){var n,o,r=yi("div",{className:_r});return document.body.appendChild(r),(n=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:Vr,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e,t){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return ae(t.okButton)?e.buttons=i:e.buttons[0]=s(e.buttons[0],t.okButton,i[0]),e}(i({buttons:[]},o=e),o),r)).close=function(){e&&e.close&&e.close.apply(n),n.destroy(),n.element.classList.contains("e-dlg-modal")?(n.element.parentElement.remove(),n.target.classList.remove(zr)):n.element.remove()},n},e.confirm=function(e){var n,o,r=yi("div",{className:qr});return document.body.appendChild(r),(n=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:Vr,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e,t){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},n={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return ae(t.okButton)?e.buttons[0]=i:e.buttons[0]=s(e.buttons[0],t.okButton,i),ae(t.cancelButton)?e.buttons[1]=n:e.buttons[1]=s(e.buttons[1],t.cancelButton,n),e}(i({buttons:[]},o=e),o),r)).close=function(){e&&e.close&&e.close.apply(n),n.destroy(),n.element.classList.contains("e-dlg-modal")?(n.element.parentElement.remove(),n.target.classList.remove(zr)):n.element.remove()},n}}(Ar||(Ar={}));var Ur=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Gr=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Yr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ur(t,e),Gr([os({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Gr([os({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Ls),Xr=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isBlazorTooltip=!1,s.contentTargetValue=null,s.contentEvent=null,s.contentAnimation=null,s}return Ur(t,e),t.prototype.initialize=function(){this.formatPosition(),this.isServerRender()||bi([this.element],"e-tooltip")},t.prototype.isServerRender=function(){return ye()&&this.isServerRendered},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){var e;(this.setTipClass(this.position),this.isServerRender())?(bi([(e=this.tooltipEle.querySelector(".e-arrow-tip")).querySelector(".e-arrow-tip-outer")],this.tipClass),bi([e.querySelector(".e-arrow-tip-inner")],this.tipClass),this.tooltipEle.appendChild(e)):((e=this.createElement("div",{className:"e-arrow-tip "+this.tipClass})).appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e))},t.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new lo(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=Tn(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),s=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",s},t.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){Zt(this.element.id+"content"),this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,n=this.tooltipEle.querySelector(".e-arrow-tip"),o=n?n.offsetWidth:0,r=n?n.offsetHeight:0,a=this.showTipPointer?0:8,l=r/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(a+=2),e){case"RightTop":t.left+=o+a,t.top-=s-l;break;case"RightCenter":t.left+=o+a,t.top-=s/2;break;case"RightBottom":t.left+=o+a,t.top-=l;break;case"BottomRight":t.top+=r+a,t.left-=h;break;case"BottomCenter":t.top+=r+a,t.left-=i/2;break;case"BottomLeft":t.top+=r+a,t.left-=i-h;break;case"LeftBottom":t.left-=o+i+a,t.top-=l;break;case"LeftCenter":t.left-=o+i+a,t.top-=s/2;break;case"LeftTop":t.left-=o+i+a,t.top-=s-l;break;case"TopLeft":t.top-=s+r+a,t.left-=i-h;break;case"TopRight":t.top-=s+r+a,t.left-=h;break;default:t.top-=s+r+a,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");Ci(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),bi(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,i,s){if(!1!==this.showTipPointer){var n,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";var r,a=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,h=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),p=h.offsetWidth,d=h.offsetHeight;if(this.tooltipEle.style.display="","e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(o="99.9%",c.style.top="-"+(d-2)+"px"):(o=-(d-1)+"px",c.style.top="-"+(d-6)+"px"),e)n=(r="Center"!==i||a>e.offsetWidth||this.mouseTrail)&&"Left"===i||!r&&"End"===this.tipPointerPosition?a-p-2+"px":r&&"Right"===i||!r&&"Start"===this.tipPointerPosition?"2px":a/2-p/2+"px"}else"e-tip-right"===this.tipClass?(n="99.9%",c.style.left="-"+(p-2)+"px"):(n=-(p-1)+"px",c.style.left=p-2-p+"px"),o=(r="Center"!==s||l>e.offsetHeight||this.mouseTrail)&&"Top"===s||!r&&"End"===this.tipPointerPosition?l-d-2+"px":r&&"Bottom"===s||!r&&"Start"===this.tipPointerPosition?"2px":l/2-d/2+"px";h.style.top=o,h.style.left=n}},t.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&bi([this.tooltipEle],this.cssClass.split(" ")),e&&!ae(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),ae(this.content))e&&!ae(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(this.isBlazorTooltip||!this.isServerRender())if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0)this.enableHtmlSanitizer&&this.setProperties({content:ln.sanitize(this.content)},!0),t[this.enableHtmlParse?"innerHTML":"textContent"]=this.content;else{var i=Xt(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);i&&Ei(i,t),this.renderReactTemplates(),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Kt(this.element.id+"content","Content",this))}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),Ct.add(e,bt.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Di(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeAttribute("data-tooltip-id");var n=i.join(" ").trim();n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;if(!this.isSticky){this.autoCloseTimer=setTimeout(function(){t.close()},1500)}},t.prototype.targetClick=function(e){var t;ae(t=this.target?Mi(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(!(ae(t=this.target?Mi(e.target,this.target):this.element)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var i=0,s=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));i<s.length;i++){var n=s[i];this.restoreElement(n)}this.showTooltip(t,this.animation.open,e)}},t.prototype.showTooltip=function(e,t,i){var s=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!ae(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(n){s.beforeRenderCallback(n,e,i,t)}.bind(this))},t.prototype.beforeRenderCallback=function(e,t,i,s){var n=!1;if(e.cancel)this.isHidden=!0,this.clear();else if(this.isHidden=!1,ae(this.tooltipEle)){if(this.isServerRender()){this.contentTargetValue=t,this.contentEvent=i,this.contentAnimation=s;this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),n=!0}else this.ctrlId=this.element.getAttribute("id")?he(this.element.getAttribute("id")):he("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+ge(this.width)+";height:"+ge(this.height)+";position:absolute;"}),this.beforeRenderBlazor(t,this);n||this.afterRenderBlazor(t,i,s,this)}else this.isServerRender()&&(bi([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(t)),t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),vs.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,i,s,this))},t.prototype.contentUpdated=function(e){ae(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+ge(this.width)+";height:"+ge(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))},t.prototype.beforeRenderBlazor=function(e,t){e&&(bt.isDevice&&bi([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=ge(t.width)),this.isServerRender()||t.tooltipEle.appendChild(t.createElement("div",{className:"e-tip-content"})),document.body.appendChild(t.tooltipEle),Ci([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),bi([t.tooltipEle],"e-popup-open"),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),vs.stop(t.tooltipEle),t.reposition(e))},t.prototype.afterRenderBlazor=function(e,t,i,s){if(e){Ci([s.tooltipEle],"e-popup-open"),bi([s.tooltipEle],"e-popup-close"),s.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:s.tooltipEle,isInteracted:!ae(t)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none");s.trigger("beforeOpen",s.tooltipEventArgs,function(n){s.beforeOpenCallback(n,e,i,t)}.bind(s))}},t.prototype.beforeOpenCallback=function(e,t,i,s){var n=this;if(e.cancel)this.isHidden=!0,this.clear(),this.restoreElement(t);else{var o={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(o=void 0),this.openDelay>0){this.showTimer=setTimeout(function(){n.mouseTrail&&Ct.add(t,"mousemove touchstart mouseenter",n.onMouseMove,n),n.popupObj&&n.popupObj.show(o,t)},this.openDelay)}else this.popupObj&&this.popupObj.show(o,t)}s&&this.wireMouseEvents(s,t)},t.prototype.needTemplateReposition=function(){return!ae(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate},t.prototype.checkCollision=function(e,t,i){var s={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},n=Fn(this.tooltipEle,this.checkCollideTarget(),t,i);return n.length>0&&(s.horizontal=n.indexOf("left")>=0?"Right":n.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=n.indexOf("top")>=0?"Bottom":n.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s},t.prototype.collisionFlipFit=function(e,t,i){var s=this.checkCollision(e,t,i),n=s.position;if(this.tooltipPositionY!==s.vertical&&(n=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===n.indexOf("Left")&&(s.vertical="LeftTop"===n||"LeftCenter"===n?"Top":"Bottom",n=s.vertical+"Left"),0===n.indexOf("Right")&&(s.vertical="RightTop"===n||"RightCenter"===n?"Top":"Bottom",n=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:n},this.trigger("beforeCollision",this.tooltipEventArgs),s.position!==n){var o=Tn(e,s.horizontal,s.vertical);this.adjustArrow(e,n,s.horizontal,s.vertical);var r=this.calculateTooltipOffset(n);r.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(n.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,r.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(n.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,s.position=n,s.left=o.left+r.left,s.top=o.top+r.top}else this.adjustArrow(e,n,s.horizontal,s.vertical);var a={left:s.left,top:s.top},l=Hn(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},a).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===n.indexOf("Bottom")||0===n.indexOf("Top"))){var h=this.tooltipEle.querySelector(".e-arrow-tip"),c=parseInt(h.style.left,10)-(l-s.left);c<0?c=0:c+h.offsetWidth>this.tooltipEle.clientWidth&&(c=this.tooltipEle.clientWidth-h.offsetWidth),h.style.left=c.toString()+"px"}return this.tooltipEle.style.display="",a.left=l,a},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,t,i){var s=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);this.hideTimer=setTimeout(function(){s.closeDelay&&s.tooltipEle&&s.isTooltipOpen||s.tooltipHide(e,t,i)},this.closeDelay)}else this.tooltipHide(e,t,i)},t.prototype.tooltipHide=function(e,t,i){var s,n=this;s=t?this.target?i||t.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:s,event:t||null,element:this.tooltipEle,isInteracted:!ae(t)},this.trigger("beforeClose",this.tooltipEventArgs,function(t){t.cancel?n.isHidden=!1:n.isServerRender()?n.blazorHide(e,s):n.popupHide(e,s)})},t.prototype.blazorHide=function(e,t){var i=this;this.popupObj?this.popupHide(e,t):setTimeout(function(){i.popupHide(e,t)},200)},t.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isHidden=!0;var i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),ae(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){if(this.tooltipEle&&(Ci([this.tooltipEle],"e-popup-close"),bi([this.tooltipEle],"e-popup-open")),this.isHidden){if(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle){this.tooltipEle.style.display="none";this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),Li(this.tooltipEle)}else this.tooltipEle&&Li(this.tooltipEle);this.tooltipEle=null,this.popupObj=null}},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=Mi(t,".e-tooltip-wrap.e-lib.e-popup");i?Ct.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),Ct.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),vs.stop(this.tooltipEle),Ci([this.tooltipEle],"e-popup-close"),bi([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var s=this.calculateTooltipOffset(this.position),n=t+s.left+this.offsetX,o=i+s.top+this.offsetY,r=this.checkCollision(e.target,n,o);if(this.tooltipPositionX!==r.horizontal||this.tooltipPositionY!==r.vertical){var a=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?r.vertical+r.horizontal:r.horizontal+r.vertical;r.position=a,this.adjustArrow(e.target,r.position,r.horizontal,r.vertical);var l=this.calculateTooltipOffset(r.position);r.left=t+l.left-this.offsetX,r.top=i+l.top-this.offsetY}this.tooltipEle.style.left=r.left+"px",this.tooltipEle.style.top=r.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===Mi(e.target,".e-tooltip")&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(Mi(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var s=i[t];if("Custom"===s)return;"Focus"===s&&this.wireFocusEvents(),"Click"===s&&Ct.add(this.element,bt.touchStartEvent,this.targetClick,this),"Hover"===s&&(bt.isDevice?(this.touchModule=new nn(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),Ct.add(this.element,bt.touchEndEvent,this.touchEndHandler,this)):(Ct.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&Ct.add(this.element,"mouseleave",this.onMouseOut,this)))}Ct.add(document,"touchend",this.touchEnd,this),Ct.add(document,"scroll wheel",this.scrollHandler,this),Ct.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=bt.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(ae(this.target))Ct.add(this.element,"focus",this.targetHover,this);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];Ct.add(i,"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&Ct.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&(this.isServerRender()||Ct.add(t,"mouseleave",this.onMouseOut,this)),this.closeDelay&&(Ct.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),Ct.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&Ct.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var s=i[t];if("Custom"===s)return;"Focus"===s&&this.unwireFocusEvents(),"Click"===s&&Ct.remove(this.element,bt.touchStartEvent,this.targetClick),"Hover"===s&&(bt.isDevice?(this.touchModule&&this.touchModule.destroy(),Ct.remove(this.element,bt.touchEndEvent,this.touchEndHandler)):(Ct.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&Ct.remove(this.element,"mouseleave",this.onMouseOut)))}Ct.remove(document,"touchend",this.touchEnd),Ct.remove(document,"scroll wheel",this.scrollHandler),Ct.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(ae(this.target))Ct.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];Ct.remove(i,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var t=0,i=this.getTriggerList(this.opensOn);t<i.length;t++){var s=i[t];"Focus"===s&&Ct.remove(e,"blur",this.onMouseOut),"Hover"!==s||bt.isDevice||this.isServerRender()||Ct.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(Ct.remove(e,"mouseenter",this.tooltipHover),Ct.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&Ct.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.findTarget(),s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=ge(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=ge(e.height),this.reposition(i));break;case"content":if(this.tooltipEle)this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent();else if(this.isServerRender()){var o={content:e.content};this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",o)}break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var r=this.tooltipEle.querySelector(".e-arrow-tip-inner");r.style.top=r.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var a=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+a).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var l=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+l).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&Ci([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&bi([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?bi([this.tooltipEle],"e-rtl"):Ci([this.tooltipEle],"e-rtl"))}}},t.prototype.open=function(e,t){ae(t)&&(t=this.animation.open),ae(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){if(this.isServerRender()||(e.prototype.destroy.call(this),this.tooltipEle&&Li(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){var t=document.querySelector("#"+this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),Ci([this.element],"e-tooltip"),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},Gr([os("auto")],t.prototype,"width",void 0),Gr([os("auto")],t.prototype,"height",void 0),Gr([os()],t.prototype,"content",void 0),Gr([os()],t.prototype,"target",void 0),Gr([os("TopCenter")],t.prototype,"position",void 0),Gr([os(0)],t.prototype,"offsetX",void 0),Gr([os(0)],t.prototype,"offsetY",void 0),Gr([os(!0)],t.prototype,"showTipPointer",void 0),Gr([os(!0)],t.prototype,"enableHtmlParse",void 0),Gr([os(!1)],t.prototype,"windowCollision",void 0),Gr([os("Auto")],t.prototype,"tipPointerPosition",void 0),Gr([os("Auto")],t.prototype,"opensOn",void 0),Gr([os(!1)],t.prototype,"mouseTrail",void 0),Gr([os(!1)],t.prototype,"isSticky",void 0),Gr([rs({},Yr)],t.prototype,"animation",void 0),Gr([os(0)],t.prototype,"openDelay",void 0),Gr([os(0)],t.prototype,"closeDelay",void 0),Gr([os()],t.prototype,"cssClass",void 0),Gr([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Gr([cs()],t.prototype,"beforeRender",void 0),Gr([cs()],t.prototype,"beforeOpen",void 0),Gr([cs()],t.prototype,"afterOpen",void 0),Gr([cs()],t.prototype,"beforeClose",void 0),Gr([cs()],t.prototype,"afterClose",void 0),Gr([cs()],t.prototype,"beforeCollision",void 0),Gr([cs()],t.prototype,"created",void 0),Gr([cs()],t.prototype,"destroyed",void 0),t=Gr([ps],t)}(Ns),Kr={},Zr=null,Qr=null,Jr=30,$r=30,ea=30,ta=36,ia="e-spin-show",sa="e-spin-hide",na="e-spin-material",oa="e-spin-fabric",ra="e-spin-bootstrap",aa="e-spin-bootstrap4",la="e-spin-high-contrast",ha="e-spinner-pane",ca="e-spinner-inner",pa="e-path-circle",da="e-path-arc",ua="e-spin-label",ma="e-spin-template";function fa(e,t,i,s){switch(e){case"Create":ga({type:s,target:document.querySelector(t.target),cssClass:t.cssClass,label:t.label,width:t.width});break;case"Show":Ia(document.querySelector(i));break;case"Hide":Aa(document.querySelector(i));break;case"Set":Ma({cssClass:t.cssClass,type:s})}}function ga(e,t){if(e.target){var i,s=ae(t)?yi:t,n=function(e,t){var i=t("div",{});i.classList.add(ha);var s=t("div",{});return s.classList.add(ca),e.appendChild(i),i.appendChild(s),{wrap:i,inner_wrap:s}}(e.target,s);if(ae(e.cssClass)||n.wrap.classList.add(e.cssClass),ae(e.template)&&ae(Zr)){var o=ae(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":i=Jr;break;case"Fabric":i=$r;break;case"Bootstrap4":i=ta;break;default:i=ea}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(ae(e.width)?void 0:e.width,o),va(o,n.wrap,i,s),ae(e.label)||function(e,t,i){var s=i("div",{});s.classList.add(ua),s.textContent=t,e.appendChild(s)}(n.inner_wrap,e.label,s)}else{var r=ae(e.template)?Zr:e.template;n.wrap.classList.add(ma),function(e,t,i){ae(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,r,Qr)}n.wrap.classList.add(sa),n=null}}function va(e,t,i,s){var n=t.querySelector("."+ca),o=n.querySelector("svg");switch(ae(o)||n.removeChild(o),e){case"Material":!function(e,t,i){var s=ba();Kr[s]={timeOut:0,type:"Material",radius:t},Sa(e,s,i,na),wa(t,e,"Material",na)}(n,i,s);break;case"Fabric":!function(e,t,i){var s=ba();Kr[s]={timeOut:0,type:"Fabric",radius:t},Ca(e,s,oa,i),La(t,e,oa)}(n,i,s);break;case"Bootstrap":!function(e,t,i){var s=ba();Kr[s]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",ra),s.setAttribute("viewBox","0 0 64 64"),e.insertBefore(s,e.firstChild);for(var n=0;n<=7;n++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class",pa+"_"+n),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),s.appendChild(o)}}(e,s),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var s=90,n=0;n<=7;n++){var o=Da(0,0,24,s),r=i.querySelector("."+pa+"_"+n);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),s=s>=360?0:s,s+=45}}(e,t)}(n,i);break;case"HighContrast":!function(e,t,i){var s=ba();Kr[s]={timeOut:0,type:"HighContrast",radius:t},Ca(e,s,la,i),La(t,e,la)}(n,i,s);break;case"Bootstrap4":!function(e,t,i){var s=ba();Kr[s]={timeOut:0,type:"Bootstrap4",radius:t},Sa(e,s,i,aa),wa(t,e,"Bootstrap4",aa)}(n,i,s)}}function ya(e,t){var i=[],s=e,n=t,o=!1,r=1;return function e(t){i.push(t);t===n&&1!==r||(t<=s&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(s),i}function ba(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function Ca(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",pa);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",da),e.insertBefore(n,e.firstChild),n.appendChild(o),n.appendChild(r)}function Sa(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class",s),n.setAttribute("id",t);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",pa),e.insertBefore(n,e.firstChild),n.appendChild(o)}function xa(e){!function(e,t,i,s,n,o,r){var a=++r.globalInfo[r.uniqueID].previousId,l=(new Date).getTime(),h=t-e,c=(u=2*r.globalInfo[r.uniqueID].radius+"",parseFloat(u)),p=Ea(c),d=-90*(r.globalInfo[r.uniqueID].count||0);var u;!function t(n){var r=Math.max(0,Math.min((new Date).getTime()-l,s));!function(e,t){if(!ae(t.querySelector("svg.e-spin-material"))&&!ae(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material"),s=i.querySelector("path.e-path-circle");s.setAttribute("stroke-dashoffset",ka(c,p,e,o)+""),s.setAttribute("transform","rotate("+d+" "+c/2+" "+c/2+")")}}(i(r,e,h,s),n.container);a===n.globalInfo[n.uniqueID].previousId&&r<s?Kr[n.uniqueID].timeOut=setTimeout(t.bind(null,n),1):xa(n)}(r)}(1,149,Ta,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function wa(e,t,i,s){var n=2*e,o=t.querySelector("svg."+s),r=o.querySelector("path.e-path-circle"),a=Ea(n),l=n/2+"px";o.setAttribute("viewBox","0 0 "+n+" "+n),o.style.width=o.style.height=n+"px",o.style.transformOrigin=l+" "+l+" "+l,r.setAttribute("d",function(e,t){var i=e/2,s=t/2;return"M"+i+","+s+"A"+(i-s)+","+(i-s)+" 0 1 1 "+s+","+i}(n,a)),"Material"===i&&(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",ka(n,a,1,75)+""))}function Ea(e){return.1*e}function ka(e,t,i,s){return(e-t)*Math.PI*(3*s/100-i/100)}function Ta(e,t,i,s){var n=(e/=s)*e,o=n*e;return t+i*(6*o*n+-15*n*n+10*o)}function La(e,t,i){var s=e,n=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(s,n,e)),l.setAttribute("d",function(e,t,i,s,n){var o=Da(e,t,i,n),r=Da(e,t,i,s);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(s,n,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function Da(e,t,i,s){var n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function Ia(e){Oa(e,!1),e=null}function Oa(e,t){var i;if(e&&(i=e.classList.contains(ha)?e:e.querySelector("."+ha)),e&&i){var s=i.querySelector("."+ca);if(t?!i.classList.contains(ma)&&!i.classList.contains(sa):!i.classList.contains(ma)&&!i.classList.contains(ia)){var n=i.querySelector("svg");if(ae(n))return;var o=n.getAttribute("id");switch(Kr[o].isAnimate=!t,Kr[o].type){case"Material":t?clearTimeout(Kr[o].timeOut):function(e,t,i){var s={};Kr[t].timeOut=0,s[t]=function(e,t,i,s){return{radius:t,count:i,previousId:s}}(0,i,0,0),xa({uniqueID:t,container:e,globalInfo:s,timeOutVar:0})}(s,o,Kr[o].radius);break;case"Bootstrap":t?clearTimeout(Kr[o].timeOut):function(e){for(var t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)s(e.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,ya(i,i),t);function s(e,t,i,s,n){var o=0;!function t(i){Kr[n].isAnimate&&(++o,e.setAttribute("r",i+""),o>=s.length&&(o=0),Kr[n].timeOut=setTimeout(t.bind(null,s[o]),18))}(t)}}(s)}}t?Bi(i,[sa],[ia]):Bi(i,[ia],[sa]),e=null}}function Aa(e){Oa(e,!0),e=null}function Ma(e,t){var i=ae(t)?yi:t;void 0!==e.template&&(Zr=e.template,void 0!==e.template&&(Qr=e.cssClass));for(var s=document.querySelectorAll("."+ha),n=0;n<s.length;n++)Pa(e.template,s[n],e.type,e.cssClass,i)}function Pa(e,t,i,s,n){ae(e)&&!t.classList.contains(ma)?(!function(e,t,i,s){ae(i)||e.classList.add(i);var n=e.querySelector("svg"),o="Bootstrap"===t?parseFloat(n.style.height):parseFloat(n.style.height)/2;if(n.getAttribute("class").split(/\s/).indexOf("e-spin-material")>=0){var r=n.getAttribute("id");clearTimeout(Kr[r].timeOut)}va(t,e,o,s)}(t,i,s,n),t.classList.contains(ia)?(t.classList.remove(ia),Ia(t)):(t.classList.remove(sa),Aa(t))):(Zr=e,ae(s)||(Qr=s))}var Na,Ra={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"};!function(e){var t;function i(e){s(e.floatLabelType,e.element),e.element.addEventListener("focus",function(){var e=p(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.add("e-input-focus")}),e.element.addEventListener("blur",function(){var e=p(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.remove("e-input-focus")}),e.element.addEventListener("input",function(){s(t,e.element)})}function s(e,t){var i=t.value;""!==i&&!ae(i)&&t.parentElement?t.parentElement.classList.add("e-valid-input"):"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input")}function n(){var e=p(this).getElementsByClassName("e-float-text")[0];ae(e)||(bi([e],Ra.LABELTOP),e.classList.contains(Ra.LABELBOTTOM)&&Ci([e],Ra.LABELBOTTOM))}function o(){var e=p(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){var t=e.getElementsByClassName("e-float-text")[0];ae(t)||(t.classList.contains(Ra.LABELTOP)&&Ci([t],Ra.LABELTOP),bi([t],Ra.LABELBOTTOM))}}function r(e){e.addEventListener("focus",n),e.addEventListener("blur",o)}function a(e,t,i){var s,n,o=ae(i)?yi:i;if("Auto"===e.floatLabelType&&r(e.element),ae(t.container)?(t.container=m(e,Ra.FLOATINPUT,Ra.FLOATCUSTOMTAG,"div",o),e.element.parentNode.insertBefore(t.container,e.element)):(ae(e.customTag)||t.container.classList.add(Ra.FLOATCUSTOMTAG),t.container.classList.add(Ra.FLOATINPUT)),s=o("span",{className:Ra.FLOATLINE}),n=o("label",{className:Ra.FLOATTEXT}),ae(e.element.id)||""===e.element.id||(n.id="label_"+e.element.id.replace(/ /g,"_"),Di(e.element,{"aria-labelledby":n.id})),ae(e.element.placeholder)||""===e.element.placeholder||(n.innerText=f(e.element.placeholder),e.element.removeAttribute("placeholder")),ae(e.properties)||ae(e.properties.placeholder)||""===e.properties.placeholder||(n.innerText=f(e.properties.placeholder)),n.innerText||t.container.classList.add(Ra.NOFLOATLABEL),t.container.classList.contains("e-float-icon-left")){var a=t.container.querySelector(".e-input-in-wrap");a.appendChild(e.element),a.appendChild(s),a.appendChild(n)}else t.container.appendChild(e.element),t.container.appendChild(s),t.container.appendChild(n);c(e.element.value,n),"Always"===e.floatLabelType&&(n.classList.contains(Ra.LABELBOTTOM)&&Ci([n],Ra.LABELBOTTOM),bi([n],Ra.LABELTOP)),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",function(t){c(e.element.value,n)}),e.element.addEventListener("blur",function(t){c(e.element.value,n)})),ae(e.element.getAttribute("id"))||n.setAttribute("for",e.element.getAttribute("id"))}function l(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function h(e,t){e?Ci([t],Ra.CLEARICONHIDE):bi([t],Ra.CLEARICONHIDE)}function c(e,t){e?(bi([t],Ra.LABELTOP),t.classList.contains(Ra.LABELBOTTOM)&&Ci([t],Ra.LABELBOTTOM)):(t.classList.contains(Ra.LABELTOP)&&Ci([t],Ra.LABELTOP),bi([t],Ra.LABELBOTTOM))}function p(e){var t=ae(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function d(e,t,i){t.addEventListener("click",function(i){e.classList.contains(Ra.DISABLE)||e.readOnly||(i.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",bi([t],Ra.CLEARICONHIDE))}),e.addEventListener("input",function(i){h(e.value,t)}),e.addEventListener("focus",function(i){h(e.value,t)}),e.addEventListener("blur",function(e){setTimeout(function(){bi([t],Ra.CLEARICONHIDE)},200)})}function u(e,t){if(p(e).classList.contains(Ra.FLOATINPUT)&&"Auto"===t){var i=p(e).getElementsByClassName("e-float-text")[0];c(e.value,i)}}function m(e,t,i,s,n){var o,r=ae(n)?yi:n;return ae(e.customTag)?o=r(s,{className:t}):(o=r(e.customTag,{className:t})).classList.add(i),o.classList.add("e-control-wrapper"),o}function f(e){var t="";if(!ae(e)&&""!==e){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+e+'"/>',t=i.children[0].placeholder}return t}function g(e,t,i){ae(i)||""===i||Ci(t,i.split(" ")),ae(e)||""===e||bi(t,e.split(" "))}function v(e,t){var i;e=f(e),(i=p(t)).classList.contains(Ra.FLOATINPUT)?ae(e)||""===e?(i.classList.add(Ra.NOFLOATLABEL),i.getElementsByClassName(Ra.FLOATTEXT)[0].textContent=""):(i.getElementsByClassName(Ra.FLOATTEXT)[0].textContent=e,i.classList.remove(Ra.NOFLOATLABEL),t.removeAttribute("placeholder")):ae(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):Di(t,{placeholder:e,"aria-placeholder":e})}function y(e,t,i){e?Di(t,{readonly:""}):t.removeAttribute("readonly"),ae(i)||u(t,i)}function b(e,t){e?bi(t,Ra.RTL):Ci(t,Ra.RTL)}function C(e,t,i,s){var n={disabled:"disabled","aria-disabled":"true"},o=!ae(s);e?(t.classList.remove(Ra.DISABLE),x(n,t),o&&Ci([s],Ra.DISABLE)):(t.classList.add(Ra.DISABLE),w(n,t),o&&bi([s],Ra.DISABLE)),ae(i)||u(t,i)}function S(e,t,i,s,n){var o=ae(n)?yi:n;e?i.clearButton=function(e,t,i,s){var n=(ae(s)?yi:s)("span",{className:Ra.CLEARICON}),o=t.container;return ae(i)?(t.container.classList.contains(Ra.FLOATINPUT)?t.container.querySelector("."+Ra.FLOATTEXT):e).insertAdjacentElement("afterend",n):o.appendChild(n),!ae(o)&&o.classList.contains(Ra.FLOATINPUT)&&bi([o],Ra.INPUTGROUP),bi([n],Ra.CLEARICONHIDE),d(e,n),n.setAttribute("aria-label","close"),n}(t,i,s,o):(Li(i.clearButton),i.clearButton=null)}function x(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i],o=void 0;o=p(t),"disabled"===n&&t.classList.remove(Ra.DISABLE),"disabled"===n&&o.classList.contains(Ra.INPUTGROUP)&&o.classList.remove(Ra.DISABLE),"placeholder"===n&&o.classList.contains(Ra.FLOATINPUT)?o.getElementsByClassName(Ra.FLOATTEXT)[0].textContent="":t.removeAttribute(n)}}function w(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i],o=void 0;o=p(t),"disabled"===n&&t.classList.add(Ra.DISABLE),"disabled"===n&&o.classList.contains(Ra.INPUTGROUP)&&o.classList.add(Ra.DISABLE),"placeholder"===n&&o.classList.contains(Ra.FLOATINPUT)?o.getElementsByClassName(Ra.FLOATTEXT)[0].textContent=e[n]:t.setAttribute(n,e[n])}}function E(e,t,i){var s=[];s.push(i);var n=ae(i)?t.querySelectorAll(".e-input-group-icon"):s;if(e&&n.length>0)for(var o=0;o<n.length;o++)n[o].addEventListener("mousedown",k,!1),n[o].addEventListener("mouseup",T,!1);else if(n.length>0)for(o=0;o<n.length;o++)n[o].removeEventListener("mousedown",k,this),n[o].removeEventListener("mouseup",T,this)}function k(){for(var e,t,i=this.parentElement;!i.classList.contains("e-input-group");)i=i.parentElement;t=this,(e=i).classList.contains("e-disabled")||e.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")}function T(){var e=this;setTimeout(function(){e.classList.remove("e-input-btn-ripple")},500)}function L(e,t){var i=t("span",{className:e});return i.classList.add("e-input-group-icon"),i}function D(e,t,i,s){var n=ae(s)?yi:s,o=L(e,n);t.classList.add("e-float-icon-left");var r=t.querySelector(".e-input-in-wrap");if(ae(r)){r=n("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(r,i);var a=t.querySelectorAll(i.tagName+" ~ *");r.appendChild(i);for(var l=0;l<a.length;l++)r.appendChild(a[l])}return r.parentNode.insertBefore(o,r),t.classList.contains(Ra.INPUTGROUP)||t.classList.add(Ra.INPUTGROUP),E(!0,t,o),o}function I(e,t,i){var s=L(e,ae(i)?yi:i);return t.classList.contains(Ra.INPUTGROUP)||t.classList.add(Ra.INPUTGROUP),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(s),E(!0,t,s),s}function O(e,t){"hidden"===t.type?e.classList.add("e-hidden"):e.classList.contains("e-hidden")&&e.classList.remove("e-hidden")}e.createInput=function(e,s){var n=ae(s)?yi:s,o={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,ae(e.floatLabelType)||"Never"===e.floatLabelType?(o.container=m(e,Ra.INPUTGROUP,Ra.INPUTCUSTOMTAG,"span",n),e.element.parentNode.insertBefore(o.container,e.element),bi([e.element],Ra.INPUT),o.container.appendChild(e.element)):a(e,o,n),i(e),ae(e.properties)||ae(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(S(e.properties.showClearButton,e.element,o,!0,n),o.clearButton.setAttribute("role","button"),o.container.classList.contains(Ra.FLOATINPUT)&&bi([o.container],Ra.INPUTGROUP)),!ae(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(var r=0;r<e.buttons.length;r++)o.buttons.push(I(e.buttons[r],o.container,n));return ae(e.element)||"TEXTAREA"!==e.element.tagName||bi([o.container],Ra.TEXTAREA),O(o.container,e.element),o=function(e,t){if(!ae(e.properties))for(var i=0,s=Object.keys(e.properties);i<s.length;i++){var n=s[i];switch(n){case"cssClass":g(e.properties.cssClass,[t.container]),l(e.floatLabelType,t.container);break;case"enabled":C(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":b(e.properties.enableRtl,[t.container]);break;case"placeholder":v(e.properties.placeholder,e.element);break;case"readonly":y(e.properties.readonly,e.element)}}return t}(e,o),o,o},e.bindInitialEvent=i,e.wireFloatingEvents=r,e.wireClearBtnEvents=d,e.setValue=function(e,t,i,n){if(t.value=e,ae(i)||"Auto"!==i||u(t,i),!ae(n)&&n){var o=p(t);if(!ae(o)){var r=o.getElementsByClassName(Ra.CLEARICON)[0];ae(r)||(t.value&&o.classList.contains("e-input-focus")?Ci([r],Ra.CLEARICONHIDE):bi([r],Ra.CLEARICONHIDE))}}s(i,t)},e.setCssClass=g,e.setWidth=function(e,t){"number"==typeof e?t.style.width=ge(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:ge(e))},e.setPlaceholder=v,e.setReadonly=y,e.setEnableRtl=b,e.setEnabled=C,e.setClearButton=S,e.removeAttributes=x,e.addAttributes=w,e.removeFloating=function(e){var t,i=e.container;if(!ae(i)&&i.classList.contains(Ra.FLOATINPUT)){var s=i.querySelector("textarea")?i.querySelector("textarea"):i.querySelector("input"),r=i.querySelector("."+Ra.FLOATTEXT).textContent,a=null!==i.querySelector(".e-clear-icon");Ti(i.querySelector("."+Ra.FLOATLINE)),Ti(i.querySelector("."+Ra.FLOATTEXT)),Bi(i,[Ra.INPUTGROUP],[Ra.FLOATINPUT]),(t=s).removeEventListener("focus",n),t.removeEventListener("blur",o),Di(s,{placeholder:r}),s.classList.add(Ra.INPUT),a||"INPUT"!==s.tagName||s.removeAttribute("required")}},e.addFloating=function(e,i,s,n){var o=ae(n)?yi:n,r=Mi(e,"."+Ra.INPUTGROUP);if(t=i,"Never"!==i){var h=r.tagName,c={element:e,floatLabelType:i,customTag:h="DIV"!==h&&"SPAN"!==h?h:null,properties:{placeholder:s}},p=r.querySelector(".e-clear-icon"),d={container:r};e.classList.remove(Ra.INPUT),a(c,d,o);var u=r.classList.contains("e-float-icon-left");if(ae(p)&&(p=u?r.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):r.querySelector(".e-input-group-icon")),ae(p))u&&(p=r.querySelector(".e-input-group-icon")),ae(p)&&r.classList.remove(Ra.INPUTGROUP);else{var m=r.querySelector("."+Ra.FLOATLINE),f=r.querySelector("."+Ra.FLOATTEXT),g=u?r.querySelector(".e-input-in-wrap"):r;g.insertBefore(e,p),g.insertBefore(m,p),g.insertBefore(f,p)}}l(i,e.parentElement)},e.setRipple=function(e,t){for(var i=0;i<t.length;i++)E(e,t[i].container)},e.addIcon=function(e,t,i,s,n){var o="string"==typeof t?t.split(","):t;if("append"===e.toLowerCase())for(var r=0,a=o;r<a.length;r++)I(a[r],i,n);else for(var l=0,h=o;l<h.length;l++)D(h[l],i,s,n)},e.prependSpan=D,e.appendSpan=I,e.validateInputType=O}(Na||(Na={}));var Ba=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ha=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Fa="e-input-group-icon",ja="e-spin-up",Va=new RegExp("^(-)?(\\d*)$"),za=["title","style","class"],_a=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isVue=!1,s.preventChange=!1,s.isAngular=!1,s.isDynamicChange=!1,s.numericOptions=t,s}return Ba(t,e),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=ee("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Ci([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=Mi(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==this.element.attributes[i].nodeName&&(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML)}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,te("ej2_instances",e,this.element)}if(!ye()||!this.isServerRendered){Di(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"});var s={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new Js("numerictextbox",s,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,ye()&&this.isServerRendered||(this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value)),this.validateMinMax(),this.validateStep(),null!==this.placeholder||ye()&&this.isServerRendered||this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(ye()&&this.isServerRendered?(this.container=this.element.parentElement,this.inputWrapper={container:this.container},this.hiddenInput=this.container.querySelector('input[type="hidden"]'),this.showClearButton&&(this.inputWrapper.clearButton=this.container.querySelector(".e-clear-icon"),Na.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),this.showSpinButton&&(this.spinDown=this.container.querySelector(".e-spin-down"),this.spinUp=this.container.querySelector("."+ja),this.wireSpinBtnEvents()),Na.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties})):(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value)),this.wireEvents(),ye()&&this.isServerRendered||(null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value))),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var t=0,i=e?ae(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];t<i.length;t++){var s=i[t];if(!ae(this.element.getAttribute(s)))switch(s){case"disabled":if(ae(this.numericOptions)||void 0===this.numericOptions.enabled||e){var n="disabled"!==this.element.getAttribute(s)&&""!==this.element.getAttribute(s)&&"true"!==this.element.getAttribute(s);this.setProperties({enabled:n},!e)}break;case"readonly":if(ae(this.numericOptions)||void 0===this.numericOptions.readonly||e){var o="readonly"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s);this.setProperties({readonly:o},!e)}break;case"placeholder":(ae(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(ae(this.numericOptions)||void 0===this.numericOptions.value||e){var r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));this.setProperties(te(s,r,{}),!e)}break;case"min":if(ae(this.numericOptions)||void 0===this.numericOptions.min||e){var a=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null===a||isNaN(a)||this.setProperties(te(s,a,{}),!e)}break;case"max":if(ae(this.numericOptions)||void 0===this.numericOptions.max||e){var l=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null===l||isNaN(l)||this.setProperties(te(s,l,{}),!e)}break;case"step":if(ae(this.numericOptions)||void 0===this.numericOptions.step||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null===h||isNaN(h)||this.setProperties(te(s,h,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(s);break;case"name":this.inputName=this.element.getAttribute(s);break;default:var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));(null!==c&&!isNaN(c)||"value"===s)&&this.setProperties(te(s,c,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new Qe(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==ee("currency",this)&&(te("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;ae(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));var t=Na.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Di(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),Di(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&Di(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];0===o.indexOf("data")&&this.hiddenInput.setAttribute(o,t[o])}},t.prototype.updateHTMLAttrToElement=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];za.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){Na.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))},t.prototype.getNumericValidClassList=function(e){var t=e;return ae(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.updateHTMLAttrToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(za.indexOf(i)>-1)if("class"===i){var s=this.getNumericValidClassList(this.htmlAttributes[i]);""!==s&&bi([this.container],s.split(" "))}else if("style"===i){var n=this.container.getAttribute(i);n=ae(n)?this.htmlAttributes[i]:n+this.htmlAttributes[i],this.container.setAttribute(i,n)}else this.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.setElementWidth=function(e){ae(e)||("number"==typeof e?this.container.style.width=ge(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:ge(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=Na.appendSpan(Fa+" e-spin-down",this.container,this.createElement),Di(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=Na.appendSpan(Fa+" "+ja,this.container,this.createElement),Di(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),Di(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,t){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)},t.prototype.checkErrorClass=function(){this.isValidState?Ci([this.container],"e-error"):bi([this.container],"e-error"),Di(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&Ct.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",Mi(this.element,"form")){var t=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.resetFormHandler=function(){"EJS-NUMERICTEXTBOX"===this.element.tagName?this.updateValue(null):this.updateValue(this.inputEleValue)},t.prototype.setSpinButton=function(){ae(this.spinDown)||Di(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),ae(this.spinUp)||Di(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){Ct.add(this.element,"focus",this.focusHandler,this),Ct.add(this.element,"blur",this.focusOutHandler,this),Ct.add(this.element,"keydown",this.keyDownHandler,this),Ct.add(this.element,"keyup",this.keyUpHandler,this),Ct.add(this.element,"input",this.inputHandler,this),Ct.add(this.element,"keypress",this.keyPressHandler,this),Ct.add(this.element,"change",this.changeHandler,this),Ct.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&Ct.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){Ct.add(this.spinUp,bt.touchStartEvent,this.mouseDownOnSpinner,this),Ct.add(this.spinDown,bt.touchStartEvent,this.mouseDownOnSpinner,this),Ct.add(this.spinUp,bt.touchEndEvent,this.mouseUpOnSpinner,this),Ct.add(this.spinDown,bt.touchEndEvent,this.mouseUpOnSpinner,this),Ct.add(this.spinUp,bt.touchMoveEvent,this.touchMoveOnSpinner,this),Ct.add(this.spinDown,bt.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){Ct.remove(this.element,"focus",this.focusHandler),Ct.remove(this.element,"blur",this.focusOutHandler),Ct.remove(this.element,"keyup",this.keyUpHandler),Ct.remove(this.element,"input",this.inputHandler),Ct.remove(this.element,"keydown",this.keyDownHandler),Ct.remove(this.element,"keypress",this.keyPressHandler),Ct.remove(this.element,"change",this.changeHandler),Ct.remove(this.element,"paste",this.pasteHandler),this.formEle&&Ct.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){Ct.remove(this.spinUp,bt.touchStartEvent,this.mouseDownOnSpinner),Ct.remove(this.spinDown,bt.touchStartEvent,this.mouseDownOnSpinner),Ct.remove(this.spinUp,bt.touchEndEvent,this.mouseUpOnSpinner),Ct.remove(this.spinDown,bt.touchEndEvent,this.mouseUpOnSpinner),Ct.remove(this.spinUp,bt.touchMoveEvent,this.touchMoveOnSpinner),Ct.remove(this.spinDown,bt.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),oe(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var t=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)})}},t.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var i,s=e.element.selectionStart,n=e.element.selectionStart-1,o=e.element.value.split("");i=ee("decimal",it(e.locale)).charCodeAt(0)," "===e.element.value[n]&&e.element.selectionStart>0&&!t?(ae(e.prevVal)?e.element.value=e.element.value.trim():0!==n?e.element.value=e.prevVal:0===n&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(o.indexOf(e.element.value[e.element.selectionStart-1])!==o.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===i||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==i)&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(s,e.element.value.length),e.element.setSelectionRange(n,n),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(e.element.value[e.element.selectionStart-2])!==o.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===i||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==i)&&(e.element.setSelectionRange(n,n),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(ae(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(e){if(this.enabled&&!this.readonly){!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&bt.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);if(t=null===t||isNaN(t)?null:t,this.hiddenInput.value=t||0===t?t.toString():null,Mi(this.element,"form")){var i=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||t)&&bt.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==ee("decimal",it(this.locale))&&this.element.value!==ee("minusSign",it(this.locale))){var i=this.instance.getNumberParser({format:"n"})(this.element.value);i=isNaN(i)?null:i,this.localChange({value:i}),this.preventChange=!0}if(this.isVue){var s=this.instance.getNumberParser({format:"n"})(this.element.value),n=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),o={event:e,value:null===s||isNaN(s)?null:s,previousValue:null===n||isNaN(n)?null:n};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",o)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action("increment",e);break;case 40:e.preventDefault(),this.action("decrement",e)}},t.prototype.performAction=function(e,t,i){(null===e||isNaN(e))&&(e=0);var s="increment"===i?e+t:e-t;return s=this.correctRounding(e,t,s),this.strictMode?this.trimValue(s):s},t.prototype.correctRounding=function(e,t,i){var s=new RegExp("[,.](.*)"),n=(e.toString(),t.toString(),s.test(e.toString())),o=s.test(t.toString());if(n||o){var r=n?s.exec(e.toString())[0].length:0,a=o?s.exec(t.toString())[0].length:0,l=Math.max(r,a);return this.roundValue(i,l)}return i},t.prototype.roundValue=function(e,t){t=t||0;var i=Math.pow(10,t);return e*=i,Math.round(e)/i},t.prototype.updateValue=function(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)},t.prototype.updateCurrency=function(e,t){te(e,t,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var t;t=this.getNumberOfDecimals(e),this.setProperties({value:this.roundNumber(e,t)},!0)}else e=null,this.setProperties({value:e},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),Di(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,t){Na.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var t,i=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(i.test(s)){var n=i.exec(s);ae(n)||(s=e.toFixed(Math.min(parseInt(n[1],10),20)))}var o=s.split(".")[1];return t=o&&o.length?o.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t},t.prototype.formatNumber=function(){var e;return e=this.getNumberOfDecimals(this.value),this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,t){var i=e,s=t||0,n=i.toString().split("e"),o=(i=Math.round(Number(n[0]+"e"+(n[1]?Number(n[1])+s:s)))).toString().split("e");return i=Number(o[0]+"e"+(o[1]?Number(o[1])-s:-s)),Number(i.toFixed(s))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!bt.isDevice&&"11.0"===bt.info.version&&13===e.keyCode){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var i=String.fromCharCode(e.which),s=this.element.value;return s=s.substring(0,this.element.selectionStart)+i+s.substring(this.element.selectionEnd),!!this.numericRegex().test(s)||(e.preventDefault(),e.stopPropagation(),!1)},t.prototype.numericRegex=function(){var e=ee("decimal",it(this.locale)),t="*";return"."===e&&(e="\\"+e),0===this.decimals&&this.validateDecimalOnType?Va:(this.decimals&&this.validateDecimalOnType&&(t="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+e+"\\d"+t+")?)|("+e+"\\d"+t+")))?$"))},t.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.action("increment",e):t<0&&this.action("decrement",e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var t=this;if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,Ci([this.container],"e-error"),this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(bt.isDevice||"11.0"!==bt.info.version){var s=bt.isDevice&&bt.isIos?600:0;setTimeout(function(){t.element.setSelectionRange(0,i.length)},s)}else this.element.setSelectionRange(0,i.length)}bt.isDevice||Ct.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),bt.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){t.setElementValue(i,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var n=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(n),bt.isDevice||Ct.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(Mi(this.element,"form")){var o=this.element.nextElementSibling,r=document.createEvent("FocusEvent");r.initEvent("focusout",!1,!0),o.dispatchEvent(r)}}},t.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var i=e.currentTarget,s=i.classList.contains(ja)?"increment":"decrement";Ct.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){t.isCalled=!0,t.action(s,e)},150),Ct.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){document.elementFromPoint(e.clientX,e.clientY).classList.contains(Fa)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.isPrevFocused&&(this.element.focus(),bt.isDevice||(this.isPrevFocused=!1)),bt.isDevice||e.preventDefault(),this.getElementData(e)){var t=e.currentTarget,i=t.classList.contains(ja)?"increment":"decrement";if(Ct.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,Ct.remove(document,"mouseup",this.mouseUpClick),Mi(this.element,"form")){var s=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),s.dispatchEvent(n)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly)&&(clearInterval(this.timeOut),!0)},t.prototype.floatLabelTypeUpdate=function(){Na.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),Na.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,Ct.remove(this.spinUp,"mouseleave",this.mouseUpClick),Ct.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"increment")),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"decrement")),this.raiseChangeEvent()},t.prototype.destroy=function(){if(this.unwireEvents(),!ye()||!this.isServerRendered){Ti(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),Ti(this.spinUp),Ti(this.spinDown));for(var t=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),Ti(this.container),e.prototype.destroy.call(this)}},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),bi([this.container],["e-input-focus"]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Ci([this.container],["e-input-focus"]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"width":this.setElementWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":Na.setEnabled(e.enabled,this.element);break;case"enableRtl":Na.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":Na.setReadonly(e.readonly,this.element),this.readonly?Di(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),Na.validateInputType(this.container,this.element);break;case"placeholder":Na.setPlaceholder(e.placeholder,this.element);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":te(n,ee(n,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),Na.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var o=ee(n,e);this.setProperties({currencyCode:o},!0),this.updateCurrency(n,o);break;case"currencyCode":var r=ee(n,e);this.setProperties({currency:r},!0),this.updateCurrency("currency",r);break;case"format":te(n,ee(n,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){ye()?this.showClearButton&&(this.inputWrapper.clearButton=this.container.querySelector(".e-clear-icon"),Na.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)):(Na.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent())},t.prototype.updateSpinButton=function(e){ye()?this.showSpinButton&&(this.spinDown=this.container.querySelector(".e-spin-down"),this.spinUp=this.container.querySelector("."+ja),this.wireSpinBtnEvents()):e.showSpinButton?this.spinBtnCreation():(Ti(this.spinUp),Ti(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},Ha([os("")],t.prototype,"cssClass",void 0),Ha([os(null)],t.prototype,"value",void 0),Ha([os(-Number.MAX_VALUE)],t.prototype,"min",void 0),Ha([os(Number.MAX_VALUE)],t.prototype,"max",void 0),Ha([os(1)],t.prototype,"step",void 0),Ha([os(null)],t.prototype,"width",void 0),Ha([os(null)],t.prototype,"placeholder",void 0),Ha([os({})],t.prototype,"htmlAttributes",void 0),Ha([os(!0)],t.prototype,"showSpinButton",void 0),Ha([os(!1)],t.prototype,"readonly",void 0),Ha([os(!0)],t.prototype,"enabled",void 0),Ha([os(!1)],t.prototype,"showClearButton",void 0),Ha([os(!1)],t.prototype,"enablePersistence",void 0),Ha([os("n2")],t.prototype,"format",void 0),Ha([os(null)],t.prototype,"decimals",void 0),Ha([os(null)],t.prototype,"currency",void 0),Ha([os(null)],t.prototype,"currencyCode",void 0),Ha([os(!0)],t.prototype,"strictMode",void 0),Ha([os(!1)],t.prototype,"validateDecimalOnType",void 0),Ha([os("Never")],t.prototype,"floatLabelType",void 0),Ha([cs()],t.prototype,"created",void 0),Ha([cs()],t.prototype,"destroyed",void 0),Ha([cs()],t.prototype,"change",void 0),Ha([cs()],t.prototype,"focus",void 0),Ha([cs()],t.prototype,"blur",void 0),t=Ha([ps],t)}(Ns),qa="e-error",Wa="e-input-group",Ua="e-float-input",Ga="e-utility-mask",Ya="e-label-top",Xa="e-label-bottom",Ka={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^ ]+",C:"[^]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function Za(){if(Di(this.element,{role:"textbox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive","aria-valuenow":""}),this.mask){for(var e=this.mask.split("]"),t=0;t<e.length;t++)if("\\"===e[t][e[t].length-1]){e[t]=e[t]+"]";for(var i=e[t].split("["),s=0;s<i.length;s++)"\\"===i[s][i[s].length-1]&&(i[s]=i[s]+"["),ol.call(this,i[s])}else{if((i=e[t].split("[")).length>1){var n=!1;for(s=0;s<i.length;s++)"\\"===i[s]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[s]+"["):""===i[s]?n=!0:""!==i[s]&&n||s===i.length-1?(this.customRegExpCollec.push("["+i[s]+"]"),this.hiddenMask+=this.promptChar,n=!1):ol.call(this,i[s])}else ol.call(this,i[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!ae(this.customCharacters))for(t=0;t<this.promptMask.length;t++)ae(this.customCharacters[this.promptMask[t]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[t],"g"),this.promptChar));var o=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(t=0;t<this.hiddenMask.length;t++){s=0;t>=1&&(s=t),s-=o=this.hiddenMask.length-this.promptMask.length,t>0&&"\\"!==this.hiddenMask[t-1]&&(">"===this.hiddenMask[t]||"<"===this.hiddenMask[t]||"|"===this.hiddenMask[t])&&(this.promptMask=this.promptMask.substring(0,s)+this.promptMask.substring(t+1-o,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,s)+this.escapeMaskValue.substring(t+1-o,this.escapeMaskValue.length)),"\\"===this.hiddenMask[t]&&(this.promptMask=this.promptMask.substring(0,s)+this.hiddenMask[t+1]+this.promptMask.substring(t+2-o,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,s)+this.escapeMaskValue[t+1]+this.escapeMaskValue.substring(t+2-o,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");Di(this.element,{"aria-invalid":"false"})}}function Qa(){Tl.call(this,this.promptMask),kl.call(this,this.value)}function Ja(){Ct.add(this.element,"keydown",dl,this),Ct.add(this.element,"keypress",gl,this),Ct.add(this.element,"keyup",yl,this),Ct.add(this.element,"input",pl,this),Ct.add(this.element,"focus",rl,this),Ct.add(this.element,"blur",al,this),Ct.add(this.element,"paste",ll,this),Ct.add(this.element,"cut",hl,this),Ct.add(this.element,"drop",cl,this),this.enabled&&(el.call(this),this.formElement&&Ct.add(this.formElement,"reset",il,this))}function $a(){Ct.remove(this.element,"keydown",dl),Ct.remove(this.element,"keypress",gl),Ct.remove(this.element,"keyup",yl),Ct.remove(this.element,"input",pl),Ct.remove(this.element,"focus",rl),Ct.remove(this.element,"blur",al),Ct.remove(this.element,"paste",ll),Ct.remove(this.element,"cut",hl),this.formElement&&Ct.remove(this.formElement,"reset",il)}function el(){this.showClearButton&&Ct.add(this.inputObj.clearButton,"mousedown touchstart",tl,this)}function tl(e){e.preventDefault(),this.inputObj.clearButton.classList.contains("e-clear-icon-hide")||(function(e){var t=this.element.value;Tl.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),vl.call(this,e,t),this.element.setSelectionRange(0,0)}.call(this,e),this.value="")}function il(){"EJS-MASKEDTEXTBOX"===this.element.tagName?Tl.call(this,this.promptMask):this.value=this.initInputValue}function sl(e){return e.value}function nl(e,t){var i="",s=0,n=!1,o=ae(t)?ae(e)||ae(this)?t:e.value:t;if(o!==this.promptMask)for(var r=0;r<this.customRegExpCollec.length;r++)n&&(n=!1),">"!==this.customRegExpCollec[s]&&"<"!==this.customRegExpCollec[s]&&"|"!==this.customRegExpCollec[s]&&"\\"!==this.customRegExpCollec[s]||(--r,n=!0),n||o[r]!==this.promptChar&&!ae(this.customRegExpCollec[s])&&(this._callPasteHandler||!ae(this.regExpCollec[this.customRegExpCollec[s]])||this.customRegExpCollec[s].length>2&&"["===this.customRegExpCollec[s][0]&&"]"===this.customRegExpCollec[s][this.customRegExpCollec[s].length-1]||!ae(this.customCharacters)&&!ae(this.customCharacters[this.customRegExpCollec[s]]))&&""!==o&&(i+=o[r]),++s;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(i=o),i}function ol(e){for(var t=0;t<e.length;t++)this.hiddenMask+=e[t],"\\"!==e[t]&&this.customRegExpCollec.push(e[t])}function rl(e){var t=this,i={selectionStart:0,event:e,value:this.value,maskedValue:this.element.value,container:this.inputObj.container,selectionEnd:this.promptMask.length>0?this.promptMask.length:this.element.value.length};this.trigger("focus",i,function(e){if(t.mask)if(t.isFocus=!0,""===t.element.value?Tl.call(t,t.promptMask):Tl.call(t,t.element.value),bt.isDevice||"11.0"!==bt.info.version){var i=bt.isDevice&&bt.isIos?450:0;setTimeout(function(){t.element.setSelectionRange(e.selectionStart,e.selectionEnd)},i)}else t.element.setSelectionRange(e.selectionStart,e.selectionEnd)})}function al(e){if(this.blurEventArgs={event:e,value:this.value,maskedValue:this.element.value,container:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){Tl.call(this,"");var t=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!ae(t)&&t.classList.contains(Ya)&&Ci([t],Ya)}}function ll(e){var t=this;if(this.mask&&!this.readonly){var i=this.element.selectionStart,s=this.element.selectionEnd,n=this.element.value;Tl.call(this,""),this._callPasteHandler=!0,setTimeout(function(){var o=t.element.value.replace(/ /g,"");t.redoCollec.length>0&&t.redoCollec[0].value===t.element.value&&(o=nl.call(t,t.element)),Tl.call(t,n),t.element.selectionStart=i,t.element.selectionEnd=s;var r=0;t.maskKeyPress=!0;do{Cl.call(t,o[r],!1,null),++r}while(r<o.length);if(t.maskKeyPress=!1,t._callPasteHandler=!1,t.element.value===n){var a=0;t.maskKeyPress=!0;do{Cl.call(t,o[a],!1,null),++a}while(a<o.length);t.maskKeyPress=!1}else vl.call(t,e,n)},1)}}function hl(e){var t=this;if(this.mask&&!this.readonly){var i=this.element.value,s=this.element.selectionStart,n=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});var o=this.element.value.substring(0,s)+this.promptMask.substring(s,n)+this.element.value.substring(n);setTimeout(function(){Tl.call(t,o),t.element.selectionStart=t.element.selectionEnd=s,t.element.value!==i&&vl.call(t,e,null)},0)}}function cl(e){e.preventDefault()}function pl(e){if(!0!==bt.isIE||""!==this.element.value||"Never"!==this.floatLabelType){if(re(e,{ctrlKey:!1,keyCode:229}),this.mask){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||fl.call(this,e),this.element.value.length>this.promptMask.length){var t=this.element.selectionStart,i=this.element.value.length-this.promptMask.length,s=this.element.value.substring(t-i,t);this.maskKeyPress=!1;var n=0;do{Cl.call(this,s[n],e.ctrlKey,e),++n}while(n<s.length);this.element.value!==this.preEleVal&&vl.call(this,e,null)}var o=nl.call(this,this.element);this.prevValue=o,this.value=o,""===o&&(Tl.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}}function dl(e){if(this.mask&&!this.readonly){229!==e.keyCode&&(!e.ctrlKey||89!==e.keyCode&&90!==e.keyCode||e.preventDefault(),fl.call(this,e));var t=this.element.value;if(e.ctrlKey&&(89===e.keyCode||90===e.keyCode)){var i=void 0;90===e.keyCode&&this.undoCollec.length>0&&t!==this.undoCollec[this.undoCollec.length-1].value?(i=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Tl.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===e.keyCode&&this.redoCollec.length>0&&t!==this.redoCollec[0].value&&(i=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Tl.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.redoCollec.splice(0,1))}}}function ul(){var e,t=this.element.selectionStart,i=this.element.selectionEnd;this.redoCollec.length>0?(e=this.redoCollec[0],Tl.call(this,e.value),e.startIndex-t==1?(this.element.selectionStart=e.startIndex,this.element.selectionEnd=e.endIndex):(this.element.selectionStart=t+1,this.element.selectionEnd=i+1)):(Tl.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=t)}function ml(e,t,i){return"input"===i.type&&(e=!1,t=this.element.value,Tl.call(this,this.promptMask),kl.call(this,t)),e}function fl(e){var t,i=!1,s=!1;this.element.value.length<this.promptMask.length&&(i=!0,t=this.element.value,i=ml.call(this,i,t,e),ul.call(this)),this.element.value.length>=this.promptMask.length&&"input"===e.type&&(i=ml.call(this,i,t,e));var n=this.element.selectionStart,o=this.element.selectionEnd,r=this.element.selectionStart,a=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,""),h=l[r-1],c=(this.element.parentNode,this.element.selectionEnd);if(i||8===e.keyCode||46===e.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});var p=!1,d=this.element.value;if(r>0||(8===e.keyCode||46===e.keyCode)&&r<this.element.value.length&&this.element.selectionEnd-r!==this.element.value.length){var u=r;r!==a?(r=a,46===e.keyCode&&(p=!0)):46===e.keyCode?++u:--u;for(var m=r;8===e.keyCode||i||p?m>u:m<u;8===e.keyCode||i||p?m--:m++)for(var f=r;8===e.keyCode||i||p?f>0:f<this.element.value.length;8===e.keyCode||i||p?f--:f++){var g=void 0;(8===e.keyCode||p)&&(n!==o&&n!==r||n===o)||i?(h=l[f-1],g=r-1):(h=l[f],g=r,++r);var v=this.element.value[g];if(ae(this.regExpCollec[h])&&!ae(this.customCharacters)&&ae(this.customCharacters[h])&&this.hiddenMask[g]!==this.promptChar&&"["!==this.customRegExpCollec[g][0]&&"]"!==this.customRegExpCollec[g][this.customRegExpCollec[g].length-1]||this.promptMask[g]!==this.promptChar&&ae(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=g,e.preventDefault(),46!==e.keyCode||p||++this.element.selectionStart;else{var y=this.element.value,b=this.promptChar,C=y.substring(0,g)+b+y.substring(r,y.length);Tl.call(this,C),e.preventDefault(),46!==e.keyCode||p||g++,this.element.selectionStart=this.element.selectionEnd=g,s=!0}if(r=this.element.selectionStart,!s&&8===e.keyCode||p||!s&&46!==e.keyCode?g=r-1:(g=r,s=!1),v=this.element.value[g],n!==o&&this.element.selectionStart===n||this.promptMask[g]===this.promptChar||v!==this.promptMask[g]&&this.promptMask[g]!==this.promptChar&&!ae(this.customCharacters))break}}46===e.keyCode&&p&&s&&(this.element.selectionStart=this.element.selectionEnd=c),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(Tl.call(this,this.promptMask),e.preventDefault(),this.element.selectionStart=this.element.selectionEnd=r),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==d&&vl.call(this,e,t)}}function gl(e){if(this.mask&&!this.readonly){var t=this.element.value;if(!e.ctrlKey||e.ctrlKey&&"KeyA"!==e.code&&"KeyY"!==e.code&&"KeyZ"!==e.code&&"KeyX"!==e.code&&"KeyC"!==e.code&&"KeyV"!==e.code){this.maskKeyPress=!0;var i=e.key;"Spacebar"===i&&(i=String.fromCharCode(e.keyCode)),i?i&&1===i.length&&(Cl.call(this,i,e.ctrlKey,e),e.preventDefault()):(this.isIosInvalid=!0,Cl.call(this,String.fromCharCode(e.keyCode),e.ctrlKey,e),e.preventDefault(),this.isIosInvalid=!1),32===e.keyCode&&" "===i&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-i.length)}this.element.value!==t&&vl.call(this,e,t)}}function vl(e,t){var i=this.isProtectedOnChange;if(!ae(this.changeEventArgs)&&!this.isInitial){var s={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=nl.call(this,this.element)),ae(e)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=e),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=i,oe(s,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}this.preEleVal=this.element.value,this.prevValue=nl.call(this,this.element),Di(this.element,{"aria-valuenow":this.element.value})}function yl(e){if(this.mask&&!this.readonly){var t=void 0;if(this.maskKeyPress||229!==e.keyCode)El.call(this);else{var i=void 0;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){var s=this.element.selectionStart,n=this.element.value.length-this.promptMask.length,o=this.element.value.substring(s-n,s);if(this.undoCollec.length>0){t=this.undoCollec[this.undoCollec.length-1];var r=this.element.selectionStart;i=t.value;var a=t.value.substring(r-n,r);t=this.redoCollec[0],o=o.trim();var l=bt.isAndroid&&""===o;l||a===o||t.value.substring(r-n,r)===o?l&&xl.call(this,e,r-1,this.element.selectionEnd-1,o,e.ctrlKey,!1):Cl.call(this,o,e.ctrlKey,e)}else i=this.promptMask,Cl.call(this,o,e.ctrlKey,e);this.maskKeyPress=!1,vl.call(this,e,i)}}var h=nl.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==h||""===h&&this.value!==h)&&(this.prevValue=h,this.value=h)}else vl.call(this,e);if(0===this.element.selectionStart&&0===this.element.selectionEnd){var c=this.element;setTimeout(function(){c.setSelectionRange(0,0)},0)}}function bl(e){this.maskKeyPress||function(e){if(e.length>1&&this.promptMask.length+e.length<this.element.value.length){var t=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+e+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);Tl.call(this,t),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+e.length}this.element.selectionStart=this.element.selectionStart-e.length,this.element.selectionEnd=this.element.selectionEnd-e.length}.call(this,e)}function Cl(e,t,i){if(bl.call(this,e),!ae(this)&&!ae(e))for(var s,n,o=this.element.selectionStart,r=o,a=(this.element.selectionEnd,!1),l=this.element.value,h=!1,c=!1,p=0;p<e.length;p++){var d=e[p];if(o=this.element.selectionStart,this.element.selectionEnd,this.maskKeyPress||r!==o||(o+=p),!this.maskKeyPress||o<this.promptMask.length){for(var u=o;u<this.promptMask.length;u++){s=this.escapeMaskValue[o],"\\"===this.hiddenMask[o]&&this.hiddenMask[o+1]===e&&(c=!0),(ae(this.regExpCollec[s])&&(ae(this.customCharacters)||!ae(this.customCharacters)&&ae(this.customCharacters[s]))&&this.hiddenMask[o]!==this.promptChar&&"["!==this.customRegExpCollec[o][0]&&"]"!==this.customRegExpCollec[o][this.customRegExpCollec[o].length-1]||this.promptMask[o]!==this.promptChar&&ae(this.customCharacters)||this.promptChar===s&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=o+1,o=this.element.selectionStart,s=this.hiddenMask[o])}if(ae(this.customCharacters)||ae(this.customCharacters[s]))!ae(this.regExpCollec[s])&&d.match(new RegExp(this.regExpCollec[s]))&&this.promptMask[o]===this.promptChar?a=!0:this.promptMask[o]===this.promptChar&&"["===this.customRegExpCollec[o][0]&&"]"===this.customRegExpCollec[o][this.customRegExpCollec[o].length-1]&&d.match(new RegExp(this.customRegExpCollec[o]))&&(a=!0);else{var m=this.customCharacters[s].split(",");for(u=0;u<m.length;u++)if(d.match(new RegExp("["+m[u]+"]"))){a=!0;break}}if((!this.maskKeyPress||o<this.hiddenMask.length)&&a){if(0===p)if(this.maskKeyPress)this.undoCollec.push({value:l,startIndex:o,endIndex:o});else{var f=this.element.selectionStart,g=this.element.selectionEnd;this.redoCollec.length>0?(n=this.redoCollec[0].value,Tl.call(this,n),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:o,endIndex:o}),n=this.promptMask,Tl.call(this,n)),this.element.selectionStart=f,this.element.selectionEnd=g}o=this.element.selectionStart,Sl.call(this,i,o,d,n,c),h=!0,p===e.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),a=!1}else o=this.element.selectionStart,xl.call(this,i,o,r,e,t,h);p!==e.length-1||a||(!bt.isAndroid||bt.isAndroid&&o<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1!==e.length||t||ae(i)||wl.call(this)}}function Sl(e,t,i,s,n){if(this.hiddenMask.length>this.promptMask.length&&(i=function(e,t){var i,s,n=t,o=0;for(s=0;s<this.hiddenMask.length;s++)if("\\"===this.hiddenMask[s]&&(i=n.substring(0,s)+"\\"+n.substring(s,n.length)),">"!==this.hiddenMask[s]&&"<"!==this.hiddenMask[s]&&"|"!==this.hiddenMask[s]||(this.hiddenMask[s]!==n[s]&&(i=n.substring(0,s)+this.hiddenMask[s]+n.substring(s,n.length)),++o),i){if(i[s]===this.promptChar&&s>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+o===s){o=0;break}n=i}for(;s>=0&&i;){if(0===s||"\\"!==i[s-1]){this.element.value;if(">"===i[s]){e=e.toUpperCase();break}if("<"===i[s]){e=e.toLowerCase();break}if("|"===i[s])break}--s}return e}.call(this,i,this.element.value)),!n){var o=this.element.value,r=o.substring(0,t)+i+o.substring(t+1,o.length);Tl.call(this,r),this.element.selectionStart=this.element.selectionEnd=t+1}}function xl(e,t,i,s,n,o){if(!this.maskKeyPress){var r=this.element.value;t>=this.promptMask.length?Tl.call(this,r.substring(0,t)):(i===t?Tl.call(this,r.substring(0,t)+r.substring(t+1,r.length)):this.promptMask.length===this.element.value.length?Tl.call(this,r.substring(0,t)+r.substring(t,r.length)):Tl.call(this,r.substring(0,i)+r.substring(i+1,r.length)),this.element.selectionStart=this.element.selectionEnd=o||this.element.value[i]!==this.promptChar?t:i),this.element.value,wl.call(this)}1!==s.length||n||ae(e)||wl.call(this)}function wl(){var e=this,t=this.element.parentNode,i=200;t.classList.contains(Wa)||t.classList.contains(Ua)?bi([t],qa):bi([this.element],qa),!0===this.isIosInvalid&&(i=400),Di(this.element,{"aria-invalid":"true"}),setTimeout(function(){e.maskKeyPress||El.call(e)},i)}function El(){var e=this.element.parentNode;ae(e)||Ci([e],qa),Ci([this.element],qa),Di(this.element,{"aria-invalid":"false"})}function kl(e){if(this.mask&&void 0!==e&&(void 0===this.prevValue||this.prevValue!==e)){if(this.maskKeyPress=!0,Tl.call(this,this.promptMask),""===e||null===e&&"Never"===this.floatLabelType&&this.placeholder||(this.element.selectionStart=0,this.element.selectionEnd=0),null!==e)for(var t=0;t<e.length;t++)Cl.call(this,e[t],!1,null);var i=nl.call(this,this.element);this.prevValue=i,this.value=i,vl.call(this,null,null),this.maskKeyPress=!1;var s=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!ae(s)&&s.classList.contains(Ya)&&!this.isFocus&&(Ci([s],Ya),bi([s],Xa),Tl.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&Tl.call(this,this.value)}function Tl(e,t){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&ae(this.value)&&(e="");var i=nl.call(this,t||this.element,e);null===i||""===i?(Na.setValue(e,t||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):Na.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}function Ll(e){var t=Dl(e);Qa.call(t);var i=nl.call(this,this.element);this.prevValue=i,this.value=i,e.mask&&($a.call(t),Ja.call(t))}function Dl(e){bi([e.element],Ga);var t={element:e.element,mask:e.mask,promptMask:"",hiddenMask:"",escapeMaskValue:"",promptChar:e.promptChar?e.promptChar.length>1?e.promptChar=e.promptChar[0]:e.promptChar:"_",value:e.value?e.value:null,regExpCollec:Ka,customRegExpCollec:[],customCharacters:e.customCharacters,undoCollec:[],redoCollec:[],maskKeyPress:!1,prevValue:""};return Za.call(t),t}function Il(e){return nl.call(Al(e),e.element)}function Ol(e){return sl.call(Al(e),e.element)}function Al(e){var t;return!ae(e)&&e.element.classList.contains(Ga)&&(t=Dl(e)),t}var Ml,Pl=function(){return function(){}}(),Nl=(new Pl,function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),Rl=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Bl=["title","style","class"],Hl=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.initInputValue="",s.isAngular=!1,s.preventChange=!1,s.maskOptions=t,s}return Nl(t,e),t.prototype.getModuleName=function(){return"maskedtextbox"},t.prototype.preRender=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=Ka,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;var e=ee("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Ci([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=Mi(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(t),this.element=t,te("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.render=function(){var e=this;if("input"===this.element.tagName.toLowerCase()){var t=ye()&&this.isServerRendered;"Never"===this.floatLabelType&&bi([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,t&&!0===bt.isIE?setTimeout(function(){e.resetMaskedTextBox()}):this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,bt.isDevice||"11.0"!==bt.info.version&&"edge"!==bt.info.name||this.element.blur(),bt.isDevice&&bt.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),this.renderComplete()}},t.prototype.updateHTMLAttrToElement=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Bl.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){Na.setCssClass(this.getValidClassList(e),[this.inputObj.container],this.getValidClassList(t))},t.prototype.getValidClassList=function(e){var t=e;return ae(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.updateHTMLAttrToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Bl.indexOf(i)>-1)if("class"===i){var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&bi([this.inputObj.container],s.split(" "))}else if("style"===i){var n=this.inputObj.container.getAttribute(i);n=ae(n)?this.htmlAttributes[i]:n+this.htmlAttributes[i],this.inputObj.container.setAttribute(i,n)}else this.inputObj.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.resetMaskedTextBox=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),Za.call(this),Qa.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&Tl.call(this,this.value);var e=nl.call(this,this.element);this.prevValue=e,this.value=e,this.isInitial||$a.call(this),Ja.call(this)},t.prototype.setMaskPlaceholder=function(e,t){(t||this.placeholder)&&(Na.setPlaceholder(this.placeholder,this.element),this.element.value===this.promptMask&&e&&"Always"!==this.floatLabelType&&Tl.call(this,""),"Never"===this.floatLabelType&&al.call(this))},t.prototype.setWidth=function(e){if(!ae(e))if("number"==typeof e)this.inputObj.container.style.width=ge(e),this.element.style.width=ge(e);else if("string"==typeof e){var t=e.match(/px|%|em/)?e:ge(e);this.inputObj.container.style.width=t,this.element.style.width=t}},t.prototype.checkHtmlAttributes=function(e){for(var t=0,i=e?ae(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];t<i.length;t++){var s=i[t];if(!ae(this.element.getAttribute(s)))switch(s){case"placeholder":(ae(this.maskOptions)||void 0===this.maskOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"disabled":if(ae(this.maskOptions)||void 0===this.maskOptions.enabled||e){var n="disabled"!==this.element.getAttribute(s)&&""!==this.element.getAttribute(s)&&"true"!==this.element.getAttribute(s);this.setProperties({enabled:n},!e)}break;case"value":(ae(this.maskOptions)||void 0===this.maskOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"readonly":if(ae(this.maskOptions)||void 0===this.maskOptions.readonly||e){var o="readonly"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s);this.setProperties({readonly:o},!e)}}}},t.prototype.createWrapper=function(){var e=this.cssClass;ae(this.cssClass)||""===this.cssClass||(e=this.getValidClassList(this.cssClass)),this.inputObj=Na.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:e,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"value":kl.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":Na.setEnabled(e.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":Na.setReadonly(e.readonly,this.element);break;case"enableRtl":Na.setEnableRtl(e.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=e.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":Na.setClearButton(e.showClearButton,this.element,this.inputObj,void 0,this.createElement),el.call(this);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,Na.removeFloating(this.inputObj),Na.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":var n=this.value;this.mask=e.mask,this.updateValue(n);break;case"promptChar":e.promptChar.length>1&&(e.promptChar=e.promptChar[0]),e.promptChar?this.promptChar=e.promptChar:this.promptChar="_";var o=this.element.value.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(o=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],Tl.call(this,o)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.updateValue=function(e){this.resetMaskedTextBox(),kl.call(this,e)},t.prototype.getMaskedValue=function(){return sl.call(this,this.element)},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),bi([this.inputObj.container],["e-input-focus"]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Ci([this.inputObj.container],["e-input-focus"]))},t.prototype.destroy=function(){$a.call(this);for(var t=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-valuenow","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.inputObj.container.insertAdjacentElement("afterend",this.element),Ti(this.inputObj.container),e.prototype.destroy.call(this)},Rl([os(null)],t.prototype,"cssClass",void 0),Rl([os(null)],t.prototype,"width",void 0),Rl([os(null)],t.prototype,"placeholder",void 0),Rl([os("Never")],t.prototype,"floatLabelType",void 0),Rl([os({})],t.prototype,"htmlAttributes",void 0),Rl([os(!0)],t.prototype,"enabled",void 0),Rl([os(!1)],t.prototype,"readonly",void 0),Rl([os(!1)],t.prototype,"showClearButton",void 0),Rl([os(!1)],t.prototype,"enablePersistence",void 0),Rl([os(null)],t.prototype,"mask",void 0),Rl([os("_")],t.prototype,"promptChar",void 0),Rl([os(null)],t.prototype,"value",void 0),Rl([os(null)],t.prototype,"customCharacters",void 0),Rl([cs()],t.prototype,"created",void 0),Rl([cs()],t.prototype,"destroyed",void 0),Rl([cs()],t.prototype,"change",void 0),Rl([cs()],t.prototype,"focus",void 0),Rl([cs()],t.prototype,"blur",void 0),t=Rl([ps],t)}(Ns),Fl=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),jl=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Vl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fl(t,e),jl([os("None")],t.prototype,"placement",void 0),jl([os(10)],t.prototype,"largeStep",void 0),jl([os(1)],t.prototype,"smallStep",void 0),jl([os(!1)],t.prototype,"showSmallTicks",void 0),jl([os(null)],t.prototype,"format",void 0),t}(Ls),zl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fl(t,e),jl([os(null)],t.prototype,"color",void 0),jl([os(null)],t.prototype,"start",void 0),jl([os(null)],t.prototype,"end",void 0),t}(Ls),_l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fl(t,e),jl([os(!1)],t.prototype,"enabled",void 0),jl([os(null)],t.prototype,"minStart",void 0),jl([os(null)],t.prototype,"minEnd",void 0),jl([os(null)],t.prototype,"maxStart",void 0),jl([os(null)],t.prototype,"maxEnd",void 0),jl([os(!1)],t.prototype,"startHandleFixed",void 0),jl([os(!1)],t.prototype,"endHandleFixed",void 0),t}(Ls),ql=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fl(t,e),jl([os("")],t.prototype,"cssClass",void 0),jl([os("Before")],t.prototype,"placement",void 0),jl([os("Focus")],t.prototype,"showOn",void 0),jl([os(!1)],t.prototype,"isVisible",void 0),jl([os(null)],t.prototype,"format",void 0),t}(Ls),Wl="e-slider",Ul="e-rtl",Gl="e-slider-input",Yl="e-control-wrapper",Xl="e-handle",Kl="e-range",Zl="e-slider-button",Ql="e-first-button",Jl="e-second-button",$l="e-scale",eh="e-tick",th="e-large",ih="e-tick-value",sh="e-slider-tooltip",nh="e-slider-hover",oh="e-handle-first",rh="e-handle-second",ah="e-disabled",lh="e-slider-container",hh="e-slider-horizontal-before",ch="e-slider-horizontal-after",ph="e-slider-vertical-before",dh="e-slider-vertical-after",uh="e-material-tooltip-open",mh="e-tooltip-active",fh="e-material-slider",gh="e-slider-track",vh="e-slider-horizantal-color",yh="e-slider-vertical-color",bh="e-handle-focused",Ch="e-vertical",Sh="e-horizontal",xh="e-handle-start",wh="e-material-tooltip-start",Eh="e-tab-handle",kh="e-button-icon",Th="e-small-size",Lh="e-tick-pos",Dh="e-first-tick",Ih="e-last-tick",Oh="e-slider-btn",Ah="e-tab-track",Mh="e-tab-range",Ph="e-handle-active",Nh="e-material-handle",Rh="e-material-range",Bh="e-material-default",Hh="e-material-tooltip-show",Fh="e-material-tooltip-hide",jh="e-read-only",Vh="e-limits",zh="e-limit-bar",_h="e-limit-first",qh="e-limit-second",Wh="e-drag-horizontal",Uh="e-drag-vertical",Gh=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.horDir="left",s.verDir="bottom",s.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},s.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},s.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",s.customAriaText=null,s.drag=!0,s.initialTooltip=!0,s}return Fl(t,e),t.prototype.preRender=function(){this.l10n=new Js("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=Mi(this.element,"form");e?(this.isForm=!0,ae(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!ae(this.formResetValue)&&"object"==typeof this.formResetValue?ae(this.formResetValue)&&(this.formResetValue=parseFloat(ge(this.min))):this.formResetValue=[parseFloat(ge(this.min)),parseFloat(ge(this.max))],this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new Qe(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=ae(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=ae(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,t){var i=null,s=null;if(e||0===e){i=this.formatNumber(e);var n=this.numberOfDecimals(e);s=this.internationalization.getNumberFormat(t)(this.makeRoundNumber(e,n))}return{elementVal:i,formatString:s}},t.prototype.formatNumber=function(e){var t=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var t=e.toString().split(".")[1];return t&&t.length?t.length:0},t.prototype.makeRoundNumber=function(e,t){var i=t||0;return Number(e.toFixed(i))},t.prototype.fractionalToInteger=function(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;for(var t=1,i=0;i<this.noOfDecimals;i++)t*=10;return e=Number((e*t).toFixed(0))},t.prototype.render=function(){ye()&&this.isServerRendered||this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete()},t.prototype.initialize=function(){bi([this.element],Wl),this.setCSSClass()},t.prototype.setElementWidth=function(e){ae(e)||("number"==typeof e?this.sliderContainer.style.width=ge(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:ge(e)))},t.prototype.setCSSClass=function(e){e&&Ci([this.element],e.split(" ")),this.cssClass&&bi([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?(Ci([this.sliderContainer],[ah]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove(ah),this.wireEvents()):(bi([this.sliderContainer],[ah]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add(ah),this.unwireEvents())},t.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},t.prototype.initRender=function(){ye()&&this.isServerRendered?(this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input")):(this.sliderContainer=this.createElement("div",{className:lh+" "+Yl}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:gh}),this.element.appendChild(this.sliderTrack)),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),ye()&&this.isServerRendered||(this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:ae(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:Gl}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput)),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=ae(this.value)?parseFloat(ge(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(ge(this.value.toString()))):[this.checkHandleValue(parseFloat(ge(this.value[0].toString()))),this.checkHandleValue(parseFloat(ge(this.value[1].toString())))],this.previousChanged=this.previousVal,ae(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),ye()&&this.isServerRendered||(this.enabled?Ci([this.sliderContainer],[ah]):bi([this.sliderContainer],[ah]),this.readonly?bi([this.sliderContainer],[jh]):Ci([this.sliderContainer],[jh]))},t.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:Kl}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&("Horizontal"===this.orientation?this.rangeBar.classList.add(Wh):this.rangeBar.classList.add(Uh)))},t.prototype.createLimitBar=function(){if(ye()&&this.isServerRendered)this.limitBarFirst=this.element.querySelectorAll(".e-limits")[0],"Range"===this.type&&(this.limitBarSecond=this.element.querySelectorAll(".e-limit-second")[0]);else{var e="Range"!==this.type?zh:_h;e+=" "+Vh,this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:qh+" "+Vh}}),this.element.appendChild(this.limitBarSecond))}},t.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove(Ch),this.sliderContainer.classList.add(Sh),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(Sh),this.sliderContainer.classList.add(Ch),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var t=this,i=this.min,s=this.max;(!ae(this.customValues)&&this.customValues.length>0&&(i=this.customValues[0],s=this.customValues[this.customValues.length-1]),"Range"!==this.type)?Di(e,{"aria-valuemin":i.toString(),"aria-valuemax":s.toString()}):(!ae(this.customValues)&&this.customValues.length>0?[[i.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),s.toString()]]:[[i.toString(),this.value[1].toString()],[this.value[0].toString(),s.toString()]]).forEach(function(e,i){var s=0===i?t.firstHandle:t.secondHandle;s&&Di(s,{"aria-valuemin":e[0],"aria-valuemax":e[1]})})},t.prototype.createSecondHandle=function(){ye()&&this.isServerRendered?this.secondHandle=this.element.querySelector(".e-handle-second"):(this.secondHandle=this.createElement("div",{attrs:{class:Xl,role:"slider",tabIndex:"0"}}),this.secondHandle.classList.add(rh),this.element.appendChild(this.secondHandle))},t.prototype.createFirstHandle=function(){ye()&&this.isServerRendered?this.firstHandle=this.element.querySelector(".e-handle-first"):(this.firstHandle=this.createElement("div",{attrs:{class:Xl,role:"slider",tabIndex:"0"}}),this.firstHandle.classList.add(oh),this.element.appendChild(this.firstHandle)),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:Xl+" "+Nh}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(Ct.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),Ct.remove(this.firstHandle,"transitionend",this.transitionEnd),Ct.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),Ct.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(Ct.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),Ct.add(this.firstHandle,"transitionend",this.transitionEnd,this),Ct.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),Ct.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(Ct.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),Ct.remove(this.secondHandle,"transitionend",this.transitionEnd),Ct.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),Ct.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(Ct.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),Ct.add(this.secondHandle,"transitionend",this.transitionEnd,this),Ct.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),Ct.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"](xh),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"](xh),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"](wh)))},t.prototype.transitionEnd=function(e){"transform"!==e.propertyName&&(this.handleStart(),this.getHandle().style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(bh)&&this.firstHandle.classList.remove(bh),"Range"===this.type&&this.secondHandle.classList.contains(bh)&&this.secondHandle.classList.remove(bh)},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?this.firstHandle.classList.add(bh):this.secondHandle.classList.add(bh),Ct.add(document,"mousemove touchmove",this.sliderBarMove,this),Ct.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget)},t.prototype.handleLeave=function(e){!this.tooltip.isVisible||"Hover"!==this.tooltip.showOn||e.currentTarget.classList.contains(bh)||e.currentTarget.classList.contains(Eh)||this.closeTooltip()},t.prototype.setHandler=function(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){if(!ye()||!this.isServerRendered){this.enableRtl&&"Vertical"!==this.orientation?bi([this.sliderContainer],Ul):Ci([this.sliderContainer],Ul);var e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(Ri(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&Ri(this.secondHandle,{top:"",left:"auto"}))}this.setBarColor()},t.prototype.tooltipValue=function(){var e,t=this,i={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,ye()&&this.isServerRendered?i.text=this.formatContent(this.tooltipFormatInfo,!1):(this.setTooltipContent(),i.text=e=this.tooltipObj.content),this.trigger("tooltipChange",i,function(i){t.addTooltipClass(i.text),e!==i.text&&(t.customAriaText=i.text,t.tooltipObj.content=i.text,t.setAriaAttrValue(t.firstHandle),"Range"===t.type&&t.setAriaAttrValue(t.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=e},t.prototype.formatContent=function(e,t){var i="",s=this.handleVal1,n=this.handleVal2;return!ae(this.customValues)&&this.customValues.length>0&&(s=this.customValues[this.handleVal1],n=this.customValues[this.handleVal2]),t?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?ae(this.tooltip)||ae(this.tooltip.format)?n.toString()+" - "+s.toString():this.formatString(n,e).elementVal+" - "+this.formatString(s,e).elementVal:ae(this.tooltip)||ae(this.tooltip.format)?s.toString()+" - "+n.toString():this.formatString(s,e).elementVal+" - "+this.formatString(n,e).elementVal:ae(s)||(i=ae(this.tooltip)||ae(this.tooltip.format)?s.toString():this.formatString(s,e).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?ae(e.format)?n.toString()+" - "+s.toString():this.formatString(n,e).formatString+" - "+this.formatString(s,e).formatString:ae(e.format)?s.toString()+" - "+n.toString():this.formatString(s,e).formatString+" - "+this.formatString(n,e).formatString:ae(s)||(i=ae(e.format)?s.toString():this.formatString(s,e).formatString),i)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var t=e.toString().length;if(this.tooltipElement){i=t>4?{oldCss:Bh,newCss:Rh}:{oldCss:Rh,newCss:Bh};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=t>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var i=t>4?Rh:Bh;this.tooltipObj.cssClass=sh+" "+i}}},t.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&bi([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(e){return e})),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(Fh),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){var t=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-t},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:t},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-t},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:t},!1)}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),Ct.add(document,"mousemove touchmove",this.sliderBarMove,this),Ct.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?Ct.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):Ct.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var t;switch(e){case"TopCenter":t=hh;break;case"BottomCenter":t=ch;break;case"LeftCenter":t=ph;break;case"RightCenter":t=dh}return t},t.prototype.getTooltipTransformProperties=function(e){var t;if(this.tooltipElement){var i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;t="Horizontal"===this.orientation?e===hh?{rotate:"rotate(45deg)",translate:"translateY("+i+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-i+"px)"}:e===ph?{rotate:"rotate(-45deg)",translate:"translateX("+i+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-i+"px)"}}return t},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var t=this.tooltipElement.firstElementChild;t.classList.remove(Fh),t.classList.add(Hh),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(uh),this.materialHandle.style.transform="scale(0)",t.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){e.tooltipElement.style.transition=e.transition.handle},2500):setTimeout(function(){e.tooltipElement.style.transition="none"},2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var t=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,t.classList.remove(Hh),t.classList.add(Fh),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(uh),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){e.tooltipElement.style.transition="none"},2500)}},t.prototype.checkTooltipPosition=function(e){var t=this.tooltipPositionCalculation(e.collidedPosition);void 0!==this.tooltipCollidedPosition&&this.tooltipCollidedPosition===e.collidedPosition&&e.element.classList.contains(t)||(this.isMaterialTooltip&&(void 0!==t&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(t),this.previousTooltipClass=t),e.element.style.transform&&e.element.classList.contains(uh)&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=e.translate+" scale(0.01)":this.tooltipElement.style.transform=e.translate+" "+e.rotate+" scale(0.01)"},t.prototype.renderTooltip=function(){this.tooltipObj=new Xr({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4,cssClass:sh,height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){var e=this.isMaterialTooltip?"Always":"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:e}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(e){ae(e)||(e.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add(fh),ye()||this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){ye()&&this.isServerRendered?(this.firstBtn=this.element.parentElement.querySelector(".e-slider-button.e-first-button"),this.secondBtn=this.element.parentElement.querySelector(".e-slider-button.e-second-button")):(this.firstBtn=this.createElement("div",{className:Zl+" "+Ql}),this.firstBtn.appendChild(this.createElement("span",{className:kh})),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:Zl+" "+Jl}),this.secondBtn.appendChild(this.createElement("span",{className:kh})),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(Oh),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle())},t.prototype.buttonTitle=function(){var e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");Di(e?this.secondBtn:this.firstBtn,{"aria-label":t,title:t}),Di(e?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})},t.prototype.buttonFocusOut=function(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var t,i=this.handleValueUpdate(),s=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains(Ql)||e.target.classList.contains(Ql)?t=s?this.add(i,parseFloat(this.step.toString()),!0):this.add(i,parseFloat(this.step.toString()),!1):(e.target.parentElement.classList.contains(Jl)||e.target.classList.contains(Jl))&&(t=s?this.add(i,parseFloat(this.step.toString()),!1):this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),t>=this.min&&t<=this.max&&(this.changeHandleValue(t),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),"mousedown"!==e.type&&"touchstart"!==e.type||(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var t=4;return!ae(this.customValues)&&this.customValues.length>0&&(e>4&&(t=3),e>7&&(t=2),e>14&&(t=1),e>28&&(t=0)),t},t.prototype.renderScale=function(){var e=0,t="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),ye()&&this.isServerRendered?this.ul=this.element.querySelector("ul"):this.ul=this.createElement("ul",{className:$l+" e-"+t+"-scale "+eh+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",bt.isAndroid&&"h"===t&&this.ul.classList.add(Lh);var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(ge(this.step))):i=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(ge(this.max))-parseFloat(ge(this.min));var s,n=this.fractionalToInteger(this.min),o=this.fractionalToInteger(this.max),r=this.fractionalToInteger(i),a=!ae(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(a),h=!ae(this.customValues)&&this.customValues.length>0?a*l+a:Math.abs((o-n)/r);ye()&&this.isServerRendered||this.element.appendChild(this.ul);var c=parseFloat(this.min.toString());"v"===t&&(c=parseFloat(this.max.toString()));var p,d=0,u=100/h;u===1/0&&(u=5);for(var m=0,f=!ae(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,g=0;m<=h;m++){if(s=this.createElement("li",{attrs:{class:eh,role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!ae(this.customValues)&&this.customValues.length>0)(p=m%(l+1)==0)&&("h"===t?(c=this.customValues[g],g++):(c=this.customValues[f],f--),s.setAttribute("title",c.toString()));else if(s.setAttribute("title",c.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))p="h"===t?(c-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(c-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var v=this.fractionalToInteger(this.ticks.largeStep),y=this.fractionalToInteger(c);p="h"===t?(y-n)%v==0:Math.abs(y-parseFloat(o.toString()))%v==0}p&&s.classList.add(th),"h"===t?s.style.width=u+"%":s.style.height=u+"%";var b=p?"Both"===this.ticks.placement?2:1:0;if(p){for(var C=0;C<b;C++)this.createTick(s,c,u);ye()&&this.isServerRendered&&ae(this.customValues)&&(this.updateTicksValues(c,this.ul.children[e]),e++)}else ae(this.customValues)&&(this.formatTicksValue(s,c),ye()&&this.isServerRendered&&ae(this.customValues)&&(this.updateTicksValues(c,this.ul.children[e]),e++));ye()&&this.isServerRendered||this.ul.appendChild(s),this.tickElementCollection.push(s);var S=void 0;ae(this.customValues)&&(S=this.numberOfDecimals(i)>this.numberOfDecimals(c)?this.numberOfDecimals(i):this.numberOfDecimals(c),c="h"===t?this.makeRoundNumber(c+i,S):this.makeRoundNumber(c-i,S),d=this.makeRoundNumber(d+i,S))}this.ticksAlignment(t,u)},t.prototype.updateTicksValues=function(e,t){if(t.childElementCount>0)for(var i=0;i<t.childElementCount;i++)this.blazortTicksValue(t,e,t.children[i]);else this.blazortTicksValue(t,e,null)},t.prototype.blazortTicksValue=function(e,t,i){var s=this,n=this.formatNumber(t),o={value:t,text:ae(this.ticks)||ae(this.ticks.format)?n:this.formatString(t,this.ticksFormatInfo).formatString,tickElement:e};this.trigger("renderingTicks",o,function(t){e.setAttribute("title",t.text.toString()),i&&(s.enableHtmlSanitizer?i.innerHTML=ln.sanitize(t.text.toString()):i.innerHTML=t.text.toString())})},t.prototype.ticksAlignment=function(e,t,i){void 0===i&&(i=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(Dh),this.lastChild.classList.add(Ih),this.sliderContainer.classList.add($l+"-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=t/2+"%",this.lastChild.style.width=t/2+"%"):(this.firstChild.style.height=t/2+"%",this.lastChild.style.height=t/2+"%");var s={ticksWrapper:this.ul,tickElements:this.tickElementCollection};i&&this.trigger("renderedTicks",s),this.scaleAlignment()},t.prototype.createTick=function(e,t,i){var s=this.createElement("span",{className:ih+" "+eh+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(s),ae(this.customValues)?this.formatTicksValue(e,t,s,i):this.enableHtmlSanitizer?s.innerHTML=ln.sanitize(t.toString()):s.innerHTML=t.toString()},t.prototype.formatTicksValue=function(e,t,i,s){var n=this,o=this.formatNumber(t),r={value:t,text:ae(this.ticks)||ae(this.ticks.format)?o:this.formatString(t,this.ticksFormatInfo).formatString,tickElement:e};this.trigger("renderingTicks",r,function(t){if(e.setAttribute("title",t.text.toString()),i&&(n.enableHtmlSanitizer?i.innerHTML=ln.sanitize(t.text.toString()):i.innerHTML=t.text.toString()),!ae(n.renderingTicks)&&ye()){var o="Horizontal"===n.orientation?"h":"v";n.ticksAlignment(o,s,!1)}})},t.prototype.scaleAlignment=function(){this.tickValuePosition();this.orientation;"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(Th):this.sliderContainer.classList.remove(Th):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(Th):this.sliderContainer.classList.remove(Th)},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,i=this.firstChild.getBoundingClientRect(),s=this.ticks.smallStep,n=Math.abs(parseFloat(ge(this.max))-parseFloat(ge(this.min)))/s;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var o,r=[this.sliderContainer.querySelectorAll("."+eh+"."+th+" ."+ih)];o="Both"===this.ticks.placement?[].slice.call(r[0],2):[].slice.call(r[0],1);for(var a="Vertical"===this.orientation?2*i.height:2*i.width,l=0;l<this.firstChild.children.length;l++)"Vertical"===this.orientation?ye()&&this.isServerRendered||(this.firstChild.children[l].style.top=-e.height/2+"px"):this.enableRtl?this.firstChild.children[l].style.left=(a-this.firstChild.children[l].getBoundingClientRect().width)/2+"px":this.firstChild.children[l].style.left=-e.width/2+"px";for(l=0;l<o.length;l++)t=o[l].getBoundingClientRect(),"Vertical"===this.orientation?ye()&&this.isServerRendered||Ri(o[l],{top:(a-t.height)/2+"px"}):Ri(o[l],{left:(a-t.width)/2+"px"});if(this.enableRtl&&this.lastChild.children.length&&0!==n&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(ye()||(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px"))),0===n&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove(Ih),this.firstChild.style.right=this.firstHandle.style.right,ye()||(this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px"))):(this.firstChild.classList.remove(Ih),ye()||(this.firstChild.style.left=this.firstHandle.style.left))),ye()&&this.isServerRendered||"Vertical"===this.orientation&&this.firstChild.classList.remove(Ih)),ye()&&this.isServerRendered){var h=void 0;null!=this.firstChild&&(h="Horizontal"===this.orientation?{firstTickPostion:this.firstChild.children[0].style.left}:{firstTickPostion:-e.height/2+"px"}),null!=o[0]&&(h="Horizontal"===this.orientation?{otherTicksPosition:o[0].style.left}:{otherTicksPosition:(a-t.height)/2+"px"}),null!=this.firstChild&&null!=o[0]&&(h="Horizontal"===this.orientation?{firstTickPostion:this.firstChild.children[0].style.left,otherTicksPosition:o[0].style.left}:{firstTickPostion:-e.height/2+"px",otherTicksPosition:(a-t.height)/2+"px"}),this.interopAdaptor.invokeMethodAsync("SliderTicksData",h)}},t.prototype.setAriaAttrValue=function(e){var t,i=!ae(this.ticks)&&!ae(this.ticks.format),s=i?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),n=i?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);t=2===(s=this.customAriaText?this.customAriaText:s).split(" - ").length?s.split(" - "):[s,s],this.setAriaAttributes(e),"Range"!==this.type?Di(e,{"aria-valuenow":n,"aria-valuetext":s}):this.enableRtl?e===this.firstHandle?Di(e,{"aria-valuenow":n.split(" - ")[1],"aria-valuetext":t[1]}):Di(e,{"aria-valuenow":n.split(" - ")[0],"aria-valuetext":t[0]}):e===this.firstHandle?Di(e,{"aria-valuenow":n.split(" - ")[0],"aria-valuetext":t[0]}):Di(e,{"aria-valuenow":n.split(" - ")[1],"aria-valuetext":t[1]})},t.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},t.prototype.getLimitCorrectedValues=function(e){return e="MinRange"===this.type||"Default"===this.type?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){var t;this.focusSliderElement();var i=this.enableRtl&&"Vertical"!==this.orientation,s=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains(Ql)?t=i?this.add(s,parseFloat(this.step.toString()),!0):this.add(s,parseFloat(this.step.toString()),!1):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains(Jl)?t=i?this.add(s,parseFloat(this.step.toString()),!1):this.add(s,parseFloat(this.step.toString()),!0):33===e.keyCode||e.currentTarget.classList.contains(Ql)?t=i?this.add(s,parseFloat(this.ticks.largeStep.toString()),!1):this.add(s,parseFloat(this.ticks.largeStep.toString()),!0):34===e.keyCode||e.currentTarget.classList.contains(Jl)?t=i?this.add(s,parseFloat(this.ticks.largeStep.toString()),!0):this.add(s,parseFloat(this.ticks.largeStep.toString()),!1):36===e.keyCode?t=parseFloat(this.min.toString()):35===e.keyCode&&(t=parseFloat(this.max.toString())),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),this.changeHandleValue(t),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(Eh)||this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),e.currentTarget.classList.contains(Ql)&&Ct.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains(Jl)&&Ct.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains(uh)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains(Ql)&&Ct.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains(Jl)&&Ct.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Ri(this.rangeBar,{width:ae(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Ri(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",Ri(this.rangeBar,{height:ae(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",Ri(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),e=this.checkHandlePosition(e)},t.prototype.setLimitBarPositions=function(e,t,i,s){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.bottom=e+"px",this.limitBarFirst.style.height=t-e+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=s-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=s-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=s-i+"px"))},t.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t),this.setLimitBarPositions(e,t)}else if("Range"===this.type){var i=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i);var s=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];s=this.checkValidValueAndPos(s);var n=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];n=this.checkValidValueAndPos(n);var o=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o),this.setLimitBarPositions(i,s,n,o)}},t.prototype.getLimitValueAndPosition=function(e,t,i,s){return ae(t)&&(t=this.min,ae(e)&&s&&(e=t)),ae(i)&&(i=this.max,ae(e)&&s&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!ae(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=ae(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,ae(this.activeHandle)?"Range"===this.type?this.activeHandle=2:this.activeHandle=1:this.activeHandle=this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){null!==this.value&&"object"==typeof this.value||(this.value=[parseFloat(ge(this.min)),parseFloat(ge(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=co(this.element)+"")},t.prototype.setHandlePosition=function(e){var t,i=this,s=1===this.activeHandle?this.handlePos1:this.handlePos2;t=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),t.forEach(function(e){"Horizontal"===i.orientation?i.enableRtl?e.style.right=s+"px":e.style.left=s+"px":e.style.bottom=s+"px",ye()&&i.isServerRendered&&e.style.removeProperty("visibility")}),this.changeEvent("change",e)},t.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,t){var i="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i===this.value||this.isMaterialTooltip&&this.initialTooltip||(this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var s=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:s},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,t){var i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(ye()&&this.isServerRendered||this.tooltipValue(),i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:this.tooltipObj.content,isInteracted:!ae(t)}):i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:ae(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!ae(t)},i},t.prototype.setPreviousVal=function(e,t){"change"===e?this.previousVal=t:this.previousChanged=t},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.enableRtl&&"Vertical"!==this.orientation||this.rtl?this.value=[e[1],e[0]]:this.value=[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,t=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=t[0],this.handlePos2=t[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var t;return e=100*(e-parseFloat(ge(this.min)))/(parseFloat(ge(this.max))-parseFloat(ge(this.min))),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat(ge(this.max))===parseFloat(ge(this.min))&&(t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),t},t.prototype.checkHandleValue=function(e){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(ge(this.max));var t=this.tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},t.prototype.reposition=function(){var e=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Ri(this.rangeBar,{width:ae(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Ri(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",Ri(this.rangeBar,{height:ae(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.handlePos1+"px",Ri(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(ye()||(this.removeElement(this.ul),this.ul=void 0),this.renderScale(),ye()&&this.tickValuePosition()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){e.firstHandle.style.transition=e.scaleTransform,"Range"===e.type&&(e.secondHandle.style.transition=e.scaleTransform)}),ye()&&this.isServerRendered||this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var t=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(t=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(t=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==t&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var t=e.x-this.element.getBoundingClientRect().left,i=this.element.offsetWidth/100;this.val=t/i}else{var s=e.y-this.element.getBoundingClientRect().top;i=this.element.offsetHeight/100;this.val=100-s/i}var n=this.stepValueCalculation(this.val);return n<0?n=0:n>100&&(n=100),this.enableRtl&&"Vertical"!==this.orientation&&(n=100-n),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(n/100):this.element.getBoundingClientRect().height*(n/100)},t.prototype.stepValueCalculation=function(e){0===this.step&&(this.step=1);var t=parseFloat(ge(this.step))/((parseFloat(ge(this.max))-parseFloat(ge(this.min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},t.prototype.add=function(e,t,i){var s=Math.pow(10,3);return i?(Math.round(e*s)+Math.round(t*s))/s:(Math.round(e*s)-Math.round(t*s))/s},t.prototype.positionToValue=function(e){var t,i=parseFloat(ge(this.max))-parseFloat(ge(this.min));return t="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*i:e/this.element.getBoundingClientRect().height*i,this.add(t,parseFloat(this.min.toString()),!0)},t.prototype.sliderBarClick=function(e){var t;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var i=this.xyToPosition(t),s=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled)s=(n=this.getLimitValueAndPosition(s,this.limits.maxStart,this.limits.maxEnd))[0],i=n[1];this.secondHandle.classList.add(Ph),this.handlePos2=this.preHandlePos2=i,this.handleVal2=s}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){var n;if(this.limits.enabled)s=(n=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd))[0],i=n[1];this.firstHandle.classList.add(Ph),this.handlePos1=this.preHandlePos1=i,this.handleVal1=s}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(mh);var o=this.element.querySelector("."+Eh);o&&this.getHandle()!==o&&o.classList.remove(Eh);var r=1===this.activeHandle?this.firstHandle:this.secondHandle;if(e.target===r)return!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(Eh)||this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(s)){var a=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=a.handle,"Default"!==this.type&&(this.rangeBar.style.transition=a.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var t,i,s,n,o;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(n=(t=[e.clientX,e.clientY])[0],o=t[1]):(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(s=this.enableRtl?{x:n+this.secondPartRemain,y:o+this.secondPartRemain}:{x:n-this.firstPartRemain,y:o+this.secondPartRemain},this.handlePos1=this.xyToPosition(s),this.handleVal1=this.positionToValue(this.handlePos1),s=this.enableRtl?{x:n-this.firstPartRemain,y:o-this.firstPartRemain}:{x:n+this.secondPartRemain,y:o-this.firstPartRemain},this.handlePos2=this.xyToPosition(s),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){var r=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=r[0],this.handlePos1=r[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),r=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=r[0],this.handlePos2=r[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove(Ph),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove(Ph)),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(mh)),Ct.remove(document,"mousemove touchmove",this.sliderBarMove),Ct.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){var t;"touchmove"!==e.type&&e.preventDefault(),t="mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var i=this.xyToPosition(t),s=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var n=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);i=n[1],s=n[0]}this.handlePos1=i,this.handleVal1=s}this.firstHandle.classList.add(Ph)}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add(Ph),!(this.limits.enabled&&this.limits.startHandleFixed||(i>this.handlePos2&&(i=this.handlePos2,s=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled)s=(o=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd))[0],i=o[1];this.handlePos1=this.preHandlePos1=i,this.handleVal1=s,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add(Ph),!(this.limits.enabled&&this.limits.endHandleFixed||(i<this.handlePos1&&(i=this.handlePos1,s=this.handleVal1),i===this.preHandlePos2)))){var o;if(this.limits.enabled)s=(o=this.getLimitValueAndPosition(s,this.limits.maxStart,this.limits.maxEnd))[0],i=o[1];this.handlePos2=this.preHandlePos2=i,this.handleVal2=s,this.activeHandle=2}this.checkRepeatedValue(s)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(Eh)||this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged||(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),Ct.remove(document,"mousemove touchmove",this.dragRangeBarMove),Ct.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}},t.prototype.wireButtonEvt=function(e){e?(Ct.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),Ct.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),Ct.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),Ct.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),Ct.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),Ct.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),Ct.remove(this.firstBtn,"focusout",this.sliderFocusOut),Ct.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(Ct.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),Ct.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),Ct.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),Ct.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),Ct.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),Ct.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),Ct.add(this.firstBtn,"focusout",this.sliderFocusOut,this),Ct.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var t,i;if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){var s=void 0,n=void 0;"mousedown"===e.type?(s=(t=[e.clientX,e.clientY])[0],n=t[1]):"touchstart"===e.type&&(s=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],n=i[1]),"Horizontal"===this.orientation?(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-s):(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-n),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var o=this.element.querySelector("."+Eh);o&&o.classList.remove(Eh),Ct.add(document,"mousemove touchmove",this.dragRangeBarMove,this),Ct.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e)},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(Ct.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&Ct.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),Ct.add(this.sliderContainer,"keydown",this.keyDown,this),Ct.add(this.sliderContainer,"keyup",this.keyUp,this),Ct.add(this.element,"focusout",this.sliderFocusOut,this),Ct.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&Ct.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){Ct.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&Ct.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),Ct.remove(this.sliderContainer,"keydown",this.keyDown),Ct.remove(this.sliderContainer,"keyup",this.keyUp),Ct.remove(this.element,"focusout",this.sliderFocusOut),Ct.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),Ct.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(9===e.keyCode&&e.target.classList.contains(Xl)&&(this.focusSliderElement(),!e.target.classList.contains(Eh))){this.element.querySelector("."+Eh)&&this.element.querySelector("."+Eh).classList.remove(Eh),e.target.classList.add(Eh);var t=e.target.parentElement;t===this.element&&(t.querySelector("."+gh).classList.add(Ah),"Range"!==this.type&&"MinRange"!==this.type||t.querySelector("."+Kl).classList.add(Mh)),"Range"===this.type&&(e.target.previousSibling.classList.contains(Xl)?this.activeHandle=2:this.activeHandle=1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){ae(e)||("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type?this.sliderContainer.classList.add(nh):this.sliderContainer.classList.remove(nh))},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.element.querySelector("."+Eh)&&this.element.querySelector("."+Eh).classList.remove(Eh),this.element.querySelector("."+Ah)&&(this.element.querySelector("."+Ah).classList.remove(Ah),"Range"!==this.type&&"MinRange"!==this.type||!this.element.querySelector("."+Mh)||this.element.querySelector("."+Mh).classList.remove(Mh)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,t){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(fh),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!ae(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?ae(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):ae(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),(ye()||this.isServerRendered)&&"tooltip"===t||this.updateConfig()},t.prototype.changeRtl=function(){if(this.enableRtl||"Range"!==this.type||(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&"Vertical"!==this.orientation;Di(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),Di(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&(ye()||this.refreshTooltip(this.tooltipTarget)),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?(ae(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),ae(this.limitBarFirst)&&ae(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(ae(this.limitBarFirst)||Ti(this.limitBarFirst),ae(this.limitBarSecond)||Ti(this.limitBarSecond))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),Ci([this.sliderContainer],[ah]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),ye()||this.isServerRendered||(this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),Ti(this.sliderContainer)),this.tooltip.isVisible&&this.tooltipObj.destroy(),ye()&&this.isMaterialTooltip&&!ae(this.materialHandle)&&this.materialHandle.remove(),ye()||this.isServerRendered||(this.element.innerHTML="")},t.prototype.onPropertyChanged=function(e,t){for(var i=this,s=0,n=Object.keys(e);s<n.length;s++){var o=n[s];switch(o){case"cssClass":this.setCSSClass(t.cssClass);break;case"value":if(e&&t){var r=ae(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:r},!0),ae(t.value)||t.value.toString()===r.toString()||(this.setValue(),ye()&&this.isServerRendered||this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(ae(e.value)||t.value[1]===r[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":ye()&&this.isServerRendered&&(this.isServerRendered=!1),this.setMinMaxValue(),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"tooltip":ye()&&this.isServerRendered&&(this.isServerRendered=!1),ae(e.tooltip)||ae(t.tooltip)||this.setTooltip(o),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"type":ye()&&this.isServerRendered&&(this.isServerRendered=!1),ae(t)||!Object.keys(t).length||ae(t.type)||(this.changeSliderType(t.type,o),this.setZindex()),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"enableRtl":ye()&&this.isServerRendered&&(this.isMaterialTooltip&&this.sliderContainer.classList.add(fh),this.isServerRendered=!1),t.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=t.enableRtl,this.changeRtl()),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"limits":this.limitsPropertyChange();break;case"orientation":ye()&&this.isServerRendered&&(this.isServerRendered=!1),this.changeOrientation(),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"ticks":ae(this.sliderContainer.querySelector("."+$l))||(ye()&&this.isServerRendered||Ti(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(e){e.match(/e-scale-/)&&i.sliderContainer.classList.remove(e)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):ye()&&this.isServerRendered||this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(Oh),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition()),ye()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(fh);break;case"enabled":this.setEnabled(),ye()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(fh);break;case"readonly":this.setReadOnly(),ye()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(fh);break;case"customValues":ye()&&this.isServerRendered&&(this.isServerRendered=!1),this.setValue(),this.reposition(),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"colorRange":ye()&&this.isServerRendered&&(this.isServerRendered=!1),this.reposition(),ye()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(jh)):(this.wireEvents(),this.sliderContainer.classList.remove(jh))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),ye()||this.refreshTooltip(this.tooltipTarget),ae(this.sliderContainer.querySelector("."+$l))||this.ul&&(Ti(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(t){t.match(/e-scale-/)&&e.sliderContainer.classList.remove(t)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,ae(this.ticks)||"None"===this.ticks.placement||(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),this.isMaterial||ae(this.ticks)||"Both"!==this.ticks.placement||(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,t,i=this.sliderTrack.lastElementChild;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(var s=0;s<this.colorRange.length;s++)if(!ae(this.colorRange[s].start)&&!ae(this.colorRange[s].end)&&this.colorRange[s].end>this.colorRange[s].start){this.colorRange[s].start<this.min&&(this.colorRange[s].start=this.min),this.colorRange[s].end>this.max&&(this.colorRange[s].end=this.max);var n=this.checkHandlePosition(this.colorRange[s].start),o=this.checkHandlePosition(this.colorRange[s].end),r=this.createElement("div");r.style.backgroundColor=this.colorRange[s].color,r.style.border="1px solid "+this.colorRange[s].color,"Horizontal"===this.orientation?(t=vh,e=this.enableRtl?ae(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[s].end):this.checkHandlePosition(this.customValues.length-this.colorRange[s].end-1):this.checkHandlePosition(this.colorRange[s].start),r.style.width=o-n+"px",r.style.left=e+"px"):(t=yh,e=this.checkHandlePosition(this.colorRange[s].start),r.style.height=o-n+"px",r.style.bottom=e+"px"),r.classList.add(t),this.sliderTrack.appendChild(r)}},t.prototype.getModuleName=function(){return"slider"},jl([os(null)],t.prototype,"value",void 0),jl([os(null)],t.prototype,"customValues",void 0),jl([os(1)],t.prototype,"step",void 0),jl([os(null)],t.prototype,"width",void 0),jl([os(0)],t.prototype,"min",void 0),jl([os(100)],t.prototype,"max",void 0),jl([os(!1)],t.prototype,"readonly",void 0),jl([os("Default")],t.prototype,"type",void 0),jl([ls([{}],zl)],t.prototype,"colorRange",void 0),jl([rs({},Vl)],t.prototype,"ticks",void 0),jl([rs({},_l)],t.prototype,"limits",void 0),jl([os(!0)],t.prototype,"enabled",void 0),jl([rs({},ql)],t.prototype,"tooltip",void 0),jl([os(!1)],t.prototype,"showButtons",void 0),jl([os(!0)],t.prototype,"enableAnimation",void 0),jl([os("Horizontal")],t.prototype,"orientation",void 0),jl([os("")],t.prototype,"cssClass",void 0),jl([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),jl([cs()],t.prototype,"created",void 0),jl([cs()],t.prototype,"change",void 0),jl([cs()],t.prototype,"changed",void 0),jl([cs()],t.prototype,"renderingTicks",void 0),jl([cs()],t.prototype,"renderedTicks",void 0),jl([cs()],t.prototype,"tooltipChange",void 0),t=jl([ps],t)}(Ns),Yh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Xh=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Kh={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};!function(e){e[e.Message=0]="Message",e[e.Label=1]="Label"}(Ml||(Ml={}));var Zh=function(e){function t(t,i){var s=e.call(this,i,t)||this;if(s.validated=[],s.errorRules=[],s.allowSubmit=!1,s.required="required",s.infoElement=null,s.inputElement=null,s.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",s.localyMessage={},s.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===s.rules&&(s.rules={}),s.l10n=new Js("formValidator",s.defaultMessages,s.locale),s.locale&&s.localeFunc(),Ue.on("notifyExternalChange",s.afterLocalization,s),t="string"==typeof t?Ii(t,document):t,null!=s.element)return s.element.setAttribute("novalidate",""),s.inputElements=Oi(s.selectQuery,s.element),s.createHTML5Rules(),s.wireEvents(),s}var i;return Yh(t,e),i=t,t.prototype.addRules=function(e,t){e&&(this.rules.hasOwnProperty(e)?re(this.rules[e],t,{}):this.rules[e]=t)},t.prototype.removeRules=function(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(ae(this.rules[e]&&t))return;for(var i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}},t.prototype.validate=function(e){var t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter(function(t){return t.name===e}).length;this.errorRules=[];for(var i=0,s=t;i<s.length;i++){var n=s[i];this.validateRules(n)}return 0===this.errorRules.length},t.prototype.reset=function(){this.element.reset(),this.clearForm()},t.prototype.getInputElement=function(e){return this.inputElement=Ii('[name="'+e+'"]',this.element),this.inputElement},t.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var t=0,i=Oi("."+this.errorClass+", ."+this.validClass,this.element);t<i.length;t++){Ti(i[t])}e.prototype.destroy.call(this),Ue.off("notifyExternalChange",this.afterLocalization)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"locale":this.localeFunc()}}},t.prototype.localeFunc=function(){for(var e=0,t=Object.keys(this.defaultMessages);e<t.length;e++){var i=t[e];this.l10n.setLocale(this.locale);var s=this.l10n.getConstant(i);this.localyMessage[i]=s}},t.prototype.getModuleName=function(){return"formValidator"},t.prototype.afterLocalization=function(e){this.locale=e.locale,this.localeFunc()},t.prototype.refresh=function(){this.unwireEvents(),this.inputElements=Oi(this.selectQuery,this.element),this.wireEvents()},t.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var e=0,t=Oi(this.selectQuery,this.element);e<t.length;e++){var i=t[e];i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}},t.prototype.createHTML5Rules=function(){for(var e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"],i=0,s=this.inputElements;i<s.length;i++){for(var n=s[i],o={},r=0,a=e;r<a.length;r++){var l=a[r];if(null!==n.getAttribute(l))switch(l){case"required":this.defRule(n,o,l,n.required);break;case"data-validation":l=n.getAttribute(l),this.defRule(n,o,l,!0);break;case"type":-1!==t.indexOf(n.type)&&this.defRule(n,o,n.type,!0);break;case"rangeLength":case"range":this.defRule(n,o,l,JSON.parse(n.getAttribute(l)));break;case"equalTo":var h=n.getAttribute(l);this.defRule(n,o,l,h);break;default:"true"===n.getAttribute("data-val")?this.annotationRule(n,o,l,n.getAttribute(l)):this.defRule(n,o,l,n.getAttribute(l))}}0!==Object.keys(o).length&&this.addRules(n.name,o)}},t.prototype.annotationRule=function(e,t,i,s){var n=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],r=n[n.length-1],a=n[n.length-2];if(-1!==o.indexOf(r))switch(r){case"required":this.defRule(e,t,"required",s);break;case"creditcard":this.defRule(e,t,"creditcard",s);break;case"phone":this.defRule(e,t,"tel",s)}else if(-1!==o.indexOf(a))switch(a){case"maxlength":this.defRule(e,t,"maxLength",s);break;case"minlength":this.defRule(e,t,"minLength",s);break;case"range":var l=e.getAttribute("data-val-range-min"),h=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[l,h]);break;case"equalto":var c=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",c[c.length-1]);break;case"regex":this.defRule(e,t,"regex",s)}},t.prototype.defRule=function(e,t,i,s){var n,o=e.getAttribute("data-"+i+"-message"),r=e.getAttribute("data-val-"+i);this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),n=this.getErrorMessage(this.rules[e.name][i],i)),o?s=[s,o]:r?s=[s,r]:n&&(s=[s,n]),t[i]=s},t.prototype.wireEvents=function(){for(var e=0,t=this.inputElements;e<t.length;e++){var s=t[e];i.isCheckable(s)?Ct.add(s,"click",this.clickHandler,this):"SELECT"===s.tagName?Ct.add(s,"change",this.changeHandler,this):(Ct.add(s,"focusout",this.focusOutHandler,this),Ct.add(s,"keyup",this.keyUpHandler,this))}Ct.add(this.element,"submit",this.submitHandler,this),Ct.add(this.element,"reset",this.resetHandler,this)},t.prototype.unwireEvents=function(){for(var e=0,t=this.inputElements;e<t.length;e++){var i=t[e];Ct.clearEvents(i)}Ct.remove(this.element,"submit",this.submitHandler),Ct.remove(this.element,"reset",this.resetHandler)},t.prototype.focusOutHandler=function(e){this.trigger("focusout",e);var t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))},t.prototype.keyUpHandler=function(e){this.trigger("keyup",e);var t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)},t.prototype.clickHandler=function(e){this.trigger("click",e);var t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},t.prototype.changeHandler=function(e){this.trigger("change",e);var t=e.target;this.validate(t.name)},t.prototype.submitHandler=function(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()},t.prototype.resetHandler=function(){this.clearForm()},t.prototype.validateRules=function(e){if(this.rules[e]){var t=Object.keys(this.rules[e]),i=!1,s=!1,n=t.indexOf("validateHidden"),o=t.indexOf("hidden");if(this.getInputElement(e),-1!==o&&(i=!0),-1!==n&&(s=!0),!i||i&&s){-1!==n&&t.splice(n,1),-1!==o&&t.splice(o-1,1),this.getErrorElement(e);for(var r=0,a=t;r<a.length;r++){var l=a[r],h=this.getErrorMessage(this.rules[e][l],l),c={name:e,message:h},p={inputName:e,element:this.inputElement,message:h};if(!this.isValid(e,l)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(c),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(c):this.createErrorElement(e,c.message,this.inputElement),p.errorElement=this.infoElement,p.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,p),this.trigger("validationComplete",p),"required"===l&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),p.status="success",this.trigger("validationComplete",p)}}}},t.prototype.optionalValidationStatus=function(e,t){this.rules[e][this.required]||this.inputElement.value.length||ae(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))},t.prototype.isValid=function(e,t){var s=this.rules[e][t],n=s instanceof Array&&"string"==typeof s[1]?s[0]:s,o=this.rules[e][t],r={value:this.inputElement.value,param:n,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",r),!r.param&&"required"===t||(o&&"function"==typeof o[0]?o[0].call(this,{element:this.inputElement,value:this.inputElement.value}):i.isCheckable(this.inputElement)?"required"!==t||Oi('input[name="'+e+'"]:checked',this.element).length>0:i.checkValidator[t](r))},t.prototype.getErrorMessage=function(e,t){var i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t],s=i.match(/{(\d)}/g);if(!ae(s))for(var n=0;n<s.length;n++){var o=e instanceof Array?e[n]:e;i=i.replace(s[n],o)}return i},t.prototype.createErrorElement=function(e,t,i){var s=yi(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});if(this.errorOption===Ml.Message&&(s.classList.remove(this.errorClass),s.classList.add("e-message"),s=yi(this.errorContainer,{className:this.errorClass,innerHTML:s.outerHTML})),s.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(s);else if(!0===i.hasAttribute("data-msg-containerid")){Ii("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(s)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,s):this.inputElement.parentNode.insertBefore(s,this.inputElement.nextSibling);s.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)},t.prototype.getErrorElement=function(e){return this.infoElement=Ii(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=Ii(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement},t.prototype.removeErrorRules=function(e){for(var t=0;t<this.errorRules.length;t++){this.errorRules[t].name===e&&this.errorRules.splice(t,1)}},t.prototype.showMessage=function(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)},t.prototype.hideMessage=function(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},t.prototype.checkRequired=function(e){this.rules[e][this.required]||this.inputElement.value.length||ae(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))},t.isCheckable=function(e){var t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)},t.checkValidator={required:function(e){return isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime())},email:function(e){return Kh.EMAIL.test(e.value)},url:function(e){return Kh.URL.test(e.value)},dateIso:function(e){return Kh.DATE_ISO.test(e.value)},tel:function(e){return Kh.PHONE.test(e.value)},creditcard:function(e){return Kh.CREDITCARD.test(e.value)},number:function(e){return!isNaN(Number(e.value))&&-1===e.value.indexOf(" ")},digits:function(e){return Kh.DIGITS.test(e.value)},maxLength:function(e){return e.value.length<=e.param},minLength:function(e){return e.value.length>=e.param},rangeLength:function(e){var t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:function(e){var t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:function(e){return!isNaN(new Date(e.value).getTime())},max:function(e){return isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param},min:function(e){if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){var t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:function(e){return new RegExp(e.param).test(e.value)},equalTo:function(e){var t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},Xh([os("")],t.prototype,"locale",void 0),Xh([os("e-hidden")],t.prototype,"ignore",void 0),Xh([os()],t.prototype,"rules",void 0),Xh([os("e-error")],t.prototype,"errorClass",void 0),Xh([os("e-valid")],t.prototype,"validClass",void 0),Xh([os("label")],t.prototype,"errorElement",void 0),Xh([os("div")],t.prototype,"errorContainer",void 0),Xh([os(Ml.Label)],t.prototype,"errorOption",void 0),Xh([cs()],t.prototype,"focusout",void 0),Xh([cs()],t.prototype,"keyup",void 0),Xh([cs()],t.prototype,"click",void 0),Xh([cs()],t.prototype,"change",void 0),Xh([cs()],t.prototype,"submit",void 0),Xh([cs()],t.prototype,"validationBegin",void 0),Xh([cs()],t.prototype,"validationComplete",void 0),Xh([cs()],t.prototype,"customPlacement",void 0),t=i=Xh([ps],t)}(_i),Qh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Jh=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},$h="e-upload-file-list",ec="e-file-status",tc="e-file-remove-btn",ic="e-file-delete-btn",sc="e-file-abort-btn",nc="e-file-reload-btn",oc="e-upload-progress-wrap",rc="e-upload-progress-bar",ac="e-upload-success",lc="e-upload-fails",hc="e-file-pause-btn",cc=["title","style","class"],pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qh(t,e),Jh([os("")],t.prototype,"name",void 0),Jh([os(null)],t.prototype,"size",void 0),Jh([os("")],t.prototype,"type",void 0),t}(Ls),dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qh(t,e),Jh([os("Browse...")],t.prototype,"browse",void 0),Jh([os("Upload")],t.prototype,"upload",void 0),Jh([os("Clear")],t.prototype,"clear",void 0),t}(Ls),uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qh(t,e),Jh([os("")],t.prototype,"saveUrl",void 0),Jh([os("")],t.prototype,"removeUrl",void 0),Jh([os(0)],t.prototype,"chunkSize",void 0),Jh([os(3)],t.prototype,"retryCount",void 0),Jh([os(500)],t.prototype,"retryAfterDelay",void 0),t}(Ls),mc=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.initialAttr={accept:null,multiple:!1,disabled:!1},s.uploadedFilesData=[],s.base64String=[],s.isForm=!1,s.allTypes=!1,s.pausedData=[],s.uploadMetaData=[],s.tabIndex="0",s.btnTabIndex="0",s.disableKeyboardNavigation=!1,s.count=-1,s.actionCompleteCount=0,s.flag=!0,s.selectedFiles=[],s.uploaderName="UploadFiles",s.fileStreams=[],s.newFileRef=0,s.isFirstFileOnSelection=!1,s.dragCounter=0,s.fileList=[],s.filesData=[],s.uploaderOptions=t,s}return Qh(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=ae(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=ae(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=ae(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isServerBlazor||this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=ee("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(t.cssClass)}}},t.prototype.setLocalizedTexts=function(){ae(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!ae(this.uploadWrapper.querySelector(".e-file-drop"))&&(this.uploadWrapper.querySelector(".e-file-drop").innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},t.prototype.getKeyValue=function(e){for(var t,i=0,s=Object.keys(this.preLocaleObj);i<s.length;i++){var n=s[i];this.preLocaleObj[n]===e&&(t=n)}return t},t.prototype.updateFileList=function(){if(this.fileList.length>0&&!ae(this.uploadWrapper.querySelector(".e-upload-files")))for(var e=0;e<this.fileList.length;e++)this.fileList[e].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[e].status)),this.filesData[e].status=this.localizedTexts(this.getKeyValue(this.filesData[e].status)),this.fileList[e].classList.contains(ac)&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[e].querySelector(".e-file-play-btn")&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[e].querySelector(".e-file-remove-btn")&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[e].querySelector(".e-file-reload-btn")&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},t.prototype.reRenderFileList=function(){this.listParent&&(Ti(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},t.prototype.preRender=function(){if(this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new Js("uploader",this.localeText,this.locale),this.preLocaleObj=ee("currentLocale",this.l10n),this.isServerBlazor=!(!ye()||!this.isServerRendered),this.isBlazorTemplate=!(!this.isServerBlazor||""===this.template||ae(this.template)),this.isBlazorSaveUrl=!(!this.isServerRendered||""!==this.asyncSettings.saveUrl&&!ae(this.asyncSettings.saveUrl)),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.isBlazorSaveUrl||this.formRendered(),!this.isServerBlazor){this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=ee("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var t=this.createElement("input",{attrs:{type:"file"}}),i=0;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;t.hasAttribute("name")||t.setAttribute("name","UploadFiles"),this.element.appendChild(t),this.element=t,te("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(ae(e[0].props.name)?!ae(e[0].props.id)&&ae(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),ae(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes()}this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=bt.info.name,this.uploaderName=this.element.getAttribute("name")},t.prototype.formRendered=function(){var e=Mi(this.element,"form");if(!ae(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},t.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},t.prototype.getModuleName=function(){return"uploader"},t.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},t.prototype.render=function(){this.isServerBlazor?(this.dropAreaWrapper=Mi(this.element,".e-file-select-wrap"),this.uploadWrapper=Mi(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()):(this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()),this.isServerBlazor&&this.renderComplete()},t.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},t.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},t.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},t.prototype.serverUlElement=function(e){e&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=e,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},t.prototype.wireActionButtonEvents=function(){Ct.add(this.uploadButton,"click",this.uploadButtonClick,this),Ct.add(this.clearButton,"click",this.clearButtonClick,this)},t.prototype.unwireActionButtonEvents=function(){Ct.remove(this.uploadButton,"click",this.uploadButtonClick),Ct.remove(this.clearButton,"click",this.clearButtonClick)},t.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||Ti(this.actionButtons),this.actionButtons=null)},t.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e;e=ae(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t;t=ae(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},t.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:"e-file-select"});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},t.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(ae(this.files[0].size))return;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var i=0,s=e;i<s.length;i++){var n=s[i],o={name:n.name+"."+n.type.split(".")[n.type.split(".").length-1],rawFile:"",size:n.size,status:this.localizedTexts("uploadSuccessMessage"),type:n.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(o),this.filesData.push(o)}this.createFileList(t),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},t.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+ac).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},t.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:Ii(this.dropArea,document);for(var t=this.element,i=!1;t.parentNode;)(t=t.parentNode)===this.dropZoneElement&&(i=!0,e?this.isServerBlazor||(e.innerHTML=this.localizedTexts("dropFilesHint")):this.createDropTextHint());!i&&e&&Li(e)}else ae(this.uploaderOptions)||void 0!==this.uploaderOptions.dropArea||(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},t.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&Li(e)}},t.prototype.createDropTextHint=function(){if(!this.isServerBlazor){var e=this.createElement("span",{className:"e-file-drop"});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)}},t.prototype.updateHTMLAttrToElement=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];cc.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHTMLAttrToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(cc.indexOf(i)>-1)if("class"===i){var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&bi([this.uploadWrapper],s.split(" "))}else if("style"===i){var n=this.uploadWrapper.getAttribute(i);n=ae(n)?this.htmlAttributes[i]:n+this.htmlAttributes[i],this.uploadWrapper.setAttribute(i,n)}else this.uploadWrapper.setAttribute(i,this.htmlAttributes[i])}},t.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},t.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},t.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){++this.count;var t=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],t),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},t.prototype.setCSSClass=function(e){var t=this.cssClass;ae(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),ae(this.cssClass)||""===t||bi([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));var i=e;ae(e)||(i=e.replace(/\s+/g," ").trim()),ae(e)||""===i||Ci([this.uploadWrapper],i.split(" "))},t.prototype.wireEvents=function(){Ct.add(this.browseButton,"click",this.browseButtonClick,this),Ct.add(this.element,"change",this.onSelectFiles,this),Ct.add(document,"click",this.removeFocus,this),this.keyboardModule=new Qs(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&Ct.add(this.formElement,"reset",this.resetForm,this)},t.prototype.unWireEvents=function(){Ct.remove(this.browseButton,"click",this.browseButtonClick),Ct.remove(this.element,"change",this.onSelectFiles),Ct.remove(document,"click",this.removeFocus),this.isForm&&Ct.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},t.prototype.resetForm=function(){this.clearAll()},t.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(hc)){(i=this.getCurrentMetaData(null,e)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(t.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(nc)){var i;if(ae(i=this.getCurrentMetaData(null,e))){var s=e.target.parentElement,n=this.filesData[this.fileList.indexOf(s)];this.retry(n)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(e),t.classList.contains(sc)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},t.prototype.getCurrentMetaData=function(e,t){var i,s;if(ae(e)){var n=t.target.parentElement;i=this.filesData[this.fileList.indexOf(n)]}else i=e;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===i.name&&(s=this.uploadMetaData[o]);return s},t.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},t.prototype.browseButtonClick=function(){this.element.click()},t.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},t.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},t.prototype.bindDropEvents=function(){this.dropZoneElement&&(Ct.add(this.dropZoneElement,"drop",this.dropElement,this),Ct.add(this.dropZoneElement,"dragover",this.dragHover,this),Ct.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),Ct.add(this.dropZoneElement,"paste",this.onPasteFile,this),Ct.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},t.prototype.unBindDropEvents=function(){this.dropZoneElement&&(Ct.remove(this.dropZoneElement,"drop",this.dropElement),Ct.remove(this.dropZoneElement,"dragover",this.dragHover),Ct.remove(this.dropZoneElement,"dragleave",this.onDragLeave),Ct.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},t.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},t.prototype.onDragLeave=function(e){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove("e-upload-drag-hover"))},t.prototype.dragHover=function(e){this.enabled&&("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},t.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove("e-upload-drag-hover"),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},t.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(1===t.length){var i=[].slice.call(t)[0];"file"===i.kind&&i.type.match("^image/")&&this.renderSelectedFiles(e,[i.getAsFile()],!1,!0)}},t.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],s=this.getFilesData(),n=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+n;a++)t.push(s[a]);return t},t.prototype.removeFiles=function(e){if(this.enabled){var t=e.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var i=this.fileList.indexOf(t),s=this.fileList[i],n=this.isFormUpload(),o=n?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!ae(o)){if(e.target.classList.contains(sc)&&!n){if(o[0].statusCode="5",!ae(s)){var r=s.querySelector("."+sc);ga({target:r,width:"20px"}),Ia(r)}this.sequentialUpload&&this.uploadSequential(),s.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else Mi(e.target,".e-spinner-pane")||this.remove(o,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}},t.prototype.removeFilesData=function(e,t){var i;if(t)this.showFileList||(i=this.filesData.indexOf(e),this.filesData.splice(i,1));else{var s=this.getLiElement(e);ae(s)||(this.isBlazorSaveUrl||Ti(s),i=this.fileList.indexOf(s),this.fileList.splice(i,1),this.filesData.splice(i,1),this.isBlazorSaveUrl?this.interopAdaptor.invokeMethodAsync("removeFileData",i):(0!==this.fileList.length||ae(this.listParent)||(Ti(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&i<=this.count&&--this.count))}},t.prototype.removeUploadedFile=function(e,t,i,s){var n=this,o=e,r=new ht(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;if(r.beforeSend=function(s){t.currentRequest=r.httpRequest,ye()&&(n.currentRequestHeader&&n.updateCustomheader(r.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(a,n.customFormDatas)),i?n.removingEventCallback(t,a,o,e):n.trigger("removing",t,function(t){t.cancel?s.cancel=!0:n.removingEventCallback(t,a,o,e)})},this.isServerBlazor){var l=this.element.getAttribute("name");ae(o.rawFile)||""===o.rawFile?a.append(l,o.name):a.append(l,o.rawFile,o.name)}r.onLoad=function(e){return n.removeCompleted(e,o,s),{}},r.onError=function(e){return n.removeFailed(e,o,s),{}},r.send(a)},t.prototype.removingEventCallback=function(e,t,i,s){var n=this.element.getAttribute("name"),o=this.getLiElement(s);if(!(ae(o)||ae(o.querySelector("."+ic))&&ae(o.querySelector("."+tc)))){var r;ga({target:r=o.querySelector("."+ic)?o.querySelector("."+ic):o.querySelector("."+tc),width:"20px"}),Ia(r)}this.isServerBlazor||(e.postRawFile&&!ae(i.rawFile)&&""!==i.rawFile?t.append(n,i.rawFile,i.name):t.append(n,i.name),this.updateFormData(t,e.customFormData))},t.prototype.updateFormData=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map(function(e){return s[e]});e.append(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},t.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map(function(e){return s[e]});e.setRequestHeader(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},t.prototype.removeCompleted=function(e,t,i){var s=e&&e.currentTarget?this.getResponse(e):null,n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var o={e:e,response:s,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,t,i)},t.prototype.removeFailed=function(e,t,i){var s={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var n=this.filesData.indexOf(t),o=this.fileList[n];if(o){o.classList.remove(ac),o.classList.add(lc);var r=o.querySelector("."+ec);r&&(r.classList.remove(ac),r.classList.add(lc))}this.checkActionButtonStatus()}this.trigger("failure",s);var a=this.getLiElement(t);ae(a)||ae(a.querySelector("."+ic))||(Aa(a.querySelector("."+ic)),Ti(a.querySelector(".e-spinner-pane")))},t.prototype.getFilesFromFolder=function(e){var t;if(this.filesEntries=[],t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var i=function(i){var n=t[i].webkitGetAsEntry();if(n.isFile){var o=[];n.file(function(e){var t=n.fullPath;o.push({path:t,file:e})}),s.renderSelectedFiles(e,o,!0)}else n.isDirectory&&s.traverseFileTree(n,e)},s=this,n=0;n<t.length;n++)i(n)},t.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){if(e[t].webkitGetAsEntry().isDirectory)return!0}return!1},t.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var i=e.createReader();this.readFileFromDirectory(i,t)}},t.prototype.readFileFromDirectory=function(e,t){var i=this;e.readEntries(function(s){for(var n=0;n<s.length;n++)i.traverseFileTree(s[n]);i.pushFilesEntries(t),s.length&&i.readFileFromDirectory(e)})},t.prototype.pushFilesEntries=function(e){for(var t=this,i=[],s=function(s){n.filesEntries[s].file(function(n){if(t.filesEntries.length){var o=t.filesEntries[s].fullPath;i.push({path:o,file:n}),s===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,i,!0))}})},n=this,o=0;o<this.filesEntries.length;o++)s(o)},t.prototype.onSelectFiles=function(e){var t;if(this.enabled)if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},t.prototype.getBase64=function(e){return new Promise(function(t,i){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=function(e){return i(e)}})},t.prototype.renderSelectedFiles=function(e,t,i,s){var n=this;this.base64String=[];var o={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return o.isCanceled=!0,void this.trigger("selected",o);this.flag=!0;var r=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(var a=0;a<t.length;a++){var l=i?t[a].file:t[a];this.updateInitialFileDetails(e,t,l,a,r,i,s)}o.filesData=r,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(r=this.checkExtension(r)),this.trigger("selected",o,function(e){n._internalRenderSelect(e,r)})},t.prototype.updateInitialFileDetails=function(e,t,i,s,n,o,r){var a={name:o?t[s].path.substring(1,t[s].path.length):r?he(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[s].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:he(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),n.push(a)},t.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(ye()&&(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData),this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var s=0;s<t.length;s++)e.modifiedFilesData[i].id===t[s].id&&(e.modifiedFilesData[i].rawFile=t[s].rawFile);var n=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(n),this.filesData=n,this.isForm&&!this.allowUpload()||this.checkAutoUpload(n)}else this.createFileList(t,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t);ae(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl&&this.interopAdaptor.invokeMethodAsync("updateServerFileData",this.filesData,this.isForm),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},t.prototype.allowUpload=function(){var e=!1;return this.isForm&&!ae(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},t.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!ae(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!ae(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},t.prototype.clearData=function(e){ae(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(Ti(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.interopAdaptor.invokeMethodAsync("clearAll"):this.removeActionButtons()},t.prototype.updateSortedFileList=function(e){var t=this.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var s=0;s<this.listParent.querySelectorAll("li").length;s++){var n=this.listParent.querySelectorAll("li")[s];t.appendChild(n.cloneNode(!0))}for(var o=0,r=this.listParent.querySelectorAll("li");o<r.length;o++){Ti(r[o])}this.removeActionButtons();var a=[].slice.call(t.childNodes);Ti(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var l=0;l<e.length;l++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===e[l].name&&(this.listParent.appendChild(a[h]),Ct.add(a[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(a[h]),i=l);i!==l&&this.createFileList([e[l]])}}else this.createFileList(e)},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],s=0,n=this.allowedExtensions.split(",");s<n.length;s++){var o=n[s];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status=this.localizedTexts("invalidFileType"),e[r].statusCode="0")}return t},t.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}},t.prototype.isPreLoadFile=function(e){for(var t=!1,i=0;i<this.files.length;i++)this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type&&(t=!0);return t},t.prototype.createCustomfileList=function(e){this.createParentUL(),Zt(this.element.id+"Template");for(var t=0,i=e;t<i.length;t++){var s=i[t],n=this.createElement("li",{className:$h,attrs:{"data-file-name":s.name}});this.uploadTemplateFn=this.templateComplier(this.template);var o=this.uploadTemplateFn(s,this,"template",this.element.id+"Template",this.isStringTemplate,null,n);if(o)Ei([].slice.call(o),n);var r=e.indexOf(s),a={element:n,fileInfo:s,index:r,isPreload:this.isPreLoadFile(s)},l={element:n,fileInfo:s,index:r,isPreload:this.isPreLoadFile(s)};this.trigger("rendering",a),this.trigger("fileListRendering",l),this.listParent.appendChild(n),this.fileList.push(n)}this.renderReactTemplates(),Kt(this.element.id+"Template","Template",this,!1)},t.prototype.createParentUL=function(){ae(this.listParent)&&(this.listParent=this.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},t.prototype.formFileList=function(e,t){var i=this.createElement("li",{className:$h});i.setAttribute("data-files-count",e.length+"");for(var s,n=this.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=this.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var h=this.createElement("span",{className:"e-file-type"}),c=this.getFileType(a.name);if(h.innerHTML="."+c,c||h.classList.add("e-hidden"),this.enableRtl){var p=this.createElement("span",{className:"e-rtl-container"});p.appendChild(h),p.appendChild(l),n.appendChild(p)}else n.appendChild(l),n.appendChild(h);this.truncateName(l),s=this.formValidateFileInfo(a,i)}i.appendChild(n),this.setListToFileInfo(e,i);var d=this.listParent.querySelectorAll("li").length,u=this.createElement("span");if(i.classList.contains("e-file-invalid")?(u.classList.add(ec),u.classList.add("e-file-invalid"),u.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):s):(u.classList.add(e.length>1?"e-file-information":"e-file-size"),u.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),n.appendChild(u),ae(i.querySelector(".e-icons"))){var m=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&m.classList.add("e-msie"),m.setAttribute("title",this.localizedTexts("remove")),i.appendChild(n),i.appendChild(m),Ct.add(m,"click",this.removeFiles,this),m.classList.add(tc)}var f={element:i,fileInfo:this.mergeFileInfo(e,i),index:d,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))},g={element:i,fileInfo:this.mergeFileInfo(e,i),index:d,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))};this.trigger("rendering",f),this.trigger("fileListRendering",g),this.listParent.appendChild(i),this.fileList.push(i)},t.prototype.formValidateFileInfo=function(e,t){var i=e.status,s=this.validatedFileSize(e.size);""===s.minSize&&""===s.maxSize||(this.addInvalidClass(t),i=""!==s.minSize?this.localizedTexts("invalidMinFileSize"):""!==s.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var n=this.checkExtension(this.getFilesInArray(e))[0].status;return n===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=n),i},t.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},t.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,s=e;i<s.length;i++){s[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},t.prototype.getFileSize=function(e){for(var t=0,i=0,s=e;i<s.length;i++){t+=s[i].size}return t},t.prototype.mergeFileInfo=function(e,t){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},s=[],n="",o=0,r=e;o<r.length;o++){var a=r[o];s.push(a.name),n=a.type}return i.name=s.join(", "),i.size=this.getFileSize(e),i.type=n,i.status=this.statusForFormUpload(e,t),i},t.prototype.statusForFormUpload=function(e,t){for(var i,s=!0,n=0,o=e;n<o.length;n++){var r=o[n];i=r.status;var a=this.validatedFileSize(r.size);""===a.minSize&&""===a.maxSize||(s=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(r))[0].status;l===this.localizedTexts("invalidFileType")&&(s=!1,i=l)}return s?i=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add("e-file-invalid"),i=e.length>1?this.localizedTexts("invalidFileSelection"):i),i},t.prototype.formCustomFileList=function(e,t){this.createParentUL(),Zt(this.element.id+"Template");var i=this.createElement("li",{className:$h});i.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,i);var s=this.mergeFileInfo(e,i);i.setAttribute("data-file-name",s.name),this.uploadTemplateFn=this.templateComplier(this.template);var n=this.uploadTemplateFn(s,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);n&&Ei([].slice.call(n),i);var o=this.listParent.querySelectorAll("li").length;i.classList.contains("e-file-invalid")||this.createFormInput(e);var r={element:i,fileInfo:s,index:o,isPreload:this.isPreLoadFile(s)},a={element:i,fileInfo:s,index:o,isPreload:this.isPreLoadFile(s)};this.trigger("rendering",r),this.trigger("fileListRendering",a),this.listParent.appendChild(i),this.fileList.push(i),this.renderReactTemplates(),Kt(this.element.id+"Template","Template",this,!1)},t.prototype.createFileList=function(e,t){if(this.isBlazorSaveUrl||this.isBlazorTemplate){var i=t?this.filesData=this.filesData.concat(e):e;this.interopAdaptor.invokeMethodAsync("createFileList",i,this.isForm)}else if(this.createParentUL(),""===this.template||ae(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var s=0,n=e;s<n.length;s++){var o=n[s],r=this.createElement("li",{className:$h,attrs:{"data-file-name":o.name,"data-files-count":"1"}}),a=this.createElement("span",{className:"e-file-container"}),l=this.createElement("span",{className:"e-file-name",attrs:{title:o.name}});l.innerHTML=this.getFileNameOnly(o.name);var h=this.createElement("span",{className:"e-file-type"}),c=this.getFileType(o.name);if(h.innerHTML="."+c,c||h.classList.add("e-hidden"),this.enableRtl){var p=this.createElement("span",{className:"e-rtl-container"});p.appendChild(h),p.appendChild(l),a.appendChild(p)}else a.appendChild(l),a.appendChild(h);var d=this.createElement("span",{className:"e-file-size"});d.innerHTML=this.bytesToSize(o.size),a.appendChild(d);var u=this.createElement("span",{className:ec});a.appendChild(u),u.innerHTML=o.status,r.appendChild(a);var m=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&m.classList.add("e-msie"),m.setAttribute("title",this.localizedTexts("remove")),r.appendChild(m),Ct.add(m,"click",this.removeFiles,this),"2"===o.statusCode?(u.classList.add(ac),m.classList.add(ic),m.setAttribute("title",this.localizedTexts("delete"))):"1"!==o.statusCode&&(u.classList.remove(ac),u.classList.add("e-validation-fails")),this.autoUpload&&"1"===o.statusCode&&""!==this.asyncSettings.saveUrl&&(u.innerHTML=""),m.classList.contains(ic)||m.classList.add(tc);var f=e.indexOf(o),g={element:r,fileInfo:o,index:f,isPreload:this.isPreLoadFile(o)},v={element:r,fileInfo:o,index:f,isPreload:this.isPreLoadFile(o)};this.trigger("rendering",g),this.trigger("fileListRendering",v),this.listParent.appendChild(r),this.fileList.push(r),this.truncateName(l);var y=this.flag;this.isPreLoadFile(o)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=y)}else this.isFormUpload()?(this.uploadWrapper.classList.add("e-form-upload"),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e)},t.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},t.prototype.setListToFileInfo=function(e,t){for(var i=0,s=e;i<s.length;i++){s[i].list=t}},t.prototype.truncateName=function(e){var t=e;"edge"!==this.browserName&&t.offsetWidth<t.scrollWidth?this.getSlicedName(t):t.offsetWidth+1<t.scrollWidth&&this.getSlicedName(t)},t.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},t.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},t.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},t.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains(ac)||t.push(e[i]);return t},t.prototype.updateStatus=function(e,t,i,s){if(void 0===s&&(s=!0),""!==t&&!ae(t)&&""!==i&&!ae(i))if(this.isBlazorSaveUrl)for(var n=0;n<this.filesData.length;n++)this.filesData[n].name===e.name&&(this.filesData[n].status=t,this.filesData[n].statusCode=i);else e.status=t,e.statusCode=i;if(s){var o=this.getLiElement(e);ae(o)||ae(o.querySelector("."+ec))||""===t||ae(t)||(o.querySelector("."+ec).textContent=t)}return e},t.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(ae(this.filesData[i].id)||ae(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},t.prototype.createProgressBar=function(e){var t=this.createElement("span",{className:oc}),i=this.createElement("progressbar",{className:rc,attrs:{value:"0",max:"100"}}),s=this.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var n=this.createElement("span",{className:"e-progress-bar-text"});n.textContent="0%",s.appendChild(i),t.appendChild(s),t.appendChild(n),e.querySelector(".e-file-container").appendChild(t)},t.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!ae(t.querySelector("."+rc)))if(ae(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},t.prototype.changeProgressValue=function(e,t){e.querySelector("."+rc).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},t.prototype.uploadInProgress=function(e,t,i,s){var n=this.getLiElement(t);if(!ae(n)||i){if(ae(n))this.cancelUploadingFile(t,e,s);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,s,n),n.querySelectorAll("."+oc).length>0||!n.querySelector("."+ec)||(n.querySelector("."+ec).classList.add("e-upload-progress"),this.createProgressBar(n),this.updateProgressBarClasses(n,"e-upload-progress"),n.querySelector("."+ec).classList.remove(lc)),this.updateProgressbar(e,n);var o=n.querySelector("."+tc);ae(o)||(o.classList.add(sc,"e-upload-progress"),o.setAttribute("title",this.localizedTexts("abort")),o.classList.remove(tc))}var r={e:e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3")};this.trigger("progress",r)}},t.prototype.cancelUploadingFile=function(e,t,i,s){var n=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1,customFormData:[]};this.trigger("canceling",o,function(t){if(t.cancel){if(e.statusCode="3",!ae(s)){var o=s.querySelector("."+sc);ae(o)||(Aa(o),Ti(s.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var r=new FormData;if("5"===e.statusCode){var a=n.element.getAttribute("name");r.append(a,e.name),r.append("cancel-uploading",e.name),n.updateFormData(r,t.customFormData);var l=new ht(n.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.onLoad=function(t){return n.removecanceledFile(t,e),{}},l.send(r)}}})}},t.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!i.querySelector("."+nc)&&!ae(i.querySelector("."+sc))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,i);var s=i.querySelector("."+tc);ae(i)||(Aa(s),Ti(i.querySelector(".e-spinner-pane")));var n={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"cancel",file:t};this.trigger("success",n)}},t.prototype.renderFailureState=function(e,t,i){var s=this;this.updateProgressBarClasses(i,lc),this.removeProgressbar(i,"failure"),ae(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(lc);var n=i.querySelector("."+sc);ae(n)||(n.classList.remove(sc,"e-upload-progress"),n.classList.add(tc),n.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),n.parentElement.insertBefore(this.pauseButton,n),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),i.querySelector("."+nc).addEventListener("click",function(e){s.reloadcanceledFile(e,t,i,!1)},!1))},t.prototype.reloadcanceledFile=function(e,t,i,s){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),s||(i.querySelector("."+ec).classList.remove(lc),ae(i.querySelector("."+nc))||Ti(i.querySelector("."+nc)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},t.prototype.uploadComplete=function(e,t,i){var s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var n=this.getLiElement(t);if(ae(n)&&(!i||ae(i)))return;if(!ae(n)){this.updateProgressBarClasses(n,ac),this.removeProgressbar(n,"success");var o=n.querySelector("."+sc);ae(o)||(o.classList.add(ic),o.setAttribute("title",this.localizedTexts("delete")),o.classList.remove(sc),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},t.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},t.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var e=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),t=0;t<e.length;t++){var i=e[t]?e[t].querySelector(".e-icons"):null;i&&(Ct.remove(i,"click",this.removeFiles),Ct.add(i,"click",this.removeFiles,this))}},t.prototype.raiseSuccessEvent=function(e,t){var i=this,s=e&&e.currentTarget?this.getResponse(e):null,n=this.localizedTexts("uploadSuccessMessage"),o={e:e,response:s,operation:"upload",file:this.updateStatus(t,n,"2",!1),statusText:n};if(!this.isBlazorSaveUrl){var r=this.getLiElement(t);if(!ae(r)){var a=r.querySelector(".e-spinner-pane");ae(a)||(Aa(r),Ti(a))}}this.trigger("success",o,function(e){i.updateStatus(t,e.statusText,"2"),i.uploadedFilesData.push(t),i.isBlazorSaveUrl||i.trigger("change",{file:i.uploadedFilesData}),i.checkActionButtonStatus(),i.fileList.length>0&&(i.getLiElement(t).classList.contains("e-restrict-retry")?i.getLiElement(t).classList.remove("e-restrict-retry"):(i.uploadSequential(),i.checkActionComplete(!0)))})},t.prototype.uploadFailed=function(e,t){var i=this,s=this.getLiElement(t),n=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadFailedMessage"),r={e:e,response:n,operation:"upload",file:this.updateStatus(t,o,"0",!1),statusText:o};ae(s)||this.renderFailureState(e,t,s),this.trigger("failure",r,function(e){i.updateStatus(t,e.statusText,"0"),i.checkActionButtonStatus(),i.uploadSequential(),i.checkActionComplete(!0)})},t.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},t.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},t.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},t.prototype.getSelectedFileStatus=function(e){for(var t=[],i=0,s=0;s<e.length;s++)for(var n=e[s],o=0;o<this.filesData.length;o++)this.filesData[o].name===n.name&&(t[i]=this.filesData[o],++i);return t},t.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+rc);ae(i)||i.classList.add(t)},t.prototype.removeProgressbar=function(e,t){var i=this;ae(e.querySelector("."+oc))||(this.progressAnimation=new vs({duration:1250}),this.progressAnimation.animate(e.querySelector("."+oc),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout(function(){i.animateProgressBar(e,t)},750))},t.prototype.animateProgressBar=function(e,t){"success"===t?(e.classList.add(ac),ae(e.querySelector("."+ec))||(e.querySelector("."+ec).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+ec),{name:"FadeIn"}),e.querySelector("."+ec).classList.add(ac))):ae(e.querySelector("."+ec))||(e.querySelector("."+ec).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+ec),{name:"FadeIn"}),e.querySelector("."+ec).classList.add(lc)),e.querySelector("."+oc)&&Ti(e.querySelector("."+oc))},t.prototype.setExtensions=function(e){""===e||ae(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},t.prototype.templateComplier=function(e){if(e){try{if(Oi(e,document).length)return Xt(Ii(e,document).innerHTML.trim())}catch(t){return Xt(e)}}},t.prototype.setRTL=function(){this.enableRtl?bi([this.uploadWrapper],"e-rtl"):Ci([this.uploadWrapper],"e-rtl")},t.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},t.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains("e-disabled")&&this.uploadWrapper.classList.remove("e-disabled"),!ae(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!ae(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!ae(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add("e-disabled"),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),ae(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),ae(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},t.prototype.checkHTMLAttributes=function(e){for(var t=0,i=e?ae(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];t<i.length;t++){var s=i[t];if(!ae(this.element.getAttribute(s)))switch(s){case"accept":(ae(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(ae(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||e){var n="multiple"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s);this.setProperties({multiple:n},!e),this.initialAttr.multiple=!0}break;case"disabled":if(ae(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||e){var o="disabled"!==this.element.getAttribute(s)&&""!==this.element.getAttribute(s)&&"true"!==this.element.getAttribute(s);this.setProperties({enabled:o},!e),this.initialAttr.disabled=!0}}}},t.prototype.chunkUpload=function(e,t,i){var s=Math.min(this.asyncSettings.chunkSize,e.size),n={chunkIndex:0,blob:e.rawFile.slice(0,s),file:e,start:0,end:s,retryCount:0,request:null};this.sendRequest(e,n,t,i)},t.prototype.sendRequest=function(e,t,i,s){var n=this,o=new FormData,r=e.rawFile.slice(t.start,t.end);o.append("chunkFile",r,e.name),o.append(this.uploaderName,r,e.name),o.append("chunk-index",t.chunkIndex.toString()),o.append("chunkIndex",t.chunkIndex.toString());var a=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",a.toString()),o.append("totalChunk",a.toString());var l=new ht({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});l.emitError=!1,l.onLoad=function(e){return n.chunkUploadComplete(e,t,i),{}},l.onUploadProgress=function(e){return n.chunkUploadInProgress(e,t,i),{}};var h={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};l.beforeSend=function(i){h.currentRequest=l.httpRequest,h.currentChunkIndex=t.chunkIndex,ye()&&(n.currentRequestHeader&&n.updateCustomheader(l.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(o,n.customFormDatas)),0===h.currentChunkIndex?n.trigger("uploading",h,function(t){n.uploadingEventCallback(o,t,i,e)}):n.trigger("chunkUploading",h,function(t){n.uploadingEventCallback(o,t,i,e)})},l.onError=function(e){return n.chunkUploadFailed(e,t,i),{}},l.send(o),t.request=l},t.prototype.uploadingEventCallback=function(e,t,i,s){t.cancel?this.eventCancelByArgs(i,t,s):this.updateFormData(e,t.customFormData)},t.prototype.eventCancelByArgs=function(e,t,i){var s=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel");var n=this.getLiElement(t.fileData);if(n){ae(n.querySelector("."+ec))||(n.querySelector("."+ec).innerHTML=this.localizedTexts("fileUploadCancel"),n.querySelector("."+ec).classList.add(lc)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=n.querySelector("."+tc);o&&o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(e){s.reloadcanceledFile(e,i,n)},!1),this.checkActionButtonStatus()}}},t.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||ae(this.asyncSettings.chunkSize))},t.prototype.chunkUploadComplete=function(e,t,i){var s,n=this,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<300){var r=e&&e.currentTarget?this.getResponse(e):null,a=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),l={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:r};if(this.trigger("chunkSuccess",l),!ae(i)&&i||(s=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode){var h={event:e,fileData:t.file,cancel:!1,customFormData:[]};this.trigger("canceling",h,function(e){if(e.cancel){t.file.statusCode="3";var r=s.querySelector("."+sc);ae(s)||ae(r)||(Aa(r),Ti(s.querySelector(".e-spinner-pane"))),n.sendNextRequest(t)}else{t.request.emitError=!1,o.abort();var a=new FormData,l=n.element.getAttribute("name");a.append(l,t.file.name),a.append("cancel-uploading",t.file.name),a.append("cancelUploading",t.file.name),n.updateFormData(a,e.customFormData);var h=new ht(n.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(e){return n.removeChunkFile(e,t,i),{}},h.send(a)}})}else{if(a-1===t.chunkIndex&&a>t.chunkIndex){var c=this.pausedData.indexOf(t);return c>=0&&this.pausedData.splice(c,1),ae(this.template)&&(ae(i)||!i)&&s&&(s&&Ti(s.querySelector("."+hc)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},t.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},t.prototype.removeChunkFile=function(e,t,i){if(ae(this.template)&&ae(i)&&!i){var s=this.getLiElement(t.file),n=s.querySelector("."+sc),o=n;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(s,lc),this.removeProgressbar(s,"failure"),n.classList.remove(sc),n.classList.add(tc),n.setAttribute("title",this.localizedTexts("remove"));var r=s.querySelector("."+hc);r.classList.add(nc),r.classList.remove(hc),r.setAttribute("title",this.localizedTexts("retry")),ae(s)||ae(n)||(Aa(o),Ti(s.querySelector(".e-spinner-pane")))}},t.prototype.pauseUpload=function(e,t,i){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var s={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,i,s)},t.prototype.abortUpload=function(e,t,i){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());var s=this.getLiElement(e.file);if(ae(this.template)&&(ae(t)||!t)){var n=s.querySelector("."+hc);n.classList.remove(hc),n.classList.add("e-file-play-btn"),n.setAttribute("title",this.localizedTexts("resume")),n.nextElementSibling.classList.add(tc),n.nextElementSibling.classList.remove(sc),n.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===e.file.name&&this.pausedData.splice(o,1);this.pausedData.push(e),this.trigger("pausing",i)},t.prototype.resumeUpload=function(e,t,i){var s,n=this.getLiElement(e.file);ae(n)||(s=n.querySelector(".e-file-play-btn")),ae(s)||!ae(i)&&i||(s.classList.remove("e-file-play-btn"),s.classList.add(hc),s.setAttribute("title",this.localizedTexts("pause")),s.nextElementSibling.classList.remove(tc),s.nextElementSibling.classList.add(sc),s.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var o={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",o);for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].end===this.pausedData[r].file.size?this.chunkUploadComplete(t,e,i):this.pausedData[r].file.name===e.file.name&&(this.pausedData[r].start=this.pausedData[r].end,this.pausedData[r].end=this.pausedData[r].end+this.asyncSettings.chunkSize,this.pausedData[r].end=Math.min(this.pausedData[r].end,this.pausedData[r].file.size),this.pausedData[r].chunkIndex=this.pausedData[r].chunkIndex+1,this.sendRequest(this.pausedData[r].file,this.pausedData[r],i))},t.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)?this.uploadMetaData.push(e):(this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e))},t.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!ae(t)){this.updateProgressBarClasses(t,ac),this.removeProgressbar(t,"success");var i=t.querySelector("."+sc);ae(i)||(i.classList.add(ic),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(sc,"e-upload-progress"))}},t.prototype.chunkUploadFailed=function(e,t,i){var s,n=this,o=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);!ae(this.template)||!ae(i)&&i||(s=this.getLiElement(t.file));var r=e&&e.currentTarget?this.getResponse(e):null,a={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:r};this.trigger("chunkFailure",a,function(o){if(!o.cancel)if(t.retryCount<n.asyncSettings.retryCount)setTimeout(function(){n.retryRequest(s,t,i)},n.asyncSettings.retryAfterDelay);else{if(!ae(s)){var a=s.querySelector("."+hc)?s.querySelector("."+hc):s.querySelector(".e-file-play-btn");ae(a)||(a.classList.add(nc),a.classList.remove(hc,"e-file-play-btn")),n.updateProgressBarClasses(s,lc),n.removeProgressbar(s,"failure"),s.querySelector(".e-icons").classList.remove("e-upload-progress");var l=s.querySelector("."+sc)?s.querySelector("."+sc):s.querySelector("."+tc);l.classList.remove(sc),ae(s.querySelector("."+hc))||Ti(s.querySelector("."+hc)),t.start>0?(l.classList.add(ic),l.setAttribute("title",n.localizedTexts("delete"))):(l.classList.add(tc),l.setAttribute("title",n.localizedTexts("remove")))}t.retryCount=0;var h=t.file,c=n.localizedTexts("uploadFailedMessage"),p={e:e,response:r,operation:"upload",file:n.updateStatus(h,c,"0",!1),statusText:c};n.trigger("failure",p,function(e){n.updateStatus(h,e.statusText,"0"),n.uploadSequential(),n.checkActionComplete(!0)})}})},t.prototype.retryRequest=function(e,t,i){ae(this.template)&&(ae(i)||!i)&&e&&this.updateProgressBarClasses(e,lc),t.retryCount+=1,this.sendRequest(t.file,t)},t.prototype.checkPausePlayAction=function(e){var t=e.target,i=e.target.parentElement,s=this.fileList.indexOf(i),n=this.filesData[s],o=this.getCurrentMetaData(n);t.classList.contains(hc)?this.pauseUpload(o,e):t.classList.contains("e-file-play-btn")?this.resumeUpload(o,e):t.classList.contains(nc)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},t.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add("e-restrict-retry")},t.prototype.chunkUploadInProgress=function(e,t,i){var s=this;if("4"!==t.file.statusCode){"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);var n=this.getLiElement(t.file);if(!ae(n)){var o=n.querySelector("."+nc);if(ae(o)||(o.classList.add(hc),o.setAttribute("title",this.localizedTexts("pause")),o.classList.remove(nc)),!ae(n)){if(!(n.querySelectorAll("."+oc).length>0)){var r=n.querySelector("."+ec);ae(this.template)&&(r.classList.add("e-upload-progress"),r.classList.remove(lc),this.createProgressBar(n),this.updateProgressBarClasses(n,"e-upload-progress"));var a=n.querySelector("."+tc)?n.querySelector("."+tc):n.querySelector("."+ic);ae(a)||(a.classList.add(sc),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(tc))}if(!isNaN(Math.round(e.loaded/e.total*100))&&ae(this.template)&&"4"!==t.file.statusCode){var l=t.chunkIndex*this.asyncSettings.chunkSize,h=e.loaded;h>this.asyncSettings.chunkSize&&(h=this.asyncSettings.chunkSize);var c=Math.min((l+h)/t.file.size*100,100);this.changeProgressValue(n,Math.round(c).toString()+"%")}0===t.chunkIndex&&this.checkActionButtonStatus()}if(ae(n.querySelector("."+hc))&&ae(this.template)){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var p=n.querySelector("."+sc);p.parentElement.insertBefore(this.pauseButton,p),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(e){s.checkPausePlayAction(e)},!1)}}}},t.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},t.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],s=0;s<t.length;s++)i.push(t[s].name);for(var n=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(s=0;s<t.length;s++)a===t[s].name&&n.push(t[s])}return n},t.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var t=0,i=["aria-label","directory","webkitdirectory","tabindex"];t<i.length;t++){var s=i[t];this.element.removeAttribute(s)}this.isServerBlazor?this.uploadWrapper=null:(ae(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),Ti(this.uploadWrapper)),this.uploadWrapper=null,e.prototype.destroy.call(this))},t.prototype.upload=function(e,t){var i=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))this.sequenceUpload(e);else{var s=this.getFilesInArray(e);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},function(e){e.cancel||(ye()&&(i.currentRequestHeader=e.currentRequest?e.currentRequest:i.currentRequestHeader,i.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:i.customFormDatas),i.uploadFiles(s,t))})}},t.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=e:t.push(e),t},t.prototype.serverReadFileBase64=function(e,t,i){var s=this;return new Promise(function(n,o){var r,a=s.fileStreams[e].rawFile;try{var l=new FileReader;l.onload=(r=l,function(){try{var e=r.result,t=e?e.split(";base64,")[1]:null;n(t)}catch(e){o(e)}}),l.readAsDataURL(a.slice(t,t+i))}catch(e){o(e)}})},t.prototype.uploadFileCount=function(e){var t=this.filesData;return t&&0!==t.length?t.length:-1},t.prototype.getFileRead=function(e,t){var i=this.filesData;if(!i||0===i.length)return-1;var s=i[e],n=this.newFileRef++;return this.fileStreams[n]=s,n},t.prototype.getFileInfo=function(e,t){var i=this.filesData;return i&&0!==i.length&&i[e]?this.filesData[e]:null},t.prototype.uploadFiles=function(e,t){var i=this,s=[];if(""===this.asyncSettings.saveUrl||ae(this.asyncSettings.saveUrl))this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("GetFileDetails",e);else{if(!t||ae(t))if(this.multiple)s=this.filterfileList(e);else{var n=[];n.push(e[0]),s=this.filterfileList(n)}else s=e;for(var o=function(e){r.isServerBlazor&&!r.checkChunkUpload()?s[e]&&s[e].rawFile instanceof File&&r.getBase64(s[e].rawFile).then(function(n){i.base64String.push(n),i.uploadFilesRequest(s,e,t)}):r.uploadFilesRequest(s,e,t)},r=this,a=0;a<s.length;a++)o(a)}},t.prototype.uploadFilesRequest=function(e,t,i){var s,n=this,o=[],r=this.checkChunkUpload(),a=new ht(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1,this.isServerBlazor&&(s=e.slice(0),o.push(s[t].rawFile));var l={fileData:this.isServerBlazor?s[t]:e[t],customFormData:[],cancel:!1},h=new FormData;if(a.beforeSend=function(i){l.currentRequest=a.httpRequest,ye()&&(l.fileData.rawFile=r?l.fileData.rawFile:n.base64String[t],n.currentRequestHeader&&n.updateCustomheader(a.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(h,n.customFormDatas)),n.trigger("uploading",l,function(s){n.isServerBlazor&&!r&&(e[t].rawFile=s.fileData.rawFile=o[t]),s.cancel&&n.eventCancelByArgs(i,s,e[t]),n.updateFormData(h,s.customFormData)})},"1"===e[t].statusCode){var c=this.element.getAttribute("name");h.append(c,e[t].rawFile,e[t].name),r&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],i,t):(a.onLoad=function(s){return l.cancel&&n.isServerBlazor?{}:(n.uploadComplete(s,e[t],i),{})},a.onUploadProgress=function(s){return l.cancel&&n.isServerBlazor?{}:(n.uploadInProgress(s,e[t],i,a),{})},a.onError=function(i){return n.uploadFailed(i,e[t]),{}},a.send(h))}},t.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),s=+t.getAttribute("data-files-count"),n=0,o=0;o<e;o++)n+=+this.fileList[o].getAttribute("data-files-count");for(var r=n+s-1;r>=n;r--)i.splice(r,1)},t.prototype.remove=function(e,t,i,s,n){var o=this;ae(s)&&(s=!0);var r={event:n,cancel:!1,filesData:[],customFormData:[],postRawFile:s,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},function(s){if(!s.cancel){ye()&&(o.currentRequestHeader=s.currentRequest,o.customFormDatas=s.customFormData);if(o.isFormUpload()&&!o.isBlazorSaveUrl)r.filesData=e,o.trigger("removing",r,function(t){if(!t.cancel)for(var i=!1,s=void 0,n=0,r=o.getFilesInArray(e);n<r.length;n++){var a=r[n];if(i||(s=o.fileList.indexOf(a.list)),s>-1){var l=ae(a.input)?null:a.input;l&&Ti(l),o.spliceFiles(s),Ti(o.fileList[s]),o.fileList.splice(s,1),i=!0,s=-1}}});else if(!o.isForm||!ae(o.asyncSettings.removeUrl)&&""!==o.asyncSettings.removeUrl||o.isBlazorSaveUrl){var a=[];(e=ae(e)?o.filesData:e)instanceof Array?a=e:a.push(e),r.filesData=a;for(var l=o.asyncSettings.removeUrl,h=""!==l&&!ae(l),c=function(e){o.filesData.indexOf(e);var s=o.uploadedFilesData.indexOf(e);("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==s)&&h?o.removeUploadedFile(e,r,i,t):i?o.removeFilesData(e,t):o.trigger("removing",r,function(i){i.cancel||o.removeFilesData(e,t)}),n&&!n.target.classList.contains(tc)&&o.checkActionComplete(!1)},p=0,d=a;p<d.length;p++){c(d[p])}}else r.filesData=o.getFilesData(),o.trigger("removing",r,function(e){e.cancel||o.clearAll()})}})},t.prototype.clearAll=function(){var e=this;if(ae(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var t={cancel:!1,filesData:this.filesData};this.trigger("clearing",t,function(t){t.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})},t.prototype.getFilesData=function(e){if(this.isServerBlazor){for(var t=0;t<this.filesData.length;t++)this.filesData[t].rawFile=this.base64String[t];return this.filesData}return ae(e)?this.filesData:this.getSelectedFiles(e)},t.prototype.pause=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.pauseUploading(i,t)},t.prototype.pauseUploading=function(e,t){for(var i=this.getFiles(e),s=0;s<i.length;s++)"3"===i[s].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[s],null),null,t)},t.prototype.getFiles=function(e){var t=[];return ae(e)||e instanceof Array?t=e:t.push(e),t},t.prototype.resume=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.resumeFiles(i,t)},t.prototype.resumeFiles=function(e,t){for(var i=this.getFiles(e),s=0;s<i.length;s++)"4"===i[s].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[s],null),null,t)},t.prototype.retry=function(e,t,i){e=e||this.filesData;var s=this.getFilesInArray(e);this.retryFailedFiles(s,t,i)},t.prototype.retryFailedFiles=function(e,t,i){for(var s=this.getFiles(e),n=0;n<s.length;n++)if("5"===s[n].statusCode||"0"===s[n].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(s[n],null),t);else{var o=void 0;i||(o=this.fileList[this.filesData.indexOf(s[n])]),this.reloadcanceledFile(null,s[n],o,i)}},t.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},t.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var i=0;i<t.length;i++)if("3"===t[i].statusCode){var s=this.getCurrentMetaData(t[i],null);s.file.statusCode="5",s.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(s),this.showHideUploadSpinner(t[i])}}else for(i=0;i<t.length;i++)"3"===t[i].statusCode&&(t[i].statusCode="5",t[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[i]))},t.prototype.showHideUploadSpinner=function(e){var t=this.getLiElement(e);if(!ae(t)&&ae(this.template)){var i=t.querySelector("."+sc);ga({target:i,width:"20px"}),Ia(i)}},Jh([rs({saveUrl:"",removeUrl:""},uc)],t.prototype,"asyncSettings",void 0),Jh([os(!1)],t.prototype,"sequentialUpload",void 0),Jh([os({})],t.prototype,"htmlAttributes",void 0),Jh([os("")],t.prototype,"cssClass",void 0),Jh([os(!0)],t.prototype,"enabled",void 0),Jh([os(null)],t.prototype,"template",void 0),Jh([os(!0)],t.prototype,"multiple",void 0),Jh([os(!0)],t.prototype,"autoUpload",void 0),Jh([rs({},dc)],t.prototype,"buttons",void 0),Jh([os("")],t.prototype,"allowedExtensions",void 0),Jh([os(0)],t.prototype,"minFileSize",void 0),Jh([os(3e7)],t.prototype,"maxFileSize",void 0),Jh([os(null)],t.prototype,"dropArea",void 0),Jh([ls([{}],pc)],t.prototype,"files",void 0),Jh([os(!0)],t.prototype,"showFileList",void 0),Jh([os(!1)],t.prototype,"directoryUpload",void 0),Jh([os("Default")],t.prototype,"dropEffect",void 0),Jh([cs()],t.prototype,"created",void 0),Jh([cs()],t.prototype,"actionComplete",void 0),Jh([cs()],t.prototype,"rendering",void 0),Jh([cs()],t.prototype,"beforeUpload",void 0),Jh([cs()],t.prototype,"fileListRendering",void 0),Jh([cs()],t.prototype,"selected",void 0),Jh([cs()],t.prototype,"uploading",void 0),Jh([cs()],t.prototype,"success",void 0),Jh([cs()],t.prototype,"failure",void 0),Jh([cs()],t.prototype,"removing",void 0),Jh([cs()],t.prototype,"beforeRemove",void 0),Jh([cs()],t.prototype,"clearing",void 0),Jh([cs()],t.prototype,"progress",void 0),Jh([cs()],t.prototype,"change",void 0),Jh([cs()],t.prototype,"chunkSuccess",void 0),Jh([cs()],t.prototype,"chunkFailure",void 0),Jh([cs()],t.prototype,"chunkUploading",void 0),Jh([cs()],t.prototype,"canceling",void 0),Jh([cs()],t.prototype,"pausing",void 0),Jh([cs()],t.prototype,"resuming",void 0),t=Jh([ps],t)}(Ns),fc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),gc=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};function vc(e,t){for(var i=re({},e),s=0,n=Object.keys(i);s<n.length;s++){var o=n[s];t.indexOf(o)<0&&ie(i,o)}return i}function yc(e,t){var i=40===t?0:e.childElementCount-1,s=i,n=e.querySelector(".e-selected");n&&n.classList.remove("e-selected");for(var o=0,r=e.children.length;o<r;o++)e.children[o].classList.contains("e-focused")&&(s=o,e.children[o].classList.remove("e-focused"),40===t?s++:s--,s===(40===t?e.childElementCount:-1)&&(s=i));-1!==(s=function e(t,i,s,n,o){void 0===o&&(o=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(s===(40===n?t.childElementCount-1:0)?s=40===n?0:t.childElementCount-1:40===n?s++:s--);i=t.children[s];if(i.classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++o===t.childElementCount)return s=-1;s=e(t,i,s,n,o)}return s}(e,e.children[s],s,t))&&(bi([e.children[s]],"e-focused"),e.children[s].focus())}var bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fc(t,e),gc([os("")],t.prototype,"iconCss",void 0),gc([os("")],t.prototype,"id",void 0),gc([os(!1)],t.prototype,"separator",void 0),gc([os("")],t.prototype,"text",void 0),gc([os("")],t.prototype,"url",void 0),gc([os(!1)],t.prototype,"disabled",void 0),t}(Ls),Cc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Sc=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},xc="e-menu-icon",wc="e-item",Ec="e-dropdown-popup",kc="e-separator",Tc="e-vertical",Lc=function(e){function t(t,i){return e.call(this,t,i)||this}return Cc(t,e),t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,t){for(var i,s=this.items.length,n=0,o=this.items.length;n<o;n++)if(t===this.items[n].text){s=n;break}for(var r=e.length-1;r>=0;r--)i=new bc(this,"items",e[r],!0),this.items.splice(s,0,i);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e,t){for(var i=!1,s=0,n=e.length;s<n;s++)for(var o=0,r=this.items.length;o<r;o++)if(e[s]===(t?this.items[o].id:this.items[o].text)){this.items.splice(o,1),i=!0;break}i&&this.getULElement()&&this.createItems()},t.prototype.createPopup=function(){var e,t=this.createElement("div",{className:Ec,id:this.element.id+"-popup"});document.body.appendChild(t),this.dropDown=new lo(t,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),Di(this.element,((e={})["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e["aria-owns"]=this.getPopUpElement().id,e.type="button",e["aria-label"]=this.element.textContent+" dropdownbutton",e)),this.cssClass&&bi([t],this.cssClass.split(" "))},t.prototype.getTargetElement=function(){return"string"==typeof this.target?Ii(this.target):this.target},t.prototype.createItems=function(e){var t,i,s,n,o=this.items,r=this.hasIcon(this.items,"iconCss"),a=this.getULElement();a?a.innerHTML="":a=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var l=0;l<o.length;l++){i=o[l];var h=this.enableHtmlSanitizer?ln.sanitize(i.text):i.text;s=this.createElement("li",{innerHTML:i.url?"":h,className:i.separator?wc+" "+kc:wc,attrs:{role:"menuItem",tabindex:"-1"},id:i.id?i.id:he("e-"+this.getModuleName()+"-item")}),i.url&&(s.appendChild(this.createAnchor(i)),s.classList.add("e-url")),i.iconCss?(t=this.createElement("span",{className:xc+" "+i.iconCss}),i.url?s.childNodes[0].appendChild(t):s.insertBefore(t,s.childNodes[0])):r&&!i.separator&&s.classList.add("e-blank-icon"),i.disabled&&s.classList.add("e-disabled"),n={item:i,element:s},this.trigger("beforeItemRender",n),a.appendChild(s)}e&&this.getPopUpElement().appendChild(a),r&&function(e){var t=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t.length){var i=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");i.classList.contains("e-url")&&(i=i.querySelector(".e-menu-url"));var s,n=i.querySelector(".e-menu-icon"),o=e.classList.contains("e-rtl");s=o?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var r=parseInt(getComputedStyle(n).fontSize,10)+parseInt(getComputedStyle(n)[s.margin],10)+parseInt(getComputedStyle(i).paddingLeft,10)+"px";t.forEach(function(e){e.classList.contains("e-url")?e.querySelector(".e-menu-url").style[s.padding]=r:e.style[s.padding]=r})}}(this.getPopUpElement())},t.prototype.hasIcon=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1},t.prototype.createAnchor=function(e){var t=this.enableHtmlSanitizer?ln.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:t,attrs:{href:e.url}})},t.prototype.initialize=function(){this.button=new Po({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=he("e-"+this.getModuleName())),this.appendArrowSpan(),this.createPopup(),this.setActiveElem([this.element])},t.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(Tc)>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){return this.getPopUpElement().classList.contains("e-popup-close")},t.prototype.destroy=function(){var t=this;if(e.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()){var i;if(this.element.querySelector("span.e-caret")&&Ti(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&Ci([this.element],i),Ci(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(e){t.element.removeAttribute(e)}),this.dropDown.destroy(),this.getPopUpElement()){var s=document.getElementById(this.getPopUpElement().id);s&&(Ci([s],["e-popup-open","e-popup-close"]),Ti(s))}this.disabled||this.unWireEvents()}},t.prototype.getPopUpElement=function(){return this.dropDown.element},t.prototype.getULElement=function(){return this.getPopUpElement().children[0]},t.prototype.wireEvents=function(){var e=this.getPopUpElement();this.delegateMousedownHandler=this.mousedownHandler.bind(this),Ct.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),Ct.add(this.element,"click",this.clickHandler,this),Ct.add(e,"click",this.clickHandler,this),Ct.add(this.element,"keydown",this.keyBoardHandler,this),Ct.add(e,"keydown",this.keyBoardHandler,this),this.rippleFn=ys(e,{selector:"."+wc})},t.prototype.keyBoardHandler=function(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}},t.prototype.upDownKeyHandler=function(e){(!this.target||38!==e.keyCode&&40!==e.keyCode)&&(e.preventDefault(),yc(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){(!this.target||13!==e.keyCode&&9!==e.keyCode)&&(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))},t.prototype.getLI=function(e){return"LI"===e.tagName?e:Mi(e,"li")},t.prototype.mousedownHandler=function(e){var t=e.target;this.canOpen()||Mi(t,'[id="'+this.getPopUpElement().id+'"]')||Mi(t,'[id="'+this.element.id+'"]')||this.closePopup(e)},t.prototype.clickHandler=function(e){var t=e.target,i=this.canOpen();if(Mi(t,'[id="'+this.element.id+'"]'))i?this.openPopUp(e):this.closePopup(e,this.activeElem[0]);else if(Mi(t,'[id="'+this.getPopUpElement().id+'"]')){var s=void 0,n=void 0,o=void 0,r=this.getLI(t);r&&(n=Array.prototype.indexOf.call(this.getULElement().children,r),(o=this.items[n])&&(s={element:r,item:o},this.trigger("select",s)),this.closePopup(e,this.activeElem[0]))}},t.prototype.openPopUp=function(e){var t=this;void 0===e&&(e=null),this.target||this.createItems(!0);var i={element:this.getULElement(),items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",i,function(e){if(!e.cancel){var i=t.getULElement();t.dropDown.show(null,t.element),bi([t.element],"e-active"),t.element.setAttribute("aria-expanded","true"),i.focus();var s={element:i,items:t.items};t.trigger("open",s)}})},t.prototype.closePopup=function(e,t){var i=this;void 0===e&&(e=null);var s={element:this.getULElement(),items:this.items,event:e,cancel:!1};this.trigger("beforeClose",s,function(e){if(!e.cancel){var s=i.getULElement(),n=s.querySelector(".e-selected");n&&n.classList.remove("e-selected"),i.dropDown.hide(),Ci(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),t&&t.focus();var o={element:s,items:i.items};i.trigger("close",o),!i.target&&s&&Ti(s)}})},t.prototype.unWireEvents=function(){Ct.remove(document,"mousedown touchstart",this.delegateMousedownHandler),Ct.remove(this.element,"click",this.clickHandler),Ct.remove(this.getPopUpElement(),"click",this.clickHandler),Ct.remove(this.element,"keydown",this.keyBoardHandler),Ct.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.rippleFn()},t.prototype.onPropertyChanged=function(e,t){this.button.setProperties(vc(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.dropDown.setProperties(vc(e,["enableRtl"]));for(var i=this.getPopUpElement(),s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.canOpen()||this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass.indexOf(Tc)>-1)Bi(this.element.querySelector("span.e-caret"),["e-icon-bottom"],["e-icon-right"]);t.cssClass&&Ci([i],t.cssClass.split(" ")),e.cssClass&&bi([i],e.cssClass.split(" "));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.getULElement()&&this.createItems()}}},t.prototype.focusIn=function(){this.element.focus()},Sc([os("")],t.prototype,"content",void 0),Sc([os("")],t.prototype,"cssClass",void 0),Sc([os(!1)],t.prototype,"disabled",void 0),Sc([os("")],t.prototype,"iconCss",void 0),Sc([os("Left")],t.prototype,"iconPosition",void 0),Sc([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Sc([ls([],bc)],t.prototype,"items",void 0),Sc([os("")],t.prototype,"target",void 0),Sc([cs()],t.prototype,"beforeItemRender",void 0),Sc([cs()],t.prototype,"beforeOpen",void 0),Sc([cs()],t.prototype,"beforeClose",void 0),Sc([cs()],t.prototype,"close",void 0),Sc([cs()],t.prototype,"open",void 0),Sc([cs()],t.prototype,"select",void 0),Sc([cs()],t.prototype,"created",void 0),t=Sc([ps],t)}(Ns),Dc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ic=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Oc="EJS-SPLITBUTTON",Ac=function(e){function t(t,i){return e.call(this,t,i)||this}return Dc(t,e),t.prototype.preRender=function(){var e=this.element;if(e.tagName===Oc){for(var t=ee("ej2_instances",e),i=this.createElement("button",{attrs:{type:"button"}}),s=this.createElement(Oc,{className:"e-"+this.getModuleName()+"-wrapper"}),n=0,o=e.attributes.length;n<o;n++)i.setAttribute(e.attributes[n].nodeName,e.attributes[n].nodeValue);e.parentNode.insertBefore(s,e),Ti(e),e=i,s.appendChild(e),te("ej2_instances",t,e),this.wrapper=s,this.element=e}this.element.id||(this.element.id=he("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(t,i){e.prototype.addItems.call(this,t,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(t,i){e.prototype.removeItems.call(this,t,i),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add("e-rtl"),this.cssClass&&bi([this.wrapper],this.cssClass.split(" "))},t.prototype.createPrimaryButton=function(){var e={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new Po(e),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e,t,i=this;t=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"}),this.wrapper.appendChild(t),(e={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target}).beforeItemRender=function(e){i.trigger("beforeItemRender",e)},e.open=function(e){i.trigger("open",e)},e.close=function(e){i.trigger("close",e)},e.select=function(e){i.trigger("select",e)},e.beforeOpen=function(e){var t=new Mc;return i.trigger("beforeOpen",e,function(e){t.resolve(e)}),t},e.beforeClose=function(e){var t=new Mc;return i.trigger("beforeClose",e,function(e){t.resolve(e)}),t},this.secondaryBtnObj=new Lc(e),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(t),this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],Ct.remove(this.getPopUpElement(),"keydown",this.secondaryBtnObj.keyBoardHandler),this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")},t.prototype.setAria=function(){Di(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.secondaryBtnObj.dropDown.element.id})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var t=this,i=["e-rtl"];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var s=document.getElementById(this.element.id);s&&s.parentElement===this.wrapper&&(this.wrapper.tagName===Oc?(this.wrapper.innerHTML="",Ci([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),Ci([this.wrapper],this.cssClass.split(" "))):(Ci([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(e){t.element.removeAttribute(e)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),Li(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),e.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},t.prototype.wireEvents=function(){Ct.add(this.element,"click",this.primaryBtnClickHandler,this),Ct.add(this.getPopUpElement(),"keydown",this.keyBoardHandler,this),new Qs(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})},t.prototype.unWireEvents=function(){Ct.remove(this.element,"click",this.primaryBtnClickHandler),Ce(this.element,Qs).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){switch(e.action){case"altdownarrow":this.clickHandler(e)}},t.prototype.onPropertyChanged=function(e,t){var i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(vc(e,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(vc(e,i));for(var s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"cssClass":t.cssClass&&Ci([this.wrapper],t.cssClass.split(" ")),bi([this.wrapper],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?bi([this.wrapper],"e-rtl"):Ci([this.wrapper],"e-rtl")}}},t.prototype.focusIn=function(){this.element.focus()},Ic([os("")],t.prototype,"content",void 0),Ic([os("")],t.prototype,"cssClass",void 0),Ic([os(!1)],t.prototype,"disabled",void 0),Ic([os("")],t.prototype,"iconCss",void 0),Ic([os("Left")],t.prototype,"iconPosition",void 0),Ic([ls([],bc)],t.prototype,"items",void 0),Ic([os("")],t.prototype,"target",void 0),Ic([cs()],t.prototype,"beforeItemRender",void 0),Ic([cs()],t.prototype,"beforeOpen",void 0),Ic([cs()],t.prototype,"beforeClose",void 0),Ic([cs()],t.prototype,"click",void 0),Ic([cs()],t.prototype,"close",void 0),Ic([cs()],t.prototype,"open",void 0),Ic([cs()],t.prototype,"select",void 0),Ic([cs()],t.prototype,"created",void 0),t=Ic([ps],t)}(Lc),Mc=function(){return function(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}();var Pc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Nc=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Rc="e-btn-content",Bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),Nc([os(null)],t.prototype,"template",void 0),Nc([os(16)],t.prototype,"width",void 0),Nc([os("Left")],t.prototype,"position",void 0),t}(Ls),Hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),Nc([os(400)],t.prototype,"duration",void 0),Nc([os("None")],t.prototype,"effect",void 0),Nc([os("ease")],t.prototype,"easing",void 0),t}(Ls),Fc=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.step=1,s}return Pc(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.render=function(){ye()&&(this.isServerRendered=!1),e.prototype.render.call(this),this.init(),this.wireEvents(),this.setAria(),this.renderComplete()},t.prototype.start=function(e){this.isPaused=!1,this.startProgress(e||this.percent,this.progressTime)},t.prototype.stop=function(){this.isPaused=!0,cancelAnimationFrame(this.timerId)},t.prototype.progressComplete=function(){this.isPaused=!1,this.finishProgress()},t.prototype.getModuleName=function(){return"progress-btn"},t.prototype.destroy=function(){var t=this,i=["e-hide-spinner","e-progress-active","e-round-corner","e-"+e.prototype.getModuleName.call(this),"e-spin-"+this.spinSettings.position.toLowerCase()];e.prototype.destroy.call(this),this.unWireEvents(),this.element.innerHTML="",this.cssClass&&(i=i.concat(this.cssClass.split(" "))),Ci([this.element],i),(this.element.getAttribute("class")?["aria-label","aria-valuemin","aria-valuemax","aria-valuenow"]:["aria-label","aria-valuemin","aria-valuemax","aria-valuenow","class"]).forEach(function(e){t.element.removeAttribute(e)}),this.disabled&&this.element.removeAttribute("disabled")},t.prototype.init=function(){this.element.classList.add("e-"+e.prototype.getModuleName.call(this)),this.setContent(),this.createSpinner(),this.enableProgress&&this.createProgress()},t.prototype.createSpinner=function(){var e=this.createElement("span",{className:"e-spinner"});this.setSpinPosition(e),ga({target:e,width:this.spinSettings.width||16,template:this.spinSettings.template},this.createElement)},t.prototype.getSpinner=function(){return this.element.getElementsByClassName("e-spinner")[0]},t.prototype.getProgress=function(){return this.element.getElementsByClassName("e-progress")[0]},t.prototype.setSpinPosition=function(e){var t=this.spinSettings.position||"Left";"Left"===t||"Top"===t?this.element.insertBefore(e,this.element.getElementsByClassName(Rc)[0]):this.element.appendChild(e),this.element.classList.add("e-spin-"+t.toLowerCase())},t.prototype.createProgress=function(){this.element.appendChild(this.createElement("span",{className:"e-progress"}))},t.prototype.setContent=function(){var e;ye()?(e=this.content,this.enableHtmlSanitizer&&(e=ln.sanitize(this.content)),this.setContentIcon(e)):(e=this.element.innerHTML,this.enableHtmlSanitizer&&(e=ln.sanitize(this.element.innerHTML)),this.element.innerHTML="",this.element.appendChild(this.createElement("span",{className:Rc,innerHTML:e})))},t.prototype.setContentIcon=function(e){var t=this.createElement("span",{className:Rc,innerHTML:e});if(this.iconCss){var i=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(i.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var s=t.childNodes[0];!s||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?t.appendChild(i):t.insertBefore(i,s)}this.element.appendChild(t)},t.prototype.clickHandler=function(){this.element.classList.contains("e-progress-active")||this.startProgress()},t.prototype.startProgress=function(e,t){var i=this.element.classList,s=i.contains("e-vertical");i.add("e-progress-active"),i.contains("e-hide-spinner")||Ia(this.element),this.startAnimate(Date.now(),t||0,t?Date.now()-1*this.duration/100:Date.now(),e||0,0,this.step,0,s),this.startContAnimate()},t.prototype.startAnimate=function(e,t,i,s,n,o,r,a){var l=this;try{var h,c=e-i,p=this.duration*o/100,d=c?c<p?c-p:c%p:0;this.progressTime=t=t+c-d,i=e-d,s+=(c-d)/this.duration*100,h={percent:n=(t-r)%p==0||100===s?s:n,currentDuration:t,step:o},this.eIsVertical=a,0===s?this.trigger("begin",h,function(e){l.successCallback(e,s,n,t,r,d,i)}):100===s||t===this.duration?this.trigger("end",h,function(e){l.successCallback(e,s,n,t,r,d,i)}):this.trigger("progress",h,function(e){l.successCallback(e,s,n,t,r,d,i)})}catch(e){cancelAnimationFrame(this.timerId),this.trigger("fail",e)}},t.prototype.successCallback=function(e,t,i,s,n,o,r){var a=this,l=t,h=i,c=o,p=s,d=n,u=r,m=this.eIsVertical;l!==e.percent&&e.percent!==h&&(l=e.percent),this.percent=l,this.step=e.step,(p-d)%(this.duration*e.step/100)!=0&&100!==l||(this.timerId=requestAnimationFrame(function(){a.enableProgress&&(a.getProgress().style[m?"height":"width"]=l+"%"),a.element.setAttribute("aria-valuenow",l.toString())}),h=l,d=p),this.isPaused||(p<this.duration&&l<100?this.interval=window.setTimeout(function(){a.startAnimate(Date.now(),p,u,l,h,e.step,d,m)},this.duration/100-c):this.interval=window.setTimeout(function(){a.progressTime=a.percent=0,a.enableProgress&&(a.getProgress().style[m?"height":"width"]="0%"),a.element.setAttribute("aria-valuenow","0"),a.hideSpin()},100))},t.prototype.startContAnimate=function(){var e=this,t=this.element.getElementsByClassName(Rc)[0];"None"!==this.animationSettings.effect?new vs({}).animate(t,{duration:this.animationSettings.duration,name:"Progress"+this.animationSettings.effect,timingFunction:this.animationSettings.easing,begin:function(){"Center"===e.spinSettings.position&&e.setSpinnerSize()},end:function(){t.classList.add("e-animate-end")}}):"Center"===this.spinSettings.position&&this.setSpinnerSize()},t.prototype.finishProgress=function(){var e,t=this.element.classList,i=t.contains("e-vertical");t.add("e-progress-active");for(var s=this.percent;s<100;s++)(s+=10)>100&&(s=100),this.enableProgress&&(this.getProgress().style[i?"height":"width"]=this.percent<100?s+"%":"100%");this.element.setAttribute("aria-valuenow","0"),this.hideSpin(),e={step:this.step,currentDuration:this.progressTime,percent:100},clearTimeout(this.interval),this.trigger("end",e),this.progressTime=this.percent=0},t.prototype.setSpinnerSize=function(){var e=this.element.getElementsByClassName(Rc)[0],t=this.getSpinner();t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate")},t.prototype.hideSpin=function(){var e=this.element.getElementsByClassName(Rc)[0];if(this.element.classList.contains("e-hide-spinner")||Aa(this.element),this.element.classList.remove("e-progress-active"),"None"!==this.animationSettings.effect&&e.classList.remove("e-animate-end"),"Center"===this.spinSettings.position){var t=this.getSpinner();e.classList.remove("e-cont-animate"),t.style.width="auto",t.style.height="auto"}},t.prototype.setIconSpan=function(){var e=this.element.getElementsByClassName(Rc)[0],t=this.element.getElementsByClassName("e-btn-icon")[0];!e.childNodes[0]||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?e.appendChild(t):e.insertBefore(t,e.childNodes[0])},t.prototype.setAria=function(){Di(this.element,{"aria-label":this.element.textContent+" progress","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0"})},t.prototype.wireEvents=function(){Ct.add(this.element,"click",this.clickHandler,this)},t.prototype.unWireEvents=function(){Ct.remove(this.element,"click",this.clickHandler)},t.prototype.onPropertyChanged=function(t,i){var s=this.element,n=!1;this.element.querySelector(".e-spinner-pane").classList.contains("e-spin-show")&&(n=!0),e.prototype.onPropertyChanged.call(this,t,i);for(var o=0,r=Object.keys(t);o<r.length;o++){switch(r[o]){case"content":if(ye()){var a=this.element.querySelector(".e-btn-content");this.iconCss?"Left"===this.iconPosition||"Top"===this.iconPosition?a.childNodes[1].textContent=this.content:a.childNodes[0].textContent=this.content:a.textContent=this.content}else this.setContent(),this.createSpinner(),n&&(Ia(this.element),n=!1),this.enableProgress&&this.createProgress();s.setAttribute("aria-label",s.textContent+" progress");break;case"iconCss":i.iconCss||this.setIconSpan();break;case"iconPosition":this.setIconSpan();break;case"enableProgress":t.enableProgress?this.createProgress():Li(this.getProgress());break;case"spinSettings":t.spinSettings.position&&(s.classList.remove("e-spin-"+i.spinSettings.position.toLowerCase()),this.setSpinPosition(this.getSpinner())),(t.spinSettings.template||t.spinSettings.width)&&(s.removeChild(this.getSpinner()),this.createSpinner())}}},t.prototype.focusIn=function(){this.element.focus()},Nc([os(!1)],t.prototype,"enableProgress",void 0),Nc([os(2e3)],t.prototype,"duration",void 0),Nc([os("Left")],t.prototype,"iconPosition",void 0),Nc([os("")],t.prototype,"iconCss",void 0),Nc([os(!1)],t.prototype,"disabled",void 0),Nc([os(!1)],t.prototype,"isPrimary",void 0),Nc([os("")],t.prototype,"cssClass",void 0),Nc([os("")],t.prototype,"content",void 0),Nc([os(!1)],t.prototype,"isToggle",void 0),Nc([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Nc([rs({},Bc)],t.prototype,"spinSettings",void 0),Nc([rs({},Hc)],t.prototype,"animationSettings",void 0),Nc([cs()],t.prototype,"created",void 0),Nc([cs()],t.prototype,"begin",void 0),Nc([cs()],t.prototype,"progress",void 0),Nc([cs()],t.prototype,"end",void 0),Nc([cs()],t.prototype,"fail",void 0),t=Nc([ps],t)}(Po),jc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Vc=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},zc="e-switch-ctrl-btn",_c="e-hide-hex-value",qc="e-hide-switchable-value",Wc="e-hide-value",Uc="e-hsv-color",Gc="e-selected-value",Yc="e-mode-switch-btn",Xc="e-nocolor-item",Kc="e-opacity-value",Zc="e-preview-container",Qc="e-show-value",Jc="e-selected",$c="e-tile",ep=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],tp=function(e){function t(t,i){return e.call(this,t,i)||this}return jc(t,e),t.prototype.preRender=function(){var e=this.element;this.formElement=Mi(this.element,"form"),this.formElement&&Ct.add(this.formElement,"reset",this.formResetHandler,this);this.l10n=new Js("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||bi([this.container.parentElement],"e-hide-opacity"),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),Di(this.element,{tabindex:"-1",spellcheck:"false"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var t=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(t="");var i=t.slice(0,7);ae(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:i},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&bi([e],this.cssClass.split(" ")),this.tileRipple=ys(this.container,{selector:"."+$c}),this.ctrlBtnRipple=ys(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),bt.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,t=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(t),this.splitBtn=new Ac({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,open:this.onOpen.bind(this),click:function(t){e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(t);var i=this.createElement("span",{className:"e-split-preview"});Ii(".e-selected-color",t).appendChild(i),i.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var s=this.getPopupEle();if(bi([s],"e-colorpicker-popup"),this.cssClass&&bi([s],this.cssClass.split(" ")),bt.isDevice){var n=this.getPopupInst();n.relateTo=document.body,n.position={X:"center",Y:"center"},n.targetType="container",n.collision={X:"fit",Y:"fit"},n.offsetY=4,s.style.zIndex=co(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(e){this.trigger("open",{element:this.container})},t.prototype.getPopupInst=function(){return Ce(this.getPopupEle(),lo)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(t){var i=new Mc;return e.trigger("beforeOpen",t,function(s){if(!s.cancel){var n=e.getPopupEle();n.style.top=ge(0+pageYOffset),n.style.left=ge(0+pageXOffset),n.style.display="block",e.createWidget(),n.style.display="",bt.isDevice&&(e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,n),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(n.style.zIndex)-1).toString())}t.cancel=s.cancel,i.resolve(s)}),i},this.splitBtn.beforeClose=function(t){var i=new Mc;if(ae(t.event))i.resolve(t);else{var s={element:e.container,event:t.event,cancel:!1};e.trigger("beforeClose",s,function(s){bt.isDevice&&t.event.target===e.modal&&(s.cancel=!0),s.cancel||e.onPopupClose(),t.cancel=s.cancel,i.resolve(s)})}return i}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",Ii(".e-split-preview",this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",Ci([this.container],["e-color-picker","e-color-palette"]),bt.isDevice&&this.modal&&(Ci([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if(Bi(this.container,["e-color-palette"],["e-color-picker"]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var t=Object.keys(this.presetColors);if(1===t.length)this.appendPalette(this.presetColors[t[0]],t[0],e);else for(var i=0,s=t.length;i<s;i++)this.appendPalette(this.presetColors[t[i]],t[i],e);Oi(".e-row",e).length>10&&bi([e],"e-palette-group")}else this.appendPalette(ep,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var n=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=ge(this.container.children[0].offsetWidth+n+n),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.firstPaletteFocus=function(){Ii("."+Jc,this.container.children[0])||Oi(".e-palette",this.container)[0].focus()},t.prototype.appendPalette=function(e,t,i){var s,n,o,r=this.createElement("div",{className:"e-palette",attrs:{tabindex:"0"}});i?i.appendChild(r):this.appendElement(r);for(var a=0,l=e.length;a<l;a++)0!==a&&a%this.columns!=0||(s=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),r.appendChild(s)),o=this.roundValue(e[a]).toLowerCase(),n=this.createElement("span",{className:$c,attrs:{role:"gridcell","aria-label":o,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:n,presetName:t,value:e[a]}),s.appendChild(n),this.value===o&&(this.addTileSelection(n),r.focus()),n.style.backgroundColor=this.convertToRgbString(this.hexToRgb(o))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(Xc),this.value||(e.classList.add(Jc),Mi(e,".e-palette").focus()),["aria-selected","aria-label"].forEach(function(t){e.removeAttribute(t)}),e.style.backgroundColor=""},t.prototype.appendElement=function(e,t){void 0===t&&(t=0);var i=this.container.children[t];i?this.container.insertBefore(e,i):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e.classList.add(Jc),e.setAttribute("aria-selected","true")},t.prototype.createPicker=function(){Bi(this.container,["e-color-picker"],["e-color-palette"]);var e=this.createElement("div",{className:"e-hsv-container"});this.appendElement(e),e.appendChild(this.createElement("div",{className:Uc}));var t=this.createElement("span",{className:"e-handler",attrs:{tabindex:"0"}});e.appendChild(t),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){void 0===e&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return Ii(".e-hsv-container",this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),t=Ii("."+Uc,this.container);this.enableRtl?e.style.left=ge(t.offsetWidth*Math.abs(100-this.hsv[1])/100):e.style.left=ge(t.offsetWidth*this.hsv[1]/100),e.style.top=ge(t.offsetHeight*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var t=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(t,e.children[0]);var i=this.createElement("div",{className:"e-hue-slider"});t.appendChild(i),this.hueSlider=new Gh({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),t.appendChild(i),this.createOpacitySlider(i))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new Gh({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var t=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(t),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right";Ii(".e-slider-track",this.opacitySlider.element).style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)"},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var t=e.value,i=this.rgbToHex(this.rgb);this.hsv[3]=t/100,this.rgb[3]=t/100;var s=this.rgbToHex(this.rgb);this.updateOpacityInput(t);var n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.triggerEvent(s,i,n)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Wc)){var t=Ce(Ii("."+Kc,this.container),_a);t.value=e,t.dataBind()}},t.prototype.createPreview=function(e){var t=this.createElement("div",{className:Zc});e.appendChild(t);var i=this.createElement("span",{className:"e-preview e-current"});t.appendChild(i);var s=this.convertToRgbString(this.rgb);i.style.backgroundColor=s,i=this.createElement("span",{className:"e-preview e-previous"}),t.appendChild(i),i.style.backgroundColor=s},t.prototype.isPicker=function(){return!this.container.classList.contains("e-color-palette")},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,t,i,s){var n=this,o=new _a({value:t,placeholder:i,min:0,max:s,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(e){e.event&&n.inputHandler(e.event)}});o.createElement=this.createElement,o.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),t=this.getWrapper();if(e&&!t.classList.contains(Wc)||!e&&t.classList.contains(Qc)){var i=this.createElement("div",{className:Gc});e?this.appendElement(i,2):this.appendElement(i,1);var s=this.createElement("div",{className:"e-input-container"});if(i.appendChild(s),t.classList.contains("e-hide-valueswitcher")||this.appendValueSwitchBtn(i),!t.classList.contains(_c)){var n=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false"}});s.appendChild(n),Na.createInput({element:n,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),Na.setValue(this.value.slice(0,7),n),n.addEventListener("input",this.inputHandler.bind(this))}if(!t.classList.contains(qc)){var o=void 0,r=void 0;this.isRgb?(o="RGB",r=this.rgb):(o="HSV",r=this.hsv);for(var a=["rh","gs","bv"],l=0;l<3;l++)this.createNumericInput(s.appendChild(this.createElement("input",{className:"e-"+a[l]+"-value"})),r[l],o[l],255);this.enableOpacity&&this.appendOpacityValue(s)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:Kc})),100*this.rgb[3],"A",100)},t.prototype.appendValueSwitchBtn=function(e){var t=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn e-value-switch-btn"});e.appendChild(t),this.isPicker()&&!this.getWrapper().classList.contains(qc)&&t.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:zc});if(this.container.appendChild(e),this.showButtons){var t=this.createElement("div",{className:"e-ctrl-btn"});e.appendChild(t);var i=this.l10n.getConstant("Apply");t.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small e-apply",attrs:{title:i}}));var s=this.l10n.getConstant("Cancel");t.appendChild(this.createElement("button",{innerHTML:s,className:"e-btn e-css e-flat e-small e-cancel",attrs:{title:s}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Yc,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});Ii("."+zc,this.container).insertBefore(e,Ii(".e-ctrl-btn",this.container))},t.prototype.createDragTooltip=function(){var e=this,t=new Xr({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(t){e.tooltipEle=t.element},animation:{open:{effect:"None"},close:{effect:"None"}}});t.createElement=this.createElement,t.appendTo(this.container),t.open(this.container),this.tooltipEle.style.zIndex=co(this.tooltipEle).toString(),Ii(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return Ce(this.container,Xr)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add("e-disabled"):this.getWrapper().classList.remove("e-disabled"),this.showButtons&&[].slice.call(Oi(".e-btn",this.container)).forEach(function(t){e?Di(t,{disabled:""}):t.removeAttribute("disabled")})},t.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e){void 0===e&&(e=!1);var t=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var i=this.rgbToHex(this.rgb),s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.updateInput(i),this.triggerEvent(i,t,s,e)},t.prototype.updateInput=function(e){var t=this.getWrapper();t.classList.contains(Wc)||(t.classList.contains(_c)||Na.setValue(e.substr(0,7),Ii(".e-hex",this.container)),t.classList.contains(qc)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),Ii(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,Ii("."+Zc+" .e-current",this.container).style.backgroundColor=e,Ii("."+Zc+" .e-previous",this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return Ii(".e-handler",this.container)},t.prototype.removeTileSelection=function(){[].slice.call(Oi("."+Jc,this.container.children[0])).forEach(function(e){e.classList.remove(Jc),e.setAttribute("aria-selected","false")})},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)})},t.prototype.getValue=function(e,t){if(e||(e=this.value),t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var s=this.rgbToHex(i);return"hex"===t?s.slice(0,7):s}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){s=this.rgbToHex(i);return"hex"===t?s.slice(0,7):s}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var n=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(n=n.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(n):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,n)):"hex"===t?e.slice(0,7):"a"===t?n[3].toString():"null"},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();Ct.add(e,"keydown",this.pickerKeyDown,this),Ct.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),Ct.add(Ii(".e-previous",this.container),"click",this.previewHandler,this)}else Ct.add(this.container,"click",this.paletteClickHandler,this),Ct.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,Di(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=Ii("."+zc,this.container);e&&Ct.add(e,"click",this.btnClickHandler,this)},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:e.preventDefault();var t=this.rgbToHex(this.rgb);this.enterKeyHandler(t,e)}},t.prototype.enterKeyHandler=function(e,t){this.triggerChangeEvent(e),this.inline||(this.closePopup(t),this.splitBtn.element.focus())},t.prototype.closePopup=function(e){var t=this,i={element:this.container,event:e,cancel:!1};this.trigger("beforeClose",i,function(e){e.cancel||(t.splitBtn.toggle(),t.onPopupClose())})},t.prototype.triggerChangeEvent=function(e){var t=e.slice(0,7);this.trigger("change",{currentValue:{hex:t,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:t}),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:t},!0),this.element.value=t||"#000000"},t.prototype.handlerDragPosition=function(e,t,i){i.preventDefault(),this.hsv[e]+=t*(i.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)},t.prototype.handlerDown=function(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),Ct.add(document,"mousemove touchmove",this.handlerMove,this),Ct.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){var t,i;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(t=Math.abs(e.pageX-pageXOffset),i=Math.abs(e.pageY-pageYOffset)):(t=Math.abs(e.changedTouches[0].pageX-pageXOffset),i=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(t,i);var s=this.getDragHandler();parseInt(s.style.left,10),parseInt(s.style.top,10);this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(s),this.tooltipEle.style.transform||(Math.abs(this.clientX-t)>8||Math.abs(this.clientY-i)>8)&&(Ii("."+Uc,this.container).style.cursor="pointer",s.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",s.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,t){var i=Ii("."+Uc,this.container),s=i.getBoundingClientRect();e=this.enableRtl?e>s.right?0:Math.abs(e-s.right):e>s.left?Math.abs(e-s.left):0,t=t>s.top?Math.abs(t-s.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,t-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,e-i.offsetLeft))/i.offsetWidth))/10},t.prototype.handlerEnd=function(e){"touchend"!==e.type&&e.preventDefault(),Ct.remove(document,"mousemove touchmove",this.handlerMove),Ct.remove(document,"mouseup touchend",this.handlerEnd);var t=this.getDragHandler();Ii("."+Uc,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",t.classList.remove("e-hide-handler")),this.inline||this.showButtons||this.closePopup(e)},t.prototype.btnClickHandler=function(e){var t=e.target;Mi(t,"."+Yc)?(e.stopPropagation(),this.switchToPalette()):(t.classList.contains("e-apply")||t.classList.contains("e-cancel"))&&this.ctrlBtnClick(t,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),Ti(Ii(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Wc)||Li(Ii("."+Gc,this.container)),Ti(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=ge(0+pageXOffset),e.style.top=ge(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(e){e.target.parentElement;this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,t,i,s){for(var n,o=["e-rh-value","e-gs-value","e-bv-value"],r=0,a=o.length;r<a;r++)(n=Ce(Ii("."+o[r],this.container),_a)).value=Math.round(e[r]),t&&(n.placeholder=o[r].substr(i,1).toUpperCase(),n.max=s?s[r]:255),n.dataBind()},t.prototype.previewHandler=function(e){var t=e.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(t.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var s=this.rgbToHex(this.rgb),n=this.rgbToHsv.apply(this,this.rgb);n[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:n[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(n[0]),this.enableOpacity&&n[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*n[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=n,this.setHandlerPosition(),this.updateInput(s),Ii("."+Zc+" .e-current",this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(s,i,this.convertToRgbString(this.rgb))},t.prototype.paletteClickHandler=function(e){e.preventDefault();var t=e.target;if(t.classList.contains($c)){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(Xc))this.noColorTile();else{var i=t.getAttribute("aria-label"),s=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Qc)&&this.updateInput(i),this.triggerEvent(i,s,this.convertToRgbString(this.rgb))}this.inline||this.showButtons||this.closePopup(e)}else Mi(t,"."+Yc)?this.switchToPicker():t.classList.contains("e-apply")||t.classList.contains("e-cancel")?this.ctrlBtnClick(t,e):this.getWrapper().classList.contains(Qc)&&Mi(t,".e-value-switch-btn")&&this.formatSwitchHandler(e)},t.prototype.noColorTile=function(e){void 0===e&&(e=!1);var t=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",t,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(Oi(".e-palette",this.container)).forEach(function(e){Ti(e)}),e.classList.contains(Qc)&&Ti(Ii("."+Gc,this.container)),this.container.style.width="";var t=Ii(".e-custom-palette",this.container);this.presetColors&&Li(t),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,t){if(e.classList.contains("e-apply")){var i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(t),this.splitBtn.element.focus())},t.prototype.paletteKeyDown=function(e){var t=e.target;if(t.classList.contains("e-palette")){var i,s,n=[].slice.call(Oi("."+$c,t)),o=n.filter(function(e){return e.classList.contains("e-selected")}).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),i=o?n[this.tilePosition(n,o,this.enableRtl?-1:1)]:n[this.enableRtl?n.length-1:0],this.keySelectionChanges(i);break;case 37:e.preventDefault(),i=o?n[this.tilePosition(n,o,this.enableRtl?1:-1)]:n[this.enableRtl?0:n.length-1],this.keySelectionChanges(i);break;case 38:e.preventDefault(),i=n[s=o?this.tilePosition(n,o,-this.columns):0]?n[s]:n[s-this.columns],this.keySelectionChanges(i);break;case 40:e.preventDefault(),n[s=o?this.tilePosition(n,o,this.columns):n.length-1]?i=n[s]:(s%=n.length,i=n[s+=n[n.length-1].parentElement.childElementCount]),this.keySelectionChanges(i);break;case 13:if(e.preventDefault(),o){var r=o.getAttribute("aria-label");this.enterKeyHandler(r||"",e)}}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(Xc))this.noColorTile(!0);else{var t=e.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Qc)&&this.updateInput(t),this.triggerEvent(t,i,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,t,i){var s=(e=Array.prototype.slice.call(e)).length,n=this.columns-e[s-1].parentElement.childElementCount,o=e.indexOf(t);return(o+=i)<0?o+=s+n:o%=s+n,o},t.prototype.inputHandler=function(e){var t,i,s=e.target;if(s.value.length)switch(Ii(".e-float-text",s.parentElement).textContent){case"HEX":var n="";if(("#"===s.value[0]&&5!==s.value.length||"#"!==s.value[0]&&4!==s.value.length)&&(n=this.roundValue(s.value)),9!==n.length)return;i=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(n+n.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),i,s.value);break;case"R":this.rgb[0]!==Number(s.value)&&(i=this.rgbToHex(this.rgb),this.rgb[0]=Number(s.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"G":this.rgb[1]!==Number(s.value)&&(i=this.rgbToHex(this.rgb),this.rgb[1]=Number(s.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"B":this.rgb[2]!==Number(s.value)&&(i=this.rgbToHex(this.rgb),this.rgb[2]=Number(s.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"H":this.hueSlider.value=Number(s.value);break;case"S":this.hsv[1]!==Number(s.value)&&(this.hsv[1]=Number(s.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(s.value)&&(this.hsv[2]=Number(s.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(s.value)}},t.prototype.inputValueChange=function(e,t,i){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var s=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||s);var n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.triggerEvent(s,t,n)},t.prototype.triggerEvent=function(e,t,i,s){void 0===s&&(s=!1);var n=e.slice(0,7);this.showButtons||s?this.trigger("select",{currentValue:{hex:n,rgba:i},previousValue:{hex:t.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(t))}}):(this.trigger("change",{currentValue:{hex:n,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.setProperties({value:e},!0),this.element.value=n||"#000000")},t.prototype.destroy=function(){var t=this,i=this.getWrapper();e.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(e){t.element.removeAttribute(e)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&Ti(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),Ti(i)),this.container=null,this.formElement&&Ct.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var e=this.getTooltipInst();e.close(),e.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){this.getWrapper();var e=this.getDragHandler();Ct.remove(e,"keydown",this.pickerKeyDown),Ct.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&Ct.remove(Ii("."+zc,this.container),"click",this.btnClickHandler),Ct.remove(Ii(".e-previous",this.container),"click",this.previewHandler)}else Ct.remove(this.container,"click",this.paletteClickHandler),Ct.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",s=1,n=e.length;s<n;s++)i+=e.charAt(s)+e.charAt(s);e="#"+i,t=9}return 7===t&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),s=[];return s.push(i>>16&255),s.push(i>>8&255),s.push(255&i),s.push(t),s},t.prototype.rgbToHsv=function(e,t,i,s){if(this.rgb&&!this.rgb.length)return[];e/=255,t/=255,i/=255;var n,o,r=Math.max(e,t,i),a=Math.min(e,t,i),l=r,h=r-a;if(o=0===r?0:h/r,r===a)n=0;else{switch(r){case e:n=(t-i)/h+(t<i?6:0);break;case t:n=(i-e)/h+2;break;case i:n=(e-t)/h+4}n/=6}var c=[Math.round(360*n),Math.round(1e3*o)/10,Math.round(1e3*l)/10];return ae(s)||c.push(s),c},t.prototype.hsvToRgb=function(e,t,i,s){var n,o,r,a,l,h,c,p;if(i/=100,0===(t/=100))return n=o=r=i,[Math.round(255*n),Math.round(255*o),Math.round(255*r),s];switch(h=i*(1-t),c=i*(1-t*(l=(e/=60)-(a=Math.floor(e)))),p=i*(1-t*(1-l)),a){case 0:n=i,o=p,r=h;break;case 1:n=c,o=i,r=h;break;case 2:n=h,o=i,r=p;break;case 3:n=h,o=c,r=i;break;case 4:n=p,o=h,r=i;break;default:n=i,o=h,r=c}var d=[Math.round(255*n),Math.round(255*o),Math.round(255*r)];return ae(s)||d.push(s),d},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(ae(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var t=Ii("."+zc,this.container);e?t?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):t&&(this.showButtons?Ti(Ii("."+Yc,t)):Li(t))},t.prototype.changeShowBtnProps=function(e){var t=Ii("."+zc,this.container);e?(t&&Li(t),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?Ti(Ii(".e-ctrl-btn",t)):Li(t)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),Ti(Mi(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var t=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');t&&this.addTileSelection(t)}},t.prototype.setInputEleProps=function(e){Li(Ii("."+Gc,this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps(e)),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,t){var i=this.getWrapper(),s=this.getPopupEle();t&&Ci([i,s],t.split(" ")),e&&bi([i,s],e.split(" "))},t.prototype.changeRtlProps=function(e){e?bi([this.getWrapper()],"e-rtl"):Ci([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){Ti(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var t=this.getWrapper();e?(Ci([this.container.parentElement],"e-hide-opacity"),this.createOpacitySlider(Ii(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),t.classList.contains(Wc)||t.classList.contains(qc)||this.appendOpacityValue(Ii(".e-input-container",this.container))):(bi([this.container.parentElement],"e-hide-opacity"),this.opacitySlider.destroy(),Li(this.opacitySlider.element),this.opacitySlider=null,t.classList.contains(Wc)||t.classList.contains(qc)||Li(Ii("."+Kc,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,t){var i=this;if(!ae(e.value)){var s=this.roundValue(e.value);if(9===s.length){this.element.value=this.roundValue(s).slice(0,7);var n=this.splitBtn&&Ii(".e-split-preview",this.splitBtn.element);n&&(n.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else this.value=t.value}if(!this.inline&&ae(e.inline)){if(this.splitBtn.setProperties(vc(e,["disabled","enableRtl"])),!this.isPopupOpen())return this.changeCssClassProps(e.cssClass,t.cssClass),void this.changeRtlProps(e.enableRtl)}for(var o=function(s){switch(s){case"inline":e.inline?(r.getWrapper().appendChild(r.container),r.splitBtn.destroy(),Ti(r.element.nextElementSibling),r.container.children.length||r.createWidget()):(r.destroyOtherComp(),r.unWireEvents(),r.container.innerHTML="",r.createSplitBtn());break;case"cssClass":r.changeCssClassProps(e.cssClass,t.cssClass);var n=e.cssClass.split(" ").concat(t.cssClass.split(" "));n=n.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]);var o=0;n.forEach(function(e){0!==o||e!==Wc&&"e-hide-valueswitcher"!==e&&e!==Qc&&e!==_c&&e!==qc||(Ii("."+Gc,i.container)&&Li(Ii("."+Gc,i.container)),i.createInput(),o++)});break;case"enableRtl":r.isPicker()&&(r.hueSlider.enableRtl=e.enableRtl,r.enableOpacity&&(r.opacitySlider.enableRtl=e.enableRtl),r.setInputEleProps(e.enableRtl)),r.changeRtlProps(e.enableRtl);break;case"disabled":r.changeDisabledProp(e.disabled);break;case"value":r.value!==t.value&&r.changeValueProp(e.value);break;case"showButtons":r.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?r.switchToPicker():r.switchToPalette();break;case"modeSwitcher":r.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":r.isPicker()||r.changePaletteProps();break;case"noColor":e.noColor?"Palette"!==r.mode||r.modeSwitcher||r.setNoColor():r.changePaletteProps();break;case"enableOpacity":r.changeOpacityProps(e.enableOpacity)}},r=this,a=0,l=Object.keys(e);a<l.length;a++){o(l[a])}},t.prototype.focusIn=function(){this.element.parentElement.focus()},Vc([os("#008000ff")],t.prototype,"value",void 0),Vc([os("")],t.prototype,"cssClass",void 0),Vc([os(!1)],t.prototype,"disabled",void 0),Vc([os("Picker")],t.prototype,"mode",void 0),Vc([os(!0)],t.prototype,"modeSwitcher",void 0),Vc([os(null)],t.prototype,"presetColors",void 0),Vc([os(!0)],t.prototype,"showButtons",void 0),Vc([os(10)],t.prototype,"columns",void 0),Vc([os(!1)],t.prototype,"inline",void 0),Vc([os(!1)],t.prototype,"noColor",void 0),Vc([os(!1)],t.prototype,"enablePersistence",void 0),Vc([os(!0)],t.prototype,"enableOpacity",void 0),Vc([cs()],t.prototype,"select",void 0),Vc([cs()],t.prototype,"change",void 0),Vc([cs()],t.prototype,"beforeTileRender",void 0),Vc([cs()],t.prototype,"beforeOpen",void 0),Vc([cs()],t.prototype,"open",void 0),Vc([cs()],t.prototype,"beforeClose",void 0),Vc([cs()],t.prototype,"beforeModeSwitch",void 0),Vc([cs()],t.prototype,"onModeSwitch",void 0),Vc([cs()],t.prototype,"created",void 0),t=Vc([ps],t)}(Ns),ip=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),sp=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},np=["title","style","class"],op=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.previousValue=null,s.isAngular=!1,s.isHiddenInput=!1,s.isForm=!1,s.inputPreviousValue=null,s.isVue=!1,s.textboxOptions=t,s}return ip(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"floatLabelType":Na.removeFloating(this.textboxWrapper),Na.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":Na.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":Na.setWidth(e.width,this.textboxWrapper.container);break;case"value":var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=n,Na.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(ae(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&ae(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper();this.element.attributes;this.checkAttributes(!0),Na.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":Na.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),Na.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(Na.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":Na.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":Na.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new Qe(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Na.setPlaceholder(this.placeholder,this.respectiveElement)}}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(!ye()||!this.isServerRendered){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=Mi(this.element,"form"),ae(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=ee("ej2_instances",this.element),t=this.multiline?this.createElement("textarea"):this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==(o=this.element.attributes[i].nodeName)&&(t.setAttribute(o,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML,"name"===o&&this.element.removeAttribute("name"))}this.element.appendChild(t),this.element=t,te("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkAttributes(!1),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new Qe(this.locale);var s={placeholder:this.placeholder};if(this.l10n=new Js("textbox",s,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",he("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",he("textarea"));var n=["placeholder","disabled","value","readonly","type","autocomplete"];for(i=0;i<this.element.attributes.length;i++){var o=this.element.attributes[i].nodeName;this.element.hasAttribute(o)&&np.indexOf(o)<0&&"id"!==o&&"type"!==o&&"e-mappinguid"!==o&&(this.textarea.setAttribute(o,this.element.attributes[i].nodeValue),n.indexOf(o)<0&&(this.element.removeAttribute(o),i--))}}}},t.prototype.checkAttributes=function(e){for(var t=0,i=e?ae(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];t<i.length;t++){var s=i[t];if(!ae(this.element.getAttribute(s)))switch(s){case"disabled":if(ae(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var n="disabled"!==this.element.getAttribute(s)&&""!==this.element.getAttribute(s)&&"true"!==this.element.getAttribute(s);this.setProperties({enabled:n},!e)}break;case"readonly":if(ae(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var o="readonly"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s);this.setProperties({readonly:o},!e)}break;case"placeholder":(ae(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":if(ae(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e){var r="off"===this.element.autocomplete?"off":"on";this.setProperties({autocomplete:r},!e)}break;case"value":(ae(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"type":(ae(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;ae(this.cssClass)||""===this.cssClass||(e=this.getInputValidClassList(this.cssClass)),ye()&&this.isServerRendered?(this.respectiveElement=this.element,this.textboxWrapper={container:this.element.parentElement},this.showClearButton&&!this.multiline&&(this.textboxWrapper.clearButton=this.textboxWrapper.container.querySelector(".e-clear-icon"),Na.wireClearBtnEvents(this.respectiveElement,this.textboxWrapper.clearButton,this.textboxWrapper.container)),"Auto"===this.floatLabelType&&Na.wireFloatingEvents(this.respectiveElement),Na.bindInitialEvent({element:this.respectiveElement,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties})):(this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=Na.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement)),this.wireEvents(),ae(this.value)||(Na.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),ae(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:ae(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,Na.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(np.indexOf(i)>-1)if("class"===i){var s=this.getInputValidClassList(this.htmlAttributes[i]);""!==s&&bi([this.textboxWrapper.container],s.split(" "))}else if("style"===i){var n=this.textboxWrapper.container.getAttribute(i);n=ae(n)?this.htmlAttributes[i]:n+this.htmlAttributes[i],this.textboxWrapper.container.setAttribute(i,n)}else this.textboxWrapper.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHTMLAttrToElement=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];np.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){Na.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))},t.prototype.getInputValidClassList=function(e){var t=e;return ae(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){Ct.add(this.respectiveElement,"focus",this.focusHandler,this),Ct.add(this.respectiveElement,"blur",this.focusOutHandler,this),Ct.add(this.respectiveElement,"input",this.inputHandler,this),Ct.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&Ct.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!ae(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&Ct.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");ae(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t},t.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!ae(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");ae(e)||(ae(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("focus",t)},t.prototype.focusOutHandler=function(e){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.respectiveElement.value||this.raiseChangeEvent(e,!0);var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("blur",t)},t.prototype.inputHandler=function(e){var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",t),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,t){var i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value},t.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?Ct.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):Ct.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")){this.value;Na.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.trigger("input",t),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0)}},t.prototype.unWireEvents=function(){Ct.remove(this.respectiveElement,"focus",this.focusHandler),Ct.remove(this.respectiveElement,"blur",this.focusOutHandler),Ct.remove(this.respectiveElement,"input",this.inputHandler),Ct.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&Ct.remove(this.formElement,"reset",this.resetForm),!ae(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&Ct.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),ye()&&this.isServerRendered?this.textboxWrapper=null:("INPUT"===this.element.tagName&&this.multiline&&(Ti(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),ae(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),Ti(this.textboxWrapper.container)),this.textboxWrapper=null,e.prototype.destroy.call(this))},t.prototype.addIcon=function(e,t){Na.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];"disabled"===s?(this.setProperties({enabled:!1},!0),Na.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!0},!0),Na.setReadonly(this.readonly,this.respectiveElement)):"class"===s?this.respectiveElement.classList.add(e[s]):"placeholder"===s?(this.setProperties({placeholder:e[s]},!0),Na.setPlaceholder(this.placeholder,this.respectiveElement)):("rows"===s&&this.respectiveElement.tagName,this.respectiveElement.setAttribute(s,e[s]))}},t.prototype.removeAttributes=function(e){for(var t=0,i=e;t<i.length;t++){var s=i[t];"disabled"===s?(this.setProperties({enabled:!0},!0),Na.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!1},!0),Na.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===s?(this.setProperties({placeholder:null},!0),Na.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(s)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&bi([this.textboxWrapper.container],["e-input-focus"]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Ci([this.textboxWrapper.container],["e-input-focus"]))},sp([os("text")],t.prototype,"type",void 0),sp([os(!1)],t.prototype,"readonly",void 0),sp([os(null)],t.prototype,"value",void 0),sp([os("Never")],t.prototype,"floatLabelType",void 0),sp([os("")],t.prototype,"cssClass",void 0),sp([os(null)],t.prototype,"placeholder",void 0),sp([os("on")],t.prototype,"autocomplete",void 0),sp([os({})],t.prototype,"htmlAttributes",void 0),sp([os(!1)],t.prototype,"multiline",void 0),sp([os(!0)],t.prototype,"enabled",void 0),sp([os(!1)],t.prototype,"showClearButton",void 0),sp([os(!1)],t.prototype,"enablePersistence",void 0),sp([os(null)],t.prototype,"width",void 0),sp([cs()],t.prototype,"created",void 0),sp([cs()],t.prototype,"destroyed",void 0),sp([cs()],t.prototype,"change",void 0),sp([cs()],t.prototype,"blur",void 0),sp([cs()],t.prototype,"focus",void 0),sp([cs()],t.prototype,"input",void 0),t=sp([ps],t)}(Ns),rp="",ap="",lp=[],hp="e-active",cp="";function pp(e,t,i,s){var n=t;s=null==s||s;var o={item:null,index:null};if(e&&e.length){for(var r=e.length,a=s?e.toLocaleLowerCase():e,l=0,h=n;l<h.length;l++){var c=h[l],p=(s?c.textContent.toLocaleLowerCase():c.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&p===a||"StartsWith"===i&&p.substr(0,r)===a)return o.item=c,o.index=l,{item:c,index:l}}return o}return o}var dp,up=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,i,s){return(e=e||this.dataManager)?e.executeQuery(this,t,i,s):gp.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):gp.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"==typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,i,s,n){t=t?t.toLowerCase():null;var o=null;return"string"==typeof e?o=new mp(e,t,i,s,n):e instanceof mp&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},e.prototype.search=function(e,t,i,s,n){"string"==typeof t&&(t=[t]),i&&"none"!==i||(i="contains");var o=gp.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:n,comparer:o}}),this},e.prototype.sortBy=function(e,t,i){return this.sortByForeignKey(e,t,i)},e.prototype.sortByForeignKey=function(t,i,s,n){var o,r,a=ae(n)?"ascending":n;if("string"==typeof t&&gp.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),i&&"string"!=typeof i||(a=i?i.toLowerCase():"ascending",i=gp.fnSort(i)),s){o=e.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(r=o[l].e.fieldName)){if(r===t)return this}else if(r instanceof Array)for(var h=0;h<r.length;h++)if(r[h]===t||t.toLowerCase()===r[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:a}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter(function(e){return e.fn===t})},e.filterQueryLists=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},e}(),mp=function(){function e(t,i,s,n,o){return void 0===n&&(n=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=i.toLowerCase(),this.value=s,this.ignoreCase=n,this.ignoreAccent=o,this.isComplex=!1,this.comparer=gp.fnOperators.processOperator(this.operator)):(t instanceof e&&s instanceof e||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s)),this}return e.and=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,i,s,n,o){return e.combine(this,t,i,s,"and",n,o)},e.or=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,i,s,n,o){return e.combine(this,t,i,s,"or",n,o)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,s=e.length;i<s;i++)t.push(this.fromJSONData(e[i]));return t}var n=e;return this.fromJSONData(n)},e.prototype.validate=function(e){var t,i,s=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,gp.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var n=0;n<s.length;n++)if(i=s[n].validate(e),t){if(!i)return!1}else if(i)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}},e.combinePredicates=function(t,i){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],i,t.slice(1))},e.combine=function(t,i,s,n,o,r,a){return i instanceof e?e[o](t,i):"string"==typeof i?e[o](t,new e(i,s,n,r,a)):gp.throwError("Predicate - "+o+" : invalid arguments")},e.fromJSONData=function(t){for(var i=t.predicates||[],s=i.length,n=[],o=0;o<s;o++)n.push(this.fromJSONData(i[o]));return t.isComplex?new e(n[0],t.condition,n.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),fp={GroupGuid:"{271bbba0-1ee7}"},gp=function(){function e(){}return e.getValue=function(e,t){return"function"==typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return ae(e)&&ae(t)?-1:null==t?-1:"string"==typeof e?e.localeCompare(t):null==e?1:e-t},e.fnDescending=function(e,t){return ae(e)&&ae(t)?-1:null==t?1:"string"==typeof e?-1*e.localeCompare(t):null==e?-1:t-e},e.extractFields=function(e,t){for(var i={},s=0;s<t.length;s++)i=this.setValue(t[s],this.getObject(t[s],e),i);return i},e.select=function(e,t){for(var i=[],s=0;s<e.length;s++)i.push(this.extractFields(e[s],t));return i},e.group=function(t,i,s,n,o,r,a){n=n||1;var l=t;if(l.GroupGuid===fp.GroupGuid){for(var h=function(e){if(ae(o))l[e].items=c.group(l[e].items,i,s,l.level+1,null,r,a),l[e].count=l[e].items.length;else{var t,n=o.filter(function(t){return t.key===l[e].key});t=o.indexOf(n[0]),l[e].items=c.group(l[e].items,i,s,l.level+1,o[t].items,r,a),l[e].count=o[t].count}},c=this,p=0;p<l.length;p++)h(p);return l.childLevels+=1,l}var d={},u=[];u.GroupGuid=fp.GroupGuid,u.level=n,u.childLevels=0,u.records=l;for(var m=function(e){var t=f.getVal(l,e,i);if(ae(r)||(t=r(t,i)),!d[t]&&(d[t]={key:t,count:0,items:[],aggregates:{},field:i},u.push(d[t]),!ae(o))){var n=o.filter(function(e){return e.key===d[t].key});d[t].count=n[0].count}d[t].count=ae(o)?d[t].count+=1:d[t].count,(!a||a&&s.length)&&d[t].items.push(l[e])},f=this,g=0;g<l.length;g++)m(g);if(s&&s.length){var v=function(t){for(var i={},n=void 0,r=s,a=0;a<s.length;a++)if(n=e.aggregates[s[a].type],ae(o))n&&(i[r[a].field+" - "+r[a].type]=n(u[t].items,r[a].field));else{var l=o.filter(function(e){return e.key===u[t].key});n&&(i[r[a].field+" - "+r[a].type]=n(l[0].items,r[a].field))}u[t].aggregates=i};for(g=0;g<u.length;g++)v(g)}if(a&&u.length&&s.length)for(g=0;g<u.length;g++)u[g].items=[];return l.length&&u||l},e.buildHierarchy=function(e,t,i,s,n){var o,r={};for(s.result&&(s=s.result),s.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<s.length;o++){(r[a=this.getObject(e,s[o])]||(r[a]=[])).push(s[o])}for(o=0;o<i.length;o++){var a=this.getObject(n||e,i[o]);i[o][t]=r[a]}},e.getFieldList=function(e,t,i){if(void 0===i&&(i=""),null==t)return this.getFieldList(e,[],i);for(var s=e,n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];"object"!=typeof s[r]||s[r]instanceof Array?t.push(i+r):this.getFieldList(s[r],t,i+r+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),n=0;n<s.length&&null!=i;n++)i=i[s[n]];return i}},e.setValue=function(e,t,i){var s,n,o=e.toString().split("."),r=i||{},a=r,l=o.length;for(s=0;s<l;s++)n=o[s],s+1===l?a[n]=void 0===t?void 0:t:ae(a[n])&&(a[n]={}),a=a[n];return r},e.sort=function(e,t,i){if(e.length<=1)return e;var s=parseInt((e.length/2).toString(),10),n=e.slice(0,s),o=e.slice(s);return n=this.sort(n,t,i),o=this.sort(o,t,i),this.merge(n,o,t,i)},e.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(t){return t in e.diacritics?e.diacritics[t]:t}).join("")},e.merge=function(e,t,i,s){for(var n,o=[];e.length>0||t.length>0;)n=e.length>0&&t.length>0?s?s(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,o.push(n.shift());return o},e.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,i,s){if(t in e){var n=e[t](i,s);ae(n)||(i=n)}return i},e.getAddParams=function(t,i,s){var n={};return e.callAdaptorFunction(t,"addParams",{dm:i,query:s,params:s.params,reqParams:n}),n},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(e){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})},e.isNull=function(e){return null==e},e.getItemFromComparer=function(t,i,s){var n,o,r,a=0,l="string"==typeof e.getVal(t,0,i);if(t.length)for(;ae(n)&&a<t.length;)n=e.getVal(t,a,i),r=t[a++];for(;a<t.length;a++)ae(o=e.getVal(t,a,i))||(l&&(n=+n,o=+o),s(n,o)>0&&(n=o,r=t[a]));return r},e.distinct=function(t,i,s){s=!ae(s)&&s;var n,o=[],r={};return t.forEach(function(a,l){(n="object"==typeof t[l]?e.getVal(t,l,i):t[l])in r||(o.push(s?t[l]:n),r[n]=1)}),o},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},e.aggregates={sum:function(t,i){for(var s,n=0,o="number"!=typeof e.getVal(t,0,i),r=0;r<t.length;r++)s=e.getVal(t,r,i),isNaN(s)||null===s||(o&&(s=+s),n+=s);return n},average:function(t,i){return e.aggregates.sum(t,i)/t.length},min:function(t,i){var s;return"function"==typeof i&&(s=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,s||e.fnAscending))},max:function(t,i){var s;return"function"==typeof i&&(s=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,s||e.fnDescending))},truecount:function(e,t){return new Ip(e).executeLocal((new up).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new Ip(e).executeLocal((new up).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},e.fnOperators={equal:function(t,i,s,n){return n&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),s?e.toLowerCase(t)===e.toLowerCase(i):t===i},notequal:function(t,i,s,n){return n&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),!e.fnOperators.equal(t,i,s)},lessthan:function(t,i,s){return s?e.toLowerCase(t)<e.toLowerCase(i):t<i},greaterthan:function(t,i,s){return s?e.toLowerCase(t)>e.toLowerCase(i):t>i},lessthanorequal:function(t,i,s){return s?e.toLowerCase(t)<=e.toLowerCase(i):t<=i},greaterthanorequal:function(t,i,s){return s?e.toLowerCase(t)>=e.toLowerCase(i):t>=i},contains:function(t,i,s,n){return n&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),s?!ae(t)&&!ae(i)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(i)):!ae(t)&&!ae(i)&&-1!==t.toString().indexOf(i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,i,s,n){return n&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),s?t&&i&&e.startsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.startsWith(t,i)},endswith:function(t,i,s,n){return n&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),s?t&&i&&e.endsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.endsWith(t,i)},processSymbols:function(t){var i=e.operatorSymbols[t];return i?e.fnOperators[i]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var i=e.fnOperators[t];return i||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var i=0;i<t.length;i++)"object"==typeof t[i]&&null!==t[i]?e.parse.iterateAndReviveJson(t[i]):"string"!=typeof t[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i])?t[i]=e.parse.parseJson(t[i]):t[i]=e.parse.jsonReviver("",t[i])},iterateAndReviveJson:function(t){for(var i,s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];e.startsWith(o,"__")||("object"==typeof(i=t[o])?i instanceof Array?e.parse.iterateAndReviveArray(i):i&&e.parse.iterateAndReviveJson(i):t[o]=e.parse.jsonReviver(t[o],i))}},jsonReviver:function(t,i){if("string"==typeof i){var s=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),n=e.timeZoneHandling?e.serverTimezoneOffset:null;if(s)return e.dateParse.toTimeZone(new Date(parseInt(s[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=i.indexOf("Z")>-1||i.indexOf("z")>-1,r=i.split(/[^0-9.]/);if(o)i=e.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),e.serverTimezoneOffset,!1);else{var a=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),l=parseInt(r[6],10),h=parseInt(r[7],10);if(isNaN(l)&&isNaN(h))return a;i.indexOf("+")>-1?a.setHours(a.getHours()-l,a.getMinutes()-h):a.setHours(a.getHours()+l,a.getMinutes()+h),i=e.dateParse.toTimeZone(a,e.serverTimezoneOffset,!1)}null==e.serverTimezoneOffset&&(i=e.dateParse.addSelfOffset(i))}}return i},isJson:function(t){return"string"==typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,i){return e.isPlainObject(t)?e.parse.jsonReplacer(t,i):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},i).val:t},jsonReplacer:function(t,i){for(var s,n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];if((s=t[r])instanceof Date){var a=s;null==e.serverTimezoneOffset?t[r]=e.dateParse.toTimeZone(a,null).toJSON():(a=new Date(+a+36e5*e.serverTimezoneOffset),t[r]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(a),null).toJSON())}}return t},arrayReplacer:function(t){for(var i=0;i<t.length;i++)e.isPlainObject(t[i])?t[i]=e.parse.jsonReplacer(t[i]):t[i]instanceof Date&&(t[i]=e.parse.jsonReplacer({date:t[i]}).date);return t},jsonDateReplacer:function(t,i){if("value"===t&&i){if("string"==typeof i){var s=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(s)i=e.dateParse.toTimeZone(new Date(parseInt(s[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var n=i.split(/[^0-9]/);i=e.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(i instanceof Date)return i=e.dateParse.addSelfOffset(i),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i),null).toJSON():(i=e.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-e.serverTimezoneOffset,!1)).toJSON()}return i}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,i,s){if(null===i)return t;var n=s?e.dateParse.toUTC(t):t;return new Date(+n-36e5*i)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),s=i>=0?"+":"-",n=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+s+n(i/60)+":"+n(i%60)}},e}(),vp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),yp={GroupGuid:"{271bbba0-1ee7}"},bp=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,i,s){return e},e}(),Cp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vp(t,e),t.prototype.processQuery=function(e,t){for(var i,s,n,o=e.dataSource.json.slice(0),r=o.length,a=!0,l={},h=0,c=[],p=0;p<t.lazyLoad.length;p++)h++,l[t.lazyLoad[p].key]=t.lazyLoad[p].value;var d={};for(p=0;p<t.queries.length;p++)"onPage"!==(s=t.queries[p]).fn&&"onGroup"!==s.fn||!t.lazyLoad.length?(i=this[s.fn].call(this,o,s.e,t),"onAggregates"===s.fn?d[s.e.field+" - "+s.e.type]=i:o=void 0!==i?i:o,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(a=!1),a&&(r=o.length)):("onGroup"===s.fn&&c.push(s.e),"onPage"===s.fn&&(n=s.e));if(h){var u={query:t,lazyLoad:l,result:o,group:c,page:n},m=this.lazyLoadGroup(u);o=m.result,r=m.count}return t.isCountRequired&&(o={result:o,count:r,aggregates:d}),o},t.prototype.lazyLoadGroup=function(e){var t=0,i=this.getAggregate(e.query),s=e.result;if(ae(e.lazyLoad.onDemandGroupInfo)){r=e.group[0].fieldName;t=(s=gp.group(s,r,i,null,null,e.group[0].comparer,!0)).length;a=s;e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,a)}else{for(var n=e.lazyLoad.onDemandGroupInfo,o=n.where.length-1;o>=0;o--)s=this.onWhere(s,n.where[o]);if(e.group.length!==n.level){var r=e.group[n.level].fieldName;s=gp.group(s,r,i,null,null,e.group[0].comparer,!0)}t=s.length;var a=s;s=(s=s.slice(n.skip)).slice(0,n.take),e.group.length!==n.level&&this.formGroupResult(s,a)}return{result:s,count:t}},t.prototype.formGroupResult=function(e,t){if(e.length&&t.length){e.GroupGuid=t.GroupGuid,e.childLevels=t.childLevels,e.level=t.level,e.records=t.records}return e},t.prototype.getAggregate=function(e){var t=up.filterQueries(e.queries,"onAggregates"),i=[];if(t.length)for(var s=void 0,n=0;n<t.length;n++)s=t[n].e,i.push({type:s.type,field:gp.getValue(s.field,e)});return i},t.prototype.batchRequest=function(e,t,i){var s,n=t.deletedRecords.length;for(s=0;s<t.addedRecords.length;s++)this.insert(e,t.addedRecords[s]);for(s=0;s<t.changedRecords.length;s++)this.update(e,i.key,t.changedRecords[s]);for(s=0;s<n;s++)this.remove(e,i.key,t.deletedRecords[s]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter(function(e){if(t)return t.validate(e)}):e},t.prototype.onAggregates=function(e,t){var i=gp.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&gp.getFieldList(e[0],t.fieldNames),e.filter(function(e){for(var i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,gp.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,t,i){if(!e||!e.length)return e;var s,n=gp.getValue(t.fieldName,i);if(!n)return e.sort(t.comparer);if(n instanceof Array){for(var o=(n=n.slice(0)).length-1;o>=0;o--)n[o]&&(s=t.comparer,gp.endsWith(n[o]," desc")&&(s=gp.fnSort("descending"),n[o]=n[o].replace(" desc","")),e=gp.sort(e,n[o],s));return e}return gp.sort(e,n,t.comparer)},t.prototype.onGroup=function(e,t,i){if(!e||!e.length)return e;var s=this.getAggregate(i);return gp.group(e,gp.getValue(t.fieldName,i),s,null,null,t.comparer)},t.prototype.onPage=function(e,t,i){var s=gp.getValue(t.pageSize,i),n=(gp.getValue(t.pageIndex,i)-1)*s,o=n+s;return e&&e.length?e.slice(n,o):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(gp.getValue(t.start),gp.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,gp.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(gp.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?gp.select(e,gp.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,i,s,n){return ae(n)?e.dataSource.json.push(t):e.dataSource.json.splice(n,0,t)},t.prototype.remove=function(e,t,i,s){var n,o=e.dataSource.json;for("object"!=typeof i||i instanceof Date||(i=gp.getObject(t,i)),n=0;n<o.length&&gp.getObject(t,o[n])!==i;n++);return n!==o.length?o.splice(n,1):null},t.prototype.update=function(e,t,i,s){var n,o,r=e.dataSource.json;for(ae(t)||(o=ee(t,i)),n=0;n<r.length&&(ae(t)||ee(t,r[n])!==o);n++);return n<r.length?oe(r[n],i):null},t}(bp),Sp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vp(t,e),t.prototype.processQuery=function(e,t,i){var s,n,o=this.getQueryRequest(t),r=up.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=t.params,l=e.dataSource.url,h=null,c=this.options,p={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in r?(s=r.onPage,n=((n=gp.getValue(s.pageIndex,t))-1)*(h=gp.getValue(s.pageSize,t))):"onRange"in r&&(n=(s=r.onRange).start,h=s.end-s.start);for(var d=0;d<o.sorts.length;d++)s=gp.getValue(o.sorts[d].e.fieldName,t),p.sorts.push(gp.callAdaptorFunction(this,"onEachSort",{name:s,direction:o.sorts[d].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&p.filters.push(gp.callAdaptorFunction(this,"onEachWhere",s.toJson(),t));for(d=0;d<o.filters.length;d++){p.filters.push(gp.callAdaptorFunction(this,"onEachWhere",o.filters[d].e.toJson(),t));for(var u=0,m="object"==typeof p.filters[d]?Object.keys(p.filters[d]):[];u<m.length;u++){var f=m[u];gp.isNull(p[f])&&delete p[f]}}for(d=0;d<o.searches.length;d++)s=o.searches[d].e,p.searches.push(gp.callAdaptorFunction(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(d=0;d<o.groups.length;d++)p.groups.push(gp.getValue(o.groups[d].e.fieldName,t));for(d=0;d<o.aggregates.length;d++)s=o.aggregates[d].e,p.aggregates.push({type:s.type,field:gp.getValue(s.field,t)});var g={};if(this.getRequestQuery(c,t,r,p,g),gp.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:a,reqParams:g}),t.lazyLoad.length)for(d=0;d<t.lazyLoad.length;d++)g[t.lazyLoad[d].key]=t.lazyLoad[d].value;for(var v=0,y=Object.keys(g);v<y.length;v++){f=y[v];(gp.isNull(g[f])||""===g[f]||0===g[f].length)&&delete g[f]}c.skip in g&&c.take in g||null===h||(g[c.skip]=gp.callAdaptorFunction(this,"onSkip",n,t),g[c.take]=gp.callAdaptorFunction(this,"onTake",h,t));var b=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(g,gp.parse.jsonDateReplacer),url:l,pvtData:b,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(g,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?l.replace(/\/*$/,s):l,pvtData:b})},t.prototype.getRequestQuery=function(e,t,i,s,n){var o=n;o[e.from]=t.fromTable,e.apply&&t.distincts.length&&(o[e.apply]="onDistinct"in this?gp.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(o[e.expand]="onExpand"in this&&"onSelect"in i?gp.callAdaptorFunction(this,"onExpand",{selects:gp.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),o[e.select]="onSelect"in i&&!t.distincts.length?gp.callAdaptorFunction(this,"onSelect",gp.getValue(i.onSelect.fieldNames,t),t):"",o[e.count]=t.isCountRequired?gp.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",o[e.search]=s.searches.length?gp.callAdaptorFunction(this,"onSearch",s.searches,t):"",o[e.skip]="onSkip"in i?gp.callAdaptorFunction(this,"onSkip",gp.getValue(i.onSkip.nos,t),t):"",o[e.take]="onTake"in i?gp.callAdaptorFunction(this,"onTake",gp.getValue(i.onTake.nos,t),t):"",o[e.where]=s.filters.length||s.searches.length?gp.callAdaptorFunction(this,"onWhere",s.filters,t):"",o[e.sortBy]=s.sorts.length?gp.callAdaptorFunction(this,"onSortBy",s.sorts,t):"",o[e.group]=s.groups.length?gp.callAdaptorFunction(this,"onGroup",s.groups,t):"",o[e.aggregates]=s.aggregates.length?gp.callAdaptorFunction(this,"onAggregates",s.aggregates,t):"",o.param=[]},t.prototype.convertToQueryString=function(e,t,i){return""},t.prototype.processResponse=function(e,t,i,s,n,o){if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("application/json")){var r=gp.timeZoneHandling;t&&!t.timeZoneHandling&&(gp.timeZoneHandling=!1),e=gp.parse.parseJson(e),gp.timeZoneHandling=r}var a=n,l=a.pvtData||{},h=e?e.groupDs:[];if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var c=JSON.parse(a.data);if(c&&"batch"===c.action&&e&&e.addedRecords)return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);var p={};e&&"count"in e&&(p.count=e.count),p.result=e&&e.result?e.result:e;var d=!1;if(Array.isArray(e.result)&&e.result.length){if(ae(e.result[0].key)||(p.result=this.formRemoteGroupedData(p.result,1,l.groups.length-1)),i&&i.lazyLoad.length&&l.groups.length)for(var u=0;u<i.lazyLoad.length;u++)if("onDemandGroupInfo"===i.lazyLoad[u].key){var m=i.lazyLoad[u].value.level;l.groups.length===m&&(d=!0)}}return d||this.getAggregateResult(l,e,p,h,i),gp.isNull(p.count)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},t.prototype.formRemoteGroupedData=function(e,t,i){for(var s=0;s<e.length;s++)e[s].items.length&&Object.keys(e[s].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[s].items,t+1,i-1);return e.GroupGuid=yp.GroupGuid,e.level=t,e.childLevels=i,e.records=e[0].items.length?this.getGroupedRecords(e,!ae(e[0].items.records)):[],e},t.prototype.getGroupedRecords=function(e,t){for(var i=[],s=0;s<e.length;s++)if(t)i=i.concat(e[s].items.records);else for(var n=0;n<e[s].items.length;n++)i.push(e[s].items[n]);return i},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(re({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},gp.getAddParams(this,e,s)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,i,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(re({},{value:t,table:i,action:"insert"},gp.getAddParams(this,e,s)))}},t.prototype.remove=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(re({},{key:i,keyColumn:t,table:s,action:"remove"},gp.getAddParams(this,e,n)))}},t.prototype.update=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(re({},{value:i,action:"update",keyColumn:t,key:gp.getObject(t,i),table:s},gp.getAddParams(this,e,n)))}},t.prototype.getFiltersFrom=function(e,t){var i,s=t.fKey,n=s,o=t.key,r=[];"object"!=typeof e[0]&&(n=null);for(var a=0;a<e.length;a++)i="object"==typeof e[0]?gp.getObject(o||n,e[a]):e[a],r.push(new mp(s,"equal",i));return mp.or(r)},t.prototype.getAggregateResult=function(e,t,i,s,n){var o=t;if(t&&t.result&&(o=t.result),e&&e.aggregates&&e.aggregates.length){var r=e.aggregates,a=void 0,l=o,h={};t.aggregate&&(l=t.aggregate);for(var c=0;c<r.length;c++)(a=gp.aggregates[r[c].type])&&(h[r[c].field+" - "+r[c].type]=a(l,r[c].field));i.aggregates=h}var p=Array.isArray(t.result)&&t.result.length&&!ae(t.result[0].key);if(e&&e.groups&&e.groups.length&&!p){var d=e.groups;for(c=0;c<d.length;c++){ae(s)||(s=gp.group(s,d[c]));var u=up.filterQueries(n.queries,"onGroup")[c].e;o=gp.group(o,d[c],e.aggregates,null,s,u.comparer)}i.result=o}return i},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=up.filterQueries(e.queries,"onSortBy"),t.groups=up.filterQueries(e.queries,"onGroup"),t.filters=up.filterQueries(e.queries,"onWhere"),t.searches=up.filterQueries(e.queries,"onSearch"),t.aggregates=up.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var i=0,s=e.params;i<s.length;i++){var n=s[i];if(t[n.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[n.key]=n.value,n.fn&&(t[n.key]=n.fn.call(e.query,n.key,e.query,e.dm)),t.params[n.key]=t[n.key]}},t}(bp),xp=function(e){function t(t){var i=e.call(this)||this;return i.options=re({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),re(i.options,t||{}),i}return vp(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,s){var n,o,r="",a=e.value,l=typeof a,h=e.field?t.getField(e.field):null;if(a instanceof Date&&(a="datetime'"+gp.parse.replacer(a)+"'"),"string"===l&&(a="'"+(a=encodeURIComponent(a))+"'",s&&(h="cast("+h+", 'Edm.String')"),gp.parse.isGuid(a)&&(o="guid"),e.ignoreCase&&(o||(h="tolower("+h+")"),a=a.toLowerCase())),n=gp.odBiOperator[e.operator])return r+=h,r+=n,o&&(r+=o),r+a;if("substringof"===(n=ae(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?gp.odUniOperator[e.operator]:gp.odv4UniOperator[e.operator])){var c=a;a=h,h=c}return r+=n+"(",r+=h+",",o&&(r+=o),r+=a+")"},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,i){for(var s=[],n=0;n<e.predicates.length;n++)s.push("("+this.onEachWhere(e.predicates[n],t,i)+")");return s.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&gp.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new mp(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=mp.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var s=0;s<e.name.length;s++)i.push(t.getField(e.name[s])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,i){gp.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,i,s,n,o){if(n&&"GET"===n.type&&!this.rootUrl&&e["odata.metadata"]){var r=e["odata.metadata"].split("/$metadata#");this.rootUrl=r[0],this.resourceTableName=r[1]}if(!ae(e.d)){var a=i&&i.isCountRequired?e.d.results:e.d;if(!ae(a))for(var l=0;l<a.length;l++)ae(a[l].__metadata)||delete a[l].__metadata}var h=n&&n.pvtData,c=this.processBatchResponse(e,i,s,n,o);if(c)return c;var p=s&&n.getResponseHeader("DataServiceVersion"),d=null,u=p&&parseInt(p,10)||2;if(i&&i.isCountRequired){(e.__count||e["odata.count"])&&(d=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(d=e.__count||e["odata.count"])}3===u&&e.value&&(e=e.value),e.d&&(e=e.d),u<3&&e.results&&(e=e.results);var m={};return m.count=d,m.result=e,this.getAggregateResult(h,e,m,null,i),gp.isNull(d)?m.result:{result:m.result,count:m.count,aggregates:m.aggregates}},t.prototype.convertToQueryString=function(e,t,i){var s=[],n=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];s.push(a+"="+e[a])}return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!n?s:s.length?n+"?"+s:n||""},t.prototype.localTimeReplacer=function(e,t){for(var i=0,s=ae(t)?[]:Object.keys(t);i<s.length;i++){var n=s[i];t[n]instanceof Date&&(t[n]=gp.dateParse.toLocalTime(t[n]))}return t},t.prototype.insert=function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,i,s){var n;return n="string"!=typeof i||gp.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+n}},t.prototype.update=function(e,t,i,s,n,o){var r;return"PATCH"!==this.options.updateType||ae(o)||(i=this.compareAndRemove(i,o,t)),r="string"!=typeof i[t]||gp.parse.isGuid(i[t])?"("+i[t]+")":"('"+i[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+r,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,i,s,n){var o=i.guid=gp.getGuid(this.options.batchPre),r=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var a={url:i.url,key:i.key,cid:1,cSet:gp.getGuid(this.options.changeSet)},l="--"+o+"\n";return l+="Content-Type: multipart/mixed; boundary="+a.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,a,e),l+=this.generateUpdateRequest(t.changedRecords,a,e,n?n.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,a,e),l+=a.cSet+"--\n",{type:"POST",url:r,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:l+="--"+o+"--"}},t.prototype.generateDeleteRequest=function(e,t,i){if(!e)return"";var s={method:"DELETE ",url:function(e,t,i){var s=gp.getObject(i,e[t]);return"number"==typeof s||gp.parse.isGuid(s)?"("+s+")":s instanceof Date?"("+e[t][i].toJSON()+")":"('"+s+"')"},data:function(e,t){return""}};return this.generateBodyContent(e,t,s,i)+"\n"},t.prototype.generateInsertRequest=function(e,t,i){if(!e)return"";var s={method:"POST ",url:function(e,t,i){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,s,i)},t.prototype.generateUpdateRequest=function(e,t,i,s){var n=this;if(!e)return"";e.forEach(function(e){return e=n.compareAndRemove(e,s.filter(function(i){return gp.getObject(t.key,i)===gp.getObject(t.key,e)})[0],t.key)});var o={method:this.options.updateType+" ",url:function(e,t,i){return"number"==typeof e[t][i]||gp.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":"('"+e[t][i]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,o,i)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,i,s){for(var n="",o=0;o<e.length;o++)n+="\n"+t.cSet+"\n",n+=this.options.changeSetContent+"\n\n",n+=i.method,"POST "===i.method?n+=(s.dataSource.insertUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?n+=(s.dataSource.updateUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(n+=(s.dataSource.removeUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n"),n+="Accept: "+this.options.accept+"\n",n+="Content-Id: "+this.pvt.changeSet+++"\n",n+=this.options.batchChangeSetContentType+"\n",ae(e[o]["@odata.etag"])?n+="\n":(n+="If-Match: "+e[o]["@odata.etag"]+"\n\n",delete e[o]["@odata.etag"]),n+=i.data(e,o);return n},t.prototype.processBatchResponse=function(e,t,i,s,n){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&gp.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()){var o=i.getResponseHeader("Content-Type"),r=void 0,a=void 0,l=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),(l=l.split(o)).length<2)return{};l=l[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);h&&l.replace(h[0],"");for(var c=h?h[1]:"",p=(l=l.split(c)).length;p>-1;p--)/\bContent-ID:/i.test(l[p])&&/\bHTTP.+201/.test(l[p])&&(r=parseInt(/\bContent-ID: (\d+)/i.exec(l[p])[1],10),n.addedRecords[r]&&(a=gp.parse.parseJson(/^\{.+\}/m.exec(l[p])[0]),re({},n.addedRecords[r],this.processResponse(a))));return n}return null},t.prototype.compareAndRemove=function(e,t,i){var s=this;return ae(t)?e:(Object.keys(e).forEach(function(n){n!==i&&"@odata.etag"!==n&&(gp.isPlainObject(e[n])?(s.compareAndRemove(e[n],t[n]),0===Object.keys(e[n]).filter(function(e){return"@odata.etag"!==e}).length&&delete e[n]):e[n]===t[n]?delete e[n]:e[n]&&t[n]&&e[n].valueOf()===t[n].valueOf()&&delete e[n])}),e)},t}(Sp),wp=function(e){function t(t){var i=e.call(this,t)||this;return i.options=re({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),re(i.options,t||{}),i}return vp(t,e),t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,i,s){var n="",o=t.value,r=o instanceof Date;if(i instanceof up)for(var a=this.getQueryRequest(i),l=0;l<a.filters.length;l++)a.filters[l].e.key===t.value&&(s=!0);return n=e.prototype.onPredicate.call(this,t,i,s),r&&(n=n.replace(/datetime'(.*)'$/,"$1")),gp.parse.isGuid(o)&&(n=n.replace("guid","").replace(/'/g,"")),n},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var t=this,i={},s={},n=e.expands.slice(),o=[];return e.selects.filter(function(e){return e.indexOf(".")>-1}).forEach(function(e){var t=e.split(".");t[0]in i||(i[t[0]]=[]),i[t[0]].push(t[1])}),Object.keys(i).forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n.forEach(function(e){s[e]=e in i?e+"("+t.options.select+"="+i[e].join(",")+")":e}),Object.keys(s).forEach(function(e){return o.push(s[e])}),o.join(",")},t.prototype.onDistinct=function(e){return"groupby(("+e.map(function(e){return xp.getField(e)}).join(",")+"))"},t.prototype.onSelect=function(t){return e.prototype.onSelect.call(this,t.filter(function(e){return-1===e.indexOf(".")}))},t.prototype.beforeSend=function(e,t,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||t.setRequestHeader("Prefer","return=representation"),t.setRequestHeader("Accept",this.options.accept)},t.prototype.processResponse=function(t,i,s,n,o,r){if(o&&"GET"===o.type&&!this.rootUrl&&t["@odata.context"]){var a=t["@odata.context"].split("/$metadata#");this.rootUrl=a[0],this.resourceTableName=a[1]}var l=o&&o.pvtData,h=e.prototype.processBatchResponse.call(this,t,s,n,o,r);if(h)return h;var c=null;s&&s.isCountRequired&&"@odata.count"in t&&(c=t["@odata.count"]),t=ae(t.value)?t:t.value;var p={};return p.count=c,p.result=t,this.getAggregateResult(l,t,p,null,s),gp.isNull(c)?p.result:{result:p.result,count:c,aggregates:p.aggregates}},t}(xp),Ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vp(t,e),t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},t.prototype.update=function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},t.prototype.batchRequest=function(e,t,i){var s=this,n=i.guid=gp.getGuid(this.options.batchPre),o=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var r=[],a=function(s,o){t.addedRecords.forEach(function(o,a){var l=function(e,t,i){return""};r.push("--"+n),r.push("Content-Type: application/http; msgtype=request",""),r.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||i.url)+l(t.addedRecords,s,i.key)+" HTTP/1.1"),r.push("Content-Type: application/json; charset=utf-8"),r.push("Host: "+location.host),r.push("",o?JSON.stringify(o):"")})},l=0,h=t.addedRecords.length;l<h;l++)a(l);var c=function(o,a){t.changedRecords.forEach(function(a,l){s.options.updateType;var h=function(e,t,i){return""};r.push("--"+n),r.push("Content-Type: application/http; msgtype=request",""),r.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||i.url)+h(t.changedRecords,o,i.key)+" HTTP/1.1"),r.push("Content-Type: application/json; charset=utf-8"),r.push("Host: "+location.host),r.push("",a?JSON.stringify(a):"")})};for(l=0,h=t.changedRecords.length;l<h;l++)c(l);var p=function(s,o){t.deletedRecords.forEach(function(o,a){var l=function(e,t,i){var s=gp.getObject(i,e[t]);return"number"==typeof s||gp.parse.isGuid(s)?"/"+s:s instanceof Date?"/"+e[t][i].toJSON():"/'"+s+"'"};r.push("--"+n),r.push("Content-Type: application/http; msgtype=request",""),r.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||i.url)+l(t.deletedRecords,s,i.key)+" HTTP/1.1"),r.push("Content-Type: application/json; charset=utf-8"),r.push("Host: "+location.host),r.push("",o?JSON.stringify(o):"")})};for(l=0,h=t.deletedRecords.length;l<h;l++)p(l);return r.push("--"+n+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+n,data:r.join("\r\n")}},t.prototype.beforeSend=function(e,t,i){t.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,i,s,n,o){var r=n&&n.pvtData,a=null,l={};if(n&&"post"!==n.type.toLowerCase()){var h=s&&n.getResponseHeader("DataServiceVersion"),c=h&&parseInt(h,10)||2;i&&i.isCountRequired&&(gp.isNull(e.Count)||(a=e.Count)),c<3&&e.Items&&(e=e.Items),l.count=a,l.result=e,this.getAggregateResult(r,e,l,null,i)}return l.result=l.result||e,gp.isNull(a)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}},t}(xp),kp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vp(t,e),t.prototype.processQuery=function(e,t,i){var s=(new Sp).processQuery(e,t,i),n=gp.parse.parseJson(s.data),o={};if(n.param)for(var r=0;r<n.param.length;r++){var a=n.param[r],l=Object.keys(a)[0];o[l]=a[l]}o.value=n;return{data:JSON.stringify(o),url:s.url,pvtData:s.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}},t}(Sp),Tp=function(e){function t(){var t=e.call(this)||this;return te("beforeSend",Sp.prototype.beforeSend,t),t}return vp(t,e),t.prototype.insert=function(e,t,i,s,n){return this.pvt.position=n,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(re({},{value:t,table:i,action:"insert"},gp.getAddParams(this,e,s)))}},t.prototype.remove=function(t,i,s,n,o){return e.prototype.remove.call(this,t,i,s),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(re({},{key:s,keyColumn:i,table:n,action:"remove"},gp.getAddParams(this,t,o)))}},t.prototype.update=function(e,t,i,s,n){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(re({},{value:i,action:"update",keyColumn:t,key:i[t],table:s},gp.getAddParams(this,e,n)))}},t.prototype.processResponse=function(t,i,s,n,o,r,a){var l;if(t=o?JSON.parse(o.data):t,"add"===this.updateType&&e.prototype.insert.call(this,i,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(l=0;l<t.added.length;l++)e.prototype.insert.call(this,i,t.added[l]);if(t.changed)for(l=0;l<t.changed.length;l++)e.prototype.update.call(this,i,a.key,t.changed[l]);if(t.deleted)for(l=0;l<t.deleted.length;l++)e.prototype.remove.call(this,i,a.key,t.deleted[l]);return t},t.prototype.batchRequest=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(re({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},gp.getAddParams(this,e,s)))}},t.prototype.addParams=function(e){(new Sp).addParams(e)},t}(Cp),Lp=function(e){function t(t){var i=e.call(this)||this;return i.options=re({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),re(i.options,t||{}),i}return vp(t,e),t.prototype.getModuleName=function(){return"AjaxAdaptor"},t}(Sp),Dp=function(e){function t(t,i,s){var n=e.call(this)||this;n.isCrudAction=!1,n.isInsertAction=!1,ae(t)||(n.cacheAdaptor=t),n.pageSize=s,n.guidId=gp.getGuid("cacheAdaptor");window.localStorage.setItem(n.guidId,JSON.stringify({keys:[],results:[]}));var o=n.guidId;return ae(i)||setInterval(function(){var e;e=gp.parse.parseJson(window.localStorage.getItem(o));for(var t=[],s=0;s<e.results.length;s++){var n=+new Date,r=+new Date(e.results[s].timeStamp);e.results[s].timeStamp=n-r,n-r>i&&t.push(s)}for(s=0;s<t.length;s++)e.results.splice(t[s],1),e.keys.splice(t[s],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(e))},i),n}return vp(t,e),t.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),s=up.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),n=e;"onPage"in s&&(n+=s.onPage.pageIndex),i.sorts.forEach(function(e){n+=e.e.direction+e.e.fieldName}),i.groups.forEach(function(e){n+=e.e.fieldName}),i.searches.forEach(function(e){n+=e.e.searchKey});for(var o=0;o<i.filters.length;o++){var r=i.filters[o];if(r.e.isComplex){var a=t.clone();a.queries=[];for(var l=0;l<r.e.predicates.length;l++)a.queries.push({fn:"onWhere",e:r.e.predicates[l],filter:t.queries.filter});n+=r.e.condition+this.generateKey(e,a)}else n+=r.e.field+r.e.operator+r.e.value}return n},t.prototype.processQuery=function(e,t,i){var s,n=this.generateKey(e.dataSource.url,t),o=(s=gp.parse.parseJson(window.localStorage.getItem(this.guidId)))?s.results[s.keys.indexOf(n)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o},t.prototype.processResponse=function(e,t,i,s,n,o){if(this.isInsertAction||n&&this.cacheAdaptor.options.batch&&gp.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,n,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var r=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,a={},l=(a=gp.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(r);for(-1!==l&&(a.results.splice(l,1),a.keys.splice(l,1)),a.results[a.keys.push(r)-1]={keys:r,result:e.result,timeStamp:new Date,count:e.count};a.results.length>this.pageSize;)a.results.splice(0,1),a.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(a)),e},t.prototype.beforeSend=function(e,t,i){!ae(this.cacheAdaptor.options.batch)&&gp.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,s)},t.prototype.insert=function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)},t.prototype.remove=function(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},t.prototype.batchRequest=function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)},t}(Sp),Ip=function(){function e(e,t,i){var s,n=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof Tp||e.adaptor instanceof Lp)&&!e.url,requiresFormat:e.requiresFormat}):gp.throwError("DataManager: Invalid arguments"),void 0!==s.requiresFormat||gp.isCors()||(s.requiresFormat=!!ae(s.crossDomain)||s.crossDomain),void 0===s.dataType&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new xp,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new up),this.ready.then(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=e.result,n.adaptor=new Cp})):this.adaptor=s.offline?new Cp:new xp,!s.jsonp&&this.adaptor instanceof xp&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new Dp(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof up||gp.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||gp.throwError("DataManager - executeLocal() : Json data is required to execute"),t=t||this.defaultQuery;var i=this.adaptor.processQuery(this,t);if(t.subQuery){var s=t.subQuery.fromTable,n=t.subQuery.lookups,o=t.isCountRequired?i.result:i;n&&n instanceof Array&&gp.buildHierarchy(t.subQuery.fKey,s,o,n,t.subQuery.key);for(var r=0;r<o.length;r++)o[r][s]instanceof Array&&(o[r]=re({},{},o[r]),o[r][s]=this.adaptor.processResponse(t.subQuery.using(new e(o[r][s].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(i,this,t)},e.prototype.executeQuery=function(t,i,s,n){var o=this;"function"==typeof t&&(n=s,s=i,i=t,t=null),t||(t=this.defaultQuery),t instanceof up||gp.throwError("DataManager - executeQuery() : A query is required to execute");var r=new Op,a={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!ae(this.adaptor.makeRequest)||this.isAjaxAdaptor(this.adaptor)){var l=this.adaptor.processQuery(this,t);ae(this.adaptor.makeRequest)?!ae(l.url)||this.isAjaxAdaptor(this.adaptor)?this.makeRequest(l,r,a,t):(a=e.getDeferedArgs(t,l,a),r.resolve(a)):this.adaptor.makeRequest(l,r,a,t)}else e.nextTick(function(){var i=o.executeLocal(t);a=e.getDeferedArgs(t,i,a),r.resolve(a)});return(i||s)&&r.promise.then(i,s),n&&r.promise.then(n,n),r.promise},e.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,i){return re({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},e.prototype.makeRequest=function(e,t,i,s){var n=this,o=!!s.subQuerySelector,r=function(e){i.error=e,t.reject(i)},a=function(e,s,n,o,r,a,l){i.xhr=n,i.count=s?parseInt(s.toString(),10):0,i.result=e,i.request=o,i.aggregates=a,i.actual=r,i.virtualSelectRecords=l,t.resolve(i)},l=function(e,t){var l=new Op,h={parent:i};s.subQuery.isChild=!0;var c=n.adaptor.processQuery(n,s.subQuery,e?n.adaptor.processResponse(e):t),p=n.makeRequest(c,l,h,s.subQuery);return o||l.then(function(t){e&&(gp.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,e,t,s.subQuery.key),a(e,t.count,t.xhr))},r),p},h=this.extendRequest(e,function(e,t){n.isAjaxAdaptor(n.adaptor)&&(t=re({},n.ajaxReqOption,t)),-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&n.dateParse&&(e=gp.parse.parseJson(e));var i=n.adaptor.processResponse(e,n,s,t.httpRequest,t),r=0,h=null,c=e.virtualSelectRecords;s.isCountRequired&&(r=i.count,h=i.aggregates,i=i.result),s.subQuery?o||l(i,t):a(i,r,t.httpRequest,t.type,e,h,c)},r);if(this.isAjaxAdaptor(this.adaptor)){this.ajaxReqOption=h;var c=h;this.adaptor.options.getData({data:c.data,onSuccess:c.onSuccess,onFailure:c.onFailure})}else{var p=new ht(h);p.beforeSend=function(){n.beforeSend(p.httpRequest,p)},(h=p.send()).catch(function(e){return!0}),this.requests.push(p)}if(o){var d=s.subQuerySelector.call(this,{query:s.subQuery,parent:s});d&&d.length?Promise.all([h,l(null,d)]).then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],r=n.adaptor.processResponse(i[0],n,s,n.requests[0].httpRequest,n.requests[0]),l=0;s.isCountRequired&&(l=r.count,r=r.result);var h=n.adaptor.processResponse(i[1],n,s.subQuery,n.requests[1].httpRequest,n.requests[1]);l=0,s.subQuery.isCountRequired&&(l=h.count,h=h.result),gp.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,r,h,s.subQuery.key),o=!1,a(r,l,n.requests[0].httpRequest)}):o=!1}return h},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,n=0;s&&n<s.length;n++){i=[];for(var o=0,r=Object.keys(s[n]);o<r.length;o++){var a=r[o];i.push(a),e.setRequestHeader(a,s[n][a])}}},e.prototype.saveChanges=function(e,t,i,s,n){var o=this;i instanceof up&&(s=i,i=null);var r={url:i,key:t||this.dataSource.key},a=this.adaptor.batchRequest(this,e,r,s||new up,n);if(this.dataSource.offline)return a;if(ae(this.adaptor.doAjaxRequest)){if(this.isAjaxAdaptor(this.adaptor))return this.doAjaxRequest(a,this.adaptor.options.batchUpdate);var l=new Op,h=new ht(a);return h.beforeSend=function(){o.beforeSend(h.httpRequest,h)},h.onSuccess=function(t,i){l.resolve(o.adaptor.processResponse(t,o,null,i.httpRequest,i,e,r))},h.onFailure=function(e){l.reject([{error:e}])},h.send().catch(function(e){return!0}),l.promise}return this.adaptor.doAjaxRequest(a)},e.prototype.insert=function(e,t,i,s){t instanceof up&&(i=t,t=null);var n=this.adaptor.insert(this,e,t,i,s);return this.dataSource.offline?n:ae(this.adaptor.doAjaxRequest)?this.doAjaxRequest(n,this.adaptor.options.addRecord):this.adaptor.doAjaxRequest(n)},e.prototype.remove=function(e,t,i,s){"object"==typeof t&&(t=gp.getObject(e,t)),i instanceof up&&(s=i,i=null);var n=this.adaptor.remove(this,e,t,i,s);if(this.dataSource.offline)return n;if(ae(this.adaptor.doAjaxRequest)){var o=this.adaptor.options.deleteRecord;return this.doAjaxRequest(n,o)}return this.adaptor.doAjaxRequest(n)},e.prototype.update=function(e,t,i,s,n){i instanceof up&&(s=i,i=null);var o=this.adaptor.update(this,e,t,i,s,n);if(this.dataSource.offline)return o;if(ae(this.adaptor.doAjaxRequest)){var r=this.adaptor.options.updateRecord;return this.doAjaxRequest(o,r)}return this.adaptor.doAjaxRequest(o)},e.prototype.isAjaxAdaptor=function(e){return this.adaptor.getModuleName&&"AjaxAdaptor"===this.adaptor.getModuleName()},e.prototype.successFunc=function(e,t){this.isAjaxAdaptor(this.adaptor)&&(t=re({},this.ajaxReqOption,t));try{gp.parse.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(gp.parse.parseJson(e),this,null,t.httpRequest,t),this.ajaxDeffered.resolve(e)},e.prototype.failureFunc=function(e){this.ajaxDeffered.reject([{error:e}])},e.prototype.doAjaxRequest=function(e,t){var i=this;if(e=re({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.ajaxDeffered=new Op,this.isAjaxAdaptor(this.adaptor))this.ajaxReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var s=new ht(e);s.beforeSend=function(){i.beforeSend(s.httpRequest,s)},s.onSuccess=this.successFunc.bind(this),s.onFailure=this.failureFunc.bind(this),s.send().catch(function(e){return!0})}return this.ajaxDeffered.promise},e}(),Op=function(){return function(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),Ap={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Mp(e,t){var i={};if(ae(e)||"string"==typeof e||"number"==typeof e||!ae(e.isHeader))return e;for(var s=0,n=Object.keys(t);s<n.length;s++){var o=t[n[s]],r=ae(o)||"string"!=typeof o?void 0:ee(o,e);ae(r)||(i[o]=r)}return i}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function s(e,t,i,s,o){return b(e,n(e,t,i,s,o),null,s)}function n(e,t,s,n,o){var r=[],a=re({},i,n);Ap=g(a.moduleName);for(var l=u(),h=0;h<t.length;h++)if(!ae(t[h])){var c=void 0;if(a.itemCreating&&"function"==typeof a.itemCreating){var p={dataSource:t,curData:t[h],text:t[h],options:a};a.itemCreating(p)}if(c=s?f(e,t[h],void 0,null,null,[],null,l,h,n):y(e,t[h],void 0,null,null,n,o),a.itemCreated&&"function"==typeof a.itemCreated){p={dataSource:t,curData:t[h],text:t[h],item:c,options:a};a.itemCreated(p)}r.push(c)}return r}function o(s,n,o,r,a,l){var h=re({},i,o);Ap=g(h.moduleName);var d,v=re({},e.defaultMappedFields,h.fields),b=re({},t,h.ariaAttributes),C=[];r&&(b.level=r);var S,x,w=[];n&&n.length&&!ae(c(n).item)&&!c(n).item.hasOwnProperty(v.id)&&(d=u());for(var E=0;E<n.length;E++){var k=Mp(n[E],v);if(!ae(n[E])){if(h.itemCreating&&"function"==typeof h.itemCreating){var T={dataSource:n,curData:n[E],text:k[v.text],options:h,fields:v};h.itemCreating(T)}var L=n[E];h.itemCreating&&"function"==typeof h.itemCreating&&(k=Mp(n[E],v)),k.hasOwnProperty(v.id)&&!ae(k[v.id])&&(d=k[v.id]);var D=[];if(h.showCheckBox&&(h.itemNavigable&&(k[v.url]||k[v.urlAttributes])?C.push(s("input",{className:Ap.check,attrs:{type:"checkbox"}})):D.push(s("input",{className:Ap.check,attrs:{type:"checkbox"}}))),!0===a)h.showIcon&&k.hasOwnProperty(v.iconCss)&&!ae(k[v.iconCss])&&D.push(s("span",{className:Ap.icon+" "+k[v.iconCss]})),x=(S=f(s,L,k,v,h.itemClass,D,!(!L.hasOwnProperty("isHeader")||!L.isHeader),d,E,o)).querySelector("."+Ap.anchorWrap),h.itemNavigable&&C.length&&wi(C,S.firstElementChild);else{if((S=y(s,L,k,v,h.itemClass,o,l)).classList.add(Ap.level+"-"+b.level),S.setAttribute("aria-level",b.level.toString()),x=S.querySelector("."+Ap.anchorWrap),k.hasOwnProperty(v.tooltip)&&S.setAttribute("title",k[v.tooltip]),k.hasOwnProperty(v.htmlAttributes)&&k[v.htmlAttributes]&&p(S,k[v.htmlAttributes]),k.hasOwnProperty(v.enabled)&&!1===k[v.enabled]&&S.classList.add(Ap.disabled),k.hasOwnProperty(v.isVisible)&&!1===k[v.isVisible]&&(S.style.display="none"),k.hasOwnProperty(v.imageUrl)&&!ae(k[v.imageUrl])&&!h.template){var I={src:k[v.imageUrl]};oe(I,k[v.imageAttributes]);var O=s("img",{className:Ap.image,attrs:I});x?x.insertAdjacentElement("afterbegin",O):wi([O],S.firstElementChild)}if(h.showIcon&&k.hasOwnProperty(v.iconCss)&&!ae(k[v.iconCss])&&!h.template){var A;A=s("div",{className:Ap.icon+" "+k[v.iconCss]}),x?x.insertAdjacentElement("afterbegin",A):wi([A],S.firstElementChild)}D.length&&wi(D,S.firstElementChild),h.itemNavigable&&C.length&&wi(C,S.firstElementChild),m(s,k,v,n,h,S,b.level)}if(x&&bi([S],[Ap.navigable]),h.itemCreated&&"function"==typeof h.itemCreated){T={dataSource:n,curData:n[E],text:k[v.text],item:S,options:h,fields:v};h.itemCreated(T)}C=[],w.push(S)}}return w}function r(e,t,s,n,r,a){var l=re({},i,s);return b(e,o(e,t,s,n,r,a),l.listClass,s)}function a(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function l(e,t,i){if(void 0===i&&(i=new up),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var s=0;s<i.queries.length;s++)"onSortBy"===i.queries[s].fn&&i.queries.splice(s,1);return i}function h(e,t){return new Ip(e).executeLocal(t)}function c(e){for(var t={typeof:null,item:null},i=0;i<e.length;i++)if(!ae(e[i]))return{typeof:typeof e[i],item:e[i]};return t}function p(e,t){var i={};oe(i,t),i.class&&(bi([e],i.class.split(" ")),delete i.class),Di(e,i)}function d(e){for(var t={},i=e.attributes,s=0;s<i.length;s++)t[i[s].nodeName]=i[s].nodeValue;return t}function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function m(e,t,i,s,n,o,a){var l=t[i.child]||[],h=t[i.hasChildren];if(l.length&&(h=!0,o.classList.add(Ap.hasChild),n.processSubChild)){var c=r(e,l,n,++a);o.appendChild(c)}n.expandCollapse&&h&&!n.template&&(o.firstElementChild.classList.add(Ap.iconWrapper),("Left"===n.expandIconPosition?wi:Ei)([e("div",{className:"e-icons "+n.expandIconClass})],o.querySelector("."+Ap.textContent)))}function f(e,s,n,o,r,a,l,h,c,d){var u,m,f=re({},i,d),g=re({},t,f.ariaAttributes),y=s,b=s;"string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s&&(u=s,y="boolean"==typeof n[o.text]||"number"==typeof n[o.text]?n[o.text]:n[o.text]||"",b=n[o.value]),m=ae(u)||ae(n[o.id])||""===n[o.id]?h+"-"+c:h;var C=e("li",{className:(!0===l?Ap.group:Ap.li)+" "+(ae(r)?"":r),id:m,attrs:""!==g.groupItemRole&&""!==g.itemRole?{role:!0===l?g.groupItemRole:g.itemRole}:{}});return u&&n.hasOwnProperty(o.enabled)&&"false"===n[o.enabled].toString()&&C.classList.add(Ap.disabled),l?C.innerText=y:(C.setAttribute("data-value",ae(b)?"null":b),C.setAttribute("role","option"),u&&n.hasOwnProperty(o.htmlAttributes)&&n[o.htmlAttributes]&&p(C,n[o.htmlAttributes]),a.length&&!f.itemNavigable&&Ei(a,C),u&&(n[o.url]||n[o.urlAttributes]&&n[o.urlAttributes].href)?C.appendChild(v(e,u,o,y,a,f.itemNavigable)):(a.length&&f.itemNavigable&&Ei(a,C),C.appendChild(document.createTextNode(y)))),C}function g(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function v(e,t,i,s,n,o){var r,a=Mp(t,i),l={href:a[i.url]};if(a.hasOwnProperty(i.urlAttributes)&&a[i.urlAttributes]&&(oe(l,a[i.urlAttributes]),l.href=a[i.url]?a[i.url]:a[i.urlAttributes].href),o){r=e("a",{className:Ap.text+" "+Ap.url});var h=e("div",{className:Ap.anchorWrap});n&&n.length&&Ei(n,h),h.appendChild(document.createTextNode(s)),Ei([h],r)}else r=e("a",{className:Ap.text+" "+Ap.url,innerHTML:s});return p(r,l),r}function y(e,s,n,o,r,a,l){var h,c,p,d=re({},i,a),m=re({},t,d.ariaAttributes),f=s;"string"!=typeof s&&"number"!=typeof s&&(p=s,f=n[o.text]||"",h=ae(n._id)?n[o.id]:n._id,c=!(!s.hasOwnProperty("isHeader")||!s.isHeader)),a&&a.enableHtmlSanitizer&&(f=f);var g=e("li",{className:(!0===c?Ap.group:Ap.li)+" "+(ae(r)?"":r),attrs:""!==m.groupItemRole&&""!==m.itemRole?{role:!0===c?m.groupItemRole:m.itemRole}:{}});ae(h)?g.setAttribute("data-uid",u()):g.setAttribute("data-uid",h);if(a&&a.removeBlazorID&&"object"==typeof s&&s.hasOwnProperty("BlazId")&&delete s.BlazId,c&&a&&a.groupTemplate)Ei(Xt(a.groupTemplate)(s,l,"groupTemplate",d.groupTemplateID,!!d.isStringTemplate),g);else if(!c&&a&&a.template){Ei(Xt(a.template)(s,l,"template",d.templateID,!!d.isStringTemplate),g)}else{var y=e("div",{className:Ap.textContent,attrs:""!==m.wrapperRole?{role:m.wrapperRole}:{}});if(p&&(n[o.url]||n[o.urlAttributes]&&n[o.urlAttributes].href))y.appendChild(v(e,p,o,f,null,d.itemNavigable));else{var b=e("span",{className:Ap.text,attrs:""!==m.itemText?{role:m.itemText}:{}});a&&a.enableHtmlSanitizer?b.innerText=f:b.innerHTML=f,y.appendChild(b)}g.appendChild(y)}return g}function b(e,s,n,o){var r=re({},i,o),a=re({},t,r.ariaAttributes),l=e("ul",{className:(Ap=g(r.moduleName)).ul+" "+(ae(n)?"":n),attrs:""!==a.listRole?{role:a.listRole}:{}});return Ei(s,l),l}e.createList=function(e,n,o,a,l){var h=re({},i,o),p=re({},t,h.ariaAttributes),d=c(n).typeof;return"string"===d||"number"===d?s(e,n,a,o,l):r(e,n,o,p.level,a,l)},e.createListFromArray=s,e.createListItemFromArray=n,e.createListItemFromJson=o,e.createListFromJson=r,e.getSiblingLI=function(e,t,s){if(Ap=g(i.moduleName),e&&e.length){var n,o,r=Array.prototype.slice.call(e);for(n=r[(o=t?a(t,r):!0===s?r.length:-1)+(!0===s?-1:1)];n&&(!xi(n)||n.classList.contains(Ap.disabled));)n=r[o+=!0===s?-1:1];return n}},e.indexOf=a,e.groupDataSource=function(t,i,s){void 0===s&&(s="None");var n=re({},e.defaultMappedFields,i),o=(new up).group(n.groupBy),r=h(t,o=l(s,"key",o));t=[];for(var a=0;a<r.length;a++){var c=r[a].items,p={};p[n.text]=r[a].key,p.isHeader=!0;var d=n.text;"id"===d&&(p[d="text"]=r[a].key),p._id="group-list-item-"+(r[a].key?r[a].key.toString().trim():"undefined"),p.items=c,t.push(p);for(var u=0;u<c.length;u++)t.push(c[u])}return t},e.addSorting=l,e.getDataSource=h,e.createJsonFromElement=function t(s,n){var o=re({},i,n),r=re({},e.defaultMappedFields,o.fields),a=s.cloneNode(!0),l=[];a.classList.add("json-parent");var h=a.querySelectorAll(".json-parent>li");a.classList.remove("json-parent");for(var c=0;c<h.length;c++){for(var p=h[c],m=p.querySelector("a"),f=p.querySelector("ul"),g={},v=m?m.childNodes:p.childNodes,y=Object.keys(v),b=0;b<v.length;b++)v[Number(y[b])].hasChildNodes()||(g[r.text]=v[Number(y[b])].textContent);var C=d(p);C.id?(g[r.id]=C.id,delete C.id):g[r.id]=u(),Object.keys(C).length&&(g[r.htmlAttributes]=C),m&&(C=d(m),Object.keys(C).length&&(g[r.urlAttributes]=C)),f&&(g[r.child]=t(f,n)),l.push(g)}return l},e.renderContentTemplate=function(t,s,n,o,r,a){for(var l,h=t("ul",{className:(Ap=g(i.moduleName)).ul,attrs:{role:"presentation"}}),c=re({},i,r),p=re({},e.defaultMappedFields,o),d=Xt(s),m=[],f=u(),v=0;v<n.length;v++){var y=Mp(n[v],p),b=n[v],C=b.isHeader;if(l="string"==typeof n[v]||"number"==typeof n[v]?b:y[p.value],c.itemCreating&&"function"==typeof c.itemCreating){var S={dataSource:n,curData:b,text:l,options:c,fields:p};c.itemCreating(S)}c.itemCreating&&"function"==typeof c.itemCreating&&(y=Mp(n[v],p),l="string"==typeof n[v]||"number"==typeof n[v]?b:y[p.value]);var x=t("li",{id:f+"-"+v,className:C?Ap.group:Ap.li,attrs:{role:"presentation"}});if(C)"string"==typeof n[v]||"number"==typeof n[v]?x.innerText=b:x.innerText=y[p.text];else{var w=C?c.groupTemplateID:c.templateID;Ei(d(b,a,C?"headerTemplate":"template",w,!!c.isStringTemplate),x),x.setAttribute("data-value",ae(l)?"null":l),x.setAttribute("role","option")}c.itemCreated&&"function"==typeof c.itemCreated&&(S={dataSource:n,curData:b,text:l,item:x,options:c,fields:p},c.itemCreated(S)),m.push(x)}return Ei(m,h),h},e.renderGroupTemplate=function(t,s,n,o,r,a){for(var l=Xt(t),h=re({},e.defaultMappedFields,n),c=re({},i,r),p=h.groupBy,d=0,u=o;d<u.length;d++){var m=u[d],f={};f[p]=m.textContent,m.innerHTML="",Ei(l(f,a,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate),m)}return o},e.generateId=u,e.generateUL=b,e.generateIcon=function(e,t,s,n){var o=re({},i,n);return Ap=g(o.moduleName),("Left"===o.expandIconPosition?wi:Ei)([e("div",{className:"e-icons "+o.expandIconClass+" "+(ae(s)?"":s)})],t.querySelector("."+Ap.textContent)),t}}(dp||(dp={}));var Pp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Np=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Rp={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},Bp={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},Hp={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},Fp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pp(t,e),Np([os("id")],t.prototype,"id",void 0),Np([os("text")],t.prototype,"text",void 0),Np([os("isChecked")],t.prototype,"isChecked",void 0),Np([os("isVisible")],t.prototype,"isVisible",void 0),Np([os("enabled")],t.prototype,"enabled",void 0),Np([os("iconCss")],t.prototype,"iconCss",void 0),Np([os("child")],t.prototype,"child",void 0),Np([os("tooltip")],t.prototype,"tooltip",void 0),Np([os("groupBy")],t.prototype,"groupBy",void 0),Np([os("text")],t.prototype,"sortBy",void 0),Np([os("htmlAttributes")],t.prototype,"htmlAttributes",void 0),Np([os("tableName")],t.prototype,"tableName",void 0),t}(Ls),jp=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.itemReRender=!1,s.previousSelectedItems=[],s.hiddenItems=[],s.enabledItems=[],s.disabledItems=[],s}return Pp(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.isServerRendered&&ye()||this.virtualizationModule.reRenderUiVirtualization():(ye()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?ye()&&this.isServerRendered||this.virtualizationModule.reRenderUiVirtualization():(ye()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":ae(this.contentContainer)||Ti(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":ye()&&this.isServerRendered||(this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox());break;case"dataSource":this.enableVirtualization?this.isServerRendered&&ye()||this.virtualizationModule.reRenderUiVirtualization():(ye()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"sortOrder":case"showIcon":ye()&&this.isServerRendered?this.interopAdaptor.invokeMethodAsync("ItemSorting"):this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},t.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&Di(this.element,this.htmlAttributes)},t.prototype.setCSSClass=function(e){this.cssClass&&bi([this.element],this.cssClass.split(" ").filter(function(e){return e})),e&&Ci([this.element],e.split(" ").filter(function(e){return e}))},t.prototype.setSize=function(){this.element.style.height=ge(this.height),this.element.style.width=ge(this.width),this.isWindow=!this.element.clientHeight},t.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},t.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.enableElement=function(e,t){t?e.classList.remove(Hp.disable):e.classList.add(Hp.disable)},t.prototype.header=function(e,t,i){if(ye()&&this.isServerRendered){var s={HeaderText:e,BackButton:t};this.interopAdaptor.invokeMethodAsync("HeaderTitle",s)}else if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:ln.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:Hp.header});var n=this.createElement("span",{className:Hp.headerText,innerHTML:this.headerTitle}),o=this.createElement("div",{className:Hp.text,innerHTML:n.outerHTML}),r=this.createElement("div",{className:Hp.icon+" "+Hp.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(r),this.headerEle.appendChild(o),this.headerTemplate){var a=Xt(this.headerTemplate),l=this.createElement("div",{className:Hp.headerTemplateText}),h=a({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);h&&Ei(h,l),Ei([l],this.headerEle),this.updateBlazorTemplates(!1,!0,!0),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&o.classList.add("header"),this.element.classList.add("e-has-header"),wi([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";o=this.headerEle.querySelector("."+Hp.headerText),r=this.headerEle.querySelector("."+Hp.backIcon);this.enableHtmlSanitizer&&(e=ln.sanitize(e)),o.innerHTML=e,this.headerTemplate&&t&&(o.parentElement.classList.remove("header"),this.headerEle.querySelector("."+Hp.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(o.parentElement.classList.add("header"),this.headerEle.querySelector("."+Hp.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+Hp.headerTemplateText).classList.add("header")),r.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"},t.prototype.switchView=function(e,t,i){var s=this;if(e&&t){this.trigger("actionBegin",{startList:e,endList:t,isReverse:i});var n=e.style.position,o="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var r=void 0,a=this.animation.duration;if(this.animation.effect)r=this.enableRtl?Bp[this.animation.effect]:Rp[this.animation.effect];else{r=Rp.SlideLeft,i=this.enableRtl,a=0}this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?r[0]:r[1],duration:a,timingFunction:this.animation.easing,end:function(t){e.style.display="none",s.element.style.overflow=o,e.style.position=n,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?r[2]:r[3],duration:a,timingFunction:this.animation.easing,end:function(){s.trigger("actionComplete")}}),this.curUL=t}},t.prototype.preRender=function(){if(this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim())}catch(e){Xt(this.template),this.isReact&&this.renderReactTemplates()}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"option",listRole:"presentation",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer,removeBlazorID:!0},this.initialization()},t.prototype.updateLiElementHeight=function(){var e=this.element.querySelector("."+Hp.virtualElementContainer);e.children[0]&&(this.liElementHeight=e.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight))},t.prototype.initialization=function(){if(ye()&&this.isServerRendered&&this.enableVirtualization){var e=this.element.querySelector("."+Hp.virtualElementContainer);null!==e&&(""===this.height&&(this.interopAdaptor.invokeMethodAsync("SetComponentHeight",window.innerHeight),this.isWindow=!0,e.scrollIntoView()),-1!==this.height.toString().indexOf("%")&&this.interopAdaptor.invokeMethodAsync("SetContainerHeight",this.element.getBoundingClientRect().height.toString()),e.children[0]&&(this.liElementHeight=e.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight)))}this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new vs(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},t.prototype.renderCheckbox=function(e){if(e.item.classList.contains(Hp.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var t=void 0;(t=fo(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:Hp.listviewCheckbox})).setAttribute("role","checkbox");var i=t.querySelector("."+Hp.checkboxIcon);e.item.classList.add(Hp.itemCheckList),e.item.firstElementChild.classList.add(Hp.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?Mp(e.curData,this.listBaseOption.fields)[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,t):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,t),t.setAttribute("aria-checked",i.classList.contains(Hp.checked)?"true":"false"),"Left"===this.checkBoxPosition?(t.classList.add(Hp.checkboxLeft),e.item.firstElementChild.classList.add(Hp.checkboxLeft),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0])):(t.classList.add(Hp.checkboxRight),e.item.firstElementChild.classList.add(Hp.checkboxRight),e.item.firstElementChild.appendChild(t)),this.currentLiElements.push(e.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=e.item.firstElementChild.children[0]:this.virtualCheckBox=e.item.firstElementChild.lastElementChild}},t.prototype.checkInternally=function(e,t){e.item.classList.add(Hp.selected),e.item.setAttribute("aria-selected","true"),t.querySelector("."+Hp.checkboxIcon).classList.add(Hp.checked),t.setAttribute("aria-checked","true")},t.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},t.prototype.toggleCheckBase=function(e,t){if(this.showCheckBox){var i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!ae(i)){var s=i.querySelector("."+Hp.checkboxIcon);t?i.classList.add(Hp.selected):i.classList.remove(Hp.selected),i.setAttribute("aria-selected",t?"true":"false"),t?s.classList.add(Hp.checked):s.classList.remove(Hp.checked),s.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i)}},t.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},t.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},t.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},t.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+Hp.checkboxIcon);i&&(e?i.classList.contains(Hp.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(Hp.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e)}},t.prototype.setCheckbox=function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+Hp.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var s=e[i];t.item=s,t.curData=this.getItemData(s),s.querySelector("."+Hp.checkboxWrapper)&&this.removeElement(s.querySelector("."+Hp.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(Hp.selected)&&this.checkInternally(t,t.item.querySelector("."+Hp.checkboxWrapper))}else{for(e=Array.prototype.slice.call(this.element.querySelectorAll("."+Hp.itemCheckList)),i=0;i<e.length;i++){(s=e[i]).classList.remove(Hp.selected),s.firstElementChild.classList.remove(Hp.checkbox),this.removeElement(s.querySelector("."+Hp.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(Hp.selected)}},t.prototype.refreshItemHeight=function(){this.virtualizationModule.refreshItemHeight()},t.prototype.clickHandler=function(e){var t,i=e.target,s=i.classList;if(s.contains(Hp.backIcon)||s.contains(Hp.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var n=Mi(i.parentNode,"."+Hp.listItem);if(null===n&&(n=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(n))if(e.target.classList.contains(Hp.checkboxIcon)){if(n.classList.add(Hp.focused),ae(n.querySelector("."+Hp.checked))){var o={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:n};this.checkInternally(o,o.item.querySelector("."+Hp.checkboxWrapper))}else this.uncheckItem(n),n.classList.add(Hp.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(n,e),e){var r=this.selectEventData(n,e);oe(r,{isChecked:n.querySelector("."+Hp.checkboxIcon).classList.contains(Hp.checked)}),this.trigger("select",r)}}else n.classList.contains(Hp.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(n),this.setSelectLI(n,e),n.classList.remove(Hp.selected)):this.setCheckboxLI(n,e);else this.setSelectLI(n,e);ae(t=Mi(e.target,"li"))||t.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&t.classList.add(Hp.disable)}if(ye()&&this.isServerRendered&&this.enableVirtualization){var a=this.element.querySelector("."+Hp.virtualElementContainer);if(a.querySelector(".e-active")){var l=a.querySelectorAll(".e-active");if(this.showCheckBox)for(var h=0;h<l.length;h++)this.previousSelectedItems.includes(l[h].getAttribute("data-uid"))||this.previousSelectedItems.push(l[h].getAttribute("data-uid"));else this.previousSelectedItems[0]=a.querySelector(".e-active").getAttribute("data-uid")}if(a.querySelector(".e-focused")){var c=a.querySelector(".e-focused");if(!c.classList.contains("e-active")){var p=c.getAttribute("data-uid");if(this.previousSelectedItems.includes(p)){var d=this.previousSelectedItems.slice(0,this.previousSelectedItems.indexOf(p)),u=this.previousSelectedItems.slice(this.previousSelectedItems.indexOf(p)+1,this.previousSelectedItems.length);this.previousSelectedItems=d.concat(u)}}}}},t.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.hoverHandler=function(e){var t=Mi(e.target.parentNode,"."+Hp.listItem);this.setHoverLI(t)},t.prototype.leaveHandler=function(e){this.removeHover()},t.prototype.homeKeyHandler=function(e,t){if(Object.keys(this.dataSource).length&&this.curUL){this.selectedItems&&this.selectedItems.item.setAttribute("aria-selected","false");var i=this.curUL.querySelectorAll("."+Hp.listItem),s=this.curUL.querySelector("."+Hp.focused)||this.curUL.querySelector("."+Hp.selected);s&&(s.classList.remove(Hp.focused),this.showCheckBox||s.classList.remove(Hp.selected));var n=t?i.length-1:0;i[n].classList.contains(Hp.hasChild)||this.showCheckBox?i[n].classList.add(Hp.focused):this.setSelectLI(i[n],e),i[n]?this.element.setAttribute("aria-activedescendant",i[n].id.toString()):this.element.removeAttribute("aria-activedescendant")}},t.prototype.onArrowKeyDown=function(e,t){var i,s;return!ae(this.curUL.querySelector("."+Hp.hasChild))||this.showCheckBox?(s=this.curUL.querySelector("."+Hp.focused)||this.curUL.querySelector("."+Hp.selected),ae(i=dp.getSiblingLI(this.curUL.querySelectorAll("."+Hp.listItem),s,t))||(s&&(s.classList.remove(Hp.focused),this.showCheckBox||s.classList.remove(Hp.selected)),i.classList.contains(Hp.hasChild)||this.showCheckBox?i.classList.add(Hp.focused):this.setSelectLI(i,e))):(s=this.curUL.querySelector("."+Hp.selected),i=dp.getSiblingLI(this.curUL.querySelectorAll("."+Hp.listItem),s,t),this.setSelectLI(i,e)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},t.prototype.arrowKeyHandler=function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var s=this.onArrowKeyDown(e,t),n=this.element.getBoundingClientRect().top,o=this.element.getBoundingClientRect().height,r=this.curUL.querySelector("."+Hp.listItem).getBoundingClientRect(),a=void 0,l=void 0;if(this.fields.groupBy&&(l=this.curUL.querySelector("."+Hp.groupListItem).getBoundingClientRect()),s){var h=s.getBoundingClientRect().top,c=s.getBoundingClientRect().height;if(t)(a=this.isWindow?h:h-n)<0&&(this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop+a);else{var p=this.isWindow?window.innerHeight:o;(a=this.isWindow?h+c:h-n+c)>p&&(this.isWindow?window.scroll(0,pageYOffset+(a-p)):this.element.scrollTop=this.element.scrollTop+(a-p))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=this.element.scrollTop-a;else if(t)if(this.showHeader&&this.headerEle){var d=l?l.top:r.top,u=this.headerEle.getBoundingClientRect();a=u.top<0?u.height-d:0,this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=0}else this.fields.groupBy&&(a=this.isWindow?l.top<0?l.top:0:n-r.top+l.height,this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop-a)}},t.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!ae(this.curUL.querySelector("."+Hp.hasChild)),i=this.curUL.querySelector("."+Hp.focused);t&&i&&(i.classList.remove(Hp.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}},t.prototype.spaceKeyHandler=function(e){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+Hp.focused);if(!ae(t)&&ae(t.querySelector("."+Hp.checked))){var i={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};this.checkInternally(i,i.item.querySelector("."+Hp.checkboxWrapper))}else this.uncheckItem(t)}},t.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(e)}},t.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},t.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+Hp.focused),t=this.curUL.querySelector("[aria-selected = true]");e&&(e.classList.remove(Hp.focused),t&&!this.showCheckBox&&t.classList.add(Hp.selected))}},t.prototype.wireEvents=function(){Ct.add(this.element,"keydown",this.keyActionHandler,this),Ct.add(this.element,"click",this.clickHandler,this),Ct.add(this.element,"mouseover",this.hoverHandler,this),Ct.add(this.element,"mouseout",this.leaveHandler,this),Ct.add(this.element,"focusout",this.focusout,this),this.touchModule=new nn(this.element,{swipe:this.swipeActionHandler.bind(this)})},t.prototype.unWireEvents=function(){Ct.remove(this.element,"click",this.clickHandler),Ct.remove(this.element,"mouseover",this.hoverHandler),Ct.remove(this.element,"mouseout",this.leaveHandler),Ct.remove(this.element,"mouseover",this.hoverHandler),Ct.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()},t.prototype.removeFocus=function(){for(var e=0,t=this.element.querySelectorAll("."+Hp.focused);e<t.length;e++){t[e].classList.remove(Hp.focused)}},t.prototype.removeHover=function(){var e=this.element.querySelector("."+Hp.hover);e&&e.classList.remove(Hp.hover)},t.prototype.removeSelect=function(e){if(ae(e))for(var t=0,i=this.element.querySelectorAll("."+Hp.selected);t<i.length;t++){var s=i[t];this.showCheckBox&&s.querySelector("."+Hp.checked)||(s.setAttribute("aria-selected","false"),s.classList.remove(Hp.selected))}else e.classList.remove(Hp.selected),e.setAttribute("aria-selected","false")},t.prototype.isValidLI=function(e){return e&&e.classList.contains(Hp.listItem)&&!e.classList.contains(Hp.groupListItem)&&!e.classList.contains(Hp.disable)},t.prototype.setCheckboxLI=function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+Hp.focused)&&this.curUL.querySelector("."+Hp.focused).classList.remove(Hp.focused),e.classList.add(Hp.focused);var i=e.querySelector("."+Hp.checkboxWrapper),s=i.querySelector("."+Hp.checkboxIcon+"."+Hp.icon);this.removeHover(),s.classList.contains(Hp.checked)?(s.classList.remove(Hp.checked),e.classList.remove(Hp.selected),e.setAttribute("aria-selected","false")):(s.classList.add(Hp.checked),e.classList.add(Hp.selected),e.setAttribute("aria-selected","true")),i.setAttribute("aria-checked",s.classList.contains(Hp.checked)?"true":"false");var n=this.selectEventData(e,t);oe(n,{isChecked:s.classList.contains(Hp.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",n),this.setSelectedItemData(e),this.renderSubList(e)}},t.prototype.selectEventData=function(e,t){var i=this.getItemData(e),s=Mp(i,this.listBaseOption.fields),n={};return oe(n,!ae(i)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:s&&s[this.listBaseOption.fields.text],data:i}),t&&oe(n,{isInteracted:!0,event:t,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),n},t.prototype.setSelectedItemData=function(e){var t=this.getItemData(e),i=Mp(t,this.listBaseOption.fields);ae(t)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:e,text:i&&i[this.listBaseOption.fields.text],data:t}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},t.prototype.setSelectLI=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(Hp.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(Hp.selected),e.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var i=this.selectEventData(e,t);this.trigger("select",i),this.selectedLI=e,this.renderSubList(e)}},t.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(Hp.hover)&&this.enable){var t=this.element.querySelectorAll("."+Hp.hover);t&&t.length&&Ci(t,Hp.hover),e.classList.contains(Hp.selected)&&!this.showCheckBox||e.classList.add(Hp.hover)}},t.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var t=this.localData,i=0,s=e;i<s.length;i++){var n=s[i],o={};o[this.fields.id]=n,this.curDSJSON=this.findItemFromDS(t,o);var r=Mp(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?r[this.fields.child]:t}return t}return this.localData},t.prototype.getItemData=function(e){var t,i=this.dataSource instanceof Ip?this.localData:this.dataSource,s=this.getElementUID(e);return t=ae(this.element.querySelector("."+Hp.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,s)},t.prototype.findItemFromDS=function(e,t,i){var s,n=this;return e&&e.length&&t?e.some(function(o){var r=Mp(o,n.listBaseOption.fields);if(!t[n.fields.id]&&!t[n.fields.text]||t[n.fields.id]&&(!ae(r[n.fields.id])&&r[n.fields.id].toString())!==t[n.fields.id].toString()||t[n.fields.text]&&r[n.fields.text]!==t[n.fields.text])if("object"!=typeof o&&-1!==e.indexOf(o))s=i?e:o;else if(!ae(t[n.fields.id])&&ae(r[n.fields.id])){var a=n.element.querySelector('[data-uid="'+t[n.fields.id]+'"]');a&&a.innerText.trim()===r[n.fields.text]&&(s=o)}else r.hasOwnProperty(n.fields.child)&&r[n.fields.child].length&&(s=n.findItemFromDS(r[n.fields.child],t,i));else s=i?e:o;return!!s}):s=e,s},t.prototype.getQuery=function(){var e=[],t=this.query?this.query:new up;if(!this.query){for(var i=0,s=Object.keys(this.fields.properties);i<s.length;i++){var n=s[i];"tableName"!==n&&this.fields[n]&&this.fields[n]!==dp.defaultMappedFields[n]&&-1===e.indexOf(this.fields[n])&&e.push(this.fields[n])}t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t},t.prototype.setViewDataSource=function(e){void 0===e&&(e=this.localData),e&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=dp.groupDataSource(dp.getDataSource(e,dp.addSorting(this.sortOrder,this.fields.sortBy)),this.listBaseOption.fields,this.sortOrder):this.curViewDS=dp.groupDataSource(e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?this.curViewDS=dp.getDataSource(e,dp.addSorting(this.sortOrder,this.fields.sortBy)):this.curViewDS=e},t.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},t.prototype.setLocalData=function(){var e=this;this.trigger("actionBegin");var t=this;if(this.dataSource instanceof Ip)this.dataSource.executeQuery(this.getQuery()).then(function(i){e.isDestroyed||(e.localData=i.result,e.isServerRendered&&ye()||(t.removeElement(t.contentContainer),e.isReact&&e.clearTemplate()),e.renderList(),e.trigger("actionComplete",i))}).catch(function(t){e.isDestroyed||e.trigger("actionFailure",t)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&(Li(i),this.setProperties({dataSource:dp.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},t.prototype.reRender=function(){ye()&&this.isServerRendered&&!this.enableVirtualization||(this.resetBlazorTemplates(),this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header()),this.setLocalData()},t.prototype.resetCurrentList=function(){this.resetBlazorTemplates(),this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},t.prototype.setAttributes=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("aria-selected","false"),i.setAttribute("tabindex","-1"))}},t.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=dp.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+Hp.listItem),this.setAttributes(this.liCollection),this.updateBlazorTemplates(!0)},t.prototype.resetBlazorTemplates=function(){var e=Gt;this.template&&(e[this.LISTVIEW_TEMPLATE_ID]=[],Zt(this.LISTVIEW_TEMPLATE_ID)),this.groupTemplate&&(e[this.LISTVIEW_GROUPTEMPLATE_ID]=[],Zt(this.LISTVIEW_GROUPTEMPLATE_ID)),this.headerTemplate&&Zt(this.LISTVIEW_HEADERTEMPLATE_ID)},t.prototype.updateBlazorTemplates=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),this.template&&e&&!this.enableVirtualization&&Kt(this.LISTVIEW_TEMPLATE_ID,"Template",this,i),this.groupTemplate&&e&&!this.enableVirtualization&&Kt(this.LISTVIEW_GROUPTEMPLATE_ID,"GroupTemplate",this,i),this.headerTemplate&&t&&Kt(this.LISTVIEW_HEADERTEMPLATE_ID,"HeaderTemplate",this,i)},t.prototype.exceptionEvent=function(e){this.trigger("actionFailure",e)},t.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+Hp.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+Hp.listItem))},t.prototype.removeActiveClass=function(){var e=this;setTimeout(function(){for(var t=e.element.querySelector("."+Hp.virtualElementContainer),i=0;i<t.childElementCount;i++){var s=t.children[i],n=void 0,o=void 0;if(e.showCheckBox)if(e.previousSelectedItems.length>0)for(var r=0;r<e.previousSelectedItems.length;r++)s.getAttribute("data-uid")===e.previousSelectedItems[r]?(s.classList.add("e-active"),s.setAttribute("aria-selected","true"),s.querySelector(".e-frame.e-icons")&&s.querySelector(".e-frame.e-icons").classList.add("e-check"),n=i):n!==i&&(s.classList.remove("e-active"),s.removeAttribute("aria-selected"),s.querySelector(".e-check")&&s.querySelector(".e-check").classList.remove("e-check"));else s.classList.remove("e-active"),s.removeAttribute("aria-selected"),s.querySelector(".e-check")&&s.querySelector(".e-check").classList.remove("e-check");else s.getAttribute("data-uid")===e.previousSelectedItems[0]?(s.classList.add("e-active"),s.setAttribute("aria-selected","true")):(s.classList.remove("e-active"),s.removeAttribute("aria-selected"));if(e.hiddenItems.length>0)for(var a=0;a<e.hiddenItems.length;a++)s.getAttribute("data-uid")===e.previousSelectedItems[a]?(s.style.display="none",o=i):o!==i&&(s.style.display=null);if(e.enabledItems.length>0)for(var l=0;l<e.enabledItems.length;l++)s.getAttribute("data-uid")===e.enabledItems[l]&&s.classList.contains("e-disabled")&&s.classList.remove("e-disabled");if(e.disabledItems.length>0)for(var h=0;h<e.disabledItems.length;h++)s.getAttribute("data-uid")===e.disabledItems[h]&&(s.classList.contains("e-disabled")||s.classList.add("e-disabled"))}},200)},t.prototype.renderingNestedList=function(){var e=Mi(this.liElement.parentNode,"."+Hp.parentItem),t=this.element.id,i=document.getElementById(t),s=i.getElementsByTagName("UL")[i.getElementsByTagName("UL").length-1];this.switchView(e,s),this.liElement=null},t.prototype.renderSubList=function(e){this.liElement=e;var t=e.getAttribute("data-uid");if(e.classList.contains(Hp.hasChild)&&t){var i=Mi(e.parentNode,"."+Hp.parentItem),s=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!s){var n=this.curViewDS;if(ye()&&this.isServerRendered)this.interopAdaptor.invokeMethodAsync("ListChildDataSource",n);else{s=dp.createListFromJson(this.createElement,n,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var o=s.querySelectorAll("."+Hp.listItem);this.setAttributes(o),s.setAttribute("pID",t),s.style.display="none",this.renderIntoDom(s),this.updateBlazorTemplates(!0)}}if(ye()&&this.isServerRendered&&!this.enableVirtualization||this.switchView(i,s,!1),this.liCollection=this.curUL.querySelectorAll("."+Hp.listItem),this.selectedItems){var r=Mp(this.selectedItems.data,this.listBaseOption.fields);this.header(r[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},t.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},t.prototype.renderList=function(e){this.setViewDataSource(e),ye()&&this.isServerRendered&&!this.enableVirtualization||(this.enableVirtualization?(Object.keys(this.dataSource).length&&(ye()&&this.isServerRendered||!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:Hp.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates()))},t.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},t.prototype.render=function(){ye()&&this.isServerRendered?this.initBlazor(!0):(this.element.classList.add(Hp.root),Di(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.isReact&&this.renderReactTemplates()),this.rippleFn=ys(this.element,{selector:"."+Hp.listItem}),this.renderComplete()},t.prototype.initBlazor=function(e){null===e&&(e=!1),this.setLocalData(),this.setViewDataSource(this.localData),this.contentContainer=this.element.querySelector("."+Hp.content),e&&this.wireEvents()},t.prototype.destroy=function(){this.resetBlazorTemplates(),this.isReact&&this.clearTemplate(),this.unWireEvents();var t=[Hp.root,Hp.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter(function(e){return e}));Ci([this.element],t),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,ye()&&this.isServerRendered?this.element.style.display="none":(this.element.innerHTML="",e.prototype.destroy.call(this))},t.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=ye()&&this.isServerRendered&&this.enableVirtualization?t.parentElement.parentElement.parentElement:t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var s=Mp(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();var n=this.element.querySelector("[data-uid='"+e+"']");n.classList.remove(Hp.disable),n.classList.add(Hp.focused),this.showCheckBox&&n.querySelector("."+Hp.checkboxIcon).classList.contains(Hp.checked)?n.setAttribute("aria-selected","true"):(n.classList.remove(Hp.selected),n.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+Hp.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:ln.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?s:this.headerTitle,!!this.curDSLevel.length,"header")}},t.prototype.selectItem=function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):ae(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))},t.prototype.getLiFromObjOrElement=function(e){var t,i=this.dataSource instanceof Ip?this.localData:this.dataSource;if(!ae(e))if("string"==typeof i[0]||"number"==typeof i[0])if(e instanceof Element){for(var s=e.getAttribute("data-uid").toString(),n=0;n<this.liCollection.length;n++)if(this.liCollection[n].getAttribute("data-uid").toString()===s){t=this.liCollection[n];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+Hp.listItem),function(i){return i.innerText.trim()===e.toString()&&(t=i,!0)});else{var o=this.getItemData(e),r=Mp(o,this.listBaseOption.fields);if(o&&(t=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]'),!this.enableVirtualization&&ae(t))){var a=this.element.querySelectorAll("."+Hp.listItem);for(n=0;n<a.length;n++)a[n].innerText.trim()===r[this.fields.text]&&(t=a[n])}}return t},t.prototype.selectMultipleItems=function(e){if(!ae(e))for(var t=0;t<e.length;t++)ae(e[t])||this.selectItem(e[t])},t.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},t.prototype.getSelectedItems=function(){var e,t=!1;this.selectedId=[];var i=this.dataSource instanceof Ip?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){var s=this.curUL.getElementsByClassName(Hp.selected),n=[],o=[];this.selectedId=[];for(var r=[],a=0;a<s.length;a++)if("string"==typeof i[0]||"number"==typeof i[0])n.push(s[a].innerText.trim());else{var l=this.getItemData(s[a]),h=Mp(l,this.listBaseOption.fields);this.isNestedList?r.push({data:l,parentId:this.getParentId()}):o.push(l),h?(n.push(h[this.listBaseOption.fields.text]),this.selectedId.push(h[this.listBaseOption.fields.id])):(n.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||t||(e={item:s,data:i,text:n},t=!0),this.isNestedList&&!t?(e={item:s,data:r,text:n},t=!0):t||(e={item:s,data:o,text:n},t=!0)}else if(!t){var c=this.element.getElementsByClassName(Hp.selected)[0];h=Mp(this.getItemData(c),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||t?t||(ae(h)||ae(c)?(e=void 0,t=!0):(this.selectedId.push(h[this.listBaseOption.fields.id]),e={text:h[this.listBaseOption.fields.text],item:c,data:this.getItemData(c)},t=!0)):(e=ae(c)?void 0:{item:c,data:i,text:c.innerText.trim()},t=!0)}return ye()?this.blazorGetSelectedItems(e):e},t.prototype.blazorGetSelectedItems=function(e){var t={data:[],index:[],parentId:[],text:[]};if(!ae(e)){if(!ae(e.data))if(this.showCheckBox&&this.isNestedList){for(var i=0;i<e.data.length;i++)t.data.push(e.data[i].data);ae(e.data[0])||ae(e.data[0].parentId)||(t.parentId=e.data[0].parentId)}else t.data=this.convertItemsToArray(e.data);ae(e.text)||(t.text=this.convertItemsToArray(e.text)),ae(e.index)||(t.index=this.convertItemsToArray(e.index))}return t},t.prototype.convertItemsToArray=function(e){return Array.isArray(e)?e.slice():[e]},t.prototype.findItem=function(e){return this.getItemData(e)},t.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},t.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},t.prototype.setItemState=function(e,t){var i=this.getItemData(e),s=Mp(i,this.listBaseOption.fields);if(i){var n=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]');t?(n&&n.classList.remove(Hp.disable),delete i[this.fields.enabled]):t||(n&&n.classList.add(Hp.disable),i[this.fields.enabled]=!1)}},t.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},t.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},t.prototype.showHideItem=function(e,t,i){var s=this.getItemData(e),n=Mp(s,this.listBaseOption.fields);if(s){var o=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');o&&(o.style.display=i),t?s[this.fields.isVisible]=!1:delete s[this.fields.isVisible]}},t.prototype.addItem=function(e,t){void 0===t&&(t=void 0);var i=this.dataSource instanceof Ip?this.localData:this.dataSource;this.addItemInternally(e,t,i)},t.prototype.addItemInternally=function(e,t,i){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,i);else{var s=this.findItemFromDS(i,t),n=void 0;if(s)(n=Mp(s,this.listBaseOption.fields)[this.fields.child])||(n=[]),n=n.concat(e);if(s instanceof Array){for(var o=0;o<e.length;o++){i.push(e[o]),this.setViewDataSource(i);var r=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&r?this.addItemIntoDom(e[o],r,this.curViewDS):this.reRender()}this.curUL&&this.updateBlazorTemplates(!0),this.liCollection=this.curUL.querySelectorAll("."+Hp.listItem)}else s&&(s[this.fields.child]=n,this.addItemInNestedList(s,e))}},t.prototype.addItemInNestedList=function(e,t){var i=e[this.fields.id],s=e[this.fields.child],n=this.element.querySelector("[pid='"+i+"']"),o=this.element.querySelector("[data-uid='"+i+"']"),r=n||(o?Mi(o,"ul"):null),a=n?s:[e],l=!1;if(!!o&&!o.classList.contains(Hp.hasChild)){var h=dp.createListItemFromJson(this.createElement,a,this.listBaseOption,null,null,this);this.setAttributes(h),r.insertBefore(h[0],o),Ti(o),l=!0}if(n&&t){for(var c=0;c<t.length;c++)a.push(t[c]),this.addItemIntoDom(t[c],r,a);l=!0}l&&this.updateBlazorTemplates(!0)},t.prototype.addItemIntoDom=function(e,t,i){var s=i.indexOf(e);this.addListItem(e,s,t,i);var n=i[s-1];n&&n.isHeader&&1===n.items.length&&this.addListItem(n,s-1,t,i)},t.prototype.addListItem=function(e,t,i,s){var n=this.getLiFromObjOrElement(s[t+1])||this.getLiFromObjOrElement(s[t+2])||null,o=dp.createListItemFromJson(this.createElement,[e],this.listBaseOption,null,null,this);this.setAttributes(o),this.template&&this.isReact&&this.renderReactTemplates(),i.insertBefore(o[0],n)},t.prototype.removeItem=function(e){var t=this.dataSource instanceof Ip?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):(this.removeItemFromList(e,t),this.updateBlazorTemplates(!0))},t.prototype.removeItemFromList=function(e,t){var i,s=this,n=this.curViewDS,o=e instanceof Element?this.getElementUID(e):e;if(i=this.findItemFromDS(t,o,!0)){var r;r=this.findItemFromDS(i,o);var a=n.indexOf(r),l=this.getLiFromObjOrElement(e),h=void 0;this.validateNestedView(l),this.fields.groupBy&&this.curViewDS[a-1]&&n[a-1].isHeader&&1===n[a-1].items.length&&l&&l.previousElementSibling.classList.contains(Hp.groupListItem)&&(ae(l.nextElementSibling)||l.nextElementSibling&&l.nextElementSibling.classList.contains(Hp.groupListItem))&&(h=l.previousElementSibling),l&&Ti(l),h&&Ti(h);var c=i.length-1<=0?this.findParent(this.localData,this.fields.id,function(e){return e===r[s.fields.id]},null):null,p=i.indexOf(r);if(i.splice(p,1),this.setViewDataSource(t),c&&c.parent&&Array.isArray(c.parent[this.fields.child])&&c.parent[this.fields.child].length<=0){var d=this.getLiFromObjOrElement(c.parent);if(d){var u=dp.createListItemFromJson(this.createElement,[c.parent],this.listBaseOption,null,null,this);this.setAttributes(u),d.parentElement.insertBefore(u[0],d),d.parentElement.removeChild(d)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+Hp.listItem))}},t.prototype.validateNestedView=function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(function(e){return e.toString().toLowerCase()===t});)this.back()},t.prototype.removeMultipleItems=function(e){if(e.length){for(var t=0;t<e.length;t++)this.removeItem(e[t]);this.updateBlazorTemplates(!0)}},t.prototype.findParent=function(e,t,i,s){if(e.hasOwnProperty(t)&&!0===i(e[t]))return re({},e);for(var n=0;n<Object.keys(e).length;n++)if(e[Object.keys(e)[n]]&&"object"==typeof e[Object.keys(e)[n]]){var o=this.findParent(e[Object.keys(e)[n]],t,i,e);if(null!=o)return o.parent||(o.parent=s),o}return null},t.prototype.getModuleName=function(){return"listview"},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])},Np([os("")],t.prototype,"cssClass",void 0),Np([os(!1)],t.prototype,"enableVirtualization",void 0),Np([os({})],t.prototype,"htmlAttributes",void 0),Np([os(!0)],t.prototype,"enable",void 0),Np([os([])],t.prototype,"dataSource",void 0),Np([os()],t.prototype,"query",void 0),Np([rs(dp.defaultMappedFields,Fp)],t.prototype,"fields",void 0),Np([os({effect:"SlideLeft",duration:400,easing:"ease"})],t.prototype,"animation",void 0),Np([os("None")],t.prototype,"sortOrder",void 0),Np([os(!1)],t.prototype,"showIcon",void 0),Np([os(!1)],t.prototype,"showCheckBox",void 0),Np([os("Left")],t.prototype,"checkBoxPosition",void 0),Np([os("")],t.prototype,"headerTitle",void 0),Np([os(!1)],t.prototype,"showHeader",void 0),Np([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Np([os("")],t.prototype,"height",void 0),Np([os("")],t.prototype,"width",void 0),Np([os(null)],t.prototype,"template",void 0),Np([os(null)],t.prototype,"headerTemplate",void 0),Np([os(null)],t.prototype,"groupTemplate",void 0),Np([cs()],t.prototype,"select",void 0),Np([cs()],t.prototype,"actionBegin",void 0),Np([cs()],t.prototype,"actionComplete",void 0),Np([cs()],t.prototype,"actionFailure",void 0),t=Np([ps],t)}(Ns),Vp=function(){function e(e){this.elementDifference=0,this.listViewInstance=e}return e.prototype.isNgTemplate=function(){return!ae(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},e.prototype.uiVirtualization=function(){this.wireScrollEvent(!1);var e=this.listViewInstance.curViewDS,t=e.slice(0,1);ye()||this.listViewInstance.isServerRendered||(this.listViewInstance.ulElement=this.listViewInstance.curUL=dp.createList(this.listViewInstance.createElement,t,this.listViewInstance.listBaseOption,null,this),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:Hp.content}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement)),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1;var i=e.slice(1,this.domItemCount);ye()||this.listViewInstance.isServerRendered?(this.listViewInstance.contentContainer=this.listViewInstance.element.querySelector(".e-content"),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")):(Ei(dp.createListItemFromJson(this.listViewInstance.createElement,i,this.listViewInstance.listBaseOption,null,null,this),this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight);this.listDiff=0,this.uiIndicesInitialization()},e.prototype.wireScrollEvent=function(e){e?(this.listViewInstance.isWindow?window.removeEventListener("scroll",this.onVirtualScroll):Ct.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll),this.listViewInstance.isWindow?window.removeEventListener("scroll",this.updateUl):Ct.remove(this.listViewInstance.element,"scroll",this.updateUlContainer)):ye()&&this.listViewInstance.isServerRendered?this.listViewInstance.isWindow?(this.onVirtualScroll=ce(this.onVirtualUiScroll.bind(this),350),this.updateUl=this.updateUlContainer.bind(this),window.addEventListener("scroll",this.onVirtualScroll),window.addEventListener("scroll",this.updateUl)):(Ct.add(this.listViewInstance.element,"scroll",ce(this.onVirtualUiScroll,350),this),Ct.add(this.listViewInstance.element,"scroll",this.updateUlContainer,this)):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):Ct.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},e.prototype.updateUlContainer=function(e){var t,i=this.listViewInstance.ulElement.querySelector("."+Hp.virtualElementContainer);ae(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),((t=this.listViewInstance.isWindow?Math.round(e.target.documentElement.scrollTop/this.listViewInstance.liElementHeight)-2:Math.round(e.target.scrollTop/this.listViewInstance.liElementHeight)-2)-1)*this.listViewInstance.liElementHeight<0?i.style.top="0px":i.style.top=t*this.listViewInstance.liElementHeight+"px"},e.prototype.ValidateItemCount=function(e){var t,i=parseFloat(ge(this.listViewInstance.height));return(t=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):"string"==typeof this.listViewInstance.height&&-1!==this.listViewInstance.height.indexOf("%")?Math.round(this.listViewInstance.element.getBoundingClientRect().height/this.listItemHeight*1.5):Math.round(i/this.listItemHeight*1.5))>e&&(t=e),t},e.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var e=this.listViewInstance.curViewDS,t=0;t<e.length;t++)this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),ae(e[t][this.listViewInstance.fields.enabled])||e[t][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(t);if(this.isNgTemplate())for(var i=this.listViewInstance.element.querySelectorAll("."+Hp.listItem),s=0;s<i.length;s++)i[s].context=this.listViewInstance.viewContainerRef.get(s).context},e.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var e=this.listViewInstance.curViewDS;ye()&&this.listViewInstance.isServerRendered?this.listViewInstance.ulElement.children[0].style.height=this.listViewInstance.liElementHeight*Object.keys(e).length+"px":(this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px")}},e.prototype.getscrollerHeight=function(e){return this.listViewInstance.isWindow?pageYOffset-e<=0?0:pageYOffset-e:this.listViewInstance.element.scrollTop-e<=0?0:this.listViewInstance.element.scrollTop-e},e.prototype.onVirtualUiScroll=function(e){var t,i;i=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=ae(this.scrollPosition)?0:this.scrollPosition;var s=this.getscrollerHeight(i);if(this.topElementHeight=this.listItemHeight*Math.floor(s/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,t=s<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=t[0],this.bottomElementHeight=t[1],ye()&&this.listViewInstance.isServerRendered){var n=void 0;if(ae(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),(n=this.listViewInstance.isWindow?Math.round(document.documentElement.scrollTop/this.listViewInstance.liElementHeight):Math.round(e.target.scrollTop/this.listViewInstance.liElementHeight))-2-this.elementDifference>=3||n-2-this.elementDifference<=-1){var o={listDiff:n-2,selectedItems:this.listViewInstance.previousSelectedItems};this.listViewInstance.interopAdaptor.invokeMethodAsync("VirtalScrolling",o),this.listViewInstance.ulElement.querySelector(".e-focused")&&this.listViewInstance.ulElement.querySelector(".e-focused").classList.remove("e-focused"),this.elementDifference=n-2}}else{if(this.topElementHeight!==parseFloat(this.topElement.style.height))if(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",s>this.scrollPosition)(n=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff))>this.expectedDomItemCount+5?this.onLongScroll(n,!0):this.onNormalScroll(n,!0);else(n=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight))>this.expectedDomItemCount+5?this.onLongScroll(n,!1):this.onNormalScroll(n,!1);this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled()}this.scrollPosition=s},e.prototype.onLongScroll=function(e,t){for(var i=t?this.uiFirstIndex+e:this.uiFirstIndex-e,s=this.listViewInstance.ulElement.querySelectorAll("li"),n=0;n<s.length;n++)this.updateUI(s[n],i),i++;this.uiLastIndex=t?this.uiLastIndex+e:this.uiLastIndex-e,this.uiFirstIndex=t?this.uiFirstIndex+e:this.uiFirstIndex-e},e.prototype.onNormalScroll=function(e,t){if(t)for(var i=0;i<e;i++){var s=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,s,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<e;i++){s=--this.uiFirstIndex;var n=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,s,n),this.uiLastIndex--}},e.prototype.updateUiContent=function(e,t){var i=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(e.dataset.uid=dp.generateId(),e.getElementsByClassName(Hp.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[t].toString()):(e.dataset.uid=i[t][this.listViewInstance.fields.id]?i[t][this.listViewInstance.fields.id].toString():dp.generateId(),e.getElementsByClassName(Hp.listItemText)[0].innerHTML=i[t][this.listViewInstance.fields.text].toString()),this.listViewInstance.showIcon&&(e.querySelector("."+Hp.listIcon)&&Ti(e.querySelector("."+Hp.listIcon)),this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss])){var s=e.querySelector("."+Hp.textContent),n=this.listViewInstance.createElement("div",{className:Hp.listIcon+" "+this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss]});s.insertBefore(n,e.querySelector("."+Hp.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+Hp.checkboxWrapper).cloneNode(!0));s=e.querySelector("."+Hp.textContent);this.listViewInstance.curViewDS[t].isHeader?e.querySelector("."+Hp.checkboxWrapper)&&(e.classList.remove(Hp.checklist),s.classList.remove(Hp.checkbox),Ti(e.querySelector("."+Hp.checkboxWrapper))):e.querySelector("."+Hp.checkboxWrapper)||(e.classList.add(Hp.checklist),s.classList.add(Hp.checkbox),s.insertBefore(this.checkListWrapper.cloneNode(!0),e.querySelector("."+Hp.listItemText)))}},e.prototype.changeElementAttributes=function(e,t){if(e.classList.remove(Hp.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(t)&&e.classList.add(Hp.disable),e.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(t)&&(e.style.display="none"),this.listViewInstance.showCheckBox){var i=e.querySelector("."+Hp.checkboxWrapper);e.classList.remove(Hp.selected),e.classList.remove(Hp.focused),i&&(i.removeAttribute("aria-checked"),i.firstElementChild.classList.remove(Hp.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(t)&&!this.listViewInstance.curUL.querySelector(Hp.selected)&&(e.classList.add(Hp.selected),i.firstElementChild.classList.add(Hp.checked),i.setAttribute("aria-checked","true"),this.activeIndex===t&&e.classList.add(Hp.focused))}else e.classList.remove(Hp.selected),e.removeAttribute("aria-selected"),ae(this.activeIndex)||this.activeIndex!==t||this.listViewInstance.curUL.querySelector(Hp.selected)||(e.classList.add(Hp.selected),e.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[t].isHeader?e.classList.contains(Hp.listItem)&&(e.classList.remove(Hp.listItem),e.setAttribute("role","group"),e.classList.add(Hp.groupListItem)):e.classList.contains(Hp.groupListItem)&&(e.classList.remove(Hp.groupListItem),e.setAttribute("role","listitem"),e.classList.add(Hp.listItem)))},e.prototype.findDSAndIndexFromId=function(e,t){var i=this,s={};return ae(t=this.listViewInstance.getElementUID(t))||e.some(function(e,n){return!!(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id].toString()===(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id].toString())||t===e)&&(s.index=n,s.data=e,!0)}),s},e.prototype.getSelectedItems=function(){var e=this;if(!ae(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var t=[],i=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var s=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var n=this.uiIndices.activeIndices,o=0;o<n.length;o++)t.push(s[n[o]]);return{text:t,data:t,index:this.uiIndices.activeIndices.map(function(t){return e.listViewInstance.dataSource.indexOf(s[t])})}}return{text:s[this.activeIndex],data:s[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(s[this.activeIndex])}}if(ye()&&this.listViewInstance.isServerRendered){var r=Math.round(this.listViewInstance.element.scrollTop/this.listViewInstance.liElementHeight)-2;r<0&&(r=0),this.activeIndex+=r}var a=this.listViewInstance.curViewDS,l=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){var h=this.uiIndices.activeIndices;for(o=0;o<h.length;o++)i.push(a[h[o]][l]),t.push(a[h[o]]);var c=this.listViewInstance.dataSource instanceof Ip?a:this.listViewInstance.dataSource;return{text:i,data:t,index:this.uiIndices.activeIndices.map(function(e){return c.indexOf(a[e])})}}var p=this.listViewInstance.dataSource instanceof Ip?a:this.listViewInstance.dataSource;return{text:a[this.activeIndex][this.listViewInstance.fields.text],data:a[this.activeIndex],index:p.indexOf(a[this.activeIndex])}}},e.prototype.selectItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(Object.keys(t).length){var i=this.activeIndex===t.index,s=void 0;if(this.activeIndex=t.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(t.index)?(s=!0,this.uiIndices.activeIndices.push(t.index)):(s=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t.index),1)),this.listViewInstance.curUL.querySelector("."+Hp.focused)&&this.listViewInstance.curUL.querySelector("."+Hp.focused).classList.remove(Hp.focused)),this.listViewInstance.getLiFromObjOrElement(e))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e));else{var n=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])n={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var o=this.listViewInstance.curViewDS;n={text:o[this.activeIndex][this.listViewInstance.fields.text],data:o[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?(n.isChecked=s,this.listViewInstance.trigger("select",n)):i||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",n))}}else ae(e)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);if(ye()&&this.listViewInstance.isServerRendered){var r=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.showCheckBox)if(this.listViewInstance.previousSelectedItems.includes(r)){var a=this.listViewInstance.previousSelectedItems.indexOf(r);a>-1&&this.listViewInstance.previousSelectedItems.splice(a,1)}else this.listViewInstance.previousSelectedItems.push(r);else this.listViewInstance.previousSelectedItems[0]=r;this.listViewInstance.removeActiveClass()}},e.prototype.enableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(ye()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.enabledItems.includes(i)||(this.listViewInstance.enabledItems.push(i),this.listViewInstance.removeActiveClass()),this.listViewInstance.disabledItems.includes(i)){var s=this.listViewInstance.disabledItems.indexOf(i);s>-1&&this.listViewInstance.disabledItems.splice(s,1)}}else Object.keys(t).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index),1)},e.prototype.disableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(ye()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.disabledItems.includes(i)||(this.listViewInstance.disabledItems.push(i),this.listViewInstance.removeActiveClass()),this.listViewInstance.enabledItems.includes(i)){var s=this.listViewInstance.enabledItems.indexOf(i);s>-1&&this.listViewInstance.enabledItems.splice(s,1)}}else Object.keys(t).length&&-1===this.uiIndices.disabledItemIndices.indexOf(t.index)&&this.uiIndices.disabledItemIndices.push(t.index)},e.prototype.showItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(ye()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.hiddenItems.includes(i)){var s=this.listViewInstance.hiddenItems.indexOf(i);s>-1&&(this.listViewInstance.previousSelectedItems.splice(s,1),this.listViewInstance.removeActiveClass())}}else Object.keys(t).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index),1)},e.prototype.hideItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(ye()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];this.listViewInstance.hiddenItems.includes(i)||(this.listViewInstance.hiddenItems.push(i),this.listViewInstance.removeActiveClass())}else Object.keys(t).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(t.index)&&this.uiIndices.hiddenItemIndices.push(t.index)},e.prototype.removeItem=function(e){var t,i=this.listViewInstance.curViewDS,s=this.findDSAndIndexFromId(i,e);ye()&&this.listViewInstance.isServerRendered&&void 0!==s.index&&this.listViewInstance.interopAdaptor.invokeMethodAsync("RemoveItemPosition",s.index),Object.keys(s).length&&(t=s.data,i[s.index-1]&&i[s.index-1].isHeader&&1===i[s.index-1].items.length?(this.removeUiItem(s.index-1),this.removeUiItem(s.index-1)):ye()&&this.listViewInstance.isServerRendered||this.removeUiItem(s.index));var n=this.listViewInstance.dataSource instanceof Ip?this.listViewInstance.localData:this.listViewInstance.dataSource,o=n.indexOf(t);-1!==o&&(n.splice(o,1),this.listViewInstance.setViewDataSource(n)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},e.prototype.setCheckboxLI=function(e,t){ye()&&this.listViewInstance.isServerRendered&&(this.uiFirstIndex=Math.round(this.listViewInstance.element.scrollTop/36)-4,this.uiFirstIndex<0&&(this.uiFirstIndex=0));var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex,e.classList.contains(Hp.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},e.prototype.setSelectLI=function(e,t){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex},e.prototype.checkedItem=function(e){if(e){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var t=this.listViewInstance.curViewDS,i=0;i<t.length;i++)t[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},e.prototype.addUiItem=function(e){var t=this.listViewInstance.curViewDS;if(this.changeUiIndices(e,!0),this.activeIndex&&this.activeIndex>=e&&this.activeIndex++,this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(s=this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,e,s))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var s=void 0;s=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,s&&(this.updateUI(i,e,s),this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.removeUiItem=function(e){this.totalHeight-=this.listItemHeight;var t=this.listViewInstance.curViewDS[e],i=this.listViewInstance.getLiFromObjOrElement(t);if(this.listViewInstance.curViewDS.splice(e,1),this.activeIndex&&this.activeIndex>=e&&this.activeIndex--,i)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)Ti(i),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(i.classList.contains(Hp.disable)&&(i.classList.remove(Hp.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e),1)),"none"===i.style.display&&(i.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e),1)),this.listViewInstance.showCheckBox&&i.classList.contains(Hp.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e),1);var s=i.querySelector("."+Hp.checkboxWrapper);s.removeAttribute("aria-checked"),s.firstElementChild.classList.remove(Hp.checked),i.classList.contains(Hp.focused)&&(i.classList.remove(Hp.focused),this.activeIndex=void 0)}else i.classList.contains(Hp.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(i,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(e,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.changeUiIndices=function(e,t){for(var i=Object.keys(this.uiIndices),s=0;s<i.length;s++)this.uiIndices[i[s]]=this.uiIndices[i[s]].map(function(i){return i>=e?t?++i:--i:i})},e.prototype.addItem=function(e,t,i){for(var s=0;s<e.length;s++){var n=e[s];if(i.push(n),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){if(this.listViewInstance.findItemFromDS(i,t)instanceof Array){if(this.listViewInstance.ulElement){var o=this.listViewInstance.curViewDS.indexOf(n);this.createAndInjectNewItem(n,o),(r=this.listViewInstance.curViewDS[o-1])&&r.isHeader&&1===r.items.length&&(--o,this.createAndInjectNewItem(r,o))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var r;o=this.listViewInstance.curViewDS.indexOf(n);this.addUiItem(o),(r=this.listViewInstance.curViewDS[o-1])&&r.isHeader&&1===r.items.length&&this.addUiItem(o-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},e.prototype.createAndInjectNewItem=function(e,t){var i,s=dp.createListItemFromJson(this.listViewInstance.createElement,[e],this.listViewInstance.listBaseOption,null,null,this);i=Object.keys(this.listViewInstance.curViewDS).length-1===t?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+2]),this.listViewInstance.ulElement.insertBefore(s[0],i),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},e.prototype.createUIItem=function(e){var t=this.listViewInstance.template,i=this.listViewInstance.createElement("div"),s='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>";if(this.listViewInstance.showCheckBox){if(this.listViewInstance.renderCheckbox(e),!ae(this.listViewInstance.virtualCheckBox)&&!ae(this.listViewInstance.virtualCheckBox.outerHTML)){var n=document.createElement("div");n.innerHTML=this.listViewInstance.template||s,n.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?n.children[0].classList.add("e-checkbox-left"):n.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?n.children[0].insertBefore(this.listViewInstance.virtualCheckBox,n.childNodes[0].children[0]):n.children[0].appendChild(this.listViewInstance.virtualCheckBox),this.listViewInstance.template=n.innerHTML}i.innerHTML=this.listViewInstance.template,this.listViewInstance.template=t}else i.innerHTML=this.listViewInstance.template||s;var o=i.getElementsByTagName("*"),r=this.listViewInstance.createElement("div");this.listViewInstance.fields.groupBy&&(r.innerHTML=this.listViewInstance.groupTemplate||s);var a=r.getElementsByTagName("*");e.curData.isHeader&&(this.headerData=e.curData),this.templateData=e.curData.isHeader?e.curData.items[0]:e.curData,e.item.innerHTML="",e.item.context={data:e.curData,nodes:{flatTemplateNodes:[],groupTemplateNodes:[]}};for(var l=0;l<o.length;l++)this.compileTemplate(o[l],e.item,!1);for(l=0;l<a.length;l++)this.compileTemplate(a[l],e.item,!0);e.item.context.template=e.curData.isHeader?i.firstElementChild:r.firstElementChild,e.item.context.type=e.curData.isHeader?"flatList":"groupList";var h=e.curData.isHeader?r:i;e.item.insertBefore(h.firstElementChild,null)},e.prototype.compileTemplate=function(e,t,i){this.textProperty(e,t,i),this.classProperty(e,t,i),this.attributeProperty(e,t,i)},e.prototype.onChange=function(e,t){t.context.data=e;var i=t.context.nodes.groupTemplateNodes,s=t.context.nodes.flatTemplateNodes;if(!ae(e.isHeader)&&e.isHeader&&"groupList"===t.context.type){var n=t.firstElementChild;Ti(t.firstElementChild),t.insertBefore(t.context.template,null),t.context.template=n,t.context.type="flatList";for(var o=0;o<i.length;o++)i[o].onChange(e)}else if(e.isHeader||"flatList"!==t.context.type)if(e.isHeader)for(o=0;o<i.length;o++)i[o].onChange(e);else for(o=0;o<s.length;o++)s[o].onChange(e);else{n=t.firstElementChild;Ti(t.firstElementChild),t.insertBefore(t.context.template,null),t.context.template=n,t.context.type="groupList";for(var o=0;o<s.length;o++)s[o].onChange(e)}},e.prototype.updateContextData=function(e,t,i){i?e.context.nodes.groupTemplateNodes.push(t):e.context.nodes.flatTemplateNodes.push(t)},e.prototype.classProperty=function(e,t,i){for(var s,n=new RegExp("\\${([^}]*)}","g"),o=[];null!==s;){var r=n.exec(e.className);o.push(r),null===(s=r)&&o.pop()}if(o&&o.length)for(var a=function(s){var n,r=o[s];n=-1!==r[1].indexOf("?")&&-1!==r[1].indexOf(":")?new Function("data","return "+r[1].replace(/\$/g,"data.")):new Function("data","return data."+r[1]);var a={};a.bindedvalue=n(i?l.headerData:l.templateData),a.onChange=function(t){a.bindedvalue&&Ci([e],a.bindedvalue.split(" ").filter(function(e){return e}));var i=n(t);i&&bi([e],i.split(" ").filter(function(e){return e})),a.bindedvalue=i};for(var h=r[0].split(" "),c=0;c<h.length;c++)e.classList.remove(h[c]);a.bindedvalue&&bi([e],a.bindedvalue.split(" ").filter(function(e){return e})),l.updateContextData(t,a,i)},l=this,h=0;h<o.length;h++)a(h)},e.prototype.attributeProperty=function(e,t,i){for(var s=[],n=0;n<e.attributes.length;n++)s.push(e.attributes[n].nodeName);-1!==s.indexOf("class")&&s.splice(s.indexOf("class"),1);var o=function(n){var o,a,l=s[n],h=new RegExp("\\${([^}]*)}","g").exec(l)||[],c=new RegExp("\\${([^}]*)}","g").exec(e.getAttribute(l))||[];if(h.length||c.length){h[1]&&(o=new Function("data","return data."+h[1])),c[1]&&(a=-1!==c[1].indexOf("?")&&-1!==c[1].indexOf(":")?new Function("data","return "+c[1].replace(/\$/g,"data.")):new Function("data","return data."+c[1]));var p={};p.bindedvalue=i?[void 0===h[1]?void 0:o(r.headerData),void 0===c[1]?void 0:a(r.headerData)]:[void 0===h[1]?void 0:o(r.templateData),void 0===c[1]?void 0:a(r.templateData)],p.attrName=void 0===p.bindedvalue[0]?l:p.bindedvalue[0],p.onChange=function(t){var i=void 0===p.bindedvalue[1]?e.getAttribute(p.attrName):a(t);e.removeAttribute(p.attrName),p.attrName=void 0===p.bindedvalue[0]?p.attrName:o(t),e.setAttribute(p.attrName,i),p.bindedvalue=[void 0===p.bindedvalue[0]?void 0:o(t),void 0===p.bindedvalue[1]?void 0:a(t)]};var d=void 0===p.bindedvalue[1]?e.getAttribute(l):p.bindedvalue[1];e.removeAttribute(l),e.setAttribute(p.attrName,d),r.updateContextData(t,p,i)}},r=this;for(n=0;n<s.length;n++)o(n)},e.prototype.textProperty=function(e,t,i){for(var s,n=new RegExp("\\${([^}]*)}","g"),o=[];null!==s;){var r=n.exec(e.innerText);o.push(r),null===(s=r)&&o.pop()}var a=Array.prototype.some.call(e.children,function(e){return!!new RegExp("\\${([^}]*)}","g").exec(e.innerText)});if(o&&o.length&&!a)for(var l=function(s){var n,r=o[s],a={};n=-1!==r[1].indexOf("?")&&-1!==r[1].indexOf(":")?new Function("data","return "+r[1].replace(/\$/g,"data.")):new Function("data","return data."+r[1]),a.bindedvalue=n(i?h.headerData:h.templateData),a.onChange=function(t){e.innerText=e.innerText.replace(a.bindedvalue,n(t)),a.bindedvalue=n(t)},e.innerText=e.innerText.replace(r[0],a.bindedvalue),h.updateContextData(t,a,i)},h=this,c=0;c<o.length;c++)l(c)},e.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&Ti(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},e.prototype.updateUI=function(e,t,i){var s=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var n=this.listViewInstance.curViewDS[t];e.dataset.uid=n[this.listViewInstance.fields.id]?n[this.listViewInstance.fields.id].toString():dp.generateId(),s(n,e,this)}else this.updateUiContent(e,t);this.changeElementAttributes(e,t),i&&this.listViewInstance.ulElement.insertBefore(e,i)},e.prototype.onNgChange=function(e,t,i){for(var s=Xt(i.listViewInstance.template)(e);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(s[0])},e.prototype.getModuleName=function(){return"virtualization"},e.prototype.destroy=function(){this.wireScrollEvent(!0)},e}(),zp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),_p=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},qp=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.getHelper=function(e){var t,i=s.getSortableElement(e.sender.target);return!!s.isValidTarget(i,s)&&(s.helper?t=s.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),bi([t],["e-sortableclone"]),document.body.appendChild(t),t)},s.onDrag=function(e){s.trigger("drag",{event:e.event,element:s.element,target:e.target});var t,i=s.getSortableInstance(e.target),n=s.getSortableElement(e.target,i);if((s.isValidTarget(n,i)||e.target.className.indexOf("e-list-group-item")>-1)&&(s.curTarget!==n||!ae(i.placeHolder))&&(!i.placeHolderElement||i.placeHolderElement!==e.target)){if(e.target.className.indexOf("e-list-group-item")>-1&&(n=e.target),s.curTarget=n,s.target===n)return;var o=s.getIndex(i.placeHolderElement,i),r=s.getPlaceHolder(n,i),a=void 0;if(r){o=ae(o)?s.getIndex(s.target):o,a=s.getIndex(n,i,e.event);var l=s.isPlaceHolderPresent(i);if(l&&o===a)return;l&&Li(i.placeHolderElement),i.placeHolderElement=r,e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[a]):i.element!==s.element&&a===i.element.childElementCount?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[a]),s.refreshDisabled(o,a,i)}else{o=ae(o)?s.getIndex(s.target):s.getIndex(n,i)<o||!o?o:o-1,a=s.getIndex(n,i);var h=i.element!==s.element?a:o<a?a+1:a;s.updateItemClass(i),i.element.insertBefore(s.target,i.element.children[h]),s.refreshDisabled(o,a,i),s.curTarget=s.target,s.trigger("drop",{droppedElement:s.target,element:i.element,previousIndex:o,currentIndex:a,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:s.scope})}}(i=s.getSortableInstance(s.curTarget),ae(n)&&e.target!==i.placeHolderElement)?s.isPlaceHolderPresent(i)&&s.removePlaceHolder(i):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function(e){(t=s.getSortableInstance(e)).element&&t!==i&&s.removePlaceHolder(t)})},s.onDragStart=function(e){s.target=s.getSortableElement(e.target);var t=!1;s.target.classList.add("e-grabbed"),s.curTarget=s.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:s.element,target:s.target};s.trigger("beforeDragStart",i,function(i){i.cancel&&(t=i.cancel,s.onDragStop(e))}),t||(ye?s.trigger("dragStart",{event:e.event,element:s.element,target:s.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):s.trigger("dragStart",{event:e.event,element:s.element,target:s.target}))},s.onDragStop=function(e){var t,i,n,o=s.getSortableInstance(s.curTarget);t=s.getIndex(s.target);var r=s.isPlaceHolderPresent(o);if(r){var a=s.getIndex(o.placeHolderElement,o),l={previousIndex:t,currentIndex:a,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1,handled:!1};s.trigger("beforeDrop",l,function(i){if(!i.cancel){if(n=i.handled,s.updateItemClass(o),i.handled){var r=s.target.cloneNode(!0);s.target.classList.remove("e-grabbed"),s.target=r}o.element.insertBefore(s.target,o.placeHolderElement);var a=s.getIndex(s.target,o);t=s===o&&t-a>1?t-1:t,s.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:a,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope,handled:n})}Li(o.placeHolderElement)})}if(o=s.getSortableInstance(e.target),i=o.element.childElementCount,t=s.getIndex(s.target),o.element===e.target||!r&&s.curTarget===s.target){var h={previousIndex:t,currentIndex:s.curTarget===s.target?t:i,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1};s.trigger("beforeDrop",h,function(n){o.element!==e.target||n.cancel||(s.updateItemClass(o),o.element.appendChild(s.target),s.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope}))})}s.target.classList.remove("e-grabbed"),s.target=null,s.curTarget=null,Li(e.helper),qi(s.element,Ws).intDestroy(e.event)},s.bind(),s}var i;return zp(t,e),i=t,t.prototype.bind=function(){this.element.id||(this.element.id=he("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new Ws(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})},t.prototype.getPlaceHolder=function(e,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(e,t){return e&&ue(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){Li(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=Mi(e,".e-"+this.getModuleName())){var t=qi(e,i);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var s=void 0,n=e<t,o=void 0,r=n?e:t,a=n?t:e;r<=a;)(s=this.element.children[r]).classList.contains("e-disabled")?(o=this.getIndex(s),this.element.insertBefore(s,this.element.children[n?o+2:o-1]),r=n?o+2:o+1):r++},t.prototype.getIndex=function(e,t,i){var s,n;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach(function(t,o){if(t.classList.contains("e-sortable-placeholder")&&(n=!0),t!==e);else if(s=o,!ae(i)){n&&(s-=1);var r=e.getBoundingClientRect(),a=r.bottom-(r.bottom-r.top)/2;s=i.clientY<=a?s:s+1}}),s},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),Mi(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!Mi(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){Wp(this.element,e,t,i)},t.prototype.destroy=function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),qi(this.element,Ws).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"itemClass":[].slice.call(this.element.children).forEach(function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)})}}},_p([os(!1)],t.prototype,"enableAnimation",void 0),_p([os(null)],t.prototype,"itemClass",void 0),_p([os(null)],t.prototype,"scope",void 0),_p([os()],t.prototype,"helper",void 0),_p([os()],t.prototype,"placeHolder",void 0),_p([cs()],t.prototype,"drag",void 0),_p([cs()],t.prototype,"beforeDragStart",void 0),_p([cs()],t.prototype,"dragStart",void 0),_p([cs()],t.prototype,"beforeDrop",void 0),_p([cs()],t.prototype,"drop",void 0),t=i=_p([ps],t)}(_i);function Wp(e,t,i,s){var n=[];if(t||(t=e),i&&i.length?i.forEach(function(t){n.push(e.children[t])}):n=[].slice.call(e.children),ae(s))n.forEach(function(e){t.appendChild(e)});else{var o=t.children[s];n.forEach(function(e){t.insertBefore(e,o)})}}var Up=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Gp=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Yp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Up(t,e),Gp([os()],t.prototype,"text",void 0),Gp([os()],t.prototype,"value",void 0),Gp([os()],t.prototype,"iconCss",void 0),Gp([os()],t.prototype,"groupBy",void 0),Gp([os()],t.prototype,"htmlAttributes",void 0),t}(Ls),Xp="e-dropdownbase",Kp="e-rtl",Zp="e-content",Qp="e-active",Jp="e-hover",$p="e-nodata",ed="e-fixed-head",td="e-item-focus",id="e-list-item",sd="e-list-group-item",nd="e-disabled",od="e-dd-group",rd=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.preventChange=!1,s.isAngular=!1,s.isPreventChange=!1,s}return Up(t,e),t.prototype.getPropObject=function(e,t,i){var s=new Object,n=new Object,o=function(e){return e};s[o(e)]=t[o(e)],n[o(e)]=i[o(e)];var r=new Object;return r.newProperty=s,r.oldProperty=n,r},t.prototype.getValueByText=function(e,t,i){var s=null;return ae(this.listData)||(s=t?this.checkValueCase(e,!0,i):this.checkValueCase(e,!1,i)),s},t.prototype.checkValueCase=function(e,t,i,s){var n=this,o=null;s&&(o=e);var r=this.listData,a=this.fields,l=this.typeOfData(r).typeof;if("string"===l||"number"===l||"boolean"===l)for(var h=0,c=r;h<c.length;h++){var p=c[h];ae(p)||(i?o=this.checkingAccent(String(p),e,t):t?this.checkIgnoreCase(String(p),e)&&(o=this.getItemValue(String(p),e,t)):this.checkNonIgnoreCase(String(p),e)&&(o=this.getItemValue(String(p),e,t,s)))}else t?r.filter(function(t){!ae(ee(a.value,t))&&n.checkIgnoreCase(ee(a.text,t).toString(),e)&&(o=ee(a.value,t))}):s?r.filter(function(e){var t=ee(a.value,e);ae(t)||ae(o)||t.toString()!==o.toString()||(o=ee(a.text,e))}):r.filter(function(t){n.checkNonIgnoreCase(ee(a.text,t),e)&&(o=ee(a.value,t))});return o},t.prototype.checkingAccent=function(e,t,i){var s=gp.ignoreDiacritics(String(e)),n=gp.ignoreDiacritics(t.toString()),o=null;return i?this.checkIgnoreCase(s,n)&&(o=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(o=this.getItemValue(String(e),t,i)),o},t.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},t.prototype.getItemValue=function(e,t,i,s){var n=this.listData,o=this.typeOfData(n).typeof;return s?e.toString():i?"string"===o?String(e):this.getFormattedValue(String(e)):"string"===o?t:this.getFormattedValue(t)},t.prototype.templateCompiler=function(e){var t=!1;if(e){try{t=!!Ii(e,document).length}catch(e){t=!1}}return t},t.prototype.l10nUpdate=function(e){var t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);var i=e?this.actionFailureTemplate:this.noRecordsTemplate,s=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";var n=Xt(this.templateCompiler(i)?Ii(i,document).innerHTML.trim():i)({},this,e?"actionFailureTemplate":"noRecordsTemplate",s,this.isStringTemplate,null,t);if(n&&n.length>0)for(var o=0;o<n.length;o++)t.appendChild(n[o]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!e,e,!1,!1,!1,!1)}else{var r=new Js(this.getLocaleName(),{},this.locale);""!==r.getConstant("actionFailureTemplate")?this.l10n=r:this.l10n=new Js("listbox"===this.getModuleName()?"listbox":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var a=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName()){var l=this.createElement("li");l.textContent=a,t.appendChild(l),l.classList.add("e-list-nrt")}else t.innerHTML=a}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var t=this.typeOfData(this.listData);if(ye()&&ae(e)||"null"===e)return null;if("number"==typeof ee(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof ee(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e}return e},t.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?bi(this.enableRtlElements,Kp):Ci(this.enableRtlElements,Kp)},t.prototype.initialize=function(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var e=dp.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else if("SELECT"===this.element.tagName){(this.dataSource instanceof Array?this.dataSource.length>0:!ae(this.dataSource))||this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query)},t.prototype.DropDownBaseupdateBlazorTemplates=function(e,t,i,s,n,o,r,a){this.isStringTemplate||(this.itemTemplate&&e&&Kt(this.itemTemplateId,"ItemTemplate",this,a),this.groupTemplate&&t&&Kt(this.groupTemplateId,"GroupTemplate",this,a),this.noRecordsTemplate&&i&&Kt(this.noRecordsTemplateId,"NoRecordsTemplate",this,a),this.actionFailureTemplate&&s&&Kt(this.actionFailureTemplateId,"ActionFailureTemplate",this,a),n&&Kt(this.valueTemplateId,"ValueTemplate",this,a),o&&Kt(this.headerTemplateId,"HeaderTemplate",this),r&&Kt(this.footerTemplateId,"FooterTemplate",this))},t.prototype.DropDownBaseresetBlazorTemplates=function(e,t,i,s,n,o,r){this.isStringTemplate||(this.itemTemplate&&e&&Zt(this.itemTemplateId),this.groupTemplate&&t&&Zt(this.groupTemplateId),this.noRecordsTemplate&&i&&Zt(this.noRecordsTemplateId),this.actionFailureTemplate&&s&&Zt(this.actionFailureTemplateId),n&&Zt(this.valueTemplateId),o&&Zt(this.headerTemplateId),r&&Zt(this.footerTemplateId))},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.updateDataAttribute=function(e){for(var t=["class","style","id","type"],i={},s=0;s<this.element.attributes.length;s++)-1!==t.indexOf(this.element.attributes[s].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[s].name||(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));re(i,e,i),this.setProperties({htmlAttributes:i},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),n=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,n,t),s.length){for(var o=0;o<s.length;o++){var r=s[o],a={};a[t.text]=r.label,a.isHeader=!0;var l=r.querySelectorAll("option");i.push(a),this.getJSONfromOption(i,l,t)}e.querySelectorAll("select>option")}this.updateFields(t.text,t.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(i,t)},t.prototype.updateFields=function(e,t,i,s,n){var o={fields:{text:e,value:t,groupBy:ae(i)?this.fields&&this.fields.groupBy:i,htmlAttributes:ae(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:ae(n)?this.fields&&this.fields.iconCss:n}};this.setProperties(o,!0)},t.prototype.getJSONfromOption=function(e,t,i){for(var s=0,n=t;s<n.length;s++){var o=n[s],r={};r[i.text]=o.innerText,r[i.value]=ae(o.getAttribute(i.value))?o.innerText:o.getAttribute(i.value),e.push(r)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,t,i){var s,n=this;t=t||this.fields,this.isActive=!0;var o={cancel:!1,data:e,query:i};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",o,function(i){if(!i.cancel)if(n.showSpinner(),e instanceof Ip){if(n.isRequested=!0,n.isDataFetched)return void n.emptyDataRequest(t);i.data.executeQuery(n.getQuery(i.query)).then(function(e){n.isPreventChange=!(!n.isAngular||!n.preventChange)||n.isPreventChange,n.trigger("actionComplete",e,function(e){if(!e.cancel){var i=e.result;0===i.length&&(n.isDataFetched=!0),s=n.renderItems(i,t),n.onActionComplete(s,i,e),n.groupTemplate&&n.renderGroupTemplate(s),n.isRequested=!1,n.bindChildItems(i,s,t,e)}})}).catch(function(e){n.isRequested=!1,n.onActionFailure(e),n.hideSpinner()})}else{var o=new Ip(i.data),r={cancel:!1,result:n.getQuery(i.query).executeLocal(o)};n.isPreventChange=!(!n.isAngular||!n.preventChange)||n.isPreventChange,n.trigger("actionComplete",r,function(e){e.cancel||(s=n.renderItems(e.result,t),n.onActionComplete(s,e.result),n.groupTemplate&&n.renderGroupTemplate(s),n.bindChildItems(e.result,s,t))})}})},t.prototype.bindChildItems=function(e,t,i,s){var n=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){Ei(n.remainingItems(n.sortedData,i),t),n.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),n.liCollections=n.list.querySelectorAll("."+id),n.updateListValues(),n.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,t,i,s){var n=null;if(e)for(var o=[].slice.call(e.querySelectorAll(t)),r=0;r<o.length;r++)if(o[r].getAttribute(i)===s+""){n=o[r];break}return n},t.prototype.raiseDataBound=function(e,t){this.hideSpinner();var i={items:e,e:t};this.trigger("dataBound",i)},t.prototype.remainingItems=function(e,t){var i=new Ip(e).executeLocal((new up).skip(100));if(this.itemTemplate){var s=this.templateListItem(i,t);return[].slice.call(s.childNodes)}var n=this.typeOfData(i).typeof;return"string"===n||"number"===n||"boolean"===n?dp.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t),this):dp.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0,this)},t.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),bi([this.list],$p)},t.prototype.onActionComplete=function(e,t,i){this.listData=t,ye()&&this.isServerRendered&&"listbox"===this.getModuleName()?(Li(this.list.querySelector(".e-list-parent")),Li(this.list.querySelector(".e-hidden-select"))):(this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.list.innerHTML=""),this.fixedHeaderElement=ae(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+id),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},t.prototype.postRender=function(e,t,i){var s=e.querySelector("."+id),n=e.querySelector("."+Qp);s&&!n&&s.classList.add(td),t.length<=0?(this.l10nUpdate(),bi([e],$p)):e.classList.remove($p)},t.prototype.getQuery=function(e){return e||(this.query?this.query:new up)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+sd)){var t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll("."+sd);if(this.templateCompiler(this.groupTemplate)){var n=Ii(this.groupTemplate,document).innerHTML.trim();dp.renderGroupTemplate(n,t,this.fields.properties,s,i,this)}else dp.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,s,i,this);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1,!1,!1,!1,!1)}},t.prototype.createListItems=function(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=dp.groupDataSource(e,t.properties,this.sortOrder)),bi([this.list],od)):e=this.getSortedDataSource(e);var i=this.listOption(e,t),s=e.length>100?new Ip(e).executeLocal((new up).take(100)):e;return this.sortedData=e,dp.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,i,!0,this)},t.prototype.listOption=function(e,t){var i=!ae(t.iconCss),s=ae(t.properties)?t:t.properties;return re({},null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t,!0)},t.prototype.setFloatingHeader=function(e){ae(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:ed}),this.list.querySelector("li").classList.contains(sd)||(this.fixedHeaderElement.style.display="none"),wi([this.fixedHeaderElement],this.list),this.setFixedHeader()),ae(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)},t.prototype.scrollStop=function(e){for(var t=e.target,i=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),s=Math.round(t.scrollTop/i),n=this.list.querySelectorAll("li"),o=s;o>-1;o--){if(!ae(n[o])&&n[o].classList.contains(sd)){var r=n[o];this.fixedHeaderElement.innerHTML=r.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.renderItems=function(e,t){var i;if(this.itemTemplate&&e){var s=e;s&&t.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=dp.groupDataSource(s,t.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var n=s.length>100?new Ip(s).executeLocal((new up).take(100)):s;i=this.templateListItem("autocomplete"===this.getModuleName()?n:s,t);var o="listbox"===this.getModuleName();this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,o)}else i=this.createListItems(e,t);return i},t.prototype.templateListItem=function(e,t){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var s=Ii(this.itemTemplate,document).innerHTML.trim();return dp.renderContentTemplate(this.createElement,s,e,t.properties,i,this)}return dp.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i,this)},t.prototype.typeOfData=function(e){for(var t={typeof:null,item:null},i=0;!ae(e)&&i<e.length;i++){if(!ae(e[i]))if(!ae("string"==typeof e[i]||"number"==typeof e[i]||"boolean"==typeof e[i]?e[i]:ee(this.fields.value?this.fields.value:"value",e[i])))return{typeof:typeof e[i],item:e[i]}}return t},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var t=this.liCollections[0].offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px",Ri(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+sd);this.fixedHeaderElement.innerHTML=i.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";"string"!==this.typeOfData(e).typeof&&"number"!==this.typeOfData(e).typeof&&"boolean"!==this.typeOfData(e).typeof||(t=""),e=dp.getDataSource(e,dp.addSorting(this.sortOrder,t))}return e},t.prototype.getIndexByValue=function(e){for(var t,i=this.getItems(),s=0;s<i.length;s++)if(!ae(e)&&i[s].getAttribute("data-value")===e.toString()){t=s;break}return t},t.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):this.fields.value||this.fields.text||this.updateFields("text","text")},t.prototype.resetList=function(e,t,i){if(this.list){if("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)!(e instanceof Array?e.length>0:!ae(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData);this.setListData(e,t,i)}},t.prototype.updateSelectElementData=function(e){e&&ae(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,t){this.isDataFetched=!1;for(var i={},s=0;e.length>s;s++)t[e[s]]&&"fields"===e[s]?(this.setFields(),i[e[s]]=t[e[s]]):t[e[s]]&&(i[e[s]]=t[e[s]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))},t.prototype.onPropertyChanged=function(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var n=this.ulElement.querySelector("."+sd);this.fixedHeaderElement.innerHTML=n.innerHTML}break;case"locale":this.list&&!ae(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}},t.prototype.render=function(e){this.list=this.createElement("div",{className:Zp,attrs:{tabindex:"0"}}),this.list.classList.add(Xp),this.setFields();var t={duration:300,selector:"."+id};this.rippleFun=ys(this.list,t);var i=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&ae(i)||this.isGroupChecking||Ct.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),Ci([this.element],Xp),this.element.style.display="none";var s=this.createElement("div");this.element.parentElement.insertBefore(s,this.element),s.appendChild(this.element),s.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+id)},t.prototype.addItem=function(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&ae(t)){var i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),t=this.fields.groupBy?(i=dp.groupDataSource(i,this.fields.properties,this.sortOrder)).indexOf(e):i.indexOf(e)}this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var s,n=this.getItems().length,o=this.list.querySelector("."+Qp);e=e instanceof Array?e:[e],s=ae(t)||t<0||t>n-1?n:t;var r=this.fields;e&&r.groupBy&&(e=dp.groupDataSource(e,r.properties));for(var a=[],l=0;l<e.length;l++){var h=e[l],c=h.isHeader,p=this.createElement("li",{className:c?sd:id,id:"option-add-"+l}),d=h instanceof Object?ee(r.text,h):h;if(c&&(p.innerText=d),this.itemTemplate&&!c){var u=Xt(this.itemTemplate)(h,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,p);u&&Ei(u,p),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)}else c||p.appendChild(document.createTextNode(d));p.setAttribute("data-value",h instanceof Object?ee(r.value,h):h),p.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:p}),a.push(p),this.listData.push(h),"None"===this.sortOrder&&ae(t)&&0===s&&(s=null),this.updateActionCompleteData(p,h,s),this.trigger("beforeItemRender",{element:p,item:h})}if(0===n&&ae(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove($p),this.list.appendChild(this.ulElement),this.liCollections=a,Ei(a,this.ulElement),this.updateAddItemList(this.list,n);else{"listbox"===this.getModuleName()&&0===n&&(this.ulElement.innerHTML="");var m=[];for(l=0;l<e.length;l++){for(var f=this.ulElement.querySelectorAll(".e-list-group-item"),g=0;g<f.length;g++)m[g]=f[g].innerText;if(m.indexOf(a[l].innerText)>-1&&r.groupBy){for(g=0;g<f.length;g++)if(m[g]===a[l].innerText){"None"===this.sortOrder?this.ulElement.insertBefore(a[l+1],f[g+1]):this.ulElement.insertBefore(a[l+1],this.ulElement.childNodes[t]),l+=1;break}}else this.liCollections[s]?this.liCollections[s].parentNode.insertBefore(a[l],this.liCollections[s]):this.ulElement.appendChild(a[l]);var v=[].slice.call(this.liCollections);v.splice(s,0,a[l]),this.liCollections=v,s+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(o||0===t)&&this.updateSelection()},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],n=0;n<s.length;n++)if(e.getAttribute(s[n])){var o=e.getAttribute(s[n]);t.setAttribute(s[n],o),e.removeAttribute(s[n])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,t,i){},t.prototype.updateAddItemList=function(e,t){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!ae(this.listData)){var t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t)for(var i=0,s=this.listData;i<s.length;i++){if(!ae(r=s[i])&&r===e)return r}else for(var n=0,o=this.listData;n<o.length;n++){var r;if(!ae(r=o[n])&&ee(this.fields.value?this.fields.value:"value",r)===e)return r}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(Ct.remove(this.list,"scroll",this.setFloatingHeader),ae(this.rippleFun)||this.rippleFun(),Ti(this.list)),e.prototype.destroy.call(this)},Gp([rs({text:null,value:null,iconCss:null,groupBy:null},Yp)],t.prototype,"fields",void 0),Gp([os(!1)],t.prototype,"enablePersistence",void 0),Gp([os(null)],t.prototype,"itemTemplate",void 0),Gp([os(null)],t.prototype,"groupTemplate",void 0),Gp([os("No records found")],t.prototype,"noRecordsTemplate",void 0),Gp([os("Request failed")],t.prototype,"actionFailureTemplate",void 0),Gp([os("None")],t.prototype,"sortOrder",void 0),Gp([os(!0)],t.prototype,"enabled",void 0),Gp([os([])],t.prototype,"dataSource",void 0),Gp([os(null)],t.prototype,"query",void 0),Gp([os("StartsWith")],t.prototype,"filterType",void 0),Gp([os(!0)],t.prototype,"ignoreCase",void 0),Gp([os(1e3)],t.prototype,"zIndex",void 0),Gp([os(!1)],t.prototype,"ignoreAccent",void 0),Gp([os()],t.prototype,"locale",void 0),Gp([cs()],t.prototype,"actionBegin",void 0),Gp([cs()],t.prototype,"actionComplete",void 0),Gp([cs()],t.prototype,"actionFailure",void 0),Gp([cs()],t.prototype,"select",void 0),Gp([cs()],t.prototype,"dataBound",void 0),Gp([cs()],t.prototype,"created",void 0),Gp([cs()],t.prototype,"destroyed",void 0),t=Gp([ps],t)}(Ns),ad=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),ld=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},hd={root:"e-dropdownlist",hover:Jp,selected:Qp,rtl:Kp,li:id,disable:nd,base:Xp,focus:td,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},cd={container:null,buttons:[]},pd=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.previousValue=null,s.isListSearched=!1,s.preventChange=!1,s.isAngular=!1,s}return ad(t,e),t.prototype.preRender=function(){var t=ye()&&this.isServerRendered;this.isServerBlazor=!!t,this.isServerBlazor?this.initializeData():(this.element.style.opacity="0",this.initializeData(),e.prototype.preRender.call(this)),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.renderList=function(t){this.isServerBlazor?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):(e.prototype.render.call(this,t),this.unWireListEvents(),this.wireListEvents())},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?Bi(e,["e-label-top"],["e-label-bottom"]):Bi(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!ae(this.ulElement)){var e=this.ulElement.querySelector("."+hd.li);e&&e.classList.add(hd.focus)}},t.prototype.clearAll=function(e,t){!ae(t)&&(ae(t)||!ae(t.dataSource)&&(t.dataSource instanceof Ip||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));var i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)},t.prototype.resetSelection=function(e){this.list&&(ae(e)||!ae(e.dataSource)&&(e.dataSource instanceof Ip||0!==e.dataSource.length)?(!this.allowFiltering||"autocomplete"===this.getModuleName()||ae(this.actionCompleteData.ulElement)||ae(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.isServerBlazor||(this.hiddenElement.innerHTML=""),this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Ti(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i){var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&bi([this.inputWrapper.container],s.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.enabled=!1,this.setEnable();else if("readonly"!==i||ae(this.htmlAttributes[i]))if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[i]);else{var n=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||n.push("tabindex"),0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):n.indexOf(i)>-1?"placeholder"===i?Na.setPlaceholder(this.htmlAttributes[i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){Na.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){Na.setEnabled(this.enabled,this.inputElement),this.enabled?(Ci([this.inputWrapper.container],hd.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),bi([this.inputWrapper.container],hd.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var t,i=0,s=this.getItems();i<s.length;i++){var n=s[i];if(this.getFormattedValue(n.getAttribute("data-value"))===e){t=n;break}}return t},t.prototype.initValue=function(){this.renderList(),this.dataSource instanceof Ip?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(ae(this.value))if(this.text&&ae(this.value)){var e=this.getElementByText(this.text);if(ae(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),Na.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlur=function(e){if(this.enabled){var t=e.relatedTarget,i=e.target,s=this.isPreventBlur;this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||ae(i)&&(this.isFilterLayout()||!ae(t))?this.isDocumentClick||!ae(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(hd.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(hd.inputFocus))||ae(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()},t.prototype.onFocusOut=function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&bi([this.inputWrapper.clearButton],hd.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var t={isInteracted:!!e,event:e};this.trigger("focus",t)}this.updateIconState()},t.prototype.resetValueHandler=function(e){var t=Mi(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},t.prototype.wireEvent=function(){Ct.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),Ct.add(this.inputWrapper.container,"focus",this.focusIn,this),Ct.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){Ct.add(this.targetElement(),"blur",this.onBlur,this);var e=Mi(this.inputElement,"form");e&&Ct.add(e,"reset",this.resetValueHandler,this),bt.isDevice?this.keyboardModule=new Qs(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new Qs(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.bindClearEvent=function(){this.showClearButton&&Ct.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){this.targetElement()&&Ct.remove(this.targetElement(),"blur",this.onBlur);var e=this.inputElement&&Mi(this.inputElement,"form");e&&Ct.remove(e,"reset",this.resetValueHandler),bt.isDevice||this.keyboardModule.destroy(),this.showClearButton&&Ct.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?bi([this.inputWrapper.clearButton],hd.clearIconHide):Ci([this.inputWrapper.clearButton],hd.clearIconHide))},t.prototype.wireListEvents=function(){Ct.add(this.list,"click",this.onMouseClick,this),Ct.add(this.list,"mouseover",this.onMouseOver,this),Ct.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&(this.isServerBlazor?(this.isServerIncrementalSearch=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1)):this.renderList()),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){this.isRequested||ae(this.list)||ae(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var t=e.target,i=(t.classList,Mi(t,"."+id));if(this.isValidLI(i))if(this.setSelection(i,e),bt.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100)}},t.prototype.onMouseOver=function(e){var t=Mi(e.target,"."+id);this.setHover(t)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(Jp)&&(this.removeHover(),bi([e],Jp))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.isServerBlazor&&this.popupObj&&this.popupObj.element?this.popupObj.element.querySelectorAll("."+Jp):this.list.querySelectorAll("."+Jp);e&&e.length&&Ci(e,Jp)}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var t=function(e,t,i,s,n,o){var r;if(rp+=String.fromCharCode(e),setTimeout(function(){rp=""},1e3),rp=s?rp.toLowerCase():rp,cp===n&&ap===rp){for(var a=0;a<lp.length;a++)if(lp[a].classList.contains(hp)){r=a;break}return lp[r+=1]}var l=t,h=rp.length,c=void 0;a=i=i?i+1:0,lp=[];do{a===l.length&&(a=-1),c=l[r=-1===a?0:a],(o?s?c.textContent.trim().toLowerCase():c.textContent.trim():s?c.innerText.toLowerCase():c.innerText).substr(0,h)===rp&&lp.push(l[r]),a++}while(a!==i);return ap=rp,cp=n,lp[0]}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id,this.isServerBlazor);ae(t)||(this.setSelection(t,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){ae(this.spinnerElement)||(Aa(this.spinnerElement),Ci([this.spinnerElement],hd.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){ae(this.spinnerElement)&&(this.spinnerElement=bt.isDevice&&!ae(this.filterInputObj)&&this.filterInputObj.buttons[1]||!ae(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],bi([this.spinnerElement],hd.disableIcon),ga({target:this.spinnerElement,width:bt.isDevice?"16px":"14px"},this.createElement),Ia(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){var t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var s="down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action,n="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){var o="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||o||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),((!this.isServerBlazor||"open"!==e.action&&"space"!==e.action)&&ae(this.list)||!ae(this.liCollections)&&n&&0===this.liCollections.length||this.isRequested)&&(!this.isServerBlazor||!s))return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!n&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e){if(this.isServerBlazor&&ae(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var t=this.list.querySelector("."+hd.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else{var i,s="down"===e.action?this.activeIndex+1:this.activeIndex-1,n=0;"autocomplete"===this.getModuleName()&&(n="down"===e.action&&ae(this.activeIndex)?0:this.liCollections.length-1,s=s<0?this.liCollections.length-1:s===this.liCollections.length?0:s),i=ae(this.activeIndex)?this.liCollections[n]:this.liCollections[s],ae(i)||this.setSelection(i,e)}e.preventDefault()}},t.prototype.updateHomeEndAction=function(e){if("dropdownlist"===this.getModuleName())if(this.isServerBlazor&&ae(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),ae(this.list)||!ae(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+hd.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!ae(e)},t.prototype.getPageCount=function(){var e=this.list.classList.contains($p)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,t){var i=e>=0?this.liCollections[e+1]:this.liCollections[0];this.setSelection(i,t)},t.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(s,t)},t.prototype.unWireEvent=function(){Ct.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),Ct.remove(this.inputWrapper.container,"keypress",this.onSearch),Ct.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){Ct.remove(this.list,"click",this.onMouseClick),Ct.remove(this.list,"mouseover",this.onMouseOver),Ct.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var t=e.target;if(!ae(this.popupObj)&&Mi(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&bt.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(bt.isIE||"edge"===bt.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(hd.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;this.isInteracted=!1,this.hidePopup(e),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(hd.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(hd.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(hd.disable)&&this.inputWrapper.clearButton!==e.target){var t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());var i=this,s=ye()?1e3:this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0},s)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,t,i,s){var n=this;this.removeSelection(),e.classList.add(Qp),this.removeHover();var o=this.getFormattedValue(e.getAttribute("data-value")),r=this.getDataByValue(o);if(this.initial||i||ae(t))this.selectEventCallback(e,t,i,r,o),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerItemData",this.itemData),s&&this.setSelectOptions(e,t);else{var a=this.detachChanges(r);this.isSelected=!0;var l={e:t,item:e,itemData:a,isInteracted:!!t,cancel:!1};this.trigger("select",l,function(a){a.cancel?e.classList.remove(Qp):(n.selectEventCallback(e,t,i,r,o),n.isServerBlazor&&n.interopAdaptor.invokeMethodAsync("OnServerItemData",n.itemData),s&&n.setSelectOptions(e,t))})}},t.prototype.selectEventCallback=function(e,t,i,s,n){this.previousItemData=ae(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;var o=this.list.querySelector("."+td);o&&Ci([o],td),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(n)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(Qp)&&(this.removeSelection(),e.classList.add(Qp),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var t=this.getItemData();return null===t.value?ye()&&null!==t.text||""!==t.text?Na.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton):Na.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):Na.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerValueTemplate",t),this.valueTemplate&&null!==this.itemData&&!this.isServerBlazor?(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!0),this.setValueTemplate()):this.inputElement.previousSibling===this.valueTempElement&&(Ti(this.valueTempElement),this.inputElement.style.display="block"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&(!e.classList.contains(Qp)||this.isPopupOpen&&this.isSelected&&e.classList.contains(Qp))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)},t.prototype.setSelectOptions=function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=ae(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||(this.isPopupOpen&&(Di(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&Di(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!ae(e)||this.isPopupOpen&&!ae(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||ae(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==bt.info.name&&(Di(this.inputElement,{"aria-label":this.inputElement.value}),Di(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))},t.prototype.dropdownCompiler=function(e){var t=!1;if(e){try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}}return t},t.prototype.setValueTemplate=function(){this.isReact&&this.clearTemplate(["valueTemplate"]),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:hd.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";var e=ye()?JSON.parse(JSON.stringify(this.itemData)):this.itemData,t=Xt(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(e,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(t&&t.length>0)for(var i=0;i<t.length;i++)this.valueTempElement.appendChild(t[i]);this.renderReactTemplates(),this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!0,!0)},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+Qp);e.length&&(Ci(e,Qp),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var e,t,i,s=this.fields;return ae(e=this.itemData)||(t=ee(s.value,e),i=ee(s.text,e)),{value:ae(e)||le(t)?e:t,text:ae(e)||le(t)?e:i}},t.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:i,text:t.text,value:t.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=ae(this.text)?"":this.text,!this.initial){var t=this.detachChanges(this.itemData),i=void 0;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var s={e:e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s),this.isServerBlazor&&this.enablePersistence&&this.interopAdaptor.invokeMethodAsync("ServerChange")}!ae(this.value)&&""!==this.value||"Always"===this.floatLabelType||Ci([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(ae(this.value))this.isServerBlazor||(this.hiddenElement.innerHTML="");else if(this.isServerBlazor&&this.hiddenElement.querySelector("option"))(e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",this.value.toString());else if(!this.isServerBlazor){var e;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(e=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new up;var i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Ip||"string"!==s)&&"number"!==s){var n=this.fields.text?this.fields.text:"";t.where(n,i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new up);return t},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var t=this;(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+hd.clearIcon))&&(this.filterInput.parentElement.querySelector("."+hd.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible");if(this.isDataFetched=!1,this.isFiltering())if(this.isServerBlazor)this.beforePopupOpen="combobox"===this.getModuleName()&&this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,""===this.filterInput.value&&"dropdownlist"!==this.getModuleName()?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value);else{var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,s,n){i.cancel||(t.isCustomFilter=!0,t.filteringAction(e,s,n))},baseEventArgs:e,cancel:!1};this.trigger("filtering",i,function(e){e.cancel||t.isCustomFilter||e.preventDefaultAction||t.filteringAction(t.dataSource,null,t.fields)})}},t.prototype.filter=function(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,i){ae(this.filterInput)||(this.beforePopupOpen=!0,""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,ae(this.actionCompleteData.ulElement)||ae(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,ae(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var t=e.querySelector("."+hd.filterParent)?e.querySelector("."+hd.filterParent):this.createElement("span",{className:hd.filterParent});this.isServerBlazor&&(t.innerHTML=""),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:hd.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return bt.isDevice&&(i=!0),this.filterInputObj=Na.createInput({element:this.filterInput,buttons:i?[hd.backIcon,hd.filterBarClearIcon]:[hd.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),ae(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?bi([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&bi([this.filterInputObj.container],"e-filled")),Ei([this.filterInputObj.container],t),wi([t],e),Di(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+hd.clearIcon),!bt.isDevice&&this.clearIconElement&&(Ct.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),bt.isDevice?this.searchKeyModule=new Qs(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new Qs(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),Ct.add(this.filterInput,"input",this.onInput,this),Ct.add(this.filterInput,"keyup",this.onFilterUp,this),Ct.add(this.filterInput,"keydown",this.onFilterDown,this),Ct.add(this.filterInput,"blur",this.onBlur,this),Ct.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return cd},t.prototype.onInput=function(e){this.isValidKey=!0,bt.isDevice&&"mozilla"===bt.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.typedString=t.filterInput.value,t.searchLists(e)})},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},t.prototype.onActionComplete=function(t,i,s,n){var o=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var r=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(e.prototype.onActionComplete.call(this,t,i,s),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!ae(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!ae(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,ae(t)||Di(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof Ip)){var a=ae(this.fields.value)?this.fields.text:this.fields.value;i.some(function(e){return e[a]===o.value})||this.dataSource.executeQuery(this.getQuery(this.query).where(new mp(a,"equal",this.value))).then(function(e){e.result.length>0&&(o.addItem(e.result,i.length),o.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||ae(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Ip||!ae(this.dataSource)&&!ae(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){o.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0}},0):this.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0}),this.addNewItem(i,r),ae(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},t.prototype.addNewItem=function(e,t){var i=this;if(!ae(this.itemData)&&!ae(t)){var s=this.getItemData().value;e.some(function(e){return("string"==typeof e||"number"==typeof e)&&e===s||ee(i.fields.value,e)===s})||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,t,i){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))},t.prototype.actionCompleteDataUpdate=function(e,t,i){null!=i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector("."+Qp);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+id).classList.add(hd.focus))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+hd.focus);e&&e.length&&Ci(e,hd.focus)},t.prototype.renderPopup=function(){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element))this.refreshPopup();else{this.trigger("beforeOpen",{cancel:!1},function(t){if(t.cancel)e.beforePopupOpen=!1;else{var i=e.serverPopupEle?e.serverPopupEle:e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!=e.cssClass?e.cssClass:"")}),s=e.setSearchBox(i);if(e.listHeight=ge(e.popupHeight),e.headerTemplate&&!e.isServerBlazor&&e.setHeaderTemplate(i),Ei([e.list],i),e.footerTemplate&&!e.isServerBlazor&&e.setFooterTemplate(i),e.isServerRendered&&i&&i.querySelector(".e-ddl-footer")&&i.appendChild(i.querySelector(".e-ddl-footer")),document.body.appendChild(i),e.updateServerPopup(i),i.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,ae(s.container)||(e.searchBoxHeight=s.container.parentElement.getBoundingClientRect().height,e.listHeight=(parseInt(e.listHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate||e.isServerRendered&&i&&i.querySelector(".e-ddl-header")){e.header=e.header?e.header:i.querySelector(".e-ddl-header");var n=Math.round(e.header.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(n+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate||e.isServerRendered&&i&&i.querySelector(".e-ddl-footer")){e.footer=e.footer?e.footer:i.querySelector(".e-ddl-footer");n=Math.round(e.footer.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(n+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listHeight,10)-2).toString()+"px",i.style.maxHeight=ge(e.popupHeight)}else i.style.height="auto";var o=0,r=void 0;if(!ae(e.selectedLI)&&!ae(e.activeIndex)&&e.activeIndex>=0?e.setScrollPosition():e.list.scrollTop=0,bt.isDevice&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){o=e.getOffsetValue(i);var a=e.isEmptyList()?e.list:e.liCollections[0];r=-(parseInt(getComputedStyle(a).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10))}e.getFocusElement(),e.createPopup(i,o,r),e.checkCollision(i),bt.isDevice&&(e.popupObj.element.classList.add(hd.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&(e.popupObj.element.classList.add(hd.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),Di(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),bi([document.body,e.popupObj.element],hd.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=s.container.querySelector(".e-back-icon"),e.clearIconElement=s.container.querySelector("."+hd.clearIcon),Ct.add(e.backIconElement,"click",e.clickOnBackIcon,e),Ct.add(e.clearIconElement,"click",e.clearText,e))),i.style.visibility="visible",bi([i],"e-popup-close");for(var l=0,h=e.popupObj.getScrollableParent(e.inputWrapper.container);l<h.length;l++){var c=h[l];Ct.add(c,"scroll",e.scrollHandler,e)}bt.isDevice&&e.isFilterLayout()&&Ct.add(e.list,"scroll",e.listScroll,e),ae(e.list)||(e.unWireListEvents(),e.wireListEvents()),Di(e.targetElement(),{"aria-expanded":"true"}),bi([e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container],[hd.inputFocus]);e.beforePopupOpen=!0;var p={popup:ye()&&e.isServerRendered?null:e.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};e.trigger("open",p,function(t){t.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):(e.serverBlazorUpdateSelection(),e.bindServerScrollEvent(),bi([e.inputWrapper.container],[hd.iconAnimation]),e.renderReactTemplates(),e.popupObj.show(new vs(t.animation),1e3===e.zIndex?e.element:null))})}})}},t.prototype.checkCollision=function(e){(!bt.isDevice||bt.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Fn(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())},t.prototype.serverBlazorUpdateSelection=function(){(this.isServerBlazor&&(null!==this.value||null!==this.index||null!==this.text)||"dropdownlist"!==this.getModuleName()&&!this.isTyped)&&("dropdownlist"===this.getModuleName()&&(this.removeSelection(),this.removeFocus(),this.removeHover(),this.updateValues()),"combobox"===this.getModuleName()&&this.ulElement&&this.findListElement(this.ulElement,"li","data-value",this.value)&&!this.isTyped&&this.updateValues(),this.isServerBlazor&&"dropdownlist"!==this.getModuleName()&&(""===this.text||null===this.text)&&this.ulElement&&(this.ulElement.querySelector("li").classList.contains(Jp)||bi([this.ulElement.querySelector("li")],Jp)))},t.prototype.bindServerScrollEvent=function(){this.isServerBlazor&&this.list&&this.fields.groupBy&&!this.isGroupChecking&&(Ct.remove(this.list,"scroll",this.setFloatingHeader),Ct.add(this.list,"scroll",this.setFloatingHeader,this))},t.prototype.updateServerPopup=function(e){this.isServerBlazor&&(e&&e.querySelector("li")&&Ci([e.querySelector(".e-content")],["e-nodata"]),this.initial=!1,e.removeAttribute("style"))},t.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)},t.prototype.createPopup=function(e,t,i){var s=this;this.popupObj=new lo(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown(),s.isReact&&s.clearTemplate(["headerTemplate","footerTemplate"]);var e="autocomplete"===s.getModuleName();s.DropDownBaseresetBlazorTemplates(e,e,!0,!0,!1,!0,!0),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup();Mi(s.inputElement,"form");s.isFiltering()&&s.actionCompleteData.list&&s.actionCompleteData.list[0]&&(s.isActive=!0,s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0))},open:function(){Ct.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var e=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),t=s.list.querySelector("ul li");s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&"EJS-COMBOBOX"!==s.element.tagName&&s.cloneElements(),s.isFilterLayout()&&(Ci([s.inputWrapper.container],[hd.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&bi([s.inputWrapper.clearButton],hd.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){bt.isDevice||s.hidePopup()}})},t.prototype.isEmptyList=function(){return!ae(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){bt.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector("."+hd.clearIcon);Ti(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},t.prototype.setPopupPosition=function(e){var t,i=e,s=this.list.querySelector("."+hd.focus)||this.selectedLI,n=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=n.getBoundingClientRect().height,a=this.list.offsetHeight/2,l=ae(s)?n.offsetTop:s.offsetTop;if(o.offsetTop-a<l&&!ae(this.liCollections)&&this.liCollections.length>0&&!ae(s)){var h=this.list.offsetHeight/r,c=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(h-(this.liCollections.length-this.activeIndex))*r-i+c,this.list.scrollTop=s.offsetTop}else l>a?(t=a-r/2,this.list.scrollTop=l-a+r/2):t=l;return-(t=t+r+i-(r-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=ge(this.popupWidth);e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px");if(bt.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e){if(!ae(this.selectedLI)){var t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+i-t;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;var n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;n=this.fields.groupBy&&!ae(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(n>0&&this.list.offsetHeight>n))&&(this.list.scrollTop=s)}},t.prototype.scrollTop=function(){if(!ae(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;e=this.fields.groupBy&&!ae(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!ae(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(ae(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null)},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.setEleWidth=function(e){ae(e)||("number"==typeof e?this.inputWrapper.container.style.width=ge(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:ge(e)))},t.prototype.closePopup=function(e){var t=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){Ct.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var i=0,s=this.popupObj.getScrollableParent(this.inputWrapper.container);i<s.length;i++){var n=s[i];Ct.remove(n,"scroll",this.scrollHandler)}bt.isDevice&&this.isFilterLayout()&&(Ci([document.body,this.popupObj.element],hd.popupFullScreen),Ct.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(bt.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&Ct.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(Ct.remove(this.backIconElement,"click",this.clickOnBackIcon),Ct.remove(this.clearIconElement,"click",this.clearText)),Ct.remove(this.filterInput,"input",this.onInput),Ct.remove(this.filterInput,"keyup",this.onFilterUp),Ct.remove(this.filterInput,"keydown",this.onFilterDown),Ct.remove(this.filterInput,"blur",this.onBlur),Ct.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),Di(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(hd.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var o={name:"FadeOut",duration:100,delay:e||0},r={popup:ye()&&this.isServerRendered?null:this.popupObj,cancel:!1,animation:o};this.trigger("close",r,function(e){if(!ae(t.popupObj)&&!ae(t.popupObj.element.querySelector(".e-fixed-head"))){var i=t.popupObj.element.querySelector(".e-fixed-head");i.parentNode.removeChild(i),t.fixedHeaderElement=null}e.cancel||("autocomplete"!==t.getModuleName()||t.isServerBlazor||t.rippleFun(),t.isPopupOpen?t.popupObj.hide(new vs(e.animation)):t.destroyPopup())})}},t.prototype.destroyPopup=function(){var e=Ii("#"+this.element.id+"_popup_holder",document);this.isServerBlazor&&this.serverPopupEle&&e&&(e.appendChild(this.serverPopupEle),this.interopAdaptor.invokeMethodAsync("OnServerClosePopup")),this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),Ti(this.popupObj.element)},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){if(this.isServerBlazor)this.inputElement=this.element,this.inputWrapper={container:this.element.parentElement},this.hiddenElement=this.inputWrapper.container.querySelector("select"),this.inputWrapper.buttons=[this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon")],this.showClearButton&&(this.inputWrapper.clearButton=this.inputWrapper.container.querySelector(".e-clear-icon"),Na.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),"Auto"===this.floatLabelType&&Na.wireFloatingEvents(this.element),Na.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties}),this.setFields(),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.enabled||(this.targetElement().tabIndex=-1),this.element.hasAttribute("autofocus")&&this.focusIn(),this.initial=!1;else{"INPUT"===this.element.tagName?(this.inputElement=this.element,ae(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),ae(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;ae(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Na.createInput({element:this.inputElement,buttons:this.isPopupButton()?[hd.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:hd.hiddenElement}}),wi([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setFields(),this.inputWrapper.container.style.width=ge(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var t=this.element.getAttribute("id")?this.element.getAttribute("id"):he("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),Di(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=i.options[i.selectedIndex].value,this.text=ae(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),ae(this.text)||this.inputElement.setAttribute("value",this.text)}this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()},t.prototype.setFooterTemplate=function(e){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),bi([this.footer],hd.footer));var t=Xt(this.dropdownCompiler(this.footerTemplate)?Ii(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(t&&t.length>0)for(var i=0;i<t.length;i++)this.footer.appendChild(t[i]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),Ei([this.footer],e)},t.prototype.setHeaderTemplate=function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),bi([this.header],hd.header));var t=Xt(this.dropdownCompiler(this.headerTemplate)?Ii(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(t&&t.length)for(var i=0;i<t.length;i++)this.header.appendChild(t[i]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1);var s=e.querySelector("div.e-content");e.insertBefore(this.header,s)},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){ae(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||bt.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(Ci([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){!e.dataSource||ae(Object.keys(e.dataSource))||!this.itemTemplate||!this.allowFiltering||this.isListSearched&&e.dataSource instanceof Ip||(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var t=-1!==Object.keys(e).indexOf("value")&&ae(e.value),i=-1!==Object.keys(e).indexOf("text")&&ae(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!ae(Object.keys(e.dataSource))&&(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1})},t.prototype.updateDataSource=function(e){""===this.inputElement.value&&(ae(e)||!ae(e.dataSource)&&(e.dataSource instanceof Ip||0!==e.dataSource.length))||this.clearAll(null,e),(ae(e)||!ae(e.dataSource)&&(e.dataSource instanceof Ip||0!==e.dataSource.length)||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({value:e.value,text:e.text})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&Na.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(t,i){"dropdownlist"===this.getModuleName()&&(this.isServerBlazor||(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t)));for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];switch(o){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(t.width);break;case"placeholder":Na.setPlaceholder(t.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&Na.setPlaceholder(t.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&Na.setReadonly(t.readonly,this.inputElement);break;case"cssClass":this.setCssClass(t.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===t.text){this.clearAll();break}if(this.list||(this.dataSource instanceof Ip&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var r=this.getElementByText(t.text);this.checkValidLi(r)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(t.text,i.text,"text"):this.isServerBlazor||this.setOldText(i.text)),this.updateInputFields()}break;case"value":if(null===t.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:t}),this.list||(this.dataSource instanceof Ip&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var a=this.getElementByValue(t.value);this.checkValidLi(a)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(t.value,i.value,"value"):this.isServerBlazor||this.setOldValue(i.value)),this.updateInputFields()}break;case"index":if(null===t.index){this.clearAll();break}if(this.list||(this.dataSource instanceof Ip&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections){var l=this.liCollections[t.index];this.checkValidLi(l)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(t.index,i.index,"index"):this.isServerBlazor||(this.index=i.index)),this.updateInputFields()}break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":ae(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":Na.removeFloating(this.inputWrapper),Na.addFloating(this.inputElement,t.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":Na.setClearButton(t.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:var h;h=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,t,i){var s,n=this;this.updateListValues=function(){"text"===i?(s=n.getElementByText(e),n.checkValidLi(s)||n.setOldText(t)):"value"===i?(s=n.getElementByValue(e),n.checkValidLi(s)||n.setOldValue(t)):"index"===i&&(s=n.liCollections[e],n.checkValidLi(s)||(n.index=t))}},t.prototype.setCssClass=function(e,t){ae(t)||(t=t.replace(/\s+/g," ").trim()),ae(e)||(e=e.replace(/\s+/g," ").trim()),Na.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&Na.setCssClass(e,[this.popupObj.element],t)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(){if(this.enabled)if(ye()&&this.itemTemplate&&this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),this.beforePopupOpen)this.refreshPopup();else{this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):ae(this.list)||!le(this.list)&&(this.list.classList.contains($p)||this.list.querySelectorAll("."+id).length<=0)?this.renderList():this.isFiltering()&&this.isServerBlazor&&this.renderList(),this.isServerBlazor||this.invokeRenderPopup();var e=!this.isFiltering()||Ii("#"+this.element.id+"_popup_holder",document),t="dropdownlist"===this.getModuleName()||!this.isFiltering();this.isServerBlazor&&e&&!ae(this.list)&&t&&this.invokeRenderPopup()}},t.prototype.invokeRenderPopup=function(){if(bt.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}ae(this.list.children[0])&&!this.list.classList.contains($p)||this.renderPopup(),Di(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})},t.prototype.clientRenderPopup=function(e,t){t?(this.serverPopupEle=t,this.list=t.querySelector(".e-dropdownbase.e-content")?t.querySelector(".e-dropdownbase.e-content"):this.list,this.ulElement=this.list.querySelector("ul"),ae(this.ulElement)&&!this.list.classList.contains($p)&&bi([this.list],[$p]),this.liCollections=this.ulElement?this.ulElement.querySelectorAll("."+id):[],this.listData=e,"autocomplete"===this.getModuleName()&&this.liCollections.length>0&&this.renderHightSearch(),this.initRemoteRender=!1,this.isPopupOpen||this.serverBlazorUpdateSelection(),this.unWireListEvents(),this.wireListEvents(),this.isServerIncrementalSearch&&this.searchKeyEvent&&(this.isServerIncrementalSearch=!1,this.initial=!1,this.onServerIncrementalSearch(this.searchKeyEvent)),this.isServerNavigation&&this.searchKeyEvent&&("down"===this.searchKeyEvent.action||"up"===this.searchKeyEvent.action?(this.isServerNavigation=!1,this.updateUpDownAction(this.searchKeyEvent)):"home"!==this.searchKeyEvent.action&&"end"!==this.searchKeyEvent.action||(this.isServerNavigation=!1,this.updateHomeEndAction(this.searchKeyEvent))),this.beforePopupOpen&&this.invokeRenderPopup(),"dropdownlist"!==this.getModuleName()&&this.onActionComplete(this.ulElement,this.listData)):null!=e&&this.listData!==e&&(this.listData=e,this.initRemoteRender=!1)},t.prototype.renderHightSearch=function(){},t.prototype.updateclientItemData=function(e){this.listData=e},t.prototype.initValueItemData=function(e){this.itemData=e,this.previousValue=this.value,this.initial=!1},t.prototype.serverUpdateListElement=function(e,t){this.listData=e,this.ulElement&&(this.liCollections=this.ulElement.querySelectorAll("."+id))},t.prototype.hidePopup=function(e){var t=!!this.headerTemplate,i=!!this.headerTemplate;if(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!1,t,i),this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(Na.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,ae(this.index))this.resetSelection();else{var s=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||s,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();var n=this.getItemData(),o=this.isServerBlazor?!ae(this.value):!ae(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||o&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(hd.disable)){var t=!1;this.preventFocus&&bt.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),bi([this.inputWrapper.container],[hd.inputFocus]),this.onFocus(e)}},t.prototype.focusOut=function(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),Ci([this.inputWrapper.container],[hd.inputFocus]))},t.prototype.destroy=function(){if(this.isActive=!1,this.isReact&&this.clearTemplate(),(!this.isServerBlazor||this.popupObj&&document.body.contains(this.popupObj.element))&&this.hidePopup(),this.unWireEvent(),this.list&&(this.unWireListEvents(),this.isServerBlazor&&this.fields.groupBy&&!this.isGroupChecking&&Ct.remove(this.list,"scroll",this.setFloatingHeader)),!this.isServerBlazor){if(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))return;if(this.inputElement){for(var t=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<t.length;i++)this.inputElement.removeAttribute(t[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),Na.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?Ti(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Ti(this.inputWrapper.container)),e.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof Ip&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?e.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.clear=function(){this.value=null},ld([os(null)],t.prototype,"cssClass",void 0),ld([os("100%")],t.prototype,"width",void 0),ld([os("300px")],t.prototype,"popupHeight",void 0),ld([os("100%")],t.prototype,"popupWidth",void 0),ld([os(null)],t.prototype,"placeholder",void 0),ld([os(null)],t.prototype,"filterBarPlaceholder",void 0),ld([os({})],t.prototype,"htmlAttributes",void 0),ld([os(null)],t.prototype,"query",void 0),ld([os(null)],t.prototype,"valueTemplate",void 0),ld([os(null)],t.prototype,"headerTemplate",void 0),ld([os(null)],t.prototype,"footerTemplate",void 0),ld([os(!1)],t.prototype,"allowFiltering",void 0),ld([os(!1)],t.prototype,"readonly",void 0),ld([os(null)],t.prototype,"text",void 0),ld([os(null)],t.prototype,"value",void 0),ld([os(null)],t.prototype,"index",void 0),ld([os("Never")],t.prototype,"floatLabelType",void 0),ld([os(!1)],t.prototype,"showClearButton",void 0),ld([cs()],t.prototype,"filtering",void 0),ld([cs()],t.prototype,"change",void 0),ld([cs()],t.prototype,"beforeOpen",void 0),ld([cs()],t.prototype,"open",void 0),ld([cs()],t.prototype,"close",void 0),ld([cs()],t.prototype,"blur",void 0),ld([cs()],t.prototype,"focus",void 0),t=ld([ps],t)}(rd),dd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),ud=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};hd.root="e-combobox";var md={container:null,buttons:[]},fd=function(e){function t(t,i){return e.call(this,t,i)||this}return dd(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(Ct.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),Ct.add(this.inputWrapper.container,"blur",this.onBlur,this)),ae(this.inputWrapper.buttons[0])||Ct.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),Ct.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(Ct.add(this.inputElement,"input",this.onInput,this),Ct.add(this.inputElement,"keyup",this.onFilterUp,this),Ct.add(this.inputElement,"keydown",this.onFilterDown,this),Ct.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(hd.input)||!bt.isDevice)&&bt.isDevice||e.preventDefault()},t.prototype.onBlur=function(t){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;ae(this.listData)||ae(i)||i===this.text||this.customValue(t),e.prototype.onBlur.call(this,t)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){Na.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var t=ae(e)?null:e.toString();Na.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var i=this.fields,s={};s[i.text]=ae(e)?null:e.toString(),s[i.value]=ae(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(ae(this.value))if(this.text&&ae(this.value)){var e;(e=this.getElementByText(this.text))?this.setSelection(e,null):(Na.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null);this.setHiddenValue(),Na.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?Ci([this.inputWrapper.clearButton],hd.clearIconHide):bi([this.inputWrapper.clearButton],hd.clearIconHide))},t.prototype.getAriaAttributes=function(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+hd.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+hd.li)),this.incrementalSearch(t))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:md},t.prototype.onActionComplete=function(t,i,s,n){this.isServerBlazor||e.prototype.onActionComplete.call(this,t,i,s),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&this.inlineSearch()},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),t=this.list.querySelector("."+hd.selected);if(e.text===this.inputElement.value&&!ae(t))return t;if((bt.isDevice&&!this.isDropDownClick||!bt.isDevice)&&!ae(this.liCollections)&&this.liCollections.length>0){var i=pp(this.inputElement.value,this.liCollections,"StartsWith",!0).item;if(ae(i))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var s=this.getIndexByValue(i.getAttribute("data-value"))-1,n=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(n)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var o=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=s*n+o,bi([i],hd.focus)}}return i}return null},t.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&ae(e.value)&&ae(e.text)||this.setProperties({value:e.value,text:e.text},!this.allowCustom)},t.prototype.showSpinner=function(){ae(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||Na.appendSpan("e-input-group-icon e-atc-spinner-icon",this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,bi([this.spinnerElement],hd.disableIcon),ga({target:this.spinnerElement,width:bt.isDevice?"16px":"14px"},this.createElement),Ia(this.spinnerElement))},t.prototype.hideSpinner=function(){ae(this.spinnerElement)||(Aa(this.spinnerElement),Ci([this.spinnerElement],hd.disableIcon),this.spinnerElement.classList.contains("e-atc-spinner-icon")?Ti(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},t.prototype.isAndroidAutoFill=function(e){if(bt.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,n=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&n===e.length||n>o&&i>s||i===s&&n===o)}return!1},t.prototype.clearAll=function(t,i){(ae(i)||!ae(i)&&ae(i.dataSource))&&(e.prototype.clearAll.call(this,t),this.isServerBlazor&&this.isFiltering()&&this.isPopupOpen&&t&&this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!0))},t.prototype.isSelectFocusItem=function(e){return!ae(e)},t.prototype.inlineSearch=function(e){var t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(ae(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var s=this.list.querySelector("."+hd.li);this.setHoverList(s)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length<0&&this.removeFocus();else{if(!t){var n=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.activeIndex=ae(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}},t.prototype.incrementalSearch=function(e){this.showPopup(),ae(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var s=i+e.substr(i.length,e.length);Na.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else Na.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(Ct.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),Ct.remove(this.inputWrapper.container,"blur",this.onBlur)),ae(this.inputWrapper.buttons[0])||Ct.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(Ct.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(Ct.remove(this.inputElement,"input",this.onInput),Ct.remove(this.inputElement,"keyup",this.onFilterUp),Ct.remove(this.inputElement,"keydown",this.onFilterDown),Ct.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()},t.prototype.setSelection=function(t,i){e.prototype.setSelection.call(this,t,i),ae(t)||this.autofill||this.isDropDownClick||this.removeFocus()},t.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&((t=this.isSelected?this.list.querySelector("."+hd.selected):this.list.querySelector("."+hd.focus))&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&ae(t)&&this.customValue(e),this.hidePopup()},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(hd.selected)&&(this.removeFocus(),e.classList.add(hd.focus))},t.prototype.targetFocus=function(e){bt.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e)},t.prototype.dropDownClick=function(t){t.preventDefault(),bt.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,t)},t.prototype.customValue=function(e){var t=this,i=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var s=this.value;if(ae(i)){var n,o=""===this.inputElement.value?null:this.inputElement.value;n={text:o,item:{}},this.initial?this.updateCustomValueCallback(o,n,s):this.trigger("customValueSpecifier",n,function(i){t.updateCustomValueCallback(o,i,s,e)})}else this.isSelectCustom=!1,this.setProperties({value:i}),s!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var r=this.previousValue,a=this.value;this.setProperties({value:i}),ae(this.value)&&Na.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&r===this.value&&a!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,t,i,s){var n=this.fields,o=t.item,r={};o&&ee(n.text,o)&&ee(n.value,o)?r=o:(te(n.text,e,r),te(n.value,e,r)),this.itemData=r;var a={text:ee(n.text,this.itemData),value:ee(n.value,this.itemData),index:null};this.setProperties(a,!0),this.setSelection(null,null),this.isSelectCustom=!0,i!==this.value&&this.onChangeEvent(s)},t.prototype.onPropertyChanged=function(t,i){"combobox"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];switch(o){case"readonly":Na.setReadonly(this.readonly,this.inputElement),this.readonly?(Ct.remove(this.inputElement,"input",this.onInput),Ct.remove(this.inputElement,"keyup",this.onFilterUp),Ct.remove(this.inputElement,"keydown",this.onFilterDown)):(Ct.add(this.inputElement,"input",this.onInput,this),Ct.add(this.inputElement,"keyup",this.onFilterUp,this),Ct.add(this.inputElement,"keydown",this.onFilterDown,this));break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&ae(this.list)&&e.prototype.renderList.call(this);break;case"allowCustom":break;default:var r;r=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,r.newProperty,r.oldProperty)}}},t.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&ae(this.list)&&e.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.filter=function(t,i,s){e.prototype.filter.call(this,t,i,s)},t.prototype.showPopup=function(){e.prototype.showPopup.call(this)},t.prototype.hidePopup=function(t){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!ae(this.listData)){var s=this.isEscapeKey;this.isEscapeKey&&(Na.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var n=this.isSelectCustom?{text:""}:this.getItemData(),o=this.list.querySelector("."+hd.selected);if(this.inputElement&&n.text===this.inputElement.value&&!ae(o))return this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this,t);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var r=pp(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=r.item,ae(r.index)&&(r.index=pp(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=r.index,ae(this.selectedLI)?s&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue(t)}ae(this.listData)&&this.allowCustom&&!ae(i)&&i!==this.value&&this.customValue(),e.prototype.hidePopup.call(this,t)},t.prototype.focusIn=function(){this.enabled&&(bt.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(t){e.prototype.focusOut.call(this,t)},t.prototype.getItems=function(){return e.prototype.getItems.call(this)},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.renderHightSearch=function(){},ud([os(!1)],t.prototype,"autofill",void 0),ud([os(!0)],t.prototype,"allowCustom",void 0),ud([os({})],t.prototype,"htmlAttributes",void 0),ud([os(!1)],t.prototype,"allowFiltering",void 0),ud([os(null)],t.prototype,"query",void 0),ud([os(null)],t.prototype,"index",void 0),ud([os(!0)],t.prototype,"showClearButton",void 0),ud([os(!1)],t.prototype,"enableRtl",void 0),ud([cs()],t.prototype,"customValueSpecifier",void 0),ud([cs()],t.prototype,"filtering",void 0),ud([os(null)],t.prototype,"valueTemplate",void 0),ud([os("Never")],t.prototype,"floatLabelType",void 0),ud([os(null)],t.prototype,"filterBarPlaceholder",void 0),ud([os(null)],t.prototype,"cssClass",void 0),ud([os(null)],t.prototype,"headerTemplate",void 0),ud([os(null)],t.prototype,"footerTemplate",void 0),ud([os(null)],t.prototype,"placeholder",void 0),ud([os("100%")],t.prototype,"width",void 0),ud([os("300px")],t.prototype,"popupHeight",void 0),ud([os("100%")],t.prototype,"popupWidth",void 0),ud([os(!1)],t.prototype,"readonly",void 0),ud([os(null)],t.prototype,"text",void 0),ud([os(null)],t.prototype,"value",void 0),t=ud([ps],t)}(pd);function gd(e,t,i,s,n){if(""!==t){var o=i?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),function e(t,i,s){for(var n=0;t.childNodes&&n<t.childNodes.length;n++){if(3===t.childNodes[n].nodeType&&""!==t.childNodes[n].textContent.trim()){if(t=s&&t.classList.contains("e-highlight")?t.parentElement:t,s&&t.getAttribute("data-value"))t.innerHTML=t.getAttribute("data-value").replace(i,'<span class="e-highlight">$1</span>');else{var o=t.childNodes[n].nodeValue.trim().replace(i,'<span class="e-highlight">$1</span>');t.childNodes[n].nodeValue="",t.innerHTML=t.innerHTML.trim()+o}break}e(t.childNodes[n],i,s)}}(e,new RegExp("StartsWith"===s?"^("+t+")":"EndsWith"===s?"("+t+")$":"("+t+")",o),n)}}function vd(e){for(var t=e.querySelectorAll(".e-highlight"),i=t.length-1;i>=0;i--){var s=t[i].parentNode,n=document.createTextNode(t[i].textContent);s.replaceChild(n,t[i])}}var yd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),bd=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};hd.root="e-autocomplete",hd.icon="e-input-group-icon e-ddl-icon e-search-icon";var Cd=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isFiltered=!1,s.searchList=!1,s}return yd(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new up,i=""!==this.queryString||ae(this.value)?this.filterType:"equal",s=""!==this.queryString||ae(this.value)?this.queryString:this.value;if(this.isFiltered)return t;if(null!==this.queryString&&""!==this.queryString){var n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Ip||"string"!==n)&&"number"!==n){var o=ae(this.fields.value)?"":this.fields.value;t.where(o,i,s,this.ignoreCase,this.ignoreAccent)}else t.where("",i,s,this.ignoreCase,this.ignoreAccent)}if(!ae(this.suggestionCount)){if(20!==this.suggestionCount)for(var r=0;r<t.queries.length;r++)"onTake"===t.queries[r].fn&&t.queries.splice(r,1);t.take(this.suggestionCount)}return t},t.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.isServerBlazor)this.beforePopupOpen=this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,this.queryString=this.filterInput.value,""!==this.queryString&&this.queryString.length>=this.minLength?this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value):this.hidePopup();else{if(ae(this.list)&&e.prototype.renderList.call(this,!0),this.queryString=this.filterInput.value,40===t.keyCode||38===t.keyCode)return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,n){s.cancel||(i.isFiltered=!0,i.filterAction(e,t,n))},cancel:!1};this.trigger("filtering",s,function(e){e.cancel||i.isFiltered||e.preventDefaultAction||(i.searchList=!0,i.filterAction(i.dataSource,null,i.fields))})}},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.filterAction(e,t,i)},t.prototype.filterAction=function(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,i,t):this.hidePopup(),this.renderReactTemplates()},t.prototype.clearAll=function(t,i){(ae(i)||!ae(i)&&ae(i.dataSource))&&e.prototype.clearAll.call(this,t),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(t,i,s,n){this.fixedHeaderElement=null,e.prototype.onActionComplete.call(this,t,i,s);var o=this.list.querySelector("."+hd.li);ae(o)||Ci([o],hd.focus),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!ae(this.liCollections[0])&&this.searchList){var t=[this.liCollections[0]],i=pp(this.inputElement.value,t,"StartsWith",this.ignoreCase);this.searchList=!1,ae(i.item)||e.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(t,i){if(this.isValidLI(t))if(!ae(i)&&"keydown"===i.type&&"enter"!==i.action&&"tab"!==i.action&&this.isValidLI(t)){var s=this.getFormattedValue(t.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.isServerBlazor&&this.removeHover(),this.setHoverList(t),this.selectedLI=t,this.setScrollPosition(i),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,e.prototype.setAutoFill.call(this,t)),Di(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else e.prototype.setSelection.call(this,t,i)},t.prototype.listOption=function(t,i){var s=this,n=e.prototype.listOption.call(this,t,i);if(ae(n.itemCreated))n.itemCreated=function(e){s.highlight&&(s.element.tagName===s.getNgDirective()&&s.itemTemplate?setTimeout(function(){gd(e.item,s.queryString,s.ignoreCase,s.filterType)},0):gd(e.item,s.queryString,s.ignoreCase,s.filterType))};else{var o=n.itemCreated;n.itemCreated=function(e){s.highlight&&gd(e.item,s.queryString,s.ignoreCase,s.filterType),o.apply(s,[e])}}return n},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(){this.list.scrollTop=0,e.prototype.renderPopup.call(this)},t.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.showPopup=function(){this.enabled&&(!this.beforePopupOpen||this.isServerBlazor?(this.beforePopupOpen=!0,this.preventAutoFill=!0,ae(this.list)||this.isServerBlazor?this.renderList():this.resetList(this.dataSource,this.fields)):this.refreshPopup())},t.prototype.hidePopup=function(){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1),e.prototype.hidePopup.call(this),this.activeIndex=-1},t.prototype.onPropertyChanged=function(t,i){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t);for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];switch(o){case"showPopupButton":if(this.showPopupButton){if(this.isServerBlazor){if(this.inputWrapper&&this.inputWrapper.container){r=this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon");this.inputWrapper.buttons[0]=r}}else{var r=Na.appendSpan(hd.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=r}this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&Ct.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else this.isServerBlazor||(Ti(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null);break;default:var a;a=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++){this.ulElement.querySelector(".e-active")||(vd(this.liCollections[e]),gd(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType,this.isServerBlazor))}},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){e.prototype.render.call(this)},bd([rs({value:null,iconCss:null,groupBy:null},Yp)],t.prototype,"fields",void 0),bd([os(!0)],t.prototype,"ignoreCase",void 0),bd([os(!1)],t.prototype,"showPopupButton",void 0),bd([os(!1)],t.prototype,"highlight",void 0),bd([os(20)],t.prototype,"suggestionCount",void 0),bd([os({})],t.prototype,"htmlAttributes",void 0),bd([os(null)],t.prototype,"query",void 0),bd([os(1)],t.prototype,"minLength",void 0),bd([os("Contains")],t.prototype,"filterType",void 0),bd([cs()],t.prototype,"filtering",void 0),bd([os(null)],t.prototype,"index",void 0),bd([os("Never")],t.prototype,"floatLabelType",void 0),bd([os(null)],t.prototype,"valueTemplate",void 0),bd([os(null)],t.prototype,"filterBarPlaceholder",void 0),bd([os(!1)],t.prototype,"allowFiltering",void 0),bd([os(null)],t.prototype,"text",void 0),t=bd([ps],t)}(fd),Sd={},xd={},wd={},Ed={},kd={},Td={},Ld={};Object(Y.copy)(Sd,L),Object(Y.copy)(xd,s),Object(Y.copy)(wd,E),Object(Y.copy)(Ed,k),Object(Y.copy)(kd,v),Object(Y.copy)(Td,a),Object(Y.copy)(Ld,o),Object(Y.copy)(Sd,D),Object(Y.copy)(Sd,I);var Dd={},Id={};Object(Y.copy)(Dd,a),Object(Y.copy)(Id,s);var Od={},Ad={};Object(Y.copy)(Od,l),Object(Y.copy)(Ad,s);var Md={},Pd={};Object(Y.copy)(Md,p),Object(Y.copy)(Pd,s);var Nd={},Rd={},Bd={},Hd={},Fd={},jd={},Vd={};Object(Y.copy)(Nd,I),Object(Y.copy)(Rd,s),Object(Y.copy)(Bd,E),Object(Y.copy)(Hd,k),Object(Y.copy)(Fd,v),Object(Y.copy)(jd,a),Object(Y.copy)(Vd,o),Object(Y.copy)(Nd,D);var zd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),_d=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},qd=function(e){function t(t,i){return e.call(this,t,i)||this}return zd(t,e),t.prototype.preRender=function(){this.browser=bt.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=bt.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=he("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new nn(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Ct.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){ae(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,s=0,n=[].slice.call(i.children);s<n.length;s++){var o=n[s];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var i=Oi(".e-"+t.id+"_nav.e-scroll-nav",t),s=Oi(".e-scroll-overlay",t);[].slice.call(s).forEach(function(e){Ti(e)});for(var n=0,o=[].slice.call(this.scrollItems.children);n<o.length;n++){var r=o[n];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),Ti(this.scrollEle),i.length>0&&(Ti(i[0]),ae(i[1])||Ti(i[1])),Ct.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=Oi(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:s}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});n.appendChild(o);var r=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s=this.createElement("div",{id:t.concat("_right"),className:i});s.setAttribute("aria-disabled","false");var n=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),r=this.createElement("div",{id:t.concat("_left"),className:o+" e-overlay"});r.setAttribute("aria-disabled","true");var a=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});r.appendChild(a),s.appendChild(n),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new nn(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),Ct.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){t.eleScrolling(10,i,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var s=this.scrollEle,n=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(n,"e-rtl")&&this.browserCheck&&(e=-e);s.scrollLeft;!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var s=.5,n=function(){var o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),s-=.5,window.requestAnimationFrame(n))};n()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var s=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(Oi(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetWidth});var n=function(){var i,o;s.contains(s.element,"e-rtl")&&s.browserCheck?(i=-e,o=-10):(i=e,o=10),i<10?window.cancelAnimationFrame(o):(s.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(n))};n()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(ae(e)?t:e).querySelector(".e-nav-arrow");ae(e)?Bi(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):Bi(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,s=this.element,n=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),r=this.element.querySelector(".e-scroll-left-overlay"),a=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(r=this.element.querySelector(".e-scroll-right-overlay"),a=this.element.querySelector(".e-scroll-left-overlay")),r.style.width=l<40?l+"px":"40px",t.scrollWidth-Math.ceil(i+l)<40?a.style.width=t.scrollWidth-Math.ceil(i+l)+"px":a.style.width="40px"),0===l)!this.contains(s,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(n,o):this.arrowDisabling(o,n);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(s,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,n):this.arrowDisabling(n,o);else{var h=this.element.querySelector(".e-scroll-nav.e-overlay");h&&(h.classList.remove("e-overlay"),h.setAttribute("aria-disabled","false"),h.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},_d([os(null)],t.prototype,"scrollStep",void 0),t=_d([ps],t)}(Ns),Wd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ud=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Gd=function(e){function t(t,i){return e.call(this,t,i)||this}return Wd(t,e),t.prototype.preRender=function(){this.browser=bt.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=bt.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=he("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new nn(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Ct.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),Ct.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){ae(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=yi("div",{className:"e-vscroll-content"}),t=yi("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,s=0,n=[].slice.call(i.children);s<n.length;s++){var o=n[s];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",Ci([this.element],["e-vscroll","e-scroll-device"]);var i=Oi(".e-"+t.id+"_nav.e-scroll-nav",t),s=Oi(".e-scroll-overlay",t);[].slice.call(s).forEach(function(e){Ti(e)});for(var n=0,o=[].slice.call(this.scrollItems.children);n<o.length;n++){var r=o[n];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),Ti(this.scrollEle),i.length>0&&(Ti(i[0]),ae(i[1])||Ti(i[1])),Ct.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=Oi(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=yi("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=yi("div",{id:t.concat("down"),className:s}),o=yi("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});n.appendChild(o);var r=yi("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=yi("div",{id:t.concat("_down"),className:i});s.setAttribute("aria-disabled","false");var n=yi("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),r=yi("div",{id:t.concat("_up"),className:o+" e-overlay"});r.setAttribute("aria-disabled","true");var a=yi("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});r.appendChild(a),s.appendChild(n),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new nn(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),Ct.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){t.eleScrolling(10,i,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){this.element;var s=t.classList;s.contains("e-scroll-nav")&&(s=t.querySelector(".e-nav-arrow").classList),s.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):s.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var s=.5,n=function(){var o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),s-=.02,window.requestAnimationFrame(n))};n()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var s=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(Oi(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetHeight});var n=function(){e<10?window.cancelAnimationFrame(10):(s.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(n))};n()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(ae(e)?t:e).querySelector(".e-nav-arrow");ae(e)?Bi(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):Bi(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,s=(this.element,this.element.querySelector(".e-scroll-up-nav")),n=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),r=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",t.scrollHeight-Math.ceil(i+a)<40?r.style.height=t.scrollHeight-Math.ceil(i+a)+"px":r.style.height="40px"),0===a)this.arrowDisabling(s,n);else if(Math.ceil(i+a+.1)>=t.scrollHeight)this.arrowDisabling(n,s);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Ud([os(null)],t.prototype,"scrollStep",void 0),t=Ud([ps],t)}(Ns);function Yd(e,t,i,s,n,o){var r,a;if("vscroll"===s?(r=o||t.getBoundingClientRect().height,a=i.getBoundingClientRect().height):(r=t.getBoundingClientRect().width,a=i.getBoundingClientRect().width),r<a){var l=e("div",{className:"e-menu-"+s});t.appendChild(l),l.appendChild(i),o?(l.style.overflow="hidden",l.style.height=o+"px"):(l.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden");return"vscroll"===s?new Gd({enableRtl:n},l).scrollStep=Ii(".e-"+s+"-bar",t).offsetHeight/2:new qd({enableRtl:n},l).scrollStep=Ii(".e-"+s+"-bar",t).offsetWidth,l}return i}function Xd(e,t,i){if(e){var s=Ii(".e-menu-parent",t);s?i&&i!==s||(e.destroy(),t.parentElement.appendChild(s),Ti(t)):(e.destroy(),Ti(t))}}var Kd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Zd=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Qd="e-focused",Jd="e-menu-header",$d="e-selected",eu="e-menu-item",tu="e-menu-hide",iu="e-menu-popup",su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kd(t,e),Zd([os("id")],t.prototype,"itemId",void 0),Zd([os("parentId")],t.prototype,"parentId",void 0),Zd([os("text")],t.prototype,"text",void 0),Zd([os("iconCss")],t.prototype,"iconCss",void 0),Zd([os("url")],t.prototype,"url",void 0),Zd([os("separator")],t.prototype,"separator",void 0),Zd([os("items")],t.prototype,"children",void 0),t}(Ls),nu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kd(t,e),Zd([os(null)],t.prototype,"iconCss",void 0),Zd([os("")],t.prototype,"id",void 0),Zd([os(!1)],t.prototype,"separator",void 0),Zd([ls([],t)],t.prototype,"items",void 0),Zd([os("")],t.prototype,"text",void 0),Zd([os("")],t.prototype,"url",void 0),t}(Ls),ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kd(t,e),Zd([os("SlideDown")],t.prototype,"effect",void 0),Zd([os(400)],t.prototype,"duration",void 0),Zd([os("ease")],t.prototype,"easing",void 0),t}(Ls),ru=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.navIdx=[],s.animation=new vs({}),s.isTapHold=!1,s.tempItem=[],s}return Kd(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:he(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=ee("ej2_instances",this.element);Ci([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,te("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:he(this.getModuleName())}),Ei([].slice.call(this.element.cloneNode(!0).children),e);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(e,i):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var s=this.element,n=ee("ej2_instances",s),o=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),r=0,a=s.attributes.length;r<a;r++)e.setAttribute(s.attributes[r].nodeName,s.attributes[r].nodeValue);s.parentNode.insertBefore(o,s),Ti(s),s=e,o.appendChild(s),te("ej2_instances",n,s),this.clonedElement=o,this.element=s,this.element.id||(this.element.id=he(this.getModuleName()))}},t.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&ye()){var e=this.element.id+"Template";Zt(e),Object.keys(Gt).length&&re(this.tempItem,Gt[e],[],!0),Kt(e,"Template",this)}this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&bi([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e))},t.prototype.renderItems=function(){if(!this.items.length){var e=dp.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),ye()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);if(Ei(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){var i=this.getWrapper();this.element.classList.contains("e-vertical")?Yd(this.createElement,i,this.element,"vscroll",this.enableRtl):Yd(this.createElement,i,this.element,"hscroll",this.enableRtl)}},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,i=Oi(this.target),s=0,n=i.length;s<n;s++)t=i[s],this.isMenu?Ct.add(t,"click",this.menuHeaderClickHandler,this):bt.isIos?new nn(t,{tapHold:this.touchHandler.bind(this)}):Ct.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){Ct.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,r=ho(this.targetElement);o<r.length;o++){var a=r[o];Ct.add(a,"scroll",this.scrollHandler,this)}}}bt.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),Ct.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),Ct.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),Ct.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=ys(e,{selector:"."+eu})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(t.home="home",t.end="end"),new Qs(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){Mi(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||Mi(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",i=e.target,s=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Qd,$d],[Mi(i,".e-"+this.getModuleName()+"-wrapper")]),s)switch(e.action){case"rightarrow":t="rightarrow",e.action="downarrow";break;case"leftarrow":t="leftarrow",e.action="uparrow";break;case"downarrow":t="downarrow",e.action="rightarrow";break;case"uparrow":t="uparrow",e.action=""}else if(this.enableRtl)switch(e.action){case"leftarrow":s=!0,t="leftarrow",e.action="rightarrow";break;case"rightarrow":s=!0,t="rightarrow",e.action="leftarrow"}switch(e.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(e);break;case"rightarrow":this.rightEnterKeyHandler(e);break;case"leftarrow":this.leftEscKeyHandler(e);break;case"enter":this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case"escape":this.leftEscKeyHandler(e)}s&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),i="downarrow"===e.action||"home"===e.action?0:t.childElementCount-1,s=i,n=this.getLIByClass(t,Qd);n&&("end"!==e.action&&"home"!==e.action&&(s=this.getIdx(t,n)),n.classList.remove(Qd),"end"!==e.action&&"home"!==e.action&&("downarrow"===e.action?s++:s--,s===("downarrow"===e.action?t.childElementCount:-1)&&(s=i)));var o=t.children[s];s=this.isValidLI(o,s,e.action),t.children[s].classList.add(Qd),t.children[s].focus()},t.prototype.isValidLI=function(e,t,i){this.getWrapper();var s=this.getUlByNavIdx();return(e.classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(tu))&&("downarrow"===i||"rightarrow"===i?t++:t--),((e=s.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(tu))&&(t=this.isValidLI(e,t,i)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(Oi("."+iu)))[e];return ae(t)?null:Ii(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t,i=this.getUlByNavIdx(),s=this.getLIByClass(i,Qd);if(s){var n=this.getIdx(i,s),o=this.navIdx.concat(n),r=this.getItem(o);r.items.length?(this.navIdx.push(n),this.keyType="right",this.action=e.action,this.openMenu(s,r,-1,-1,e)):"enter"===e.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([$d],[this.getWrapper()]):s.classList.remove(Qd),s.classList.add($d),t={element:s,item:r,event:e},this.trigger("select",t),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):"escape"===e.action&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t,i){var s=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var n,o,r,a=void 0,l=this.getWrapper(),h=void 0,c=this.getPopups(),p=!1,d=this.isMenu?c.length+1:l.childElementCount;if(n=this.isMenu&&1!==d?Ii(".e-ul",c[d-2]):Oi(".e-menu-parent",l)[d-1],this.isMenu&&n.classList.contains("e-menu")&&((a=this.getLIByClass(n,$d))&&a.classList.remove($d),p=!0),!p){var u=t&&t.target&&this.getLI(t.target);o=this.navIdx.length?this.getItem(this.navIdx):null,r=o?o.items:this.items,h={element:n,parentItem:this.isMenu&&ye()?this.getMenuItemModel(o,e):o,items:r,event:t,cancel:!1,isFocused:!0},this.trigger("beforeClose",h,function(a){var l,h,c,p,d,m,f="",g=!a.cancel;(g||s.isCMenu)&&(s.isMenu?(l=Mi(n,"."+iu),s.hamburgerMode&&(l.parentElement.style.minHeight="",Mi(n,".e-menu-item").setAttribute("aria-expanded","false")),s.unWireKeyboardEvent(l),Xd(Ce(l.children[0],Gd),l.children[0]),(c=Ce(l,lo)).hide(),f=l.id,c.destroy(),Ti(l)):s.toggleAnimation(n,!1),h={element:n,parentItem:o,items:r},s.trigger("onClose",h),s.navIdx.pop()),s.updateReactTemplate();var v=s.getWrapper()&&s.getUlByNavIdx();s.isCMenu&&(s.canOpen(t.target)&&s.openMenu(null,null,s.pageY,s.pageX,t),s.isCMenu=!1),s.isMenu&&v&&f.length&&(p=new RegExp("(.*)-ej2menu-"+s.element.id+"-popup").exec(f)[1],d=v.querySelector('[id="'+p+'"]'),m=u&&v.querySelector('[id="'+u.id+'"]'));var y=u&&u.querySelectorAll(".e-menu-item");if(g&&s.hamburgerMode&&e&&!y.length)s.afterCloseMenu(t);else if(g&&!s.hamburgerMode&&s.navIdx.length&&d&&!m){var b=t&&t.target.classList.contains("e-vscroll")?Mi(t.target,".e-menu-wrapper"):null;b?(b=b.querySelector(".e-menu-item"),(s.showItemOnClick||b&&s.getIndex(b.id,!0).length<=s.navIdx.length)&&s.closeMenu(s.navIdx[s.navIdx.length-1],t,!0)):s.closeMenu(s.navIdx[s.navIdx.length-1],t)}else if(g&&!i&&!e&&(s.hamburgerMode&&s.navIdx.length||1===s.navIdx.length))s.closeMenu(null,t);else if(g&&ae(e)&&s.navIdx.length)s.closeMenu(null,t);else if(!g||s.isMenu||e||0!==s.navIdx.length||s.isMenusClosed)if(g&&s.isMenu&&t&&t.target&&0!==s.navIdx.length&&Mi(t.target,".e-menu-parent.e-control"))s.closeMenu(0,t);else if(!g||"right"!==s.keyType&&"click"!==s.keyType){var C=s.getUlByNavIdx(),S=s.getLIByClass(C,$d);if(S&&(S.setAttribute("aria-expanded","false"),S.classList.remove($d),a.isFocused&&u&&(S.classList.add(Qd),S.focus())),!g&&s.hamburgerMode&&u&&"false"===u.getAttribute("aria-expanded")&&"true"===u.getAttribute("aria-haspopup")){Mi(u,".e-menu-parent.e-control")?s.navIdx=[]:s.navIdx.pop(),s.navIdx.push(s.cliIdx);var x=s.getItem(s.navIdx);u.setAttribute("aria-expanded","true"),s.openMenu(u,x,-1,-1,t)}}else s.afterCloseMenu(t);else s.isMenusClosed=!0,s.closeMenu(0,t);s.removeStateWrapper()})}}},t.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},t.prototype.getMenuItemModel=function(e,t){if(ae(e))return null;ae(t)&&(t=0);var i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+iu)).forEach(function(i){e.getIndex(i.querySelector("."+eu).id,!0).length&&t.push(i)}),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&xi(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var i=this.filter.split(" "),s=0,n=i.length;s<n;s++)if(Mi(e,"."+i[s])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,i,s,n,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=null),void 0===o&&(o=this.targetElement);var r=this.getWrapper();this.lItem=e;var a=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,ae(i)&&(i=-1),ae(s)&&(s=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&bt.isDevice){r.lastChild.style.display="none";var l={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},h=new nu(this.items[0],"items",l,!0),c=this.createItems([h]).children[0];c.classList.add(Jd),this.uList.insertBefore(c,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+iu,id:e.id+"-ej2menu-"+a+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&bi([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(e,this.uList,t,n,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,r.appendChild(this.uList),this.triggerBeforeOpen(e,this.uList,t,n,i,s,"none"))}else this.uList=this.element,this.uList.style.zIndex=co(o||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,n,i,s,"none");if(this.isMenu&&this.template&&ye()){var p=this.element.id+"Template";if(Object.keys(Gt).length){var d=Gt[p];this.tempItem=this.tempItem.concat(d),Gt[p]=this.tempItem}Kt(p,"Template",this)}},t.prototype.calculateIndentSize=function(e,t){var i=getComputedStyle(t),s=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?s*=2:s+=s/4,e.style.textIndent=s+"px";var n=e.querySelectorAll(".e-blankicon");if(n&&n.length)for(var o=e.querySelector(".e-menu-icon"),r=getComputedStyle(o),a=parseInt(r.marginRight,10)+o.offsetWidth+s,l=0;l<n.length;l++)n[l].style.textIndent=a+"px"},t.prototype.generatePopup=function(e,t,i,s){var n=this,o=new lo(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:s||this.enableRtl?"none":"flip",Y:"fit"},position:s&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=Ii(".e-menu-vscroll",o.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=Ii(".e-ul",o.element);o.element.style.maxHeight="",t.focus(),n.triggerOpen(t)}});return o},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?ln.sanitize(this.title):this.title,s=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),n=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(s),t.appendChild(n),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){if(this.hamburgerMode){this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}},t.prototype.closeHamburgerMenu=function(e){var t=this;if(this.hamburgerMode){var i;i={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},this.trigger("beforeClose",i,function(i){i.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))})}},t.prototype.callFit=function(e,t,i,s,n){return Hn(e,null,{X:t,Y:i},{top:s,left:n})},t.prototype.triggerBeforeOpen=function(e,t,i,s,n,o,r){var a,l=this,h=(this.getIndex(e?e.id:null,!0),e?i[this.getField("children",this.navIdx.length-1)]:this.items),c={element:t,items:h,parentItem:this.isMenu&&ye()?this.getMenuItemModel(i,this.navIdx.length-1):i,event:s,cancel:!1,top:n,left:o},p=r;this.trigger("beforeOpen",c,function(n){switch(p){case"menu":if(l.hamburgerMode||(l.top=n.top,l.left=n.left),l.popupWrapper.style.display="block",l.hamburgerMode||(l.popupWrapper.style.maxHeight=l.popupWrapper.getBoundingClientRect().height+"px",l.enableScrolling&&Yd(l.createElement,l.popupWrapper,l.uList,"vscroll",l.enableRtl),l.checkScrollOffset(s)),l.hamburgerMode||l.left||l.top)l.popupObj.collision={X:"none",Y:"none"};else{if(l.popupObj.refreshPosition(l.lItem,!0),l.left=parseInt(l.popupWrapper.style.left,10),l.top=parseInt(l.popupWrapper.style.top,10),l.enableRtl&&(l.left=l.isNestedOrVertical?l.left-l.popupWrapper.offsetWidth-l.lItem.parentElement.offsetWidth+2:l.left-l.popupWrapper.offsetWidth+l.lItem.offsetWidth),a=Fn(l.popupWrapper,null,l.left,l.top),(l.isNestedOrVertical||l.enableRtl)&&(a.indexOf("right")>-1||a.indexOf("left")>-1)){l.popupObj.collision.X="none";var o=Mi(l.lItem,".e-"+l.getModuleName()+"-wrapper").offsetWidth;l.left=l.enableRtl?Tn(l.lItem,l.isNestedOrVertical?"right":"left","top").left:l.left-l.popupWrapper.offsetWidth-o+2}((a=Fn(l.popupWrapper,null,l.left,l.top)).indexOf("left")>-1||a.indexOf("right")>-1)&&(l.left=l.callFit(l.popupWrapper,!0,!1,l.top,l.left).left),l.popupWrapper.style.left=l.left+"px"}l.popupWrapper.style.display="";break;case"none":l.top=n.top,l.left=n.left;break;case"hamburger":n.cancel||(l.element.classList.remove("e-hide-menu"),l.triggerOpen(l.element))}if("hamburger"!==p)if(n.cancel)l.isMenu?(l.popupObj.destroy(),Ti(l.popupWrapper)):t.className.indexOf("e-ul")>-1&&Ti(t),l.navIdx.pop();else if(l.isMenu)if(l.hamburgerMode)l.popupWrapper.style.top=l.top+"px",l.popupWrapper.style.left="0px",l.toggleAnimation(l.popupWrapper);else{l.setBlankIconStyle(l.popupWrapper),l.wireKeyboardEvent(l.popupWrapper),ys(l.popupWrapper,{selector:"."+eu}),l.popupWrapper.style.left=l.left+"px",l.popupWrapper.style.top=l.top+"px";var r="None"!==l.animationSettings.effect?{name:l.animationSettings.effect,duration:l.animationSettings.duration,timingFunction:l.animationSettings.easing}:null;l.popupObj.show(r,l.lItem)}else l.setBlankIconStyle(l.uList),l.setPosition(l.lItem,l.uList,l.top,l.left),l.toggleAnimation(l.uList);if("right"===l.keyType){var h=l.getUlByNavIdx();e.classList.remove(Qd);var c;if(l.isMenu&&1===l.navIdx.length&&l.removeLIStateByClass([$d],[l.getWrapper()]),e.classList.add($d),"enter"===l.action){var d={element:e,item:i,event:s};l.trigger("select",d)}e.focus(),h=l.getUlByNavIdx(),c=l.isValidLI(h.children[0],0,l.action),h.children[c].classList.add(Qd),h.children[c].focus()}})},t.prototype.setBlankIconStyle=function(e){var t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(t.length){var i=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),s=i.querySelector(".e-menu-icon");if(s){var n=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(s),r=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>r&&(r=parseInt(o.width,10));var a=r+parseInt(o[n.margin],10)+parseInt(getComputedStyle(i)[n.padding],10)+"px";t.forEach(function(e){e.style[n.padding]=a})}}},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i,s,n=ae(e)?this.element:Mi(e.target,"."+eu),o=Ii(".e-hscroll-bar",t);o.scrollLeft>n.offsetLeft&&(o.scrollLeft-=o.scrollLeft-n.offsetLeft),(i=o.scrollLeft+o.offsetWidth)<(s=n.offsetLeft+n.offsetWidth)&&(o.scrollLeft+=s-i)}},t.prototype.setPosition=function(e,t,i,s){if(this.toggleVisiblity(t),t===this.element||s>-1&&i>-1){if((r=Fn(t,null,s,i)).indexOf("right")>-1&&(s-=t.offsetWidth),r.indexOf("bottom")>-1)if((i=(o=this.callFit(t,!1,!0,i,s)).top-20)<0){var n=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;n>-1&&(i=n)}if((r=Fn(t,null,s,i)).indexOf("left")>-1)s=(o=this.callFit(t,!0,!1,i,s)).left}else if(bt.isDevice)i=Number(this.element.style.top.replace("px","")),s=Number(this.element.style.left.replace("px",""));else{var o;i=(o=Tn(e,this.enableRtl?"left":"right","top")).top,s=o.left;var r,a=(r=Fn(t,null,this.enableRtl?s-t.offsetWidth:s,i)).indexOf("left")>-1||r.indexOf("right")>-1;a&&(s=(o=Tn(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||a)&&(s=this.enableRtl&&a?s:s-t.offsetWidth),r.indexOf("bottom")>-1&&(i=(o=this.callFit(t,!1,!0,i,s)).top)}this.toggleVisiblity(t,!1),t.style.top=i+"px",t.style.left=s+"px"},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,i=this.navIdx?this.navIdx.length:0,s=this.getFields(i);if(ye()&&this.template&&e.length&&e[0].properties){var n=[];e.forEach(function(e,t){n.push({}),n[t][s.text]=e[s.text],e[s.id]||(e[s.id]=he("menuitem")),n[t][s.id]=e[s.id],n[t][s.iconCss]=e[s.iconCss],n[t][s.url]=e[s.url],n[t][s.child]=e[s.child],n[t][s.separator]=e[s.separator]}),e=n}var o=this.hasField(e,this.getField("iconCss",i)),r={showIcon:o,moduleName:"menu",fields:s,template:this.template,itemNavigable:!0,itemCreating:function(e){e.curData[e.fields[s.id]]||(e.curData[e.fields[s.id]]=he("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",i)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields[s.iconCss]]&&(e.curData[e.fields[s.iconCss]]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",i)]&&(e.item.classList.add("e-separator"),e.item.removeAttribute("role")),!o||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",i)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var s=t.createElement("span",{className:"e-icons e-caret"});e.item.appendChild(s),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"),e.item.classList.contains("e-level-1")&&e.item.classList.remove("e-level-1"),e.item.classList.contains("e-has-child")&&e.item.classList.remove("e-has-child"));var n={item:e.curData,element:e.item};t.trigger("beforeItemRender",n)}};this.setProperties({items:this.items},!0),this.isMenu&&(r.templateID=this.element.id+"Template");var a=dp.createList(this.createElement,e,r,!this.template,this);return a.setAttribute("tabindex","0"),this.isMenu&&a.setAttribute("role","menu"),a},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var i=this.getLI(t),s=i?Mi(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),n=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),r=!1;if(s){if((""!==s.id?o.exec(s.id)[1]:s.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Qd,$d],[this.getWrapper()]),!this.navIdx.length)return;r=!0}i&&Mi(i,".e-"+this.getModuleName()+"-wrapper")&&!r?(this.removeLIStateByClass([Qd],this.isMenu?[s].concat(this.getPopups()):[s]),this.removeLIStateByClass([Qd],this.isMenu?[n].concat(this.getPopups()):[n]),i.classList.add(Qd),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!r&&this.removeLIStateByClass([Qd],[s].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===s||Mi(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)?r&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Qd],[s]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=Mi(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Qd,$d],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var i,s=function(s){e.forEach(function(e){(i=Ii("."+e,t[s]))&&i.classList.remove(e)})},n=0;n<t.length;n++)s(n)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var i=this.fields[e];return"string"==typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){Mi(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),i=e.target,s=this.cli=this.getLI(i),n=new RegExp("-ej2menu-(.*)-popup"),o=s?Mi(s,".e-"+this.getModuleName()+"-wrapper"):null,r=s&&o&&(this.isMenu?this.getIndex(s.id,!0).length>0:t.firstElementChild.id===o.firstElementChild.id);if(bt.isDevice&&this.isMenu&&(this.removeLIStateByClass([Qd],[t].concat(this.getPopups())),this.mouseDownHandler(e)),s&&o&&this.isMenu){var a=o.id?n.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==a)return}if(r&&"click"===e.type&&!s.classList.contains(Jd)){this.setLISelected(s);var l=this.getIndex(s.id,!0),h={element:s,item:this.getItem(l),event:e};this.trigger("select",h)}if(r&&("mouseover"===e.type||bt.isDevice||this.showItemOnClick)){var c=void 0;if(s.classList.contains(Jd))c=t.children[this.navIdx.length-1],this.toggleAnimation(c),(d=this.getLIByClass(c,$d))&&d.classList.remove($d),Ti(s.parentNode),this.navIdx.pop();else if(!s.classList.contains("e-separator")){this.showSubMenu=!0;var p=s.parentNode;if(this.cliIdx=this.getIdx(p,s),this.isMenu||!bt.isDevice){var d,u=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),Mi(p,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,p);if(this.navIdx[u]===this.cliIdx&&(this.showSubMenu=!1),u!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu))(d=this.getLIByClass(p,$d))&&d.classList.remove($d),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(s),this.closeMenu(u+1,e),this.showItemOnClick&&this.setLISelected(s)}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&Mi(i,".e-menu-vscroll")){var m=Mi(i,"."+iu),f=Array.prototype.indexOf.call(this.getPopups(),m)+1;f<this.navIdx.length&&(this.closeMenu(f+1,e),m&&this.removeLIStateByClass([Qd,$d],[m]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+eu).id,!0).length:i.parentElement===t)||(s||this.removeLIStateByClass([$d],[t]),s&&s.querySelector(".e-caret")||this.closeMenu(null,e))}},t.prototype.afterCloseMenu=function(e){var t;if(this.showSubMenu){t=this.showItemOnClick&&0===this.navIdx.length?Mi(e.target,".e-menu-parent.e-control"):Mi(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),s=this.getItem(i);if(s&&s[this.getField("children",i.length-1)]&&s[this.getField("children",i.length-1)].length?(("mouseover"===e.type||bt.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,s,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){var n=this.getUlByNavIdx(),o=this.getLIByClass(n,$d);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove($d))}}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,$d);t&&t.classList.remove($d),this.isMenu||e.classList.remove(Qd),e.classList.add($d)},t.prototype.getLIByClass=function(e,t){for(var i=0,s=e.children.length;i<s;i++)if(e.children[i].classList.contains(t))return e.children[i];return null},t.prototype.getItemIndex=function(e,t){var i;i="string"==typeof e?e:e.id;var s=!1!==t;return this.getIndex(i,s)},t.prototype.setItem=function(e,t,i){var s=t||e.id,n=!1!==i,o=this.getIndex(s,n),r=this.getItem(o);r.iconCss=e.iconCss,r.id=e.id,r.text=e.text,r.url=e.url,r.separator=e.separator,r.items=e.items},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t},t.prototype.setItems=function(e,t){var i=this.getItems(t);i.splice(0,i.length);for(var s=0;s<e.length;s++)i.splice(s,0,e[s])},t.prototype.getIdx=function(e,t,i){void 0===i&&(i=!0);var s=Array.prototype.indexOf.call(e.querySelectorAll("li"),t);return s=this.isMenu&&this.template&&ye()?Array.prototype.indexOf.call(e.querySelectorAll(t.tagName),t):Array.prototype.indexOf.call(e.children,t),i&&e.children[0].classList.contains(Jd)&&s--,s},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:Mi(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,i=0;i<this.navIdx.length&&(e=e[i].items);i++){t++;var s=this.getUlByNavIdx(t);if(!s)break;this.updateItem(s,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var i=this,s=this.getWrapper(),n=function(n){switch(n){case"cssClass":t.cssClass&&Ci([s],t.cssClass.split(" ")),e.cssClass&&bi([s],e.cssClass.split(" "));break;case"enableRtl":s.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=e.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var r;o.element.classList.contains("e-vertical")?Yd(o.createElement,s,o.element,"vscroll",o.enableRtl):Yd(o.createElement,s,o.element,"hscroll",o.enableRtl),o.getPopups().forEach(function(e){r=Ii(".e-ul",e),Yd(i.createElement,e,r,"vscroll",i.enableRtl)})}else{var a=s.children[0];o.element.classList.contains("e-vertical")?Xd(Ce(a,Gd),a):Xd(Ce(a,qd),a),s.style.overflow="",s.appendChild(o.element),o.getPopups().forEach(function(e){Xd(Ce(a=e.children[0],Gd),a),e.style.overflow=""})}break;case"items":var l=void 0,h=void 0,c=void 0;if(Object.keys(t.items).length){var p=Object.keys(e.items);for(d=0;d<p.length;d++)(h=o.getChangedItemIndex(e,[],Number(p[d]))).length<=o.getWrapper().children.length&&(l=h.pop(),c=o.getItems(h),o.insertAfter([c[l]],c[l].text),o.removeItem(c,h,l),o.setItems(c,h)),h.length=0}else{o.updateItem(o.element,o.items);for(var d=1,u=s.childElementCount;d<u;d++)Ti(s.lastElementChild);o.isMenu&&ye()?o.updateItemsByNavIdx():o.navIdx=[]}}},o=this,r=0,a=Object.keys(e);r<a.length;r++){n(a[r])}},t.prototype.updateItem=function(e,t){ye()?e=this.removeChildElement(e):e.innerHTML="",[].slice.call(this.createItems(t).children).forEach(function(t){e.appendChild(t)})},t.prototype.getChangedItemIndex=function(e,t,i){t.push(i);var s=Object.keys(e.items[i]).pop();if("items"===s){var n=e.items[i],o=Object.keys(n.items).pop();o&&this.getChangedItemIndex(n,t,Number(o))}else"isParentArray"===s&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,i){e.splice(i,1);var s=this.getWrapper().children;t.length<s.length&&Ti(s[t.length].children[i])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var i=void 0,s=void 0,n=Oi(e),o=0,r=n.length;o<r;o++)i=n[o],this.isMenu?Ct.remove(i,"click",this.menuHeaderClickHandler):bt.isIos?(s=Ce(i,nn))&&s.destroy():Ct.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){Ct.remove(this.targetElement,"scroll",this.scrollHandler);for(var a=0,l=ho(this.targetElement);a<l.length;a++){var h=l[a];Ct.remove(h,"scroll",this.scrollHandler)}}}bt.isDevice||(Ct.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),Ct.remove(document,"mousedown",this.delegateMouseDownHandler)),Ct.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=Ce(e,Qs);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var i,s,n=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){n.hamburgerMode?(s=e.element.parentElement,e.element.style.position="absolute",i=s.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",s.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){n.hamburgerMode&&(s.style.minHeight=i+e.element.offsetHeight+"px")},end:function(e){n.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",s.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),n.triggerOpen(e.element.children[0])):n.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,i={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",i)},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Qd))e.querySelector("."+Qd).focus();else{var i=void 0;(i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?i.querySelector("."+$d).focus():this.element.focus()}else if(e===this.element){var s=this.getLIByClass(this.element,Qd);s&&s.classList.remove(Qd);var n=this.getLIByClass(this.element,$d);n&&n.classList.remove($d),e.style.display="none"}else Ti(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return Mi(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,i,s,n,o){var r;void 0===i&&(i=this.items),void 0===s&&(s=[]),void 0===n&&(n=!1),void 0===o&&(o=0),o=n?o+1:0;for(var a=0,l=i.length;a<l;a++){if(r=i[a],(t?r[this.getField("itemId",o)]:r[this.getField("text",o)])===e){s.push(a);break}if(r[this.getField("children",o)]&&r[this.getField("children",o)].length){if(-1!==(s=this.getIndex(e,t,r[this.getField("children",o)],s,!0,o))[s.length-1]){s.unshift(a);break}a!==l-1&&s.pop()}else a===l-1&&s.push(-1)}return n||-1!==s[0]?s:[]},t.prototype.enableItems=function(e,t,i){var s,n,o;void 0===t&&(t=!0);for(var r,a="e-disabled",l=0;l<e.length;l++){if(o=this.getIndex(e[l],i),this.navIdx.length){if(1!==o.length){r=!1;for(var h=0,c=o.length-1;h<c;h++)if(o[h]!==this.navIdx[h]){r=!0;break}if(r)continue}}else if(1!==o.length)continue;n=o.pop(),(s=this.getUlByNavIdx(o.length))&&(t?this.isMenu?(s.children[n].classList.remove(a),s.children[n].removeAttribute("aria-disabled")):bt.isDevice&&!s.classList.contains("e-contextmenu")?s.children[n+1].classList.remove(a):s.children[n].classList.remove(a):this.isMenu?(s.children[n].classList.add(a),s.children[n].setAttribute("aria-disabled","true")):bt.isDevice&&!s.classList.contains("e-contextmenu")?s.children[n+1].classList.add(a):s.children[n].classList.add(a))}},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,i){for(var s,n,o,r=0;r<e.length;r++)n=(o=this.getIndex(e[r],i)).pop(),(s=this.getUlByNavIdx(o.length))&&(t?bt.isDevice&&!s.classList.contains("e-contextmenu")?s.children[n+1].classList.add(tu):s.children[n].classList.add(tu):bt.isDevice&&!s.classList.contains("e-contextmenu")?s.children[n+1].classList.remove(tu):s.children[n].classList.remove(tu))},t.prototype.removeItems=function(e,t){for(var i,s,n,o=0;o<e.length;o++)i=(s=this.getIndex(e[o],t)).pop(),n=this.getItems(s),this.removeItem(n,s,i)},t.prototype.insertAfter=function(e,t,i){this.insertItems(e,t,i)},t.prototype.insertBefore=function(e,t,i){this.insertItems(e,t,i,!1)},t.prototype.insertItems=function(e,t,i,s){var n,o,r,a,l;void 0===s&&(s=!0);for(var h=0;h<e.length;h++){o=(r=this.getIndex(t,i)).pop(),a=this.getItems(r),l=new nu(a[0],"items",e[h],!0),a.splice(s?o+1:o,0,l);var c=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(r.length<c.length){o=s?o+1:o,this.hasField(a,this.getField("iconCss",r.length-1)),n=this.createItems(a).children[o];var p=this.isMenu?Ii(".e-menu-parent",c[r.length]):c[r.length];p.insertBefore(n,p.children[o])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach(function(t){e.element.style.removeProperty(t)}),["role","tabindex","class","style"].forEach(function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")})},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),ye()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)bi([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),ye()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",Ei([].slice.call(this.clonedElement.children),this.element),Ti(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(Ti(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):Ti(t),e.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}},Zd([cs()],t.prototype,"beforeItemRender",void 0),Zd([cs()],t.prototype,"beforeOpen",void 0),Zd([cs()],t.prototype,"onOpen",void 0),Zd([cs()],t.prototype,"beforeClose",void 0),Zd([cs()],t.prototype,"onClose",void 0),Zd([cs()],t.prototype,"select",void 0),Zd([cs()],t.prototype,"created",void 0),Zd([os("")],t.prototype,"cssClass",void 0),Zd([os(!1)],t.prototype,"showItemOnClick",void 0),Zd([os("")],t.prototype,"target",void 0),Zd([os("")],t.prototype,"filter",void 0),Zd([os(null)],t.prototype,"template",void 0),Zd([os(!1)],t.prototype,"enableScrolling",void 0),Zd([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Zd([rs({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},su)],t.prototype,"fields",void 0),Zd([ls([],nu)],t.prototype,"items",void 0),Zd([rs({duration:400,easing:"ease",effect:"SlideDown"},ou)],t.prototype,"animationSettings",void 0),t=Zd([ps],t)}(Ns),au=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),lu=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},hu=function(e){function t(t,i){return e.call(this,t,i)||this}return au(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||he("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),Di(this.element,{role:"context menu",tabindex:"0"}),this.element.style.zIndex=co(this.element).toString()},t.prototype.open=function(t,i,s){e.prototype.openMenu.call(this,null,null,t,i,null,s)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,i){e.prototype.onPropertyChanged.call(this,t,i);for(var s=0,n=Object.keys(t);s<n.length;s++){switch(n[s]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},t.prototype.getModuleName=function(){return"contextmenu"},lu([os("")],t.prototype,"target",void 0),lu([os("")],t.prototype,"filter",void 0),lu([ls([],nu)],t.prototype,"items",void 0),t=lu([ps],t)}(ru),cu={},pu={},du={},uu={};Object(Y.copy)(cu,P),Object(Y.copy)(pu,s),Object(Y.copy)(du,k),Object(Y.copy)(uu,o),Object(Y.copy)(cu,O),Object(Y.copy)(cu,A),Object(Y.copy)(cu,M);var mu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),fu=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},gu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),fu([os("")],t.prototype,"id",void 0),fu([os("")],t.prototype,"cssClass",void 0),fu([os("")],t.prototype,"header",void 0),fu([os("")],t.prototype,"content",void 0),fu([os(!0)],t.prototype,"enabled",void 0),fu([os(0)],t.prototype,"row",void 0),fu([os(0)],t.prototype,"col",void 0),fu([os(1)],t.prototype,"sizeX",void 0),fu([os(1)],t.prototype,"sizeY",void 0),fu([os(1)],t.prototype,"minSizeY",void 0),fu([os(1)],t.prototype,"minSizeX",void 0),fu([os(null)],t.prototype,"maxSizeY",void 0),fu([os(null)],t.prototype,"maxSizeX",void 0),fu([os(1e3)],t.prototype,"zIndex",void 0),t}(Ls),vu=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.rows=1,s.panelID=0,s.movePanelCalled=!1,s.resizeCalled=!1,s.mOffX=0,s.mOffY=0,s.maxTop=9999,s.maxRows=100,s.mouseX=0,s.mouseY=0,s.minTop=0,s.minLeft=0,s.isBlazor=!1,s.isInlineRendering=!1,s.removeAllCalled=!1,s.isPanelRemoved=!1,s.panelsSizeY=0,s.resizeHeight=!1,te("mergePersistData",s.mergePersistPanelData,s),s}return mu(t,e),t.prototype.preRender=function(){this.isBlazor=ye()&&this.isServerRendered,this.panelCollection=[],this.sortedArray=[],this.gridPanelCollection=[],this.overlapElement=[],this.overlapElementClone=[],this.overlapSubElementClone=[],this.collisionChecker={},this.dragCollection=[],this.elementRef={top:"",left:"",height:"",width:""},this.dimensions=[],this.allItems=[],this.oldRowCol={},this.availableClasses=[],this.setOldRowCol(),this.calculateCellSize(),this.contentTemplateChild=[].slice.call(this.element.children)},t.prototype.setOldRowCol=function(){for(var e=0;e<this.panels.length;e++)this.panels[e].id||(this.panelPropertyChange(this.panels[e],{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1),this.oldRowCol[this.panels[e].id]={row:this.panels[e].row,col:this.panels[e].col}},t.prototype.createPanelElement=function(e,t){var i=this.createElement("div");return e&&e.length>0&&bi([i],e),t&&i.setAttribute("id",t),i},t.prototype.render=function(){this.initialize(),this.isRenderComplete=!0,this.showGridLines&&!this.checkMediaQuery()&&this.initGridLines(),this.updateDragArea(),this.renderComplete(),this.updateServerPanelData(),this.renderReactTemplates()},t.prototype.updateServerPanelData=function(){ye()&&this.isServerRendered&&(this.setProperties({panels:this.panels},!0),this.allowServerDataBinding=!0,this.serverDataBind())},t.prototype.initGridLines=function(){this.table=document.createElement("table");var e=document.createElement("tbody");this.table.classList.add("e-dashboard-gridline-table");for(var t=0;t<this.maxRow();t++){for(var i=document.createElement("tr"),s=0;s<this.columns;s++){var n=document.createElement("td");n.classList.add("e-dashboard-gridline"),this.setAttributes({value:{row:t.toString(),col:s.toString(),sizeX:"1",sizeY:"1"}},n),n.setAttribute("id",""+s),this.setPanelPosition(n,t,s),this.setHeightAndWidth(n,{row:t,col:s,sizeX:1,sizeY:1}),i.appendChild(n)}e.appendChild(i)}this.table.appendChild(e),this.element.appendChild(this.table),this.renderReactTemplates()},t.prototype.initialize=function(){if(this.updateRowHeight(),this.element.childElementCount>0&&this.element.querySelectorAll(".e-panel").length>0&&!(this.isBlazor&&this.panels.length>0)){var e=[];this.setProperties({panels:[]},!0),this.isInlineRendering=!0;for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)e.push(this.element.querySelectorAll(".e-panel")[t]);for(t=0;t<e.length;t++){var i=e[t];this.enableRtl&&bi([i],"e-rtl"),this.getInlinePanels(i),this.maxCol(),this.maxRow()}for(t=0;t<this.panels.length;t++){i=this.element.querySelector("#"+this.panels[t].id);if(this.setMinMaxValues(this.panels[t]),this.maxColumnValue<this.panels[t].col||this.maxColumnValue<this.panels[t].col+this.panels[t].sizeX){var s=this.maxColumnValue-this.panels[t].sizeX;this.panelPropertyChange(this.panels[t],{col:s<0?0:s})}this.setXYAttributes(i,this.panels[t]),this.isBlazor=!1;var n=this.renderPanels(i,this.panels[t],this.panels[t].id,!1);this.isBlazor=ye()&&this.isServerRendered,this.panelCollection.push(n),this.setHeightAndWidth(i,this.panels[t]),this.tempObject=this,this.mediaQuery&&!window.matchMedia("("+this.mediaQuery+")").matches&&(this.setPanelPosition(i,this.panels[t].row,this.panels[t].col),this.mainElement=i,this.updatePanelLayout(i,this.panels[t]),this.mainElement=null),this.setClasses([i])}this.updateOldRowColumn(),this.checkMediaQuery()&&this.checkMediaQuerySizing()}else this.renderDashBoardCells(this.panels);!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelCollection),this.sortedPanel(),this.bindEvents(),this.updatePanels(),this.updateCloneArrayObject(),this.checkColumnValue=this.maxColumnValue,this.checkMediaQuery()||this.panelResponsiveUpdate(),this.isBlazor||this.setEnableRtl()},t.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},t.prototype.calculateCellSize=function(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.maxCol()-1)*this.cellSpacing[0])/this.maxCol(),this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},t.prototype.maxRow=function(e){var t=1;if(this.rows>1&&ae(e))return t=this.rows;for(var i=0;i<this.panels.length;i++)this.panels[i].sizeY+this.panels[i].row>t&&(t=this.panels[i].sizeY+this.panels[i].row);return 0===this.panels.length&&(t=this.columns),t},t.prototype.maxCol=function(){var e;return e=this.columns,this.maxColumnValue=e,e},t.prototype.updateOldRowColumn=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e].id;if(document.getElementById(t)){var i=parseInt(document.getElementById(t).getAttribute("data-row"),10),s=parseInt(document.getElementById(t).getAttribute("data-col"),10);this.oldRowCol[this.panels[e].id]={row:i,col:s}}}},t.prototype.createSubElement=function(e,t,i){var s=this.createElement("div");return i&&bi([s],[i]),e&&e.length>0&&bi([s],e),t&&s.setAttribute("id",t),s},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return Xt(document.querySelector(e).innerHTML.trim())}catch(i){var t=ln.sanitize(e);return Xt(this.enableHtmlSanitizer&&"string"==typeof e?t:e)}},t.prototype.renderTemplate=function(e,t,i,s,n){var o=this.templateParser(e),r=[];if("."!==e[0]&&"#"!==e[0]||"SCRIPT"===document.querySelector(e).tagName){var a=o({},this,n,i,s,null,t);if(a){for(var l=0,h=a;l<h.length;l++){var c=h[l];r.push(c)}Ei([].slice.call(r),t)}}else{var p=document.querySelector(e);if(!ae(p))return"none"===p.style.display&&p.style.removeProperty("display"),""===p.getAttribute("style")&&p.removeAttribute("style"),void t.appendChild(p);e=e.trim()}},t.prototype.renderPanels=function(e,t,i,s){this.isBlazor||bi([e],["e-panel","e-panel-transition"]);var n=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=e.querySelector(".e-panel-container")?e.querySelector(".e-panel-container"):this.createSubElement(n,e.id+"_content","e-panel-container"),this.isBlazor||(e.appendChild(this.panelContent),t.enabled||this.disablePanel(e)),t.header){var o=e.querySelector(".e-panel-header")?e.querySelector(".e-panel-header"):this.createSubElement([],e.id+"template","");if(this.isBlazor||bi([o],["e-panel-header"]),!e.querySelector(".e-panel-header")&&!this.isBlazor){var r=this.element.id+"HeaderTemplate"+i;this.renderTemplate(t.header,o,r,s,"header"),this.panelContent.appendChild(o),this.renderReactTemplates(),Kt(r,"HeaderTemplate",t)}}if(t.content){var a=t.cssClass?t.cssClass.split(" "):null;this.panelBody=e.querySelector(".e-panel-content")?e.querySelector(".e-panel-content"):this.createSubElement(a,e.id+"_body","e-panel-content");var l="calc( 100% - "+(this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px")+")";if(Ri(this.panelBody,{height:l}),!e.querySelector(".e-panel-content")&&!this.isBlazor){r=this.element.id+"ContentTemplate"+i;this.renderTemplate(t.content,this.panelBody,r,s,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates(),Kt(r,"ContentTemplate",t)}}return e},t.prototype.disablePanel=function(e){bi([e],["e-disabled"])},t.prototype.getInlinePanels=function(e){var t={sizeX:e.hasAttribute("data-sizex")?parseInt(e.getAttribute("data-sizex"),10):1,sizeY:e.hasAttribute("data-sizey")?parseInt(e.getAttribute("data-sizey"),10):1,minSizeX:e.hasAttribute("data-minsizex")?parseInt(e.getAttribute("data-minsizex"),10):1,minSizeY:e.hasAttribute("data-minsizey")?parseInt(e.getAttribute("data-minsizey"),10):1,maxSizeX:e.hasAttribute("data-maxsizex")?parseInt(e.getAttribute("data-maxsizex"),10):null,maxSizeY:e.hasAttribute("data-maxsizey")?parseInt(e.getAttribute("data-maxsizey"),10):null,row:e.hasAttribute("data-row")?parseInt(e.getAttribute("data-row"),10):0,col:e.hasAttribute("data-col")?parseInt(e.getAttribute("data-col"),10):0,id:e.getAttribute("id"),zIndex:e.hasAttribute("data-zindex")?parseInt(e.getAttribute("data-zIndex"),10):1e3,header:e.querySelector(".e-panel-header")&&".e-panel-header",content:e.querySelector(".e-panel-content")&&".e-panel-content"};t.id||(t.id="layout_"+this.panelID.toString(),e.setAttribute("id",t.id),this.panelID=this.panelID+1),le(t.enabled)&&(t.enabled=!0),e.style.zIndex=""+t.zIndex;var i=new gu(this,"panels",t,!0);this.panels.push(i)},t.prototype.resizeEvents=function(){if(this.allowResizing)for(var e=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize"),t=0;t<e.length;t++){var i="msie"===bt.info.name?"mousedown pointerdown":"mousedown";Ct.add(e[t],i,this.downResizeHandler,this),"msie"!==bt.info.name&&Ct.add(e[t],"touchstart",this.touchDownResizeHandler,this)}},t.prototype.bindEvents=function(){window.addEventListener("resize",this.refresh.bind(this)),this.resizeEvents()},t.prototype.downResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;var t="msie"===bt.info.name?"mousemove pointermove":"mousemove",i="msie"===bt.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(Ct.add(document,t,this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(Ct.add(document,i,this.upResizeHandler,this),this.isMouseUpBound=!0)},t.prototype.downHandler=function(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);var t=Mi(e.currentTarget,".e-panel"),i={event:e,element:t,isInteracted:!0};this.trigger("resizeStart",i),this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),bi([this.element],["e-prevent"]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row},t.prototype.touchDownResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(Ct.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(Ct.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},t.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},t.prototype.updateMaxTopLeft=function(e){this.moveTarget=this.downTarget;var t={event:e,element:Mi(this.moveTarget,".e-panel"),isInteracted:!0};this.trigger("resize",t)},t.prototype.updateResizeElement=function(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,Ci([e],"e-panel-transition"),bi([e],["e-dragging"]);for(var t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],i=0;i<this.moveTarget.classList.length;i++)-1!==t.indexOf(this.moveTarget.classList[i])&&(this.handleClass=this.moveTarget.classList[i])},t.prototype.moveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=Mi(this.moveTarget,".e-panel");if(this.lastMouseX!==e.pageX&&this.lastMouseY!==e.pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;var s=this.mouseY-this.lastMouseY+this.mOffY,n=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,n,s)}},t.prototype.touchMoveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=Mi(this.moveTarget,".e-panel");if(this.lastMouseX!==e.changedTouches[0].pageX&&this.lastMouseY!==e.changedTouches[0].pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;var s=this.mouseX-this.lastMouseX+this.mOffX,n=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,s,n)}},t.prototype.resizingPanel=function(e,t,i,s){var n=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY,r=s,a=i;this.handleClass.indexOf("north")>=0&&(this.elementHeight-r<this.getMinHeight(t)?(s=this.elementHeight-this.getMinHeight(t),this.mOffY=r-s):t.maxSizeY&&this.elementHeight-r>this.getMaxHeight(t)?(s=this.elementHeight-this.getMaxHeight(t),this.mOffY=r-s):this.elementY+r<this.minTop&&(s=this.minTop-this.elementY,this.mOffY=r-s),this.elementY+=s,this.elementHeight-=s),this.handleClass.indexOf("south")>=0&&(this.elementHeight+r<this.getMinHeight(t)?(s=this.getMinHeight(t)-this.elementHeight,this.mOffY=r-s):t.maxSizeY&&this.elementHeight+r>this.getMaxHeight(t)&&(s=this.getMaxHeight(t)-this.elementHeight,this.mOffY=r-s),this.elementHeight+=s),this.handleClass.indexOf("west")>=0&&(this.elementWidth-a<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=a-i):t.maxSizeX&&this.elementWidth-a>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=a-i):this.elementX+a<this.minLeft&&(i=this.minLeft-this.elementX,this.mOffX=a-i),this.elementX+=i,this.elementWidth-=i),this.handleClass.indexOf("east")>=0&&(this.elementWidth+a<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=a-i):t.maxSizeX&&this.elementWidth+a>this.getMaxWidth(t)?(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=a-i):this.elementX+this.elementWidth+a>this.maxLeft&&(i=this.maxLeft-this.elementX-this.elementWidth,this.mOffX=a-i),this.elementWidth+=i),e.style.top=this.elementY+"px",e.style.left=this.elementX+"px",e.style.width=this.elementWidth+"px",e.style.height=this.elementHeight+"px";var l=this.getResizeRowColumn(t,this.moveTarget);if(l.col+l.sizeX>this.columns&&this.panelPropertyChange(l,{sizeX:l.sizeX-1}),this.shadowEle.style.top=l.row*this.getCellSize()[1]+l.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=l.col*this.getCellSize()[0]+l.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=l.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=l.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",n!==l.sizeX||o!==l.sizeY){n=l.sizeX,o=l.sizeY;var h=this.getCellInstance(e.id),c={attributes:{row:h.row.toString(),col:h.col.toString(),sizeX:h.sizeX.toString(),sizeY:h.sizeY.toString()}};this.setAttributes(c,e),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}},t.prototype.upResizeHandler=function(e){if(!ae(this.downTarget)){this.updateServerPanelData(),this.upTarget=this.downTarget;var t=Mi(this.upTarget,".e-panel"),i={event:e,element:t,isInteracted:!0};if(t){bi([t],"e-panel-transition");var s="msie"===bt.info.name?"mousemove pointermove":"mousemove",n="msie"===bt.info.name?"mouseup pointerup":"mouseup";Ct.remove(document,s,this.moveResizeHandler),Ct.remove(document,n,this.upResizeHandler),"msie"!==bt.info.name&&(Ct.remove(document,"touchmove",this.touchMoveResizeHandler),Ct.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&Ti(this.shadowEle),this.shadowEle=null;var o=this.getCellInstance(t.getAttribute("id"));this.setPanelPosition(t,o.row,o.col),this.setHeightAndWidth(t,o)}Ci([t],["e-dragging"]),this.trigger("resizeStop",i),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0)}},t.prototype.getResizeRowColumn=function(e,t){var i=!1,s=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(s=this.pixelsToColumns(this.elementX,!1));var n=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(n=this.pixelsToRows(this.elementY,!1),this.previousRow!==n&&(this.previousRow=n,i=!0));var o=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(o=this.pixelsToColumns(this.elementWidth-o*this.cellSpacing[1],!0));var r=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||i)&&(r=this.pixelsToRows(this.elementHeight-r*this.cellSpacing[0],!0)),e.col+e.sizeX>this.columns&&(e.sizeX=e.sizeX-1),(n>-1&&s>-1&&o+s<=this.maxCol()&&r+n<=this.maxRow()&&0===this.collisions(n,s,o,r,this.getPanelBase(e.id)).length||!1!==this.allowPushing)&&this.panelPropertyChange(e,{row:n,col:s,sizeX:o,sizeY:r}),e},t.prototype.pixelsToColumns=function(e,t){var i=this.cellSize[0];return t?Math.ceil(e/i):Math.floor(e/i)},t.prototype.pixelsToRows=function(e,t){return t?Math.round(e/this.cellSize[1]):Math.round(e/(this.cellSize[1]+this.cellSpacing[0]))},t.prototype.getMinWidth=function(e){return e.minSizeX*this.getCellSize()[0]},t.prototype.getMaxWidth=function(e){return e.maxSizeX*this.getCellSize()[0]},t.prototype.getMinHeight=function(e){return e.minSizeY*this.getCellSize()[1]},t.prototype.getMaxHeight=function(e){return e.maxSizeY*this.getCellSize()[1]},t.prototype.sortedPanel=function(){this.sortedArray=[];for(var e=0,t=this.panelCollection.length;e<t;++e)this.sortItem(this.panelCollection[e])},t.prototype.moveItemsUpwards=function(){if(!1!==this.allowFloating){for(var e=0,t=this.sortedArray.length;e<t;++e){var i=this.sortedArray[e];if(i)for(var s=0,n=i.length;s<n;++s){var o=i[s];o&&this.moveItemUpwards(o)}}this.updateGridLines()}},t.prototype.moveItemUpwards=function(e){if(!1!==this.allowFloating&&e!==this.mainElement){for(var t=this.getCellInstance(e.id).col,i=parseInt(e.getAttribute("data-sizeY"),10),s=parseInt(e.getAttribute("data-sizeX"),10),n=null,o=null,r=parseInt(e.getAttribute("data-row"),10)-1;r>-1;){if(0!==this.collisions(r,t,s,i,e).length)break;n=r,o=t,--r}null!==n&&this.sortItem(e,n,o)}},t.prototype.sortItem=function(e,t,i,s){this.overlapElement=[];var n=parseInt(e.getAttribute("data-col"),10),o=parseInt(e.getAttribute("data-row"),10);if(this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][n]=e,void 0!==e&&void 0!==t&&void 0!==i){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&void 0!==this.oldRowCol[e.id].col){var r=this.sortedArray[this.oldRowCol[e.id].row];this.oldRowCol[e.id]&&r[this.oldRowCol[e.id].col]===e&&(delete r[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=i,this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][n]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e),this.panelPropertyChange(this.getCellInstance(e.id),{row:t,col:i});var a=this.getCellInstance(e.id);this.setAttributes({value:{col:a.col.toString(),row:a.row.toString()}},e),this.updateLayout(e,this.getCellInstance(e.id))}},t.prototype.updateLayout=function(e,t){this.setPanelPosition(e,t.row,t.col),this.setHeightAndWidth(e,t),this.updateRowHeight(),this.sortedPanel()},t.prototype.refresh=function(){if(this.panelsSizeY=0,this.updateDragArea(),this.checkMediaQuery())this.checkMediaQuerySizing();else{if(this.element.classList.contains("e-responsive")){Ci([this.element],["e-responsive"]);for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id),s=parseInt(t.getAttribute("data-row"),10),n=parseInt(t.getAttribute("data-col"),10);this.panelPropertyChange(i,{row:s,col:n}),this.setHeightAndWidth(t,this.getCellInstance(t.id)),this.setPanelPosition(t,s,n),this.updateRowHeight()}}this.panelResponsiveUpdate(),this.updateGridLines()}this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),this.resizeEvents(),this.checkDragging(this.dragCollection)},t.prototype.updateGridLines=function(){this.element.querySelector(".e-dashboard-gridline-table")&&(this.table&&Ti(this.table),this.initGridLines())},t.prototype.checkDragging=function(e){if(this.checkMediaQuery()||!this.allowDragging)for(var t=0;t<e.length;t++)e[t].destroy();else{for(t=0;t<e.length;t++)e[t].destroy();this.enableDraggingContent(this.panelCollection)}},t.prototype.sortPanels=function(){for(var e=[],t=function(t){for(var s=function(s){i.panels.filter(function(i){i.row===t&&i.col===s&&e.push(i)})},n=0;n<i.columns;n++)s(n)},i=this,s=0;s<=this.rows;s++)t(s);return e},t.prototype.checkMediaQuerySizing=function(){var e;bi([this.element],["e-responsive"]),e=this.isPanelRemoved&&this.panels?this.panels:this.sortPanels(),this.updatedRows=e.length;for(var t=0;t<e.length;t++){var i=document.getElementById(e[t].id),s=void 0;if(i){if(Ri(i,{width:"100%"}),i.style.height=" "+(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+"px",e[t].sizeY>1&&(s=(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+parseInt((Math.round(e[t].sizeY/2)*this.cellSpacing[1]).toString(),0),i.style.height=s+"px"),this.resizeHeight=!0,this.addPanelCalled&&this.isBlazor){var n=this.getActualProperties(e[t]);n.row=t,n.col=0,this.panelPropertyChange(e[t],n),this.setPanelPosition(i,t,0)}else this.panelPropertyChange(e[t],{row:t,col:0}),this.setPanelPosition(i,e[t].row,e[t].col),this.panelsSizeY=this.panelsSizeY+e[t].sizeY;this.setClasses(this.panelCollection),this.checkDragging(this.dragCollection),this.removeResizeClasses(this.panelCollection)}}this.updateRowHeight()},t.prototype.panelResponsiveUpdate=function(){this.element.classList.add("e-responsive"),this.calculateCellSize();for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id);this.setHeightAndWidth(t,i)}for(e=0;e<this.panels.length;e++)this.setPanelPosition(document.getElementById(this.panels[e].id),this.panels[e].row,this.panels[e].col);this.updateRowHeight()},t.prototype.updateRowHeight=function(){this.getRowColumn(),this.setHeightWidth()},t.prototype.setHeightWidth=function(){var e,t;e=this.checkMediaQuery()?this.maxRow()*(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px":this.maxRow()*(this.cellSize[0]/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px",Ri(this.element,{height:e}),t=window.getComputedStyle(this.element).width,Ri(this.element,{width:t})},t.prototype.setHeightAndWidth=function(e,t){Ri(e,{height:ge(this.setXYDimensions(t)[0])}),Ri(e,{width:ge(this.setXYDimensions(t)[1])})},t.prototype.renderCell=function(e,t,i){var s;this.dimensions=this.setXYDimensions(e),le(e.enabled)&&(e.enabled=!0),this.isBlazor?s=document.getElementById(e.id):(this.contentTemplateChild.length>0&&!ae(i)?(s=this.contentTemplateChild[i],e.cssClass&&bi([s],[e.cssClass]),e.id&&s.setAttribute("id",e.id)):s=this.createPanelElement(e.cssClass?e.cssClass.split(" "):null,e.id),s.style.zIndex=""+e.zIndex,this.element.appendChild(s),this.renderReactTemplates());var n=this.renderPanels(s,e,e.id,t);if(this.panelCollection.push(n),this.isBlazor){var o=s.querySelector(".e-panel-content");if(o)Ri(o,{height:"calc( 100% - "+(s.querySelector(".e-panel-header")?window.getComputedStyle(s.querySelector(".e-panel-header")).height:"0px")+")"})}else this.setXYAttributes(s,e);return this.setHeightAndWidth(s,e),s},t.prototype.setPanelPosition=function(e,t,i){if(e){this.checkMediaQuery()&&this.calculateCellSize();var s=this.getCellSize()[1],n=this.getCellSize()[0],o=0===i?0:i*(n+this.cellSpacing[0]),r=0===t?0:t*(s+this.cellSpacing[1]);this.checkMediaQuery()&&(r=0===t?0:this.panelsSizeY*(s+this.cellSpacing[1])),Ri(e,{left:o+"px",top:r+"px"})}},t.prototype.getRowColumn=function(){if(this.rows=null,this.element.querySelectorAll(".e-panel").length>0&&!this.updatedRows)for(var e=this.element.querySelectorAll(".e-panel"),t=0;t<e.length;t++){var i=e[t],s=parseInt(i.getAttribute("data-row"),10),n=parseInt(i.getAttribute("data-sizeY"),10);this.rows=Math.max(this.rows,s+n)}else{this.updatedRows&&(this.rows=this.updatedRows,this.updatedRows=null);for(t=0;t<this.panels.length;t++)this.rows=Math.max(this.rows,this.panels[t].row)}},t.prototype.setMinMaxValues=function(e){!e.sizeX||e.sizeX<e.minSizeX?this.panelPropertyChange(e,{sizeX:e.minSizeX}):e.maxSizeX&&e.sizeX>e.maxSizeX?this.panelPropertyChange(e,{sizeX:e.maxSizeX}):e.sizeX>this.columns?this.panelPropertyChange(e,{sizeX:this.columns}):this.panelPropertyChange(e,{sizeX:e.sizeX}),!e.sizeY||e.sizeY<e.minSizeY?this.panelPropertyChange(e,{sizeY:e.minSizeY}):e.maxSizeY&&e.sizeY>e.maxSizeY?this.panelPropertyChange(e,{sizeY:e.maxSizeY}):this.panelPropertyChange(e,{sizeY:e.sizeY})},t.prototype.checkMinMaxValues=function(e){e.col+e.sizeX>this.columns&&this.panelPropertyChange(e,{sizeX:e.sizeX+(this.columns-(e.col+e.sizeX))})},t.prototype.panelPropertyChange=function(e,t){this.allowServerDataBinding=!1,e.setProperties(t,!0)},t.prototype.renderDashBoardCells=function(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0)for(var t=0;t<e.length;t++){this.gridPanelCollection.push(e[t]),this.isBlazor&&this.panels.length>0||this.setMinMaxValues(e[t]),(this.maxColumnValue<e[t].col||this.maxColumnValue<e[t].col+e[t].sizeX)&&this.panelPropertyChange(e[t],{col:this.maxColumnValue-e[t].sizeX});var i=this.renderCell(e[t],!1,t);this.isBlazor||(this.enableRtl&&bi([i],"e-rtl"),this.element.appendChild(i),this.renderReactTemplates()),this.checkMediaQuery()&&t===e.length-1?this.checkMediaQuerySizing():(this.setPanelPosition(i,e[t].row,e[t].col),this.mainElement=i,this.updatePanelLayout(i,e[t]),this.mainElement=null)}this.setClasses(this.panelCollection)},t.prototype.collisions=function(e,t,i,s,n){var o,r=[];i&&s||(i=s=1),!n||n instanceof Array||(n=[n]);for(var a=0;a<s;++a)for(var l=0;l<i;++l)!(o=this.getPanel(e+a,t+l,n))||n&&-1!==n.indexOf(document.getElementById(o.id))||-1!==r.indexOf(document.getElementById(o.id))||r.push(document.getElementById(o.id));return r},t.prototype.rightWardsSpaceChecking=function(e,t,i){var s=this,n=[],o=[];if(e.forEach(function(e){var i=parseInt(e.getAttribute("data-col"),10),o=parseInt(e.getAttribute("data-sizeX"),10);if(t<s.columns&&i>=t)if(o>1)for(var r=i;r<i+o;r++)n.push(r);else n.push(i)}),n.length>0)for(var r=t+1;r<=this.columns-1;r++)-1===n.indexOf(r)&&r!==t&&-1===o.indexOf(r)&&o.push(r);var a=this.getOccupiedColumns(i,"right");return a.forEach(function(e){e>t&&-1!==o.indexOf(e)&&o.splice(o.indexOf(e),1)}),this.getOccupiedColumns(this.checkingElement,"left").forEach(function(e){e>parseInt(i.getAttribute("data-col"),10)&&-1===a.indexOf(e)&&-1===o.indexOf(e)&&o.push(e)}),o=o.sort(function(e,t){return e-t})},t.prototype.getOccupiedColumns=function(e,t){for(var i=[],s=parseInt(e.getAttribute("data-sizeX"),10),n=parseInt(e.getAttribute("data-col"),10),o=n;o<n+s&&o<=this.columns;o++)i.push(o);return i},t.prototype.leftWardsSpaceChecking=function(e,t,i){var s=this,n=[],o=[];if(e.forEach(function(e){var i=parseInt(e.getAttribute("data-col"),10),n=parseInt(e.getAttribute("data-sizeX"),10);if(t<=s.columns&&i<=t)if(n>1)for(var r=i;r<i+n;r++)o.push(r);else o.push(i)}),o.length>0)for(var r=0;r<=t;r++)-1===o.indexOf(r)&&r!==t&&-1===n.indexOf(r)&&n.push(r);var a=this.getOccupiedColumns(i,"left");return a.forEach(function(e){e<t&&-1!==n.indexOf(e)&&n.splice(n.indexOf(e),1)}),this.getOccupiedColumns(this.checkingElement,"left").forEach(function(e){e<parseInt(i.getAttribute("data-col"),10)&&-1===a.indexOf(e)&&-1===n.indexOf(e)&&n.push(e)}),n=(n=n.sort(function(e,t){return e-t})).reverse()},t.prototype.adjustmentAvailable=function(e,t,i,s,n){this.leftAdjustable=void 0,this.rightAdjustable=void 0;var o,r,a=!1,l=[];this.topAdjustable=void 0;var h=parseInt(n.getAttribute("data-sizeX"),10),c=parseInt(n.getAttribute("data-col"),10);if(-1===(l=this.getRowElements(this.collisions(e,0,this.columns,i,[]))).indexOf(n)&&l.push(n),(o=this.leftWardsSpaceChecking(l,t,n)).length>0?(this.leftAdjustable=this.isLeftAdjustable(o,n,e,t,s,i),this.spacedColumnValue!==c-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,r=this.rightWardsSpaceChecking(l,t,n),this.rightAdjustable=r.length>0&&this.isRightAdjustable(r,n,e,t,s,i),this.spacedColumnValue!==h+c&&(this.rightAdjustable=!1),this.rightAdjustable||(this.rightAdjustable=!1))):(r=this.rightWardsSpaceChecking(l,t,n),this.rightAdjustable=r.length>0&&this.isRightAdjustable(r,n,e,t,s,i),this.spacedColumnValue!==h+c&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){var p=this.getCellInstance(n.id).row,d=!1;this.startRow!==p&&(d=!0);for(var u=e;u>=0;u--){var m=this.getCellInstance(n.id).sizeY>1&&d?this.checkingElement:n;u!==p&&u===p-i&&0===this.collisions(u,t,s,i,m).length&&(d=!1,this.topAdjustable=!0,this.spacedRowValue=ae(this.spacedRowValue)?u:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(a=!0,ae(this.spacedRowValue)&&(this.spacedRowValue=e)),a},t.prototype.isXSpacingAvailable=function(e,t){for(var i=!1,s=[],n=0;n<e.length;n++)if(e[n+1]-e[n]==1||e[n+1]-e[n]==-1){if(s.push(e[n]),2===t&&s.push(e[n+1]),n===e.length-2&&(s.push(e[n+1]),s.length>t&&s.splice(-1)),s.length===t)return i=!0,this.spacedColumnValue=s.sort(function(e,t){return e-t})[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),i}else s=[];return i},t.prototype.getRowElements=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},t.prototype.isLeftAdjustable=function(e,t,i,s,n,o){var r;if(1===n&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(n>1&&1===o)r=this.isXSpacingAvailable(e,n);else if(o>1)if(1===n){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){if(0===this.collisions(i,e[l],n,o,this.checkingElement).length)return this.spacedColumnValue=e[l],r=!0;r=!1}}else r=this.replacable(e,n,i,o,t);return r},t.prototype.isRightAdjustable=function(e,t,i,s,n,o){var r;if(1===n&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(n>1&&1===o)r=this.isXSpacingAvailable(e,n);else if(o>1)if(1===n){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){for(var h=this.collisions(i,e[l],n,o,this.checkingElement),c=0;c<h.length;c++)parseInt(t.getAttribute("data-col"),10)!==e[l]&&h.splice(h.indexOf(h[c]),1);if(0===h.length)return r=!0,this.spacedColumnValue=e[l],r;r=!1}}else r=this.replacable(e,n,i,o,t);return r},t.prototype.replacable=function(e,t,i,s,n){for(var o,r=[],a=0;a<e.length;a++){if(this.isXSpacingAvailable(e,t)){var l=[];if(l.push(this.checkingElement),l.push(n),0===r.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}}return o},t.prototype.sortCollisionItems=function(e){for(var t,i=[],s=function(s){t=[],e.forEach(function(e){e&&e.getAttribute("data-row")===s.toString()&&t.push(e)});for(var o=function(e){t.forEach(function(t){t&&t.getAttribute("data-col")===e.toString()&&i.push(t)})},r=n.columns-1;r>=0;r--)o(r)},n=this,o=this.rows-1;o>=0;o--)s(o);return i},t.prototype.updatedModels=function(e,t,i){var s=this,n=[];return this.mainElement||this.sortedPanel(),e.forEach(function(o){s.checkingElement=o;var r=s.getCellInstance(o.id),a=!s.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,i);if(r.sizeX>1&&a)for(var l=r.row;l<t.row+t.sizeY;l++){s.collisions(l,r.col,r.sizeX,r.sizeY,o).forEach(function(t){e.indexOf(t)>=0&&-1===n.indexOf(t)&&n.push(t)})}}),n.forEach(function(t){n.indexOf(t)>=0&&e.splice(e.indexOf(t),1)}),e},t.prototype.resetLayout=function(e,t){var i=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return i;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(var s=0;s<this.panels.length;s++){var n=document.getElementById(this.panels[s].id);if(n!==this.mainElement){var o=this.cloneObject[n.id].row,r=this.cloneObject[n.id].col;this.setPanelPosition(n,o,r),this.panelPropertyChange(this.getCellInstance(n.id),{row:o,col:r}),this.setAttributes({value:{col:r.toString(),row:o.toString()}},n),this.updateOldRowColumn()}}return this.sortedArray=this.cloneArray,i=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===i.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&i.push(this.checkCollision[0]),i},t.prototype.swapAvailability=function(e,t){for(var i=!0,s=this.getCellInstance(t.id),n=0;n<e.length;n++)for(var o=this.getCellInstance(e[n].id),r=1;r<s.sizeY;r++){var a=[];a.push(t),a.push(e[n]);if(this.collisions(s.row+r,o.col,o.sizeX,o.sizeY,a).length>0)return i=!1,!1}return i},t.prototype.checkForSwapping=function(e,t,i){if(!this.mainElement||0===e.length)return!1;var s,n=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<n?s=1:this.startRow>n&&(s=0),!this.swapAvailability(e,t))return!1;for(var o=!1,r=0;r<e.length;r++)if(e.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(var a=0===s?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,l=0;l<e.length;l++){var h=this.getCellInstance(e[l].id),c=this.getCellInstance(t.id),p=[];if(1===h.sizeY&&-1===p.indexOf(e[l]))p.push(e[l]);else if(h.sizeY>1&&-1===p.indexOf(e[l]))if(1===s&&c.row===this.cloneObject[h.id].row+h.sizeY-1)p.push(e[l]);else{if(0!==s||c.row!==this.cloneObject[h.id].row)return!1;p.push(e[l])}h.sizeY<=c.sizeY&&-1===p.indexOf(e[l])&&p.push(e[l]);if(p.push(this.mainElement),this.collisions(a,h.col,h.sizeX,h.sizeY,p).length>0)return o=!1;l===e.length-1&&(o=!0)}return o},t.prototype.swapItems=function(e,t,i){var s,n=this,o=[];o.push(t);var r=parseInt(e[0].getAttribute("data-row"),10);this.startRow<r?s=1:this.startRow>r&&(s=0);var a=0===s?r+i.sizeY:this.startRow;if(!this.movePanelCalled){var l=this.getCellInstance(e[0].id);this.panelPropertyChange(i,{row:0===s?r:a+l.sizeY})}for(var h=0;h<e.length;h++)o.push(e[h]),this.setPanelPosition(e[h],a,this.getCellInstance(e[h].id).col),this.panelPropertyChange(this.getCellInstance(e[h].id),{row:a}),e[h].setAttribute("data-row",a.toString());t.setAttribute("data-row",i.row.toString()),this.setPanelPosition(this.shadowEle,i.row,i.col);for(var c=0;c<this.panels.length;c++)this.oldRowCol[this.panels[c].id]={row:this.panels[c].row,col:this.panels[c].col};this.startRow=i.row,this.updateOldRowColumn(),o.forEach(function(e){n.cloneObject[e.id]=n.oldRowCol[e.id];for(var t=n.getCellInstance(e.id),i=0;i<n.sortedArray.length;i++)if(n.sortedArray[i])for(var s=0;s<n.sortedArray[i].length;s++)n.sortedArray[i][s]===e&&(n.sortedArray[i][s]=void 0);n.sortedArray[t.row]||(n.sortedArray[t.row]=[]),n.sortedArray[t.row][t.col]=e,n.cloneArray=n.sortedArray})},t.prototype.updatePanelLayout=function(e,t){this.collisionChecker={};var i=[],s=[];if((i=this.mainElement&&this.isRenderComplete?this.resetLayout(t,e):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e)).length>0)if(i=this.sortCollisionItems(i),i=this.updatedModels(i,t,e),!ae(this.startRow)&&this.checkForSwapping(i,e,t))this.swapItems(i,e,t);else for(var n=0;n<i.length;n++){var o=this.getCellInstance(i[n].id);if(this.checkingElement=i[n],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(o.row,o.col,o.sizeY,o.sizeX,e)&&!ae(this.spacedColumnValue)){this.setPanelPosition(i[n],this.spacedRowValue,this.spacedColumnValue),this.oldRowCol[i[n].id]={row:this.spacedRowValue,col:this.spacedColumnValue};var r={attributes:{row:this.spacedRowValue.toString(),col:this.spacedColumnValue.toString()}};if(this.setAttributes(r,i[n]),this.panelPropertyChange(o,{col:this.spacedColumnValue,row:this.spacedRowValue}),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,n<i.length)continue}else s.push(i[n])}if(s.length>0){var a=this;s.forEach(function(e){-1===a.overlapElement.indexOf(e)&&a.overlapElement.push(e)}),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),s.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())}this.isSubValue||this.sortedPanel(),this.updateRowHeight(),this.updateGridLines()},t.prototype.checkForCompletePushing=function(){for(var e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];var t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle)}},t.prototype.updateCollisionChecked=function(e){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null},t.prototype.updateRowColumn=function(e,t,i){if(i){var s=parseInt(i.getAttribute("data-sizeY"),10),n=parseInt(i.getAttribute("data-row"),10);this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement);for(var o=0;o<this.overlapElementClone.length;o++){if(0===this.overlapElementClone.length)return;for(var r=0;r<this.overlapElementClone.length;r++)this.collisionChecker[this.overlapElementClone[r].id]={ele:this.overlapElementClone[r],row:e,srcEle:i};var a=n+s,l=parseInt(this.overlapElementClone[o].getAttribute("data-sizeY"),10),h=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),c=parseInt(this.overlapElementClone[o].getAttribute("data-sizeX"),10),p=void 0,d=void 0;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[o])&&this.overlapSubElementClone.push(this.overlapElementClone[o]),l>1||c>1){var u=this.getCellInstance(this.overlapElementClone[o].id);p=u.col;for(var m=document.getElementById(u.id),f=u.row;f<n+s;f++){this.isSubValue=!0,this.panelPropertyChange(u,{row:u.row+1}),m.setAttribute("data-row",u.row.toString()),this.setPanelPosition(m,u.row,p),this.updateCollisionChecked(m),this.oldRowCol[m.id]={row:u.row,col:p};var g=this.getCellInstance(m.id);this.panelPropertyChange(g,{col:p,row:u.row});var v=parseInt(m.getAttribute("data-row"),10),y=parseInt(m.getAttribute("data-col"),10),b=parseInt(m.getAttribute("data-sizeX"),10),C=parseInt(m.getAttribute("data-sizeY"),10),S=[];S.push(m),S.push(i),d=this.collisions(v,y,b,C,S),this.mainElement&&-1!==d.indexOf(this.mainElement)&&d.splice(d.indexOf(this.mainElement),1),this.collisionPanel(d,y,v,m)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1),this.overlapElementClone[o].setAttribute("data-row",a.toString());var x=[];x.push(this.overlapElementClone[o]),x.push(i),d=this.collisions(a,h,c,l,x),this.mainElement&&-1!==d.indexOf(this.mainElement)&&d.splice(d.indexOf(this.mainElement),1),p=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),this.setPanelPosition(this.overlapElementClone[o],a,p),this.updateCollisionChecked(this.overlapElementClone[o]),this.oldRowCol[this.overlapElementClone[o].id]={row:a,col:p};g=this.getCellInstance(this.overlapElementClone[o].id);this.panelPropertyChange(g,{col:p,row:a}),this.collisionPanel(d,p,a,this.overlapElementClone[o])}}}},t.prototype.collisionPanel=function(e,t,i,s){var n=this.getCellInstance(s.id);if(this.panelPropertyChange(n,{row:i,col:t}),e.length>0){var o=this;this.overlapElement=[],this.shouldRestrict=!0,e.forEach(function(e){o.overlapElement.push(e)});for(var r=parseInt(s.getAttribute("data-row"),10),a=0;a<this.overlapElement.length;a++)this.updateRowColumn(r,this.overlapElement,s);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(var l=function(e){var t=parseInt(h.overlapSubElementClone[e].getAttribute("data-row"),10),i=parseInt(h.overlapSubElementClone[e].getAttribute("data-col"),10),s=parseInt(h.overlapSubElementClone[e].getAttribute("data-sizeX"),10),n=parseInt(h.overlapSubElementClone[e].getAttribute("data-sizeY"),10),o=void 0;o=h.collisions(t,i,s,n,h.overlapSubElementClone),h.mainElement&&-1!==o.indexOf(h.mainElement)&&o.splice(o.indexOf(h.mainElement),1);var r=h;o.forEach(function(e){r.overlapElement.push(e)}),o.length>0&&h.updateRowColumn(t,h.overlapElement,h.overlapSubElementClone[e])},h=this,c=0;c<this.overlapSubElementClone.length;c++)l(c);this.overlapSubElementClone=[]}},t.prototype.removeResizeClasses=function(e){for(var t=0;t<e.length;t++)for(var i=e[t].querySelectorAll(".e-resize"),s=0;s<i.length;s++)Ti(i[s])},t.prototype.ensureDrag=function(){this.checkDragging(this.dragCollection),Ci(this.element.querySelectorAll(".e-drag"),["e-drag"]),this.setClasses(this.panelCollection)},t.prototype.setClasses=function(e){for(var t=0;t<e.length;t++){var i=e[t],s=e[t].querySelector(".e-panel-container");this.allowDragging&&(this.draggableHandle&&i.querySelectorAll(this.draggableHandle)[0]?bi([i.querySelectorAll(this.draggableHandle)[0]],["e-drag"]):bi([i],["e-drag"])),this.allowResizing&&this.mediaQuery&&!this.checkMediaQuery()&&this.setResizingClass(i,s)}},t.prototype.setResizingClass=function(e,t){this.availableClasses=this.resizableHandles;for(var i=0;i<this.availableClasses.length;i++){var s=this.createElement("span");t.appendChild(s),bi([s],["e-east"===this.availableClasses[i]||"e-west"===this.availableClasses[i]||"e-north"===this.availableClasses[i]||"e-south"===this.availableClasses[i]?"e-single":"e-double",this.availableClasses[i],"e-resize","e-dl-icon"])}},t.prototype.setXYAttributes=function(e,t){var i={value:{sizeX:t.sizeX.toString(),sizeY:t.sizeY.toString(),minSizeX:t.minSizeX.toString(),minSizeY:t.minSizeY.toString(),maxSizeX:ae(t.maxSizeX)?void 0:t.maxSizeX.toString(),maxSizeY:ae(t.maxSizeY)?void 0:t.maxSizeY.toString(),row:t.row.toString(),col:t.col.toString()}};this.setAttributes(i,e)},t.prototype.setXYDimensions=function(e){var t,i=this.getCellSize()[1],s=this.getCellSize()[0];return t=e&&"number"==typeof s&&"number"==typeof e.sizeX&&e.sizeX>1?e.sizeX*s+(e.sizeX-1)*this.cellSpacing[0]:s,[e&&"number"==typeof i&&e.sizeY>1&&"number"==typeof e.sizeY?e.sizeY*i+(e.sizeY-1)*this.cellSpacing[1]:ge(i),t]},t.prototype.getRowColumnDragValues=function(e){var t=parseFloat(e.element.style.top),i=parseFloat(e.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(i/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},t.prototype.checkForChanges=function(e,t,i){var s=[];if(this.removeAllCalled)s=[];else for(var n=0;n<this.panels.length;n++)!ae(t)&&this.panels[n].id===t[0].id||!ae(i)&&this.panels[n].id===i[0].id||this.panels[n].row===this.panelsInitialModel[n].row&&this.panels[n].col===this.panelsInitialModel[n].col||s.push(this.panels[n]);if(s.length>0||this.removeAllCalled){var o={changedPanels:s,isInteracted:e,addedPanels:ae(t)?[]:t,removedPanels:ae(i)?[]:i};this.trigger("change",o)}},t.prototype.enableDraggingContent=function(e){for(var t=this,i=0;i<e.length;i++){var s=[".e-resize",".e-drag-restrict"],n=e[i];this.dragobj=new Ws(n,{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:s,dragStart:this.onDraggingStart.bind(this),dragStop:function(e){var i=t.getCellInstance(t.mainElement.id);t.allowPushing&&t.collisions(i.row,i.col,i.sizeX,i.sizeY,t.mainElement).length>0?(t.setHolderPosition(e),t.setPanelPosition(t.mainElement,i.row,i.col),t.updatePanelLayout(t.mainElement,i)):t.setPanelPosition(t.mainElement,i.row,i.col),t.mainElement=null;var s=t.getPanelBase(e);t.shadowEle&&Ti(t.shadowEle),Ci([t.element],["e-prevent"]),Ci([e.element],["e-dragging"]),t.shadowEle=null,e.element.classList.remove("e-dragging");var n=t.getRowColumnDragValues(e)[0],o=t.getRowColumnDragValues(e)[1],r=t.getCellInstance(e.element.id);t.allowPushing&&0===t.collisions(n,o,r.sizeX,r.sizeY,document.getElementById(s.id)).length?(t.panelPropertyChange(t.getCellInstance(e.element.id),{row:n,col:o}),t.oldRowCol[e.element.id].row=n,t.oldRowCol[e.element.id].col=o,t.setAttributes({value:{col:o.toString(),row:n.toString()}},e.element),t.sortedPanel()):(t.panelPropertyChange(t.getCellInstance(e.element.id),{row:t.oldRowCol[e.element.id].row,col:t.oldRowCol[e.element.id].col}),e.element.setAttribute("data-col",t.getCellInstance(e.element.id).col.toString()),e.element.setAttribute("data-row",t.getCellInstance(e.element.id).row.toString()),t.sortedPanel());var a=t.getCellInstance(e.element.id);t.setPanelPosition(e.element,a.row,a.col),t.updatePanels(),t.updateServerPanelData(),t.updateCloneArrayObject(),t.checkForChanges(!0),t.dragStopEventArgs={event:e.event,element:e.element},t.trigger("dragStop",e),t.resizeEvents(),t.rows=t.maxRow(!0),t.setHeightWidth(),t.updateDragArea()},drag:function(e){t.draggedEventArgs={event:e.event,element:e.element,target:Mi(e.target,".e-panel")},t.trigger("drag",t.draggedEventArgs),t.onDragStart(e)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)}},t.prototype.updatePanels=function(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()},t.prototype.updateDragArea=function(){this.dragCollection.forEach(function(e){e.setDragArea()})},t.prototype.updateRowsHeight=function(e,t,i){e+t>=this.rows&&(this.rows=this.rows+i,this.setHeightWidth())},t.prototype.onDraggingStart=function(e){var t=e;this.trigger("dragStart",t,function(t){ye()&&t.bindEvents(e.element)}),this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element,this.cloneObject=JSON.parse(JSON.stringify(this.cloneObject));var i=this.startRow=parseInt(e.element.getAttribute("data-row"),10);this.startCol=parseInt(e.element.getAttribute("data-col"),10);var s=parseInt(e.element.getAttribute("data-sizeY"),10);this.updateRowsHeight(i,s,s),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),Ri(this.shadowEle,{position:"absolute"}),bi([this.element],["e-prevent"]),bi([e.element],["e-dragging"]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";var n=this.getCellInstance(e.element.id);this.setPanelPosition(this.shadowEle,n.row,n.col)},t.prototype.cloneModels=function(e,t){void 0===t&&(t=[]);for(var i=0;i<e.length;i++)for(var s in t[i]||(t[i]={}),e[i])t[i][s]=e[i][s];return t},t.prototype.onDragStart=function(e){var t,i,s,n=s=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(!(n<0||o<0)){this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:n});var r=this.getCellInstance(e.element.id);if(this.updateRowsHeight(r.row,r.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.setAttributes({value:{col:n.toString(),row:o.toString()}},e.element),this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:n}),t=this.oldRowCol[e.element.id].col,i=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:n},this.updateOldRowColumn(),(this.startCol!==t||this.startRow!==i)&&(this.setHolderPosition(e),this.startCol!==t&&(this.startRow=i),this.startRow!==i&&(this.startCol=t),this.allowPushing))){this.mainElement=e.element;var a=r;this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),r.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,r),this.moveItemsUpwards()}!1!==this.allowPushing&&this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:n}),this.oldRowCol[e.element.id].row===o&&this.oldRowCol[e.element.id].col===n||(this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:n}),this.setAttributes({value:{col:n.toString(),row:o.toString()}},e.element)),this.startCol!==s&&(this.startCol=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e),this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),this.allowPushing}},t.prototype.getPanelBase=function(e){for(var t,i=0;i<this.panelCollection.length;i++)this.panelCollection[i].id===(e.element&&e.element.id||e)&&(t=this.panelCollection[i]);return t},t.prototype.getPanel=function(e,t,i){!i||i instanceof Array||(i=[i]);for(var s=1;e>-1;){for(var n=1,o=t;o>-1;){var r=this.sortedArray[e];if(r){var a=r[o];if(a&&(!i||-1===i.indexOf(a))&&parseInt(a.getAttribute("data-sizeX"),10)>=n&&parseInt(a.getAttribute("data-sizeY"),10)>=s)return a}++n,--o}--e,++s}return null},t.prototype.setHolderPosition=function(e){var t,i,s=parseInt(e.element.getAttribute("data-sizeY"),10),n=parseInt(e.element.getAttribute("data-col"),10),o=parseInt(e.element.getAttribute("data-row"),10),r=parseInt(e.element.getAttribute("data-sizeX"),10),a=this.getCellSize()[0],l=this.getCellSize()[1],h=0===o?0:o*(l+this.cellSpacing[1]),c=0===n?0:n*(a+this.cellSpacing[0]);t=this.getCellSize()[1],i=this.getCellSize()[0],this.elementRef.top=this.shadowEle.style.top=h+"px",this.elementRef.left=this.shadowEle.style.left=c+"px",this.elementRef.height=this.shadowEle.style.height=s*t+(s-1)*this.cellSpacing[1]+"px",this.elementRef.width=this.shadowEle.style.width=r*i+(r-1)*this.cellSpacing[0]+"px"},t.prototype.getCellInstance=function(e){for(var t,i=0;i<this.panels.length;i++)this.panels[i].id===e&&(t=this.panels[i]);return t},t.prototype.addPanel=function(e){this.panelsSizeY=0,this.allowServerDataBinding=!1,this.maxCol(),e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),e.id||(e.id="layout_"+this.panelID.toString(),this.panelID=this.panelID+1);var t=new gu(this,"panels",e,!0);this.panels.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.setMinMaxValues(t),(this.maxColumnValue<t.col||this.maxColumnValue<t.col+t.sizeX)&&this.panelPropertyChange(t,{col:this.maxColumnValue-t.sizeX});var i=this.renderCell(t,!0,null);if(this.oldRowCol[t.id]={row:t.row,col:t.col},this.cloneObject[t.id]={row:t.row,col:t.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",i),this.addPanelCalled=!0,this.checkMediaQuery()?(this.checkMediaQuerySizing(),this.isBlazor&&i.style.removeProperty("visibility"),this.removeResizeClasses(this.panelCollection)):(this.mainElement=i,this.checkCollision||(this.checkCollision=[]),this.setPanelPosition(i,t.row,t.col),this.isBlazor&&i.style.removeProperty("visibility"),this.updatePanelLayout(i,t)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(t.id)]),this.setClasses([i]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(var s=0;s<i.querySelectorAll(".e-resize").length;s++){var n="msie"===bt.info.name?"mousedown pointerdown":"mousedown";Ct.add(i.querySelectorAll(".e-resize")[s],n,this.downResizeHandler,this),"msie"!==bt.info.name&&Ct.add(i.querySelectorAll(".e-resize")[s],"touchstart",this.touchDownResizeHandler,this)}this.checkForChanges(!1,[t]),this.allowServerDataBinding=!0,this.serverDataBind()},t.prototype.updatePanel=function(e){if(this.panelsSizeY=0,e.id){var t=this.getCellInstance(e.id);if(t){this.maxCol(),e.col=e.col<1?0:e.col>this.columns?this.columns-1:e.col,ae(e.col)&&(e.col=t.col),this.panelPropertyChange(t,e),this.setMinMaxValues(t);var i=document.getElementById(e.id);this.mainElement=i;var s=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=i.querySelector(".e-panel-container")?i.querySelector(".e-panel-container"):this.createSubElement(s,i.id+"_content","e-panel-container"),i.appendChild(this.panelContent),t.header){var n=i.querySelector(".e-panel-header")?i.querySelector(".e-panel-header"):this.createSubElement([],i.id+"template","");bi([n],["e-panel-header"]),n.innerHTML="";var o=this.element.id+"HeaderTemplate"+t.id;this.renderTemplate(t.header,n,o,!0,"header"),this.panelContent.appendChild(n),this.renderReactTemplates()}else i.querySelector(".e-panel-header")&&Ti(i.querySelector(".e-panel-header"));if(t.content){var r=t.cssClass?t.cssClass.split(" "):null;this.panelBody=i.querySelector(".e-panel-content")?i.querySelector(".e-panel-content"):this.createSubElement(r,i.id+"_body","e-panel-content"),this.panelBody.innerHTML="";var a="calc( 100% - "+(this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px")+")";Ri(this.panelBody,{height:a});o=this.element.id+"ContentTemplate"+t.id;this.renderTemplate(t.content,this.panelBody,o,!0,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}else i.querySelector(".e-panel-content")&&Ti(i.querySelector(".e-panel-content"));this.setXYAttributes(i,t),this.setHeightAndWidth(i,t),this.setPanelPosition(i,t.row,t.col),this.updatePanelLayout(i,t),this.checkMediaQuery()&&this.checkMediaQuerySizing(),this.mainElement=null,this.updatePanels(),this.updateCloneArrayObject()}}},t.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},t.prototype.serialize=function(){for(var e=this.cloneModels(this.panels),t=[],i=0;i<e.length;i++)t.push({id:e[i].id,row:e[i].row,col:e[i].col,sizeX:e[i].sizeX,sizeY:e[i].sizeY,minSizeX:e[i].minSizeX,minSizeY:e[i].minSizeY,maxSizeX:e[i].maxSizeX,maxSizeY:e[i].maxSizeY});return t},t.prototype.removeAll=function(){this.removeAllCalled=!0;for(var e=0;e<this.panelCollection.length;e++)Ti(this.panelCollection[e]),this.clearTemplate();this.removeAllPanel(),this.updateServerPanelData(),this.rows=0,this.gridPanelCollection=[],this.setHeightWidth(),this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelCollection=[],this.oldRowCol={},this.cloneObject={};var t=this.cloneModels(this.panels);this.setProperties({panels:[]},!0),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!1,null,t),this.removeAllCalled=!1},t.prototype.removePanel=function(e){var t,i=this;this.panelsSizeY=0,this.panelsInitialModel=this.cloneModels(this.panels);for(var s=0;s<this.panelCollection.length;s++)this.panelCollection[s].id===e&&(Ti(this.panelCollection[s]),this.panelCollection.splice(s,1)),this.panels[s].id===e&&(t=this.panels[s],this.panels.splice(s,1),this.panelsInitialModel.splice(s,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.checkMediaQuery()&&(this.isPanelRemoved=!0,this.checkMediaQuerySizing(),this.isPanelRemoved=!1),this.updateServerPanelData(),this.gridPanelCollection.forEach(function(t){t.id===e&&i.gridPanelCollection.splice(i.gridPanelCollection.indexOf(t),1)}),this.updateCloneArrayObject(),this.checkForChanges(!1,null,[t])},t.prototype.movePanel=function(e,t,i){this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);var s=this.getCellInstance(e);if(!isNaN(t)&&null!==t&&!isNaN(i)&&null!==i&&s){i<0?i=0:i>this.columns&&(i=this.columns-s.sizeX),this.panelPropertyChange(s,{row:t,col:i});var n=document.getElementById(e);this.mainElement=n,this.startRow=parseInt(n.getAttribute("data-row"),10),this.startCol=parseInt(n.getAttribute("data-col"),10),this.setAttributes({value:{col:i.toString(),row:t.toString()}},n),this.updateOldRowColumn(),this.setPanelPosition(n,t,i),this.updatePanelLayout(n,s),this.updateRowHeight(),this.updatePanels(),this.updateServerPanelData(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.checkForChanges(!1)}},t.prototype.setAttributes=function(e,t){for(var i=0;i<Object.keys(e).length;i++)Object.keys(e)&&(e[Object.keys(e)[i]].col&&t.setAttribute("data-col",e[Object.keys(e)[i]].col.toString()),e[Object.keys(e)[i]].row&&t.setAttribute("data-row",e[Object.keys(e)[i]].row.toString()),e[Object.keys(e)[i]].sizeX&&t.setAttribute("data-sizeX",e[Object.keys(e)[i]].sizeX.toString()),e[Object.keys(e)[i]].sizeY&&t.setAttribute("data-sizeY",e[Object.keys(e)[i]].sizeY.toString()),e[Object.keys(e)[i]].minSizeX&&t.setAttribute("data-minSizeX",e[Object.keys(e)[i]].minSizeX.toString()),e[Object.keys(e)[i]].minSizeY&&t.setAttribute("data-minSizeY",e[Object.keys(e)[i]].minSizeY.toString()),e[Object.keys(e)[i]].maxSizeX&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[i]].maxSizeX.toString()),e[Object.keys(e)[i]].maxSizeY&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[i]].maxSizeY.toString()))},t.prototype.resizePanel=function(e,t,i){this.panelsInitialModel=this.cloneModels(this.panels);var s=this.getCellInstance(e);this.resizeCalled=!0;var n=document.getElementById(e),o={event:null,element:n,isInteracted:!1};this.trigger("resizeStart",o),this.panelPropertyChange(s,{sizeX:t,sizeY:i}),this.setMinMaxValues(s),this.checkMinMaxValues(s),this.mainElement=n,this.setAttributes({value:{sizeX:s.sizeX.toString(),sizeY:s.sizeY.toString()}},n),this.setHeightAndWidth(n,s),this.updatePanelLayout(n,s),this.updatePanels(),this.updateServerPanelData(),this.updateRowHeight(),this.resizeCalled=!1,this.trigger("resizeStop",o),this.checkForChanges(!1)},t.prototype.destroy=function(){Ci([this.element],["e-dashboardlayout","e-lib","e-responsive","e-control"]),this.element.removeAttribute("style");for(var t=0;t<this.dragCollection.length;t++)this.dragCollection[t].destroy();this.removeAllPanel(),e.prototype.destroy.call(this),this.clearTemplate(),this.renderReactTemplates()},t.prototype.removeAllPanel=function(){for(;this.element.firstElementChild;)Ti(this.element.firstElementChild),this.clearTemplate()},t.prototype.setEnableRtl=function(){this.enableRtl?bi([this.element],"e-rtl"):Ci([this.element],"e-rtl")},t.prototype.updateCellSizeAndSpacing=function(){this.panelResponsiveUpdate(),this.setHeightWidth(),this.getRowColumn();for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id);this.setHeightAndWidth(t,i),this.setPanelPosition(t,i.row,i.col)}},t.prototype.updatePanelsDynamically=function(e){this.removeAll(),this.setProperties({panels:e},!0),this.setOldRowCol(),this.table&&this.table.remove(),this.isBlazor=!1,this.initialize(),this.checkMediaQuery()&&this.refresh(),this.isBlazor=ye()&&this.isServerRendered,this.showGridLines&&this.initGridLines()},t.prototype.checkForIDValues=function(e){var t=this;!ae(e)&&e.length>0?(this.panelID=0,e.forEach(function(e){e.id||(t.panelPropertyChange(e,{id:"layout_"+t.panelID.toString()}),t.panelID=t.panelID+1)})):this.restrictDynamicUpdate=!0},t.prototype.onPropertyChanged=function(e,t){var i=this;e.panels&&e.panels.length>0&&e.panels[0]instanceof gu&&this.checkForIDValues(e.panels);for(var s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"mediaQuery":this.setProperties({mediaQuery:e.mediaQuery},!0),this.checkMediaQuery()&&this.checkMediaQuerySizing();break;case"allowDragging":this.setProperties({allowDragging:e.allowDragging},!0),this.ensureDrag();break;case"allowResizing":if(this.setProperties({allowResizing:e.allowResizing},!0),this.allowResizing)this.setClasses(this.panelCollection),this.resizeEvents();else{for(var o=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize"),r=0;r<o.length;r++){var a="msie"===bt.info.name?"mousedown pointerdown":"mousedown",l=o[r];Ct.remove(l,a,this.downResizeHandler),"msie"!==bt.info.name&&Ct.remove(l,"touchstart",this.touchDownResizeHandler)}this.removeResizeClasses(this.panelCollection)}break;case"cellSpacing":this.setProperties({cellSpacing:e.cellSpacing},!0),this.updateCellSizeAndSpacing(),this.updateGridLines();break;case"draggableHandle":this.setProperties({draggableHandle:e.draggableHandle},!0),this.ensureDrag();break;case"allowFloating":this.setProperties({allowFloating:e.allowFloating},!0),this.moveItemsUpwards();break;case"showGridLines":this.showGridLines?(this.setProperties({showGridLines:e.showGridLines},!0),this.initGridLines()):this.table&&Ti(this.table);break;case"allowPushing":this.setProperties({allowPushing:e.allowPushing},!0);break;case"panels":!e.columns&&!this.restrictDynamicUpdate&&e.panels[0]&&e.panels.length>0?(this.isRenderComplete=!1,this.updatePanelsDynamically(e.panels),this.isRenderComplete=!0):e.panels[0]&&e.panels.length?this.restrictDynamicUpdate=!1:(this.isRenderComplete=!1,this.updatePanelsDynamically(this.panels),this.isRenderComplete=!0);break;case"columns":this.isRenderComplete=!1,e.panels&&this.updatePanelsDynamically(e.panels),this.setProperties({columns:e.columns},!0),this.panelCollection=[],this.maxColumnValue=this.columns,this.calculateCellSize(),this.panels.forEach(function(e){if(i.setMinMaxValues(e),i.maxColumnValue<e.col||i.maxColumnValue<e.col+e.sizeX){var t=i.maxColumnValue-e.sizeX;i.panelPropertyChange(e,{col:t<0?0:t}),i.setXYAttributes(document.getElementById(e.id),e)}i.setHeightAndWidth(document.getElementById(e.id),e),i.panelCollection.push(document.getElementById(e.id)),i.setPanelPosition(document.getElementById(e.id),e.row,e.col),i.mainElement=document.getElementById(e.id),i.updatePanelLayout(document.getElementById(e.id),e),i.mainElement=null}),this.updatePanels(),this.updateCloneArrayObject(),this.isRenderComplete=!0,this.updateGridLines()}}},t.prototype.getPersistData=function(){return this.addOnPersist(["panels"])},t.prototype.mergePersistPanelData=function(e){var t=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!ae(t)&&""!==t||!ae(e)){var i=ae(e)?JSON.parse(t):e,s=Object.keys(i);this.isProtectedOnChange=!0;for(var n=0,o=s;n<o.length;n++){var r=o[n];"object"!=typeof ee(r,this)||ae(ee(r,this))||Array.isArray(ee(r,this))&&"panels"===r&&this.mergePanels(i[r],this[r])}this.isProtectedOnChange=!1}},t.prototype.mergePanels=function(e,t){for(var i=e,s=function(e){n.checkForIDValues(t);var s=t.filter(function(t){return t.id===i[e].id})[0];ae(s)||(i[e]=re(s,i[e],{},!0))},n=this,o=0;o<i.length;o++)s(o)},t.prototype.getModuleName=function(){return"DashboardLayout"},fu([os(!0)],t.prototype,"allowDragging",void 0),fu([os(!1)],t.prototype,"allowResizing",void 0),fu([os(!0)],t.prototype,"allowPushing",void 0),fu([os(!0)],t.prototype,"enableHtmlSanitizer",void 0),fu([os(!0)],t.prototype,"allowFloating",void 0),fu([os(1)],t.prototype,"cellAspectRatio",void 0),fu([os([5,5])],t.prototype,"cellSpacing",void 0),fu([os(1)],t.prototype,"columns",void 0),fu([os(!1)],t.prototype,"showGridLines",void 0),fu([os(null)],t.prototype,"draggableHandle",void 0),fu([os("en-US")],t.prototype,"locale",void 0),fu([os("max-width: 600px")],t.prototype,"mediaQuery",void 0),fu([ls([],gu)],t.prototype,"panels",void 0),fu([os(["e-south-east"])],t.prototype,"resizableHandles",void 0),fu([cs()],t.prototype,"change",void 0),fu([cs()],t.prototype,"dragStart",void 0),fu([cs()],t.prototype,"drag",void 0),fu([cs()],t.prototype,"dragStop",void 0),fu([cs()],t.prototype,"resizeStart",void 0),fu([cs()],t.prototype,"resize",void 0),fu([cs()],t.prototype,"resizeStop",void 0),fu([cs()],t.prototype,"created",void 0),fu([cs()],t.prototype,"destroyed",void 0),t=fu([ps],t)}(Ns),yu={},bu={};Object(Y.copy)(yu,N),Object(Y.copy)(bu,s);var Cu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Su=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},xu="e-other-month",wu="e-overlay",Eu="e-focused-date",ku=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.effect="",s.isPopupClicked=!1,s.isDateSelected=!0,s.isTodayClicked=!1,s.preventChange=!1,s.isAngular=!1,s}return Cu(t,e),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new Qe(this.locale),(ae(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add("e-calendar"),this.enableRtl&&this.element.classList.add("e-rtl"),bt.isDevice&&this.element.classList.add("e-device"),Di(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add("e-calendar"),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),bt.isDevice&&this.calendarElement.classList.add("e-device"),Di(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,t){ae(e)&&this.setProperties({min:new Date(1900,0,1)},!0),ae(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!ae(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,t,i,s){if(s&&!ae(t)&&!ae(i)&&!ae(e)){var n=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?Ci([this.element],wu):(this.setProperties({min:this.min},!0),bi([this.element],wu)),this.min=ae(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=ae(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),ys(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),Di(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),ys(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),Di(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),Di(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var e,t=[],i=(ye()?"days.":"days.stand-alone.")+this.dayHeaderFormat.toLowerCase();e="en"===this.locale||"en-US"===this.locale?ee(i,nt()):this.getCultureObjects(Ye,""+this.locale);for(var s=0,n=Object.keys(e);s<n.length;s++){var o=n[s];t.push(ee(o,e))}return t},t.prototype.toCapitalize=function(e){return!ae(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?ae(this.element.querySelectorAll(".e-content .e-week-header")[0])||Ti(this.element.querySelectorAll(".e-content .e-week-header")[0]):ae(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||Ti(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(t+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?bi([this.element],"e-week-number"):bi([this.calendarElement],"e-week-number")),e=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(var i=0;i<=6;i++)t+='<th  class="">'+this.toCapitalize(e[i])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?ae(this.element.querySelectorAll(".e-content tbody")[0])||Ti(this.element.querySelectorAll(".e-content tbody")[0]):ae(this.calendarElement.querySelectorAll(".e-content tbody")[0])||Ti(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max);this.globalize=new Qe(this.locale),this.l10=new Js(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),ys(this.todayElement),this.updateFooter(),bi([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||bi([this.todayElement],"e-disabled"),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains("e-disabled")||Ct.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,t,i,s){ye()&&t?(this.element=document.getElementById(e),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=re(this.defaultKeyConfigs,i),this.blazorRef=t,this.serverModuleName=s):(Ct.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=re(this.defaultKeyConfigs,this.keyConfigs)),"calendar"===this.getModuleName()?this.keyboardModule=new Qs(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new Qs(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,t,i,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=re(this.defaultKeyConfigs,i),this.blazorRef=t,this.serverModuleName=s},t.prototype.todayButtonClick=function(e,t,i){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))},t.prototype.checkDeviceMode=function(e){bt.isDevice&&ye()&&e&&e.invokeMethodAsync("OnDevice",!0)},t.prototype.keyActionHandle=function(e,t,i){ye()&&this.blazorRef&&(e.preventDefault(),this.tableBodyElement||(this.element=Mi(e.target,".e-calendar"),this.tableBodyElement=this.element.querySelector("tbody")),i=!1);var s,n=this.tableBodyElement.querySelector("tr td.e-focused-date");if(s=i?ae(n)||+t!==parseInt(n.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):n:this.tableBodyElement.querySelector("tr td.e-selected"),ye()&&this.blazorRef){this.tableBodyElement.focus();var o=e.target,r={Action:e.action,Key:e.key,Events:e,SelectDate:s?s.id:null,FocusedDate:n?n.id:null,classList:s?s.classList.toString():n?n.classList.toString():"e-cell",Id:n?n.id:s?s.id:null,TargetClassList:o.classList.toString()};this.blazorRef.invokeMethodAsync("OnCalendarKeyboardEvent",r),o.classList.contains("e-today")&&(o.blur(),this.tableBodyElement.focus()),"sf.calendars.Calendar"===this.serverModuleName&&(this.tableBodyElement=null)}else{var a=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=a===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.KeyboardNavigate(-1,a,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.KeyboardNavigate(1,a,e,this.max,this.min),e.preventDefault();break;case"moveUp":0===a?this.KeyboardNavigate(-7,a,e,this.max,this.min):this.KeyboardNavigate(-4,a,e,this.max,this.min),e.preventDefault();break;case"moveDown":0===a?this.KeyboardNavigate(7,a,e,this.max,this.min):this.KeyboardNavigate(4,a,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,t);else{var c=ae(n)?s:n;if(!ae(c)&&!c.classList.contains("e-disabled"))if(h){var p=new Date(parseInt(""+c.id,0));this.selectDate(e,p,c)}else this.contentClick(null,--a,c,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":ae(n)&&(ae(s)||h)||this.contentClick(null,--a,n||s,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),Ti(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),Ti(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}},t.prototype.KeyboardNavigate=function(e,t,i,s,n){var o=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Ti(this.tableBodyElement),this.renderDecades(i)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode,this.isMonthYearRange(this.currentDate)?(Ti(this.tableBodyElement),this.renderYears(i)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,e,i,s,n),this.isMinMaxRange(this.currentDate)?(Ti(this.tableBodyElement),this.renderMonths(i)):this.currentDate=o}},t.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(e){t.triggerNavigate(e)}},t.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+s||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,t,i){var s,n=this.weekNumber?8:7;s="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,t,null,null,i):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(s,n,"e-month",e,t):this.islamicModule.islamicRenderTemplate(s,n,"e-month",e,t)},t.prototype.renderDays=function(e,t,i,s,n){var o,r=[],a=n?new Date(+e):new Date,l=new Date(this.checkValue(e)),h=(this.weekNumber,l.getMonth());this.titleUpdate(e,"days");var c=l;for(l=new Date(c.getFullYear(),c.getMonth(),0,c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());l.getDay()!==this.firstDayOfWeek;)this.setStartDate(l,-864e5);for(var p=0;p<42;++p){var d=this.createElement("td",{className:"e-cell"}),u=this.createElement("span");if(p%7==0&&this.weekNumber){var m;m="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0;var f=new Date(l.getFullYear(),l.getMonth(),l.getDate()+m);u.textContent=""+this.getWeek(f),d.appendChild(u),bi([d],"e-week-number"),r.push(d)}o=new Date(+l),l=this.minMaxDate(l);var g={type:"dateTime",skeleton:ye()?"D":"full"},v=this.globalize.parseDate(this.globalize.formatDate(l,g),g),y=this.dayCell(l),b=this.globalize.formatDate(l,{type:"date",skeleton:ye()?"D":"full"}),C=this.createElement("span");C.textContent=this.globalize.formatDate(l,{format:"d",type:"date",skeleton:ye()?"d":"yMd"});var S=this.min>l||this.max<l;S?(bi([y],"e-disabled"),bi([y],wu)):C.setAttribute("title",""+b),h!==l.getMonth()&&bi([y],xu),0!==l.getDay()&&6!==l.getDay()||bi([y],"e-weekend"),y.appendChild(C),this.renderDayCellArgs={date:l,isDisabled:!1,element:y,isOutOfRange:S};var x=this.renderDayCellArgs;if(this.renderDayCellEvent(x),x.isDisabled){var w=new Date(this.checkValue(t)),E=new Date(this.checkValue(x.date));if(i){if(!ae(s)&&s.length>0)for(var k=0;k<s.length;k++){+new Date(this.globalize.formatDate(x.date,{type:"date",skeleton:ye()?"d":"yMd"}))===+new Date(this.globalize.formatDate(s[k],{type:"date",skeleton:ye()?"d":"yMd"}))&&(s.splice(k,1),k=-1)}}else w&&+w==+E&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!y.classList.contains("e-selected")&&(bi([y],"e-disabled"),bi([y],wu),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var T=y.classList.contains(xu),L=y.classList.contains("e-disabled");if(L||Ct.add(y,"click",this.clickHandler,this),!i||ae(s)||L)!L&&this.getDateVal(l,t)?bi([y],"e-selected"):this.updateFocus(T,L,l,y,e);else{for(var D=0;D<s.length;D++){var I="Gregorian"===this.calendarMode?"gregorian":"islamic",O={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:I};this.globalize.formatDate(l,O)===this.globalize.formatDate(s[D],O)&&this.getDateVal(l,s[D])||this.getDateVal(l,t)?bi([y],"e-selected"):this.updateFocus(T,L,l,y,e)}s.length<=0&&this.updateFocus(T,L,l,y,e)}v.getFullYear()===a.getFullYear()&&v.getMonth()===a.getMonth()&&v.getDate()===a.getDate()&&bi([y],"e-today"),r.push(this.renderDayCellArgs.element),l=new Date(+o),this.addDay(l,1,null,this.max,this.min)}return r},t.prototype.updateFocus=function(e,t,i,s,n){n.getDate()!==i.getDate()||e||t?(n>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!t&&bi([s],Eu),n<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!t&&bi([s],Eu)):bi([s],Eu)},t.prototype.renderYears=function(e,t){this.removeTableHeadElement();var i=[],s=ae(t),n=new Date(this.checkValue(this.currentDate)),o=n.getMonth(),r=n.getFullYear(),a=n,l=a.getFullYear(),h=new Date(this.checkValue(this.min)).getFullYear(),c=new Date(this.checkValue(this.min)).getMonth(),p=new Date(this.checkValue(this.max)).getFullYear(),d=new Date(this.checkValue(this.max)).getMonth();a.setMonth(0),this.titleUpdate(this.currentDate,"months");this.min>a||this.max;a.setDate(1);for(var u=0;u<12;++u){var m=this.dayCell(a),f=this.createElement("span"),g=t&&t.getMonth()===a.getMonth(),v=t&&t.getFullYear()===r&&g;f.textContent=this.toCapitalize(this.globalize.formatDate(a,{format:ye()?"MMM":null,type:"dateTime",skeleton:"MMM"})),this.min&&(l<h||u<c&&l===h)||this.max&&(l>p||u>d&&l>=p)?bi([m],"e-disabled"):!s&&v?bi([m],"e-selected"):a.getMonth()===o&&this.currentDate.getMonth()===o&&bi([m],Eu),a.setDate(1),a.setMonth(a.getMonth()+1),m.classList.contains("e-disabled")||Ct.add(m,"click",this.clickHandler,this),m.appendChild(f),i.push(m)}this.renderTemplate(i,4,"e-year",e,t)},t.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var i=[],s=new Date(this.checkValue(this.currentDate));s.setMonth(0),s.setDate(1);var n=s.getFullYear(),o=new Date(s.setFullYear(n-n%10)),r=new Date(s.setFullYear(n-n%10+9)),a=o.getFullYear(),l=r.getFullYear(),h=this.globalize.formatDate(o,{format:ye()?"yyyy":null,type:"dateTime",skeleton:"y"}),c=this.globalize.formatDate(r,{format:ye()?"yyyy":null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=h+" - "+c;for(var p=new Date(n-n%10-1,0,1).getFullYear(),d=0;d<12;++d){var u=p+d;s.setFullYear(u);var m=this.dayCell(s);Di(m,{role:"gridcell"});var f=this.createElement("span");f.textContent=this.globalize.formatDate(s,{format:ye()?"yyyy":null,type:"dateTime",skeleton:"y"}),u<a||u>l?(bi([m],"e-other-year"),ae(t)||s.getFullYear()!==t.getFullYear()||bi([m],"e-selected"),(u<new Date(this.checkValue(this.min)).getFullYear()||u>new Date(this.checkValue(this.max)).getFullYear())&&bi([m],"e-disabled")):u<new Date(this.checkValue(this.min)).getFullYear()||u>new Date(this.checkValue(this.max)).getFullYear()?bi([m],"e-disabled"):ae(t)||s.getFullYear()!==t.getFullYear()?s.getFullYear()!==this.currentDate.getFullYear()||m.classList.contains("e-disabled")||bi([m],Eu):bi([m],"e-selected"),m.classList.contains("e-disabled")||Ct.add(m,"click",this.clickHandler,this),m.appendChild(f),i.push(m)}this.renderTemplate(i,4,"e-decade",e,t)},t.prototype.dayCell=function(e){var t="Gregorian"===this.calendarMode?"gregorian":"islamic",i={skeleton:ye()?"F":"full",type:"dateTime",calendar:t},s={className:"e-cell",attrs:{id:""+he(""+this.globalize.parseDate(this.globalize.formatDate(e,i),i).valueOf()),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",s)},t.prototype.firstDay=function(e){var t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+xu):this.tableBodyElement.querySelectorAll("td:not(.e-other-year");if(t.length)for(var i=0;i<t.length;i++)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e},t.prototype.lastDay=function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){var s=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&i.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))},t.prototype.checkDateValue=function(e){return!ae(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(.e-other-year"):this.tableBodyElement.querySelectorAll("td:not(."+xu);if(t.length)for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?ae(this.element.querySelectorAll(".e-content table thead")[0])||Ti(this.tableHeadElement):ae(this.calendarElement.querySelectorAll(".e-content table thead")[0])||Ti(this.tableHeadElement)},t.prototype.renderTemplate=function(e,t,i,s,n){var o,r=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),Ci([this.contentElement,this.headerElement],["e-month","e-decade","e-year"]),bi([this.contentElement,this.headerElement],[i]);for(var a=t,l=0,h=0;h<e.length/t;++h){for(o=this.createElement("tr",{attrs:{role:"row"}}),l=0+l;l<a;l++)e[l].classList.contains("e-week-number")||ae(e[l].children[0])||(bi([e[l].children[0]],["e-day"]),ys(e[l].children[0],{duration:600,isCenterRipple:!0})),o.appendChild(e[l]),this.weekNumber&&7===l&&e[7].classList.contains(xu)&&bi([o],"e-month-hide"),!this.weekNumber&&6===l&&e[6].classList.contains(xu)&&bi([o],"e-month-hide"),this.weekNumber?41===l&&e[41].classList.contains(xu)&&bi([o],"e-month-hide"):35===l&&e[35].classList.contains(xu)&&bi([o],"e-month-hide");a+=t,l+=0,this.tableBodyElement.appendChild(o)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(r!==this.getViewNumber(this.currentView())||0===r&&r!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,s=this.getViewNumber(this.currentView());i.classList.contains(xu)?this.contentClick(e,0,null,t):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(e,1,null,t):2===s?this.contentClick(e,1,null,t):i.classList.contains(xu)||0!==s?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,t,i,s){var n=this.getViewNumber(this.currentView()),o=this.getIdValue(e,i);switch(t){case 0:n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(Ti(this.tableBodyElement),this.currentDate=o,this.effect="e-zoomin",this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect="e-zoomin",Ti(this.tableBodyElement),this.renderMonths(e));break;case 1:if(n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,o,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(o.getFullYear());else{var r=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(r.year,r.month,1)}this.effect="e-zoomin",Ti(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,t,i,s){switch(e){case 0:Ti(this.tableBodyElement),this.renderMonths(t,null,s),i&&!ae(this.tableBodyElement.querySelectorAll("."+Eu)[0])&&this.tableBodyElement.querySelectorAll("."+Eu)[0].classList.remove(Eu);break;case 1:Ti(this.tableBodyElement),this.renderYears(t);break;case 2:Ti(this.tableBodyElement),this.renderDecades(t)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t,i,s){this.effect="";for(var n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];switch(r){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),"min"===r?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),Ti(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,s),this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(Ti(this.todayElement),Ti(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(Ci([this.todayElement],"e-disabled"),Ti(this.todayElement),Ti(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),this.createContentHeader(),this.createContentBody();break;case"locale":this.globalize=new Qe(this.locale),this.createContentHeader(),this.createContentBody(),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():ae(this.todayElement)||ae(this.footer)||(Ti(this.todayElement),Ti(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,t){if(e&&!ae(t)&&t.length>0){for(var i=this.copyValues(t),s=0;s<i.length;s++){var n=i[s],o="Gregorian"===this.calendarMode?"gregorian":"islamic",r=void 0;r="Gregorian"===this.calendarMode?this.globalize.formatDate(n,{type:"date",skeleton:ye()?"d":"yMd"}):this.globalize.formatDate(n,{type:"dateTime",skeleton:"full",calendar:"islamic"});var a={type:"date",skeleton:ye()?"d":"yMd",calendar:o},l=this.globalize.formatDate(this.min,a),h={type:"date",skeleton:ye()?"d":"yMd",calendar:o},c=this.globalize.formatDate(this.max,h);(+new Date(r)<+new Date(l)||+new Date(r)>+new Date(c))&&(i.splice(s,1),s=-1)}this.setProperties({values:i},!0)}},t.prototype.setValueUpdate=function(){ae(this.tableBodyElement)||(Ti(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var t=[];if(!ae(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t},t.prototype.titleUpdate=function(e,t){var i,s,n=new Qe(this.locale),o="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(i=n.formatDate(e,{type:"dateTime",skeleton:ye()?"y":"yMMMM",calendar:o}),s=n.formatDate(e,{format:ye()?"yyyy":null,type:"dateTime",skeleton:"y",calendar:o})):(i=n.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:o}),s=n.formatDate(e,{type:"dateTime",format:"y",calendar:o})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(i);break;case"months":this.headerTitleElement.textContent=s}},t.prototype.setActiveDescendant=function(){var e,t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),s=this.tableBodyElement.querySelector("tr td.e-selected"),n="Gregorian"===this.calendarMode?"gregorian":"islamic",o=this.currentView();return t="Month"===o?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:ye()?"D":"full",calendar:n}):"Year"===o?"islamic"!==n?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:ye()?"y":"yMMMM",calendar:n}):this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:n}):this.globalize.formatDate(this.currentDate,{format:ye()?"yyyy":null,type:"date",skeleton:"y",calendar:n}),(s||i)&&(ae(s)||s.setAttribute("aria-selected","true"),(i||s).setAttribute("aria-label",t),e=(i||s).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){"calendar"===this.getModuleName()&&this.element?Ci([this.element],["e-calendar"]):this.calendarElement&&this.element&&Ci([this.element],["e-calendar"]),"calendar"===this.getModuleName()&&this.element&&(Ct.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&Ct.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),ae(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),e.prototype.destroy.call(this)},t.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect="e-zoomin",this.switchView(++t,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)},t.prototype.currentView=function(){return this.contentElement.classList.contains("e-year")?"Year":this.contentElement.classList.contains("e-decade")?"Decade":"Month"},t.prototype.getDateVal=function(e,t){return!ae(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},t.prototype.getCultureObjects=function(e,t){var i=(ye()?".dates.days.":".dates.calendars.gregorian.days.format.")+this.dayHeaderFormat.toLowerCase(),s=(ye()?".dates.days.":".dates.calendars.islamic.days.format.")+this.dayHeaderFormat.toLowerCase(),n=ye()?"":"main.";return"Gregorian"===this.calendarMode?ee(n+""+this.locale+i,e):ee("main."+this.locale+s,e)},t.prototype.getWeek=function(e){var t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-i+864e5)/864e5/7)},t.prototype.setStartDate=function(e,t){var i=e.getTimezoneOffset(),s=new Date(e.getTime()+t),n=s.getTimezoneOffset()-i;e.setTime(s.getTime()+6e4*n)},t.prototype.addMonths=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+t,1)}},t.prototype.addYears=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+t,s.month,1)}},t.prototype.getIdValue=function(e,t){var i;i=e?e.currentTarget:t;var s="Gregorian"===this.calendarMode?"gregorian":"islamic",n={type:"dateTime",skeleton:ye()?"F":"full",calendar:s},o=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),n),r=this.globalize.parseDate(o,n),a=r.valueOf()-r.valueOf()%1e3;return new Date(a)},t.prototype.adjustLongHeaderSize=function(){Ci([this.element],"e-calendar-day-header-lg"),"Wide"===this.dayHeaderFormat&&bi(["calendar"===this.getModuleName()?this.element:this.calendarElement],"e-calendar-day-header-lg")},t.prototype.selectDate=function(e,t,i,s,n){var o=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(s&&!this.checkPresentDate(t,n)){var r=this.copyValues(n);!ae(n)&&r.length>0?(r.push(new Date(this.checkValue(t))),this.setProperties({values:r},!0),this.setProperties({value:n[n.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var a=Mi(o,".e-calendar");if(ae(a)&&(a=this.tableBodyElement),s||ae(a.querySelector(".e-selected"))||Ci([a.querySelector(".e-selected")],"e-selected"),s||ae(a.querySelector("."+Eu))||Ci([a.querySelector("."+Eu)],Eu),s){r=this.copyValues(n);for(var l=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),h=0;h<l.length;h++){var c=a.querySelectorAll("td."+Eu)[0],p=a.querySelectorAll("td.e-selected")[0];l[h]===c&&Ci([l[h]],Eu),l[h]!==p||this.checkPresentDate(new Date(parseInt(p.getAttribute("id").split("_")[0],10)),n)||Ci([l[h]],"e-selected")}if(o.classList.contains("e-selected")){Ci([o],"e-selected");for(var d=0;d<r.length;d++){var u="Gregorian"===this.calendarMode?"gregorian":"islamic",m={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:u};if(this.globalize.formatDate(t,m)===this.globalize.formatDate(r[d],m)){h=r.indexOf(r[d]);r.splice(h,1),bi([o],Eu)}}this.setProperties({values:r},!0)}else bi([o],"e-selected")}else bi([o],"e-selected");this.isDateSelected=!0},t.prototype.getFromatStringValue=function(){return ye()?"M"+nt().dateSeperator+"d"+nt().dateSeperator+"yy":null},t.prototype.checkPresentDate=function(e,t){var i=!1;if(!ae(t))for(var s=0;s<t.length;s++){var n="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:n})===this.globalize.formatDate(t[s],{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:n})&&(i=!0)}return i},t.prototype.setAriaActiveDescendant=function(){Di(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?(Ct.remove(this.previousIcon,"click",this.navigatePreviousHandler),bi([this.previousIcon],"e-disabled"),bi([this.previousIcon],""+wu),this.previousIcon.setAttribute("aria-disabled","true")):(Ct.add(this.previousIcon,"click",this.navigatePreviousHandler),Ci([this.previousIcon],"e-disabled"),Ci([this.previousIcon],""+wu),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){re(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){re(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?(Ct.remove(this.nextIcon,"click",this.navigateNextHandler),bi([this.nextIcon],"e-disabled"),bi([this.nextIcon],wu),this.nextIcon.setAttribute("aria-disabled","true")):(Ct.add(this.nextIcon,"click",this.navigateNextHandler),Ci([this.nextIcon],"e-disabled"),Ci([this.nextIcon],wu),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,t,i){var s,n,o=t.getFullYear();return s=o,n=0,i&&(s=(o-=o%i)-o%i+i-1),e.getFullYear()>s?n=1:e.getFullYear()<o&&(n=-1),n},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,t){return this.compare(e,t,0)},t.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},t.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},t.prototype.addDay=function(e,t,i,s,n){var o=t,r=new Date(+e);if(!ae(this.tableBodyElement)&&!ae(i)){for(;this.findNextTD(new Date(+e),o,s,n);)o+=t;var a=new Date(r.setDate(r.getDate()+o));o=+a>+s||+a<+n?o===t?t-t:t:o}e.setDate(e.getDate()+o)},t.prototype.findNextTD=function(e,t,i,s){var n=new Date(e.setDate(e.getDate()+t)),o=[],r=!1;if((!ae(n)&&n.getMonth())===(!ae(this.currentDate)&&this.currentDate.getMonth())){o=("Gregorian"===this.calendarMode?this.renderDays(n):this.islamicModule.islamicRenderDays(this.currentDate,n)).filter(function(e){return e.classList.contains("e-disabled")})}else o=this.tableBodyElement.querySelectorAll("td.e-disabled");if(+n<=+i&&+n>=+s&&o.length)for(var a=0;a<o.length&&!(r=+n==+new Date(parseInt(o[a].id,0)));a++);return r},t.prototype.getMaxDays=function(e){var t,i,s=new Date(this.checkValue(e));for(t=28,i=s.getMonth();s.getMonth()===i;)++t,s.setDate(t);return t-1},t.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,t){return e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},Su([os(new Date(1900,0,1))],t.prototype,"min",void 0),Su([os(!0)],t.prototype,"enabled",void 0),Su([os(null)],t.prototype,"cssClass",void 0),Su([os(new Date(2099,11,31))],t.prototype,"max",void 0),Su([os(null)],t.prototype,"firstDayOfWeek",void 0),Su([os("Gregorian")],t.prototype,"calendarMode",void 0),Su([os("Month")],t.prototype,"start",void 0),Su([os("Month")],t.prototype,"depth",void 0),Su([os(!1)],t.prototype,"weekNumber",void 0),Su([os("FirstDay")],t.prototype,"weekRule",void 0),Su([os(!0)],t.prototype,"showTodayButton",void 0),Su([os("Short")],t.prototype,"dayHeaderFormat",void 0),Su([os(!1)],t.prototype,"enablePersistence",void 0),Su([os(null)],t.prototype,"keyConfigs",void 0),Su([os(null)],t.prototype,"serverTimezoneOffset",void 0),Su([cs()],t.prototype,"created",void 0),Su([cs()],t.prototype,"destroyed",void 0),Su([cs()],t.prototype,"navigated",void 0),Su([cs()],t.prototype,"renderDayCell",void 0),t=Su([ps],t)}(Ns),Tu=function(e){function t(t,i){return e.call(this,t,i)||this}return Cu(t,e),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&me("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!ae(this.values)&&this.values.length>0){for(var t=[],i=[],s=0;s<this.values.length;s++)-1===t.indexOf(+this.values[s])&&(t.push(+this.values[s]),i.push(this.values[s]));this.setProperties({values:i},!0);for(var n=0;n<this.values.length;n++)if(!this.checkDateValue(this.values[n]))if("string"==typeof this.values[n]&&this.checkDateValue(new Date(this.checkValue(this.values[n])))){var o=new Date(this.checkValue(this.values[n]));this.values.splice(n,1),this.values.splice(n,0,o)}else this.values.splice(n,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),this.setEnable(this.enabled),"calendar"===this.getModuleName()&&this.setClass(this.cssClass),e.prototype.render.call(this),"calendar"===this.getModuleName()){var r=Mi(this.element,"form");r&&Ct.add(r,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?Ci([this.element],"e-disabled"):bi([this.element],"e-disabled")},t.prototype.setClass=function(e,t){ae(t)||(t=t.replace(/\s+/g," ").trim()),ae(e)||(e=e.replace(/\s+/g," ").trim()),ae(t)||""===t||Ci([this.element],t.split(" ")),ae(e)||bi([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},t.prototype.setTimeZone=function(e){if(!ae(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),e.prototype.validateDate.call(this,this.value),!ae(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!ae(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!ae(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||ae(this.value)?e.prototype.minMaxUpdate.call(this,this.value):!ae(this.value)&&this.value<this.min&&this.min<=this.max?e.prototype.minMaxUpdate.call(this,this.min):!ae(this.value)&&this.value>this.max&&this.min<=this.max&&e.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(e){var t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},t.prototype.todayButtonClick=function(t){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=t,this.isMultiSelection){var s=this.copyValues(this.values);e.prototype.checkPresentDate.call(this,i,this.values)||(s.push(i),this.setProperties({values:s}))}e.prototype.todayButtonClick.call(this,t,new Date(+this.value))}},t.prototype.keyActionHandle=function(t){e.prototype.keyActionHandle.call(this,t,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var t=this;this.changeHandler=function(e){t.triggerChange(e)},this.checkView(),e.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,e.prototype.createContent.call(this)},t.prototype.minMaxDate=function(t){return e.prototype.minMaxDate.call(this,t)},t.prototype.renderMonths=function(t,i,s){e.prototype.renderMonths.call(this,t,this.value,s)},t.prototype.renderDays=function(t,i,s,n,o){var r=e.prototype.renderDays.call(this,t,this.value,this.isMultiSelection,this.values,o);return this.isMultiSelection&&e.prototype.validateValues.call(this,this.isMultiSelection,this.values),r},t.prototype.renderYears=function(t){"Gregorian"===this.calendarMode?e.prototype.renderYears.call(this,t,this.value):this.islamicModule.islamicRenderYears(t,this.value)},t.prototype.renderDecades=function(t){"Gregorian"===this.calendarMode?e.prototype.renderDecades.call(this,t,this.value):this.islamicModule.islamicRenderDecade(t,this.value)},t.prototype.renderTemplate=function(t,i,s,n){"Gregorian"===this.calendarMode?e.prototype.renderTemplate.call(this,t,i,s,n,this.value):this.islamicModule.islamicRenderTemplate(t,i,s,n,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(t){var i=t.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(xu))if(this.isMultiSelection){var s=this.copyValues(this.values);s.push(this.getIdValue(t,null)),this.setProperties({values:s},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(t,null)},!0);var n=this.currentView();e.prototype.clickHandler.call(this,t,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!ae(this.tableBodyElement.querySelectorAll("."+Eu)[0])&&"Year"===n&&this.tableBodyElement.querySelectorAll("."+Eu)[0].classList.remove(Eu)},t.prototype.switchView=function(t,i,s,n){e.prototype.switchView.call(this,t,i,this.isMultiSelection,n)},t.prototype.getModuleName=function(){return e.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){e.prototype.getPersistData.call(this);return this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(t,i){this.effect="",this.rangeValidation(this.min,this.max);for(var s=0,n=Object.keys(t);s<n.length;s++){switch(n[s]){case"value":this.isDateSelected&&("string"==typeof t.value?this.setProperties({value:new Date(this.checkValue(t.value))},!0):t.value=new Date(this.checkValue(t.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof t.values||"number"==typeof t.values)this.setProperties({values:null},!0);else{for(var o=this.copyValues(this.values),r=0;r<o.length;r++){var a=o[r];this.checkDateValue(a)&&!e.prototype.checkPresentDate.call(this,a,o)&&o.push(a)}this.setProperties({values:o},!0),this.values.length>0&&this.setProperties({value:t.values[t.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:t.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(t.cssClass,i.cssClass);break;default:e.prototype.onPropertyChanged.call(this,t,i,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),"calendar"===this.getModuleName()){var t=Mi(this.element,"form");t&&Ct.remove(t,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(t,i,s){this.minMaxUpdate(),e.prototype.navigateTo.call(this,t,i,s)},t.prototype.currentView=function(){return e.prototype.currentView.call(this)},t.prototype.addDate=function(t){if("string"!=typeof t&&"number"!=typeof t){var i=this.copyValues(this.values);if("object"==typeof t&&t.length>0)for(var s=t,n=0;n<s.length;n++)this.checkDateValue(s[n])&&!e.prototype.checkPresentDate.call(this,s[n],i)&&(!ae(i)&&i.length>0?i.push(s[n]):i=[new Date(+s[n])]);else this.checkDateValue(t)&&!e.prototype.checkPresentDate.call(this,t,i)&&(!ae(i)&&i.length>0?i.push(t):i=[new Date(+t)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!=typeof e&&"number"!=typeof e&&!ae(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var i=e,s=0;s<i.length;s++)for(var n=0;n<t.length;n++)+t[n]==+i[s]&&t.splice(n,1);else for(n=0;n<t.length;n++)+t[n]==+e&&t.splice(n,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(t){var i=new Date(+t);this.setProperties({value:i},!0),e.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),e.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(t,i,s){e.prototype.selectDate.call(this,t,i,s,this.isMultiSelection,this.values),this.isMultiSelection&&!ae(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(t)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!ae(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!ae(e),ae(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?ae(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},Su([os(null)],t.prototype,"value",void 0),Su([os(null)],t.prototype,"values",void 0),Su([os(!1)],t.prototype,"isMultiSelection",void 0),Su([cs()],t.prototype,"change",void 0),t=Su([ps],t)}(ku),Lu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Du=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Iu=["title","class","style"],Ou=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.previousElementValue="",s.isDateIconClicked=!1,s.isAltKeyPressed=!1,s.isInteracted=!0,s.isBlazorServer=!1,s.invalidValueString=null,s.checkPreviousValue=null,s.isAngular=!1,s.preventChange=!1,s.isIconClicked=!1,s.isDynamicValueChanged=!1,s.datepickerOptions=t,s}return Lu(t,e),t.prototype.render=function(){this.initialize(),this.bindEvents(),this.renderComplete(),this.isBlazorServer||this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!ae(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Di(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&Ci([this.inputWrapper.container],["e-non-edit"]):""===this.inputElement.value?Ci([this.inputWrapper.container],["e-non-edit"]):bi([this.inputWrapper.container],["e-non-edit"])},t.prototype.initialize=function(){if(this.isBlazorServer){var e=this.element.parentElement;this.inputWrapper={container:e,clearButton:e.querySelector(".e-clear-icon"),buttons:[e.querySelector(".e-date-icon")]},Na.bindInitialEvent({element:this.inputElement,floatLabelType:this.floatLabelType}),this.showClearButton&&this.inputWrapper.clearButton&&Na.wireClearBtnEvents(this.inputElement,this.inputWrapper.clearButton,this.inputWrapper.container),this.setAllowEdit()}else this.checkInvalidValue(this.value),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput();this.previousElementValue=this.inputElement.value,this.previousDate=ae(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){var e={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){var t={placeholder:this.placeholder};this.globalize=new Qe(this.locale),this.l10n=new Js("datepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var i=this.cssClass;ae(this.cssClass)||""===this.cssClass||(i=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Na.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:i,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),""!==this.inputElement.name?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),Di(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),Na.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),bi([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(){var t;if(this.value&&!this.isCalendar()&&(this.isBlazorServer||this.disabledDates()),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(e.prototype.validateDate.call(this),this.minMaxUpdates(),e.prototype.minMaxUpdate.call(this)),!ae(this.value)){var i=this.value,s=void 0,n=ae(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?s="Gregorian"===this.calendarMode?this.globalize.formatDate(this.value,{format:n,type:"dateTime",skeleton:ye()?"d":"yMd"}):this.globalize.formatDate(this.value,{format:n,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(t="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.formatDate(this.value,t)),+i<=+this.max&&+i>=+this.min)this.updateInputValue(s);else{var o=+i>=+this.max||!+this.value||!+this.value||+i<=+this.min;!this.strictMode&&o&&this.updateInputValue(s)}}ae(this.value)&&this.strictMode&&this.updateInputValue(""),!this.strictMode&&ae(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!ae(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!ae(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var t=null,i=null,s=null;if("datetimepicker"===this.getModuleName()){var n=new Qe(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:ye()?"d":"yMd"},s={format:n.getDatePattern({skeleton:ye()?"d":"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return ae(t=this.checkDateValue(this.globalize.parseDate(e,i)))&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,s))),t},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date||ae(e))){var t=null,i=e;"number"==typeof e&&(i=e.toString());if("datetimepicker"===this.getModuleName()){var s=new Qe(this.locale);"Gregorian"===this.calendarMode?({format:this.dateTimeFormat,type:"dateTime",skeleton:ye()?"d":"yMd"},{format:s.getDatePattern({skeleton:ye()?"d":"yMd"}),type:"dateTime"}):({format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},{format:s.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};var n=!1;if("string"!=typeof i)i=null,n=!0;else if("string"==typeof i&&(i=i.trim()),!(t=this.checkStringValue(i))){var o=null;o=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!o.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?n=!0:t=new Date(i)}n?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},t.prototype.bindInputEvent=function(){ae(this.formatString)||(-1===this.formatString.indexOf("y")?Ct.add(this.inputElement,"input",this.inputHandler,this):Ct.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){Ct.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler,this),Ct.add(this.inputElement,"focus",this.inputFocusHandler,this),Ct.add(this.inputElement,"blur",this.inputBlurHandler,this),this.bindInputEvent(),Ct.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&Ct.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&Ct.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=re(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Qs(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindEvents=function(){Ct.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler),Ct.remove(this.inputElement,"focus",this.inputFocusHandler),Ct.remove(this.inputElement,"blur",this.inputBlurHandler),Ct.remove(this.inputElement,"change",this.inputChangeHandler),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&Ct.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&Ct.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.isBlazorServer||(this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass()))}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=ae(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"})},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&Ct.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},t.prototype.clear=function(e){this.isBlazorServer||this.setProperties({value:null},!0),this.updateInputValue("");var t={event:e};this.trigger("cleared",t),this.invalidValueString="",this.isBlazorServer||(this.updateInput(),this.popupUpdate(),this.changeEvent(e)),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnValueCleared")},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){Na.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,bt.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),this.isBlazorServer||e.preventDefault(),this.readonly||(this.isCalendar()&&!this.isBlazorServer?this.hide(e):(!this.isBlazorServer||this.isBlazorServer&&this.inputWrapper.container.nextElementSibling)&&(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),bi([this.inputWrapper.container],["e-input-focus"]),bi(this.inputWrapper.buttons,"e-active"))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!ae(this.htmlAttributes[i])&&Iu.indexOf(i)>-1)if("class"===i){var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&bi([this.inputWrapper.container],s.split(" "))}else if("style"===i){var n=this.inputWrapper.container.getAttribute(i);ae(n)?n=this.htmlAttributes[i]:";"===n.charAt(n.length-1)?n+=this.htmlAttributes[i]:n=n+";"+this.htmlAttributes[i],this.inputWrapper.container.setAttribute(i,n)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHtmlAttributeToElement=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Iu.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){ae(t)||(t=t.replace(/\s+/g," ").trim()),ae(e)||(e=e.replace(/\s+/g," ").trim()),Na.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&Na.setCssClass(e,[this.popupWrapper],t)},t.prototype.CalendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){if(this.enabled){var e={model:ye()&&this.isServerRendered?null:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},t.prototype.inputHandler=function(e){this.isPopupClicked=!1},t.prototype.inputBlurHandler=function(e){if(this.enabled){if(this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),""===this.inputElement.value&&ae(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()){var t={model:ye()&&this.isServerRendered?null:this};this.trigger("blur",t)}this.isCalendar()&&(this.defaultKeyConfigs=re(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Qs(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.CalendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},t.prototype.documentHandler=function(t){!ae(this.popupObj)&&(this.inputWrapper.container.contains(t.target)||this.popupObj.element&&this.popupObj.element.contains(t.target))&&"touchstart"!==t.type&&t.preventDefault();var i=t.target;Mi(i,".e-datepicker.e-popup-wrapper")||Mi(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?Mi(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!ae(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&Mi(i,".e-content")&&Mi(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(t):Mi(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+e.prototype.generateTodayVal.call(this,this.value)&&!this.isBlazorServer&&this.hide(t)):(this.hide(t),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e)),"datepicker"===this.getModuleName()&&(this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnPopupHide",!0):this.show(null,e));break;case"escape":this.hide(e);break;case"enter":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(t){this.previousDate=!ae(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(e.prototype.keyActionHandle.call(this,t),this.isBlazorServer||Di(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((ae(this.value)&&!ae(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll(".e-selected").length>0&&Ci(this.popupObj.element.querySelectorAll(".e-selected"),["e-selected"]),!ae(this.value)&&!this.isBlazorServer&&+this.value>=+this.min&&+this.value<=+this.max)){var t=new Date(this.checkValue(this.value));e.prototype.navigateTo.call(this,"Month",t)}},t.prototype.strictModeUpdate=function(){var e,t,i,s;(e="datetimepicker"===this.getModuleName()?ae(this.formatString)?this.dateTimeFormat:this.formatString:ae(this.formatString)?this.formatString:this.formatString.replace("dd","d"),ae(e))||e.split("M").length-1<3&&(e=e.replace("MM","M"));i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:ae(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:ae(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?s=this.globalize.parseDate(this.inputElement.value,i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:ye()?"d":"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.parseDate(this.inputElement.value,t)):(s=this.globalize.parseDate(this.inputElement.value,i),!ae(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&s.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&s&&s.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&s?(this.updateInputValue(this.globalize.formatDate(s,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:s},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:s},!0),this.strictMode&&!s&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),ae(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.isBlazorServer?(this.popupWrapper=this.inputWrapper.container.nextElementSibling,this.calendarElement=this.popupWrapper.firstElementChild,this.tableBodyElement=Ii("tbody",this.calendarElement),this.contentElement=Ii(".e-content",this.calendarElement)):(this.popupWrapper=this.createElement("div",{className:"e-datepicker e-popup-wrapper"}),ae(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass)),bt.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className="e-datepicker e-date-modal",document.body.className+=" e-date-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new lo(this.popupWrapper,{content:this.isBlazorServer?null:this.calendarElement,relateTo:bt.isDevice?document.body:this.inputWrapper.container,position:bt.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:bt.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=re(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new Qs(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.CalendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new Qs(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.CalendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&!e.isBlazorServer&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),Ti(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.setAriaAttributes()},targetExitViewport:function(){bt.isDevice||e.hide()}}),this.isBlazorServer||(this.popupObj.element.className+=" "+this.cssClass),this.setAriaAttributes()},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),n=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},n.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),s.appendChild(n),s.appendChild(o),t.appendChild(s),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!ae(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.changeEvent=function(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.selectCalendar=function(e){var t,i,s;i="datetimepicker"===this.getModuleName()&&ae(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(s="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)):(s="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s))),ae(t)||this.updateInputValue(t)},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-popup-wrapper"))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"==typeof e?ge(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:ge(this.width):"100%"},t.prototype.show=function(t,i){var s=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var n=!0,o=void 0;ae(this.value)||+this.value>=+this.min&&+this.value<=+this.max?o=this.value||null:(o=new Date(this.checkValue(this.value)),this.isBlazorServer||this.setProperties({value:null},!0)),this.isCalendar()||(this.isBlazorServer||(e.prototype.render.call(this),this.setProperties({value:o||null},!0)),this.previousDate=o,this.createCalendar()),bt.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){n=!1},popup:ye()&&this.isServerRendered?null:this.popupObj,event:i||null,cancel:!1,appendTo:bt.isDevice?this.mobilePopupWrapper:document.body};var r=this.preventArgs;this.trigger("open",r,function(t){if(s.preventArgs=t,n&&!s.preventArgs.cancel){s.isBlazorServer&&(s.popupWrapper.style.visibility="",s.popupWrapper.style.width="auto",s.popupWrapper.style.height="auto"),bi(s.inputWrapper.buttons,"e-active"),s.preventArgs.appendTo.appendChild(s.popupWrapper),s.popupObj.refreshPosition(s.inputElement);var i={name:"FadeIn",duration:bt.isDevice?0:300};1e3===s.zIndex?s.popupObj.show(new vs(i),s.element):s.popupObj.show(new vs(i),null),s.isBlazorServer||e.prototype.setOverlayIndex.call(s,s.mobilePopupWrapper,s.popupObj.element,s.modal,bt.isDevice),s.setAriaAttributes()}else s.popupObj.destroy(),s.isBlazorServer&&s.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),s.popupWrapper=s.popupObj=null;ae(s.inputElement)||""!==s.inputElement.value||!ae(s.tableBodyElement)&&s.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(bi([s.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),Ci(s.tableBodyElement.querySelectorAll("td.e-selected"),"e-selected")),Ct.add(document,"mousedown touchstart",s.documentHandler,s)})}},t.prototype.hide=function(e){var t=this;if(ae(this.popupWrapper))bt.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:ye()&&this.isServerRendered?null:this.popupObj,event:e||null,cancel:!1},Ci(this.inputWrapper.buttons,"e-active"),Ci([document.body],"e-date-overflow");var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(e){t.closeEventCallback(i,e)}):this.closeEventCallback(i,s)}},t.prototype.closeEventCallback=function(e,t){if(this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel){this.isBlazorServer?(this.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),this.isAltKeyPressed=!1,this.popupWrapper=this.popupObj=null):(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy()),Ci(this.inputWrapper.buttons,"e-active")}this.setAriaAttributes(),bt.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),bt.isDevice&&(ae(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),Ct.remove(document,"mousedown touchstart",this.documentHandler),bt.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){if(document.activeElement!==this.inputElement&&this.enabled){this.inputElement.focus(),bi([this.inputWrapper.container],["e-input-focus"])}},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(Ci([this.inputWrapper.container],["e-input-focus"]),this.inputElement.blur())},t.prototype.currentView=function(){var t;return this.calendarElement&&(t=e.prototype.currentView.call(this)),t},t.prototype.navigateTo=function(t,i){this.calendarElement&&e.prototype.navigateTo.call(this,t,i)},t.prototype.destroy=function(){this.unBindEvents(),this.isBlazorServer||(e.prototype.destroy.call(this),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&e.prototype.destroy.call(this));var t={"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"};this.inputElement&&(Na.removeAttributes(t,this.inputElement),ae(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),Ct.remove(this.inputElement,"blur",this.inputBlurHandler),Ct.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&Ti(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.isBlazorServer||this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),Ci([this.inputElement],["e-input"])),Ci([this.element],["e-datepicker"]),Ti(this.inputWrapper.container)),this.formElement&&Ct.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)ae(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),Ci([this.inputElementCopy],["e-datepicker","e-control","e-lib"]),this.inputElement=this.element,this.formElement=Mi(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.isBlazorServer=!(!ye()||!this.isServerRendered||"datepicker"!==this.getModuleName()),this.isBlazorServer||(this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=he("ej2-datetimepicker"),null!==this.ngTag&&Di(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=he("ej2-datepicker"),null!==this.ngTag&&Di(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement()),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.isBlazorServer||(this.element.removeAttribute("tabindex"),e.prototype.preRender.call(this))},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],n=0;n<s.length;n++)if(!ae(e.getAttribute(s[n]))){var o=e.getAttribute(s[n]);t.setAttribute(s[n],o),e.removeAttribute(s[n])}},t.prototype.checkFormat=function(){var e=new Qe(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=ye()?this.format.replace(/tt/,"a"):this.format;else if(""===this.format.skeleton||ae(this.format.skeleton))"datetimepicker"===this.getModuleName()?this.formatString=this.dateTimeFormat:this.formatString=null;else{var t=this.format.skeleton;"datetimepicker"===this.getModuleName()?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new Qe(this.locale),this.checkFormat(),this.checkView();var t,i=e?ae(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];t="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:ae(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:ae(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,n=i;s<n.length;s++){var o=n[s];if(!ae(this.inputElement.getAttribute(o)))switch(o){case"disabled":if((ae(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e)&&!this.isBlazorServer){var r="disabled"!==this.inputElement.getAttribute(o)&&""!==this.inputElement.getAttribute(o)&&"true"!==this.inputElement.getAttribute(o);this.setProperties({enabled:r},!e)}break;case"readonly":if((ae(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e)&&!this.isBlazorServer){var a="readonly"===this.inputElement.getAttribute(o)||""===this.inputElement.getAttribute(o)||"true"===this.inputElement.getAttribute(o);this.setProperties({readonly:a},!e)}break;case"placeholder":if((ae(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&!this.isBlazorServer){this.inputElement.getAttribute(o);this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e)}break;case"style":this.isBlazorServer||this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(o));break;case"name":this.isBlazorServer||this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(o));break;case"value":if((ae(this.datepickerOptions)||void 0===this.datepickerOptions.value||e)&&!this.isBlazorServer){var l=this.inputElement.getAttribute(o);this.setProperties(te(o,this.globalize.parseDate(l,t),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var h=this.inputElement.getAttribute(o);this.setProperties(te(o,this.globalize.parseDate(h),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var c=this.inputElement.getAttribute(o);this.setProperties(te(o,this.globalize.parseDate(c),{}),!e)}break;case"type":"text"===this.inputElement.getAttribute(o)||this.isBlazorServer||this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(){var t,i;t=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value));var s=this.previousDate;this.minMaxUpdates(),this.isBlazorServer||e.prototype.render.call(this),this.previousDate=s;var n,o='*[id^="/id"]'.replace("/id",""+(t&&+t));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+t)&&this.setProperties({value:t},!0),ae(this.calendarElement.querySelectorAll(o)[0])||this.calendarElement.querySelectorAll(o)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?n="Gregorian"===this.calendarMode?this.globalize.formatDate(t,{format:ae(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}):this.globalize.formatDate(t,{format:ae(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:ye()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.formatDate(t,i)),this.popupObj||this.updateInputValue(n)},t.prototype.setAriaAttributes=function(){if(this.isBlazorServer)if(this.isCalendar()){var e=this.tableBodyElement.querySelector("tr td.e-focused-date"),t=this.tableBodyElement.querySelector("tr td.e-selected"),i=e||t?(e||t).getAttribute("id"):"null";Di(this.inputElement,{"aria-activedescendant":""+i})}else Di(this.inputElement,{"aria-activedescendant":"null"});else this.isCalendar()?(Na.addAttributes({"aria-expanded":"true"},this.inputElement),Di(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(Na.addAttributes({"aria-expanded":"false"},this.inputElement),Di(this.inputElement,{"aria-activedescendant":"null"}))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!ae(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&ae(this.value)||t?(bi([this.inputWrapper.container],"e-error"),Di(this.inputElement,{"aria-invalid":"true"})):(Ci([this.inputWrapper.container],"e-error"),Di(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(t,i){"Gregorian"===this.calendarMode?(this.formatString,ye()):this.formatString;for(var s=0,n=Object.keys(t);s<n.length;s++){switch(n[s]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.isBlazorServer||this.checkInvalidValue(t.value),t.value=this.value,this.previousElementValue=this.inputElement.value,this.isBlazorServer||(ae(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(),+this.previousDate!=+this.value&&this.changeTrigger(null)),this.isInteracted=!0;break;case"format":this.checkFormat(),this.bindInputEvent(),this.isBlazorServer||this.updateInput();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":Na.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":Na.setReadonly(this.readonly,this.inputElement);break;case"enabled":Na.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new Qe(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Na.setPlaceholder(this.placeholder,this.inputElement),this.isBlazorServer||this.updateInput();break;case"enableRtl":Na.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&!this.isBlazorServer&&e.prototype.onPropertyChanged.call(this,t,i);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"showClearButton":Na.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.isBlazorServer||this.updateInput();break;case"width":this.setWidth(t.width);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,Na.removeFloating(this.inputWrapper),Na.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;default:this.calendarElement&&!this.isBlazorServer&&e.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}},Du([os(null)],t.prototype,"width",void 0),Du([os(null)],t.prototype,"value",void 0),Du([os(null)],t.prototype,"cssClass",void 0),Du([os(!1)],t.prototype,"strictMode",void 0),Du([os(null)],t.prototype,"format",void 0),Du([os(!0)],t.prototype,"enabled",void 0),Du([os({})],t.prototype,"htmlAttributes",void 0),Du([os(null)],t.prototype,"values",void 0),Du([os(!1)],t.prototype,"isMultiSelection",void 0),Du([os(!0)],t.prototype,"showClearButton",void 0),Du([os(!0)],t.prototype,"allowEdit",void 0),Du([os(null)],t.prototype,"keyConfigs",void 0),Du([os(!1)],t.prototype,"enablePersistence",void 0),Du([os(1e3)],t.prototype,"zIndex",void 0),Du([os(!1)],t.prototype,"readonly",void 0),Du([os(null)],t.prototype,"placeholder",void 0),Du([os("Never")],t.prototype,"floatLabelType",void 0),Du([os(null)],t.prototype,"serverTimezoneOffset",void 0),Du([os(!1)],t.prototype,"openOnFocus",void 0),Du([cs()],t.prototype,"open",void 0),Du([cs()],t.prototype,"cleared",void 0),Du([cs()],t.prototype,"close",void 0),Du([cs()],t.prototype,"blur",void 0),Du([cs()],t.prototype,"focus",void 0),Du([cs()],t.prototype,"created",void 0),Du([cs()],t.prototype,"destroyed",void 0),t=Du([ps],t)}(Tu),Au=function(){function e(e){this.calendarInstance=e}return e.prototype.getModuleName=function(){return"islamic"},e.prototype.islamicTitleUpdate=function(e,t){var i=new Qe(this.calendarInstance.locale);switch(t){case"days":this.calendarInstance.headerTitleElement.textContent=i.formatDate(e,{type:"dateTime",format:"MMMMyyyy",calendar:"islamic"});break;case"months":this.calendarInstance.headerTitleElement.textContent=i.formatDate(e,{type:"dateTime",format:"yyyy",calendar:"islamic"})}},e.prototype.islamicRenderDays=function(e,t,i,s){var n,o=[],r=new Date(this.islamicInValue(e));this.calendarInstance.weekNumber;this.islamicTitleUpdate(e,"days");var a=this.getIslamicDate(r),l=this.toGregorian(a.year,a.month,1),h=a.month;for(r=l;r.getDay()!==this.calendarInstance.firstDayOfWeek;)this.calendarInstance.setStartDate(r,-864e5);for(var c=0;c<42;++c){var p=this.calendarInstance.createElement("td",{className:"e-cell"}),d=this.calendarInstance.createElement("span");c%7==0&&this.calendarInstance.weekNumber&&(d.textContent=""+this.calendarInstance.getWeek(r),p.appendChild(d),bi([p],"e-week-number"),o.push(p)),n=new Date(+r),r=this.calendarInstance.minMaxDate(r);var u={type:"dateTime",skeleton:"full",calendar:"islamic"},m=this.calendarInstance.globalize.parseDate(this.calendarInstance.globalize.formatDate(r,u),u),f=this.islamicDayCell(r),g=this.calendarInstance.globalize.formatDate(r,{type:"date",skeleton:"full",calendar:"islamic"}),v=this.calendarInstance.createElement("span");v.textContent=this.calendarInstance.globalize.formatDate(r,{type:"date",skeleton:"d",calendar:"islamic"});var y=this.calendarInstance.min>r||this.calendarInstance.max<r;y?(bi([f],"e-disabled"),bi([f],"e-overlay")):v.setAttribute("title",""+g),h!==this.getIslamicDate(r).month&&bi([f],"e-other-month"),0!==r.getDay()&&6!==r.getDay()||bi([f],"e-weekend"),f.appendChild(v),this.calendarInstance.renderDayCellArgs={date:r,isDisabled:!1,element:f,isOutOfRange:y};var b=this.calendarInstance.renderDayCellArgs;if(this.calendarInstance.renderDayCellEvent(b),b.isDisabled)if(this.calendarInstance.isMultiSelection){if(!ae(this.calendarInstance.values)&&this.calendarInstance.values.length>0)for(var C=0;C<s.length;C++){+new Date(this.calendarInstance.globalize.formatDate(b.date,{type:"date",skeleton:"yMd",calendar:"islamic"}))===+new Date(this.calendarInstance.globalize.formatDate(this.calendarInstance.values[C],{type:"date",skeleton:"yMd",calendar:"islamic"}))&&(this.calendarInstance.values.splice(C,1),C=-1)}}else t&&+t==+b.date&&this.calendarInstance.setProperties({value:null},!0);this.calendarInstance.renderDayCellArgs.isDisabled&&!f.classList.contains("e-selected")&&(bi([f],"e-disabled"),bi([f],"e-overlay"),+this.calendarInstance.renderDayCellArgs.date==+this.calendarInstance.todayDate&&(this.calendarInstance.todayDisabled=!0));var S=f.classList.contains("e-other-month"),x=f.classList.contains("e-disabled");if(x||Ct.add(f,"click",this.calendarInstance.clickHandler,this.calendarInstance),!this.calendarInstance.isMultiSelection||ae(this.calendarInstance.values)||S||x)S||x||!this.calendarInstance.getDateVal(r,t)?this.calendarInstance.updateFocus(S,x,r,f,e):bi([f],"e-selected");else{for(var w=0;w<this.calendarInstance.values.length;w++){this.calendarInstance.globalize.formatDate(r,{type:"date",skeleton:"short",calendar:"islamic"})===this.calendarInstance.globalize.formatDate(this.calendarInstance.values[w],{type:"date",skeleton:"short",calendar:"islamic"})&&this.calendarInstance.getDateVal(r,this.calendarInstance.values[w])?bi([f],"e-selected"):this.calendarInstance.updateFocus(S,x,r,f,e)}this.calendarInstance.values.length<=0&&this.calendarInstance.updateFocus(S,x,r,f,e)}m.getDate()===(new Date).getDate()&&m.getMonth()===(new Date).getMonth()&&m.getFullYear()===(new Date).getFullYear()&&bi([f],"e-today"),r=new Date(+n),o.push(this.calendarInstance.renderDayCellArgs.element),this.calendarInstance.addDay(r,1,null,this.calendarInstance.max,this.calendarInstance.min)}return o},e.prototype.islamicIconHandler=function(){new Date(this.islamicInValue(this.calendarInstance.currentDate)).setDate(1);var e=new Date(this.islamicInValue(this.calendarInstance.currentDate));switch(this.calendarInstance.currentView()){case"Month":var t=this.islamicCompareMonth(e,this.calendarInstance.min)<1,i=this.islamicCompareMonth(e,this.calendarInstance.max)>-1;this.calendarInstance.previousIconHandler(t),this.calendarInstance.nextIconHandler(i);break;case"Year":var s=this.hijriCompareYear(e,this.calendarInstance.min)<1,n=this.hijriCompareYear(e,this.calendarInstance.max)>-1;this.calendarInstance.previousIconHandler(s),this.calendarInstance.nextIconHandler(n);break;case"Decade":var o=this.hijriCompareDecade(e,this.calendarInstance.min)<1,r=this.hijriCompareDecade(e,this.calendarInstance.max)>-1;this.calendarInstance.previousIconHandler(o),this.calendarInstance.nextIconHandler(r)}},e.prototype.islamicNext=function(){this.calendarInstance.effect="";var e=this.calendarInstance.getViewNumber(this.calendarInstance.currentView()),t=this.getIslamicDate(this.calendarInstance.currentDate);switch(this.calendarInstance.currentView()){case"Year":this.calendarInstance.currentDate=this.toGregorian(t.year+1,t.month,1),this.calendarInstance.switchView(e);break;case"Month":this.calendarInstance.currentDate=this.toGregorian(t.year,t.month+1,1),this.calendarInstance.switchView(e);break;case"Decade":this.calendarInstance.currentDate=this.toGregorian(t.year+10,t.month,1),this.calendarInstance.switchView(e)}},e.prototype.islamicPrevious=function(){var e=this.calendarInstance.getViewNumber(this.calendarInstance.currentView());this.calendarInstance.effect="";var t=this.getIslamicDate(this.calendarInstance.currentDate);switch(this.calendarInstance.currentView()){case"Month":this.calendarInstance.currentDate=this.toGregorian(t.year,t.month-1,1),this.calendarInstance.switchView(e);break;case"Year":this.calendarInstance.currentDate=this.toGregorian(t.year-1,t.month,1),this.calendarInstance.switchView(e);break;case"Decade":this.calendarInstance.currentDate=this.toGregorian(t.year-10,t.month-1,1),this.calendarInstance.switchView(e)}},e.prototype.islamicRenderYears=function(e,t){this.calendarInstance.removeTableHeadElement();var i=[],s=ae(t),n=new Date(this.islamicInValue(this.calendarInstance.currentDate)),o=this.getIslamicDate(n);n=we.toGregorian(o.year,1,1);var r=o.month,a=o.year,l=o.year,h=this.getIslamicDate(this.calendarInstance.min).year,c=this.getIslamicDate(this.calendarInstance.min).month,p=this.getIslamicDate(this.calendarInstance.max).year,d=this.getIslamicDate(this.calendarInstance.max).month;this.islamicTitleUpdate(this.calendarInstance.currentDate,"months");this.calendarInstance.min>n||this.calendarInstance.max;for(var u=1;u<=12;++u){var m=this.getIslamicDate(n);n=we.toGregorian(m.year,u,1);var f=this.islamicDayCell(n),g=this.calendarInstance.createElement("span"),v=t&&this.getIslamicDate(t).month===this.getIslamicDate(n).month,y=t&&this.getIslamicDate(t).year===a&&v;g.textContent=this.calendarInstance.globalize.formatDate(n,{type:"dateTime",format:"MMM",calendar:"islamic"}),this.calendarInstance.min&&(l<h||u<c&&l===h)||this.calendarInstance.max&&(l>p||u>d&&l>=p)?bi([f],"e-disabled"):!s&&y?bi([f],"e-selected"):this.getIslamicDate(n).month===r&&this.getIslamicDate(this.calendarInstance.currentDate).month===r&&bi([f],"e-focused-date"),f.classList.contains("e-disabled")||Ct.add(f,"click",this.calendarInstance.clickHandler,this.calendarInstance),f.appendChild(g),i.push(f)}this.islamicRenderTemplate(i,4,"e-year",e,t)},e.prototype.islamicRenderDecade=function(e,t){this.calendarInstance.removeTableHeadElement();var i=[],s=new Date(this.islamicInValue(this.calendarInstance.currentDate)),n=this.getIslamicDate(s),o=(s=we.toGregorian(n.year,1,1)).getFullYear(),r=new Date(this.islamicInValue(o-o%10)),a=new Date(this.islamicInValue(o-o%10+9)),l=r.getFullYear(),h=a.getFullYear(),c=this.calendarInstance.globalize.formatDate(r,{type:"dateTime",format:"y",calendar:"islamic"}),p=this.calendarInstance.globalize.formatDate(a,{type:"dateTime",format:"y",calendar:"islamic"});this.calendarInstance.headerTitleElement.textContent=c+" - "+p;for(var d=new Date(o-o%10-2,0,1).getFullYear(),u=1;u<=12;++u){var m=d+u;s.setFullYear(m),s.setDate(1),s.setMonth(0);var f=this.getIslamicDate(s);s=we.toGregorian(f.year,1,1);var g=this.islamicDayCell(s);Di(g,{role:"gridcell"});var v=this.calendarInstance.createElement("span");v.textContent=this.calendarInstance.globalize.formatDate(s,{type:"dateTime",format:"y",calendar:"islamic"}),m<l||m>h?bi([g],"e-other-month"):m<new Date(this.islamicInValue(this.calendarInstance.min)).getFullYear()||m>new Date(this.islamicInValue(this.calendarInstance.max)).getFullYear()?bi([g],"e-disabled"):ae(t)||this.getIslamicDate(s).year!==this.getIslamicDate(t).year?s.getFullYear()!==this.calendarInstance.currentDate.getFullYear()||g.classList.contains("e-disabled")||bi([g],"e-focused-date"):bi([g],"e-selected"),g.classList.contains("e-disabled")||Ct.add(g,"click",this.calendarInstance.clickHandler,this.calendarInstance),g.appendChild(v),i.push(g)}this.islamicRenderTemplate(i,4,"e-decade",e,t)},e.prototype.islamicDayCell=function(e){var t={skeleton:"full",type:"dateTime",calendar:"islamic"},i=this.calendarInstance.globalize.formatDate(e,t),s={className:"e-cell",attrs:{id:""+he(""+this.calendarInstance.globalize.parseDate(i,t).valueOf()),"aria-selected":"false",role:"gridcell"}};return this.calendarInstance.createElement("td",s)},e.prototype.islamicRenderTemplate=function(e,t,i,s,n){var o,r=this.calendarInstance.getViewNumber(this.calendarInstance.currentView());this.calendarInstance.tableBodyElement=this.calendarInstance.createElement("tbody"),this.calendarInstance.table.appendChild(this.calendarInstance.tableBodyElement),Ci([this.calendarInstance.contentElement,this.calendarInstance.headerElement],["e-month","e-decade","e-year"]),bi([this.calendarInstance.contentElement,this.calendarInstance.headerElement],[i]);for(var a=t,l=0,h=0;h<e.length/t;++h){for(o=this.calendarInstance.createElement("tr",{attrs:{role:"row"}}),l=0+l;l<a;l++)e[l].classList.contains("e-week-number")||ae(e[l].children[0])||(bi([e[l].children[0]],["e-day"]),ys(e[l].children[0],{duration:600,isCenterRipple:!0})),o.appendChild(e[l]),this.calendarInstance.weekNumber&&7===l&&e[7].classList.contains("e-other-month")&&bi([o],"e-month-hide"),!this.calendarInstance.weekNumber&&6===l&&e[6].classList.contains("e-other-month")&&bi([o],"e-month-hide"),this.calendarInstance.weekNumber?41===l&&e[41].classList.contains("e-other-month")&&bi([o],"e-month-hide"):35===l&&e[35].classList.contains("e-other-month")&&bi([o],"e-month-hide");a+=t,l+=0,this.calendarInstance.tableBodyElement.appendChild(o)}this.calendarInstance.table.querySelector("tbody").className=this.calendarInstance.effect,this.islamicIconHandler(),(r!==this.calendarInstance.getViewNumber(this.calendarInstance.currentView())||0===r&&r!==this.calendarInstance.getViewNumber(this.calendarInstance.currentView()))&&this.calendarInstance.navigateHandler(s),this.calendarInstance.setAriaActiveDescendant(),this.calendarInstance.changedArgs={value:this.calendarInstance.value,values:this.calendarInstance.values},this.calendarInstance.changeHandler()},e.prototype.islamicCompareMonth=function(e,t){var i=this.getIslamicDate(e),s=this.getIslamicDate(t);return i.year>s.year?1:i.year<s.year?-1:i.month===s.month?0:i.month>s.month?1:-1},e.prototype.islamicCompare=function(e,t,i){var s,n,o=this.getIslamicDate(e),r=this.getIslamicDate(t).year;return s=r,n=0,i&&(s=(r-=r%i)-r%i+i-1),o.year>s?n=1:"Decade"===this.calendarInstance.currentView()&&o.year<r&&!(e.getFullYear()>=2060&&e.getFullYear()<=2069)?n=-1:o.year<r&&"Year"===this.calendarInstance.currentView()&&(n=-1),n},e.prototype.getIslamicDate=function(e){return we.getHijriDate(e)},e.prototype.toGregorian=function(e,t,i){return we.toGregorian(e,t,i)},e.prototype.hijriCompareYear=function(e,t){return this.islamicCompare(e,t,0)},e.prototype.hijriCompareDecade=function(e,t){return this.islamicCompare(e,t,10)},e.prototype.destroy=function(){this.calendarInstance=null},e.prototype.islamicInValue=function(e){return e instanceof Date?e.toUTCString():""+e},e}(),Mu={},Pu={},Nu={},Ru={};Object(Y.copy)(Mu,R),Object(Y.copy)(Pu,s),Object(Y.copy)(Nu,o),Object(Y.copy)(Ru,v),Object(Y.copy)(Mu,B);var Bu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Hu=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Fu="e-left-calendar",ju="e-right-calendar",Vu="e-start-date",zu="e-end-date",_u="e-range-hover",qu="e-calendar",Wu="e-focused-date",Uu="e-day-span",Gu="e-date-disabled",Yu="e-icon-disabled",Xu="e-list-item",Ku="e-hover",Zu=["title","class","style"],Qu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bu(t,e),Hu([os()],t.prototype,"label",void 0),Hu([os()],t.prototype,"start",void 0),Hu([os()],t.prototype,"end",void 0),t}(Ls),Ju=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isCustomRange=!1,s.isCustomWindow=!1,s.presetsItem=[],s.liCollections=[],s.previousEleValue="",s.isKeyPopup=!1,s.dateDisabled=!1,s.isRangeIconClicked=!1,s.isMaxDaysClicked=!1,s.disabledDays=[],s.preventBlur=!1,s.preventFocus=!1,s.invalidValueString=null,s.isAngular=!1,s.preventChange=!1,s.dateRangeOptions=t,s}return Bu(t,e),t.prototype.render=function(){this.initialize(),this.setProperties({startDate:this.startValue},!0),this.setProperties({endDate:this.endValue},!0),this.setModelValue(),this.setDataAttribute(!1),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()},t.prototype.preRender=function(){if(this.keyInputConfigs={altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",moveUp:"uparrow",moveDown:"downarrow",spacebar:"space"},this.defaultConstant={placeholder:this.placeholder,startLabel:"Start Date",endLabel:"End Date",customRange:"Custom Range",applyText:"Apply",cancelText:"Cancel",selectedDays:"Selected Days",days:"days"},this.isMobile=window.matchMedia("(max-width:550px)").matches,this.inputElement=this.element,this.angularTag=null,"EJS-DATERANGEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.cloneElement=this.element.cloneNode(!0),Ci([this.cloneElement],["e-daterangepicker","e-control","e-lib"]),this.updateHtmlAttributeToElement(),this.element.getAttribute("id")?null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):(this.element.id=he("ej2-datetimepicker"),null!==this.angularTag&&Di(this.inputElement,{id:this.element.id+"_input"})),this.checkInvalidRange(this.value),!this.invalidValueString&&"string"==typeof this.value){var t=this.value.split(" "+this.separator+" ");this.value=[new Date(t[0]),new Date(t[1])]}this.initProperty(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),e.prototype.preRender.call(this),this.navNextFunction=this.navNextMonth.bind(this),this.navPrevFunction=this.navPrevMonth.bind(this),this.deviceNavNextFunction=this.deviceNavNext.bind(this),this.deviceNavPrevFunction=this.deviceNavPrevious.bind(this),this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue),this.formElement=Mi(this.element,"form")},t.prototype.updateValue=function(){this.formatString,ye();this.value&&this.value.length>0?(this.value[0]instanceof Date&&!isNaN(+this.value[0])?(this.setProperties({startDate:this.value[0]},!0),this.startValue=this.value[0]):"string"==typeof this.value[0]?0==+this.value[0]||isNaN(+new Date(this.checkValue(this.value[0])))?(this.startValue=null,this.setValue()):(this.setProperties({startDate:new Date(this.checkValue(this.value[0]))},!0),this.startValue=new Date(this.checkValue(this.value[0]))):(this.startValue=null,this.setValue()),this.value[1]instanceof Date&&!isNaN(+this.value[1])?(this.setProperties({endDate:this.value[1]},!0),this.endValue=this.value[1]):"string"==typeof this.value[1]?0==+this.value[0]||isNaN(+new Date(this.checkValue(this.value[0])))?(this.setProperties({endDate:null},!0),this.endValue=null,this.setValue()):(this.setProperties({endDate:new Date(this.checkValue(this.value[1]))},!0),this.endValue=new Date(this.checkValue(this.value[1])),this.setValue()):(this.setProperties({endDate:null},!0),this.endValue=null,this.setValue())):this.value&&this.value.start?(this.value.start instanceof Date&&!isNaN(+this.value.start)?(this.setProperties({startDate:this.value.start},!0),this.startValue=this.value.start):"string"==typeof this.value.start?(this.setProperties({startDate:new Date(this.checkValue(this.value.start))},!0),this.startValue=new Date(this.checkValue(this.value.start))):(this.startValue=null,this.setValue()),this.value.end instanceof Date&&!isNaN(+this.value.end)?(this.setProperties({endDate:this.value.end},!0),this.endValue=this.value.end):"string"==typeof this.value.end?(this.setProperties({endDate:new Date(this.checkValue(this.value.end))},!0),this.endValue=new Date(this.checkValue(this.value.end)),this.setValue()):(this.setProperties({endDate:null},!0),this.endValue=null,this.setValue())):ae(this.value)&&(this.endValue=this.checkDateValue(new Date(this.checkValue(this.endDate))),this.startValue=this.checkDateValue(new Date(this.checkValue(this.startDate))),this.setValue())},t.prototype.initProperty=function(){this.globalize=new Qe(this.locale),this.checkFormat(),this.checkView(),(ae(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.updateValue()},t.prototype.checkFormat=function(){if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||ae(this.format.skeleton))this.formatString=null;else{var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({skeleton:e,type:"date"})}else this.formatString=null},t.prototype.initialize=function(){null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.checkHtmlAttributes(!1),oe(this.defaultKeyConfigs,{shiftTab:"shift+tab"});var e=this.checkDateValue(new Date(this.checkValue(this.startValue)));this.setProperties({startDate:e},!0),this.setProperties({endValue:this.checkDateValue(new Date(this.checkValue(this.endValue)))},!0),this.setValue(),this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.l10n=new Js("daterangepicker",this.defaultConstant,this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.processPresets(),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setRangeAllowEdit(),this.bindEvents()},t.prototype.setDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];0===o.indexOf("data")&&(this.firstHiddenChild.setAttribute(o,t[o]),this.secondHiddenChild.setAttribute(o,t[o]))}},t.prototype.setRangeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Di(this.inputElement,{readonly:""}),this.updateClearIconState()},t.prototype.updateClearIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&Ci([this.inputWrapper.container],["e-non-edit"]):""===this.inputElement.value?Ci([this.inputWrapper.container],["e-non-edit"]):bi([this.inputWrapper.container],["e-non-edit"])},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],n=0;n<s.length;n++)if(!ae(e.getAttribute(s[n]))){var o=e.getAttribute(s[n]);t.setAttribute(s[n],o),e.removeAttribute(s[n])}},t.prototype.updateHtmlAttributeToWrapper=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Zu.indexOf(i)>-1)if("class"===i){var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&bi([this.inputWrapper.container],s.split(" "))}else if("style"===i){var n=this.inputWrapper.container.getAttribute(i);n=ae(n)?this.htmlAttributes[i]:n+this.htmlAttributes[i],this.inputWrapper.container.setAttribute(i,n)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHtmlAttributeToElement=function(){if(!ae(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Zu.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){ae(t)||(t=t.replace(/\s+/g," ").trim()),ae(e)||(e=e.replace(/\s+/g," ").trim()),Na.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&Na.setCssClass(e,[this.popupWrapper],t)},t.prototype.processPresets=function(){this.presetsItem=[];var e=0;if(!le(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)){for(var t=0,i=this.presets;t<i.length;t++){var s=i[t],n=s.label.replace(/\s+/g,"")+"_"+ ++e;"string"==typeof s.end?this.presetsItem.push({id:n,text:s.label,end:new Date(this.checkValue(s.end)),start:new Date(this.checkValue(s.start))}):this.presetsItem.push({id:n,text:s.label,start:s.start,end:s.end})}var o=ae(this.startValue)?null:new Date(+this.startValue),r=ae(this.endValue)?null:new Date(+this.endValue);this.presetsItem.push({id:"custom_range",text:this.l10n.getConstant("customRange"),start:o,end:r}),ae(this.startValue)||ae(this.endValue)||(this.isCustomRange=!0,this.activeIndex=this.presetsItem.length-1)}},t.prototype.bindEvents=function(){Ct.add(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler,this),Ct.add(this.inputElement,"focus",this.inputFocusHandler,this),Ct.add(this.inputElement,"blur",this.inputBlurHandler,this),Ct.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&Ct.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this),this.isMobile||(this.keyInputConfigs=re(this.keyInputConfigs,this.keyConfigs),this.inputKeyboardModule=new Qs(this.inputElement,{eventName:"keydown",keyAction:this.inputHandler.bind(this),keyConfigs:this.keyInputConfigs})),this.formElement&&Ct.add(this.formElement,"reset",this.formResetHandler,this),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1},t.prototype.unBindEvents=function(){Ct.remove(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler),Ct.remove(this.inputElement,"blur",this.inputBlurHandler),Ct.remove(this.inputElement,"focus",this.inputFocusHandler),Ct.remove(this.inputElement,"change",this.inputChangeHandler),this.showClearButton&&this.inputWrapper.clearButton&&Ct.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.isMobile||ae(this.inputKeyboardModule)||this.inputKeyboardModule.destroy(),this.formElement&&Ct.remove(this.formElement,"reset",this.formResetHandler),this.inputElement.tabIndex=-1},t.prototype.updateHiddenInput=function(){if(this.firstHiddenChild&&this.secondHiddenChild){var e={type:"datetime",skeleton:ye()?"d":"yMd"};"string"==typeof this.startDate&&(this.startDate=this.globalize.parseDate(this.startDate,e)),"string"==typeof this.endDate&&(this.endDate=this.globalize.parseDate(this.endDate,e)),this.firstHiddenChild.value=this.startDate&&this.globalize.formatDate(this.startDate,e)||this.inputElement.value,this.secondHiddenChild.value=this.endDate&&this.globalize.formatDate(this.endDate,e)||this.inputElement.value,this.dispatchEvent(this.firstHiddenChild,"focusout"),this.dispatchEvent(this.firstHiddenChild,"change")}},t.prototype.inputChangeHandler=function(e){this.enabled&&(e.stopPropagation(),this.updateHiddenInput())},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&Ct.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.resetHandler=function(e){if(this.enabled){this.valueType=this.value,e.preventDefault(),this.clear();var t={event:e};this.setProperties({endDate:this.checkDateValue(this.endValue)},!0),this.setProperties({startDate:this.checkDateValue(this.startValue)},!0),this.trigger("cleared",t),this.changeTrigger(e),this.clearRange(),this.hide(e)}},t.prototype.restoreValue=function(){this.previousEleValue=this.inputElement.value,this.previousStartValue=this.startValue,this.previousEndValue=this.endValue,this.valueType=null,this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue),this.setValue(),this.setModelValue()},t.prototype.formResetHandler=function(e){if(this.enabled&&this.formElement&&e.target===this.formElement&&!this.inputElement.disabled){var t=this.inputElement.getAttribute("value");ae(this.startCopy)?(this.setProperties({value:null,startDate:null,endDate:null},!0),this.startValue=this.endValue=null):(ae(this.value)||ae(this.value.start)?(this.setProperties({value:[this.startCopy,this.endCopy]},!0),this.startValue=this.value[0],this.endValue=this.value[1]):(this.setProperties({value:{start:this.startCopy,end:this.endCopy}},!0),this.startValue=this.value.start,this.endValue=this.value.end),this.setProperties({startDate:this.startValue,endDate:this.endValue},!0)),"EJS-DATERANGEPICKER"===this.element.tagName&&(this.setProperties({value:null,startDate:null,endDate:null},!0),t="",this.startValue=this.endValue=null,this.inputElement.setAttribute("value","")),this.restoreValue(),this.inputElement&&(Na.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.errorClass())}},t.prototype.clear=function(){null!==this.startValue&&(this.startValue=null),null!==this.endValue&&(this.endValue=null),this.value&&this.value.start&&this.setProperties({value:{start:null,end:null}},!0),null!==this.value&&this.value.length>0&&this.setProperties({value:null},!0),Na.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),ae(this.applyButton)||(this.applyButton.disabled=this.applyButton.element.disabled=!0),this.removeSelection()},t.prototype.rangeIconHandler=function(e){this.enabled&&(this.isMobile&&this.inputElement.setAttribute("readonly",""),e.preventDefault(),this.targetElement=null,this.isPopupOpen()&&document.body.contains(this.popupObj.element)?this.applyFunction(e):(this.isRangeIconClicked=!0,this.inputWrapper.container.children[0].focus(),this.show(null,e),this.isMobile||ae(this.leftCalendar)||(this.isRangeIconClicked=!1,this.calendarFocus(),this.isRangeIconClicked=!0),bi([this.inputWrapper.container],["e-input-focus"])))},t.prototype.checkHtmlAttributes=function(e){this.globalize=new Qe(this.locale);for(var t=e?ae(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["startDate","endDate","minDays","maxDays","min","max","disabled","readonly","style","name","placeholder","type","value"],i={format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"},s=0,n=t;s<n.length;s++){var o=n[s];if(!ae(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(ae(this.dateRangeOptions)||void 0===this.dateRangeOptions.enabled||e){var r="disabled"===this.inputElement.getAttribute(o)||""===this.inputElement.getAttribute(o)||"true"===this.inputElement.getAttribute(o);this.setProperties({enabled:!r},!e)}break;case"readonly":if(ae(this.dateRangeOptions)||void 0===this.dateRangeOptions.readonly||e){var a="readonly"===this.inputElement.getAttribute(o)||"true"===this.inputElement.getAttribute(o)||""===this.inputElement.getAttribute(o);this.setProperties({readonly:a},!e)}break;case"placeholder":(ae(this.dateRangeOptions)||void 0===this.dateRangeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"value":if(ae(this.dateRangeOptions)||void 0===this.dateRangeOptions.value||e){var l=this.inputElement.getAttribute(o);this.setProperties(te(o,l,{}),!e)}break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(o));break;case"min":if(ae(this.min)||+this.min==+new Date(1900,0,1)||e){var h=this.globalize.parseDate(this.inputElement.getAttribute(o),i);this.setProperties(te(o,h,{}),!e)}break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(o));break;case"max":if(ae(this.max)||+this.max==+new Date(2099,11,31)||e){h=this.globalize.parseDate(this.inputElement.getAttribute(o),i);this.setProperties(te(o,h,{}),!e)}break;case"startDate":if(ae(this.startDate)){h=this.globalize.parseDate(this.inputElement.getAttribute(o),i);this.startValue=h,this.setValue()}break;case"endDate":if(ae(this.endDate)){h=this.globalize.parseDate(this.inputElement.getAttribute(o),i);this.endValue=h,this.setValue()}break;case"minDays":ae(this.minDays)&&this.setProperties(te(o,parseInt(this.inputElement.getAttribute(o),10),{}),!0);break;case"maxDays":ae(this.maxDays)&&this.setProperties(te(o,parseInt(this.inputElement.getAttribute(o),10),{}),!0);break;case"type":"text"!==this.inputElement.getAttribute(o)&&this.inputElement.setAttribute("type","text")}}},t.prototype.createPopup=function(){for(var e=0;e<this.presetsItem.length;e++)e!==this.presetsItem.length-1&&"custom_range"===this.presetsItem[e].id&&this.presetsItem.splice(e,1);this.activeIndex=this.presetsItem.length-1,this.isCustomRange=!0;for(e=0;e<=this.presetsItem.length-2;e++){var t=this.presetsItem[e].start,i=this.presetsItem[e].end;this.startValue&&this.endValue&&+t.setMilliseconds(0)==+this.startValue.setMilliseconds(0)&&+i.setMilliseconds(0)==+this.endValue.setMilliseconds(0)&&(this.activeIndex=e,this.isCustomRange=!1)}this.popupWrapper=yi("div",{id:this.element.id+"_popup",className:"e-daterangepicker e-popup"}),this.adjustLongHeaderWidth();var s=!this.isCustomRange||this.isMobile;!le(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)&&s?(this.isCustomWindow=!1,this.createPresets(),this.listRippleEffect(),this.renderPopup()):(this.isCustomWindow=!0,this.renderControl())},t.prototype.renderControl=function(){this.createControl(),this.bindCalendarEvents(),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),ae(this.endValue)||ae(this.startValue)||this.disabledDateRender(),this.updateHeader()},t.prototype.clearCalendarEvents=function(){Ct.clearEvents(this.leftCalPrevIcon),Ct.clearEvents(this.leftCalNextIcon),Ct.clearEvents(this.rightCalPrevIcon),Ct.clearEvents(this.rightCalNextIcon)},t.prototype.updateNavIcons=function(){e.prototype.iconHandler.call(this)},t.prototype.calendarIconEvent=function(){this.clearCalendarEvents(),this.leftCalPrevIcon&&!this.leftCalPrevIcon.classList.contains("e-disabled")&&Ct.add(this.leftCalPrevIcon,"mousedown",this.navPrevFunction),this.leftCalNextIcon&&!this.leftCalNextIcon.classList.contains("e-disabled")&&Ct.add(this.leftCalNextIcon,"mousedown",this.navNextFunction),this.rightCalPrevIcon&&!this.rightCalPrevIcon.classList.contains("e-disabled")&&Ct.add(this.rightCalPrevIcon,"mousedown",this.navPrevFunction),this.rightCalNextIcon&&!this.rightCalNextIcon.classList.contains("e-disabled")&&Ct.add(this.rightCalNextIcon,"mousedown",this.navNextFunction)},t.prototype.bindCalendarEvents=function(){this.isMobile?(this.deviceCalendarEvent(),Ct.add(this.startButton.element,"click",this.deviceHeaderClick,this),Ct.add(this.endButton.element,"click",this.deviceHeaderClick,this)):(this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.headerTitleElement=this.popupObj.element.querySelector(".e-right-calendar .e-header .e-title"),this.headerTitleElement=this.popupObj.element.querySelector(".e-left-calendar .e-header .e-title"),this.defaultKeyConfigs=re(this.defaultKeyConfigs,this.keyConfigs),this.leftKeyboardModule=new Qs(this.leftCalendar,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs}),this.rightKeyboardModule=new Qs(this.rightCalendar,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})),this.start===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate()},t.prototype.calendarIconRipple=function(){ys(this.leftCalPrevIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),ys(this.leftCalNextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),ys(this.rightCalPrevIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),ys(this.rightCalNextIcon,{selector:".e-next",duration:400,isCenterRipple:!0})},t.prototype.deviceCalendarEvent=function(){Ct.clearEvents(this.nextIcon),Ct.clearEvents(this.previousIcon),ys(this.nextIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),ys(this.previousIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.nextIcon&&!this.nextIcon.classList.contains("e-disabled")&&Ct.add(this.nextIcon,"mousedown",this.deviceNavNextFunction),this.previousIcon&&!this.previousIcon.classList.contains("e-disabled")&&Ct.add(this.previousIcon,"mousedown",this.deviceNavPrevFunction)},t.prototype.deviceNavNext=function(e){var t=Mi(e.target,"."+qu);this.updateDeviceCalendar(t),this.navigateNext(e),this.deviceNavigation()},t.prototype.deviceNavPrevious=function(e){var t=Mi(e.target,"."+qu);this.updateDeviceCalendar(t),this.navigatePrevious(e),this.deviceNavigation()},t.prototype.updateDeviceCalendar=function(e){e&&(this.previousIcon=e.querySelector(".e-prev"),this.nextIcon=e.querySelector(".e-next"),this.calendarElement=e,this.deviceCalendar=e,this.contentElement=e.querySelector(".e-content"),this.tableBodyElement=Ii(".e-content tbody",e),this.table=e.querySelector(".e-content").getElementsByTagName("table")[0],this.headerTitleElement=e.querySelector(".e-header .e-title"),this.headerElement=e.querySelector(".e-header"))},t.prototype.deviceHeaderClick=function(e){if(e.currentTarget.classList.contains("e-start-btn")&&!ae(this.startValue)){this.endButton.element.classList.remove("e-active"),this.startButton.element.classList.add("e-active");var t=this.popupObj.element.querySelector("."+qu);this.updateDeviceCalendar(t),ae(this.calendarElement.querySelector(".e-start-date:not(.e-other-month)"))&&(this.currentDate=new Date(+this.startValue),Li(this.tableBodyElement),this.createContentBody(),this.deviceNavigation()),this.removeClassDisabled()}else if(!ae(this.startValue)&&!ae(this.endValue)){this.startButton.element.classList.remove("e-active"),this.endButton.element.classList.add("e-active");t=this.popupObj.element.querySelector("."+qu);this.updateDeviceCalendar(t),ae(this.calendarElement.querySelector(".e-end-date:not(.e-other-month)"))&&(this.currentDate=new Date(+this.endValue),Li(this.tableBodyElement),this.createContentBody(),this.deviceNavigation()),this.updateMinMaxDays(this.popupObj.element.querySelector("."+qu)),this.selectableDates()}},t.prototype.inputFocusHandler=function(){if(this.enabled){this.preventBlur=!1;var e={model:ye()&&this.isServerRendered?null:this};this.preventFocus||(this.preventFocus=!0,this.trigger("focus",e)),this.updateClearIconState(),this.updateHiddenInput(),this.openOnFocus&&this.show()}},t.prototype.inputBlurHandler=function(e){if(this.enabled){if(!this.preventBlur){var t=this.inputElement.value;if(ae(this.presetsItem)||this.presetsItem.length>0&&this.previousEleValue!==this.inputElement.value&&(this.activeIndex=this.presetsItem.length-1,this.isCustomRange=!0),!ae(t)&&""!==t.trim()){var i=t.split(" "+this.separator+" ");if(i.length>1){this.invalidValueString=null;var s={format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"},n=this.globalize.parseDate(i[0].trim(),s),o=this.globalize.parseDate(i[1].trim(),s);if(!(ae(n)||isNaN(+n)||ae(o)||isNaN(+o))){var r=this.startValue;this.startValue=n;var a=this.endValue;if(this.endValue=o,this.setValue(),this.refreshControl(),t!==this.previousEleValue&&this.changeTrigger(e),!this.preventBlur&&document.activeElement!==this.inputElement){this.preventFocus=!1;var l={model:ye()&&this.isServerRendered?null:this};this.trigger("blur",l)}return this.updateHiddenInput(),void(this.isMobile&&this.isPopupOpen()&&(this.startValue=r,this.endValue=a))}this.strictMode||(this.startValue=null,this.endValue=null,this.setValue())}else this.strictMode||(this.startValue=null,this.endValue=null,this.setValue())}if(this.strictMode?(ae(t)||""!==t.trim()||(this.startValue=null,this.endValue=null),Na.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.updateInput()):(ae(this.popupObj)&&(this.currentDate=null),this.previousStartValue=this.previousEndValue=null,this.startValue=null,this.endValue=null,this.setValue()),this.errorClass(),this.changeTrigger(e),!this.preventBlur&&document.activeElement!==this.inputElement){this.preventFocus=!1;l={model:ye()&&this.isServerRendered?null:this};this.trigger("blur",l)}}this.updateHiddenInput()}},t.prototype.clearRange=function(){this.previousStartValue=this.previousEndValue=null,this.currentDate=null},t.prototype.errorClass=function(){var e=this.inputElement.value.trim();(ae(this.endValue)&&ae(this.startValue)&&""!==e||!ae(this.startValue)&&+this.startValue<+this.min||!ae(this.startValue)&&!ae(this.endValue)&&+this.startValue>+this.endValue||!ae(this.endValue)&&+this.endValue>+this.max||this.startValue&&this.isDateDisabled(this.startValue)||this.endValue&&this.isDateDisabled(this.endValue))&&""!==e?(bi([this.inputWrapper.container],"e-error"),Di(this.inputElement,{"aria-invalid":"true"})):this.inputWrapper&&(Ci([this.inputWrapper.container],"e-error"),Di(this.inputElement,{"aria-invalid":"false"}))},t.prototype.keyCalendarUpdate=function(e,t){return this.removeFocusedDate(),e?(this.leftCalCurrentDate=new Date(+this.currentDate),t=this.leftCalendar):(this.rightCalCurrentDate=new Date(+this.currentDate),t=this.rightCalendar),this.updateCalendarElement(t),this.table.focus(),t},t.prototype.navInCalendar=function(e,t,i,s,n){var o,r,a=this.getViewNumber(this.currentView()),l=this.min;switch(r=ae(this.maxDays)||!this.isMaxDaysClicked||ae(this.startValue)?this.max:new Date(new Date(+this.startValue).setDate(this.startValue.getDate()+(this.maxDays-1))),e.action){case"moveRight":o=new Date(+this.currentDate),this.addDay(o,1,e,r,l),t&&+o==+s&&(n=this.keyCalendarUpdate(!1,n)),this.KeyboardNavigate(1,a,e,r,l),this.keyNavigation(n,e);break;case"moveLeft":o=new Date(+this.currentDate),this.addDay(o,-1,e,r,l),t||+o==+i&&(n=this.keyCalendarUpdate(!0,n)),this.KeyboardNavigate(-1,a,e,r,l),this.keyNavigation(n,e);break;case"moveUp":0===a?(o=new Date(+this.currentDate),this.addDay(o,-7,e,r,l),+o<=+i&&!t&&(n=this.keyCalendarUpdate(!0,n)),this.KeyboardNavigate(-7,a,e,r,l)):this.KeyboardNavigate(-4,a,e,this.max,this.min),this.keyNavigation(n,e);break;case"moveDown":0===a?(o=new Date(+this.currentDate),this.addDay(o,7,e,r,l),t&&+o>=+s&&(n=this.keyCalendarUpdate(!1,n)),this.KeyboardNavigate(7,a,e,r,l)):this.KeyboardNavigate(4,a,e,this.max,this.min),this.keyNavigation(n,e);break;case"home":this.currentDate=this.firstDay(this.currentDate),Li(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),this.keyNavigation(n,e);break;case"end":this.currentDate=this.lastDay(this.currentDate,a),Li(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),this.keyNavigation(n,e)}},t.prototype.keyInputHandler=function(t,i){var s,n=this.getViewNumber(this.currentView()),o=new Date(this.rightCalCurrentDate.getFullYear(),this.rightCalCurrentDate.getMonth(),1),r=new Date(this.leftCalCurrentDate.getFullYear(),this.leftCalCurrentDate.getMonth()+1,0),a=Mi(t.target,"."+ju),l=(a=ae(a)?this.leftCalendar:a).classList.contains(Fu);this.updateCalendarElement(a);var h=this.tableBodyElement.querySelector("tr td.e-selected"),c=a.querySelector("tr td."+Wu),p=a.querySelector("tr td."+Vu),d=a.querySelector("tr td."+zu),u=this.getViewNumber(this.depth),m=n===u&&this.getViewNumber(this.start)>=u,f=Mi(t.target,"."+Fu),g=Mi(t.target,"."+ju),v=Mi(t.target,".e-presets");switch(ae(c)?ae(d)||this.dateDisabled?ae(p)||this.dateDisabled?this.dateDisabled||this.currentDate.setDate(1):this.currentDate=new Date(+this.startValue):this.currentDate=new Date(+this.endValue):this.currentDate=this.currentDate,this.effect="",t.action){case"altUpArrow":this.isPopupOpen()&&(this.hide(t),this.preventFocus=!0,this.inputElement.focus(),bi([this.inputWrapper.container],["e-input-focus"]));break;case"select":if(m){var y=ae(c)?p:c;ae(y)||y.classList.contains("e-disabled")||this.selectRange(null,y)}else(ae(h)||m)&&ae(c)||(ae(this.value)||(i=this.calendarElement.classList.contains(Fu)?this.startDate:this.endDate),this.controlDown=t,this.contentClick(null,--n,c||h,i));t.preventDefault();break;case"controlHome":var b=new Date(this.currentDate.getFullYear(),0,1);!l&&+b<+r&&(a=this.keyCalendarUpdate(!0,a)),e.prototype.navigateTo.call(this,"Month",new Date(this.currentDate.getFullYear(),0,1)),this.keyNavigation(a,t);break;case"altRightArrow":ae(f)?ae(g)?ae(v)||this.cancelButton.element.focus():ae(this.presetElement)?this.cancelButton.element.focus():(this.presetElement.focus(),this.removeFocusedDate()):this.rightCalendar.children[1].firstElementChild.focus(),t.preventDefault();break;case"altLeftArrow":ae(f)?ae(g)||this.leftCalendar.children[1].firstElementChild.focus():!0!==this.applyButton.element.disabled?this.applyButton.element.focus():this.cancelButton.element.focus(),t.preventDefault();break;case"controlUp":this.calendarElement.classList.contains(Fu),this.calendarNavigation(t,this.calendarElement),t.preventDefault();break;case"controlDown":ae(h)&&ae(c)||m||(ae(this.value)||(i=this.calendarElement.classList.contains(Fu)?this.startDate:this.endDate),this.controlDown=t,this.contentClick(null,--n,h||c,i)),t.preventDefault();break;case"controlEnd":b=new Date(this.currentDate.getFullYear(),11,31),l&&+b>+o&&(a=this.keyCalendarUpdate(!1,a)),e.prototype.navigateTo.call(this,"Month",new Date(this.currentDate.getFullYear(),11,31)),this.keyNavigation(a,t);break;case"pageUp":s=new Date(+this.currentDate),this.addMonths(s,-1),!l&&+s<=+r&&(a=this.keyCalendarUpdate(!0,a)),this.addMonths(this.currentDate,-1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(a,t);break;case"pageDown":s=new Date(+this.currentDate),this.addMonths(s,1),l&&+s>=+o&&(a=this.keyCalendarUpdate(!1,a)),this.addMonths(this.currentDate,1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(a,t);break;case"shiftPageUp":s=new Date(+this.currentDate),this.addYears(s,-1),!l&&+s<=+r&&(a=this.keyCalendarUpdate(!0,a)),this.addYears(this.currentDate,-1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(a,t);break;case"shiftPageDown":s=new Date(+this.currentDate),this.addYears(s,1),l&&+s>=+o&&(a=this.keyCalendarUpdate(!1,a)),this.addYears(this.currentDate,1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(a,t);break;case"shiftTab":ae(this.presetElement)||(this.presetElement.setAttribute("tabindex","0"),this.presetElement.focus(),this.removeFocusedDate()),t.preventDefault();break;case"spacebar":this.applyButton&&!this.applyButton.disabled&&this.applyFunction(t);break;default:this.navInCalendar(t,l,r,o,a),this.checkMinMaxDays()}this.presetHeight()},t.prototype.keyNavigation=function(e,t){this.bindCalendarCellEvents(e),e.classList.contains(Fu)?this.leftCalCurrentDate=new Date(+this.currentDate):this.rightCalCurrentDate=new Date(+this.currentDate),this.updateNavIcons(),this.calendarIconEvent(),this.updateRange([e]),this.dateDisabled=this.isDateDisabled(this.currentDate),t.preventDefault()},t.prototype.inputHandler=function(e){switch(e.action){case"altDownArrow":this.isPopupOpen()||(""===this.inputElement.value&&(this.clear(),this.changeTrigger(e),this.clearRange()),this.show(null,e),this.isRangeIconClicked=!1,this.isMobile||ae(this.leftCalendar)||this.calendarFocus(),this.isKeyPopup=!0);break;case"escape":this.isPopupOpen()&&this.hide(e);break;case"enter":document.activeElement===this.inputElement&&(this.inputBlurHandler(e),this.hide(e));break;case"tab":document.activeElement===this.inputElement&&this.isPopupOpen()&&(this.hide(e),e.preventDefault())}},t.prototype.bindCalendarCellEvents=function(e){for(var t=0,i=e?e.querySelectorAll(".e-calendar td"):this.popupObj.element.querySelectorAll(".e-calendar td");t<i.length;t++){var s=i[t];Ct.clearEvents(s);s.classList.contains("e-disabled")||s.classList.contains(Gu)||s.classList.contains("e-week-number")||(this.isMobile||Ct.add(s,"mouseover",this.hoverSelection,this),Ct.add(s,"mousedown",this.selectRange,this))}},t.prototype.removeFocusedDate=function(){for(var e=!ae(this.startValue)||!ae(this.endValue),t=0,i=this.popupObj.element.querySelectorAll(".e-calendar ."+Wu);t<i.length;t++){var s=i[t],n=new Date,o=this.getIdValue(null,s);("Month"===this.depth&&"Month"===this.currentView()&&(!s.classList.contains("e-today")||s.classList.contains("e-today")&&e)||"Year"===this.depth&&"Year"===this.currentView()&&(!this.isSameMonth(n,o)&&!this.isSameYear(n,o)||e)||"Decade"===this.depth&&"Decade"===this.currentView()&&(!this.isSameYear(n,o)||e))&&(s.classList.remove(Wu),s.classList.contains(Vu)||s.classList.contains(zu)||s.removeAttribute("aria-label"))}},t.prototype.hoverSelection=function(e,t){var i=t||e.currentTarget,s=this.getIdValue(null,i);if(!ae(this.startValue)&&+this.startValue>=+this.min&&+this.startValue<=+this.max&&(!this.isDateDisabled(this.endValue)&&!this.isDateDisabled(this.startValue)&&ae(this.endValue)&&ae(this.startValue)||!ae(this.startValue)&&ae(this.endValue)))for(var n=0,o=this.popupObj.element.querySelectorAll(".e-calendar td");n<o.length;n++){var r=o[n],a=!r.classList.contains("e-disabled")||r.classList.contains(Gu);if(!r.classList.contains("e-week-number")&&a){var l=this.getIdValue(null,r),h=new Date(+this.startValue);new Date(+l).setHours(0,0,0,0)>=h.setHours(0,0,0,0)&&+l<=+s?bi([r],_u):Ci([r],[_u])}}},t.prototype.isSameStartEnd=function(e,t){var i=!1;return"Month"===this.depth?e.setHours(0,0,0,0)===t.setHours(0,0,0,0)&&(i=!0):"Year"===this.depth?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&(i=!0):"Decade"===this.depth&&e.getFullYear()===t.getFullYear()&&(i=!0),i},t.prototype.updateRange=function(e){if(!ae(this.startValue))for(var t=0,i=e;t<i.length;t++)for(var s=0,n=i[t].querySelectorAll(".e-calendar td");s<n.length;s++){var o=n[s];if(!o.classList.contains("e-week-number")&&!o.classList.contains("e-disabled")){var r=this.getIdValue(null,o),a=this.getIdValue(null,o);if(ae(this.endValue)?Ci([o],[_u]):this.currentView()===this.depth&&+a.setHours(0,0,0,0)>=+new Date(+this.startValue).setHours(0,0,0,0)&&+a.setHours(0,0,0,0)<=+new Date(+this.endValue).setHours(0,0,0,0)&&!this.isSameStartEnd(new Date(+this.startValue),new Date(+this.endValue))&&+new Date(+this.startValue).setHours(0,0,0,0)>=+this.min&&+new Date(+this.endValue).setHours(0,0,0,0)<=+this.max&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&bi([o],_u),o.classList.contains("e-selected")&&o.classList.contains(zu)&&+a!=+this.endValue&&(Ci([o],["e-selected"]),Ci([o],[zu])),o.classList.contains(_u)&&+a>+this.endValue&&Ci([o],[_u]),!o.classList.contains("e-other-month")){var l=new Date(+this.startValue),h=new Date(+r);this.currentView()===this.depth&&+h.setHours(0,0,0,0)==+l.setHours(0,0,0,0)&&+h.setHours(0,0,0,0)>=+l.setHours(0,0,0,0)&&+this.startValue>=+this.min&&!this.inputWrapper.container.classList.contains("e-error")&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&(bi([o],[Vu,"e-selected"]),this.addSelectedAttributes(o,this.startValue,!0));var c=new Date(+this.endValue);"Year"===this.currentView()?h=new Date(h.getFullYear(),h.getMonth()+1,0):"Decade"===this.currentView()&&(h=new Date(h.getFullYear(),11,31)),this.currentView()===this.depth&&!ae(this.endValue)&&+h.setHours(0,0,0,0)==+c.setHours(0,0,0,0)&&+h.setHours(0,0,0,0)<=+c.setHours(0,0,0,0)&&+this.startValue>=+this.min&&!this.inputWrapper.container.classList.contains("e-error")&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&(bi([o],[zu,"e-selected"]),this.addSelectedAttributes(o,this.startValue,!1)),+r!=+this.startValue||ae(this.endValue)||+r!=+this.endValue||this.addSelectedAttributes(o,this.endValue,!1,!0)}}}},t.prototype.checkMinMaxDays=function(){(!ae(this.minDays)&&this.minDays>0||!ae(this.maxDays)&&this.maxDays>0)&&(this.isMobile?this.updateMinMaxDays(this.popupObj.element.querySelector("."+qu)):(this.updateMinMaxDays(this.popupObj.element.querySelector("."+Fu)),this.updateMinMaxDays(this.popupObj.element.querySelector("."+ju))))},t.prototype.rangeArgs=function(e){var t,i,s=ae(this.startValue)?null:this.globalize.formatDate(this.startValue,{format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"}),n=ae(this.endValue)?null:this.globalize.formatDate(this.endValue,{format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"});return ae(this.endValue)||ae(this.startValue)?(t="",i=0):(t=s+" "+this.separator+" "+n,i=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1),{value:this.value,startDate:this.startValue,endDate:this.endValue,daySpan:i,event:e||null,element:this.element,isInteracted:!ae(e),text:t}},t.prototype.otherMonthSelect=function(e,t,i){var s=+this.getIdValue(null,e),n='*[id^="/id"]:not(.e-other-month)'.replace("/id",""+s),o=this.popupObj&&this.popupObj.element.querySelector(n);ae(o)||(t?(bi([o],[Vu,"e-selected"]),this.addSelectedAttributes(o,this.startValue,!0)):(bi([o],[zu,"e-selected"]),this.addSelectedAttributes(o,this.endValue,!0)),i&&this.addSelectedAttributes(e,this.endValue,!1,!0))},t.prototype.selectRange=function(e,t){var i,s,n;e&&e.preventDefault();var o=(n=ae(e)?this.getIdValue(null,t):this.getIdValue(e,null)).getFullYear(),r=n.getMonth(),a=new Date(o,r,1),l=new Date(o,r+1,0),h=new Date(o,0,1),c=new Date(o,11,31);ae(this.endValue)||ae(this.startValue)?this.isMobile&&this.startButton.element.classList.contains("e-active")&&this.removeSelection():(!this.isMobile||this.isMobile&&!this.endButton.element.classList.contains("e-active"))&&this.removeSelection();var p=t||e.currentTarget;if(ae(this.startValue))ae(this.previousStartValue)||(n.setHours(this.previousStartValue.getHours()),n.setMinutes(this.previousStartValue.getMinutes()),n.setSeconds(this.previousStartValue.getSeconds())),this.startValue="Month"===this.depth?new Date(this.checkValue(n)):"Year"===this.depth?a:h,this.endValue=null,this.setValue(),bi([p],Vu),this.addSelectedAttributes(p,this.startValue,!0),p.classList.contains("e-other-month")&&this.otherMonthSelect(p,!0),this.checkMinMaxDays(),this.applyButton.disabled=!0,this.applyButton.element.disabled=!0,this.isMobile&&(this.endButton.element.classList.add("e-active"),this.startButton.element.classList.remove("e-active"),this.endButton.element.removeAttribute("disabled"),this.selectableDates()),this.trigger("select",this.rangeArgs(e));else if(+n==+this.startValue||+n>+this.startValue){if(+n==+this.startValue&&!ae(this.minDays)&&this.minDays>1)return;this.endValue=null,this.setValue(),(this.isMobile||t)&&this.hoverSelection(e,t),ae(this.previousEndValue)||(n.setHours(this.previousEndValue.getHours()),n.setMinutes(this.previousEndValue.getMinutes()),n.setSeconds(this.previousEndValue.getSeconds())),this.endValue="Month"===this.depth?new Date(this.checkValue(n)):"Year"===this.depth?l:c,this.setValue();var d=this.popupObj.element.querySelectorAll("."+zu);if(this.isMobile){this.startButton.element.classList.remove("e-active"),this.endButton.element.classList.add("e-active");for(var u=0,m=d;u<m.length;u++){var f=m[u];f.removeAttribute("aria-label"),f.classList.contains(Vu)?(this.addSelectedAttributes(f,this.startValue,!0),Ci([f],[zu])):(f.setAttribute("aria-selected","false"),Ci([f],[zu,"e-selected"]))}}bi([p],zu),+this.endValue==+this.startValue?this.addSelectedAttributes(p,this.endValue,!1,!0):this.addSelectedAttributes(p,this.endValue,!1),p.classList.contains("e-other-month")&&(+this.endValue==+this.startValue?this.otherMonthSelect(p,!1,!0):this.otherMonthSelect(p,!1));for(var g=0,v=d=this.popupObj.element.querySelectorAll("."+zu);g<v.length;g++){var y=v[g];y.classList.contains(Vu)&&Ci([y],[_u])}this.applyButton.disabled=!1,this.applyButton.element.disabled=!1,this.isMobile||this.removeClassDisabled(),this.disabledDateRender(),this.trigger("select",this.rangeArgs(e))}else+n<+this.startValue&&(this.removeClassDisabled(),this.startValue="Month"===this.depth?new Date(this.checkValue(n)):"Year"===this.depth?a:h,this.setValue(),this.removeSelectedAttributes(),Ci(this.popupObj.element.querySelectorAll("."+Vu),[Vu,"e-selected"]),bi([p],Vu),this.addSelectedAttributes(p,this.startValue,!0),p.classList.contains("e-other-month")&&this.otherMonthSelect(p,!0),this.checkMinMaxDays());e&&(i=Mi(e.target,"."+Fu)),ae(i)?(e&&(s=e&&Mi(e.target,"."+ju)),ae(s)||this.rightCalendar.children[1].firstElementChild.focus()):this.leftCalendar.children[1].firstElementChild.focus(),bi([p],"e-selected"),this.updateHeader(),this.removeFocusedDate()},t.prototype.selectableDates=function(){if(!ae(this.startValue)){var e=this.calendarElement.querySelectorAll(".e-calendar td"),t=!1;if(this.currentView()===this.depth){for(var i=0,s=e;i<s.length;i++){if(!(r=s[i]).classList.contains(Vu)&&!r.classList.contains("e-week-number")&&!r.classList.contains("e-disabled")){if(+this.getIdValue(null,r)<+this.startValue){bi([r],[Gu,"e-disabled","e-overlay"]),Ct.clearEvents(r);continue}break}if(r.classList.contains(Vu)&&!r.classList.contains("e-other-month")){t=!0;break}}t&&(this.previousIcon.classList.contains("e-disabled")||bi([this.previousIcon],[Yu,"e-disabled","e-overlay"]))}else{for(var n=0,o=e;n<o.length;n++){var r=o[n],a=this.startValue.getMonth(),l=this.startValue.getFullYear(),h=this.getIdValue(null,r);if(this.startButton.element.classList.contains("e-active")||!("Year"===this.currentView()&&h.getMonth()<a&&h.getFullYear()<=l||"Decade"===this.currentView()&&h.getMonth()<=a&&h.getFullYear()<l))break;bi([r],["e-disabled"])}e[0].classList.contains("e-disabled")?this.previousIconHandler(!0):e[e.length-1].classList.contains("e-disabled")&&this.nextIconHandler(!0)}}},t.prototype.updateMinMaxDays=function(e){if(!ae(this.startValue)&&ae(this.endValue)||this.isMobile&&this.endButton.element.classList.contains("e-active")){if(!ae(this.minDays)&&this.minDays>0||!ae(this.maxDays)&&this.maxDays>0){var t=this.removeTimeValueFromDate(this.startValue),i=new Date(new Date(+t).setDate(t.getDate()+(this.minDays-1))),s=new Date(new Date(+t).setDate(t.getDate()+(this.maxDays-1)));i=!ae(this.minDays)&&this.minDays>0?i:null,s=!ae(this.maxDays)&&this.maxDays>0?s:null,"Year"===this.currentView()?(i=ae(i)?null:new Date(i.getFullYear(),i.getMonth(),0),s=ae(s)?null:new Date(s.getFullYear(),s.getMonth(),1)):"Decade"===this.currentView()&&(i=ae(i)?null:new Date(i.getFullYear()-1,11,1),s=ae(s)?null:new Date(s.getFullYear(),0,1));for(var n=void 0,o=0,r=e.querySelectorAll(".e-calendar td");o<r.length;o++){var a=r[o];if(!a.classList.contains(Vu)&&!a.classList.contains("e-week-number")){var l=this.getIdValue(null,a);if(l=this.removeTimeValueFromDate(l),!ae(i)&&+l==+i&&a.classList.contains("e-disabled")&&i.setDate(i.getDate()+1),!a.classList.contains("e-disabled")){if(+l<=+t)continue;!ae(i)&&+l<+i&&(bi([a],[Gu,"e-disabled","e-overlay"]),Ct.clearEvents(a)),!ae(s)&&+l>+s&&(bi([a],[Gu,"e-disabled","e-overlay"]),this.isMaxDaysClicked=!0,Ct.clearEvents(a),ae(n)&&!a.classList.contains("e-other-month")&&(n=a))}}}if(!ae(n))if(this.isMobile)this.nextIcon.classList.contains("e-disabled")||bi([this.nextIcon],[Yu,"e-disabled","e-overlay"]);else{var h=Mi(n,"."+ju);(h=ae(h)?this.leftCalendar:h).classList.contains(Fu)?(this.rightCalNextIcon.classList.contains("e-disabled")||bi([this.rightCalNextIcon],[Yu,"e-disabled","e-overlay"]),this.leftCalNextIcon.classList.contains("e-disabled")||bi([this.leftCalNextIcon],[Yu,"e-disabled","e-overlay"]),this.rightCalPrevIcon.classList.contains("e-disabled")||bi([this.rightCalPrevIcon],[Yu,"e-disabled","e-overlay"])):this.rightCalNextIcon.classList.contains("e-disabled")||bi([this.rightCalNextIcon],[Yu,"e-disabled","e-overlay"])}}}else this.isMaxDaysClicked=!1},t.prototype.removeTimeValueFromDate=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.prototype.removeClassDisabled=function(){for(var e=0,t=this.popupObj.element.querySelectorAll(".e-calendar td."+Gu);e<t.length;e++){var i=t[e];i.classList.contains(Gu)&&(Ci([i],[Gu,"e-disabled","e-overlay"]),Ct.add(i,"click",this.selectRange,this),this.isMobile||Ct.add(i,"mouseover",this.hoverSelection,this))}this.isMobile?(this.nextIcon.classList.contains(Yu)&&Ci([this.nextIcon],[Yu,"e-disabled","e-overlay"]),this.previousIcon.classList.contains(Yu)&&Ci([this.previousIcon],[Yu,"e-disabled","e-overlay"])):(this.rightCalNextIcon.classList.contains(Yu)&&Ci([this.rightCalNextIcon],[Yu,"e-disabled","e-overlay"]),this.rightCalPrevIcon.classList.contains(Yu)&&Ci([this.rightCalPrevIcon],[Yu,"e-disabled","e-overlay"]),this.leftCalNextIcon.classList.contains(Yu)&&Ci([this.leftCalNextIcon],[Yu,"e-disabled","e-overlay"]))},t.prototype.updateHeader=function(){var e={type:"date",skeleton:ye()?"D":"yMMMd"};if(ae(this.endValue)||ae(this.startValue))this.popupObj.element.querySelector("."+Uu).textContent=this.l10n.getConstant("selectedDays");else{var t=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1;ae(this.disabledDayCnt)||(t-=this.disabledDayCnt,this.disabledDayCnt=null),this.popupObj.element.querySelector("."+Uu).textContent=t.toString()+" "+this.l10n.getConstant("days")}this.isMobile?(ae(this.startValue)?this.startButton.element.textContent=this.l10n.getConstant("startLabel"):this.startButton.element.textContent=this.globalize.formatDate(this.startValue,e),ae(this.endValue)||ae(this.startValue)?this.endButton.element.textContent=this.l10n.getConstant("endLabel"):this.endButton.element.textContent=this.globalize.formatDate(this.endValue,e)):(ae(this.endValue)||ae(this.startValue)?this.popupObj.element.querySelector(".e-end-label").textContent=this.l10n.getConstant("endLabel"):this.popupObj.element.querySelector(".e-end-label").textContent=this.globalize.formatDate(this.endValue,e),ae(this.startValue)?this.popupObj.element.querySelector(".e-start-label").textContent=this.l10n.getConstant("startLabel"):this.popupObj.element.querySelector(".e-start-label").textContent=this.globalize.formatDate(this.startValue,e)),(this.isDateDisabled(this.startValue)||this.isDateDisabled(this.endValue)||!ae(this.startValue)&&+this.startValue<+this.min||!ae(this.endValue)&&+this.endValue>+this.max||!ae(this.startValue)&&!ae(this.endValue)&&+this.startValue>+this.endValue)&&(this.isMobile?(this.startButton.element.textContent=this.l10n.getConstant("startLabel"),this.endButton.element.textContent=this.l10n.getConstant("endLabel"),this.popupObj.element.querySelector("."+Uu).textContent=this.l10n.getConstant("selectedDays")):(this.popupObj.element.querySelector("."+Uu).textContent=this.l10n.getConstant("selectedDays"),this.popupObj.element.querySelector(".e-start-label").textContent=this.l10n.getConstant("startLabel"),this.popupObj.element.querySelector(".e-end-label").textContent=this.l10n.getConstant("endLabel"))),this.popupObj.element.querySelector("#custom_range")&&(this.popupObj.element.querySelector("#custom_range").textContent=""!==this.l10n.getConstant("customRange")?this.l10n.getConstant("customRange"):"Custom Range")},t.prototype.removeSelection=function(){this.startValue=null,this.endValue=null,this.setValue(),this.removeSelectedAttributes(),this.popupObj&&(this.popupObj.element.querySelectorAll(".e-selected").length>0&&Ci(this.popupObj.element.querySelectorAll(".e-selected"),[Vu,zu,"e-selected"]),this.popupObj.element.querySelectorAll("."+Wu).length>0&&Ci(this.popupObj.element.querySelectorAll("."+Wu),Wu),this.popupObj.element.querySelectorAll("."+_u).length>0&&Ci(this.popupObj.element.querySelectorAll("."+_u),[_u]))},t.prototype.addSelectedAttributes=function(e,t,i,s){if(e){var n=this.globalize.formatDate(t,{type:"date",skeleton:ye()?"D":"full"});!ae(s)&&s?e.setAttribute("aria-label","The current start and end date is "+n):e.setAttribute("aria-label","The current "+(i?"start":"end")+" date is "+n),e.setAttribute("aria-selected","true")}},t.prototype.removeSelectedAttributes=function(){if(this.popupObj){for(var e=0,t=this.popupObj.element.querySelectorAll("."+Vu);e<t.length;e++){(n=t[e]).setAttribute("aria-selected","false"),n.removeAttribute("aria-label")}for(var i=0,s=this.popupObj.element.querySelectorAll("."+zu);i<s.length;i++){var n;(n=s[i]).setAttribute("aria-selected","false"),n.removeAttribute("aria-label")}}},t.prototype.updateCalendarElement=function(e){e.classList.contains(Fu)?(this.calendarElement=this.leftCalendar,this.currentDate=this.leftCalCurrentDate,this.previousIcon=this.leftCalPrevIcon,this.nextIcon=this.leftCalNextIcon):(this.calendarElement=this.rightCalendar,this.currentDate=this.rightCalCurrentDate,this.previousIcon=this.rightCalPrevIcon,this.nextIcon=this.rightCalNextIcon),this.contentElement=e.querySelector(".e-content"),this.tableBodyElement=Ii(".e-content tbody",e),this.table=e.querySelector(".e-content").getElementsByTagName("table")[0],this.headerTitleElement=e.querySelector(".e-header .e-title"),this.headerElement=e.querySelector(".e-header")},t.prototype.navPrevMonth=function(e){e.preventDefault();var t=Mi(e.target,"."+Fu);t=ae(t)?Mi(e.target,"."+ju):t,this.updateCalendarElement(t),this.navigatePrevious(e),!ae(this.startValue)&&ae(this.endValue)&&this.updateMinMaxDays(t),this.updateControl(t)},t.prototype.deviceNavigation=function(e){this.deviceCalendarEvent(),this.updateRange([this.popupObj.element.querySelector("."+qu)]),this.endButton.element.classList.contains("e-active")&&this.updateMinMaxDays(this.popupObj.element.querySelector("."+qu)),this.endButton.element.classList.contains("e-active")&&this.selectableDates(),this.currentView()===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate()},t.prototype.updateControl=function(e){e.classList.contains(ju)?this.rightCalCurrentDate=new Date(+this.currentDate):this.leftCalCurrentDate=new Date(+this.currentDate),this.calendarIconEvent(),("Month"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-month")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-month")||"Year"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-year")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-year")||"Decade"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-decade")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-decade")||this.isMobile)&&this.bindCalendarCellEvents(),this.removeFocusedDate(),this.updateRange([e])},t.prototype.navNextMonth=function(e){e.preventDefault();var t=Mi(e.target,"."+Fu);t=ae(t)?Mi(e.target,"."+ju):t,this.updateCalendarElement(t),this.navigateNext(e),!ae(this.startValue)&&ae(this.endValue)&&this.updateMinMaxDays(t),this.updateControl(t)},t.prototype.isPopupOpen=function(){return!(ae(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},t.prototype.createRangeHeader=function(){var e=this.createElement("div",{className:"e-start-end"});if(this.isMobile){var t=this.createElement("button",{className:"e-end-btn"}),i=this.createElement("button",{className:"e-start-btn"});this.startButton=new Po({content:this.l10n.getConstant("startLabel")},i),this.endButton=new Po({content:this.l10n.getConstant("endLabel")},t),e.appendChild(i),e.appendChild(t)}else{var s=this.createElement("a",{className:"e-start-label"}),n=this.createElement("a",{className:"e-end-label"}),o=this.createElement("span",{className:"e-change-icon e-icons"});Di(s,{"aria-atomic":"true","aria-live":"assertive","aria-label":"Start Date",role:"button"}),Di(n,{"aria-atomic":"true","aria-live":"assertive","aria-label":"End Date",role:"button"}),e.appendChild(s),e.appendChild(o),e.appendChild(n),s.textContent=this.l10n.getConstant("startLabel"),n.textContent=this.l10n.getConstant("endLabel")}return e},t.prototype.disableInput=function(){this.strictMode?ae(this.previousStartValue)||ae(this.previousEndValue)||(this.startValue=this.previousStartValue,this.endValue=this.previousEndValue,this.setValue(),this.updateInput()):(this.updateInput(),this.clearRange(),this.setProperties({startDate:null},!0),this.setProperties({endDate:null},!0),this.startValue=null,this.endValue=null,this.setValue(),this.errorClass()),this.setProperties({enabled:!1},!0),Na.setEnabled(this.enabled,this.inputElement),this.bindEvents()},t.prototype.validateMinMax=function(){this.min=ae(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=ae(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,this.min<=this.max?(ae(this.minDays)||ae(this.maxDays)||this.maxDays>0&&this.minDays>0&&this.minDays>this.maxDays&&(this.maxDays=null),!ae(this.minDays)&&this.minDays<0&&(this.minDays=null),!ae(this.maxDays)&&this.maxDays<0&&(this.maxDays=null)):this.disableInput()},t.prototype.validateRangeStrict=function(){ae(this.startValue)||(+this.startValue<=+this.min?(this.startValue=this.min,this.setValue()):+this.startValue>=+this.min&&+this.startValue>=+this.max&&(this.startValue=this.max)),ae(this.endValue)||(+this.endValue>+this.max?(this.endValue=this.max,this.setValue()):+this.endValue<+this.min&&(this.endValue=this.min,this.setValue())),this.validateMinMaxDays()},t.prototype.validateRange=function(){this.validateMinMaxDays()},t.prototype.validateMinMaxDays=function(){if(!ae(this.startValue)&&!ae(this.endValue)){var e=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1;if(!ae(this.minDays)&&this.minDays>0&&!(e>=this.minDays))if(this.strictMode){var t=new Date(+this.startValue);t.setDate(t.getDate()+(this.minDays-1)),+t>+this.max?(this.endValue=this.max,this.setValue()):(this.endValue=t,this.setValue())}else this.startValue=null,this.endValue=null,this.setValue();ae(this.maxDays)||!(this.maxDays>0)||e<=this.maxDays||(this.strictMode?(this.endValue=new Date(+this.startValue),this.endValue.setDate(this.endValue.getDate()+(this.maxDays-1)),this.setValue()):(this.startValue=null,this.endValue=null,this.setValue()))}},t.prototype.renderCalendar=function(){this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(qu),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),Di(this.calendarElement,{role:"calendar"}),e.prototype.createHeader.call(this),e.prototype.createContent.call(this)},t.prototype.isSameMonth=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},t.prototype.isSameYear=function(e,t){return e.getFullYear()===t.getFullYear()},t.prototype.isSameDecade=function(e,t){var i=e.getFullYear(),s=t.getFullYear();return i-i%10==s-s%10},t.prototype.startMonthCurrentDate=function(){this.isSameMonth(this.min,this.max)||+this.currentDate>+this.max||this.isSameMonth(this.currentDate,this.max)?(this.currentDate=new Date(+this.max),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()-1)):this.currentDate<this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.selectNextMonth=function(){if(ae(this.endValue)||ae(this.startValue)||this.isSameMonth(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue))return this.currentDate.setDate(1),void this.currentDate.setMonth(this.currentDate.getMonth()+1);if(this.currentDate=new Date(+this.endValue),!ae(this.startValue)&&+this.startValue<+this.min||!ae(this.endValue)&&+this.endValue>+this.max||!ae(this.startValue)&&!ae(this.endValue)&&+this.startValue>+this.endValue){this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setDate(1);var e=this.currentDate.getMonth()+1;this.currentDate.setMonth(e)}},t.prototype.selectNextYear=function(){if(ae(this.endValue)||ae(this.startValue)||this.isSameYear(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue)){this.currentDate.setMonth(0);var e=this.currentDate.getFullYear()+1;this.currentDate.setFullYear(e)}else this.currentDate=new Date(+this.endValue),(!ae(this.endValue)&&+this.endValue>+this.max||!ae(this.startValue)&&!ae(this.endValue)&&+this.startValue>+this.endValue||!ae(this.startValue)&&+this.startValue<+this.min)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setMonth(0),this.currentDate.setFullYear(this.currentDate.getFullYear()+1))},t.prototype.selectNextDecade=function(){if(ae(this.endValue)||ae(this.startValue)||this.isSameDecade(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue)){var e=this.currentDate.getFullYear()+10;this.currentDate.setFullYear(e)}else this.currentDate=new Date(+this.endValue),(!ae(this.startValue)&&!ae(this.endValue)&&+this.startValue>+this.endValue||!ae(this.endValue)&&+this.endValue>+this.max||!ae(this.startValue)&&+this.startValue<+this.min)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setFullYear(this.currentDate.getFullYear()+10))},t.prototype.selectStartMonth=function(){ae(this.startValue)?(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.startMonthCurrentDate()):!ae(this.max)&&this.isSameMonth(this.startValue,this.max)?(this.currentDate=new Date(+this.max),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()-1)):this.startValue>=this.min&&this.startValue<=this.max&&!this.isDateDisabled(this.startValue)?this.currentDate=new Date(+this.startValue):this.currentDate=new Date((new Date).setHours(0,0,0,0)),(!ae(this.endValue)&&+this.endValue>+this.max||!ae(this.startValue)&&+this.startValue<+this.min||!ae(this.startValue)&&!ae(this.endValue)&&+this.startValue>+this.endValue)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.startMonthCurrentDate()},t.prototype.createCalendar=function(){var t=this.createElement("div",{className:"e-calendar-container"});if(this.isMobile){ae(this.startValue)||(this.currentDate=new Date(+this.startValue)),e.prototype.validateDate.call(this),e.prototype.minMaxUpdate.call(this),e.prototype.render.call(this);var i=this.calendarElement.querySelector(".e-calendar .e-prev"),s=this.calendarElement.querySelector(".e-calendar .e-next");Li(this.calendarElement.querySelector(".e-calendar .e-icon-container")),this.calendarElement.querySelector(".e-calendar .e-header").appendChild(s),this.calendarElement.querySelector(".e-calendar .e-header").appendChild(i),wi([i],this.calendarElement.querySelector(".e-calendar .e-header")),this.deviceCalendar=this.calendarElement,t.appendChild(this.calendarElement),this.headerTitleElement=this.calendarElement.querySelector(".e-calendar .e-header .e-title")}else{this.selectStartMonth(),this.renderCalendar(),this.leftCalCurrentDate=new Date(+this.currentDate),this.calendarElement.classList.add(Fu),this.leftCalPrevIcon=this.calendarElement.querySelector(".e-left-calendar .e-prev"),this.leftCalNextIcon=this.calendarElement.querySelector(".e-left-calendar .e-next"),this.leftTitle=this.calendarElement.querySelector(".e-left-calendar .e-title"),Li(this.calendarElement.querySelector(".e-left-calendar .e-icon-container")),this.calendarElement.querySelector(".e-left-calendar .e-header").appendChild(this.leftCalNextIcon),this.calendarElement.querySelector(".e-left-calendar .e-header").appendChild(this.leftCalPrevIcon),wi([this.leftCalPrevIcon],this.calendarElement.querySelector(".e-left-calendar .e-header")),this.leftCalendar=this.calendarElement;var n=this.createElement("div",{className:"e-left-container"}),o=this.createElement("div",{className:"e-right-container"});n.appendChild(this.leftCalendar),t.appendChild(n),this.isMobile||Ct.add(this.leftTitle,"click",this.leftNavTitle,this),"Month"===this.start&&this.selectNextMonth(),"Year"===this.start&&this.selectNextYear(),"Decade"===this.start&&this.selectNextDecade(),this.renderCalendar(),this.rightCalCurrentDate=new Date(+this.currentDate),bi([this.calendarElement],ju),this.rightCalendar=this.calendarElement,Ci([this.leftCalendar&&this.leftCalendar.querySelector(".e-content tbody")],"e-zoomin"),Ci([this.rightCalendar&&this.rightCalendar.querySelector(".e-content tbody")],"e-zoomin"),this.rightCalPrevIcon=this.calendarElement.querySelector(".e-right-calendar .e-prev"),this.rightCalNextIcon=this.calendarElement.querySelector(".e-right-calendar .e-next"),this.rightTitle=this.calendarElement.querySelector(".e-right-calendar .e-title"),Li(this.calendarElement.querySelector(".e-right-calendar .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector(".e-right-calendar .e-header").appendChild(this.rightCalNextIcon),this.calendarElement.querySelector(".e-right-calendar .e-header").appendChild(this.rightCalPrevIcon),wi([this.rightCalPrevIcon],this.calendarElement.querySelector(".e-right-calendar .e-header")),o.appendChild(this.rightCalendar),t.appendChild(o),this.isMobile||Ct.add(this.rightTitle,"click",this.rightNavTitle,this)}return t},t.prototype.leftNavTitle=function(e){this.isPopupOpen()&&(this.calendarElement=this.leftCalendar,this.calendarNavigation(e,this.calendarElement))},t.prototype.calendarNavigation=function(t,i){this.table=i.querySelector("table"),this.headerTitleElement=i.querySelector(".e-title"),this.tableBodyElement=i.querySelector("tbody"),this.tableHeadElement=i.querySelector("thead"),this.contentElement=i.querySelector(".e-content"),this.updateCalendarElement(i),e.prototype.navigateTitle.call(this,t),this.updateNavIcons()},t.prototype.rightNavTitle=function(e){this.isPopupOpen()&&(this.calendarElement=this.rightCalendar,this.calendarNavigation(e,this.calendarElement))},t.prototype.clickEventEmitter=function(e){this.isMobile||(Mi(e.target,".e-calendar.e-left-calendar")?(this.calendarElement=this.leftCalendar,this.updateCalendarElement(this.leftCalendar)):(this.calendarElement=this.rightCalendar,this.updateCalendarElement(this.rightCalendar)))},t.prototype.currentView=function(){return e.prototype.currentView.call(this)},t.prototype.getCalendarView=function(e){return"Year"===e?"Year":"Decade"===e?"Decade":"Month"},t.prototype.navigatedEvent=function(t){if(this.trigger("navigated",this.navigatedArgs),!ae(this.popupObj)){var i=this.getCalendarView(this.currentView());this.isMobile?i===this.depth?(this.bindCalendarCellEvents(),this.deviceNavigation(),this.removeFocusedDate(),this.checkMinMaxDays()):this.selectableDates():this.isMobile||i!==this.depth?(this.updateNavIcons(),this.calendarIconEvent()):((this.calendarElement.classList.contains("e-left-calendar")?this.leftCalendar:this.rightCalendar)!==this.leftCalendar||(!t||t.currentTarget.children[0].classList.contains("e-icons"))&&ae(this.controlDown)?(t&&!t.currentTarget.children[0].classList.contains("e-icons")||!ae(this.controlDown))&&(this.rightCalCurrentDate=new Date(+this.currentDate),this.effect="",this.currentDate=this.rightCalCurrentDate,this.updateCalendarElement(this.rightCalendar),this.updateControl(this.rightCalendar),this.updateCalendarElement(this.leftCalendar),this.startValue&&ae(this.endValue)?"Month"===i&&this.startValue.getMonth()<this.rightCalCurrentDate.getMonth()&&this.startValue.getFullYear()<=this.rightCalCurrentDate.getFullYear()?e.prototype.navigateTo.call(this,i,new Date(+this.startValue)):"Year"===i&&this.startValue.getFullYear()<this.rightCalCurrentDate.getFullYear()?e.prototype.navigateTo.call(this,i,new Date(+this.startValue)):e.prototype.navigateTo.call(this,i,this.leftCalCurrentDate):e.prototype.navigateTo.call(this,i,this.leftCalCurrentDate),this.updateControl(this.leftCalendar),this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.controlDown=null):(this.leftCalCurrentDate=new Date(+this.currentDate),this.effect="",this.currentDate=this.leftCalCurrentDate,this.updateCalendarElement(this.leftCalendar),this.updateControl(this.leftCalendar),this.updateCalendarElement(this.rightCalendar),e.prototype.navigateTo.call(this,i,this.rightCalCurrentDate),this.updateControl(this.rightCalendar),this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.controlDown=null),this.checkMinMaxDays())}},t.prototype.createControl=function(){var e=this.createElement("div",{className:"e-date-range-container"}),t=this.createElement("div",{className:"e-range-header"}),i=this.createRangeHeader();t.appendChild(i);var s=this.createElement("div",{className:Uu});Di(s,{"aria-label":"Selected Days"}),s.textContent=this.l10n.getConstant("selectedDays"),t.appendChild(s);var n=this.createElement("div",{className:"e-separator"}),o=this.createCalendar();e.appendChild(t),e.appendChild(n),e.appendChild(o);var r=this.createElement("div",{className:"e-footer"}),a=this.createElement("button",{className:"e-cancel e-flat e-css"}),l=this.createElement("button");bi([l],["e-apply","e-flat","e-primary","e-css"]),r.appendChild(l),r.appendChild(a);var h=!ae(this.startValue)&&!ae(this.endValue);(this.cancelButton=new Po({content:this.l10n.getConstant("cancelText")},a),this.applyButton=new Po({content:this.l10n.getConstant("applyText"),disabled:!h},l),Ct.add(l,"click",this.applyFunction,this),Ct.add(a,"click",this.cancelFunction,this),this.popupWrapper.appendChild(e),this.isMobile)||(le(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||(this.createPresets(),this.listRippleEffect(),bi([e],"e-range-border"),bi([this.popupWrapper],"e-preset-wrapper"),this.popupWrapper.querySelector(".e-presets").style.height=this.popupWrapper.querySelector(".e-date-range-container").getBoundingClientRect().height+"px"));this.popupWrapper.appendChild(r),this.isMobile&&this.deviceHeaderUpdate(),this.renderPopup()},t.prototype.cancelFunction=function(e){document.activeElement!==this.inputElement&&(this.preventFocus=!0,this.inputElement.focus(),bi([this.inputWrapper.container],["e-input-focus"])),e.preventDefault(),this.isKeyPopup&&(this.inputElement.focus(),this.isKeyPopup=!1),this.startValue=null,this.endValue=null,this.removeSelection(),this.hide(e)},t.prototype.deviceHeaderUpdate=function(){ae(this.startValue)&&ae(this.endValue)?(this.endButton.element.setAttribute("disabled",""),this.startButton.element.classList.add("e-active")):ae(this.startValue)||this.startButton.element.classList.add("e-active")},t.prototype.applyFunction=function(e){var t=!1;"touchstart"!==e.type&&e.preventDefault(),this.closeEventArgs&&this.closeEventArgs.cancel&&(this.startValue=this.popupWrapper.querySelector(".e-start-date")&&this.getIdValue(null,this.popupWrapper.querySelector(".e-start-date")),this.endValue=this.popupWrapper.querySelector(".e-end-date")&&this.getIdValue(null,this.popupWrapper.querySelector(".e-end-date")),this.setValue()),document.activeElement!==this.inputElement&&(this.preventFocus=!0,this.inputElement.focus(),bi([this.inputWrapper.container],["e-input-focus"])),"touchstart"!==e.type&&this.closeEventArgs&&!this.closeEventArgs.cancel&&e.preventDefault(),ae(this.startValue)||ae(this.endValue)?this.hide(e||null):(this.previousStartValue=new Date(+this.startValue),this.previousEndValue=new Date(+this.endValue),this.previousEleValue=this.inputElement.value,Na.setValue(this.rangeArgs(e).text,this.inputElement,this.floatLabelType,this.showClearButton),+this.initStartDate==+this.startValue&&+this.initEndDate==+this.endValue||(t=!0),this.changeTrigger(e),this.hide(e||null),this.errorClass(),t=!0),Mi(e.target,".e-input-group")||t||this.focusOut(),this.isMobile||(this.isKeyPopup=!1,this.isRangeIconClicked&&(this.inputWrapper.container.children[1].focus(),this.keyInputConfigs=re(this.keyInputConfigs,this.keyConfigs),this.popupKeyboardModule=new Qs(this.inputWrapper.container.children[1],{eventName:"keydown",keyConfigs:this.keyInputConfigs,keyAction:this.popupKeyActionHandle.bind(this)})))},t.prototype.onMouseClick=function(e,t){if("touchstart"!==e.type){var i=Mi(t||e.target,"."+Xu),s=i&&i.classList.contains("e-active");i&&i.classList.contains(Xu)&&this.setListSelection(i,e),this.inputElement.focus(),this.isMobile||(this.preventFocus=!0,i&&i.classList.contains(Xu)&&"custom_range"===i.getAttribute("id")?this.leftCalendar.children[1].firstElementChild.focus():s||"keydown"!==e.type||this.inputElement.focus())}},t.prototype.onMouseOver=function(e){var t=Mi(e.target,"."+Xu);t&&t.classList.contains(Xu)&&!t.classList.contains(Ku)&&bi([t],Ku)},t.prototype.onMouseLeave=function(e){var t=Mi(e.target,"."+Ku);ae(t)||Ci([t],Ku)},t.prototype.setListSelection=function(e,t){if(e&&(!e.classList.contains("e-active")||this.isMobile&&e.classList.contains("e-active"))){if(this.isMobile&&e.classList.contains("e-active"))return this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),"custom_range"===this.presetsItem[this.activeIndex].id?void this.renderCustomPopup():void 0;this.removeListSelection(),this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),bi([e],"e-active"),e.setAttribute("aria-selected","true");var i=this.presetsItem[this.activeIndex];"custom_range"===i.id?this.renderCustomPopup():this.applyPresetRange(i,t)}},t.prototype.removeListSelection=function(){var e=this.presetElement.querySelector(".e-active");ae(e)||(Ci([e],"e-active"),e.removeAttribute("aria-selected"))},t.prototype.setValue=function(){this.modelValue=[this.startValue,this.endValue]},t.prototype.applyPresetRange=function(e,t){this.hide(null),this.presetsItem[this.presetsItem.length-1].start=null,this.presetsItem[this.presetsItem.length-1].end=null,this.startValue=e.start,this.endValue=e.end,this.setValue(),this.refreshControl(),this.trigger("select",this.rangeArgs(t)),this.changeTrigger(t),this.previousEleValue=this.inputElement.value,this.isCustomRange=!1,this.leftCalendar=this.rightCalendar=null,this.isKeyPopup&&(this.isRangeIconClicked=!1,this.inputElement.focus())},t.prototype.showPopup=function(e,t){this.presetHeight(),1e3===this.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null),this.isMobile&&this.popupObj.refreshPosition()},t.prototype.renderCustomPopup=function(){this.isCustomWindow=!0,this.popupObj.hide(),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-daterangepicker e-popup"}),this.renderControl(),this.openEventArgs.appendTo.appendChild(this.popupWrapper),this.showPopup(),this.isCustomRange=!0,this.isMobile||this.calendarFocus()},t.prototype.listRippleEffect=function(){for(var e=0,t=this.liCollections;e<t.length;e++){ys(t[e])}},t.prototype.createPresets=function(){if(!le(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)){this.presetElement=this.createElement("div",{className:"e-presets",attrs:{tabindex:"0"}});var e=dp.createList(this.createElement,this.presetsItem,null,!0);Di(e,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),this.presetElement.appendChild(e),this.popupWrapper.appendChild(this.presetElement);var t=this.presetElement.querySelector("#custom_range");ae(t)||(t.textContent=""!==this.l10n.getConstant("customRange")?this.l10n.getConstant("customRange"):"Custom Range"),this.liCollections=this.presetElement.querySelectorAll("."+Xu),this.wireListEvents(),this.isMobile&&(this.presetElement.style.width=this.inputWrapper.container.getBoundingClientRect().width+"px"),!ae(this.activeIndex)&&this.activeIndex>-1&&bi([this.liCollections[this.activeIndex]],"e-active")}},t.prototype.wireListEvents=function(){Ct.add(this.presetElement,"click",this.onMouseClick,this),this.isMobile||(Ct.add(this.presetElement,"mouseover",this.onMouseOver,this),Ct.add(this.presetElement,"mouseout",this.onMouseLeave,this))},t.prototype.unWireListEvents=function(){ae(this.presetElement)||(Ct.remove(this.presetElement,"click touchstart",this.onMouseClick),this.isMobile||(Ct.remove(this.presetElement,"mouseover",this.onMouseOver),Ct.remove(this.presetElement,"mouseout",this.onMouseLeave)))},t.prototype.renderPopup=function(){var e=this;this.popupWrapper.classList.add("e-control");var t=this.popupWrapper.getBoundingClientRect().width;ae(this.cssClass)||""===this.cssClass.trim()||(this.popupWrapper.className+=" "+this.cssClass),this.isMobile&&this.isCustomWindow&&(this.modal=this.createElement("div"),document.body.appendChild(this.modal)),this.popupObj=new lo(this.popupWrapper,{relateTo:this.isMobile&&this.isCustomWindow?document.body:ae(this.targetElement)?this.inputWrapper.container:this.targetElement,position:this.isMobile?le(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.isCustomWindow?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:this.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||this.enableRtl?0:-t,offsetY:4,collision:this.isMobile?le(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.isCustomWindow?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile&&this.isCustomWindow?"container":"relative",enableRtl:this.enableRtl,zIndex:this.zIndex,open:function(){Di(e.inputElement,{"aria-expanded":"true"}),bi([e.inputWrapper.buttons[0]],"e-active"),e.isMobile||(e.cancelButton&&(e.btnKeyboardModule=new Qs(e.cancelButton.element,{eventName:"keydown",keyAction:e.popupKeyActionHandle.bind(e),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),e.btnKeyboardModule=new Qs(e.applyButton.element,{eventName:"keydown",keyAction:e.popupKeyActionHandle.bind(e),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}})),ae(e.leftCalendar)||e.isRangeIconClicked||e.calendarFocus(),ae(e.presetElement)||(e.keyInputConfigs=re(e.keyInputConfigs,e.keyConfigs),e.presetKeyboardModule=new Qs(e.presetElement,{eventName:"keydown",keyAction:e.presetKeyActionHandler.bind(e),keyConfigs:e.keyInputConfigs}),e.presetKeyboardModule=new Qs(e.presetElement,{eventName:"keydown",keyAction:e.popupKeyActionHandle.bind(e),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),ae(e.leftCalendar)?(e.preventBlur=!0,e.presetElement.focus()):e.presetElement.setAttribute("tabindex","-1")),e.popupKeyBoardHandler()),e.isMobile&&!bt.isDevice&&Ct.add(document,"keydown",e.popupCloseHandler,e)},close:function(){Di(e.inputElement,{"aria-expanded":"false"}),Ci([e.inputWrapper.buttons[0]],"e-active"),e.isRangeIconClicked&&e.inputWrapper.container.children[1].focus(),le(e.presets[0].start&&e.presets[0].end&&e.presets[0].label)||e.unWireListEvents(),ae(e.popupObj)||(ae(e.popupObj.element.parentElement)||Ti(e.popupObj.element),e.popupObj.destroy(),e.popupObj=null),e.isMobile&&!bt.isDevice&&Ct.remove(document,"keydown",e.popupCloseHandler)},targetExitViewport:function(){bt.isDevice||e.hide()}}),this.isMobile&&(this.popupObj.element.classList.add("e-device"),this.isMobile||this.popupObj.element.classList.add("e-bigger")),this.isMobile&&this.isCustomWindow&&(bi([this.modal],["e-device","e-daterangepicker","e-range-modal"]),document.body.className+=" e-range-overflow",this.modal.style.display="block"),Ct.add(document,"mousedown touchstart",this.documentHandler,this)},t.prototype.popupCloseHandler=function(e){switch(e.keyCode){case 27:this.hide(e)}},t.prototype.calendarFocus=function(){var e=this.popupObj&&this.popupObj.element.querySelector("."+Vu);if(e){var t=Mi(e,"."+ju);t=ae(t)?this.leftCalendar:t,this.isRangeIconClicked?this.inputWrapper.container.focus():(this.preventBlur=!0,t.children[1].firstElementChild.focus()),bi([e],Wu)}else this.isRangeIconClicked?this.inputWrapper.container.focus():(this.preventBlur=!0,this.leftCalendar.children[1].firstElementChild.focus())},t.prototype.presetHeight=function(){var e=this.popupObj&&this.popupObj.element.querySelector(".e-presets"),t=this.popupObj&&this.popupObj.element.querySelector(".e-date-range-container");ae(e)||ae(t)||(e.style.height=t.getBoundingClientRect().height+"px")},t.prototype.presetKeyActionHandler=function(e){switch(e.action){case"moveDown":this.listMoveDown(e),this.setScrollPosition(),e.preventDefault();break;case"moveUp":this.listMoveUp(e),this.setScrollPosition(),e.preventDefault();break;case"enter":var t=this.getHoverLI(),i=this.getActiveLI();if(!ae(this.leftCalendar)&&!ae(i))if(ae(t)||!ae(i)&&i===t)if(this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(i),"custom_range"===this.presetsItem[this.activeIndex].id)return this.calendarFocus(),i.classList.remove(Ku),void e.preventDefault();ae(t)&&ae(i)||this.onMouseClick(e,t||i),e.preventDefault();break;case"tab":if(this.leftCalendar){var s=this.getHoverLI();ae(s)||s.classList.remove(Ku)}else this.hide(e),e.preventDefault()}},t.prototype.listMoveDown=function(e){var t=this.getHoverLI(),i=this.getActiveLI();if(ae(t))if(ae(i))bi([this.liCollections[0]],Ku);else{var s;!ae(s=i.nextElementSibling)&&s.classList.contains(Xu)&&bi([s],Ku)}else!ae(s=t.nextElementSibling)&&s.classList.contains(Xu)&&(Ci([t],Ku),bi([s],Ku))},t.prototype.listMoveUp=function(e){var t=this.getHoverLI(),i=this.getActiveLI();if(ae(t)){if(!ae(i)){var s;!ae(s=i.previousElementSibling)&&s.classList.contains(Xu)&&bi([s],Ku)}}else!ae(s=t.previousElementSibling)&&s.classList.contains(Xu)&&(Ci([t],Ku),bi([s],Ku))},t.prototype.getHoverLI=function(){return this.presetElement.querySelector("."+Ku)},t.prototype.getActiveLI=function(){return this.presetElement.querySelector(".e-active")},t.prototype.popupKeyBoardHandler=function(){this.popupKeyboardModule=new Qs(this.popupWrapper,{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:{escape:"escape"}}),this.keyInputConfigs=re(this.keyInputConfigs,this.keyConfigs),this.popupKeyboardModule=new Qs(this.inputWrapper.container.children[1],{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:this.keyInputConfigs})},t.prototype.setScrollPosition=function(){var e=this.presetElement.getBoundingClientRect().height,t=this.presetElement.querySelector("."+Ku),i=this.presetElement.querySelector(".e-active"),s=ae(t)?i:t;if(!ae(s)){var n=s.nextElementSibling,o=n?n.offsetTop:s.offsetTop,r=s.getBoundingClientRect().height;o+s.offsetTop>e?this.presetElement.scrollTop=n?o-(e/2+r/2):o:this.presetElement.scrollTop=0}},t.prototype.popupKeyActionHandle=function(e){var t=Mi(e.target,".e-presets");switch(e.action){case"escape":this.isPopupOpen()?(this.isKeyPopup&&(this.inputElement.focus(),this.isKeyPopup=!1),this.hide(e)):this.inputWrapper.container.children[1].blur();break;case"enter":this.isPopupOpen()?this.inputWrapper.container.children[1].focus():this.show(null,e);break;case"tab":this.hide(e);break;case"altRightArrow":ae(t)?document.activeElement===this.cancelButton.element&&!0!==this.applyButton.element.disabled?this.applyButton.element.focus():this.leftCalendar.children[1].firstElementChild.focus():this.cancelButton.element.focus(),e.preventDefault();break;case"altLeftArrow":ae(t)?document.activeElement===this.applyButton.element&&!0!==this.applyButton.element.disabled?this.cancelButton.element.focus():ae(this.presetElement)||document.activeElement!==this.cancelButton.element?this.rightCalendar.children[1].firstElementChild.focus():this.presetElement.focus():this.rightCalendar.children[1].firstElementChild.focus(),e.preventDefault()}},t.prototype.documentHandler=function(e){if(!ae(this.popupObj)){var t=e.target;this.inputWrapper.container.contains(t)&&(ae(this.popupObj)||Mi(t,'[id="'+this.popupWrapper.id+'"]'))||"touchstart"!==e.type&&("mousedown"===e.type||this.closeEventArgs&&!this.closeEventArgs.cancel)&&e.preventDefault(),!ae(this.targetElement)&&(ae(this.targetElement)||t===this.targetElement)||Mi(t,'[id="'+this.popupWrapper.id+'"]')||Mi(t,".e-input-group")===this.inputWrapper.container||Mi(t,".e-daterangepicker.e-popup")&&!t.classList.contains("e-day")||(this.preventBlur=!1,this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&(this.applyFunction(e),this.isMobile||(this.isRangeIconClicked=!1)))}},t.prototype.createInput=function(){var e=this.cssClass;ae(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Na.createInput({floatLabelType:this.floatLabelType,element:this.inputElement,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-range-icon e-icons"]},this.createElement),Di(this.inputElement,{"aria-readonly":this.readonly?"true":"false",tabindex:"0","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_popup","aria-expanded":"false",role:"combobox",autocomplete:"off","aria-disabled":this.enabled?"false":"true",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),Na.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),ae(this.placeholder)||""===this.placeholder.trim()||Na.addAttributes({"aria-placeholder":this.placeholder},this.inputElement),this.setEleWidth(this.width),bi([this.inputWrapper.container],"e-date-range-wrapper"),ae(this.inputElement.getAttribute("name"))&&Di(this.inputElement,{name:this.element.id}),"hidden"===this.inputElement.type&&(this.inputWrapper.container.style.display="none"),this.refreshControl(),this.previousEleValue=this.inputElement.value,this.inputElement.setAttribute("value",this.inputElement.value),this.startCopy=this.startDate,this.endCopy=this.endDate},t.prototype.setEleWidth=function(e){this.inputWrapper.container.style.width="string"==typeof e?this.width:"number"==typeof e?ge(this.width):"100%"},t.prototype.adjustLongHeaderWidth=function(){"Wide"===this.dayHeaderFormat&&bi([this.popupWrapper],"e-daterange-day-header-lg")},t.prototype.refreshControl=function(){this.validateMinMax(),this.strictMode&&this.validateRangeStrict();var e=this.disabledDates();this.strictMode&&e&&(this.startValue=this.previousStartValue,this.setProperties({startDate:this.startValue},!0),this.endValue=this.previousEndValue,this.setProperties({endDate:this.endValue},!0),this.setValue()),this.updateInput(),this.strictMode||this.validateRange(),!this.strictMode&&e&&this.clearRange(),ae(this.endValue)||ae(this.startValue)||e||this.disabledDateRender(),this.errorClass(),this.previousStartValue=ae(this.startValue)||isNaN(+this.startValue)?null:new Date(+this.startValue),this.previousEndValue=ae(this.endValue)||isNaN(+this.endValue)?null:new Date(+this.endValue)},t.prototype.updateInput=function(){if(!ae(this.endValue)&&!ae(this.startValue)){var e={format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"},t=this.globalize.formatDate(this.startValue,e),i=this.globalize.formatDate(this.endValue,e);Na.setValue(t+" "+this.separator+" "+i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousStartValue=new Date(+this.startValue),this.previousEndValue=new Date(+this.endValue)}!this.strictMode&&ae(this.value)&&this.invalidValueString&&Na.setValue(this.invalidValueString,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.checkInvalidRange=function(e){if(!ae(e)){var t=!1,i=void 0,s=void 0,n=null,o=null,r=null,a=!1,l=!1,h=!1;if("string"==typeof e){var c=e.split(" "+this.separator+" ");2===c.length?(n=c[0],o=c[1]):(t=!0,r=e)}else e.length>0?(i=e[0],s=e[1]):(i=e.start,s=e.end),i instanceof Date||"object"==typeof i?i instanceof Date?a=!0:ae(i)||(h=!0):n=this.getstringvalue(i),s instanceof Date||"object"==typeof s?s instanceof Date?l=!0:ae(s)||(h=!0):o=this.getstringvalue(s);(ae(n)&&!a&&!ae(o)||!ae(n)&&!l&&ae(o))&&(t=!0),h&&(n=o=r=null,t=!0),n&&(t=t||this.checkInvalidValue(n)),o&&(t=t||this.checkInvalidValue(o)),t&&(a&&!h&&(n=i.toLocaleDateString()),l&&!h&&(o=s.toLocaleDateString()),ae(n)||ae(o)?ae(n)?ae(o)||(r=o):r=n:r=n+" "+this.separator+" "+o,this.invalidValueString=r,this.setProperties({value:null},!0),this.setProperties({startValue:null},!0),this.setProperties({endValue:null},!0),this.startDate=null,this.endDate=null)}},t.prototype.getstringvalue=function(e){var t=null;return ae(e)||"number"!=typeof e?ae(e)||"string"!=typeof e||(t=""+e):t=e.toString(),t},t.prototype.checkInvalidValue=function(e){var t,i=e,s=!1;if(t={format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"},"string"!=typeof i)s=!0;else{var n=new Qe(this.locale);if(!this.checkDateValue(n.parseDate(i,t))){var o=null;o=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,(!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!o.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i))))&&(s=!0)}}return s},t.prototype.isDateDisabled=function(e){if(ae(e))return!1;var t=new Date(+e);if(+t<+this.min||+t>+this.max)return!0;this.virtualRenderCellArgs={date:t,isDisabled:!1};var i=this.virtualRenderCellArgs;return this.virtualRenderCellEvent(i),!!i.isDisabled},t.prototype.disabledDateRender=function(){this.disabledDays=[],this.disabledDayCnt=null;for(var e=new Date(+this.startValue),t=0;+e<=+this.endValue;){this.virtualRenderCellArgs={date:e,isDisabled:!1};var i=this.virtualRenderCellArgs;this.virtualRenderCellEvent(i),i.isDisabled&&(this.disabledDays.push(new Date(+i.date)),+e>+this.startValue&&+e<+this.endValue&&t++),this.addDay(e,1,null,this.max,this.min)}this.disabledDayCnt=t},t.prototype.virtualRenderCellEvent=function(e){re(this.virtualRenderCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.disabledDates=function(){var e=!1,t=!1;return ae(this.endValue)||ae(this.startValue)||(e=this.isDateDisabled(this.startValue),t=this.isDateDisabled(this.endValue),this.isPopupOpen()||(this.currentDate=null),this.setValue()),e||t},t.prototype.setModelValue=function(){this.value||null!==this.startDate||null!==this.endDate?null===this.value||null===this.value.start?null===this.value?this.setProperties({value:[this.startDate,this.endDate]},!0):null===this.value.start&&this.setProperties({value:{start:this.startDate,end:this.endDate}},!0):this.value&&this.value.length>0||this.valueType&&this.valueType.length>0?(+this.startDate==+this.value[0]&&+this.endDate==+this.value[1]||this.setProperties({value:[this.startDate,this.endDate]},!0),this.value&&null==this.value[0]&&null==this.value[1]&&this.setProperties({value:null},!0)):this.value&&this.value.start&&this.setProperties({value:{start:this.startDate,end:this.endDate}},!0):this.setProperties({value:null},!0),this.createHiddenInput()},t.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i),this.firstHiddenChild.dispatchEvent(i)},t.prototype.changeTrigger=function(e){+this.initStartDate==+this.startValue&&+this.initEndDate==+this.endValue||(this.setProperties({endDate:this.checkDateValue(this.endValue)},!0),this.setProperties({startDate:this.checkDateValue(this.startValue)},!0),this.setModelValue(),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.rangeArgs(e))),this.previousEleValue=this.inputElement.value,this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue)},t.prototype.navigateTo=function(t,i){if(this.isPopupOpen()){if("month"===t.toLowerCase())t="Month";else if("year"===t.toLowerCase())t="Year";else{if("decade"!==t.toLowerCase())return;t="Decade"}this.getViewNumber(t)<this.getViewNumber(this.depth)&&(t=this.depth),this.isMobile?e.prototype.navigateTo.call(this,t,i):(i<this.min?i=new Date(+this.min):i>=this.max&&(i=new Date(+this.max)),"Month"===t&&this.isSameMonth(i,this.max)?i=new Date(this.max.getFullYear(),this.max.getMonth()-1,this.min.getDate()):"Year"===t&&this.isSameYear(i,this.max)?i=new Date(this.max.getFullYear()-1,this.max.getMonth(),this.max.getDate()):"Decade"===t&&this.isSameDecade(i,this.max)&&(i=new Date(this.max.getFullYear()-10,this.max.getMonth(),this.max.getDate())),this.leftCalCurrentDate=i,this.navigate(this.leftCalendar,this.leftCalCurrentDate,t),i="Month"===t?new Date(this.currentDate.setMonth(this.currentDate.getMonth()+1)):"Year"===t?new Date(this.currentDate.setFullYear(this.currentDate.getFullYear()+1)):new Date(this.currentDate.setFullYear(this.currentDate.getFullYear()+10)),this.rightCalCurrentDate=i,this.navigate(this.rightCalendar,this.rightCalCurrentDate,t),this.leftKeyboardModule=this.rightKeyboardModule=null,this.updateNavIcons()),this.currentView()===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate(),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar])}},t.prototype.navigate=function(t,i,s){this.calendarElement=t,this.table=t.querySelector("table"),this.tableBodyElement=t.querySelector("tbody"),this.headerTitleElement=t.querySelector(".e-title"),this.tableHeadElement=t.querySelector("thead"),this.contentElement=t.querySelector(".e-content"),this.previousIcon=t.querySelector(".e-prev"),this.nextIcon=t.querySelector(".e-next"),this.effect="e-zoomin",e.prototype.navigateTo.call(this,s,i)},t.prototype.focusIn=function(){if(document.activeElement!==this.inputElement&&this.enabled){bi([this.inputWrapper.container],["e-input-focus"]),this.inputElement.focus()}},t.prototype.focusOut=function(){var e=this.preventBlur;document.activeElement===this.inputElement&&(Ci([this.inputWrapper.container],["e-input-focus"]),this.preventBlur=!1,this.inputElement.blur(),this.preventBlur=e)},t.prototype.destroy=function(){this.unBindEvents(),this.hide(null);var t={"aria-readonly":this.readonly?"true":"false",tabindex:"0","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_popup","aria-expanded":"false",role:"combobox",autocomplete:"off","aria-disabled":this.enabled?"false":"true",autocorrect:"off",autocapitalize:"off","aria-invalid":"false",spellcheck:"false"};this.inputElement&&(Ci([this.inputElement],["e-daterangepicker"]),Ct.remove(this.inputElement,"blur",this.inputBlurHandler),Na.removeAttributes(t,this.inputElement),ae(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.inputElement.classList.remove("e-input"),ae(this.inputWrapper)||(Ct.remove(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),Ti(this.inputWrapper.container))),ae(this.inputKeyboardModule)||this.isMobile||this.inputKeyboardModule.destroy(),this.popupObj&&(this.isMobile||this.clearCalendarEvents()),e.prototype.destroy.call(this),this.inputWrapper=this.popupWrapper=this.popupObj=this.cloneElement=this.presetElement=null,this.formElement&&Ct.remove(this.formElement,"reset",this.formResetHandler),ae(this.firstHiddenChild)||ae(this.secondHiddenChild)||(Ti(this.firstHiddenChild),Ti(this.secondHiddenChild),this.firstHiddenChild=this.secondHiddenChild=null,this.inputElement.setAttribute("name",this.element.getAttribute("data-name")),this.inputElement.removeAttribute("data-name"))},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)ae(this.cloneElement.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.cloneElement.getAttribute(e[t])))},t.prototype.getModuleName=function(){return"daterangepicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["startDate","endDate","value"])},t.prototype.getSelectedRange=function(){var e;return ae(this.startValue)||ae(this.endValue)?e=0:(e=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1,this.disabledDateRender(),ae(this.disabledDayCnt)||(e-=this.disabledDayCnt,this.disabledDayCnt=null)),{startDate:this.startValue,endDate:this.endValue,daySpan:e}},t.prototype.show=function(t,i){var s=this;if(this.isMobile&&this.popupObj&&this.popupObj.refreshPosition(),!(this.enabled&&this.readonly||!this.enabled||this.popupObj||this.isPopupOpen())){t&&(this.targetElement=t),this.createPopup(),(this.isMobile||bt.isDevice)&&(this.mobileRangePopupWrap=this.createElement("div",{className:"e-daterangepick-mob-popup-wrap"}),document.body.appendChild(this.mobileRangePopupWrap)),this.openEventArgs={popup:ye()&&this.isServerRendered?null:this.popupObj||null,cancel:!1,date:this.inputElement.value,model:ye()&&this.isServerRendered?null:this,event:i||null,appendTo:this.isMobile||bt.isDevice?this.mobileRangePopupWrap:document.body};var n=this.openEventArgs;this.trigger("open",n,function(n){if(s.openEventArgs=n,!s.openEventArgs.cancel){s.openEventArgs.appendTo.appendChild(s.popupWrapper),s.showPopup(t,i);var o=!s.isCustomRange||s.isMobile&&s.isCustomRange;!le(s.presets[0].start&&s.presets[0].end&&s.presets[0].label)&&o&&s.setScrollPosition(),s.checkMinMaxDays(),s.isMobile&&!ae(s.startDate)&&ae(s.endDate)&&(s.endButton.element.classList.add("e-active"),s.startButton.element.classList.remove("e-active"),s.endButton.element.removeAttribute("disabled"),s.selectableDates()),e.prototype.setOverlayIndex.call(s,s.mobileRangePopupWrap,s.popupObj.element,s.modal,s.isMobile||bt.isDevice)}})}},t.prototype.hide=function(e){var t=this;if(this.popupObj){if(ae(this.previousEndValue)&&ae(this.previousStartValue)?this.clearRange():(ae(this.previousStartValue)?(this.startValue=null,this.setValue()):(this.startValue=new Date(this.checkValue(this.previousStartValue)),this.setValue(),this.currentDate=new Date(this.checkValue(this.startValue))),ae(this.previousEndValue)?(this.endValue=null,this.setValue()):(this.endValue=new Date(this.checkValue(this.previousEndValue)),this.setValue())),this.isPopupOpen()){this.closeEventArgs={cancel:!1,popup:ye()&&this.isServerRendered?null:this.popupObj,date:this.inputElement.value,model:ye()&&this.isServerRendered?null:this,event:e||null};var i=this.closeEventArgs;this.trigger("close",i,function(e){t.closeEventArgs=e,t.closeEventArgs.cancel?Ci([t.inputWrapper.buttons[0]],"e-active"):(t.isMobile&&(ae(t.startButton)||ae(t.endButton)||(Ct.remove(t.startButton.element,"click touchstart",t.deviceHeaderClick),Ct.remove(t.endButton.element,"click touchstart",t.deviceHeaderClick))),t.popupObj&&(t.popupObj.hide(),t.preventBlur&&(t.inputElement.focus(),bi([t.inputWrapper.container],["e-input-focus"]))),t.isMobile||(ae(t.leftKeyboardModule)||ae(t.rightKeyboardModule)||(t.leftKeyboardModule.destroy(),t.rightKeyboardModule.destroy()),ae(t.presetElement)||t.presetKeyboardModule.destroy(),ae(t.cancelButton)||t.btnKeyboardModule.destroy()),t.targetElement=null,Ci([document.body],"e-range-overflow"),Ct.remove(document,"mousedown touchstart",t.documentHandler),t.isMobile&&t.modal&&(t.modal.style.display="none",t.modal.outerHTML="",t.modal=null),(t.isMobile||bt.isDevice)&&(ae(t.mobileRangePopupWrap)||(t.mobileRangePopupWrap.remove(),t.mobileRangePopupWrap=null)),t.isKeyPopup=t.dateDisabled=!1),t.updateClearIconState(),t.updateHiddenInput(),t.isMobile&&t.allowEdit&&!t.readonly&&t.inputElement.removeAttribute("readonly")})}}else this.updateClearIconState(),this.updateHiddenInput(),this.isMobile&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},t.prototype.setLocale=function(){this.globalize=new Qe(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Na.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.updateHiddenInput(),this.changeTrigger()},t.prototype.refreshChange=function(){this.checkView(),this.refreshControl(),this.changeTrigger()},t.prototype.setDate=function(){Na.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.refreshChange()},t.prototype.enableInput=function(){+this.min<=+this.max&&(this.setProperties({enabled:!0},!0),Na.setEnabled(this.enabled,this.inputElement),this.element.hasAttribute("disabled")&&this.bindEvents())},t.prototype.clearModelvalue=function(e,t){this.setProperties({startDate:null},!0),this.setProperties({endDate:null},!0),t.value&&t.value.length>0?this.setProperties({value:null},!0):t.value&&t.value.start?this.setProperties({value:{start:null,end:null}},!0):t.value&&!t.value.start&&this.setProperties({value:{start:null,end:null}},!0),this.updateValue(),this.setDate()},t.prototype.createHiddenInput=function(){ae(this.firstHiddenChild)&&ae(this.secondHiddenChild)&&(this.firstHiddenChild=this.createElement("input"),this.secondHiddenChild=this.createElement("input")),ae(this.inputElement.getAttribute("name"))||(this.inputElement.setAttribute("data-name",this.inputElement.getAttribute("name")),this.inputElement.removeAttribute("name")),Di(this.firstHiddenChild,{type:"text",name:this.inputElement.getAttribute("data-name"),class:"e-daterange-hidden"}),Di(this.secondHiddenChild,{type:"text",name:this.inputElement.getAttribute("data-name"),class:"e-daterange-hidden"});var e={type:"datetime",skeleton:ye()?"d":"yMd"};this.firstHiddenChild.value=this.startDate&&this.globalize.formatDate(this.startDate,e),this.secondHiddenChild.value=this.endDate&&this.globalize.formatDate(this.endDate,e),this.inputElement.parentElement.appendChild(this.firstHiddenChild),this.inputElement.parentElement.appendChild(this.secondHiddenChild)},t.prototype.setMinMaxDays=function(){this.isPopupOpen()&&(this.removeClassDisabled(),this.checkMinMaxDays(),this.isMobile&&this.selectableDates(),!this.strictMode&&ae(this.startValue)&&ae(this.endValue)?this.removeSelection():this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),this.updateHeader())},t.prototype.onPropertyChanged=function(e,t){for(var i={format:this.formatString,type:"date",skeleton:ye()?"d":"yMd"},s=0,n=Object.keys(e);s<n.length;s++){var o=n[s];switch(["maxDays","minDays","value"].indexOf(o)<0&&this.hide(null),o){case"width":this.setEleWidth(this.width);break;case"separator":this.previousEleValue=this.inputElement.value,this.setProperties({separator:e.separator},!0),this.updateInput(),this.changeTrigger();break;case"placeholder":Na.setPlaceholder(e.placeholder,this.inputElement),this.setProperties({placeholder:e.placeholder},!0);break;case"readonly":Na.setReadonly(this.readonly,this.inputElement),this.inputElement.setAttribute("aria-readonly",""+this.readonly),this.setRangeAllowEdit();break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":this.setProperties({enabled:e.enabled},!0),Na.setEnabled(this.enabled,this.inputElement),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1;break;case"allowEdit":this.setRangeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),Na.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.updateInput(),this.changeTrigger();break;case"locale":this.globalize=new Qe(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Na.setPlaceholder(this.placeholder,this.inputElement),this.setLocale();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.setDataAttribute(!0),this.checkHtmlAttributes(!0);break;case"showClearButton":Na.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"startDate":"string"==typeof e.startDate&&(e.startDate=this.globalize.parseDate(e.startDate,i)),+this.initStartDate!=+e.startDate&&(this.startValue=this.checkDateValue(new Date(this.checkValue(e.startDate))),this.setDate(),this.setValue());break;case"endDate":"string"==typeof e.endDate&&(e.endDate=this.globalize.parseDate(e.endDate,i)),+this.initEndDate!=+e.endDate&&(this.endValue=this.checkDateValue(new Date(this.checkValue(e.endDate))),this.setDate(),this.setValue());break;case"value":if(this.invalidValueString=null,this.checkInvalidRange(e.value),"string"==typeof e.value)if(this.invalidValueString)this.clearModelvalue(e,t);else{var r=e.value.split(" "+this.separator+" ");this.value=[new Date(r[0]),new Date(r[1])],this.updateValue(),this.setDate()}else!ae(e.value)&&e.value.length>0||!ae(e.value)&&e.value.start?(this.valueType=e.value,null===e.value[0]||null===e.value.start?1===e.value.length||e.value.start?this.clearModelvalue(e,t):null!==e.value[1]&&null!==e.value.start||this.clearModelvalue(e,t):+this.initStartDate==+e.value[0]&&+this.initEndDate==+e.value[1]&&+this.initStartDate==+(e.value.start||+this.initEndDate!=+e.value.start)||(1===e.value.length?this.modelValue=e.value:e.value.start&&(this.modelValue=e.value),this.updateValue(),this.setDate())):(ae(this.value)||null==e.value.start)&&(this.valueType=e.value,this.startValue=null,this.endValue=null,this.clearModelvalue(e,t));if(this.isPopupOpen()){if(ae(this.startValue)&&ae(this.endValue))return this.removeSelection(),void(this.isMobile&&this.deviceHeaderUpdate());this.isMobile?(this.navigate(this.deviceCalendar,this.startValue,this.currentView()),this.deviceHeaderUpdate()):(this.navigate(this.leftCalendar,this.startValue,this.currentView()),this.updateControl(this.leftCalendar),this.navigate(this.rightCalendar,this.endValue,this.currentView()),this.updateControl(this.rightCalendar)),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),this.updateHeader(),this.applyButton.disabled=this.applyButton.element.disabled=!1}break;case"minDays":this.setProperties({minDays:e.minDays},!0),this.refreshChange(),this.setMinMaxDays();break;case"maxDays":this.setProperties({maxDays:e.maxDays},!0),this.refreshChange(),this.setMinMaxDays();break;case"min":this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0),this.previousEleValue=this.inputElement.value,this.enableInput(),this.refreshChange();break;case"max":this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.enableInput(),this.refreshChange();break;case"strictMode":this.invalidValueString=null,this.setProperties({strictMode:e.strictMode},!0),this.refreshChange();break;case"presets":this.setProperties({presets:e.presets},!0),this.processPresets();break;case"floatLabelType":this.floatLabelType=e.floatLabelType,Na.removeFloating(this.inputWrapper),Na.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"start":this.setProperties({start:e.start},!0),this.refreshChange();break;case"depth":this.setProperties({depth:e.depth},!0),this.refreshChange()}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}},Hu([os(null)],t.prototype,"value",void 0),Hu([os(!1)],t.prototype,"enablePersistence",void 0),Hu([os(new Date(1900,0,1))],t.prototype,"min",void 0),Hu([os(new Date(2099,11,31))],t.prototype,"max",void 0),Hu([os(null)],t.prototype,"locale",void 0),Hu([os(null)],t.prototype,"firstDayOfWeek",void 0),Hu([os(!1)],t.prototype,"weekNumber",void 0),Hu([os("Gregorian")],t.prototype,"calendarMode",void 0),Hu([os(!1)],t.prototype,"openOnFocus",void 0),Hu([cs()],t.prototype,"created",void 0),Hu([cs()],t.prototype,"destroyed",void 0),Hu([cs()],t.prototype,"change",void 0),Hu([cs()],t.prototype,"cleared",void 0),Hu([cs()],t.prototype,"navigated",void 0),Hu([cs()],t.prototype,"renderDayCell",void 0),Hu([os(null)],t.prototype,"startDate",void 0),Hu([os(null)],t.prototype,"endDate",void 0),Hu([ls([{}],Qu)],t.prototype,"presets",void 0),Hu([os("")],t.prototype,"width",void 0),Hu([os(1e3)],t.prototype,"zIndex",void 0),Hu([os(!0)],t.prototype,"showClearButton",void 0),Hu([os(!0)],t.prototype,"showTodayButton",void 0),Hu([os("Month")],t.prototype,"start",void 0),Hu([os("Month")],t.prototype,"depth",void 0),Hu([os("")],t.prototype,"cssClass",void 0),Hu([os("-")],t.prototype,"separator",void 0),Hu([os(null)],t.prototype,"minDays",void 0),Hu([os(null)],t.prototype,"maxDays",void 0),Hu([os(!1)],t.prototype,"strictMode",void 0),Hu([os(null)],t.prototype,"keyConfigs",void 0),Hu([os(null)],t.prototype,"format",void 0),Hu([os(!0)],t.prototype,"enabled",void 0),Hu([os(!1)],t.prototype,"readonly",void 0),Hu([os(!0)],t.prototype,"allowEdit",void 0),Hu([os("Never")],t.prototype,"floatLabelType",void 0),Hu([os(null)],t.prototype,"placeholder",void 0),Hu([os({})],t.prototype,"htmlAttributes",void 0),Hu([cs()],t.prototype,"open",void 0),Hu([cs()],t.prototype,"close",void 0),Hu([cs()],t.prototype,"select",void 0),Hu([cs()],t.prototype,"focus",void 0),Hu([cs()],t.prototype,"blur",void 0),t=Hu([ps],t)}(ku),$u={},em={},tm={},im={},sm={},nm={};Object(Y.copy)($u,H),Object(Y.copy)(em,s),Object(Y.copy)(tm,o),Object(Y.copy)(im,a),Object(Y.copy)(sm,v),Object(Y.copy)(nm,k),Object(Y.copy)($u,B);var om={},rm={},am={};Object(Y.copy)(om,d),Object(Y.copy)(rm,s),Object(Y.copy)(om,r),Object(Y.copy)(om,o),Object(Y.copy)(am,a);var lm={},hm={},cm={},pm={};Object(Y.copy)(lm,C),Object(Y.copy)(hm,s),Object(Y.copy)(cm,o),Object(Y.copy)(pm,a);var dm={},um={},mm={},fm={},gm={},vm={},ym={};Object(Y.copy)(dm,D),Object(Y.copy)(um,s),Object(Y.copy)(mm,E),Object(Y.copy)(fm,k),Object(Y.copy)(gm,v),Object(Y.copy)(vm,a),Object(Y.copy)(ym,o);var bm=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Cm=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Sm="e-toolbar-items",xm="e-toolbar-popup",wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bm(t,e),Cm([os("")],t.prototype,"id",void 0),Cm([os("")],t.prototype,"text",void 0),Cm([os("auto")],t.prototype,"width",void 0),Cm([os("")],t.prototype,"cssClass",void 0),Cm([os(!1)],t.prototype,"showAlwaysInPopup",void 0),Cm([os(!1)],t.prototype,"disabled",void 0),Cm([os("")],t.prototype,"prefixIcon",void 0),Cm([os("")],t.prototype,"suffixIcon",void 0),Cm([os(!0)],t.prototype,"visible",void 0),Cm([os("None")],t.prototype,"overflow",void 0),Cm([os("")],t.prototype,"template",void 0),Cm([os("Button")],t.prototype,"type",void 0),Cm([os("Both")],t.prototype,"showTextOn",void 0),Cm([os(null)],t.prototype,"htmlAttributes",void 0),Cm([os("")],t.prototype,"tooltipText",void 0),Cm([os("Left")],t.prototype,"align",void 0),Cm([cs()],t.prototype,"click",void 0),t}(Ls),Em=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.resizeContext=s.resize.bind(s),s.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},s}return bm(t,e),t.prototype.destroy=function(){var t=this;for(this.isReact&&this.clearTemplate(),e.prototype.destroy.call(this),this.unwireEvents(),this.tempId.forEach(function(e){ae(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")});this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&this.element.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&Ci([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(e){return t.element.removeAttribute(e)})},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.wireEvents=function(){Ct.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new Qs(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),Ct.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(Ct.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!ae(this.popObj)&&xi(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){Ct.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),Ct.remove(document,"scroll",this.docEvent),Ct.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var t=Mi(e.target,".e-popup");this.popObj&&xi(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){this.element&&[].slice.call(this.element.querySelectorAll(".e-toolbar-item")).forEach(function(e){Ti(e)});var e=this.element.querySelector("."+Sm);this.tbarAlign&&([].slice.call(e.children).forEach(function(e){Ti(e)}),this.tbarAlign=!1,this.remove(e,"e-tbar-pos")),this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,"e-tbar-extended"),this.remove(this.element,"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,t){return e&&this.popObj&&xi(this.popObj.element)?this.popObj.element.querySelector(".e-toolbar-item"):this.element===t||e?this.element.querySelector(".e-toolbar-item:not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):Mi(t,".e-toolbar-item")},t.prototype.keyHandling=function(e,t,i,s,n){var o=this.popObj,r=this.element,a={name:"FadeOut",duration:100};switch(t.action){case"moveRight":if(this.isVertical)return;r===i?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":var l=void 0,h=void 0;if(e){var c=Mi(e,".e-popup");c?xi(this.popObj.element)&&(h=[].slice.call(c.children),l="home"===t.action?h[0]:h[h.length-1]):(h=this.element.querySelectorAll("."+Sm+" .e-toolbar-item"),l="home"===t.action?h[0]:h[h.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":var p="moveUp"===t.action?"previous":"next";if(this.isVertical)"moveUp"===t.action?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(o&&Mi(i,".e-popup")){var d=o.element,u=d.firstElementChild;if("previous"===p&&u===e||"next"===p&&d.lastElementChild===e)return;this.eleFocus(e,p)}else"moveDown"===t.action&&o&&xi(o.element)&&this.elementFocus(e);break;case"tab":if(!n&&!s){var m=e.firstElementChild;r===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(m),m.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(a);break;case"popupOpen":if(!s)return;o&&!xi(o.element)?(o.element.style.top=r.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(a)}},t.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){var i;e.preventDefault();var s=t.classList.contains("e-hor-nav"),n=t.classList.contains("e-scroll-nav");((i=this.clstElement(s,t))||n)&&this.keyHandling(i,e,t,s,n)}},t.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(xi(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!xi(e)},t.prototype.eleFocus=function(e,t){var i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){var s=Object(e.parentElement)[t+"ElementSibling"];if(ae(s)||0!==s.children.length||(s=Object(s)[t+"ElementSibling"]),!ae(s)&&s.children.length>0)if("next"===t){var n=s.querySelector(".e-toolbar-item");this.eleContains(n)?this.eleFocus(n,t):(n.firstElementChild.focus(),this.activeEleSwitch(n))}else{n=s.lastElementChild;this.eleContains(n)?this.eleFocus(n,t):this.elementFocus(n)}}},t.prototype.clickHandler=function(e){var t,i=this,s=e.target,n=s.classList,o=this.element,r=!ae(Mi(s,".e-toolbar-pop")),a=Mi(s,".e-hor-nav");a||(a=s),o.children[0].classList.contains("e-hscroll")||o.children[0].classList.contains("e-vscroll")||!n.contains("e-hor-nav")||(n=s.querySelector(".e-icons").classList),(n.contains("e-popup-up-icon")||n.contains("e-popup-down-icon"))&&this.popupClickHandler(o,a,"e-rtl");var l=Mi(e.target,".e-toolbar-item");if(!ae(l)&&!l.classList.contains("e-overlay")||a.classList.contains("e-hor-nav")){if(l)t=this.items[this.tbarEle.indexOf(l)];var h={originalEvent:e,item:t};t&&!ae(t.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",h),h.cancel||this.trigger("clicked",h,function(e){!ae(i.popObj)&&r&&!e.cancel&&"Popup"===i.overflowMode&&e.item&&"Input"!==e.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,t,i){var s=this.popObj;xi(s.element)?(t.classList.remove("e-nav-active"),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0!==s.offsetX||e.classList.contains(i)||(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),t.classList.add("e-nav-active"),s.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=ge(this.width),t=ge(this.height);"msie"===bt.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||Ri(this.element,{height:t}),Ri(this.element,{width:e});var i={role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};Di(this.element,i),this.cssClass&&bi([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,t){var i,s;this.tbarEle||(this.tbarEle=[]);for(var n=0;n<e.length;n++)i=this.renderSubComponent(e[n],n),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[n],t,n),(s=t.querySelector(".e-toolbar-"+e[n].align.toLowerCase()))?(e[n].showAlwaysInPopup&&"Show"!==e[n].overflow||this.tbarAlgEle[(e[n].align+"s").toLowerCase()].push(i),s.appendChild(i)):t.appendChild(i);if(this.isReact){this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates()}},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add("e-vertical"),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Ri(this.element,{height:ge(this.height),width:ge(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+Sm+" .e-toolbar-center").removeAttribute("style"),this.isVertical?this.scrollModule=new Gd({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):this.scrollModule=new qd({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,"e-tbar-pos"),Ri(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var t,i=this,s=0;return[].slice.call(Oi(".e-toolbar-item",e)).forEach(function(e){xi(e)&&(t=window.getComputedStyle(e),s+=i.isVertical?e.offsetHeight:e.offsetWidth,s+=parseFloat(i.isVertical?t.marginTop:t.marginRight),s+=parseFloat(i.isVertical?t.marginBottom:t.marginLeft))}),s},t.prototype.getScrollCntEle=function(e){var t=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},t.prototype.checkOverflow=function(e,t){if(ae(e)||ae(t)||!xi(e))return!1;var i=this.isVertical?e.offsetHeight:e.offsetWidth,s=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var n=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),r=0;return n?r=this.isVertical?n.offsetHeight:n.offsetWidth:o&&(r=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),s>i-r},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,"e-tbar-pos"),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,t=e.querySelector("."+Sm),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===bt.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":ae(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(Sm)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,"e-toolbar-multirow"),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,"e-multirow-pos")),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==bt.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(Oi("."+Sm+" .e-toolbar-item",e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")},t.prototype.separator=function(){var e,t=this.element,i=[].slice.call(t.querySelectorAll(".e-separator")),s=t.querySelector(".e-multirow-separator"),n=t.querySelector(".e-extended-separator");null!==(e="MultiRow"===this.overflowMode?s:n)&&("MultiRow"===this.overflowMode?e.classList.remove("e-multirow-separator"):"Extended"===this.overflowMode&&e.classList.remove("e-extended-separator"));for(var o=0;o<=i.length-1;o++)i[o].offsetLeft<30&&0!==i[o].offsetLeft&&("MultiRow"===this.overflowMode?i[o].classList.add("e-multirow-separator"):"Extended"===this.overflowMode&&i[o].classList.add("e-extended-separator"))},t.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),s=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var n=s?i.offsetHeight:i.offsetWidth,o=(s?e.offsetHeight:e.offsetWidth)-n;this.element.classList.remove("e-rtl"),Ri(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,t,i,s,n){var o=e.element,r=Oi(".e-overflow-show",i),a=0,l=[].slice.call(Oi("."+xm,o.querySelector("."+Sm))),h=0;l.forEach(function(o,l){r=Oi(".e-overflow-show",i),o.classList.contains("e-overflow-show")&&r.length>0?e.tbResize&&r.length>l?(i.insertBefore(o,r[l]),++h):(i.insertBefore(o,i.children[r.length]),++h):o.classList.contains("e-overflow-show")?(i.insertBefore(o,i.firstChild),++h):e.tbResize&&o.classList.contains("e-overflow-hide")&&i.children.length>0&&0===r.length?(i.insertBefore(o,i.firstChild),++h):o.classList.contains("e-overflow-hide")?t.push(o):e.tbResize?(i.insertBefore(o,i.childNodes[a+h]),++a):i.appendChild(o),o.classList.contains("e-separator")?Ri(o,{display:"",height:n+"px"}):Ri(o,{display:"",height:s+"px"})}),t.forEach(function(e){i.appendChild(e)});for(var c=Oi(".e-toolbar-item",o.querySelector("."+Sm)),p=c.length-1;p>=0;p--){var d=c[p];if(!d.classList.contains("e-separator")||"Extended"===this.overflowMode)break;Ri(d,{display:"none"})}},t.prototype.createPopup=function(){var e,t,i,s,n,o=this.element;"Extended"===this.overflowMode&&(s=o.querySelector(".e-separator:not(."+xm+")"),i="auto"===o.style.height||""===o.style.height?null:s.offsetHeight),t=o.querySelector(".e-toolbar-item:not(.e-separator):not(."+xm+")"),e="auto"===o.style.height||""===o.style.height?null:t&&t.offsetHeight;if(o.querySelector("#"+o.id+"_popup.e-toolbar-pop"))n=o.querySelector("#"+o.id+"_popup.e-toolbar-pop");else{var r=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),a=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop"});n="Extended"===this.overflowMode?r:a}this.pushingPoppedEle(this,[],n,e,i),this.popupInit(o,n)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;Ri(i,{maxHeight:"",display:"block"}),Ri(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),Ri(this.element,{overflow:""});var s=window.getComputedStyle(this.element),n=new lo(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(n.appendTo(t),"Extended"===this.overflowMode&&(n.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth),n.offsetX=0),Ct.add(document,"scroll",this.docEvent.bind(this)),Ct.add(document,"click ",this.docEvent.bind(this)),n.element.style.maxHeight=n.element.offsetHeight+"px",this.isVertical&&(n.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector(".e-hor-nav");o.classList.add("e-nav-active"),Bi(o.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else n.hide();this.popObj=n,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,"e-tbar-extended"):this.remove(this.element,"e-tbar-extended"))},t.prototype.popupOpen=function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,s=this.popObj.element.parentElement,n=s.querySelector(".e-hor-nav");Ri(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+Tn(s).top,r=n.firstElementChild;n.classList.add("e-nav-active"),Bi(r,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=ae(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);t.height=l+"px";for(var h=0;h<=i.childElementCount;h++){var c=i.children[h];if(c.offsetTop+c.offsetHeight>l){l=c.offsetTop;break}}Ri(t.element,{maxHeight:l+"px"})}else if(this.isVertical){var p=this.element.getBoundingClientRect();Ri(t.element,{maxHeight:p.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}t&&t.refreshPosition()},t.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove("e-nav-active"),Bi(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,t,i,s){for(var n,o=this.popupPriCount>0,r=i,a=0,l=0,h=0,c=function(e,t){var i=!1;return t.forEach(function(t){e.classList.contains(t)&&(i=!0)}),i},p=t.length-1;p>=0;p--){var d=void 0,u=window.getComputedStyle(t[p]);this.isVertical?(d=parseFloat(u.marginTop),d+=parseFloat(u.marginBottom)):(d=parseFloat(u.marginRight),d+=parseFloat(u.marginLeft));var m=t[p]===this.tbarEle[0];m&&(this.tbarEleMrgn=d),n=this.isVertical?t[p].offsetHeight:t[p].offsetWidth;var f=m?n+d:n;if(c(t[p],["e-popup-alone"])&&o&&(t[p].classList.add(xm),this.isVertical?Ri(t[p],{display:"none",minHeight:f+"px"}):Ri(t[p],{display:"none",minWidth:f+"px"}),h++),this.isVertical?t[p].offsetTop+t[p].offsetHeight+d>i:t[p].offsetLeft+t[p].offsetWidth+d>i){if(t[p].classList.contains("e-separator")){if("Extended"===this.overflowMode){if(l===h)c(g=t[p],["e-separator","e-ignore"])&&(t[p].classList.add(xm),h++);l++}else if("Popup"===this.overflowMode){var g;if(a>0&&l===h)c(g=t[p+l+(a-1)],["e-separator","e-ignore"])&&Ri(g,{display:"none"});a++,l=0,h=0}}else l++;t[p].classList.contains("e-overflow-show")&&s?i-=(this.isVertical?t[p].offsetHeight:t[p].offsetWidth)+d:c(t[p],["e-separator","e-ignore"])?i-=(this.isVertical?t[p].offsetHeight:t[p].offsetWidth)+d:(t[p].classList.add(xm),this.isVertical?Ri(t[p],{display:"none",minHeight:f+"px"}):Ri(t[p],{display:"none",minWidth:f+"px"}),h++)}}if(s){var v=Oi(".e-toolbar-item:not(."+xm+")",this.element);this.checkPriority(e,v,r,!1)}},t.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var s=this.createElement("div",{id:t,className:i});"msie"!==bt.info.name&&"edge"!==bt.info.name||s.classList.add("e-ie-align");var n=this.createElement("div",{className:"e-popup-down-icon e-icons"});s.appendChild(n),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)},t.prototype.tbarPriRef=function(e,t,i,s,n,o,r,a){var l=a,h=this.popObj.element,c=Oi("."+xm+":not(.e-overflow-show)",h).length,p=function(e,t){return e.classList.contains(t)};if(0===Oi(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var d=e.children[t-(t-i)-1],u=!ae(d)&&p(d,"e-ignore");if(!ae(d)&&p(d,"e-separator")&&!xi(d)||u){d.style.display="inherit";var m=d.offsetWidth+2*parseFloat(window.getComputedStyle(d).marginRight),f=d.previousElementSibling;o+m<r||n?(e.insertBefore(s,e.children[t+l-(t-i)]),ae(f)||(f.style.display="")):f.classList.contains("e-separator")&&(f.style.display="none"),d.style.display=""}else e.insertBefore(s,e.children[t+l-(t-i)])}else e.insertBefore(s,e.children[t+l-c])},t.prototype.popupRefresh=function(e,t){var i=this,s=this.element,n=this.isVertical,o=s.querySelector(".e-hor-nav"),r=s.querySelector("."+Sm);if(!ae(o)){var a;r.removeAttribute("style"),e.style.display="block",a=n?s.offsetHeight-(o.offsetHeight+r.offsetHeight):s.offsetWidth-(o.offsetWidth+r.offsetWidth);var l=0;[].slice.call(e.children).forEach(function(e){l+=i.popupEleWidth(e),Ri(e,{position:""})}),a+(n?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(a,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(Ti(o),o=null,this.popObj.destroy(),Ti(this.popObj.element),this.popObj=null,s.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),s=[],n=0;return i.length>0?(i.forEach(function(e){s.push([].slice.call(t.children).indexOf(e))}),s.forEach(function(t){t<=e&&n++}),n):0},t.prototype.checkPopupRefresh=function(e,t){t.style.display="block";var i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var s=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,n=e.querySelector("."+Sm).offsetWidth;return t.style.removeProperty("display"),s>i+n},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var s=e.children[0];!ae(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!ae(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),s.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",ae(i)||(i.style.display="")}return t},t.prototype.popupEleRefresh=function(e,t,i){for(var s,n,o=this.popupPriCount>0,r=this.tbarEle,a=this.element.querySelector("."+Sm),l=0,h=function(t){if(t.classList.contains("e-popup-alone")&&o&&!i)return"continue";var h=c.popupEleWidth(t);if(t===c.tbarEle[0]&&(h+=c.tbarEleMrgn),t.style.position="",!(h<e||i))return"break";if(Ri(t,{minWidth:"",height:"",minHeight:""}),t.classList.contains("e-overflow-hide")||t.classList.remove(xm),n=c.tbarEle.indexOf(t),c.tbarAlign){var p=c.items[n].align;n=c.tbarAlgEle[(p+"s").toLowerCase()].indexOf(t),r=c.tbarAlgEle[(p+"s").toLowerCase()],a=c.element.querySelector("."+Sm+" .e-toolbar-"+p.toLowerCase())}var d=0;"Extended"!==c.overflowMode&&r.slice(0,n).forEach(function(t){(t.classList.contains("e-overflow-show")||t.classList.contains("e-separator"))&&(t.classList.contains("e-separator")&&(t.style.display="",e-=t.offsetWidth),d++)}),l=c.ignoreEleFetch(n,a),t.classList.contains("e-overflow-show")?(c.tbarPriRef(a,n,d,t,i,h,e,l),e-=t.offsetWidth):0===n?(a.insertBefore(t,a.firstChild),e-=t.offsetWidth):(s=Oi(".e-overflow-show",c.popObj.element).length,a.insertBefore(t,a.children[n+l-s]),e-=t.offsetWidth),t.style.height=""},c=this,p=0,d=[].slice.call(t.children);p<d.length;p++){if("break"===h(d[p]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(Sm)[0])&&!i&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+Sm);if(!ae(e)&&e.classList.contains("e-tbar-pos")){this.remove(e,"e-tbar-pos");var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+Sm);this.add(e,"e-tbar-pos"),this.itemPositioning()},t.prototype.itemPositioning=function(){var e,t=this.element.querySelector("."+Sm);if(!ae(t)&&t.classList.contains("e-tbar-pos")){var i,s=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var n=this.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(t.querySelector("."+n).children)}else i=[].slice.call(t.childNodes);e=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var o=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(s){o-=this.isVertical?s.offsetHeight:s.offsetWidth;var r=(this.isVertical?s.offsetHeight:s.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=r:i[2].style.bottom=r:this.enableRtl?i[2].style.left=r:i[2].style.right=r}if(!(o<=e)){var a=(o-e-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+a+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},t.prototype.tbarItemAlign=function(e,t,i){var s=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var n=[];if(n.push(this.createElement("div",{className:"e-toolbar-left"})),n.push(this.createElement("div",{className:"e-toolbar-center"})),n.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)n.forEach(function(e){t.appendChild(e)}),this.tbarAlign=!0,this.add(t,"e-tbar-pos");else if("Left"!==e.align){var o=t.childNodes,r=n[0];[].slice.call(o).forEach(function(e){s.tbarAlgEle.lefts.push(e),r.appendChild(e)}),t.appendChild(r),t.appendChild(n[1]),t.appendChild(n[2]),this.tbarAlign=!0,this.add(t,"e-tbar-pos")}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Sm),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(t){"DIV"===t.tagName&&(e.tbarEle.push(t),t.setAttribute("aria-disabled","false"),e.add(t,"e-toolbar-item"))})},t.prototype.renderItems=function(){var e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){var i=void 0;e&&e.children.length>0&&(i=e.querySelector("."+Sm)),i||(i=this.createElement("div",{className:Sm})),this.itemsAlign(t,i),e.appendChild(i)}},t.prototype.setAttr=function(e,t){for(var i,s=Object.keys(e),n=0;n<s.length;n++)"class"===(i=s[n])?this.add(t,e[i]):t.setAttribute(i,e[i])},t.prototype.enableItems=function(e,t){var i,s=e,n=s.length;ae(t)&&(t=!0);var o=function(e,t){e?(t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false")):(t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"))};if(!ae(n)&&n>=1){for(var r=0,a=[].slice.call(s);r<n;r++){var l=a[r];if("number"==typeof l){if(ae(i=this.getElementByIndex(l)))return;s[r]=i}else i=l;o(t,i)}t?Ci(s,"e-overlay"):bi(s,"e-overlay")}else{if("number"==typeof s){if(ae(i=this.getElementByIndex(s)))return}else i=e;o(t,i)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[e]?this.tbarEle[e]:null},t.prototype.addItems=function(e,t){var i;this.extendedOpen();var s=this.element.querySelector("."+Sm);if(ae(s))this.itemsRerender(e);else{var n,o="Left";ae(t)&&(t=0),e.forEach(function(e){ae(e.align)||"Left"===e.align||"Left"!==o||(o=e.align)});for(var r=0,a=e;r<a.length;r++){var l=a[r];if(ae(l.type)&&(l.type="Button"),i=Oi(".e-toolbar-item",this.element),l.align=o,n=this.renderSubComponent(l,t),this.tbarEle.length>=t&&i.length>=0){ae(this.scrollModule)&&this.destroyMode();var h="L"===l.align[0]?0:"C"===l.align[0]?1:2,c=void 0;this.tbarAlign||"Left"===o?this.tbarAlign?((c=Mi(i[0],"."+Sm).children[h]).insertBefore(n,c.children[t]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(t,0,n),this.refreshPositioning()):0===i.length?(i=Oi("."+Sm,this.element))[0].appendChild(n):i[0].parentNode.insertBefore(n,i[t]):(this.tbarItemAlign(l,s,1),this.tbarAlign=!0,(c=Mi(i[0],"."+Sm).children[h]).appendChild(n),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(n),this.refreshPositioning()),this.items.splice(t,0,l),this.tbarEle.splice(t,0,n),t++,this.offsetWid=s.offsetWidth}}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var t,i=e,s=[].slice.call(Oi(".e-toolbar-item",this.element));if("number"==typeof i)t=parseInt(e.toString(),10),this.removeItemByIndex(t,s);else if(i&&i.length>1)for(var n=0,o=[].slice.call(i);n<o.length;n++){var r=o[n];t=this.tbarEle.indexOf(r),this.removeItemByIndex(t,s),s=Oi(".e-toolbar-item",this.element)}else{r=i&&i.length&&1===i.length?i[0]:e;t=s.indexOf(r),this.removeItemByIndex(t,s)}this.resize()},t.prototype.removeItemByIndex=function(e,t){if(this.tbarEle[e]&&t[e]){var i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){var s;s=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]),this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(s,1)}this.isReact&&this.clearTemplate(),Ti(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},t.prototype.templateRender=function(e,t,i,s){var n,o=i.type,r=e;if("object"==typeof e&&(n="function"==typeof r.appendTo),"string"!=typeof e&&n){if("Input"===o){h=this.createElement("input");i.id?h.id=i.id:h.id=he("tbr-ipt"),t.appendChild(h),r.appendTo(h)}}else{var a,l=void 0;a="string"==typeof e?e.trim():e;try{if("object"!=typeof e||ae(e.tagName)){if(document.querySelectorAll(a).length){var h,c=(h=document.querySelector(a)).outerHTML.trim();t.appendChild(h),h.style.display="",ae(c)||this.tempId.push(a)}}else t.appendChild(e)}catch(e){l=Xt(a)}var p=void 0;if(!ae(l))p=l({},this,"template",this.element.id+s+"_template",this.isStringTemplate);!ae(p)&&p.length>0&&[].slice.call(p).forEach(function(e){ae(e.tagName)||(e.style.display=""),t.appendChild(e)})}this.add(t,"e-template"),this.tbarEle.push(t)},t.prototype.buttonRendering=function(e,t){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var s,n,o=e.text;e.id?i.id=e.id:i.id=he("e-tbr-btn");var r=this.createElement("span",{className:"e-tbar-btn-text"});o?(r.innerHTML=this.enableHtmlSanitizer?ln.sanitize(o):o,i.appendChild(r),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(s=e.prefixIcon+" e-icons",n="Left"):(s=e.suffixIcon+" e-icons",n="Right"));var a=new Po({iconCss:s,iconPosition:n});return a.createElement=this.createElement,a.appendTo(i),e.width&&Ri(i,{width:ge(e.width)}),i},t.prototype.renderSubComponent=function(e,t){var i,s;(i=this.createElement("div",{className:"e-toolbar-item"})).setAttribute("aria-disabled","false");var n=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?ln.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,i),e.tooltipText&&i.setAttribute("title",n.textContent),e.cssClass&&(i.className=i.className+" "+e.cssClass),e.template)this.templateRender(e.template,i,e,t);else switch(e.type){case"Button":(s=this.buttonRendering(e,i)).setAttribute("tabindex","-1"),s.setAttribute("aria-label",e.text||e.tooltipText),i.appendChild(s),i.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(i,"e-separator")}if(e.showTextOn){var o=e.showTextOn;"Toolbar"===o?(this.add(i,"e-toolbar-text"),this.add(i,"e-tbtn-align")):"Overflow"===o&&this.add(i,"e-popup-text")}if(e.overflow){var r=e.overflow;"Show"===r?this.add(i,"e-overflow-show"):"Hide"===r&&(i.classList.contains("e-separator")||this.add(i,"e-overflow-hide"))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!i.classList.contains("e-separator")&&(this.add(i,"e-popup-alone"),this.popupPriCount++),e.disabled&&this.add(i,"e-overlay"),!1===e.visible&&this.add(i,"e-hidden"),i},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){ae(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,ae(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,this.isReact&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName(Sm)[0]);if(!t){this.destroyScroll();var i=e.querySelector("."+Sm);ae(i)||(this.remove(i,"e-multirow-pos"),this.tbarAlign&&this.add(i,"e-tbar-pos"))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))},t.prototype.onPropertyChanged=function(e,t){var i=this.element;this.extendedOpen();for(var s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"items":if(e.items instanceof Array&&t.items instanceof Array||this.isServerRendered)this.itemsRerender(e.items);else for(var o=Object.keys(e.items),r=0;r<o.length;r++){var a=parseInt(Object.keys(e.items)[r],10),l=Object.keys(e.items[a])[0],h=Object(e.items[a])[l];if(this.tbarAlign||"align"===l){this.refresh(),this.trigger("created");break}var c="showAlwaysInPopup"===l&&!h,p="overflow"===l&&0!==this.popupPriCount;(c||this.items[a].showAlwaysInPopup&&p)&&--this.popupPriCount,ae(this.scrollModule)&&this.destroyMode();var d=[].slice.call(Oi("."+Sm+" .e-toolbar-item",i));this.isReact&&this.clearTemplate(),Ti(d[a]),this.tbarEle.splice(a,1),this.addItems([this.items[a]],a),this.items.splice(a,1),this.items[a].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":var u=i.offsetWidth;Ri(i,{width:ge(e.width)}),this.renderOverflowMode(),this.popObj&&u<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Ri(this.element,{height:ge(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,"e-rtl"),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl"),ae(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),ae(this.popObj)||(e.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&Ci([this.element],t.cssClass.split(" ")),e.cssClass&&bi([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}},t.prototype.hideItem=function(e,t){var i,s,n="object"==typeof e,o=e,r=[].slice.call(Oi(".e-toolbar-item",this.element));if(n)s=e;else if(this.tbarEle[o]){s=[].slice.call(Oi(".e-toolbar-item",this.element))[o]}if(s){if(t?s.classList.add("e-hidden"):s.classList.remove("e-hidden"),t&&ae(this.element.getAttribute("tabindex"))&&!s.classList.contains("e-separator")){if(ae(s.firstElementChild.getAttribute("tabindex"))){s.firstElementChild.setAttribute("tabindex","-1");var a=[].slice.call(Oi(".e-toolbar-item",this.element));n&&(o=a.indexOf(s));for(var l=a[++o];l;){if(!this.eleContains(l)){l.firstElementChild.removeAttribute("tabindex");break}l=a[++o]}}}else if(ae(this.element.getAttribute("tabindex"))&&!s.classList.contains("e-separator"))for(var h=!1,c=!1,p=r[i=0];p;)if(p.classList.contains("e-separator"))p=r[++i];else if(ae(p.firstElementChild.getAttribute("tabindex")))p.firstElementChild.setAttribute("tabindex","-1"),h=!0;else{if(h&&c)break;this.eleContains(p)||(p.firstElementChild.removeAttribute("tabindex"),c=!0),p=r[++i]}this.refreshOverflow()}},Cm([ls([],wm)],t.prototype,"items",void 0),Cm([os("auto")],t.prototype,"width",void 0),Cm([os("auto")],t.prototype,"height",void 0),Cm([os("")],t.prototype,"cssClass",void 0),Cm([os("Scrollable")],t.prototype,"overflowMode",void 0),Cm([os()],t.prototype,"scrollStep",void 0),Cm([os(!0)],t.prototype,"enableCollision",void 0),Cm([os(!0)],t.prototype,"enableHtmlSanitizer",void 0),Cm([os(!0)],t.prototype,"allowKeyboard",void 0),Cm([cs()],t.prototype,"clicked",void 0),Cm([cs()],t.prototype,"created",void 0),Cm([cs()],t.prototype,"destroyed",void 0),Cm([cs()],t.prototype,"beforeCreate",void 0),t=Cm([ps],t)}(Ns),km=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Tm=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Lm="e-vertical",Dm=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.tempItems=[],s}return km(t,e),t.prototype.getModuleName=function(){return"menu"},t.prototype.preRender=function(){if(this.isMenu=!0,this.element.id=this.element.id||he("ej2-menu"),this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(e){}else this.updateMenuItems(this.items);e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),Di(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(Lm),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(Lm),this.element.setAttribute("aria-orientation","vertical")):bt.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add("e-hamburger"),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))},t.prototype.updateMenuItems=function(e){this.tempItems=e,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},t.prototype.onPropertyChanged=function(t,i){for(var s=this,n=0,o=Object.keys(t);n<o.length;n++){switch(o[n]){case"orientation":"Vertical"===t.orientation?(this.element.classList.add(Lm),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(Lm),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(Lm),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(Lm),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(i.items).length||this.updateMenuItems(t.items);break;case"hamburgerMode":this.element.previousElementSibling||e.prototype.createHeaderContainer.call(this),t.hamburgerMode?(this.element.parentElement.classList.add("e-hamburger"),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(function(e){e.style[s.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove("e-hamburger"),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(Lm),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(Lm):this.element.previousElementSibling.classList.remove(Lm),this.element.classList[t.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(t.title=this.enableHtmlSanitizer?ln.sanitize(t.title):t.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=t.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(i.target),this.wireEvents(),"Horizontal"===this.orientation&&(t.target?this.element.previousElementSibling.classList.add(Lm):(this.element.previousElementSibling||e.prototype.createHeaderContainer.call(this),this.element.previousElementSibling.classList.remove(Lm)),this.element.classList.add("e-hide-menu")))}}e.prototype.onPropertyChanged.call(this,t,i)},t.prototype.createMenuItems=function(e){var t,i,s,n=this.items;if(e[t=this.getField("parentId")]){for(i=this.getIndex(e[t].toString(),!0),s=0;s<i.length;s++)n[i[s]].items||(n[i[s]].items=[]),n=n[i[s]].items;n.push(e)}else this.items.push(e)},t.prototype.open=function(){e.prototype.openHamburgerMenu.call(this)},t.prototype.close=function(){e.prototype.closeHamburgerMenu.call(this)},Tm([os("Horizontal")],t.prototype,"orientation",void 0),Tm([os("")],t.prototype,"target",void 0),Tm([os(null)],t.prototype,"template",void 0),Tm([os(!1)],t.prototype,"enableScrolling",void 0),Tm([os(!1)],t.prototype,"hamburgerMode",void 0),Tm([os("Menu")],t.prototype,"title",void 0),Tm([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Tm([rs({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},su)],t.prototype,"fields",void 0),t=Tm([ps],t)}(ru),Im=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Om=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Am="e-tab-wrap",Mm="e-toolbar-items",Pm="e-toolbar-item",Nm="e-toolbar-popup",Rm="e-vertical-tab",Bm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Im(t,e),Om([os("SlideLeftIn")],t.prototype,"effect",void 0),Om([os(600)],t.prototype,"duration",void 0),Om([os("ease")],t.prototype,"easing",void 0),t}(Ls),Hm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Im(t,e),Om([rs({effect:"SlideLeftIn",duration:600,easing:"ease"},Bm)],t.prototype,"previous",void 0),Om([rs({effect:"SlideRightIn",duration:600,easing:"ease"},Bm)],t.prototype,"next",void 0),t}(Ls),Fm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Im(t,e),Om([os("")],t.prototype,"text",void 0),Om([os("")],t.prototype,"iconCss",void 0),Om([os("left")],t.prototype,"iconPosition",void 0),t}(Ls),jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Im(t,e),Om([rs({},Fm)],t.prototype,"header",void 0),Om([os(null)],t.prototype,"headerTemplate",void 0),Om([os("")],t.prototype,"content",void 0),Om([os("")],t.prototype,"cssClass",void 0),Om([os(!1)],t.prototype,"disabled",void 0),Om([os(!0)],t.prototype,"visible",void 0),t}(Ls),Vm=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.show={},s.hide={},s.maxHeight=0,s.title="Close",s.lastIndex=0,s.isAdd=!1,s.isIconAlone=!1,s.resizeContext=s.refreshActElePosition.bind(s),s.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},s}return Im(t,e),t.prototype.destroy=function(){var t=this;if(this.isReact&&this.clearTemplate(),ae(this.tbObj)||this.tbObj.destroy(),this.unWireEvents(),["role","aria-disabled","aria-activedescendant","tabindex","aria-orientation"].forEach(function(e){t.element.removeAttribute(e)}),this.expTemplateContent(),this.isTemplate){var i=Ii(".e-tab > .e-content",this.element);this.element.classList.remove("e-template"),ae(i)||(i.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)Li(this.element.firstElementChild);e.prototype.destroy.call(this),this.trigger("destroyed")},t.prototype.refresh=function(){this.isReact&&this.clearTemplate(),this.isServerRendered?this.isServerRendered&&"Dynamic"!==this.loadOn&&this.setActiveBorder():e.prototype.refresh.call(this),this.isReact&&this.renderReactTemplates()},t.prototype.preRender=function(){var e=Mi(this.element,".e-content");this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],ae(e)||(e.parentElement.classList.add("e-nested"),this.isNested=!0);var t=bt.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";Ri(this.element,{width:ge(this.width),height:ge(this.height)}),this.setCssClass(this.element,this.cssClass,!0),Di(this.element,{role:"tablist","aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()},t.prototype.render=function(){this.btnCls=this.createElement("span",{className:"e-icons e-close-icon",attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:Yt(),this.renderContainer(),this.wireEvents(),this.initRender=!1},t.prototype.renderContainer=function(){if(this.isServerRendered)this.isTemplate=!1;else{var e=this.element;if(this.items.length>0&&0===e.children.length)e.appendChild(this.createElement("div",{className:"e-content"})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:"e-tab-header"})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,e.classList.add("e-template");var t=e.querySelector(".e-tab-header");t&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,t)}if(!ae(Ii(".e-tab-header",this.element))&&!ae(Ii(".e-content",this.element))){if(this.renderHeader(),this.tbItems=Ii(".e-tab-header ."+Mm,this.element),ae(this.tbItems)||ys(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),Oi("."+Pm,this.element).length>0){var i=void 0;this.tbItems=Ii(".e-tab-header ."+Mm,this.element),this.bdrLine=this.createElement("div",{className:"e-indicator e-hidden e-ignore"}),ae(i=Ii("."+this.scrCntClass,this.tbItems))?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):i.insertBefore(this.bdrLine,i.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}this.setRTL(this.enableRtl)}}},t.prototype.serverItemsChanged=function(){if(this.enableAnimation=!1,this.setActive(this.selectedItem,!0),"Dynamic"!==this.loadOn&&!ae(this.cntEle)){var e=[].slice.call(this.cntEle.children),t="e-content"+this.tabId+"_"+this.selectedItem;e.forEach(function(e){e.classList.contains("e-active")&&e.id!==t&&e.classList.remove("e-active"),e.id===t&&e.classList.add("e-active")}),this.prevIndex=this.selectedItem,this.triggerAnimation("e-item"+this.tabId+"_"+this.selectedItem,!1)}this.enableAnimation=!0},t.prototype.headerReady=function(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.headerPlacement,this.hdrEle),ae(this.hdrEle)||(this.tbObj=this.hdrEle&&this.hdrEle.ej2_instances[0]),this.tbObj.clicked=this.clickHandler.bind(this),this.tbObj.on("onItemsChanged",this.serverItemsChanged.bind(this)),this.tbItems=Ii(".e-tab-header ."+Mm,this.element),ae(this.tbItems)||ys(this.tbItems,{selector:".e-tab-wrap"}),Oi("."+Pm,this.element).length>0){var e=void 0;this.bdrLine=Ii(".e-indicator.e-ignore",this.element),ae(e=Ii("."+this.scrCntClass,this.tbItems))?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):e.insertBefore(this.bdrLine,e.firstElementChild),this.select(this.selectedItem)}if(this.cntEle=Ii(".e-tab > .e-content",this.element),ae(this.cntEle)||(this.touchModule=new nn(this.cntEle,{swipe:this.swipeHandler.bind(this)})),"Demand"===this.loadOn){var t=this.setActiveContent();this.triggerAnimation(t,!1)}this.initRender=!1,this.renderComplete()},t.prototype.setActiveContent=function(){var e="e-item"+this.tabId+"_"+this.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return ae(t)||t.classList.add("e-active"),e},t.prototype.renderHeader=function(){var e=this,t=this.headerPlacement,i=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains("e-tab-header")&&this.setProperties({headerPlacement:"Bottom"},!0);for(var s=this.hdrEle.children.length,n=[],o=0;o<s;o++)n.push(this.hdrEle.children.item(o).innerHTML);if(s>0){for(;this.hdrEle.firstElementChild;)Ti(this.hdrEle.firstElementChild);var r=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(r),n.forEach(function(t,i){e.lastIndex=i;var s={className:"e-item",id:"e-item"+e.tabId+"_"+i,attrs:{role:"tab","aria-controls":"e-content"+e.tabId+"_"+i,"aria-selected":"false"}},n=e.createElement("span",{className:"e-tab-text",innerHTML:t,attrs:{role:"presentation"}}).outerHTML,o=e.createElement("div",{className:"e-text-wrap",innerHTML:n+e.btnCls.outerHTML}).outerHTML,a=e.createElement("div",{className:Am,innerHTML:o,attrs:{tabIndex:"-1"}});r.appendChild(e.createElement("div",s)),Oi(".e-item",r)[i].appendChild(a)})}}else i=this.parseObject(this.items,0);this.tbObj=new Em({width:"Left"===t||"Right"===t?"auto":"100%",height:"Left"===t||"Right"===t?"100%":"auto",overflowMode:this.overflowMode,items:0!==i.length?i:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),Di(this.hdrEle,{"aria-label":"tab-header"}),this.updateOrientationAttribute(),this.setCloseButton(this.showCloseButton)},t.prototype.renderContent=function(){this.cntEle=Ii(".e-content",this.element);var e=Oi("."+Pm,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var t=this.cntEle.children,i=0;i<e.length;i++)t.length-1>=i&&(t.item(i).className+="e-item",Di(t.item(i),{role:"tabpanel","aria-labelledby":"e-item"+this.tabId+"_"+i}),t.item(i).id="e-content"+this.tabId+"_"+i)}},t.prototype.reRenderItems=function(){this.renderContainer(),ae(this.cntEle)||(this.touchModule=new nn(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},t.prototype.parseObject=function(e,t){var i,s=this,n=Oi("."+Pm,this.element).length,o=[],r=[];return e.forEach(function(e,a){var l=ae(e.header)||ae(e.header.iconPosition)?"":e.header.iconPosition,h=ae(e.header)||ae(e.header.iconCss)?"":e.header.iconCss;if(ae(e.headerTemplate)&&(ae(e.header)||ae(e.header.text)||0===e.header.text.length&&""===h))r.push(a);else{var c=e.headerTemplate||e.header.text;"string"==typeof c&&s.enableHtmlSanitizer&&(c=ln.sanitize(c)),s.lastIndex=0===n?a:s.isReplace?t+a:s.lastIndex+1;var p=e.disabled?" e-disable e-overlay":"",d=!1===e.visible?" e-hidden":"";i=s.createElement("div",{className:"e-tab-text",attrs:{role:"presentation"}});var u=c instanceof Object?c.outerHTML:c,m=!ae(u)&&""!==u;ae(c.tagName)?s.headerTextCompile(i,c,a):i.appendChild(c);var f=s.createElement("span",{className:"e-icons e-tab-icon e-icon-"+l+" "+h}),g=s.createElement("div",{className:"e-text-wrap"});g.appendChild(i),""!==c&&void 0!==c&&""!==h?("left"===l||"top"===l?g.insertBefore(f,g.firstElementChild):g.appendChild(f),i,s.isIconAlone=!1):(""===h?i:f)===f&&(Ti(i),g.appendChild(f),s.isIconAlone=!0);var v=e.disabled?{}:{tabIndex:"-1"};g.appendChild(s.btnCls.cloneNode(!0));var y=s.createElement("div",{className:Am,attrs:v});y.appendChild(g),s.itemIndexArray===[]?s.itemIndexArray.push("e-item"+s.tabId+"_"+s.lastIndex):s.itemIndexArray.splice(t+a,0,"e-item"+s.tabId+"_"+s.lastIndex);var b={htmlAttributes:{id:"e-item"+s.tabId+"_"+s.lastIndex,role:"tab","aria-selected":"false"},template:y};b.cssClass=(void 0!==e.cssClass?e.cssClass:" ")+" "+p+" "+d+(""!==h?"e-i"+l:"")+" "+(m?"":"e-icon"),"top"!==l&&"bottom"!==l||s.element.classList.add("e-vertical-icon"),o.push(b),a++}}),this.isAdd||r.forEach(function(e){s.items.splice(e,1)}),this.isIconAlone?this.element.classList.add("e-icon-tab"):this.element.classList.remove("e-icon-tab"),o},t.prototype.removeActiveClass=function(){var e=this.getTabHeader();if(e){var t=Oi(".e-toolbar-item.e-active",e);[].slice.call(t).forEach(function(e){return e.classList.remove("e-active")})}},t.prototype.checkPopupOverflow=function(e){this.tbPop=Ii(".e-toolbar-pop",this.element);var t=Ii(".e-hor-nav",this.element),i=Ii("."+Mm,this.element),s=i.lastChild,n=!1;return!this.isVertical()&&(this.enableRtl&&t.offsetLeft+t.offsetWidth>i.offsetLeft||!this.enableRtl&&t.offsetLeft<i.offsetWidth)?n=!0:this.isVertical()&&t.offsetTop<s.offsetTop+s.offsetHeight&&(n=!0),n&&(e.classList.add(Nm),this.tbPop.insertBefore(e,Oi("."+Nm,this.tbPop)[0])),!0},t.prototype.popupHandler=function(e){var t=e.querySelector(".e-ripple-element");ae(t)||(t.outerHTML="",e.querySelector("."+Am).classList.remove("e-ripple")),this.tbItem=Oi(".e-toolbar-items ."+Pm,this.hdrEle);var i=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(e.classList.remove(Nm),e.removeAttribute("style"),this.tbItems.appendChild(e),this.actEleId=e.id,this.checkPopupOverflow(i)){var s=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(s)}this.isPopup=!0}return Oi("."+Pm,this.tbItems).length-1},t.prototype.updateOrientationAttribute=function(){Di(this.element,{"aria-orientation":this.isVertical()?"vertical":"horizontal"})},t.prototype.setCloseButton=function(e){var t=Ii(".e-tab-header",this.element);!0===e?t.classList.add("e-close-show"):t.classList.remove("e-close-show"),this.tbObj.refreshOverflow(),this.refreshActElePosition()},t.prototype.prevCtnAnimation=function(e,t){this.enableRtl||this.element.classList.contains("e-rtl");return this.isPopup||e<=t?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},t.prototype.triggerPrevAnimation=function(e,t){var i=this,s=this.prevCtnAnimation(t,this.selectedItem);ae(s)?e.classList.remove("e-active"):(s.begin=function(){Ri(e,{position:"absolute"}),e.classList.add("e-progress"),e.classList.add("e-view")},s.end=function(){e.style.display="none",e.classList.remove("e-active"),e.classList.remove("e-progress"),e.classList.remove("e-view"),Ri(e,{display:"",position:""}),0!==e.childNodes.length||i.isTemplate||Ti(e)},new vs(s).animate(e))},t.prototype.triggerAnimation=function(e,t){var i,s,n=this,o=this.prevIndex;if(!this.isServerRendered||this.isServerRendered&&"Dynamic"!==this.loadOn){[].slice.call(this.element.querySelector(".e-content").children).forEach(function(e){e.id===n.prevActiveEle&&(i=e)});var r=this.tbItem[o];if(s=this.getTrgContent(this.cntEle,this.extIndex(e)),ae(i)&&!ae(r)){var a=this.extIndex(r.id);i=this.getTrgContent(this.cntEle,a)}}else s=this.cntEle.firstElementChild;if(ae(s)||(this.prevActiveEle=s.id),this.initRender||!1===t||this.animation==={}||ae(this.animation))i&&i!==s&&i.classList.remove("e-active");else{var l,h=Ii(".e-content",this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var c=this.animation.previous.effect;l={name:"None"===c?"":"SlideLeftIn"!==c?c:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var p=this.animation.next.effect;l={name:"None"===p?"":"SlideRightIn"!==p?p:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}l.progress=function(){h.classList.add("e-progress"),n.setActiveBorder()},l.end=function(){h.classList.remove("e-progress"),s.classList.add("e-active")},this.initRender||ae(i)||this.triggerPrevAnimation(i,o),this.isPopup=!1,""===l.name?s.classList.add("e-active"):new vs(l).animate(s)}},t.prototype.keyPressed=function(e){var t=Mi(e,".e-tab-header ."+Pm),i=this.getEleIndex(t);!ae(this.popEle)&&e.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):e.classList.contains("e-scroll-nav")?e.click():ae(t)||!1!==t.classList.contains("e-active")||(this.select(i),ae(this.popEle)||this.popObj.hide(this.hide))},t.prototype.getTabHeader=function(){if(!ae(this.element)){var e=[].slice.call(this.element.children).filter(function(e){return e.classList.contains("e-tab-header")});if(e.length>0)return e[0];var t=[].slice.call(this.element.children).filter(function(e){return!e.classList.contains("blazor-template")})[0];if(t)return[].slice.call(t.children).filter(function(e){return e.classList.contains("e-tab-header")})[0]}},t.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(Oi("."+Pm,this.getTabHeader()),e)},t.prototype.extIndex=function(e){return e.replace("e-item"+this.tabId+"_","")},t.prototype.expTemplateContent=function(){var e=this;this.templateEle.forEach(function(t){ae(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")})},t.prototype.templateCompile=function(e,t,i){var s=this.createElement("div");this.compileElement(s,t,"content",i),0!==s.childNodes.length&&e.appendChild(s),this.isReact&&this.renderReactTemplates()},t.prototype.compileElement=function(e,t,i,s){var n,o;"string"==typeof t?(t=t.trim(),e.innerHTML=ln.sanitize(t)):n=Xt(t),ae(n)||(o=n({},this,i)),!ae(n)&&o.length>0&&[].slice.call(o).forEach(function(t){e.appendChild(t)})},t.prototype.headerTextCompile=function(e,t,i){this.compileElement(e,t,"headerTemplate",i)},t.prototype.getContent=function(e,t,i,s){var n;if("string"==typeof t||ae(t.innerHTML))if("string"==typeof t&&this.enableHtmlSanitizer&&(t=ln.sanitize(t)),"."===t[0]||"#"===t[0])if(document.querySelectorAll(t).length){var o=document.querySelector(t);n=o.outerHTML.trim(),"clone"===i?e.appendChild(o.cloneNode(!0)):(e.appendChild(o),o.style.display="")}else this.templateCompile(e,t,s);else this.templateCompile(e,t,s);else e.appendChild(t);ae(n)||-1===this.templateEle.indexOf(t.toString())&&this.templateEle.push(t.toString())},t.prototype.getTrgContent=function(e,t){return this.element.classList.contains("e-nested")?Ii(".e-nested> .e-content > #e-content"+this.tabId+"_"+t,this.element):this.findEle(e.children,"e-content"+this.tabId+"_"+t)},t.prototype.findEle=function(e,t){for(var i,s=0;s<e.length;s++)if(e[s].id===t){i=e[s];break}return i},t.prototype.isVertical=function(){var e="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},t.prototype.addVerticalClass=function(){if(this.isVertical()){var e="Left"===this.headerPlacement?"e-vertical-left":"e-vertical-right";bi([this.hdrEle],["e-vertical",e]),this.element.classList.contains("e-nested")?bi([this.hdrEle],[Rm,e]):bi([this.element],[Rm,e])}"Bottom"===this.headerPlacement&&bi([this.hdrEle],["e-horizontal-bottom"])},t.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},t.prototype.changeOrientation=function(e){this.setOrientation(e,this.hdrEle);var t=!!this.hdrEle.classList.contains("e-vertical");Ci([this.element],[Rm]),Ci([this.hdrEle],["e-vertical","e-vertical-left","e-vertical-right"]),t!==this.isVertical()&&this.changeToolbarOrientation(),this.addVerticalClass(),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()},t.prototype.focusItem=function(){var e=Ii(" #e-item"+this.tabId+"_"+this.selectedItem,this.hdrEle);ae(e)||e.firstElementChild.focus()},t.prototype.serverChangeOrientation=function(e,t){this.setOrientation(e,this.hdrEle),Ci([this.element],[Rm]),("Left"===e||"Right"===e)!==("Left"===t||"Right"===t)&&this.changeToolbarOrientation(),this.isVertical()&&bi([this.element],[Rm]),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()},t.prototype.changeToolbarOrientation=function(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()},t.prototype.setOrientation=function(e,t){var i=Array.prototype.indexOf.call(this.element.children,t),s=Array.prototype.indexOf.call(this.element.children,this.element.querySelector(".e-content"));"Bottom"===e&&s>i?this.element.appendChild(t):(Ci([t],["e-horizontal-bottom"]),this.element.insertBefore(t,Ii(".e-content",this.element)))},t.prototype.setCssClass=function(e,t,i){if(""!==t)for(var s=t.split(" "),n=0;n<s.length;n++)i?e.classList.add(s[n]):e.classList.remove(s[n])},t.prototype.setContentHeight=function(e){if(this.element.classList.contains("e-fill-mode")&&Ci([this.element],["e-fill-mode"]),!ae(this.cntEle)){var t=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||Ri(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)bi([this.element],["e-fill-mode"]),Ri(this.element,{height:"100%"}),Ri(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"});else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate)for(var i=Oi(".e-content > .e-item",this.element),s=0;s<i.length;s++)i[s].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[s])),i[s].style.removeProperty("display"),i[s].style.removeProperty("visibility");else{this.cntEle=Ii(".e-content",this.element),!0===e&&this.cntEle.appendChild(this.createElement("div",{id:"e-content"+this.tabId+"_0",className:"e-item e-active",attrs:{role:"tabpanel","aria-labelledby":"e-item"+this.tabId+"_0"}}));var n=this.cntEle.children.item(0);for(s=0;s<this.items.length;s++)for(this.getContent(n,this.items[s].content,"clone",s),this.maxHeight=Math.max(this.maxHeight,this.getHeight(n));n.firstChild;)n.removeChild(n.firstChild);this.clearTemplate(["content"]),this.templateEle=[],this.getContent(n,this.items[0].content,"render",0),n.classList.remove("e-active")}Ri(this.cntEle,{height:this.maxHeight+"px"})}else Ri(this.cntEle,{height:"auto"})}},t.prototype.getHeight=function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))},t.prototype.setActiveBorder=function(){var e,t,i=this.getTabHeader(),s=Ii(".e-toolbar-item.e-active",i);if(null!==s){this.isServerRendered&&s.classList.contains(Nm)&&this.popupHandler(s);var n=Mi(s,".e-tab");if(this.element===n){if(this.tbItems=Ii("."+Mm,i),e=Ii(".e-indicator",i),t=Ii(".e-toolbar-items ."+this.scrCntClass,i),this.isVertical()){Ri(e,{left:"",right:""}),Ri(e,0!==(ae(t)?this.tbItems.offsetHeight:t.offsetHeight)?{top:s.offsetTop+"px",height:s.offsetHeight+"px"}:{top:0,height:0})}else{Ri(e,{top:"",height:""});var o=ae(t)?this.tbItems.offsetWidth:t.offsetWidth;Ri(e,0!==o?{left:s.offsetLeft+"px",right:o-(s.offsetLeft+s.offsetWidth)+"px"}:{left:"auto",right:"auto"})}ae(this.bdrLine)||this.bdrLine.classList.remove("e-hidden")}}},t.prototype.setActive=function(e,t){void 0===t&&(t=!1),this.tbItem=Oi("."+Pm,this.getTabHeader());var i=this.tbItem[e];if(this.isServerRendered&&i&&(e=parseInt(i.getAttribute("data-index"),10)),!(e<0||isNaN(e)||0===this.tbItem.length))if(e>=0&&!t&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:e},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),i.classList.contains("e-active"))this.setActiveBorder();else{if(!this.isTemplate){var s=this.tbItem[this.prevIndex];ae(s)||s.removeAttribute("aria-controls"),Di(i,{"aria-controls":"e-content"+this.tabId+"_"+e})}var n=i.id;this.removeActiveClass(),i.classList.add("e-active"),i.setAttribute("aria-selected","true");var o=Number(this.extIndex(n));if(ae(this.prevActiveEle)&&(this.prevActiveEle="e-content"+this.tabId+"_"+o),Di(this.element,{"aria-activedescendant":n}),this.isTemplate){if(Ii(".e-content",this.element).children.length>0){var r=this.findEle(Ii(".e-content",this.element).children,"e-content"+this.tabId+"_"+o);ae(r)||r.classList.add("e-active"),this.triggerAnimation(n,this.enableAnimation)}}else if(!this.isServerRendered||this.isServerRendered&&"Init"===this.loadOn){this.cntEle=Ii(".e-tab > .e-content",this.element);var a=this.getTrgContent(this.cntEle,this.extIndex(n));if(ae(a)){this.cntEle.appendChild(this.createElement("div",{id:"e-content"+this.tabId+"_"+this.extIndex(n),className:"e-item e-active",attrs:{role:"tabpanel","aria-labelledby":"e-item"+this.tabId+"_"+this.extIndex(n)}}));var l=this.getTrgContent(this.cntEle,this.extIndex(n)),h=Array.prototype.indexOf.call(this.itemIndexArray,n);this.getContent(l,this.items[h].content,"render",h)}else a.classList.add("e-active");this.triggerAnimation(n,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(i),!this.initRender&&!t){i.firstElementChild.focus();var c={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:i,selectedIndex:e,selectedContent:Ii("#e-content"+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed};this.trigger("selected",c)}}},t.prototype.contentReady=function(){var e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)},t.prototype.setItems=function(e){this.isReplace=!0,this.tbItems=Ii("."+Mm,this.getTabHeader()),this.tbObj.items=this.parseObject(e,0),this.tbObj.dataBind(),this.isReplace=!1},t.prototype.setRTL=function(e){this.tbObj.enableRtl=e,this.tbObj.dataBind(),this.setCssClass(this.element,"e-rtl",e),this.refreshActiveBorder()},t.prototype.refreshActiveBorder=function(){ae(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.setActiveBorder()},t.prototype.showPopup=function(e){var t=Ii(".e-popup.e-toolbar-pop",this.hdrEle);if(t.classList.contains("e-popup-close")){var i=t&&t.ej2_instances[0];i.position.X="Left"===this.headerPlacement?"left":"right",i.dataBind(),i.show(e)}},t.prototype.wireEvents=function(){window.addEventListener("resize",this.resizeContext),Ct.add(this.element,"mouseover",this.hoverHandler,this),Ct.add(this.element,"keydown",this.spaceKeyDown,this),ae(this.cntEle)||(this.touchModule=new nn(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new Qs(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new Qs(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},t.prototype.unWireEvents=function(){ae(this.keyModule)||this.keyModule.destroy(),ae(this.tabKeyModule)||this.tabKeyModule.destroy(),ae(this.cntEle)||ae(this.touchModule)||this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),Ct.remove(this.element,"mouseover",this.hoverHandler),Ct.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove("e-rtl"),this.element.classList.remove("e-focused")},t.prototype.clickHandler=function(e){this.element.classList.remove("e-focused");var t=e.originalEvent.target,i=Mi(t,"."+Pm),s=this.getEleIndex(i);t.classList.contains("e-close-icon")?this.removeTab(s):this.isVertical()&&Mi(t,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,this.isServerRendered&&!ae(i)?parseInt(i.getAttribute("data-index"),10)!==this.selectedItem&&this.select(s):ae(i)||s===this.selectedItem&&s===this.prevIndex||this.select(s,e.originalEvent))},t.prototype.swipeHandler=function(e){if(!(e.velocity<3&&ae(e.originalEvent.changedTouches))){if(e.originalEvent&&e.originalEvent.stopPropagation(),this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.selectedItem){for(var t=this.selectedItem-1;t>=0;t--)if(!this.tbItem[t].classList.contains("e-hidden")){this.select(t);break}}else if("Left"===e.swipeDirection&&this.selectedItem!==Oi("."+Pm,this.element).length-1)for(var i=this.selectedItem+1;i<this.tbItem.length;i++)if(!this.tbItem[i].classList.contains("e-hidden")){this.select(i);break}this.isSwipeed=!1}},t.prototype.spaceKeyDown=function(e){(32===e.keyCode&&32===e.which||35===e.keyCode&&35===e.which)&&(ae(Mi(e.target,".e-tab-header"))||e.preventDefault())},t.prototype.keyHandler=function(e){if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var t=e.target,i=this.getTabHeader(),s=Ii(".e-active",i);switch(this.popEle=Ii(".e-toolbar-pop",i),ae(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),e.action){case"space":case"enter":if(t.parentElement.classList.contains("e-disable"))return;if("enter"===e.action&&t.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(t);break;case"tab":case"shiftTab":t.classList.contains(Am)&&!1===Mi(t,"."+Pm).classList.contains("e-active")&&t.setAttribute("tabindex","-1"),this.popObj&&xi(this.popObj.element)&&this.popObj.hide(this.hide),s.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":var n=Mi(document.activeElement,"."+Pm);ae(n)||this.refreshItemVisibility(n);break;case"openPopup":e.preventDefault(),!ae(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":var o=Mi(t,"."+Pm);if(!0===this.showCloseButton&&!ae(o)){var r=o.nextSibling;!ae(r)&&r.classList.contains(Pm)&&r.firstElementChild.focus(),this.removeTab(this.getEleIndex(o))}this.setActiveBorder()}}},t.prototype.refreshActElePosition=function(){var e=Ii(".e-toolbar-item.e-toolbar-popup.e-active",this.element);ae(e)||this.select(this.getEleIndex(e)),this.refreshActiveBorder()},t.prototype.refreshItemVisibility=function(e){var t=Ii("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!ae(t)){var i=Ii(".e-hscroll-bar",this.tbItems),s=i.scrollLeft,n=s+i.offsetWidth,o=e.offsetLeft,r=e.offsetWidth,a=e.offsetLeft+e.offsetWidth;if(s<o&&n<a){var l=n-o;i.scrollLeft=s+(r-l)}else if(s>o&&n>a){l=a-s;i.scrollLeft=s-(r-l)}}},t.prototype.hoverHandler=function(e){var t=e.target;!ae(t.classList)&&t.classList.contains("e-close-icon")&&t.setAttribute("title",new Js("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},t.prototype.evalOnPropertyChangeItems=function(e,t){if(e.items instanceof Array&&t.items instanceof Array)if(this.lastIndex=0,ae(this.tbObj))this.reRenderItems();else{this.isRect&&this.clearTemplate(),this.setItems(e.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];for(var i=Ii(".e-tab > .e-content",this.element);i.firstElementChild;)Ti(i.firstElementChild);this.select(this.selectedItem)}else for(var s=Object.keys(e.items),n=0;n<s.length;n++){var o=parseInt(Object.keys(e.items)[n],10),r=Object.keys(e.items[o])[0],a=Object(t.items[o])[r],l=Object(e.items[o])[r],h=Ii(".e-toolbar-items #e-item"+this.tabId+"_"+o,this.element),c=Ii(".e-content #e-content"+this.tabId+"_"+o,this.element);if("header"===r||"headerTemplate"===r){var p=ae(this.items[o].header)||ae(this.items[o].header.iconCss)?"":this.items[o].header.iconCss;if(""===(this.items[o].headerTemplate||this.items[o].header.text)&&""===p)this.removeTab(o);else{var d=[];d.push(this.items[o]),this.items.splice(o,1),this.itemIndexArray.splice(o,1),this.tbObj.items.splice(o,1);var u=h.classList.contains("e-hidden");Ti(h),this.isReplace=!0,this.addTab(d,o),u&&this.hideTab(o),this.isReplace=!1}}if("content"===r&&!ae(c))if(("string"==typeof l||ae(l.innerHTML))&&("."===l[0]||"#"===l[0])&&l.length){var m=document.querySelector(l);c.appendChild(m),m.style.display=""}else""===l&&"#"===a[0]?(document.body.appendChild(this.element.querySelector(a)).style.display="none",c.innerHTML=l):"function"!=typeof l&&(c.innerHTML=l);"cssClass"===r&&(ae(h)||(h.classList.remove(a),h.classList.add(l)),ae(c)||(c.classList.remove(a),c.classList.add(l))),"disabled"===r&&this.enableTab(o,!0!==l),"visible"===r&&this.hideTab(o,!0!==l)}},t.prototype.enableTab=function(e,t){var i=Oi("."+Pm,this.element)[e];ae(i)||(!0===t?(i.classList.remove("e-disable","e-overlay"),i.firstElementChild.setAttribute("tabindex","-1")):(i.classList.add("e-disable","e-overlay"),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains("e-active")&&this.select(e+1)),ae(this.items[e])||(this.items[e].disabled=!t,this.dataBind()),i.setAttribute("aria-disabled",!0===t?"false":"true"))},t.prototype.addTab=function(e,t){var i=this,s={addedItems:e,cancel:!1};this.isReplace?this.addingTabContent(e,t):this.trigger("adding",s,function(s){s.cancel||i.addingTabContent(e,t)}),this.isReact&&this.renderReactTemplates()},t.prototype.addingTabContent=function(e,t){var i=this,s=0;if(this.hdrEle=Ii(".e-tab-header",this.element),ae(this.hdrEle))this.items=e,this.reRenderItems();else{var n=Oi("."+Pm,this.element).length;if(0!==n&&(s=this.lastIndex+1),ae(t)&&(t=n-1),n<t||t<0||isNaN(t))return;0!==n||ae(this.hdrEle)||(this.hdrEle.style.display=""),ae(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.tbItems=Ii("."+Mm,this.getTabHeader()),this.isAdd=!0;var o=this.parseObject(e,t);this.isAdd=!1;var r,a=0;e.forEach(function(e,n){if(r=e.headerTemplate||e.header.text,ae(e.headerTemplate||e.header)||ae(r)||0===r.length&&ae(e.header.iconCss)||(i.items.splice(t+a,0,e),a++),i.isTemplate&&!ae(e.header)&&!ae(e.header.text)){var o=s+n,l=i.createElement("div",{id:"e-content"+i.tabId+"_"+o,className:"e-item",attrs:{role:"tabpanel","aria-labelledby":"e-item_"+o}});i.cntEle.insertBefore(l,i.cntEle.children[t+n]);var h=i.getTrgContent(i.cntEle,o.toString());i.getContent(h,e.content,"render",t)}}),this.tbObj.addItems(o,t),this.isReplace||this.trigger("added",{addedItems:e}),this.selectedItem===t?this.select(t):this.setActiveBorder()}},t.prototype.removeTab=function(e){var t=this,i=Oi("."+Pm,this.element)[e];if(!ae(i)){var s={removedItem:i,removedIndex:e,cancel:!1};this.trigger("removing",s,function(s){if(!s.cancel){t.tbObj.removeItems(e),t.items.splice(e,1),t.itemIndexArray.splice(e,1),t.refreshActiveBorder();var n=Ii("#e-content"+t.tabId+"_"+t.extIndex(i.id),Ii(".e-content",t.element));ae(n)||Ti(n),t.trigger("removed",s),i.classList.contains("e-active")&&(e=e>Oi(".e-toolbar-item:not(.e-toolbar-popup)",t.element).length-1?e-1:e,t.enableAnimation=!1,t.selectedItem=e,t.select(e)),0===Oi("."+Pm,t.element).length&&(t.hdrEle.style.display="none"),t.enableAnimation=!0}})}},t.prototype.hideTab=function(e,t){var i,s=Oi("."+Pm,this.element)[e];if(!ae(s)){if(ae(t)&&(t=!0),this.bdrLine.classList.add("e-hidden"),!0===t)if(s.classList.add("e-hidden"),0!==(i=Oi(".e-toolbar-item:not(.e-hidden)",this.tbItems)).length&&s.classList.contains("e-active")){if(0!==e)for(var n=e-1;n>=0;n--){if(!this.tbItem[n].classList.contains("e-hidden")){this.select(n);break}if(0===n)for(var o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}}else for(o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}}else 0===i.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),i=Oi(".e-toolbar-item:not(.e-hidden)",this.tbItems),s.classList.remove("e-hidden"),0===i.length&&this.select(e);this.setActiveBorder(),s.setAttribute("aria-hidden",""+t),!this.isServerRendered&&"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}},t.prototype.select=function(e,t){var i=this,s=this.getTabHeader();this.tbItems=Ii("."+Mm,s),this.tbItem=Oi("."+Pm,s),this.content=Ii(".e-content",this.element),this.prevItem=this.tbItem[this.prevIndex],ae(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var n=this.tbItem[e];ae(n)?this.selectedID="0":this.selectingID=this.extIndex(n.id),ae(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1");var o={event:t,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:ae(this.content)?null:Ii("#e-content"+this.tabId+"_"+this.selectedID,this.content),selectingItem:n,selectingIndex:e,selectingContent:ae(this.content)?null:Ii("#e-content"+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,cancel:!1};this.initRender?this.selectingContent(e):this.trigger("selecting",o,function(t){t.cancel||i.selectingContent(e)})},t.prototype.selectingContent=function(e){if("number"==typeof e){if(!ae(this.tbItem[e])&&(this.tbItem[e].classList.contains("e-disable")||this.tbItem[e].classList.contains("e-hidden")))for(var t=e+1;t<this.items.length;t++){if(!1===this.items[t].disabled&&!0===this.items[t].visible){e=t;break}e=0}this.tbItem.length>e&&e>=0&&!isNaN(e)?(this.prevIndex=this.selectedItem,this.tbItem[e].classList.contains(Nm)?this.setActive(this.popupHandler(this.tbItem[e])):this.setActive(e)):this.setActive(0)}else e instanceof HTMLElement&&this.setActive(this.getEleIndex(e))},t.prototype.disable=function(e){this.setCssClass(this.element,"e-disable",e),this.element.setAttribute("aria-disabled",""+e)},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},t.prototype.getModuleName=function(){return"tab"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"width":Ri(this.element,{width:ge(e.width)});break;case"height":Ri(this.element,{height:ge(e.height)}),this.isServerRendered||this.setContentHeight(!1);break;case"cssClass":""!==t.cssClass?(this.setCssClass(this.element,t.cssClass,!1),this.setCssClass(this.element,e.cssClass,!0)):this.setCssClass(this.element,e.cssClass,!0);break;case"items":this.isServerRendered||this.evalOnPropertyChangeItems(e,t);break;case"showCloseButton":this.setCloseButton(e.showCloseButton);break;case"selectedItem":this.isServerRendered||(this.selectedItem=t.selectedItem,this.select(e.selectedItem));break;case"headerPlacement":this.isServerRendered?this.serverChangeOrientation(e.headerPlacement,t.headerPlacement):this.changeOrientation(e.headerPlacement);break;case"enableRtl":this.setRTL(e.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=e.overflowMode,this.tbObj.dataBind(),this.refreshActElePosition();break;case"heightAdjustMode":this.isServerRendered||(this.setContentHeight(!1),this.select(this.selectedItem));break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep)}}},t.prototype.refreshActiveTab=function(){if(this.isReact&&this.clearTemplate(),this.isTemplate){var e=this.element.querySelector("."+Mm),t=this.element.querySelector(".e-toolbar-item.e-active"),i=t.id,s=i.indexOf("_"),n=parseInt(i.substring(s+1),10),o=t.innerText,r=this.element.querySelector(".e-content").querySelector(".e-active").children[0],a=r.innerHTML;Ti(t),Ti(r);var l={className:Pm+" e-template e-active",id:"e-item"+this.tabId+"_"+n,attrs:{role:"tab","aria-controls":"e-content"+this.tabId+"_"+n,"aria-disabled":"false","aria-selected":"true"}},h=this.createElement("span",{className:"e-tab-text",innerHTML:o,attrs:{role:"presentation"}}).outerHTML,c=this.createElement("div",{className:"e-text-wrap",innerHTML:h+this.btnCls.outerHTML}).outerHTML,p=this.createElement("div",{className:Am,innerHTML:c,attrs:{tabIndex:"-1"}});e.insertBefore(this.createElement("div",l),e.children[n+1]),this.element.querySelector(".e-toolbar-item.e-active").appendChild(p);S=this.createElement("div",{innerHTML:a});this.element.querySelector(".e-content").querySelector(".e-active").appendChild(S)}else if(this.element.querySelector(".e-toolbar-item.e-active")){Ti(this.element.querySelector(".e-toolbar-item.e-active").children[0]),Ti(this.element.querySelector(".e-content").querySelector(".e-active").children[0]);var d=this.items[this.selectedItem],u=void 0,m=ae(d.header)||ae(d.header.iconPosition)?"":d.header.iconPosition,f=ae(d.header)||ae(d.header.iconCss)?"":d.header.iconCss,g=d.headerTemplate||d.header.text;u=this.createElement("div",{className:"e-tab-text",attrs:{role:"presentation"}}),ae(g.tagName)?this.headerTextCompile(u,g,this.selectedItem):u.appendChild(g);var v=this.createElement("span",{className:"e-icons e-tab-icon e-icon-"+m+" "+f}),y=this.createElement("div",{className:"e-text-wrap"});y.appendChild(u),""!==g&&void 0!==g&&""!==f?("left"===m||"top"===m?y.insertBefore(v,y.firstElementChild):y.appendChild(v),u,this.isIconAlone=!1):(""===f?u:v)===v&&(Ti(u),y.appendChild(v),this.isIconAlone=!0);var b=d.disabled?{}:{tabIndex:"-1"};y.appendChild(this.btnCls.cloneNode(!0));var C=this.createElement("div",{className:Am,attrs:b});C.appendChild(y),"top"!==m&&"bottom"!==m||this.element.classList.add("e-vertical-icon"),this.element.querySelector(".e-toolbar-item.e-active").appendChild(C);var S=this.createElement("div"),x=d.content,w=void 0;if("string"==typeof x||ae(x.innerHTML))if("string"==typeof x&&this.enableHtmlSanitizer&&(x=ln.sanitize(x)),"."===x[0]||"#"===x[0])if(document.querySelectorAll(x).length){var E=document.querySelector(x);w=E.outerHTML.trim(),S.appendChild(E),E.style.display=""}else this.compileElement(S,x,"content",this.selectedItem);else this.compileElement(S,x,"content",this.selectedItem);else S.appendChild(x);ae(w)||-1===this.templateEle.indexOf(x.toString())&&this.templateEle.push(x.toString()),this.element.querySelector(".e-item.e-active").appendChild(S)}this.isReact&&this.renderReactTemplates()},Om([ls([],jm)],t.prototype,"items",void 0),Om([os("100%")],t.prototype,"width",void 0),Om([os("auto")],t.prototype,"height",void 0),Om([os("")],t.prototype,"cssClass",void 0),Om([os(0)],t.prototype,"selectedItem",void 0),Om([os("Top")],t.prototype,"headerPlacement",void 0),Om([os("Content")],t.prototype,"heightAdjustMode",void 0),Om([os("Scrollable")],t.prototype,"overflowMode",void 0),Om([os("Dynamic")],t.prototype,"loadOn",void 0),Om([os(!1)],t.prototype,"enablePersistence",void 0),Om([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),Om([os(!1)],t.prototype,"showCloseButton",void 0),Om([os()],t.prototype,"scrollStep",void 0),Om([rs({},Hm)],t.prototype,"animation",void 0),Om([cs()],t.prototype,"created",void 0),Om([cs()],t.prototype,"adding",void 0),Om([cs()],t.prototype,"added",void 0),Om([cs()],t.prototype,"selecting",void 0),Om([cs()],t.prototype,"selected",void 0),Om([cs()],t.prototype,"removing",void 0),Om([cs()],t.prototype,"removed",void 0),Om([cs()],t.prototype,"destroyed",void 0),t=Om([ps],t)}(Ns),zm=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),_m=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},qm="e-icon-collapsible",Wm="e-icon-expandable",Um="e-list-item",Gm="e-list-text",Ym="e-list-parent",Xm="e-icons-spinner",Km="e-process",Zm="e-text-content",Qm="e-sibling",Jm="e-drop-next",$m="e-fullrow",ef="e-checkbox-wrapper",tf="e-node-focus",sf={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},nf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zm(t,e),_m([os("child")],t.prototype,"child",void 0),_m([os([])],t.prototype,"dataSource",void 0),_m([os("expanded")],t.prototype,"expanded",void 0),_m([os("hasChildren")],t.prototype,"hasChildren",void 0),_m([os("htmlAttributes")],t.prototype,"htmlAttributes",void 0),_m([os("iconCss")],t.prototype,"iconCss",void 0),_m([os("id")],t.prototype,"id",void 0),_m([os("imageUrl")],t.prototype,"imageUrl",void 0),_m([os("isChecked")],t.prototype,"isChecked",void 0),_m([os("parentID")],t.prototype,"parentID",void 0),_m([os(null)],t.prototype,"query",void 0),_m([os("selected")],t.prototype,"selected",void 0),_m([os(null)],t.prototype,"tableName",void 0),_m([os("text")],t.prototype,"text",void 0),_m([os("tooltip")],t.prototype,"tooltip",void 0),_m([os("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(Ls),of=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zm(t,e),_m([os("SlideDown")],t.prototype,"effect",void 0),_m([os(400)],t.prototype,"duration",void 0),_m([os("linear")],t.prototype,"easing",void 0),t}(Ls),rf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zm(t,e),_m([rs({effect:"SlideUp",duration:400,easing:"linear"},of)],t.prototype,"collapse",void 0),_m([rs({effect:"SlideDown",duration:400,easing:"linear"},of)],t.prototype,"expand",void 0),t}(Ls),af=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isRefreshed=!1,s.preventExpand=!1,s.checkedElement=[],s.disableNode=[],s.validArr=[],s.expandChildren=[],s.isFieldChange=!1,s.changeDataSource=!1,s.isBlazorExpandedNodes=[],s.mouseDownStatus=!1,s}var i;return zm(t,e),i=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var e=this;this.isBlazorPlatform=ye()&&this.isServerRendered,this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Wm,ariaAttributes:sf,expandIconPosition:"Left",itemCreated:function(t){e.beforeNodeCreate(t)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new vs({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),ae(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),ae(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),ae(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},t.prototype.render=function(){this.initialRender=!0,this.blazorInitialRender=!1,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.isBlazorPlatform||(this.initialRender=!1),this.renderComplete()},t.prototype.initialize=function(){this.isBlazorPlatform||(this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect)),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},t.prototype.setEnableRtl=function(){this.enableRtl?bi([this.element],"e-rtl"):Ci([this.element],"e-rtl")},t.prototype.setRipple=function(){var e={selector:".e-fullrow,.e-text-content",ignore:"."+Zm+" > .e-icons,.e-input-group,.e-input, ."+ef};this.rippleFn=ys(this.element,e);var t={selector:"."+Zm+" > .e-icons",isCenterRipple:!0};this.rippleIconFn=ys(this.element,t)},t.prototype.setFullRow=function(e){e?bi([this.element],"e-fullrow-wrap"):Ci([this.element],"e-fullrow-wrap")},t.prototype.setMultiSelect=function(e){var t=Ii("."+Ym,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")},t.prototype.templateComplier=function(e){if(e){this.element.classList.add("e-interaction");try{if(document.querySelectorAll(e).length)return Xt(document.querySelector(e).innerHTML.trim())}catch(t){return Xt(e)}}this.element.classList.remove("e-interaction")},t.prototype.setDataBinding=function(e){var t=this;this.treeList.push("false"),this.fields.dataSource instanceof Ip?(this.isOffline=this.isBlazorPlatform?this.fields.dataSource.offline:this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(e){t.isOffline=t.isBlazorPlatform?t.fields.dataSource.offline:t.fields.dataSource.dataSource.offline,t.fields.dataSource instanceof Ip&&t.isOffline&&(t.treeList.pop(),t.treeData=e.result,t.isNumberTypeId=t.getType(),t.setRootData(),t.renderItems(!0),0!==t.treeList.length||t.isLoaded||t.finalize())}).catch(function(e){t.trigger("actionFailure",{error:e})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(i){t.treeList.pop(),t.treeData=i.result,t.isNumberTypeId=t.getType(),t.setRootData(),e&&(t.changeDataSource=!0),t.renderItems(!0),t.changeDataSource=!1,0!==t.treeList.length||t.isLoaded||t.finalize()}).catch(function(e){t.trigger("actionFailure",{error:e})})):(this.treeList.pop(),ae(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.getQuery=function(e,t){void 0===t&&(t=null);var i,s=[];if(e.query)i=e.query.clone();else{i=new up;for(var n=this.getActualProperties(e),o=0,r=Object.keys(n);o<r.length;o++){var a=r[o];"dataSource"!==a&&"tableName"!==a&&"child"!==a&&e[a]&&"url"!==a&&-1===s.indexOf(e[a])&&s.push(e[a])}i.select(s),n.hasOwnProperty("tableName")&&i.from(e.tableName)}return dp.addSorting(this.sortOrder,e.text,i),ae(t)||ae(e.parentID)||i.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),i},t.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof ee(this.fields.id,this.treeData[0])},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var e=this.getChildNodes(this.treeData,void 0,!0);ae(e)?this.rootData=[]:this.rootData=e}else this.rootData=this.treeData},t.prototype.renderItems=function(e){if(!this.isBlazorPlatform||this.isBlazorPlatform&&this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName||this.changeDataSource){this.listBaseOption.ariaAttributes.level=1;var t=this.getSortedData(this.rootData);this.ulElement=dp.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var s=0;s<i.length;)this.renderChildNodes(i[s],!0,null,!0),s++;(1===Oi("."+Ym,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element)}this.updateTemplateForBlazor(),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateTemplateForBlazor=function(){this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate()},t.prototype.updateCheckedStateFromDS=function(e){if(this.treeData&&this.showCheckBox)if(1===this.dataType){for(var t=this.fields,i=new Ip(this.treeData).executeLocal((new up).where(t.isChecked,"equal",!0,!1)),s=0;s<i.length;s++){var n=i[s][this.fields.id]?i[s][this.fields.id].toString():null;i[s][this.fields.parentID]&&i[s][this.fields.parentID].toString();if(-1!==this.checkedNodes.indexOf(n)||this.isLoaded||this.checkedNodes.push(n),i[s][this.fields.hasChildren])for(var o=i[s][this.fields.id],r=new Ip(this.treeData).executeLocal((new up).where(t.parentID,"equal",o,!1)),a=0;a<r.length;a++){var l=r[a][this.fields.id]?r[a][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkedNodes.push(l)}}for(s=0;s<this.checkedNodes.length;s++){var h=this.fields,c=new Ip(this.treeData).executeLocal((new up).where(h.id,"equal",this.checkedNodes[s],!0));c[0]&&this.autoCheck&&(this.getCheckedNodeDetails(h,c),this.checkIndeterminateState(c[0]));for(var p=new Ip(this.treeData).executeLocal((new up).where(h.parentID,"equal",this.checkedNodes[s],!0)),d=0;d<p.length;d++){var u=p[d][this.fields.id]?p[d][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(u)&&this.autoCheck&&this.checkedNodes.push(u)}}}else if(2===this.dataType||this.fields.dataSource instanceof Ip&&this.isOffline)for(d=0;d<this.treeData.length;d++){var m=this.treeData[d][this.fields.id]?this.treeData[d][this.fields.id].toString():"";this.treeData[d][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(m)&&this.checkedNodes.push(m);var f=ee(this.fields.child.toString(),this.treeData[d]);f&&this.updateChildCheckState(f,this.treeData[d])}},t.prototype.getCheckedNodeDetails=function(e,t){var i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,s=0,n=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),o=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(n||o){if(o){Ii(".e-check",o)||this.changeState(o,"indeterminate",null,!0,!0)}}else{this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var r=this.getChildNodes(this.treeData,i),a=0;a<r.length;a++){var l=r[a][this.fields.id]?r[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&s++,s===r.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}var h=new Ip(this.treeData).executeLocal((new up).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,h)}},t.prototype.updateParentCheckState=function(){for(var e,t=Oi(".e-stop",this.element),i=0;i<t.length;i++){var s=Mi(t[i],"."+Um),n=s.getAttribute("data-uid").toString(),o=0;if(e=1===this.dataType?new Ip(this.treeData).executeLocal((new up).where(this.fields.parentID,"equal",n,!0)):this.getChildNodes(this.treeData,n)){for(var r=0;r<e.length;r++){var a=e[r][this.fields.id].toString();-1!==this.checkedNodes.indexOf(a)&&o++}if(o===e.length){var l=s.getAttribute("data-uid");-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),this.changeState(s,"check",null,!0,!0)}else 0===o&&0===this.checkedNodes.length&&this.changeState(s,"uncheck",null,!0,!0)}}},t.prototype.checkIndeterminateState=function(e){var t;if(t=1===this.dataType?this.element.querySelector('[data-uid="'+e[this.fields.parentID]+'"]'):this.element.querySelector('[data-uid="'+e[this.fields.id]+'"]'))"true"!==t.querySelector("."+ef).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0);else if(2===this.dataType){this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}},t.prototype.updateChildCheckState=function(e,t){for(var i=0,s=t[this.fields.id]?t[this.fields.id].toString():"",n=0;n<e.length;n++){var o=e[n][this.fields.id]?e[n][this.fields.id].toString():"";e[n][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(o)&&this.autoCheck&&i++;var r=ee(this.fields.child.toString(),e[n]);r&&(this.parentCheckData.push(t),this.updateChildCheckState(r,e[n])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(var a=0;a<this.parentCheckData.length;a++)t!==this.parentCheckData[a]&&this.parentCheckData[a]&&this.checkIndeterminateState(this.parentCheckData[a])}this.parentCheckData=[]},t.prototype.beforeNodeCreate=function(e){if(this.showCheckBox){var t=fo(this.createElement,!0,{cssClass:this.touchClass});t.setAttribute("role","checkbox");var i=Ii("div.e-icons",e.item),s=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(t,e.item.childNodes[0].childNodes[ae(i)?0:1]);var n=ee(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(s)>-1?(Ii(".e-frame",t).classList.add("e-check"),t.setAttribute("aria-checked","true"),this.addCheck(e.item)):ae(n)||"true"!==n.toString()?t.setAttribute("aria-checked","false"):(Ii(".e-frame",t).classList.add("e-check"),t.setAttribute("aria-checked","true"),this.addCheck(e.item));var o=Ii(".e-frame",t);Ct.add(o,"mousedown",this.frameMouseHandler,this),Ct.add(o,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains("e-selected")&&e.item.setAttribute("aria-selected","false");var r=e.fields;if(this.addActionClass(e,r.selected,"e-selected"),this.addActionClass(e,r.expanded,"e-expanded"),!ae(this.nodeTemplateFn)){var a=e.item.querySelector("."+Gm),l=e.item.getAttribute("data-uid");a.innerHTML="",this.renderNodeTemplate(e.curData,a,l)}var h={node:e.item,nodeData:e.curData,text:e.text};this.isRefreshed||this.trigger("drawNode",h)},t.prototype.frameMouseHandler=function(e){go(e,Ii(".e-ripple-container",e.target.parentElement))},t.prototype.addActionClass=function(e,t,i){var s=ee(t,e.curData);ae(s)||"false"===s.toString()||e.item.classList.add(i)},t.prototype.getDataType=function(e,t){if(this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName){for(var i=0;i<e.length;i++)if(this.isOffline){if("string"==typeof t.child&&ae(ee(t.child,e[i]))&&!ae(ee(t.parentID,e[i])))return 1}else if("string"==typeof t.child&&ae(ee(t.child,e[i])))return 1;return 2}i=0;for(var s=e.length;i<s;i++){if("string"==typeof t.child&&!ae(ee(t.child,e[i])))return 2;if(!ae(ee(t.parentID,e[i]))||!ae(ee(t.hasChildren,e[i])))return 1}return 1},t.prototype.getGroupedData=function(e,t){for(var i=(new up).group(t),s=dp.getDataSource(e,i),n=[],o=0;o<s.length;o++){var r=s[o].items;n.push(r)}return n},t.prototype.getSortedData=function(e){return e&&"None"!==this.sortOrder&&(e=dp.getDataSource(e,dp.addSorting(this.sortOrder,this.fields.text))),e},t.prototype.finalizeNode=function(e){for(var t=Oi(".e-list-img",e),i=0;i<t.length;i++)t[i].setAttribute("alt","e-list-img");if(this.isLoaded){for(var s=Oi(".e-selected",e),n=0;n<s.length;n++){this.selectNode(s[n],null);break}Ci(s,"e-selected")}for(var o=Oi(".e-list-item:not(.e-expanded)",e),r=0;r<o.length;r++){var a=Ii("div.e-icons",o[r]);a&&a.classList.contains(Wm)&&this.disableExpandAttr(o[r])}var l=Oi(".e-expanded",e);if(!this.isInitalExpand)for(n=0;n<l.length;n++)this.renderChildNodes(l[n]);Ci(l,"e-expanded"),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var e=Oi("li",this.element),t=0;t<e.length;t++)e[t].classList.contains(Um)&&(Ii("."+Ym,e[t])?this.ensureParentCheckState(e[t]):this.ensureChildCheckState(e[t]));else{var i=Oi(".e-stop",this.element);for(t=0;t<i.length;t++)i[t].classList.remove("e-stop")}},t.prototype.ensureParentCheckState=function(e){if(!ae(e)){if(e.classList.contains("e-treeview"))return;var t=e;e.classList.contains(Um)&&(t=Ii("."+Ym,e));var i=Oi(".e-check",t),s=Oi(".e-stop",t),n=Oi("."+Um,t),o=e.getElementsByClassName(ef)[0];n.length===i.length?this.changeState(o,"check",null,!0,!0):i.length>0||s.length>0?this.changeState(o,"indeterminate",null,!0,!0):0===i.length&&this.changeState(o,"uncheck",null,!0,!0);var r=Mi(e,"."+Ym);if(!ae(r)){var a=Mi(r,"."+Um);this.ensureParentCheckState(a)}}},t.prototype.ensureChildCheckState=function(e,t){if(!ae(e)){var i=Ii("."+Ym,e),s=void 0;if(!ae(i)){s=Oi("."+ef,i);for(var n=e.getElementsByClassName("e-frame")[0].classList.contains("e-check"),o=e.getElementsByClassName("e-frame")[0].classList.contains("e-stop"),r=i.querySelectorAll("li"),a=(i.parentElement.getAttribute("aria-expanded"),void 0),l=0;l<s.length;l++){var h=r[l].getAttribute("data-uid");if(ae(this.currentLoadData)||ae(ee(this.fields.isChecked,this.currentLoadData[l]))){var c=s[l].getElementsByClassName("e-frame")[0].classList.contains("e-check");n?a="check":c&&!this.isLoaded?a="check":-1!==this.checkedNodes.indexOf(h)&&this.isLoaded&&(o||n)?a="check":r[l].classList.contains("e-has-child")&&!le(this.parentNodeCheck)&&this.autoCheck&&(n||o)&&-1!==this.parentNodeCheck.indexOf(h)?(a="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1)):1===this.dataType&&!le(this.parentNodeCheck)&&this.autoCheck&&(n||o)&&-1!==this.parentNodeCheck.indexOf(h)?(a="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1)):a="uncheck"}else a=ee(this.fields.isChecked,this.currentLoadData[l])?"check":"uncheck",-1!==this.ele&&(a=n?"check":"uncheck"),"uncheck"===a&&!le(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(h)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1),a="indeterminate");this.changeState(s[l],a,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(e,t){Oi("."+Um,this.element);if(ae(e)){var i=Oi("."+ef,this.element);if(this.loadOnDemand)for(var s=0;s<i.length;s++)this.updateFieldChecked(i[s],t),this.changeState(i[s],t?"check":"uncheck",null,null,null,t);else for(s=0;s<i.length;s++)this.updateFieldChecked(i[s],t),this.changeState(i[s],t?"check":"uncheck")}else for(var n=e.length;n>=0;n--){var o=void 0;if(ae(o=1===e.length?this.getElement(e[n-1]):this.getElement(e[n]))){var r=void 0;if(""!==(r=e[n-e.length]?e[n-e.length].toString():e[n]?e[n].toString():null)&&t&&r)this.setValidCheckedNode(r),this.dynamicCheckState(r,t);else if(-1!==this.checkedNodes.indexOf(r)&&""!==r&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(r),1);var a=this.getChildNodes(this.treeData,r);if(a){for(var l=0;l<a.length;l++){var h=a[l][this.fields.id]?a[l][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(h)&&this.checkedNodes.splice(this.checkedNodes.indexOf(h),1)}-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)}r&&this.dynamicCheckState(r,t),this.updateField(this.treeData,this.fields,r,"isChecked",null)}}else{var c=Ii(".e-list-parent ."+ef,o);this.validateCheckNode(c,!t,o,null)}}if(e)for(var p=0;p<e.length;p++){r=e[p]?e[p].toString():"";t||this.updateField(this.treeData,this.fields,r,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},t.prototype.updateFieldChecked=function(e,t){var i=Mi(e,"."+Um),s=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||t||this.updateField(this.treeData,this.fields,s,"isChecked",null)},t.prototype.dynamicCheckState=function(e,t){if(1===this.dataType){var i=0,s=new Ip(this.treeData).executeLocal((new up).where(this.fields.id,"equal",e,!0));if(s[0]){var n=s[0][this.fields.id]?s[0][this.fields.id].toString():null,o=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null,r=((p=this.element.querySelector('[data-uid="'+o+'"]'))&&Ii(".e-stop",p),p?Ii(".e-check",p):null),a=this.element.querySelector('[data-uid="'+n+'"]'),l=this.getChildNodes(this.treeData,o);if(l)for(var h=0;h<l.length;h++){var c=l[h][this.fields.id]?l[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(c)&&i++}-1!==this.checkedNodes.indexOf(e)&&p&&n===e&&this.autoCheck?this.changeState(p,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&a&&n===e&&!t?this.changeState(a,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&a&&n===e&&t?this.changeState(a,"check",null):-1===this.checkedNodes.indexOf(e)&&!a&&p&&n===e&&this.autoCheck&&0!==i?this.changeState(p,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!a&&p&&n===e&&this.autoCheck&&0===i?this.changeState(p,"uncheck",null):a||p||n!==e||!this.autoCheck||this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof Ip&&this.isOffline){n=void 0;var p=void 0;for(r=void 0,h=0;h<this.treeData.length;h++){n=this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():"",r=(p=this.element.querySelector('[data-uid="'+n+'"]'))?Ii(".e-check",p):null,-1===this.checkedNodes.indexOf(n)&&p&&r&&!t&&this.changeState(p,"uncheck",null);var d=ee(this.fields.child.toString(),this.treeData[h]);d&&this.updateChildIndeterminate(d,n,e,t,n)}}},t.prototype.updateIndeterminate=function(e,t){var i,s=this.getTreeData(e),n=0;1===this.dataType&&(i=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null);var o=this.getChildNodes(this.treeData,i);if(o)for(var r=0;r<o.length;r++){var a=o[r][this.fields.id]?o[r][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(a)&&n++}var l=this.element.querySelector('[data-uid="'+i+'"]');l&&t?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0!==n?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0===n?this.changeState(l,"uncheck",null):l||(t||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?t&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):t||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===n||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,t),-1===this.checkedNodes.indexOf(i)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))},t.prototype.updateChildIndeterminate=function(e,t,i,s,n){for(var o=0,r=0;r<e.length;r++){var a=e[r][this.fields.id]?e[r][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(a)&&o++;var l=this.element.querySelector('[data-uid="'+t+'"]'),h=l?Ii(".e-stop",l):null,c=l?Ii(".e-check",l):null,p=this.element.querySelector('[data-uid="'+a+'"]'),d=p?Ii(".e-check",p):null;if(-1!==this.checkedNodes.indexOf(i)&&l&&a===i&&this.autoCheck)this.changeState(l,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!l||p||a!==i||s){if(-1===this.checkedNodes.indexOf(i)&&p&&a===i&&!s)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&h&&a===i&&this.autoCheck&&0===o&&!s)h.classList.remove("e-stop");else if(-1===this.checkedNodes.indexOf(i)&&!p&&c&&a===i&&0===o)this.changeState(l,"uncheck",null);else if(-1===this.checkedNodes.indexOf(a)&&p&&d&&0===o)this.changeState(p,"uncheck",null);else if(!p&&!l&&a===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){var u=this.element.querySelector('[data-uid="'+n+'"]');s&&0!==o?this.changeState(u,"indeterminate",null):s&&o===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):s||0!==o||-1===this.parentNodeCheck.indexOf(t)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.autoCheck?this.changeState(l,"uncheck",null):0!==o?this.changeState(l,"indeterminate",null):this.changeState(l,"uncheck",null);var m=ee(this.fields.child.toString(),e[r]);m&&this.updateChildIndeterminate(m,a,i,s,n)}},t.prototype.changeState=function(e,t,i,s,n,o){var r,a=this,l=Mi(e,"."+Um);s?this.nodeCheckAction(e,t,l,r,i,s,n,o):(this.checkActionNodes=[],r=this.getCheckEvent(l,t,i),this.trigger("nodeChecking",r,function(r){r.cancel||a.nodeCheckAction(e,t,l,r,i,s,n,o)}))},t.prototype.nodeCheckAction=function(e,t,i,s,n,o,r,a){var l,h=e.getElementsByClassName("e-frame")[0];if("check"!==t||h.classList.contains("e-check")?"uncheck"===t&&(h.classList.contains("e-check")||h.classList.contains("e-stop"))?(Ci([h],["e-check","e-stop"]),this.removeCheck(i),l="false"):"indeterminate"===t&&this.autoCheck&&(h.classList.remove("e-check"),h.classList.add("e-stop"),this.removeCheck(i),l="mixed"):(h.classList.remove("e-stop"),h.classList.add("e-check"),this.addCheck(i),l="true"),ae(l="check"===t?"true":"uncheck"===t?"false":l)||e.setAttribute("aria-checked",l),r){var c=[].concat([],this.checkActionNodes);s=this.getCheckEvent(i,t,n),le(o)&&(s.data=c)}void 0!==a&&this.ensureStateChange(i,a),o||ae(l)||(e.setAttribute("aria-checked",l),this.allowServerDataBinding=!0,this.updateServerProperties("check"),this.allowServerDataBinding=!1,s.data[0].checked=l,this.trigger("nodeChecked",s),this.checkActionNodes=[])},t.prototype.addCheck=function(e){var t=e.getAttribute("data-uid");ae(t)||-1!==this.checkedNodes.indexOf(t)||this.checkedNodes.push(t)},t.prototype.removeCheck=function(e){var t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)},t.prototype.getCheckEvent=function(e,t,i){this.checkActionNodes.push(this.getNodeData(e));var s=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!ae(i),node:e,data:s}},t.prototype.finalize=function(){var e=Ii("."+Ym,this.element);if(!ae(e)){e.setAttribute("role",sf.treeRole),this.setMultiSelect(this.allowMultiSelection);var t=Ii("."+Um,this.element);t&&(bi([t],tf),this.updateIdAttr(null,t)),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},t.prototype.doExpandAction=function(){var e=this.expandedNodes;if(this.isInitalExpand&&e.length>0){if(this.setProperties({expandedNodes:[]},!0),this.isBlazorPlatform&&!this.initialRender)return;if(this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName)this.expandGivenNodes(e);else{for(var t=0;t<e.length;t++){var i=Ii('[data-uid="'+e[t]+'"]',this.element);if(ae(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{var s=Ii("."+Wm,Ii("."+Zm,i));ae(s)||this.expandAction(i,s,null)}}this.afterFinalized()}}else this.afterFinalized()},t.prototype.expandGivenNodes=function(e){var t=this;this.expandCallback(e[this.index],function(){t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()})},t.prototype.expandCallback=function(e,t){var i=Ii('[data-uid="'+e+'"]',this.element);if(ae(i))t();else{var s=Ii("."+Wm,Ii("."+Zm,i));ae(s)?t():this.expandAction(i,s,null,!1,t)}},t.prototype.afterFinalized=function(){if((!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender)&&this.doSelectionAction(),this.updateCheckedProp(),this.isBlazorPlatform&&(this.initialRender&&this.setCheckedNodes(this.checkedNodes),this.updateInstance(),this.initialRender=!1),this.isAnimate=!0,this.isInitalExpand=!1,!this.isLoaded||this.isFieldChange){var e={data:this.treeData};this.trigger("dataBound",e)}this.isLoaded=!0},t.prototype.doSelectionAction=function(){var e=Oi(".e-selected",this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<t.length;i++){var s=Ii('[data-uid="'+t[i]+'"]',this.element);if(s&&!s.classList.contains("e-active")?this.selectNode(s,null,!0):this.selectedNodes.push(t[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);Ci(e,"e-selected")},t.prototype.selectGivenNodes=function(e){for(var t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);},t.prototype.clickHandler=function(e){var t=e.originalEvent.target;if(Ct.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){var i=t.classList,s=Mi(t,"."+Um);if(s){if(3!==e.originalEvent.which){var n=Ii(".e-ripple-element",s),o=Ii(".e-icons",s);if(this.removeHover(),this.setFocusElement(s),this.showCheckBox&&!s.classList.contains("e-disable")){var r=Mi(t,"."+ef);if(!ae(r)){var a=Ii(".e-frame",r);return this.validateCheckNode(r,a.classList.contains("e-check"),s,e.originalEvent),void this.triggerClickEvent(e.originalEvent,s)}}i.contains(Wm)?this.expandAction(s,t,e):i.contains(qm)?this.collapseNode(s,t,e):n&&o?o.classList.contains("e-ripple")&&o.classList.contains(Wm)?this.expandAction(s,o,e):o.classList.contains("e-ripple")&&o.classList.contains(qm)?this.collapseNode(s,o,e):i.contains(Ym)||i.contains(Um)||this.toggleSelect(s,e.originalEvent,!1):i.contains(Ym)||i.contains(Um)||this.toggleSelect(s,e.originalEvent,!1)}this.triggerClickEvent(e.originalEvent,s)}}},t.prototype.nodeCheckedEvent=function(e,t,i){Mi(e,"."+Um);var s=this.getCheckEvent(e,t?"uncheck":"check",i);s.data=s.data.splice(0,s.data.length-1),this.trigger("nodeChecked",s)},t.prototype.triggerClickEvent=function(e,t){var i={event:e,node:t};this.trigger("nodeClicked",i)},t.prototype.expandNode=function(e,t,i){var s=this;if(this.renderReactTemplates(),t.classList.contains(Xm)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){Ci([t],Wm),bi([t],qm);var n=0,o=0,r=this,a=Ii("."+Ym,e),l=e;this.setHeight(l,a);var h=Ii(".e-list-item.e-active",e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(a,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(t){l.style.overflow="hidden",!ae(h)&&h instanceof HTMLElement&&h.classList.add("e-animation-active"),n=l.offsetHeight,o=Ii("."+Zm,e).offsetHeight},progress:function(e){e.element.style.display="block",r.animateHeight(e,n,o)},end:function(e){e.element.style.display="block",!ae(h)&&h instanceof HTMLElement&&h.classList.remove("e-animation-active"),s.expandedNode(l,a,t)}}):this.expandedNode(l,a,t)}}else Ii("."+Ym,e).style.display="none",this.fields.dataSource instanceof Ip==!0&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")},t.prototype.expandedNode=function(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",Ci([i],Km),this.addExpand(e),this.allowServerDataBinding=!0,this.updateServerProperties("expand"),this.allowServerDataBinding=!1,this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(e){e.setAttribute("aria-expanded","true"),Ci([e],"e-node-collapsed");var t=e.getAttribute("data-uid");ae(t)||-1!==this.expandedNodes.indexOf(t)||this.expandedNodes.push(t)},t.prototype.collapseNode=function(e,t,i){var s,n=this;t.classList.contains(Km)||(bi([t],Km),this.isLoaded?(s=this.getExpandEvent(e,i),this.trigger("nodeCollapsing",s,function(i){i.cancel?Ci([t],Km):n.nodeCollapseAction(e,t,i)})):this.nodeCollapseAction(e,t,s))},t.prototype.nodeCollapseAction=function(e,t,i){var s=this;Ci([t],qm),bi([t],Wm);var n=0,o=0,r=this,a=Ii("."+Ym,e),l=e,h=Ii(".e-list-item.e-active",e);this.isAnimate?this.aniObj.animate(a,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(t){l.style.overflow="hidden",!ae(h)&&h instanceof HTMLElement&&h.classList.add("e-animation-active"),n=Ii("."+Zm,e).offsetHeight,o=l.offsetHeight},progress:function(e){r.animateHeight(e,n,o)},end:function(e){e.element.style.display="none",!ae(h)&&h instanceof HTMLElement&&h.classList.remove("e-animation-active"),s.collapsedNode(l,a,t,i)}}):this.collapsedNode(l,a,t,i)},t.prototype.collapsedNode=function(e,t,i,s){t.style.display="none",e.style.overflow="",e.style.height="",Ci([i],Km),this.allowServerDataBinding=!0,this.updateServerProperties("expand"),this.allowServerDataBinding=!1,this.removeExpand(e),this.isLoaded&&(s=this.getExpandEvent(e,null),this.trigger("nodeCollapsed",s))},t.prototype.removeExpand=function(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);var i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)},t.prototype.disableExpandAttr=function(e){e.setAttribute("aria-expanded","false"),bi([e],"e-node-collapsed")},t.prototype.setHeight=function(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},t.prototype.animateHeight=function(e,t,i){var s=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=s+"px"},t.prototype.renderChildNodes=function(e,t,i,s){var n,o=this,r=Ii("div.e-icons",e);if(!ae(r))if(this.showSpinner(r),this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName){var a=this.parents(e,"."+Ym).length,l=this.getChildFields(this.fields,a,1);if(ae(l)||ae(l.dataSource))return Ti(r),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof Ip&&this.isOffline?(this.treeList.pop(),n=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(n,l,r,e,t,i,s),this.updateTemplateForBlazor()):l.dataSource.executeQuery(this.getQuery(l,e.getAttribute("data-uid"))).then(function(a){o.treeList.pop(),n=a.result,1===o.dataType&&(o.dataType=2),o.loadChild(n,l,r,e,t,i,s),o.updateTemplateForBlazor()}).catch(function(e){o.trigger("actionFailure",{error:e})})}else{if(n=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(n),ae(n)||0===n.length)return Ti(r),void this.removeExpand(e,!0);this.isBlazorPlatform&&this.initialRender||(this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(dp.createList(this.createElement,this.currentLoadData,this.listBaseOption))),this.expandNode(e,r,s),this.setSelectionForChildNodes(n),this.ensureCheckNode(e),this.finalizeNode(e),this.loadOnDemand&&this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate(),this.disableTreeNodes(n),this.renderSubChild(e,t,s)}},t.prototype.loadChild=function(e,t,i,s,n,o,r){if(this.currentLoadData=e,ae(e)||0===e.length)Ti(i),this.removeExpand(s,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof Ip&&!this.isOffline){var a=s.getAttribute("data-uid");te("child",e,this.getNodeObject(a))}this.listBaseOption.ariaAttributes.level=parseFloat(s.getAttribute("aria-level"))+1,s.appendChild(dp.createList(this.createElement,e,this.listBaseOption)),this.expandNode(s,i,r),this.setSelectionForChildNodes(e),this.ensureCheckNode(s),this.finalizeNode(s),this.disableTreeNodes(e),this.renderSubChild(s,n,r)}o&&o(),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.disableTreeNodes=function(e){for(var t=0;t<e.length;){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}},t.prototype.setSelectionForChildNodes=function(e){var t;for(t=0;t<e.length;t++){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null},t.prototype.getFields=function(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)},t.prototype.getChildFields=function(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)},t.prototype.getChildMapper=function(e){return"string"==typeof e.child||ae(e.child)?e:e.child},t.prototype.getChildNodes=function(e,t,i){var s;if(void 0===i&&(i=!1),ae(e))return s;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,i);if("string"==typeof this.fields.child)for(var n=0,o=e.length;n<o;n++){var r=ee(this.fields.id,e[n]);if(r&&r.toString()===t)return ee(this.fields.child,e[n]);if(!ae(ee(this.fields.child,e[n]))&&void 0!==(s=this.getChildNodes(ee(this.fields.child,e[n]),t)))break}return s},t.prototype.getChildGroup=function(e,t,i){if(!ae(e))for(var s=0,n=e.length;s<n;s++){if(ae(e[s][0])||ae(ee(this.fields.parentID,e[s][0])))return i?e[s]:[];if(ee(this.fields.parentID,e[s][0]).toString()===t)return e[s]}},t.prototype.renderSubChild=function(e,t,i){if(t)for(var s=Oi("."+Wm,e),n=0,o=s.length;n<o;n++){var r=s[n];if(e.querySelector(".e-icons")!==s[n]){var a=Mi(r,"."+Um);this.expandArgs=this.getExpandEvent(a,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(a,t,null,i)}}},t.prototype.toggleSelect=function(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))},t.prototype.isActive=function(e){return!!e.classList.contains("e-active")},t.prototype.selectNode=function(e,t,i){var s,n=this;ae(e)||!this.allowMultiSelection&&this.isActive(e)&&!ae(t)?this.setFocusElement(e):this.isLoaded?(s=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",s,function(s){s.cancel||n.nodeSelectAction(e,t,s,i)})):this.nodeSelectAction(e,t,s,i)},t.prototype.nodeSelectAction=function(e,t,i,s){if(this.allowMultiSelection&&(s||t&&(!t||t.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);var n=this.liList.indexOf(this.startNode),o=this.liList.indexOf(e);if(n>o){var r=n;n=o,o=r}for(var a=n;a<=o;a++){var l=this.liList[a];xi(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))},t.prototype.unselectNode=function(e,t){var i,s=this;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,function(t){t.cancel||(s.allowServerDataBinding=!0,s.updateServerProperties("select"),s.allowServerDataBinding=!1,s.nodeUnselectAction(e,t))})):this.nodeUnselectAction(e,i)},t.prototype.nodeUnselectAction=function(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))},t.prototype.setFocusElement=function(e){if(!ae(e)){var t=this.getFocusedNode();t&&Ci([t],tf),bi([e],tf),this.updateIdAttr(t,e)}},t.prototype.addSelect=function(e){e.setAttribute("aria-selected","true"),bi([e],"e-active");var t=e.getAttribute("data-uid");ae(t)||-1!==this.selectedNodes.indexOf(t)||this.selectedNodes.push(t)},t.prototype.removeSelect=function(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),Ci([e],"e-active");var t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)},t.prototype.removeSelectAll=function(){for(var e=this.element.querySelectorAll(".e-active"),t=0,i=e;t<i.length;t++){var s=i[t];this.allowMultiSelection?s.setAttribute("aria-selected","false"):s.removeAttribute("aria-selected")}Ci(e,"e-active"),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(e,t,i){var s=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!ae(i),node:e,nodeData:s}},t.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?bt.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(e){var t=e.originalEvent.target;!t||t.classList.contains("e-input")||t.classList.contains("e-treeview")||t.classList.contains(Ym)||t.classList.contains(Um)||t.classList.contains("e-icons")||this.showCheckBox&&Mi(t,"."+ef)||this.expandCollapseAction(Mi(t,"."+Um),e)},t.prototype.expandCollapseAction=function(e,t){var i=Ii("div.e-icons",e);if(i&&!i.classList.contains(Km)){var s=i.classList;s.contains(Wm)?this.expandAction(e,i,t):s.contains(qm)&&this.collapseNode(e,i,t)}},t.prototype.expandAction=function(e,t,i,s,n){var o=this;t.classList.contains(Km)||(bi([t],Km),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.trigger("nodeExpanding",this.expandArgs,function(i){i.cancel?Ci([t],Km):o.nodeExpandAction(e,t,s,n)})):this.nodeExpandAction(e,t,s,n))},t.prototype.nodeExpandAction=function(e,t,i,s){var n=Ii("."+Ym,e);if(n&&"UL"===n.nodeName)this.expandNode(e,t);else{this.renderChildNodes(e,i,s);for(var o=Oi("."+Um,e),r=0;r<o.length;r++){var a=this.getId(o[r]);if(-1!==this.expandChildren.indexOf(a)&&void 0!==this.expandChildren){var l=Ii("."+Wm,Ii("."+Zm,o[r]));ae(l)||this.expandAction(o[r],l,null),this.expandChildren.splice(this.expandChildren.indexOf(a),1)}}}},t.prototype.keyActionHandler=function(e){var t=this,i=e.target,s=this.getFocusedNode();if(i&&i.classList.contains("e-input")){var n=i;"enter"===e.action?(n.blur(),this.element.focus(),bi([s],"e-hover")):"escape"===e.action&&(n.value=this.oldText,n.blur(),this.element.focus(),bi([s],"e-hover"))}else{e.preventDefault();var o={cancel:!1,event:e,node:s};this.trigger("keyPress",o,function(i){if(!i.cancel)switch(e.action){case"space":t.showCheckBox&&t.checkNode(e);break;case"moveRight":t.openNode(!t.enableRtl,e);break;case"moveLeft":t.openNode(!!t.enableRtl,e);break;case"shiftDown":t.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":t.navigateNode(!0);break;case"shiftUp":t.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":t.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":t.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":t.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.toggleSelect(s,e);break;case"f2":t.allowEditing&&!s.classList.contains("e-disable")&&t.createTextbox(s,e);break;case"ctrlA":if(t.allowMultiSelection){var n=Oi(".e-list-item:not(.e-active)",t.element);t.selectGivenNodes(n)}}})}},t.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+Zm),i=t.getBoundingClientRect(),s=this.getScrollParent(this.element);if(!ae(s)){var n=s.getBoundingClientRect();i.bottom>n.bottom?s.scrollTop+=i.bottom-n.bottom:i.top<n.top&&(s.scrollTop-=n.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},t.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(e){return ae(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},t.prototype.shiftKeySelect=function(e,t){if(this.allowMultiSelection){var i=this.getFocusedNode(),s=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(s),this.toggleSelect(s,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},t.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=Ii("."+ef,t),s=Ii(" .e-frame",i).classList.contains("e-check");t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,s,t,e)},t.prototype.validateCheckNode=function(e,t,i,s){var n=this,o=Mi(e,"."+Um);this.checkActionNodes=[];var r=t?"false":"true";ae(r)||e.setAttribute("aria-checked",r);var a=this.getCheckEvent(o,t?"uncheck":"check",s);this.trigger("nodeChecking",a,function(o){o.cancel||n.nodeCheckingAction(e,t,i,o,s)})},t.prototype.nodeCheckingAction=function(e,t,i,s,n){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))){this.checkedElement.push(i.getAttribute("data-uid"));var o=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==o?this.allCheckNode(o,this.checkedElement,null,null,!1):o=null}if(this.changeState(e,t?"uncheck":"check",n,!0),this.autoCheck){this.ensureChildCheckState(i),this.ensureParentCheckState(Mi(Mi(i,"."+Ym),"."+Um));var r=void 0;"check"===s.action?r=!0:"uncheck"===s.action&&(r=!1),this.ensureStateChange(i,r)}this.allowServerDataBinding=!0,this.updateServerProperties("check"),this.allowServerDataBinding=!1,this.nodeCheckedEvent(e,t,n)},t.prototype.ensureStateChange=function(e,t){var i=Ii("."+Ym,e),s=e.getAttribute("data-uid"),n=this.fields;if(1===this.dataType&&this.autoCheck)for(var o=new Ip(this.treeData).executeLocal((new up).where(n.parentID,"equal",s,!0)),r=0;r<o.length;r++){var a=o[r][this.fields.id]?o[r][this.fields.id].toString():null,l=o[r][this.fields.isChecked]?o[r][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(a)){this.checkedNodes.push(a);var h=this.getChildNodes(this.treeData,a);this.getChildItems(h,t),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}else if(-1===this.checkedNodes.indexOf(s)&&null===i&&-1!==this.checkedNodes.indexOf(a)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),"true"===l&&this.updateField(this.treeData,this.fields,a,"isChecked",null),-1===this.checkedNodes.indexOf(s)&&null===i||-1!==this.parentNodeCheck.indexOf(a)){var c=this.getChildNodes(this.treeData,a);this.getChildItems(c,t),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}}else{h=this.getChildNodes(this.treeData,a);this.getChildItems(h,t)}}else if(1!==this.dataType||this.autoCheck){(h=this.getChildNodes(this.treeData,s))&&this.childStateChange(h,s,i,t)}else if(t)for(r=0;r<this.treeData.length;r++){var p=this.treeData[r][this.fields.id]?this.treeData[r][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(p)&&this.checkedNodes.push(p)}else{for(var d=new Ip(this.treeData).executeLocal((new up).where(n.isChecked,"equal",!0,!1)),r=0;r<d.length;r++){var u=d[r][this.fields.id]?d[r][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),this.updateField(this.treeData,this.fields,u,"isChecked",null)}this.checkedNodes=[]}},t.prototype.getChildItems=function(e,t){for(var i=0;i<e.length;i++){var s=e[i][this.fields.id]?e[i][this.fields.id].toString():null,n=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(s)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),-1===this.checkedNodes.indexOf(s)&&t&&this.checkedNodes.push(s),"true"!==n||t||this.updateField(this.treeData,this.fields,s,"isChecked",null);var o=this.getChildNodes(this.treeData,s);o.length>0&&this.getChildItems(o,t)}},t.prototype.childStateChange=function(e,t,i,s){for(var n=0;n<e.length;n++){var o=e[n][this.fields.id]?e[n][this.fields.id].toString():"",r=e[n][this.fields.isChecked]?e[n][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(o)?(this.checkedNodes.push(o),-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)):-1!==this.checkedNodes.indexOf(t)||-1===this.checkedNodes.indexOf(o)||s||(this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),"true"===r&&this.updateField(this.treeData,this.fields,o,"isChecked",null)):this.autoCheck||(s?-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o):(-1!==this.checkedNodes.indexOf(o)&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),this.updateField(this.treeData,this.fields,o,"isChecked",null),this.checkedNodes=[]));var a=this.getChildNodes([e[n]],o);a&&this.childStateChange(a,t,i,s)}},t.prototype.allCheckNode=function(e,t,i,s,n){if(e)for(var o=0;o<e.length;o++){var r=ee(this.fields.id,e[o]),a=this.element.querySelector('[data-uid="'+r+'"]');if(!1!==n&&-1===this.checkedElement.indexOf(r.toString())&&(null===a&&!ae(e[o][this.fields.isChecked])&&-1===t.indexOf(r.toString())||0===s||2===i)&&(!1!==e[o][this.fields.isChecked]||2===i?t.push(r.toString()):s=null,s=!1!==e[o][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(r.toString())&&ae(i)&&t.push(r.toString()),!0===ee(this.fields.hasChildren,e[o])||ee(this.fields.child.toString(),e[o])){var l=ee(this.fields.id,e[o]),h=this.getChildNodes(this.treeData,l.toString());h&&(ae(n)?this.allCheckNode(h,t,i,s):this.allCheckNode(h,t,i,s,n),s=null)}s=null}},t.prototype.openNode=function(e,t){var i=this.getFocusedNode(),s=Ii("div.e-icons",i);if(e){if(!s)return;s.classList.contains(Wm)?this.expandAction(i,s,t):this.focusNextNode(i,!0)}else if(s&&s.classList.contains(qm))this.collapseNode(i,s,t);else{var n=Mi(Mi(i,"."+Ym),"."+Um);if(!n)return;n.classList.contains("e-disable")||(this.setFocus(i,n),this.navigateToFocus(!0))}},t.prototype.navigateNode=function(e){var t=this.getFocusedNode();this.focusNextNode(t,e)},t.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))},t.prototype.getFocusedNode=function(){var e,t=Ii(".e-list-item."+tf,this.element);return ae(t)&&(e=Ii("."+Um,this.element)),ae(t)?ae(e)?this.element.firstElementChild:e:t},t.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){var s=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")?this.focusNextNode(i,!1):null==i.nextSibling&&s.classList.contains("e-text-content")?this.focusNextNode(i,!1):this.focusNextNode(i,t)}},t.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,ae(t=this.liList[i]))return e}while(!xi(t));return t},t.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,ae(t=this.liList[i]))return e}while(!xi(t));return t},t.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!xi(e));return e},t.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!xi(e));return e},t.prototype.setFocus=function(e,t){Ci([e],["e-hover",tf]),t.classList.contains("e-disable")||(bi([t],["e-hover",tf]),this.updateIdAttr(e,t))},t.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){this.mouseDownStatus||bi([this.getFocusedNode()],"e-hover"),this.mouseDownStatus=!1},t.prototype.focusOut=function(){Ci([this.getFocusedNode()],"e-hover")},t.prototype.onMouseOver=function(e){var t=e.target,i=t.classList,s=Mi(t,"."+Um);!s||i.contains(Ym)||i.contains(Um)?this.removeHover():s&&!s.classList.contains("e-disable")&&this.setHover(s)},t.prototype.setHover=function(e){e.classList.contains("e-hover")||(this.removeHover(),bi([e],"e-hover"))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){var e=Oi(".e-hover",this.element);e&&e.length&&Ci(e,"e-hover")},t.prototype.getNodeData=function(e,t){if(!ae(e)&&e.classList.contains(Um)&&!ae(Mi(e,".e-control"))&&Mi(e,".e-control").classList.contains("e-treeview")){var i=e.getAttribute("data-uid"),s=this.getText(e,t),n=Mi(e.parentNode,"."+Um),o=n?n.getAttribute("data-uid"):null,r=e.classList.contains("e-active"),a="true"===e.getAttribute("aria-expanded"),l=null!==e.getAttribute("aria-expanded");this.isBlazorPlatform&&(l="true"===e.getAttribute("aria-expanded")||null!=(e.querySelector(".e-icon-expandable")||e.querySelector(".e-icon-collapsible")));var h=null;return this.showCheckBox&&(h=Ii("."+ef,e).getAttribute("aria-checked")),{id:i,text:s,parentID:o,selected:r,expanded:a,isChecked:h,hasChildren:l}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},t.prototype.getText=function(e,t){if(t){var i=this.getNodeObject(e.getAttribute("data-uid")),s=parseFloat(e.getAttribute("aria-level"));return ee(this.getFields(this.fields,s,1).text,i)}return Ii("."+Gm,e).textContent},t.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{cancel:!1,isInteracted:!ae(t),node:e,nodeData:i,event:t}},t.prototype.renderNodeTemplate=function(e,t,i){var s=this.nodeTemplateFn(e,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,t);s&&Ei(s=Array.prototype.slice.call(s),t)},t.prototype.destroyTemplate=function(e){this.clearTemplate(["nodeTemplate"+e.getAttribute("data-uid")])},t.prototype.reRenderNodes=function(){this.updateListProp(this.fields),Zt(this.element.id+"nodeTemplate"),this.isBlazorPlatform?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",ae(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},t.prototype.setCssClass=function(e,t){ae(e)||""===e||Ci([this.element],e.split(" ")),ae(t)||""===t||bi([this.element],t.split(" "))},t.prototype.editingHandler=function(e){var t=e.target;if(!(!t||t.classList.contains("e-treeview")||t.classList.contains(Ym)||t.classList.contains(Um)||t.classList.contains("e-icons")||t.classList.contains("e-input")||t.classList.contains("e-input-group"))){var i=Mi(t,"."+Um);this.createTextbox(i,e)}},t.prototype.createTextbox=function(e,t){var i=this,s=Ii(".e-tree-input",this.element);s&&s.blur();var n=Ii("."+Gm,e);this.updateOldText(e);var o=this.createElement("input",{className:"e-tree-input",attrs:{value:this.oldText}}),r=this.getEditEvent(e,null,o.outerHTML);this.trigger("nodeEditing",r,function(t){if(!t.cancel){var s="width:"+(n.offsetWidth+5)+"px";bi([e],"e-editing"),ae(i.nodeTemplateFn)||i.destroyTemplate(e),n.innerHTML=r.innerHtml;var o=Ii(".e-tree-input",n);i.inputObj=Na.createInput({element:o,properties:{enableRtl:i.enableRtl}},i.createElement),i.inputObj.container.setAttribute("style",s),o.focus();var a=o;a.setSelectionRange(0,a.value.length),i.wireInputEvents(o)}})},t.prototype.updateOldText=function(e){var t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);var i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=ee(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(e){if(Ii(".e-tree-input",this.element)){var t=e.target,i=t.value,s=Mi(t,"."+Gm),n=Mi(t,"."+Um);Ti(this.inputObj.container),this.fields.dataSource instanceof Ip&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("update",null,n,i,null,null,!0):this.appendNewText(n,s,i,!0)}},t.prototype.appendNewText=function(e,t,i,s){var n=this,o=this.getEditEvent(e,i,null);this.trigger("nodeEdited",o,function(o){i=o.cancel?o.oldText:o.newText,n.updateText(e,t,i,s),o.oldText!==i&&n.triggerEvent()})},t.prototype.updateText=function(e,t,i,s){var n=te(this.editFields.text,i,this.editData);if(ae(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";var o=e.getAttribute("data-uid");this.renderNodeTemplate(n,t,o),this.updateBlazorTemplate(),this.renderReactTemplates()}s&&(Ci([e],"e-editing"),t.focus())},t.prototype.getElement=function(e){return ae(e)?null:"string"==typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"==typeof e?be(e):null},t.prototype.getId=function(e){return ae(e)?null:"string"==typeof e?e:"object"==typeof e?be(e).getAttribute("data-uid"):null},t.prototype.getEditEvent=function(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},t.prototype.getNodeObject=function(e){if(!ae(e)){if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(var t=0,i=this.treeData.length;t<i;t++){var s=ee(this.fields.id,this.treeData[t]);if(!ae(this.treeData[t])&&!ae(s)&&s.toString()===e)return this.treeData[t]}}},t.prototype.getChildNodeObject=function(e,t,i){var s;if(ae(e))return s;for(var n=0,o=e.length;n<o;n++){var r=ee(t.id,e[n]);if(e[n]&&r&&r.toString()===i)return e[n];if("string"!=typeof t.child||ae(ee(t.child,e[n]))){if(this.fields.dataSource instanceof Ip&&!ae(ee("child",e[n]))){if(void 0!==(s=this.getChildNodeObject(ee("child",e[n]),this.getChildMapper(t),i)))break}}else{var a=ee(t.child,e[n]);if(void 0!==(s=this.getChildNodeObject(a,this.getChildMapper(t),i)))break}}return s},t.prototype.setDragAndDrop=function(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var e,t=this,i=this;this.dragObj=new Ws(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+Zm,helper:function(s){t.dragTarget=s.sender.target;var n=Mi(t.dragTarget,".e-treeview"),o=Mi(t.dragTarget,"."+Zm);if(t.dragLi=Mi(t.dragTarget,"."+Um),t.fullRowSelect&&!o&&t.dragTarget.classList.contains($m)&&(o=t.dragTarget.nextElementSibling),!t.dragTarget||!s.element.isSameNode(n)||!o||t.dragTarget.classList.contains("e-treeview")||t.dragTarget.classList.contains(Ym)||t.dragTarget.classList.contains(Um)||t.dragLi.classList.contains("e-disable"))return!1;var r=o.cloneNode(!0);if(ae(Ii("div.e-icons",r))){var a=i.createElement("div",{className:"e-icons "+Wm});r.insertBefore(a,r.children[0])}var l="e-drag-item e-treeview "+t.cssClass+" "+(t.enableRtl?"e-rtl":"");(e=i.createElement("div",{className:l})).appendChild(r);var h=t.selectedNodes.length;if(h>1&&t.allowMultiSelection&&t.dragLi.classList.contains("e-active")){var c=i.createElement("span",{className:"e-drop-count",innerHTML:""+h});e.appendChild(c)}return document.body.appendChild(e),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),e},dragStart:function(i){bi([t.element],"e-dragging");var s,n=Mi(i.target,".e-list-item");n&&(s=parseInt(n.getAttribute("aria-level"),10));var o=t.getDragEvent(i.event,t,null,i.target,null,e,s);o.draggedNode.classList.contains("e-editing")?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.trigger("nodeDragStart",o,function(s){s.cancel?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.dragStartAction=!0,ye()&&i.bindEvents(be(i.dragElement))})},drag:function(i){t.dragObj.setProperties({cursorAt:{top:!ae(i.event.targetTouches)||bt.isDevice?60:-20}}),t.dragAction(i,e)},dragStop:function(e){Ci([t.element],"e-dragging"),t.removeVirtualEle();var i=e.target,s=Mi(i,".e-droppable"),n=!0;i&&s||(Ti(e.helper),document.body.style.cursor="",n=!1);var o,r=Mi(i,".e-list-item");r&&(o=parseInt(r.getAttribute("aria-level"),10));var a=t.getDragEvent(e.event,t,i,i,null,e.helper,o);a.preventTargetExpand=!1,(t.isBlazorPlatform&&t.dragStartAction||!t.isBlazorPlatform)&&t.trigger("nodeDragStop",a,function(i){t.dragParent=i.draggedParentNode,t.preventExpand=i.preventTargetExpand,i.cancel&&(e.helper.parentNode&&Ti(e.helper),document.body.style.cursor="",n=!1),t.dragStartAction=!1,t.isBlazorPlatform&&n&&t.dropAction(e,!0)})}}),this.dropObj=new Ys(this.element,{out:function(e){ae(e)||e.target.classList.contains(Qm)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""},drop:function(e){t.isBlazorPlatform||t.dropAction(e)}})},t.prototype.dragCancelAction=function(e){Ti(e),Ci([this.element],"e-dragging"),this.dragStartAction=!1},t.prototype.dragAction=function(e,t){var i=Mi(e.target,".e-droppable"),s=Mi(e.target,"."+Zm),n=Ii("div.e-icons",t);Ci([n],["e-drop-in",Jm,"e-drop-out","e-no-drop"]),this.removeVirtualEle(),document.body.style.cursor="";var o=e.target.classList;if(this.fullRowSelect&&!s&&!ae(o)&&o.contains($m)&&(s=e.target.nextElementSibling),i){var r=Mi(e.target,"."+Um),a=Mi(e.target,"."+ef),l=Mi(e.target,"."+qm),h=Mi(e.target,"."+Wm);if(!i.classList.contains("e-treeview")||s&&!r.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,r))if(r&&e&&!h&&!l&&e.event.offsetY<7&&!a||h&&e.event.offsetY<5||l&&e.event.offsetX<3){bi([n],Jm);var c=this.createElement("div",{className:Qm}),p=this.fullRowSelect?1:0;r.insertBefore(c,r.children[p])}else if(r&&e&&!h&&!l&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!a||h&&e.event.offsetY>19||l&&e.event.offsetX>19){bi([n],Jm);c=this.createElement("div",{className:Qm}),p=this.fullRowSelect?2:1;r.insertBefore(c,r.children[p])}else bi([n],"e-drop-in");else"LI"!==e.target.nodeName||r.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,r)?e.target.classList.contains(Qm)?bi([n],Jm):bi([n],"e-drop-out"):(bi([n],Jm),this.renderVirtualEle(e))}else bi([n],"e-no-drop"),document.body.style.cursor="not-allowed";var d,u=Mi(e.target,".e-list-item");u&&(d=parseInt(u.getAttribute("aria-level"),10));var m=this.getDragEvent(e.event,this,e.target,e.target,null,t,d);m.dropIndicator&&Ci([n],m.dropIndicator),this.trigger("nodeDragging",m),m.dropIndicator&&bi([n],m.dropIndicator)},t.prototype.dropAction=function(e,t){var s,n,o,r=e.event.offsetY,a=e.target,l=!1;o=t?e.element:e.dragData.draggable;for(var h=0;h<o.ej2_instances.length;h++)if(o.ej2_instances[h]instanceof i){s=o.ej2_instances[h];break}if(s&&s.dragTarget){var c=Mi(s.dragTarget,"."+Um),p=Mi(a,"."+Um);if(null==p&&a.classList.contains("e-treeview")&&(p=a.firstElementChild),Ti(t?e.helper:e.droppedElement),document.body.style.cursor="",!p||p.isSameNode(c)||this.isDescendant(c,p))return void(this.fields.dataSource instanceof Ip==!1&&(this.preventExpand=!1));if(s.allowMultiSelection&&c.classList.contains("e-active")){var d=Oi(".e-active",s.element);if(e.target.offsetHeight<=33&&r>e.target.offsetHeight-10&&r>6)for(h=d.length-1;h>=0;h--)p.isSameNode(d[h])||this.isDescendant(d[h],p)||this.appendNode(a,d[h],p,e,s,r);else for(h=0;h<d.length;h++)p.isSameNode(d[h])||this.isDescendant(d[h],p)||this.appendNode(a,d[h],p,e,s,r)}else this.appendNode(a,c,p,e,s,r);n=parseInt(c.getAttribute("aria-level"),10),l=!0}this.fields.dataSource instanceof Ip==!1&&(this.preventExpand=!1),t?this.trigger("nodeDropped",this.getDragEvent(e.event,s,a,e.target,e.element,null,n,l)):this.trigger("nodeDropped",this.getDragEvent(e.event,s,a,e.target,e.dragData.draggedElement,null,n,l)),this.triggerEvent()},t.prototype.appendNode=function(e,t,i,s,n,o){var r=Mi(e,"."+ef),a=Mi(s.target,"."+qm),l=Mi(s.target,"."+Wm);t.classList.contains("e-disable")||r||!(l&&s.event.offsetY<5||a&&s.event.offsetX<3||l&&s.event.offsetY>19||a&&s.event.offsetX>19||!l&&!a)?this.dropAsChildNode(t,i,n,null,s,o,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,s,n):e.firstElementChild&&e.classList.contains("e-treeview")?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,s,n):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,s,n):this.dropAsChildNode(t,i,n,null,s,o)},t.prototype.dropAsSiblingNode=function(e,t,i,s){var n,o=Mi(t,"."+Ym),r=Mi(e,"."+Ym),a=Mi(r,"."+Um);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?n=!1:i.event.offsetY<2?n=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?n=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(n=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var l=i.target.closest("li");o.insertBefore(e,n?l:l.nextElementSibling)}else o.insertBefore(e,n?i.target:i.target.nextElementSibling);this.moveData(e,t,o,n,s),this.updateElement(r,a),this.updateAriaLevel(e),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(e,t,i,s,n,o,r){var a=Mi(e,"."+Ym),l=Mi(a,"."+Um),h=Mi(t,"."+Ym);if(n&&o<7&&!r)h.insertBefore(e,t),this.moveData(e,t,h,!0,i);else if(n&&n.target.offsetHeight>0&&o>n.target.offsetHeight-10&&!r)h.insertBefore(e,t.nextElementSibling),this.moveData(e,t,h,!1,i);else{var c=this.expandParent(t),p=c.childNodes[s];c.insertBefore(e,p),this.moveData(e,p,c,!0,i)}this.updateElement(a,l),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},t.prototype.moveData=function(e,t,i,s,n){var o=Mi(i,"."+Um),r=this.getId(e),a=n.updateChildField(n.treeData,n.fields,r,null,null,!0),l=this.getId(t),h=this.getDataPos(this.treeData,this.fields,l),c=this.getId(o);if(1===this.dataType){this.updateField(this.treeData,this.fields,c,"hasChildren",!0);var p=ae(h)?this.treeData.length:s?h:h+1;if(ae(c)&&!this.hasPid)delete a[0][this.fields.parentID];else{var d=this.isNumberTypeId?parseFloat(c):c;te(this.fields.parentID,d,a[0])}if(this.treeData.splice(p,0,a[0]),n.element.id!==this.element.id){var u=n.removeChildNodes(r);p++;for(var m=0,f=u.length;m<f;m++)this.treeData.splice(p,0,u[m]),p++;n.groupedData=n.getGroupedData(n.treeData,n.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,c,a,s?h:h+1)},t.prototype.expandParent=function(e){var t=Ii("div.e-icons",e);t&&t.classList.contains(Wm)&&!0!==this.preventExpand&&this.expandAction(e,t,null);var i,s=Ii("."+Ym,e);(!0===this.preventExpand&&!s&&t&&this.renderChildNodes(e),ae(s=Ii("."+Ym,e))||!0!==this.preventExpand||(s.style.display="none"),ae(s)||!1!==this.preventExpand||(s.style.display="block"),ae(s)&&!0===this.preventExpand)&&(ae(t)&&dp.generateIcon(this.createElement,e,Wm,this.listBaseOption),(i=Ii("div.e-icons",e))&&i.classList.add("e-icon-expandable"),s=dp.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(s),i?Ci([i],qm):dp.generateIcon(this.createElement,e,Wm,this.listBaseOption),e.setAttribute("aria-expanded","false"),s.style.display="none");ae(s)&&(this.trigger("nodeExpanding",this.getExpandEvent(e,null)),ae(t)&&dp.generateIcon(this.createElement,e,qm,this.listBaseOption),(i=Ii("div.e-icons",e))?Ci([i],Wm):(dp.generateIcon(this.createElement,e,qm,this.listBaseOption),Ci([i=Ii("div.e-icons",e)],Wm)),s=dp.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(s),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null)));return s},t.prototype.updateElement=function(e,t){if(t&&0===e.childElementCount){var i=Ii("div.e-icons",t);Ti(e),Ti(i);var s=this.getId(t);this.updateField(this.treeData,this.fields,s,"hasChildren",!1),this.removeExpand(t,!0)}},t.prototype.updateAriaLevel=function(e){var t=this.parents(e,"."+Ym).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(Ii("."+Ym,e),t+1)},t.prototype.updateChildAriaLevel=function(e,t){if(!ae(e))for(var i=e.childNodes,s=0,n=i.length;s<n;s++){var o=i[s];o.setAttribute("aria-level",""+t),this.updateChildAriaLevel(Ii("."+Ym,o),t+1)}},t.prototype.renderVirtualEle=function(e){var t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);var i=this.createElement("div",{className:Qm}),s=this.fullRowSelect?t?1:2:t?0:1;e.target.insertBefore(i,e.target.children[s])},t.prototype.removeVirtualEle=function(){var e=Ii("."+Qm);e&&Ti(e)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(e,t,i,s,n,o,r,a){var l=i?Mi(i,"."+Um):null,h=l?this.getNodeData(l):null,c=t?t.dragLi:n,p=t?t.dragData:null,d=i?this.parents(i,"."+Um):null,u=t.dragLi.parentElement,m=t.dragLi?Mi(u,"."+Um):null,f=null,g=null,v=[Jm,"e-drop-in","e-drop-out","e-no-drop"],y=null,b=!0===a?c:l,C=b?Mi(b,".e-list-parent"):null,S=0,x=null;if(m=t.dragLi&&null===m?Mi(u,".e-treeview"):m,m=!0===a?this.dragParent:m,o)for(;S<4;){if(Ii(".e-icons",o).classList.contains(v[S])){y=v[S];break}S++}if(C){var w=0;for(S=0;S<C.childElementCount;S++){if(w=!0!==a&&C.children[S]===c&&l!==c?++w:w,!0!==a&&C.children[S].classList.contains("e-hover")){g=e.offsetY>=23?S+1:S;break}if(C.children[S]===b){e.offsetY,g=S;break}}g=0!==w?--g:g,x="e-drop-in"==y?"Inside":e.offsetY<7?"Before":"After"}if(i&&(f=0===d.length?null:i.classList.contains(Um)?d[0]:d[1]),l===c&&(f=l),i&&s.offsetHeight<=33&&e.offsetY<s.offsetHeight-10&&e.offsetY>6&&(f=l,!0!==a)){r=++r;var E=f?Ii(".e-list-parent",f):null;if(g=E?E.children.length:0,!(this.fields.dataSource instanceof Ip)&&null===E&&f){var k=f.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,f.getAttribute("data-uid").toString()):null;g=k?k.length:0}}return{cancel:!1,clonedNode:o,event:e,draggedNode:c,draggedNodeData:p,droppedNode:l,droppedNodeData:h,dropIndex:g,dropLevel:r,draggedParentNode:m,dropTarget:f,dropIndicator:y,target:s,position:x}},t.prototype.addFullRow=function(e){var t=this.liList.length;if(e)for(var i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(i=0;i<t;i++){Ti(Ii("."+$m,this.liList[i]))}},t.prototype.createFullRow=function(e){var t=this.createElement("div",{className:$m});e.insertBefore(t,e.childNodes[0])},t.prototype.addMultiSelect=function(e){if(e)for(var t=0,i=Oi('.e-list-item:not([aria-selected="true"])',this.element);t<i.length;t++){i[t].setAttribute("aria-selected","false")}else for(var s=0,n=Oi('.e-list-item[aria-selected="false"]',this.element);s<n.length;s++){n[s].removeAttribute("aria-selected")}},t.prototype.collapseByLevel=function(e,t,i){if(t>0&&!ae(e))for(var s=this.getVisibleNodes(i,e.childNodes),n=0,o=s.length;n<o;n++){var r=s[n],a=Ii("."+qm,Ii("."+Zm,r));ae(a)||this.collapseNode(r,a,null),this.collapseByLevel(Ii("."+Ym,r),t-1,i)}},t.prototype.collapseAllNodes=function(e){for(var t=this.getVisibleNodes(e,Oi("."+qm,this.element)),i=0,s=t.length;i<s;i++){var n=t[i],o=Mi(n,"."+Um);this.collapseNode(o,n,null)}},t.prototype.expandByLevel=function(e,t,i){if(t>0&&!ae(e))for(var s=this.getVisibleNodes(i,e.childNodes),n=0,o=s.length;n<o;n++){var r=s[n],a=Ii("."+Wm,Ii("."+Zm,r));ae(a)||this.expandAction(r,a,null),this.expandByLevel(Ii("."+Ym,r),t-1,i)}},t.prototype.expandAllNodes=function(e){for(var t=this.getVisibleNodes(e,Oi("."+Wm,this.element)),i=0,s=t.length;i<s;i++){var n=t[i],o=Mi(n,"."+Um);this.expandAction(o,n,null,!0)}},t.prototype.getVisibleNodes=function(e,t){var i=Array.prototype.slice.call(t);if(e)for(var s=0;s<i.length;s++)xi(i[s])||(i.splice(s,1),s--);return i},t.prototype.removeNode=function(e){var t=Mi(e,"."+Ym),i=Mi(t,"."+Um);ae(this.nodeTemplateFn)||this.destroyTemplate(e),Ti(e),this.updateElement(t,i),this.updateInstance(),this.removeData(e)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes(),this.allowServerDataBinding=!1,this.updateServerProperties("expand"),this.updateServerProperties("check"),this.updateServerProperties("select"),this.allowServerDataBinding=!0},t.prototype.updateServerProperties=function(e){this.isBlazorPlatform&&("expand"==e?(this.isBlazorExpandedNodes=this.expandedNodes,this.setProperties({expandedNodes:[]},!0)):"check"==e?this.setProperties({checkedNodes:this.checkedNodes},!0):this.setProperties({selectedNodes:this.selectedNodes},!0))},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call(Oi("."+Um,this.element))},t.prototype.updateSelectedNodes=function(){if(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender){this.setProperties({selectedNodes:[]},!0);var e=Oi(".e-active",this.element);this.selectGivenNodes(e)}else if(this.isBlazorPlatform&&this.initialRender){e=Oi(".e-active",this.element);for(var t=0;t<e.length;t++){var i=e[t].getAttribute("data-uid").toString();ae(i)||-1!==this.selectedNodes.indexOf(i)||this.selectedNodes.push(i)}}},t.prototype.updateExpandedNodes=function(){if(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender){this.setProperties({expandedNodes:[]},!0);for(var e=0,t=(i=Oi('[aria-expanded="true"]',this.element)).length;e<t;e++)this.addExpand(i[e])}else if(this.isBlazorPlatform&&this.initialRender)for(var i=Oi('[aria-expanded="true"]',this.element),s=0;s<i.length;s++){var n=i[s].getAttribute("data-uid").toString();ae(n)||-1!==this.expandedNodes.indexOf(n)||this.expandedNodes.push(n)}},t.prototype.removeData=function(e){if(1===this.dataType){var t=new Ip(this.treeData),i=this.getId(e),s={},n=this.isNumberTypeId?parseFloat(i):i;s[this.fields.id]=n,t.remove(this.fields.id,s),this.removeChildNodes(i)}else{i=this.getId(e);this.updateChildField(this.treeData,this.fields,i,null,null,!0)}},t.prototype.removeChildNodes=function(e){var t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(var s=0,n=t.length;s<n;s++){var o=new Ip(this.treeData),r=ee(this.fields.id,t[s]).toString(),a={},l=this.isNumberTypeId?parseFloat(r):r;a[this.fields.id]=l;var h=o.remove(this.fields.id,a);i.push(h[0]),this.removeChildNodes(r)}return i},t.prototype.doGivenAction=function(e,t,i){for(var s=0,n=e.length;s<n;s++){var o=this.getElement(e[s]);if(!ae(o)){var r=Ii("."+t,Ii("."+Zm,o));ae(r)||(i?this.expandAction(o,r,null):this.collapseNode(o,r,null))}}},t.prototype.addGivenNodes=function(e,t,i,s,n){if(0!==e.length){var o=this.getSortedData(e),r=t?parseFloat(t.getAttribute("aria-level"))+1:1;s&&this.updateMapper(r);for(var a,l=dp.createListItemFromJson(this.createElement,o,this.listBaseOption,r),h=(a=n||(t?this.expandParent(t):Ii("."+Ym,this.element))).childNodes[i],c=0;c<l.length;c++)a.insertBefore(l[c],h);this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate();var p=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);for(var d=this.getId(h),u=ae(d)?this.treeData.length:this.getDataPos(this.treeData,this.fields,d),m=0;m<e.length;m++){if(!ae(p)){var f=this.isNumberTypeId?parseFloat(p):p;te(this.fields.parentID,f,e[m])}this.treeData.splice(u,0,e[m]),u++}}else this.addChildData(this.treeData,this.fields,p,e,i);this.finalizeNode(a)}},t.prototype.updateMapper=function(e){var t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)},t.prototype.updateListProp=function(e){var t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(e,t,i){for(var s=null,n=0,o=e.length;n<o;n++){var r=ee(t.id,e[n]);if(e[n]&&r&&r.toString()===i)return n;if("string"!=typeof t.child||ae(ee(t.child,e[n]))){if(this.fields.dataSource instanceof Ip&&!ae(ee("child",e[n]))){var a=ee("child",e[n]);if(null!==(s=this.getDataPos(a,this.getChildMapper(t),i)))break}}else{var l=ee(t.child,e[n]);if(null!==(s=this.getDataPos(l,this.getChildMapper(t),i)))break}}return s},t.prototype.addChildData=function(e,t,i,s,n){var o;if(ae(i)){n=ae(n)?e.length:n;for(var r=0,a=s.length;r<a;r++)e.splice(n,0,s[r]),n++;return o}for(var l=0,h=e.length;l<h;l++){var c=ee(t.id,e[l]);if(e[l]&&c&&c.toString()===i){if("string"==typeof t.child&&e[l].hasOwnProperty(t.child)&&null!==e[l][t.child]||this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName&&e[l].hasOwnProperty("child")){ae(d=ee(p="string"==typeof t.child?t.child:"child",e[l]))&&(d=[]),n=ae(n)?d.length:n;for(r=0,a=s.length;r<a;r++)d.splice(n,0,s[r]),n++}else{var p="string"==typeof t.child?t.child:"child";e[l][p]=s}return!0}if("string"!=typeof t.child||ae(ee(t.child,e[l]))){if(this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName&&!ae(ee("child",e[l]))){var d=ee("child",e[l]);if(void 0!==(o=this.addChildData(d,this.getChildMapper(t),i,s,n)))break}}else{var u=ee(t.child,e[l]);if(void 0!==(o=this.addChildData(u,this.getChildMapper(t),i,s,n)))break}}return o},t.prototype.doDisableAction=function(e){var t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(var s=0,n=i.length;s<n;s++){var o=i[s][this.fields.id].toString();o&&-1===this.disableNode.indexOf(o)&&this.disableNode.push(o);var r=this.getElement(o);r&&(r.setAttribute("aria-disabled","true"),bi([r],"e-disable"))}},t.prototype.doEnableAction=function(e){for(var t=this.nodeType(e),i=0,s=t.length;i<s;i++){var n=this.getElement(t[i]),o=t[i];o&&-1!==this.disableNode.indexOf(o)&&this.disableNode.splice(this.disableNode.indexOf(o),1),n&&(n.removeAttribute("aria-disabled"),Ci([n],"e-disable"))}},t.prototype.nodeType=function(e){for(var t=[],i=0,s=e.length;i<s;i++){var n=void 0;"string"==typeof e[i]?n=e[i]?e[i].toString():null:"object"==typeof e[i]&&(n=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(n)&&t.push(n)}return t},t.prototype.checkValidId=function(e){var t=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(i){return-1!==e.indexOf(i[t.fields.id]?i[t.fields.id].toString():null)});else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var s=this.treeData[i][this.fields.id]?this.treeData[i][this.fields.id].toString():null;-1!==e.indexOf(s)&&this.validArr.push(this.treeData[i]);var n=ee(this.fields.child.toString(),this.treeData[i]);n&&this.filterNestedChild(n,e)}return this.validArr},t.prototype.filterNestedChild=function(e,t){for(var i=0;i<e.length;i++){var s=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(s)&&this.validArr.push(e[i]);var n=ee(this.fields.child.toString(),e[i]);n&&this.filterNestedChild(n,t)}},t.prototype.setTouchClass=function(){var e=Mi(this.element,".e-bigger");this.touchClass=ae(e)?"":"e-small"},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var e=this.selectedNodes,t=0,i=e.length;t<i;t++)this.updateField(this.treeData,this.fields,e[t],"selected",!0);var s=this.expandedNodes;this.isBlazorPlatform&&(s=this.isBlazorExpandedNodes);for(var n=0,o=s.length;n<o;n++)this.updateField(this.treeData,this.fields,s[n],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var r=this.checkedNodes,a=0;for(o=r.length;a<o;a++)this.updateField(this.treeData,this.fields,r[a],"isChecked",!0)}},t.prototype.removeField=function(e,t,i){if(!ae(e)&&!ae(t))for(var s=0,n=e.length;s<n;s++){for(var o=0;o<i.length;o++){var r=this.getMapperProp(t,i[o]);ae(e[s][r])||delete e[s][r]}"string"!=typeof t.child||ae(ee(t.child,e[s]))?this.fields.dataSource instanceof Ip&&!ae(ee("child",e[s]))&&this.removeField(ee("child",e[s]),this.getChildMapper(t),i):this.removeField(ee(t.child,e[s]),this.getChildMapper(t),i)}},t.prototype.getMapperProp=function(e,t){switch(t){case"selected":return ae(e.selected)?"selected":e.selected;case"expanded":return ae(e.expanded)?"expanded":e.expanded;case"isChecked":return ae(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return ae(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}},t.prototype.updateField=function(e,t,i,s,n){if(!ae(i))if(1===this.dataType){var o=this.isNumberTypeId?parseFloat(i):i,r=new Ip(this.treeData).executeLocal((new up).where(t.id,"equal",o,!1));te(this.getMapperProp(t,s),n,r[0])}else this.updateChildField(e,t,i,s,n)},t.prototype.updateChildField=function(e,t,i,s,n,o){var r;if(ae(e))return r;for(var a=0,l=e.length;a<l;a++){var h=ee(t.id,e[a]);if(e[a]&&h&&h.toString()===i)return o?r=e.splice(a,1):(te(this.getMapperProp(t,s),n,e[a]),r=[]),r;if("string"!=typeof t.child||ae(ee(t.child,e[a]))){if(this.fields.dataSource instanceof Ip&&!ae(ee("child",e[a]))){var c=ee("child",e[a]);if(void 0!==(r=this.updateChildField(c,this.getChildMapper(t),i,s,n,o)))break}}else{var p=ee(t.child,e[a]);if(void 0!==(r=this.updateChildField(p,this.getChildMapper(t),i,s,n,o)))break}}return r},t.prototype.triggerEvent=function(){this.updateTemplateForBlazor(),this.renderReactTemplates();var e={data:this.treeData};this.trigger("dataSourceChanged",e)},t.prototype.updateBlazorTemplate=function(){Kt(this.element.id+"nodeTemplate","NodeTemplate",this,!1)},t.prototype.clientUpdateInitial=function(){this.blazorInitialRender=!0},t.prototype.wireInputEvents=function(e){Ct.add(e,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.disabled){var i=this;this.touchEditObj=new nn(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(e){if(e){var t=this;this.touchClickObj=new nn(this.element,{tap:function(e){t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new nn(this.element,{tap:function(e){("Click"===t.expandOnType||"DblClick"===t.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&Ct.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(e){e.preventDefault()},t.prototype.wireEvents=function(){Ct.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),Ct.add(this.element,"focus",this.focusIn,this),Ct.add(this.element,"blur",this.focusOut,this),Ct.add(this.element,"mouseover",this.onMouseOver,this),Ct.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Qs(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){Ct.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),Ct.remove(this.element,"focus",this.focusIn),Ct.remove(this.element,"blur",this.focusOut),Ct.remove(this.element,"mouseover",this.onMouseOver),Ct.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},t.prototype.parents=function(e,t){for(var i=[],s=e.parentNode;!ae(s);)Hi(s,t)&&i.push(s),s=s.parentNode;return i},t.prototype.isDoubleTapped=function(e){var t,i=e.originalEvent.target;return i&&e.tapCount&&(1===e.tapCount?this.firstTap=Mi(i,"."+Um):2===e.tapCount&&(t=Mi(i,"."+Um))),this.firstTap===t},t.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!ae(i);){if(i===e)return!0;i=i.parentNode}return!1},t.prototype.showSpinner=function(e){bi([e],Xm),ga({target:e,width:bt.isDevice?16:14},this.createElement),Ia(e)},t.prototype.hideSpinner=function(e){Aa(e),e.innerHTML="",Ci([e],Xm)},t.prototype.setCheckedNodes=function(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)},t.prototype.setValidCheckedNode=function(e){if(1===this.dataType){var t=this.fields,i=new Ip(this.treeData).executeLocal((new up).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){for(var s=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,n=this.getChildNodes(this.treeData,s),o=0,r=0;r<n.length;r++){var a=n[r][this.fields.id].toString();-1!==this.checkedNodes.indexOf(a)&&o++}o===n.length&&-1===this.checkedNodes.indexOf(s)&&s&&this.checkedNodes.push(s)}}else if(2===this.dataType)for(var l=0;l<this.treeData.length;l++){if((this.treeData[l][this.fields.id]?this.treeData[l][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}var h=ee(this.fields.child.toString(),this.treeData[l]);h&&this.setChildCheckState(h,e,this.treeData[l])}},t.prototype.setChildCheckState=function(e,t,i){var s,n=0;if(1===this.dataType){i&&(s=i[this.fields.id]?i[this.fields.id].toString():null);for(var o=0;o<e.length;o++){var r=e[o][this.fields.id]?e[o][this.fields.id].toString():null;i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r),r===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(a=this.getChildNodes(this.treeData,r))&&this.setChildCheckState(a,t,i)}}else{i&&(s=i[this.fields.id]?i[this.fields.id].toString():"");for(o=0;o<e.length;o++){var a,l=e[o][this.fields.id]?e[o][this.fields.id].toString():"";i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),l===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(a=ee(this.fields.child.toString(),e[o]))&&this.setChildCheckState(a,t,e[o]),-1!==this.checkedNodes.indexOf(l)&&this.autoCheck&&n++,n===e.length&&-1===this.checkedNodes.indexOf(s)&&this.autoCheck&&this.checkedNodes.push(s)}}},t.prototype.setIndeterminate=function(e){for(var t=0;t<e.length;t++)this.setValidCheckedNode(e[t])},t.prototype.updatePosition=function(e,t,i,s){if(1===this.dataType){var n=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(n,1,t),i){this.removeChildNodes(e);for(var o=0;o<s.length;o++)this.treeData.splice(n,0,s[o]),n++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)},t.prototype.updateChildPosition=function(e,t,i,s,n){for(var o,r=0,a=e.length;r<a;r++){var l=ee(t.id,e[r]);if(e[r]&&l&&l.toString()===i)return e[r]=s[0],!0;if("string"!=typeof t.child||ae(ee(t.child,e[r]))){if(this.fields.dataSource instanceof Ip&&!ae(ee("child",e[r]))){var h=ee("child",e[r]);if(void 0!==(o=this.updateChildPosition(h,this.getChildMapper(t),i,s,n)))break}}else{var c=ee(t.child,e[r]);if(void 0!==(o=this.updateChildPosition(c,this.getChildMapper(t),i,s,n)))break}}return o},t.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},t.prototype.crudOperation=function(e,t,i,s,n,o,r){var a,l=this,h=this.fields.dataSource,c=[],p=this.getQuery(this.fields),d=this.fields.id,u={addedRecords:[],deletedRecords:[],changedRecords:[]},m=[];t?m=this.nodeType(t):i&&("string"==typeof i?m[0]=i.toString():"object"==typeof i&&(m[0]=i.getAttribute("data-uid").toString()));for(var f=0,g=m.length;f<g;f++){if(!ae(this.getElement(m[f]))){var v=this.getNodeObject(m[f]);c.push(v)}}switch(e){case"delete":1==t.length?a=h.remove(d,c[0],p.fromTable,p):(u.deletedRecords=c,a=h.saveChanges(u,d,p.fromTable,p)),a.then(function(e){return l.deleteSuccess(m)}).catch(function(e){return l.dmFailure(e)});break;case"update":c[0][this.fields.text]=s,(a=h.update(d,c[0],p.fromTable,p)).then(function(e){return l.editSucess(i,s,r)}).catch(function(e){return l.dmFailure(e,i,r)});break;case"insert":if(1==n.length)a=h.insert(n[0],p.fromTable,p);else{var y=[];for(f=0,g=n.length;f<g;f++)y.push(n[f]);u.addedRecords=y,a=h.saveChanges(u,d,p.fromTable,p)}a.then(function(e){var t=l.getElement(i);l.addSuccess(n,t,o),l.preventExpand=!1}).catch(function(e){return l.dmFailure(e)})}},t.prototype.deleteSuccess=function(e){for(var t=0,i=e.length;t<i;t++){var s=this.getElement(e[t]);ae(s)||this.removeNode(s)}1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()},t.prototype.editSucess=function(e,t,i){var s=this.getElement(e),n=Ii("."+Gm,s);this.appendNewText(s,n,t,i)},t.prototype.addSuccess=function(e,t,i){var s,n=t?t.querySelector(".e-icons"):null,o=this;t&&n&&n.classList.contains(Wm)&&null===t.querySelector("."+Ym)?o.renderChildNodes(t,null,function(){s=t.querySelector("."+Ym),o.addGivenNodes(e,t,i,!0,s),o.triggerEvent()}):(this.addGivenNodes(e,t,i,!0),this.triggerEvent())},t.prototype.dmFailure=function(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})},t.prototype.updatePreviousText=function(e,t){var i=this.getElement(e),s=Ii("."+Gm,i);this.updateText(i,s,this.oldText,t)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var n=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(n,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.isBlazorPlatform||this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.isBlazorPlatform||this.setProperties({expandedNodes:ae(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.blazorInitialRender||this.reRenderNodes(),this.blazorInitialRender=!1,this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect);break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var o=this.element.querySelectorAll("li"),r=0;r<o.length;)"true"!==o[r].getAttribute("aria-expanded")&&this.renderChildNodes(o[r],!0,null,!0),r++;this.onLoaded=!0}break;case"nodeTemplate":this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}},t.prototype.destroy=function(){Zt(this.element.id+"nodeTemplate"),this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.isBlazorPlatform&&(this.ulElement=this.element.querySelector(".e-list-parent.e-ul")),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.isBlazorPlatform||e.prototype.destroy.call(this)},t.prototype.addNodes=function(e,t,i,s){if(!ae(e)){e=JSON.parse(JSON.stringify(e));var n=this.getElement(t);if(this.preventExpand=s,this.fields.dataSource instanceof Ip&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName)this.isOffline?this.addSuccess(e,n,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,n,i);else{if(n)this.addGivenNodes(e,n,i);else{e=this.getSortedData(e);for(var o=0;o<e.length;o++){var r=ee(this.fields.parentID,e[o]);n=r?this.getElement(r.toString()):r,this.addGivenNodes([e[o]],n,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&n&&this.ensureParentCheckState(n),(this.fields.dataSource instanceof Ip==!1||this.fields.dataSource instanceof Ip&&"BlazorAdaptor"===this.fields.dataSource.adaptorName)&&(this.preventExpand=!1,this.triggerEvent())}},t.prototype.beginEdit=function(e){var t=this.getElement(e);ae(t)||this.disabled||this.createTextbox(t,null)},t.prototype.checkAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)},t.prototype.collapseAll=function(e,t,i){ae(e)?t>0?this.collapseByLevel(Ii("."+Ym,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,qm,!1)},t.prototype.disableNodes=function(e){ae(e)||this.doDisableAction(e)},t.prototype.enableNodes=function(e){ae(e)||this.doEnableAction(e)},t.prototype.ensureVisible=function(e){var t=this.getElement(e);if(!ae(t)){var i=this.parents(t,"."+Um);this.expandAll(i),setTimeout(function(){t.scrollIntoView(!0)},450)}},t.prototype.expandAll=function(e,t,i){ae(e)?t>0?this.expandByLevel(Ii("."+Ym,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,Wm,!0)},t.prototype.getAllCheckedNodes=function(){return this.checkedNodes},t.prototype.getDisabledNodes=function(){return this.disableNode},t.prototype.getNode=function(e){var t=this.getElement(e);return this.getNodeData(t,!0)},t.prototype.getTreeData=function(e){var t=this.getId(e);if(this.updatePersistProp(),ae(t))return this.treeData;var i=this.getNodeObject(t);return ae(i)?[]:[i]},t.prototype.moveNodes=function(e,t,i,s){var n=this.getElement(t);if(!ae(n)){for(var o=0;o<e.length;o++){var r=this.getElement(e[o]);ae(r)||n.isSameNode(r)||this.isDescendant(r,n)||(this.preventExpand=s,this.dropAsChildNode(r,n,this,i))}this.fields.dataSource instanceof Ip==!1&&(this.preventExpand=!1),this.triggerEvent()}},t.prototype.refreshNode=function(e,t){if(!ae(e)&&!ae(t)){var i,s=!1;if(1==this.dataType&&t.length>1)s=!0;else if(2==this.dataType&&1===t.length){ae(ee(this.fields.child.toString(),t[0]))||(s=!0)}var n,o,r=this.getElement(e);if(i=r?r.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&s){for(var a=0;a<t.length;a++)if(ae(t[a][this.fields.parentID])){o=t[a],t.splice(a,1);break}n=re({},this.refreshData,o)}else n=re({},this.refreshData,t[0]);if(ae(r))this.updatePosition(i,n,s,t);else{this.isRefreshed=!0;var l=parseFloat(r.getAttribute("aria-level")),h=dp.createListItemFromJson(this.createElement,[n],this.listBaseOption,l),c=Ii("."+Ym,r),p=ee(this.fields.child.toString(),n);if(s&&c||s&&!ae(p)){var d=r.parentElement,u=Array.prototype.indexOf.call(d.childNodes,r);Li(r),d.insertBefore(h[0],d.childNodes[u]),this.updatePosition(i,n,s,t),s&&c&&this.expandAll([i])}else{var m=Ii("."+Zm,r),f=Ii("."+Zm,h[0]),g=Ii("div.e-icons",m),v=Ii("div.e-icons",f);g&&v&&(v.classList.contains(Wm)&&g.classList.contains(qm)?(Ci([v],Wm),bi([v],qm)):v.classList.contains(qm)&&g.classList.contains(Wm)?(Ci([v],qm),bi([v],Wm)):g.classList.contains("interaction")&&bi([v],"interaction")),Li(m);var y=Ii("."+$m,r);y.parentNode.insertBefore(f,y.nextSibling),this.updatePosition(i,n,s,t)}if(r=this.getElement(e),n[this.fields.tooltip]&&r.setAttribute("title",n[this.fields.tooltip]),n.hasOwnProperty(this.fields.htmlAttributes)&&n[this.fields.htmlAttributes]){var b={};oe(b,n[this.fields.htmlAttributes]),b.class?(bi([r],b.class.split(" ")),delete b.class):Di(r,b)}-1!==this.selectedNodes.indexOf(i)&&(r.setAttribute("aria-selected","true"),bi([r],"e-active")),this.isRefreshed=!1,this.triggerEvent()}}},t.prototype.removeNodes=function(e){ae(e)||(this.fields.dataSource instanceof Ip&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("delete",e):this.deleteSuccess(e))},t.prototype.updateNode=function(e,t){var i=this;if(!ae(e)&&!ae(t)&&this.allowEditing){var s=this.getElement(e);if(!ae(s)){var n=Ii("."+Gm,s);this.updateOldText(s);var o=this.getEditEvent(s,null,null);this.trigger("nodeEditing",o,function(o){o.cancel||(i.fields.dataSource instanceof Ip&&!i.isOffline&&"BlazorAdaptor"!==i.fields.dataSource.adaptorName?i.crudOperation("update",null,e,t,null,null,!1):i.appendNewText(s,n,t,!1))})}}},t.prototype.uncheckAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)},_m([os(!1)],t.prototype,"allowDragAndDrop",void 0),_m([os(!1)],t.prototype,"allowEditing",void 0),_m([os(!1)],t.prototype,"allowMultiSelection",void 0),_m([rs({},rf)],t.prototype,"animation",void 0),_m([os()],t.prototype,"checkedNodes",void 0),_m([os("")],t.prototype,"cssClass",void 0),_m([os(!1)],t.prototype,"disabled",void 0),_m([os(null)],t.prototype,"dragArea",void 0),_m([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),_m([os(!1)],t.prototype,"enablePersistence",void 0),_m([os()],t.prototype,"expandedNodes",void 0),_m([os("Auto")],t.prototype,"expandOn",void 0),_m([rs({},nf)],t.prototype,"fields",void 0),_m([os(!0)],t.prototype,"fullRowSelect",void 0),_m([os(!0)],t.prototype,"loadOnDemand",void 0),_m([os()],t.prototype,"locale",void 0),_m([os()],t.prototype,"nodeTemplate",void 0),_m([os()],t.prototype,"selectedNodes",void 0),_m([os("None")],t.prototype,"sortOrder",void 0),_m([os(!1)],t.prototype,"showCheckBox",void 0),_m([os(!0)],t.prototype,"autoCheck",void 0),_m([os(!1)],t.prototype,"fullRowNavigable",void 0),_m([cs()],t.prototype,"actionFailure",void 0),_m([cs()],t.prototype,"created",void 0),_m([cs()],t.prototype,"dataBound",void 0),_m([cs()],t.prototype,"dataSourceChanged",void 0),_m([cs()],t.prototype,"drawNode",void 0),_m([cs()],t.prototype,"destroyed",void 0),_m([cs()],t.prototype,"keyPress",void 0),_m([cs()],t.prototype,"nodeChecked",void 0),_m([cs()],t.prototype,"nodeChecking",void 0),_m([cs()],t.prototype,"nodeClicked",void 0),_m([cs()],t.prototype,"nodeCollapsed",void 0),_m([cs()],t.prototype,"nodeCollapsing",void 0),_m([cs()],t.prototype,"nodeDragging",void 0),_m([cs()],t.prototype,"nodeDragStart",void 0),_m([cs()],t.prototype,"nodeDragStop",void 0),_m([cs()],t.prototype,"nodeDropped",void 0),_m([cs()],t.prototype,"nodeEdited",void 0),_m([cs()],t.prototype,"nodeEditing",void 0),_m([cs()],t.prototype,"nodeExpanded",void 0),_m([cs()],t.prototype,"nodeExpanding",void 0),_m([cs()],t.prototype,"nodeSelected",void 0),_m([cs()],t.prototype,"nodeSelecting",void 0),t=i=_m([ps],t)}(Ns),lf=(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),hf=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},cf="e-input-group-icon e-ddt-icon e-icons",pf="e-show-chip",df="e-show-clear",uf="e-chip-input",mf="e-icon-hide",ff="e-no-data",gf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lf(t,e),hf([os("child")],t.prototype,"child",void 0),hf([os([])],t.prototype,"dataSource",void 0),hf([os("expanded")],t.prototype,"expanded",void 0),hf([os("hasChildren")],t.prototype,"hasChildren",void 0),hf([os("htmlAttributes")],t.prototype,"htmlAttributes",void 0),hf([os("iconCss")],t.prototype,"iconCss",void 0),hf([os("imageUrl")],t.prototype,"imageUrl",void 0),hf([os("parentValue")],t.prototype,"parentValue",void 0),hf([os(null)],t.prototype,"query",void 0),hf([os("selected")],t.prototype,"selected",void 0),hf([os(null)],t.prototype,"tableName",void 0),hf([os("text")],t.prototype,"text",void 0),hf([os("tooltip")],t.prototype,"tooltip",void 0),hf([os("value")],t.prototype,"value",void 0),t}(Ls),vf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lf(t,e),hf([os(!1)],t.prototype,"autoCheck",void 0),hf([os("Auto")],t.prototype,"expandOn",void 0),hf([os(!1)],t.prototype,"loadOnDemand",void 0),t}(Ls),yf=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.filterTimer=null,s.isFilteredData=!1,s.isFilterRestore=!1,s.selectedData=[],s.filterDelayTime=300,s}return lf(t,e),t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-tree"},t.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.isBlazorPlatForm=ye(),this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate",this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},t.prototype.render=function(){this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,ae(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),ae(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=Na.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[cf]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains("e-input-group")||this.inputWrapper.classList.add("e-input-group"),this.showDropDownIcon&&this.inputWrapper.classList.add("e-show-dd-icon"),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.setAttributes(),this.updateDataAttribute(),this.setHTMLAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content",attrs:{tabindex:"0"}}),this.popupDiv.classList.add("e-dropdown"),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),this.popupDiv.style.display="none",this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof Ip,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),this.wrapText||(this.overFlowWrapper=this.createElement("span",{className:"e-overflow "+mf}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&bi([this.overFlowWrapper],"e-show-text"))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var e=Ii(".e-list-parent",this.treeObj.element);e&&e.getAttribute("aria-multiselectable")&&e.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate,this.renderComplete()},t.prototype.ensureAutoCheck=function(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)},t.prototype.hideCheckAll=function(e){var t=ae(this.popupEle)?null:this.popupEle.querySelector(".e-selectall-parent");ae(t)||(e&&!t.classList.contains("e-hide-selectall")?bi([t],"e-hide-selectall"):!e&&t.classList.contains("e-hide-selectall")&&Ci([t],"e-hide-selectall"))},t.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:"e-filter-wrap"});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),wi([this.filterContainer],this.popupEle),this.filterObj=new op({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")},t.prototype.filterChangeHandler=function(e){var t=this;ae(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){t.filterHandler(e.value,e.event)},this.filterDelayTime))},t.prototype.filterHandler=function(e,t){var i=this;this.isFilteredData||(this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields),n={cancel:!1,preventDefaultAction:!1,event:t,text:e,fields:s};this.trigger("filtering",n,function(t){if(!t.cancel){var s=!1,n=void 0;if(i.isFilteredData=!0,""===e?(i.isFilteredData=!1,i.isFilterRestore=!0,n=i.cloneFields(i.fields)):t.preventDefaultAction?n=t.fields:1===i.treeDataType?n=i.selfReferencefilter(e,t.fields):i.fields.dataSource instanceof Ip?s=!0:n=i.nestedFilter(e,t.fields),i.hideCheckAll(i.isFilteredData),s)return;i.treeObj.fields=i.getTreeFields(n),i.treeObj.dataBind()}})},t.prototype.nestedFilter=function(e,t){for(var i=[],s=0;s<this.treeData.length;s++){var n=this.nestedChildFilter(e,this.treeData[s]);ae(n)||i.push(n)}return t.dataSource=i,t},t.prototype.nestedChildFilter=function(e,t){var i=t[this.fields.child];if(ae(i))return this.isMatchedNode(e,t)?t:null;for(var s=[],n=0;n<i.length;n++){var o=this.nestedChildFilter(e,i[n]);ae(o)||s.push(o)}return 0!==s.length?(t[this.fields.child]=s,t):(t[this.fields.child]=null,this.isMatchedNode(e,t)?t:null)},t.prototype.selfReferencefilter=function(e,t){for(var i=[],s=[],n=0;n<this.treeData.length;n++)this.isMatchedNode(e,this.treeData[n])&&i.push(this.treeData[n]);for(n=0;n<i.length;n++)if(-1===s.indexOf(i[n])){s.push(i[n]);for(var o=i[n][this.fields.parentValue];!ae(o);){for(var r=null,a=0;a<this.treeData.length;a++){var l=this.treeData[a][this.fields.value];if(!ae(l)&&l===o){r=this.treeData[a];break}}if(ae(r)||-1!==s.indexOf(r))break;s.push(r),o=r[this.fields.parentValue]}}return t.dataSource=s,t},t.prototype.isMatchedNode=function(e,t){var i=t[this.fields.text];return this.ignoreCase&&(i=i.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(i=gp.ignoreDiacritics(i),e=gp.ignoreDiacritics(e)),"StartsWith"===this.filterType?i.slice(0,e.length)===e:"EndsWith"===this.filterType?i.slice(-e.length)===e:-1!==i.indexOf(e)},t.prototype.wireEvents=function(){Ct.add(this.inputWrapper,"mouseup",this.dropDownClick,this),Ct.add(this.inputWrapper,"focus",this.focusIn,this),Ct.add(this.inputWrapper,"blur",this.focusOut,this),Ct.add(this.inputWrapper,"mousemove",this.mouseIn,this),Ct.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),Ct.add(this.overAllClear,"mousedown",this.clearAll,this),Ct.add(window,"resize",this.windowResize,this);var e=Mi(this.inputWrapper,"form");e&&Ct.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Qs(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireTreeEvents=function(){this.keyboardModule=new Qs(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new Qs(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){Ct.remove(this.inputWrapper,"mouseup",this.dropDownClick),Ct.remove(this.inputWrapper,"focus",this.focusIn),Ct.remove(this.inputWrapper,"blur",this.focusOut),Ct.remove(this.inputWrapper,"mousemove",this.mouseIn),Ct.remove(this.inputWrapper,"mouseout",this.onMouseLeave),Ct.remove(this.overAllClear,"mousedown",this.clearAll),Ct.remove(window,"resize",this.windowResize);var e=Mi(this.inputWrapper,"form");e&&Ct.remove(e,"reset",this.resetValueHandler)},t.prototype.dropDownClick=function(e){this.enabled&&!this.readonly&&(this.isClearButtonClick?this.isClearButtonClick=!1:(!this.wrapText&&e.target.classList.contains("e-chips-close")&&this.removeChip(e),this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()))},t.prototype.mouseIn=function(){!this.enabled&&this.readonly||this.showOverAllClear()},t.prototype.onMouseLeave=function(){this.inputFocus||(bi([this.overAllClear],mf),Ci([this.inputWrapper],df))},t.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},t.prototype.focusOut=function(e){if(this.enabled&&!this.readonly&&this.inputFocus&&(!bt.isIE&&"edge"!==bt.info.name||e.target!==this.inputWrapper)){var t=e.relatedTarget;t===this.inputEle||!ae(t)||e.target===this.inputWrapper&&this.isPopupOpen||this.onFocusOut(e)}},t.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=Ii(".e-clear-icon",this.inputWrapper).offsetWidth,bi([this.overAllClear],mf),Ci([this.inputWrapper],df)),Ci([this.inputWrapper],["e-input-focus"]),this.allowMultiSelection||this.showCheckBox){var t=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(bi([this.chipWrapper],mf),Ci([this.inputWrapper],pf),Ci([this.inputEle],uf)),!this.wrapText&&t&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")},t.prototype.updateView=function(){(this.showCheckBox||this.allowMultiSelection)&&("Box"!==this.mode?bi([this.inputWrapper,this.overFlowWrapper],"e-show-text"):bi([this.inputWrapper],pf),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&bi([this.chipWrapper],mf),bi([this.inputEle],uf),this.updateOverFlowView(),this.ensurePlaceHolder()))},t.prototype.triggerChangeEvent=function(e){if((!this.ddtCompareValues(this.oldValue,this.value)||this.isChipDelete)&&!this.removeValue){var t={e:e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element};this.trigger("change",t),this.oldValue=this.value}},t.prototype.ddtCompareValues=function(e,t){if(null===e||null===t)return null===e?t===e:0===e.length&&t===e;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.prototype.focusIn=function(e){if(this.enabled&&!this.readonly&&!this.inputFocus){this.showOverAllClear(),this.inputFocus=!0,bi([this.inputWrapper],["e-input-focus"]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(Ci([this.chipWrapper],mf),bi([this.inputEle],uf)),bi([this.inputWrapper],pf),this.popupObj&&this.popupObj.refreshPosition()),this.wrapText||(this.inputWrapper.contains(this.overFlowWrapper)&&bi([this.overFlowWrapper],mf),"Delimiter"===this.mode?(Ci([this.inputWrapper],pf),Ci([this.inputEle],uf)):bi([this.inputWrapper],pf),Ci([this.inputWrapper],"e-show-text"),this.ensurePlaceHolder()));var t={isInteracted:!!e,event:e};this.trigger("focus",t)}},t.prototype.treeAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(i){if(i.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":t.inputWrapper.focus(),e.preventDefault(),t.isPopupOpen&&t.hidePopup();break;case"tab":case"shiftTab":t.isPopupOpen&&t.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.showCheckBox||(t.isValueChange=!0,t.keyEventArgs=e);break;case"space":t.isValueChange=!0,t.keyEventArgs=e;break;case"ctrlA":t.allowMultiSelection&&t.selectAll(!0)}})},t.prototype.keyActionHandler=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(i){if(!i.cancel)switch(e.action){case"escape":case"altUp":case"shiftTab":case"tab":t.isPopupOpen&&t.hidePopup();break;case"altDown":t.isPopupOpen||(t.showPopup(),e.preventDefault());break;case"moveDown":t.showSelectAll&&t.showCheckBox&&t.checkAllParent.focus()}})},t.prototype.checkAllAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(i){if(!i.cancel)switch(e.action){case"space":t.clickHandler(e);break;case"moveDown":t.treeObj.element.focus()}})},t.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},t.prototype.resetValueHandler=function(e){var t=Mi(this.inputWrapper,"form");t&&e.target===t&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},t.prototype.getAriaAttributes=function(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}},t.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove("e-total-count"),Ci([this.overFlowWrapper],mf),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=void 0,n=1,o=void 0,r=void 0,a=0;this.overFlowWrapper.innerHTML="";this.l10n=new Js(this.getLocaleName(),{overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},this.locale);var l=this.l10n.getConstant("overflowCountTemplate"),h=this.createElement("span",{className:"e-remain"}),c=Xt(l),p=Xt(this.l10n.getConstant("totalCountTemplate"));h.appendChild(c({count:this.value.length},this,"overflowCountTemplate",null,!this.isStringTemplate)[0]),this.overFlowWrapper.appendChild(h);var d=h.offsetWidth;if(Li(h),this.showDropDownIcon&&(a=Ii(".e-ddt-icon",this.inputWrapper).offsetWidth),!ae(this.value))if("Box"!==this.mode)for(var u=0;!ae(this.value[u]);u++){if(e+=0===u?"":this.delimiterChar+" ",e+=i=this.getOverflowVal(u),i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=e,o=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,o+a+this.clearIconWidth>t){for(void 0!==s&&""!==s&&(i=s,u=n+1),this.overFlowWrapper.innerHTML=i,r=this.value.length-u,o=this.overFlowWrapper.offsetWidth;o+d+a+this.clearIconWidth>=t&&0!==o&&""!==this.overFlowWrapper.innerHTML;){var m=this.overFlowWrapper.innerHTML.split(this.delimiterChar);m.pop(),this.overFlowWrapper.innerHTML=m.join(this.delimiterChar),r++,o=this.overFlowWrapper.offsetWidth}break}o+d+a+this.clearIconWidth<=t?(s=e,n=u):0===u&&(s="",n=-1)}else{bi([this.chipWrapper],mf);for(var f=Oi(".e-chips",this.chipWrapper.cloneNode(!0)),g=0;g<f.length;g++){if(i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(f[g]),e=this.overFlowWrapper.innerHTML,o=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,o+a+this.clearIconWidth>t){for(void 0!==s&&""!==s&&(i=s,g=n+1),this.overFlowWrapper.innerHTML=i,r=this.value.length-g,o=this.overFlowWrapper.offsetWidth;o+d+a+this.clearIconWidth>=t&&0!==o&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),r++,o=this.overFlowWrapper.offsetWidth;break}o+d+a+this.clearIconWidth<=t?(s=e,n=g):0===g&&(s="",n=-1)}}if(r>0){var v=t-(a+this.clearIconWidth);this.overFlowWrapper.appendChild(this.updateRemainTemplate(h,r,c,p,v))}"Box"!==this.mode||this.overFlowWrapper.classList.contains("e-total-count")||bi([h],"e-wrap-count")}else this.overFlowWrapper.innerHTML="",bi([this.overFlowWrapper],mf);this.updateDelimMode()},t.prototype.updateRemainTemplate=function(e,t,i,s,n){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.appendChild(!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?s({count:t},this,"totalCountTemplate",null,!this.isStringTemplate)[0]:i({count:t},this,"overflowCountTemplate",null,!this.isStringTemplate)[0]),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(bi([this.overFlowWrapper],"e-total-count"),Ci([this.overFlowWrapper],"e-wrap-count")):Ci([this.overFlowWrapper],"e-total-count"),e},t.prototype.getOverflowVal=function(e){var t=this.getSelectedData(this.value[e]);return ee(this.treeSettings.loadOnDemand?this.fields.text:"text",t)},t.prototype.updateDelimMode=function(){"Box"!==this.mode?Ii(".e-remain",this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains("e-total-count")?(bi([this.overFlowWrapper],"e-wrap-count"),bi([this.overFlowWrapper],"e-show-text")):(this.overFlowWrapper.classList.remove("e-wrap-count"),Ci([this.overFlowWrapper],"e-wrap-count")):Ii(".e-remain",this.overFlowWrapper)&&this.overFlowWrapper.classList.remove("e-wrap-count")},t.prototype.createHiddenElement=function(){this.allowMultiSelection||this.showCheckBox?this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-ddt-hidden",tabindex:"-1",multiple:""}}):this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:"e-ddt-hidden"}}),wi([this.hiddenElement],this.inputWrapper),this.validationAttribute()},t.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),bi([this.overAllClear],mf),Ci([this.inputWrapper],df),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var t=["required","aria-required","form"],i=0;i<t.length;i++){var s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}},t.prototype.createChip=function(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),bi([this.inputWrapper],pf),this.getValidMode()&&null!==this.value?bi([this.inputEle],uf):null===this.value&&bi([this.chipWrapper],mf))},t.prototype.getValidMode=function(){return!(!this.allowMultiSelection&&!this.showCheckBox)&&("Box"===this.mode||!("Default"!==this.mode||!this.inputFocus))},t.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:"e-selectall-parent",attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="";var e=ae(Mi(this.element,".e-bigger"))?"":"e-small";this.checkBoxElement=fo(this.createElement,!0,{cssClass:e}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),Ct.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},t.prototype.clickHandler=function(e){var t;if(t=e.currentTarget&&e.currentTarget.classList.contains("e-selectall-parent")?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=Mi(t,".e-checkbox-wrapper"),!ae(this.checkWrapper)){var i=Ii(".e-frame",this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains("e-check")?"uncheck":"check",e)}e.preventDefault()},t.prototype.changeState=function(e,t,i){var s,n=e.getElementsByClassName("e-frame")[0];"check"!==t||n.classList.contains("e-check")?"uncheck"===t&&n.classList.contains("e-check")&&(n.classList.remove("e-check"),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)):(n.classList.add("e-check"),s="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),ae(s="check"===t?"true":"false")||e.setAttribute("aria-checked",s)},t.prototype.setLocale=function(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){var t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var i=0,s=Xt(t)({},this,e?"unSelectAllText":"selectAllText",null,!this.isStringTemplate);i<s.length;i++){var n=s[i];this.selectAllSpan.textContent=n.textContent}}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},t.prototype.setAttributes=function(){this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),Di(this.inputWrapper,this.getAriaAttributes())},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i)this.inputWrapper.classList.add(this.htmlAttributes[i]);else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"!==i||ae(this.htmlAttributes[i]))if("style"===i)this.inputWrapper.setAttribute("style",this.htmlAttributes[i]);else{0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(i)>-1?"placeholder"===i?Na.setPlaceholder(this.htmlAttributes[i],this.inputEle):this.inputEle.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.setAttribute(i,this.htmlAttributes[i])}else this.setProperties({readonly:!0},!0),this.dataBind()}},t.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,t=["class","style","id","type"],i={},s=0;s<this.element.attributes.length;s++)-1===t.indexOf(this.element.attributes[s].name)&&"readonly"!==this.element.attributes[s].name&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));re(i,e,i),this.setProperties({htmlAttributes:i},!0)},t.prototype.showOverAllClear=function(){this.enabled&&!this.readonly&&(this.overAllClear&&(!!this.value&&!!this.value.length&&this.showClearButton?(Ci([this.overAllClear],mf),bi([this.inputWrapper],df)):(bi([this.overAllClear],mf),Ci([this.inputWrapper],df))))},t.prototype.setTreeValue=function(){if(null!==this.value&&0!==this.value.length){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var t=0;t<this.value.length;t++)ae(e=this.treeObj.getTreeData(this.value[t])[0])&&this.value.splice(this.value.indexOf(this.value[t]),1);0!==this.value.length&&this.setValidValue()}else ae(e=this.treeObj.getTreeData(this.value[0])[0])?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},t.prototype.setTreeText=function(){if((null===this.value||this.isInitialized)&&null!==this.text){var e=void 0,t=[];if(this.showCheckBox||this.allowMultiSelection){for(var i=this.text.split(this.delimiterChar),s=0;s<i.length;s++)ae(e=this.getItems(i[s]))||t.push(e[this.fields.value].toString());0!==t.length?(this.oldValue=this.value,this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else ae(e=this.getItems(this.text))?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},t.prototype.setSelectedValue=function(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),te("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))},t.prototype.setValidValue=function(){if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.treeObj.checkedNodes=this.value.slice(),te("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{Na.setValue(this.text,this.inputEle,this.floatLabelType);var e=this.value[0].toString();this.treeObj.selectedNodes[0]!==e&&te("selectedNodes",[e],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()},t.prototype.getItems=function(e){var t;if(1===this.treeDataType)for(var i=0;i<this.treeItems.length;i++){var s=ee(this.fields.text,this.treeItems[i]);if(!ae(this.treeItems[i])&&!ae(s)&&s===e){t=this.treeItems[i];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t},t.prototype.getNestedItems=function(e,t,i){for(var s,n=0,o=e.length;n<o;n++){var r=ee(this.fields.text,e[n]);if(e[n]&&r&&r.toString()===i)return e[n];if("string"!=typeof t.child||ae(ee(t.child,e[n]))){if(this.fields.dataSource instanceof Ip&&!ae(ee("child",e[n]))){if(void 0!==(s=this.getNestedItems(ee("child",e[n]),this.getChildType(t),i)))break}}else{var a=ee(t.child,e[n]);if(void 0!==(s=this.getNestedItems(a,this.getChildType(t),i)))break}}return s},t.prototype.getChildType=function(e){return"string"==typeof e.child||ae(e.child)?e:e.child},t.prototype.renderTree=function(){this.treeObj=new af({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.appendTo("#"+this.tree.id)},t.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var t=!1;this.trigger("beforeOpen",{cancel:!1},function(i){if(i.cancel?t=!0:(bi([e.inputWrapper],["e-icon-anim"]),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddt e-popup "+(null!=e.cssClass?e.cssClass:"")}),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):e.popupEle=e.popupObj.element),e.isFirstRender&&!t&&(wi([e.popupDiv],e.popupEle),e.popupDiv.style.display="block",e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(ff)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1,e.hasTemplate&&e.portals&&(e.portals=e.portals.concat(e.treeObj.portals),e.renderReactTemplates())),!t){if(Di(e.inputWrapper,{"aria-expanded":"true"}),e.popupObj.show(null,1e3===e.zIndex?e.inputEle:null),e.popupEle.style.display="block",e.updatePopupHeight(),e.popupObj.refreshPosition(),e.showCheckBox&&e.showSelectAll||e.popupDiv.classList.contains(ff)||!(e.treeItems.length>0)||e.treeObj.element.focus(),e.checkSelectAll&&e.checkBoxElement){var s=Mi(e.checkBoxElement,".e-checkbox-wrapper");e.changeState(s,"check"),e.checkSelectAll=!1}e.allowFiltering&&(Ci([e.inputWrapper],["e-input-focus"]),e.filterObj.element.focus());var n={popup:e.popupObj};e.trigger("open",n)}})},t.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var t=Math.round(this.filterContainer.getBoundingClientRect().height);e=ge(parseInt(e,10)-t+"px")}if(this.headerTemplate){t=Math.round(this.header.getBoundingClientRect().height);e=ge(parseInt(e,10)-t+"px")}if(this.showCheckBox&&this.showSelectAll){t=Math.round(this.checkAllParent.getBoundingClientRect().height);e=ge(parseInt(e,10)-t+"px")}if(this.footerTemplate){t=Math.round(this.footer.getBoundingClientRect().height);e=ge(parseInt(e,10)-t+"px")}var i=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);i+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=ge(parseInt(e,10)-i+"px"),this.popupDiv.style.maxHeight=e}},t.prototype.createPopup=function(e){var t=this;this.isFirstRender&&(this.popupObj=new lo(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){t.isPopupOpen=!1},open:function(){Ct.add(document,"mousedown",t.onDocumentClick,t),t.isPopupOpen=!0},targetExitViewport:function(){bt.isDevice||t.hidePopup()}}))},t.prototype.setElementWidth=function(e){var t=this.inputWrapper;ae(e)||("number"==typeof e?t.style.width=ge(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:ge(e)))},t.prototype.setWidth=function(){var e=ge(this.popupWidth);e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e);return e},t.prototype.getHeight=function(){var e=ge(this.popupHeight);e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e);return e},t.prototype.onDocumentClick=function(e){var t=e.target,i=Mi(t,".e-list-parent"),s=Mi(t,".e-filter-wrap"),n=!!t.classList.contains("e-dropdown")||(Hi(t,".e-ddt .e-popup")||Hi(t,".e-ddt .e-treeview"));this.isPopupOpen&&(this.inputWrapper.contains(t)||i||s||n)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains("e-chips-close")||this.isPopupOpen&&(t.classList.contains("e-selectall-parent")||t.classList.contains("e-all-text")||t.classList.contains("e-frame")))?(this.isDocumentClick=!1,e.preventDefault()):!this.inputWrapper.contains(t)&&this.inputFocus&&this.focusOut(e)},t.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),bi([this.popupDiv],ff)},t.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),bi([this.popupDiv],ff),this.hideCheckAll(!0)):this.popupDiv.classList.contains(ff)&&this.treeItems.length>=1&&(Ci([this.popupDiv],ff),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus());var t={data:e.data};this.trigger("dataBound",t),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)},t.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},t.prototype.setCssClass=function(e,t){var i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];ae(t)||""===t||Ci(i,t.split(" ")),ae(e)||""===e||bi(i,e.split(" "))},t.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},t.prototype.setEnable=function(){Na.setEnabled(this.enabled,this.inputEle),this.enabled?(Ci([this.inputWrapper],"e-disabled"),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),bi([this.inputWrapper],"e-disabled"),this.inputWrapper&&this.inputWrapper.classList.contains("e-input-focus")&&Ci([this.inputWrapper],["e-input-focus"]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},t.prototype.cloneFields=function(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.cloneChildField=function(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeFields=function(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeChildren=function(e){if("string"==typeof e)return e;if(!ae(e)){var t=void 0;return t=e=this.getActualProperties(e),e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null},t.prototype.getTreeDataType=function(e,t){if(this.fields.dataSource instanceof Ip){for(var i=0;i<e.length;i++)if("string"==typeof t.child&&ae(ee(t.child,e[i])))return 1;return 2}i=0;for(var s=e.length;i<s;i++){if("string"==typeof t.child&&!ae(ee(t.child,e[i])))return 2;if(!ae(ee(t.parentValue,e[i]))||!ae(ee(t.hasChildren,e[i])))return 1}return 1},t.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()},t.prototype.getEventArgs=function(e){var t,i=e.data,s=e.nodeData;return this.showCheckBox&&("check"===e.action?t="select":"uncheck"===e.action&&(t="un-select")),{action:this.showCheckBox?t:e.action,isInteracted:e.isInteracted,item:e.node,itemData:this.showCheckBox?i[0]:s}},t.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))},t.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.value&&this.value.length?this.hiddenElement.innerHTML='<option selected value ="'+this.value[0]+'">'+this.text+"</option>":this.hiddenElement.innerHTML="")},t.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var t;if(e.isInteracted){var i=ee("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[i]},!0),t=this.itemTemplate?ee("text",this.treeObj.getNode(i)):ee("text",e.nodeData).toString(),Na.setValue(t,this.inputEle,this.floatLabelType),this.setProperties({text:t},!0),this.currentText=this.text,this.currentValue=this.value,Di(this.inputWrapper,{"aria-describedby":this.element.id}),Di(this.inputWrapper,{"aria-activedescendant":i.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}var s=this.getEventArgs(e);this.trigger("select",s),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},t.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var t=e.event.target;(t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox&&("true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.setMultiSelect(),this.ensurePlaceHolder());this.changeOnBlur||!this.allowMultiSelection&&!this.showCheckBox||this.triggerChangeEvent(e.event)},t.prototype.onNodeChecked=function(e){var t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&"uncheck"===e.action){var i=ee("id",e.data[0]).toString();this.removeSelectedData(i,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var s=this.treeObj.element.querySelectorAll("li"),n=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),o=Mi(this.checkBoxElement,".e-checkbox-wrapper");o&&"uncheck"===e.action?(this.isReverseUpdate=!0,this.changeState(o,"uncheck"),this.isReverseUpdate=!1):o&&"check"===e.action&&n.length===s.length&&(this.isReverseUpdate=!0,this.changeState(o,"check"),this.isReverseUpdate=!1)}},t.prototype.beforeCheck=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)},t.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(Ci([this.overAllClear],mf),bi([this.inputWrapper],df)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(bi([this.overAllClear],mf),Ci([this.inputWrapper],df)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var t=Oi(".e-chips-close",this.chipWrapper),i=0;i<t.length;i++)e?Ci([t[i]],mf):bi([t[i]],mf)},t.prototype.updateDropDownIconState=function(e){var t=Ii(".e-ddt-icon",this.inputWrapper);e?(t?Ci([t],mf):Na.appendSpan(cf,this.inputWrapper,this.createElement),bi([this.inputWrapper],"e-show-dd-icon")):(bi([t],mf),Ci([this.inputWrapper],"e-show-dd-icon"))},t.prototype.updateMode=function(){if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(mf)&&e?(Ci([this.chipWrapper],mf),bi([this.inputWrapper],pf)):e||(bi([this.chipWrapper],mf),Ci([this.inputWrapper],pf));var t=null!==this.value&&0!==this.value.length;e&&t?bi([this.inputEle],uf):Ci([this.inputEle],uf)}else this.inputEle.classList.contains(uf)&&(Ci([this.inputEle],uf),this.chipWrapper&&(bi([this.chipWrapper],mf),Ci([this.inputWrapper],pf)))},t.prototype.ensurePlaceHolder=function(){this.value&&0===this.value.length&&(Ci([this.inputEle],uf),this.chipWrapper&&bi([this.chipWrapper],mf))},t.prototype.ensureClearIconPosition=function(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.setMultiSelectValue=function(e){if(this.isFilteredData){for(var t=ae(this.value)?[]:this.value,i=0;i<e.length;i++)(ae(this.value)||-1===this.value.indexOf(e[i]))&&t.push(e[i]);this.setProperties({value:t},!0)}else this.setProperties({value:e},!0),e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())},t.prototype.setMultiSelect=function(){if(this.showCheckBox&&!this.isDynamicChange)this.setMultiSelectValue(this.treeObj.checkedNodes.slice());else{var e=this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null;this.setMultiSelectValue(e),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())}this.selectedText=[];var t=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!t&&(Ci([this.inputEle],uf),Ti(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(bi([this.inputEle],uf),this.chipWrapper&&Ci([this.chipWrapper],mf));var i=!!this.value&&!!this.value.length;this.chipWrapper&&"Box"===this.mode&&!i&&(bi([this.chipWrapper],mf),Ci([this.inputEle],uf)),this.updateSelectedValues()},t.prototype.getSelectedData=function(e){var t=null;if(this.isFilteredData)for(var i=0;i<this.selectedData.length;i++)if(ee(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===e){t=this.selectedData[i];break}return ae(t)&&(ae(t=this.treeSettings.loadOnDemand?this.treeObj.getTreeData(e)[0]:this.treeObj.getNode(e))||this.selectedData.push(t)),t},t.prototype.removeSelectedData=function(e,t){var i=ae(this.value)?[]:this.value.slice();i.splice(i.indexOf(e),1),this.setProperties({value:i},t);for(var s=0;s<this.selectedData.length;s++)if(ee(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}},t.prototype.updateSelectedValues=function(){var e,t;this.dataValue="";var i,s="";if(this.hiddenElement.innerHTML="",this.isChipDelete&&!this.treeSettings.autoCheck||!this.inputWrapper.contains(this.chipWrapper)||(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!ae(this.value))for(var n=0,o=this.value.length;n<o;n++)i=this.getSelectedData(this.value[n]),t=ee(this.treeSettings.loadOnDemand?this.fields.text:"text",i),this.selectedText.push(t),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,s+=","+e,this.setProperties({text:s},!0)):(this.dataValue+=e,s+=e),"Delimiter"===this.mode||this.isChipDelete&&!this.treeSettings.autoCheck||!this.allowMultiSelection&&!this.showCheckBox||this.setChipValues(e,this.value[n]),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[n]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";var r=this.getValidMode();"Box"===this.mode||!this.allowMultiSelection&&!this.showCheckBox||r||this.chipWrapper&&(bi([this.chipWrapper],mf),Ci([this.inputWrapper],pf)),Na.setValue(this.dataValue,this.inputEle,this.floatLabelType),""===s?this.setProperties({text:null},!0):this.setProperties({text:s},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value},t.prototype.setChipValues=function(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var i=this.createElement("span",{className:"e-chips",attrs:{"data-value":t}}),s=this.createElement("span",{className:"e-chipcontent"}),n=this.createElement("span",{className:"e-chips-close e-icons"});s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(n),Ct.add(n,"mousedown",this.removeChip,this))},t.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(Ti(this.checkAllParent),this.checkAllParent=null))},t.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),bi([this.header],"e-ddt-header"));var e=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);e&&Ei(e=Array.prototype.slice.call(e),this.header),this.ddtupdateBlazorTemplates(!1,!1,!0,!1),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},t.prototype.templateComplier=function(e){if(e){try{if(document.querySelectorAll(e).length)return Xt(document.querySelector(e).innerHTML.trim())}catch(t){return Xt(e)}}return Xt(e)},t.prototype.setFooterTemplate=function(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),bi([this.footer],"e-ddt-footer"));var e=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);e&&Ei(e=Array.prototype.slice.call(e),this.footer),this.ddtupdateBlazorTemplates(!1,!1,!1,!0),Ei([this.footer],this.popupEle)},t.prototype.clearAll=function(e){this.enabled&&!this.readonly&&(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},t.prototype.removeChip=function(e){if(this.enabled&&!this.readonly){var t=e.target.parentElement,i=t.getAttribute("data-value");this.chipCollection&&t&&Li(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},t.prototype.resetValue=function(e){Na.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],te("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.uncheckAll(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder())},t.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)},t.prototype.selectAllItems=function(e){if(this.showCheckBox)e?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(e){for(var t=Oi("li",this.treeObj.element),i=void 0,s=[],n=0;n<t.length;n++)i=t[n].getAttribute("data-uid").toString(),s.push(i);this.treeObj.selectedNodes=s}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))},t.prototype.updateTreeSettings=function(e){var t=Object.keys(e.treeSettings)[0];if("autoCheck"===t)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===t)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===t)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},t.prototype.updateCheckBoxState=function(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},t.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},t.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),bi([this.noRecord],"e-ddt-nodata"),wi([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var t=e?this.actionFailureTemplate:this.noRecordsTemplate,i=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate",n=this.templateComplier(t)({},this,s,i,this.isStringTemplate,void 0,this.noRecord);n&&Ei(n=Array.prototype.slice.call(n),this.noRecord),this.ddtupdateBlazorTemplates(!e,e)}else{this.l10n=new Js(this.getLocaleName(),{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale),this.noRecord.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}},t.prototype.ddtupdateBlazorTemplates=function(e,t,i,s,n){this.isStringTemplate||(this.noRecordsTemplate&&e&&Kt(this.noRecordsTemplateId,"NoRecordsTemplate",this,n),this.actionFailureTemplate&&t&&Kt(this.actionFailureTemplateId,"ActionFailureTemplate",this,n),i&&Kt(this.headerTemplateId,"HeaderTemplate",this),s&&Kt(this.footerTemplateId,"FooterTemplate",this))},t.prototype.ddtresetBlazorTemplates=function(e,t,i,s){this.isStringTemplate||(this.noRecordsTemplate&&e&&Zt(this.noRecordsTemplateId),this.actionFailureTemplate&&t&&Zt(this.actionFailureTemplateId),i&&Zt(this.headerTemplateId),s&&Zt(this.footerTemplateId))},t.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())},t.prototype.updateOverflowWrapper=function(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:"e-overflow "+mf}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},t.prototype.updateMultiSelection=function(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},t.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()},t.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},t.prototype.updateValue=function(e){this.isDynamicChange=!0,ae(e)||0===e.length?this.resetValue(!0):(this.setTreeValue(),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText||(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},t.prototype.updateText=function(e){ae(e)?this.resetValue():(this.setTreeText(),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText||(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},t.prototype.updateModelMode=function(){if(!!this.allowMultiSelection||!!this.showCheckBox){if(!this.wrapText){var e=Ii(".e-overflow",this.inputWrapper);e&&(e.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),bi([this.inputEle],uf),"Box"===this.mode?Ci([this.overFlowWrapper,this.inputWrapper],"e-show-text"):bi([this.overFlowWrapper,this.inputWrapper],"e-show-text"))}},t.prototype.updateOption=function(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?!this.hiddenElement.hasAttribute("multiple")||this.allowMultiSelection||this.showCheckBox||this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":Na.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":Na.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":Na.removeFloating(this.inputObj),Na.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=t.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":this.updateModelMode();break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.updateValue(this.value),this.treeObj.dataBind();break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(bi([this.overFlowWrapper],mf),this.chipWrapper&&"Box"===this.mode?Ci([this.chipWrapper],mf):(Ci([this.inputWrapper],pf),Ci([this.inputEle],uf)),this.ensurePlaceHolder()):this.updateView()}}},t.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},t.prototype.destroy=function(){this.ddtresetBlazorTemplates(!0,!0,!0,!0),this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.resetValue(),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),Ti(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),Ti(this.inputWrapper),Ti(this.popupDiv),this.element.classList.remove("e-input"),e.prototype.destroy.call(this)},t.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),Ti(this.filterObj.element),Ti(this.filterContainer),this.filterObj=null)},t.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},t.prototype.getData=function(e){return this.treeObj.getTreeData(e)},t.prototype.hidePopup=function(){var e={popup:this.popupObj};this.inputWrapper.classList.remove("e-icon-anim"),this.popupEle&&(this.popupEle.style.display="none"),Di(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&bi([this.inputWrapper],["e-input-focus"])),this.trigger("close",e))},t.prototype.selectAll=function(e){this.selectAllItems(e)},t.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},t.prototype.getModuleName=function(){return"dropdowntree"},hf([os("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),hf([os(!1)],t.prototype,"allowFiltering",void 0),hf([os(!1)],t.prototype,"allowMultiSelection",void 0),hf([os(!0)],t.prototype,"changeOnBlur",void 0),hf([os("")],t.prototype,"cssClass",void 0),hf([os(",")],t.prototype,"delimiterChar",void 0),hf([os(!0)],t.prototype,"enabled",void 0),hf([rs({},gf)],t.prototype,"fields",void 0),hf([os(null)],t.prototype,"filterBarPlaceholder",void 0),hf([os("StartsWith")],t.prototype,"filterType",void 0),hf([os("Never")],t.prototype,"floatLabelType",void 0),hf([os(null)],t.prototype,"footerTemplate",void 0),hf([os(!1)],t.prototype,"ignoreAccent",void 0),hf([os(!0)],t.prototype,"ignoreCase",void 0),hf([os(null)],t.prototype,"headerTemplate",void 0),hf([os({})],t.prototype,"htmlAttributes",void 0),hf([os(null)],t.prototype,"itemTemplate",void 0),hf([os("Default")],t.prototype,"mode",void 0),hf([os("No Records Found")],t.prototype,"noRecordsTemplate",void 0),hf([os(null)],t.prototype,"placeholder",void 0),hf([os("300px")],t.prototype,"popupHeight",void 0),hf([os("100%")],t.prototype,"popupWidth",void 0),hf([os(!1)],t.prototype,"readonly",void 0),hf([os(!1)],t.prototype,"showSelectAll",void 0),hf([os("Select All")],t.prototype,"selectAllText",void 0),hf([os(!1)],t.prototype,"showCheckBox",void 0),hf([os(!0)],t.prototype,"showClearButton",void 0),hf([os(!0)],t.prototype,"showDropDownIcon",void 0),hf([os("None")],t.prototype,"sortOrder",void 0),hf([os(null)],t.prototype,"text",void 0),hf([rs({},vf)],t.prototype,"treeSettings",void 0),hf([os("Unselect All")],t.prototype,"unSelectAllText",void 0),hf([os(null)],t.prototype,"value",void 0),hf([os("100%")],t.prototype,"width",void 0),hf([os(1e3)],t.prototype,"zIndex",void 0),hf([os(!1)],t.prototype,"wrapText",void 0),hf([cs()],t.prototype,"actionFailure",void 0),hf([cs()],t.prototype,"beforeOpen",void 0),hf([cs()],t.prototype,"change",void 0),hf([cs()],t.prototype,"close",void 0),hf([cs()],t.prototype,"blur",void 0),hf([cs()],t.prototype,"created",void 0),hf([cs()],t.prototype,"dataBound",void 0),hf([cs()],t.prototype,"destroyed",void 0),hf([cs()],t.prototype,"filtering",void 0),hf([cs()],t.prototype,"focus",void 0),hf([cs()],t.prototype,"keyPress",void 0),hf([cs()],t.prototype,"open",void 0),hf([cs()],t.prototype,"select",void 0),t=hf([ps],t)}(Ns),bf={},Cf={},Sf={},xf={},wf={},Ef={},kf={},Tf={};Object(Y.copy)(bf,_),Object(Y.copy)(Cf,s),Object(Y.copy)(Sf,E),Object(Y.copy)(xf,k),Object(Y.copy)(wf,v),Object(Y.copy)(Ef,a),Object(Y.copy)(kf,z),Object(Y.copy)(Tf,o);var Lf={},Df={};Object(Y.copy)(Lf,y),Object(Y.copy)(Df,s);var If={},Of={};Object(Y.copy)(If,g),Object(Y.copy)(Of,s),Object(Y.copy)(If,v);var Af={},Mf={},Pf={},Nf={};Object(Y.copy)(Af,j),Object(Y.copy)(Mf,s),Object(Y.copy)(Pf,k),Object(Y.copy)(Nf,o),Object(Y.copy)(Af,O),Object(Y.copy)(Af,A),Object(Y.copy)(Af,M);var Rf={},Bf={};Object(Y.copy)(Rf,f),Object(Y.copy)(Bf,s),Object(Y.copy)(Rf,v);var Hf,Ff,jf,Vf,zf,_f=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},e.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()},e.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),s=document.createDocumentFragment();i.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=yi("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+n,href:"javascript:void(0);",name:"Goto page"+n}}),t.currentPage===n&&Bi(e,["e-currentitem","e-active"],["e-pager-default"]),s.appendChild(e);i.appendChild(s),this.links=[].slice.call(i.childNodes)},e.prototype.wireEvents=function(){Ct.add(this.pagerElement,"click",this.clickHandler,this)},e.prototype.unwireEvents=function(){Ct.remove(this.pagerModule.element,"click",this.clickHandler)},e.prototype.destroy=function(){this.unwireEvents()},e.prototype.renderNumericContainer=function(){this.element=yi("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(yi("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},e.prototype.renderFirstNPrev=function(e){this.first=yi("div",{className:"e-first e-icons e-icon-first",attrs:{title:ye()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":ye()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=yi("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:ye()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":ye()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),Ei([this.first,this.prev],e)},e.prototype.renderPrevPagerSet=function(e){var t=yi("div");this.PP=yi("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:ye()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":ye()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:ye()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)},e.prototype.renderNextPagerSet=function(e){var t=yi("div");this.NP=yi("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:ye()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":ye()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:ye()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)},e.prototype.renderNextNLast=function(e){this.next=yi("div",{className:"e-next e-icons e-icon-next",attrs:{title:ye()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":ye()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=yi("div",{className:"e-last e-icons e-icon-last",attrs:{title:ye()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":ye()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),Ei([this.next,this.last],e)},e.prototype.clickHandler=function(e){var t=this.pagerModule,i=e.target;return t.previousPageNo=t.currentPage,i.classList.contains("e-disable")||ae(i.getAttribute("index"))||(t.currentPage=parseInt(i.getAttribute("index"),10),t.dataBind()),!1},e.prototype.updateLinksHtml=function(){var e,t,i=this.pagerModule;i.currentPage=1===i.totalPages?1:i.currentPage,i.currentPage>i.totalPages&&i.totalPages&&(i.currentPage=i.totalPages),e=parseInt((i.currentPage/i.pageCount).toString(),10),i.currentPage%i.pageCount==0&&e>0&&(e-=1);for(var s=0;s<i.pageCount;s++)(t=e*i.pageCount+1+s)<=i.totalPages?(this.links[s].style.display="",this.links[s].setAttribute("index",t.toString()),this.links[s].innerHTML=i.customText?i.customText+t:t.toString(),i.currentPage!==t?this.links[s].classList.add("e-pager-default"):this.links[s].classList.remove("e-pager-default")):(this.links[s].innerHTML=i.customText?i.customText+t:t.toString(),this.links[s].style.display="none"),Bi(this.links[s],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",i.totalPages.toString()),this.prev.setAttribute("index",(i.currentPage-1).toString()),this.next.setAttribute("index",(i.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",i.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(i.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(i.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-i.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},e.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&Bi(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])},e.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],s=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(Bi(this.prev,i,s),Bi(this.first,e,t),Bi(this.pagerElement.querySelector(".e-mfirst"),e,t),Bi(this.pagerElement.querySelector(".e-mprev"),i,s)):(Bi(this.prev,s,i),Bi(this.first,t,e),Bi(this.pagerElement.querySelector(".e-mprev"),s,i),Bi(this.pagerElement.querySelector(".e-mfirst"),t,e))},e.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?Bi(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):Bi(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},e.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?Bi(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):Bi(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},e.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],s=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||0===n.totalRecordsCount?(Bi(this.last,t,e),Bi(this.next,s,i),Bi(this.pagerElement.querySelector(".e-mlast"),t,e),Bi(this.pagerElement.querySelector(".e-mnext"),s,i)):(Bi(this.last,e,t),Bi(this.next,i,s),Bi(this.pagerElement.querySelector(".e-mlast"),e,t),Bi(this.pagerElement.querySelector(".e-mnext"),i,s))},e}(),qf=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){var e=yi("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=yi("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=yi("span",{className:"e-pagecountmsg",styles:"textalign:right"}),Ei([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},e.prototype.refresh=function(){var e=this.pagerModule;ye()?(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("CurrentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("TotalItemsInfo"),[e.totalRecordsCount||0])):(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage])),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},e.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},e.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},e.prototype.destroy=function(){},e.prototype.format=function(e,t){for(var i,s=0;s<t.length;s++)i=new RegExp("\\{"+s+"\\}","gm"),e=e.replace(i,t[s].toString());return e},e}();!function(e){e[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn",e[e.DetailFooterIntent=15]="DetailFooterIntent",e[e.RowDragIcon=16]="RowDragIcon",e[e.RowDragHIcon=17]="RowDragHIcon"}(Hf||(Hf={})),function(e){e[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary"}(Ff||(Ff={})),function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e[e.Cancel=4]="Cancel",e[e.Print=5]="Print",e[e.Search=6]="Search",e[e.ColumnChooser=7]="ColumnChooser",e[e.PdfExport=8]="PdfExport",e[e.ExcelExport=9]="ExcelExport",e[e.CsvExport=10]="CsvExport",e[e.WordExport=11]="WordExport"}(jf||(jf={})),function(e){e[e.isEdit=0]="isEdit",e[e.isAdd=1]="isAdd",e[e.isSort=2]="isSort",e[e.isFilter=3]="isFilter"}(Vf||(Vf={})),function(e){e[e.isInitial=0]="isInitial",e[e.isSearch=1]="isSearch"}(zf||(zf={}));(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),new We,function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();function Wf(e,t){for(var i=0,s=t.length;i<s;i++)s===t.length?e.appendChild(t[i]):e.appendChild(t[0]);return e}var Uf;!function(e){e.timer=null}(Uf||(Uf={}));var Gf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Yf=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Xf=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.hasParent=!1,s}return Gf(t,e),t.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e},t.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager",PreviousPagerTooltip:"Go to previous pager",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All"},this.containerModule=new _f(this),this.pagerMessageModule=new qf(this)},t.prototype.render=function(){this.template?this.isReactTemplate()?(this.on("pager-refresh",this.pagerTemplate,this),this.notify("pager-refresh",{})):this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))},t.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},t.prototype.destroy=function(){this.isReactTemplate()&&(this.off("pager-refresh",this.pagerTemplate),this.hasParent||this.destroyTemplate(["template"])),e.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML="")},t.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},t.prototype.getModuleName=function(){return"pager"},t.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}}},t.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},t.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())},t.prototype.setPageSize=function(e){this.pageSize=e,this.dataBind()},t.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},t.prototype.checkGoToPage=function(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),ae(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},t.prototype.currentPageChanged=function(e,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==t.currentPage||e.pageSize!==t.pageSize){var i={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1};this.trigger("click",i),i.cancel||this.refresh()}},t.prototype.pagerTemplate=function(){if(!this.isReactTemplate()||!this.hasParent){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},i=this.element.parentElement.id+"_template";this.isReactTemplate()?(this.getPagerTemplate()(t,this,"template",i,null,null,this.element),this.renderReactTemplates()):(e=ye()?this.getPagerTemplate()(t,this,"template",i,this.isStringTemplate):this.getPagerTemplate()(t),Wf(this.element,e))}},t.prototype.updateTotalPages=function(){this.totalPages=this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},t.prototype.getPagerTemplate=function(){return this.templateFn},t.prototype.compile=function(e){if(e){try{document.querySelectorAll(e).length&&(this.templateFn=Xt(document.querySelector(e).innerHTML.trim()))}catch(t){this.templateFn=Xt(e)}}},t.prototype.refresh=function(){this.template?this.isReactTemplate()?(this.updateTotalPages(),this.notify("pager-refresh",{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.initLocalization=function(){this.localeObj=new Js(this.getModuleName(),this.defaultConstants,this.locale)},t.prototype.updateQueryString=function(e){var t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)},t.prototype.getUpdatedURL=function(e,t,i){var s=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(s))return e.replace(s,"$1"+t+"="+i+"$2");var n="";return-1!==e.indexOf("#")&&(n=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+i+n},t.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(yi("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:ye()?this.getLocalizedLabel("FirstPageTooltip"):this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(yi("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:ye()?this.getLocalizedLabel("PreviousPageTooltip"):this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},t.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(yi("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:ye()?this.getLocalizedLabel("NextPageTooltip"):this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(yi("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:ye()?this.getLocalizedLabel("LastPageTooltip"):this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},t.prototype.addAriaLabel=function(){var e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!bt.isDevice)for(var t=0;t<e.length;t++){var i=this.element.querySelector(e[t]);i.setAttribute("aria-label",i.getAttribute("title"))}},t.prototype.isReactTemplate=function(){return this.isReact&&this.template&&"string"!=typeof this.template},Yf([os(!1)],t.prototype,"enableQueryString",void 0),Yf([os(!1)],t.prototype,"enableExternalMessage",void 0),Yf([os(!0)],t.prototype,"enablePagerMessage",void 0),Yf([os(12)],t.prototype,"pageSize",void 0),Yf([os(10)],t.prototype,"pageCount",void 0),Yf([os(1)],t.prototype,"currentPage",void 0),Yf([os()],t.prototype,"totalRecordsCount",void 0),Yf([os()],t.prototype,"externalMessage",void 0),Yf([os(!1)],t.prototype,"pageSizes",void 0),Yf([os()],t.prototype,"template",void 0),Yf([os("")],t.prototype,"customText",void 0),Yf([cs()],t.prototype,"click",void 0),Yf([cs()],t.prototype,"dropDownChanged",void 0),Yf([cs()],t.prototype,"created",void 0),t=Yf([ps],t)}(Ns),Kf=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"externalMessage"},e.prototype.render=function(){this.element=yi("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":"Pager external message"}}),this.pagerModule.element.appendChild(this.element),this.refresh()},e.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},e.prototype.hideMessage=function(){ae(this.element)||(this.element.style.display="none")},e.prototype.showMessage=function(){this.element.style.display=""},e.prototype.destroy=function(){Li(this.element)},e}(),Zf="e-float-line",Qf="e-float-text",Jf="e-label-top",$f="e-label-bottom";function eg(e,t,i,s,n,o,r){var a,l;a=yi("span",{className:Zf}),l=yi("label",{className:Qf}),ae(i.id)||""===i.id||(l.id="label_"+i.id.replace(/ /g,"_"),Di(i,{"aria-labelledby":l.id})),ae(s.placeholder)||""===s.placeholder||(l.innerText=ln.sanitize(s.placeholder),s.removeAttribute("placeholder")),l.innerText=ln.sanitize(r),t.appendChild(a),t.appendChild(l),e.classList.add("e-float-input"),function(e,t){e&&e.length>0?(bi([t],Jf),Ci([t],$f)):(Ci([t],Jf),bi([t],$f))}(n,l),"Always"===o&&(l.classList.contains($f)&&Ci([l],$f),bi([l],Jf))}function tg(e,t,i){e&&e.length?t.placeholder="":t.placeholder=i}var ig=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),sg=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},ng="e-hide-listitem",og=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.clearIconWidth=0,s.isValidKey=!1,s.selectAllEventData=[],s.selectAllEventEle=[],s.isDynamicDataChange=!1,s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return ig(t,e),t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&(bi([this.overAllWrapper],s.split(" ")),bi([this.popupWrapper],s.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):0===i.indexOf("data")||["name","required","aria-required","form"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","role","style","class"].indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[i]):this.inputElement.setAttribute(i,this.htmlAttributes[i])}}},t.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))},t.prototype.updateCssClass=function(){if(!ae(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;""!==(e=this.cssClass.replace(/\s+/g," ").trim())&&(bi([this.overAllWrapper],e.split(" ")),bi([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){ae(e)||""===e||""!==(e=e.replace(/\s+/g," ").trim())&&(Ci([this.overAllWrapper],e.split(" ")),Ci([this.popupWrapper],e.split(" ")))},t.prototype.onPopupShown=function(){var e=this;if(bt.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var t=this;window.onpopstate=function(){t.hidePopup(),t.inputElement.focus()},history.pushState({},"")}var i={popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};this.trigger("open",i,function(t){t.cancel||(e.focusAtFirstListItem(),document.body.appendChild(e.popupObj.element),"CheckBox"===e.mode&&e.enableGroupCheckBox&&!ae(e.fields.groupBy)&&e.updateListItems(e.list.querySelectorAll("li.e-list-item"),e.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===e.mode||e.showDropDownIcon)&&bi([e.overAllWrapper],["e-icon-anim"]),e.refreshPopup(),e.renderReactTemplates(),e.popupObj.show(t.animation,1e3===e.zIndex?e.element:null),Di(e.inputElement,{"aria-expanded":"true"}),e.isFirstClick&&e.loadTemplate())})},t.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()},t.prototype.loadTemplate=function(){var e=this;"CheckBox"===this.mode&&this.itemTemplate&&ye()&&this.isServerRendered&&this.mainData&&this.mainData.length>0?setTimeout(function(){e.refreshListItems(null),"CheckBox"===e.mode&&e.removeFocus(),e.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,e:e})},this.mainData.length<100?100:this.mainData.length):(this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!ae(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);ae(e)||this.scrollBottom(e)}},t.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+id)){var e=void 0;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li."+id+":not(."+ng+")"))&&(this.removeFocus(),this.addListFocus(e))}},t.prototype.focusAtLastListItem=function(e){var t;e?t=pp(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?pp(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}},t.prototype.updateListARIA=function(){Di(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;Di(this.inputElement,this.getAriaAttributes()),e&&Di(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;re(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},t.prototype.removelastSelection=function(e){var t,i=(t=this.chipCollectionWrapper.querySelectorAll("span.e-chips"))[t.length-1].getAttribute("data-value");ae(this.value)||(this.tempValues=this.value.slice()),this.removeValue(i,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},t.prototype.getForQuery=function(e){for(var t,i=ae(this.fields.value)?this.fields.text:this.fields.value,s=0;s<e.length;s++)t=0===s?new mp(i,"equal",e[s]):t.or(i,"equal",e[s]);return this.getQuery(this.query).where(t)},t.prototype.onActionComplete=function(t,i,s,n){e.prototype.onActionComplete.call(this,t,i,s),this.updateSelectElementData(this.allowFiltering);if(ye()&&this.isServerRendered&&this.isDynamicDataChange&&null!==this.value&&this.value.length>0){for(var o=[],r=0;r<this.value.length;r++){var a=this.getDataByValue(this.value[r]);a&&o.push(a[this.fields.value])}0===o.length&&this.setProperties({value:null})}if(!ae(this.value)&&!this.allowCustomValue)for(var l=0;l<this.value.length;l++){this.findListElement(this.allowFiltering&&!ae(this.mainList)?this.mainList:t,"li","data-value",this.value[l])||(this.value.splice(l,1),l-=1)}this.updateActionList(t,i,s),ye()&&this.isServerRendered&&this.allowFiltering&&"CheckBox"===this.mode&&this.removeFocus(),ye()&&this.isServerRendered&&this.isDynamicDataChange&&this.value&&this.value.length>0&&(this.updateVal(this.value,null,"value"),this.addValidInputClass(),this.isDynamicDataChange=!1),!(this.dataSource instanceof Ip&&"CheckBox"===this.mode&&this.allowFiltering)||ye()&&this.isServerRendered||this.removeFocus()},t.prototype.updateActionList=function(e,t,i,s){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?ae(this.mainData)||0!==this.mainData.length||(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value||"CheckBox"===this.mode)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),ae(this.setInitialValue)||this.setInitialValue(),ae(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(ae(this.text)||!ae(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))},t.prototype.refreshSelection=function(){var e,t,i=this.hideSelectedItem?ng:Qp;if(!ae(this.value))for(var s=0;!ae(this.value[s]);s++)if(e=this.value[s],t=this.findListElement(this.list,"li","data-value",e)){if(bi([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(sd)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(sd))&&bi([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(ng)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(td)){Ci([t],td);var n=t.parentElement.querySelectorAll("."+id+":not(."+ng+")");n.length>0?bi([n[0]],td):(this.ulElement=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement,this.l10nUpdate(),bi([this.list],$p))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){var o=t.firstElementChild.getAttribute("aria-checked");if(ae(o)||"false"===o){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null};this.notify("updatelist",r)}}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var t,i,s=this.hideSelectedItem?ng:Qp;i=t=this.findListElement(this.ulElement,"li","data-value",e);var n=0,o=0,r=!0,a=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(ng)&&t.previousElementSibling.classList.contains(id)&&(r=!1),!r||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(sd)?n=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(ng)&&i.nextElementSibling.classList.contains(id)&&(a=!1),!a||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(sd)?o=10:i=i.nextElementSibling}while(n<10||o<10);r&&a&&!t.previousElementSibling.classList.contains(ng)?bi([t.previousElementSibling],s):r&&a&&t.previousElementSibling.classList.contains(ng)&&Ci([t.previousElementSibling],s)},t.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li."+id).length,s=this.list.querySelectorAll("li."+Qp).length;if(this.enableGroupCheckBox&&!ae(this.fields.groupBy)&&(s-=e),i!==s&&s!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==s&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var n=0;n<t.length;n++)this.findGroupStart(t[n]);this.deselectHeader()}},t.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()},t.prototype.KeyUp=function(e){"CheckBox"!==this.mode||this.openOnClick||(ae(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0));this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode,this.search(e))},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new up;if(this.filterAction){if(null!==this.targetElement()){var i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Ip||"string"!==i)&&"number"!==i){var s=this.fields;t.where(ae(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new up)},t.prototype.dataUpdater=function(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof Ip?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},t.prototype.checkForCustomValue=function(e,t){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){var s=this.inputElement.value,n=t||this.fields;if("string"!=typeof(!ae(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData)){var o={};te(n.text,s,o),te(n.value,s,o),(r=JSON.parse(JSON.stringify(this.listData))).splice(0,0,o),this.resetList(r,n,e)}else{var r=[this.inputElement.value];this.resetList(r,n)}}this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled)if(e.target!==this.overAllClear){if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf("e-chips-close"))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus")))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}else e.preventDefault()},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),Di(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),Di(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlur=function(e,t){var i;if(ae(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&bi([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(ae(this.value)||0===this.value.length)&&Ci([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&bt.isIE&&!ae(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove("e-input-focus");if(this.scrollFocusStatus)return ae(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove("e-input-focus"),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0,!1,!0,!0),this.hidePopup()),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,bt.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(e,t,i,s,n){e.classList.remove("e-input-focus");var o=t.querySelector("."+Qf);i&&i.length<=0&&"Auto"===s&&!ae(o)&&(o.classList.contains(Jf)&&Ci([o],Jf),bi([o],$f))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!ae(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else ae(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},t.prototype.setPlaceholderSize=function(e){ae(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":bi([this.searchWrapper],"e-search-custom-width"):ae(this.value)||(this.searchWrapper.removeAttribute("style"),Ci([this.searchWrapper],"e-search-custom-width"))},t.prototype.refreshInputHight=function(){this.value&&this.value.length||!ae(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")},t.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},t.prototype.updateValueState=function(e,t,i){var s=t||[],n=i||[];if(this.initStatus&&this.validateValues(s,n)){var o={e:e,oldValue:i,value:t,isInteracted:!!e,element:this.element};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",o),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}},t.prototype.updateTempValue=function(){this.value?this.tempValues=this.value.slice():this.tempValues=this.value},t.prototype.getPagingCount=function(){var e=this.list.classList.contains($p)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},t.prototype.pageUpSelection=function(e){var t,i=this.list.querySelectorAll("li."+id+":not(."+ng+"):not(.e-reorder-hide)");t=e>=0?i[e+1]:i[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},t.prototype.pageDownSelection=function(e){this.getItems();var t,i=this.list.querySelectorAll("li."+id+":not(."+ng+"):not(.e-reorder-hide)");t=e<=i.length?i[e-1]:i[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},t.prototype.getItems=function(){return this.list||e.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+id).length>0?this.ulElement.querySelectorAll("."+id+":not(."+ng+")"):[]},t.prototype.focusInHandler=function(e){if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused){var t={isInteracted:!!e,event:e};this.trigger("focus",t),this.focused=!1}return this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus"),function(e,t){e.classList.add("e-input-focus");var i=t.querySelector("."+Qf);ae(i)||(bi([i],Jf),i.classList.contains($f)&&Ci([i],$f))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0}return!1},t.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},t.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},t.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+td);ae(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e){this.removeFocus();var t=this.ulElement.querySelectorAll("li."+id+":not(."+ng+"):not(.e-reorder-hide)");if(t.length>0){var i=t[e?0:t.length-1];i.classList.add(td),this.scrollBottom(i)}},t.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124)))if(e.altKey)this.popupKeyActions(e);else{if(this.isPopupOpen()){var t=this.list.querySelector("."+td);switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add("e-input-focus")}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),this.refreshPopup()}},t.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&(this.list.focus(),Ct.add(this.list,"keydown",this.onKeyDown,this)),this.updateAriaAttribute()},t.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var t=this.list.querySelectorAll("li."+id+":not(."+ng+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!ae(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+id+",li."+sd+":not(."+ng+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li."+td);Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains("e-input-filter")||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){8===e.keyCode&&""===this.targetElement()?this.backCommand=!1:this.backCommand=!0},t.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,t){var i=this.list.offsetHeight,s=e.offsetTop+e.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+s-i,o=e.offsetTop+e.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!ae(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===t?this.list.scrollTop=0:s>i?this.list.scrollTop=n:o>0&&this.list.offsetHeight>o||(this.list.scrollTop=n)},t.prototype.scrollTop=function(e,t){var i=e.offsetTop-this.list.scrollTop;e.offsetTop,e.offsetHeight,this.list.scrollTop;i=this.fields.groupBy&&!le(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var s=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!le(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.selectListByKey=function(e){var t,i=this.list.querySelector("li."+td),s=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(s-=1),this.isValidLI(i)&&s<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!ae(this.fields.groupBy)&&(t=i.firstElementChild.lastElementChild,this.findGroupStart(t),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&s<this.maximumSelectionLength&&((t=i.firstElementChild.lastElementChild).classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var t;t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList,this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},t.prototype.removeSelectedChip=function(e){var t,i=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==i&&(ae(this.value)||(this.tempValues=this.value.slice()),null!==(t=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(t,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var t,i=this.list.querySelectorAll("li."+id);i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()},t.prototype.moveByList=function(e){if(this.list){var t=this.list.querySelectorAll("li."+id+":not(."+ng+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!ae(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+id+",li."+sd+":not(."+ng+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li."+td),s=-1;if(t.length){for(var n=0;n<t.length;n++)if(t[n]===i){s=n;break}e>0?s<t.length-1&&(this.removeFocus(),this.addListFocus(t[++s]),this.updateCheck(t[s]),this.scrollBottom(t[s],s)):s>0&&(this.removeFocus(),this.addListFocus(t[--s]),this.updateCheck(t[s]),this.scrollTop(t[s],s))}}},t.prototype.updateCheck=function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!ae(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))},t.prototype.moveBy=function(e,t){var i,s,n;i=this.chipCollectionWrapper.querySelectorAll("span.e-chips"),null===(s=this.chipCollectionWrapper.querySelector("span.e-chip-selected"))?e<0&&this.addChipSelection(i[i.length-1],t):e<0?null!==(n=s.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(n,t)):(n=s.nextElementSibling,this.removeChipSelection(),null!==n&&this.addChipSelection(n,t))},t.prototype.chipClick=function(e){if(this.enabled){var t=Mi(e.target,".e-chips");this.removeChipSelection(),this.addChipSelection(t,e)}},t.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},t.prototype.addChipSelection=function(e,t){bi([e],"e-chip-selected"),this.trigger("chipSelection",t)},t.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var t=e.target.parentElement.getAttribute("data-value"),i=this.getFormattedValue(t);if(this.allowCustomValue&&("false"!==t&&!1===i||!ae(i)&&"NaN"===i.toString())&&(i=t),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(i,e),ae(this.findListElement(this.list,"li","data-value",i))&&this.mainList&&this.listData){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length||!ae(this.text)&&""!==this.text?this.inputElement.placeholder="":this.inputElement.placeholder=this.placeholder:this.setFloatLabelType(),this.expandTextbox()},t.prototype.removeValue=function(e,t,i,s){var n=this,o=this.value.indexOf(this.getFormattedValue(e));-1===o&&this.allowCustomValue&&!ae(e)&&(o=this.value.indexOf(e.toString()));var r=t&&t.target;s=!!(s||r&&r.classList.contains("e-close-hooker"))||null;var a=this.hideSelectedItem?ng:Qp;if(-1!==o){var l=this.findListElement(this.list,"li","data-value",e),h=this.getDataByValue(e),c={e:t,item:l,itemData:h,isInteracted:!!t,cancel:!1};this.trigger("removing",c,function(r){if(r.cancel)n.removeIndex++;else{var c=n.value.slice(0);if(c.splice(o,1),ye()&&n.isServerRendered){var p=[].concat([],c);n.setProperties({value:0===p.length?null:p},!0)}else n.setProperties({value:[].concat([],c)},!0);if(null!==l){var d=n.findListElement(n.mainList,"li","data-value",e);l.setAttribute("aria-selected","false"),Ci([l],a),d&&(d.setAttribute("aria-selected","false"),Ci([l,d],a)),n.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,li:l,e:n,index:o}),n.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,li:l,e:t}),Di(n.inputElement,{"aria-activedescendant":l.id}),n.value&&n.value.length!==n.mainData.length&&"CheckBox"===n.mode&&n.showSelectAll&&!n.isSelectAll&&!s&&n.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:"uncheck"})}if(n.hideSelectedItem&&n.fields.groupBy&&n.hideGroupItem(e),n.updateMainList(!0,e),n.removeChip(e),n.updateChipStatus(),(n.value&&n.value.length?n.value.length:0)<n.maximumSelectionLength)Ci(n.list.querySelectorAll("li."+id+":not(.e-active)"),"e-disable");n.trigger("removed",r);var u=t&&t.currentTarget,m=!(!u||!u.classList.contains("e-selectall-parent"))||null;if(n.changeOnBlur||s||!t||!i||m||n.updateValueState(t,n.value,n.tempValues),i&&(n.selectAllEventData.push(h),n.selectAllEventEle.push(l)),1===i){n.changeOnBlur||n.updateValueState(t,n.value,n.tempValues);var f={event:t,items:n.selectAllEventEle,itemData:n.selectAllEventData,isInteracted:!!t,isChecked:!1};n.trigger("selectedAll",f),n.selectAllEventData=[],n.selectAllEventEle=[]}!s||1!==i&&null!==i||n.clearAllCallback(t,s),ye()&&n.isServerRendered&&(ae(n.value)||0===n.value.length)&&n.updatedataValueItems(t)}})}},t.prototype.updateMainList=function(e,t){if(this.allowFiltering||"CheckBox"===this.mode){var i=this.findListElement(this.mainList,"li","data-value",t);i&&(e?(i.setAttribute("aria-selected","false"),Ci([i],this.hideSelectedItem?ng:Qp),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","false"),Ci([i.firstElementChild.lastElementChild],"e-check"))):(i.setAttribute("aria-selected","true"),bi([i],this.hideSelectedItem?ng:Qp),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","true"),bi([i.firstElementChild.lastElementChild],"e-check"))))}},t.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&Li(t)}},t.prototype.setWidth=function(e){ae(e)||("number"==typeof e?this.overAllWrapper.style.width=ge(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:ge(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(ae(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(ae(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),ae(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.addValue=function(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.checkMaxSelection=function(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&bi(this.list.querySelectorAll("li."+id+":not(.e-active)"),"e-disable")},t.prototype.dispatchSelect=function(e,t,i,s,n){var o=this,r=this.listData;if(this.initStatus&&!s){var a=this.getDataByValue(e),l={e:t,item:i,itemData:a,isInteracted:!!t,cancel:!1};this.trigger("select",l,function(s){if(!s.cancel){if(n&&(o.selectAllEventData.push(a),o.selectAllEventEle.push(i)),1===n){var l={event:t,items:o.selectAllEventEle,itemData:o.selectAllEventData,isInteracted:!!t,isChecked:!0};o.trigger("selectedAll",l),o.selectAllEventData=[]}o.allowCustomValue&&o.isServerRendered&&o.listData!==r&&(o.listData=r),o.updateListSelectEventCallback(e,i,t)}})}},t.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},t.prototype.removeChipFocus=function(){var e,t;if(e=this.chipCollectionWrapper.querySelectorAll("span.e-chips"),t=this.chipCollectionWrapper.querySelectorAll("span."+"e-chips-close".split(" ")[0]),Ci(e,"e-chip-selected"),bt.isDevice)for(var i=0;i<t.length;i++)t[i].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var t=Mi(e.target,".e-chips"),i=t.querySelector("span."+"e-chips-close".split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains("e-chip-selected")||(this.removeChipFocus(),i.style.display="",t.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var t=!1;if(e){try{t=!!Ii(e,document).length}catch(e){t=!1}}return t},t.prototype.getChip=function(e,t,i){var s=this,n={text:t,value:t},o=this.createElement("span",{className:"e-chips",attrs:{"data-value":t,title:e}}),r=this.createElement("span",{className:"e-chipcontent"}),a=this.createElement("span",{className:"e-chips-close"});if(this.mainData&&(n=ye()&&this.isServerRendered?JSON.parse(JSON.stringify(this.getDataByValue(t))):this.getDataByValue(t)),this.valueTemplate&&!ae(n)){var l=Xt(this.multiCompiler(this.valueTemplate)?Ii(this.valueTemplate,document).innerHTML.trim():this.valueTemplate)(n,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,r);if(l&&l.length>0)for(var h=0;h<l.length;h++)r.appendChild(l[h]);this.renderReactTemplates(),this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!1,!1,!1)}else this.enableHtmlSanitizer?r.innerText=e:r.innerHTML=e;o.appendChild(r);var c={isInteracted:!!i,itemData:n,e:i,setClass:function(e){bi([o],e)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",c,function(e){e.cancel||(e.setClass&&"string"==typeof e.setClass&&ye()&&s.isServerRendered&&bi([o],e.setClass),bt.isDevice?(o.classList.add("e-mob-chip"),Ei([a],o),a.style.display="none",Ct.add(o,"click",s.onMobileChipInteraction,s)):(Ct.add(o,"mousedown",s.chipClick,s),s.showClearButton&&o.appendChild(a)),Ct.add(a,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(o),!s.changeOnBlur&&i&&s.updateValueState(i,s.value,s.tempValues))})},t.prototype.calcPopupWidth=function(){var e=ge(this.popupWidth);e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px");return e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,t){var i=!ae(t.iconCss),s=ae(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},re(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:s}),this.listCurrentOptions},t.prototype.renderPopup=function(){var t=this;if(this.list||e.prototype.render.call(this),!this.popupObj){document.body.appendChild(this.popupWrapper);var i=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&i&&this.filterParent&&(i.remove(),this.filterParent=null);var s=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),s-=this.header.offsetHeight),Ei([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),s-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),s-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"!==this.mode||this.showSelectAll||(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),s=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(s-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(s-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),s=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){var n={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",n),s-=this.searchBoxHeight),bi([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=ge(s),this.popupWrapper.style.maxHeight=ge(this.popupHeight)):this.list.style.maxHeight=ge(this.popupHeight),this.popupObj=new lo(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){t.popupObj.element.parentElement&&(t.popupObj.unwireScrollEvents(),Ti(t.popupObj.element))},open:function(){if(t.popupObj.resolveCollision(),!t.isFirstClick){var e=t.list.querySelector("ul");e&&(t.itemTemplate&&ye()&&t.isServerRendered?setTimeout(function(){t.mainList=t.ulElement},0):"CheckBox"!==t.mode&&(t.allowFiltering||t.allowCustomValue)&&""!==t.targetElement().trim()||(t.mainList=e.cloneNode?e.cloneNode(!0):e)),t.isFirstClick=!0}t.popupObj.wireScrollEvents(),"CheckBox"!==t.mode&&(t.allowFiltering||t.allowCustomValue)&&""!==t.targetElement().trim()||t.loadTemplate(),t.setScrollPosition(),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode,value:"focus"})},targetExitViewport:function(){bt.isDevice||t.hidePopup()}}),"CheckBox"===this.mode&&bt.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},t.prototype.setHeaderTemplate=function(){this.header&&this.header.remove(),this.header=this.createElement("div"),bi([this.header],"e-ddl-header");var e=Xt(this.multiCompiler(this.headerTemplate)?Ii(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(e&&e.length>0)for(var t=0;t<e.length;t++)this.header.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1),"CheckBox"===this.mode&&this.showSelectAll?wi([this.header],this.popupWrapper):Ei([this.header],this.popupWrapper),Ct.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),bi([this.footer],"e-ddl-footer");var e=Xt(this.multiCompiler(this.footerTemplate)?Ii(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(e&&e.length>0)for(var t=0;t<e.length;t++)this.footer.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),Ei([this.footer],this.popupWrapper),Ct.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.ClearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.value&&this.value.length>0){var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length&&(this.removeValue(t,e,null,!0),null!==this.value||!ye()||!this.isServerRendered);t=this.value[this.removeIndex]);}else this.clearAllCallback(e)}},t.prototype.clearAllCallback=function(e,t){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(ae(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),this.changeOnBlur||!t||!ae(this.value)&&0!==this.value.length||this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!ae(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()},t.prototype.resetValueHandler=function(e){var t=Mi(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}},t.prototype.wireEvent=function(){Ct.add(this.componentWrapper,"mousedown",this.wrapperClick,this),Ct.add(window,"resize",this.windowResize,this),Ct.add(this.inputElement,"focus",this.focusInHandler,this),Ct.add(this.inputElement,"keydown",this.onKeyDown,this),Ct.add(this.inputElement,"keyup",this.KeyUp,this),"CheckBox"!==this.mode&&Ct.add(this.inputElement,"input",this.onInput,this),Ct.add(this.inputElement,"blur",this.onBlur,this),Ct.add(this.componentWrapper,"mousemove",this.mouseIn,this);var e=Mi(this.inputElement,"form");e&&Ct.add(e,"reset",this.resetValueHandler,this),Ct.add(this.componentWrapper,"mouseout",this.mouseOut,this),Ct.add(this.overAllClear,"mouseup",this.ClearAll,this),Ct.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,bt.isDevice&&"mozilla"===bt.info.name&&this.search(e)},t.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.search(e)})},t.prototype.search=function(e){var t=this;if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),!this.checkTextLength()||this.allowFiltering||ae(e)||8===e.keyCode){var i=this.targetElement();if(ae(e)||(this.keyCode=e.keyCode),this.allowFiltering){var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,n){s.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,n))},event:e,cancel:!1};this.trigger("filtering",s,function(e){e.cancel||t.isFiltered||e.preventDefaultAction||(t.filterAction=!0,t.dataUpdater(t.dataSource,null,t.fields))})}else if(this.allowCustomValue){var n=new up;n=""!==i?n.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):n,this.dataUpdater(this.mainData,n,this.fields)}else{var o;o=this.list.querySelectorAll("li."+id+":not(.e-hide-listitem)");var r=pp(this.targetElement(),o,"StartsWith",this.ignoreCase);r&&null!==r.item?(this.addListFocus(r.item),this.list.scrollTop=r.item.offsetHeight*r.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()},t.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0},t.prototype.updateData=function(e,t){var i,s="",n="Delimiter"===this.mode||"CheckBox"===this.mode,o=[],r=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!ae(this.value))for(var a=0;!ae(this.value[a]);a++){var l=this.findListElement(ae(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[a]);ye()&&this.isServerRendered||!ae(l)||this.allowCustomValue?(s+=(i=this.listData?this.getTextByValue(this.value[a]):this.value[a])+e+" ",o.push(i)):(this.value.splice(a,1),a-=1),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[a]+'">'+a+"</option>"}this.setProperties({text:o.toString()},!0),n&&(this.updateWrapperText(this.delimiterWrapper,s),this.delimiterWrapper.setAttribute("id",he("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var h=t&&t.target,c=!(!h||!h.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!c||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=r,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(ae(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],i=0;e.length>i;i++){var s=this.getValueByText(e[i]);ae(s)?this.allowCustomValue&&t.push(e[i]):t.push(s)}t&&t.length&&this.setProperties({value:t},!0)}},t.prototype.renderList=function(t){!t&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(t=!0),e.prototype.render.call(this,t),this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,t=void 0,i=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!ae(this.value))for(var s=0;!ae(this.value[s]);s++)if(i=this.value[s],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){var n=this.listData.length,o={};te(this.fields.text,i,o),te(this.fields.value,i,o);var r=this.popupWrapper.querySelector("."+$p);this.addItem(o,n),this.popupWrapper.contains(r)&&(this.list.setAttribute("style",r.getAttribute("style")),this.popupWrapper.replaceChild(this.list,r),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!ae(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,bi([e],ng))},t.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+$p)&&e&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),Li(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup())},t.prototype.updateDataList=function(){this.mainList&&this.ulElement&&this.mainList.childElementCount<this.ulElement.childElementCount&&(this.mainList=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement)},t.prototype.isValidLI=function(e){return e&&!e.classList.contains(nd)&&!e.classList.contains(sd)&&e.classList.contains(id)},t.prototype.updateListSelection=function(e,t,i){var s=e.getAttribute("data-value"),n=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===n||!ae(n)&&"NaN"===n.toString())&&(n=s),this.removeHover(),this.value&&-1!==this.value.indexOf(n)?this.removeValue(n,t,i):this.dispatchSelect(n,t,e,"true"===e.getAttribute("aria-selected"),i)},t.prototype.updateListSelectEventCallback=function(e,t,i){var s=this,n=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,n,i);else{var o=t.cloneNode(!0),r=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&"number"==typeof ee(r,this.mainData[0])&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var a=this.getDataByValue(e),l={newData:a,cancel:!1};this.trigger("customValueSelection",l,function(t){t.cancel||(Ei([o],s.mainList),s.mainData.push(a),s.remoteCustomValue=!1,s.addValue(e,n,i),ye()&&s.isServerRendered&&(s.checkPlaceholderSize(),s.makeTextBoxEmpty()))})}ye()&&this.isServerRendered&&this.value&&this.list&&(this.value.length===this.list.querySelectorAll("li.e-list-item").length||this.value.length===this.maximumSelectionLength)&&(this.updatedataValueItems(i),this.checkPlaceholderSize()),ye()&&this.isServerRendered&&(this.checkPlaceholderSize(),this.makeTextBoxEmpty())},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?ng:Qp,t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(Ci(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!ae(this.mainList)){var s=this.mainList.querySelectorAll("."+e),n=s.length;if(s&&s.length)for(Ci(s,e);n>0;)s[n-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>n-1&&(t[n-1].firstElementChild.setAttribute("aria-checked","false"),Ci([t[n-1].firstElementChild.lastElementChild],"e-check")),s[n-1].firstElementChild.setAttribute("aria-checked","false"),Ci([s[n-1].firstElementChild.lastElementChild],"e-check")),n--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+Jp);e&&e.length&&Ci(e,Jp)},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+td),t=this.mainList.querySelectorAll("."+td);e&&e.length&&(Ci(e,td),Ci(t,td))}},t.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),bi([e],Jp)):null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!ae(this.fields.groupBy)&&(this.removeHover(),bi([e],Jp))},t.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),bi([e],td)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!ae(this.fields.groupBy)&&bi([e],td)},t.prototype.addListSelection=function(e){var t=this.hideSelectedItem?ng:Qp;if(this.isValidLI(e)&&!e.classList.contains(Jp)){if(bi([e],t),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var i=e.firstElementChild.getAttribute("aria-checked");("false"===i||ae(i))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),Di(this.inputElement,{"aria-activedescendant":e.id})}},t.prototype.updateDelimeter=function(e,t){this.updateData(e,t)},t.prototype.onMouseClick=function(e){var t=this;this.scrollFocusStatus=!1;var i=e.target,s=Mi(i,"."+id);if(Mi(i,"."+sd)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(i=i.classList.contains("e-list-group-item")?i.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),i.classList.remove("e-check"),i.classList.remove("e-stop"),Mi(i,".e-list-group-item").classList.remove("e-active"),i.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),i.classList.remove("e-stop"),i.classList.add("e-check"),Mi(i,".e-list-group-item").classList.add("e-active"),i.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(s)){var n=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(n-=1),n<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.checkPlaceholderSize(),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){t.updateDelimeter(t.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(i)}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(ae(s)?null:s.textContent),this.refreshPlaceHolder(),this.deselectHeader()}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!ae(this.fields.groupBy)){var t=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),t=this.findGroupAttrtibutes(e,0,0,0,0),t=this.findGroupAttrtibutes(e,t[0],t[1],t[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,t[0],t[1],t[2])}},t.prototype.findGroupAttrtibutes=function(e,t,i,s,n){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,null!=(e=n?e.nextElementSibling:e.previousElementSibling)););return[t,i,s]},t.prototype.updateCheckBox=function(e,t,i,s){if(null!==e){var n=e.getElementsByClassName("e-frame")[0];s===t?(n.classList.remove("e-stop"),n.classList.add("e-check"),Mi(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===i?(n.classList.remove("e-check"),n.classList.remove("e-stop"),Mi(n,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(n.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),Mi(n,".e-list-group-item").classList.add("e-active"),n.classList.add("e-check")):(n.classList.remove("e-check"),n.classList.add("e-stop"),Mi(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&Ci(t,"e-disable"),e===this.maximumSelectionLength&&bi(t,"e-disable")},t.prototype.onMouseOver=function(e){var t=Mi(e.target,"."+id);null===t&&"CheckBox"===this.mode&&!ae(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=Mi(e.target,"."+sd)),this.addListHover(t)},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var t=e.target;!ae(this.popupObj)&&Mi(t,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=(bt.isIE||"edge"===bt.info.name)&&document.activeElement===this.inputElement:this.scrollFocusStatus=!1}},t.prototype.wireListEvents=function(){Ct.add(document,"mousedown",this.onDocumentClick,this),Ct.add(this.list,"mousedown",this.onListMouseDown,this),Ct.add(this.list,"mouseup",this.onMouseClick,this),Ct.add(this.list,"mouseover",this.onMouseOver,this),Ct.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.unwireListEvents=function(){Ct.remove(document,"mousedown",this.onDocumentClick),this.list&&(Ct.remove(this.list,"mousedown",this.onListMouseDown),Ct.remove(this.list,"mouseup",this.onMouseClick),Ct.remove(this.list,"mouseover",this.onMouseOver),Ct.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?this.overAllClear.style.display="":this.overAllClear.style.display="none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){ae(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),ga({target:this.spinnerElement,width:bt.isDevice?"16px":"14px"},this.createElement),bi([this.spinnerElement],"e-ddl-disable-icon"),Ia(this.spinnerElement))},t.prototype.hideSpinner=function(){ae(this.spinnerElement)||(Aa(this.spinnerElement),Ci([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?Ti(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateWrapperText=function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=t:e.innerText=ln.sanitize(t)},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total"),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=1,n=void 0,o=void 0,r=0,a=void 0;this.updateWrapperText(this.viewWrapper,e);var l={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},h=new Js(this.getLocaleName(),l,this.locale);""===h.getConstant("actionFailureTemplate")&&(h=new Js("dropdowns",l,this.locale)),""===h.getConstant("noRecordsTemplate")&&(h=new Js("dropdowns",l,this.locale));var c=h.getConstant("overflowCountTemplate"),p=this.createElement("span",{className:"e-remain"}),d=Xt(c),u=Xt(h.getConstant("totalCountTemplate")),m=d({count:this.value.length},this,"overflowCountTemplate",null,!this.isStringTemplate,null,p);m&&m.length>0&&p.appendChild(m[0]),this.viewWrapper.appendChild(p),this.renderReactTemplates();var f=p.offsetWidth;if(Li(p),this.showDropDownIcon&&(r=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!ae(this.value))for(var g=0;!ae(this.value[g]);g++){if(e+=0===g?"":this.delimiterChar+" ",e+=t=this.getOverflowVal(g),t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),n+r+this.clearIconWidth>a){for(void 0!==i&&""!==i&&(t=i,g=s+1),this.updateWrapperText(this.viewWrapper,t),o=this.value.length-g,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);n+f+r+this.clearIconWidth>a&&0!==n&&""!==this.viewWrapper.innerHTML;){var v=this.viewWrapper.innerHTML.split(this.delimiterChar);v.pop(),this.viewWrapper.innerHTML=v.join(this.delimiterChar),o++,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)}break}n+f+r+this.clearIconWidth<=a?(i=e,s=g):0===g&&(i="",s=-1)}if(o>0){var y=a-r-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(p,this.viewWrapper,o,d,u,y)),this.updateRemainWidth(this.viewWrapper,y),this.updateRemainingText(p,r,o,d,u)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},t.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainTemplate=function(e,t,i,s,n,o){t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="";var r=s({count:i},this,"overflowCountTemplate",null,!this.isStringTemplate,null,e),a=n({count:i},this,"totalCountTemplate",null,!this.isStringTemplate,null,e);return e.appendChild(t.firstChild&&3===t.firstChild.nodeType?r&&r[0]:a&&a[0]),t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,o)),e},t.prototype.updateRemainingText=function(e,t,i,s,n){var o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(r+t>=o&&0!==r&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;r+t>o&&0!==r&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var a=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);a.pop(),this.viewWrapper.firstChild.nodeValue=a.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,r=this.viewWrapper.offsetWidth}var l=o-t;this.updateRemainTemplate(e,this.viewWrapper,i,s,n,l)}},t.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t},t.prototype.unWireEvent=function(){Ct.remove(this.componentWrapper,"mousedown",this.wrapperClick),Ct.remove(window,"resize",this.windowResize),Ct.remove(this.inputElement,"focus",this.focusInHandler),Ct.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&Ct.remove(this.inputElement,"input",this.onInput),Ct.remove(this.inputElement,"keyup",this.KeyUp);var e=Mi(this.inputElement,"form");e&&Ct.remove(e,"reset",this.resetValueHandler),Ct.remove(this.inputElement,"blur",this.onBlur),Ct.remove(this.componentWrapper,"mousemove",this.mouseIn),Ct.remove(this.componentWrapper,"mouseout",this.mouseOut),Ct.remove(this.overAllClear,"mousedown",this.ClearAll),Ct.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.selectAllItem=function(e,t,i){var s;if(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&this.isPopupOpen()&&t&&t.target&&Mi(t.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!ae(this.fields.groupBy)){var n=t?t.target:null;if((n=(n=t&&32===t.keyCode?i:n)&&n.classList.contains("e-frame")?n.parentElement.parentElement:n)&&n.classList.contains("e-list-group-item")){var o=n.nextElementSibling;if(ae(o))return;for(;o.classList.contains("e-list-item");){if(e){if(!o.firstElementChild.lastElementChild.classList.contains("e-check")){var r=this.value&&this.value.length?this.value.length:0;o.classList.contains("e-active")&&(r-=1),r<this.maximumSelectionLength&&this.updateListSelection(o,t)}}else o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,t);if(null==(o=o.nextElementSibling))break}if(n.classList.contains("e-list-group-item")){var a=this.list.getElementsByClassName("e-item-focus")[0];a&&a.classList.remove("e-item-focus"),e?n.classList.add("e-active"):n.classList.remove("e-active"),n.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e)},t.prototype.updateValue=function(e,t,i){var s=this,n=t.length;if(t&&t.length){var o=0,r=0;for(r=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength;o<n&&o<=50&&o<r;)this.updateListSelection(t[o],e,n-o),this.enableGroupCheckBox&&this.findGroupStart(t[o]),o++;n>50&&setTimeout(function(){for(;o<n&&o<r;)s.updateListSelection(t[o],e,n-o),s.enableGroupCheckBox&&s.findGroupStart(t[o]),o++;ye()&&s.isServerRendered||(s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement())},0)}ye()&&this.isServerRendered||(this.updatedataValueItems(e),this.checkPlaceholderSize(),n<=50&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement()))},t.prototype.updateHiddenElement=function(){var e=this,t="",i="",s="",n=[];"CheckBox"===this.mode&&(this.value.map(function(o,r){t+='<option selected value ="'+o+'">'+r+"</option>",s=e.listData?e.getTextByValue(o):o,i+=s+e.delimiterChar+" ",n.push(s)}),this.hiddenElement.innerHTML=t,this.updateWrapperText(this.delimiterWrapper,i),this.delimiterWrapper.setAttribute("id",he("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.setProperties({text:n.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){var t=e&&e.target&&(Mi(e.target,".e-selectall-parent")||Mi(e.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||t)?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),t||this.isSelectAll||this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){ae(this.list)?this.renderPopup():this.resetList(this.dataSource),!this.value||!this.value.length||ye()&&this.isServerRendered||(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(t,i){var s=this;if(ae(this.list))this.selectAllAction=function(){if("CheckBox"===s.mode&&s.showSelectAll){var e={module:"CheckBoxSelection",enable:"CheckBox"===s.mode,value:t?"check":"uncheck"};s.notify("checkSelectAll",e)}s.selectAllItem(t,i),s.selectAllAction=null},e.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var n={value:t?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"};this.notify("checkSelectAll",n)}this.selectAllItem(t,i)}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(t,i){(t.dataSource&&!ae(Object.keys(t.dataSource))||t.query&&!ae(Object.keys(t.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],t));for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];switch(o){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(ae(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(t.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,i.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup();break;case"width":this.setWidth(t.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:t.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(t.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(t.enableRtl),e.prototype.onPropertyChanged.call(this,t,i);break;case"readonly":this.updateReadonly(t.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(t.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:var r;r=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,r.newProperty,r.oldProperty)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.updateVal=function(e,t,i){this.list&&(!(this.dataSource instanceof Ip)||this.listData&&this.mainList&&this.mainData)?("text"===i&&(this.initialTextUpdate(),e=this.value),(ae(this.value)||0===this.value.length)&&(this.tempValues=t),this.initialValueUpdate(),"Box"===this.mode||this.inputFocus||this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()):this.onLoadSelect(),this.changeOnBlur||this.updateValueState(null,e,t)},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.hidePopup=function(){var e=this;if(this.isPopupOpen()){var t={name:"FadeOut",duration:100,delay:100},i={popup:this.popupObj,cancel:!1,animation:t};this.trigger("close",i,function(t){t.cancel||(e.beforePopupOpen=!1,e.overAllWrapper.classList.remove("e-icon-anim"),e.popupObj.hide(new vs(t.animation)),Di(e.inputElement,{"aria-expanded":"false"}),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"clear"}),e.popupObj.hide(),Ci([document.body,e.popupObj.element],"e-popup-full-page"),Ct.remove(e.list,"keydown",e.onKeyDown))})}},t.prototype.showPopup=function(){var t=this;if(this.enabled){this.trigger("beforeOpen",{cancel:!1},function(i){if(!i.cancel){if(ye()&&t.isServerRendered&&t.itemTemplate&&(t.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,!1),"CheckBox"!==t.mode&&t.list&&t.refreshSelection()),!t.ulElement)return t.beforePopupOpen=!0,e.prototype.render.call(t),void("CheckBox"===t.mode&&bt.isDevice&&t.allowFiltering&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode}));"CheckBox"===t.mode&&bt.isDevice&&t.allowFiltering&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode});var s=t.ulElement.querySelectorAll("li.e-list-item").length,n=t.ulElement.querySelectorAll("li."+id+"."+ng).length;if(s>0&&s===n&&n===t.mainData.length)return void(t.beforePopupOpen=!1);t.onPopupShown()}})}},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},t.prototype.render=function(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&bi([this.overAllWrapper],"e-checkbox"),bt.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",he("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",he("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!bt.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?eg(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):he("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()},t.prototype.checkInitialValue=function(){var e=this,t=this.dataSource instanceof Array?this.dataSource.length>0:!ae(this.dataSource);if((!this.value||!this.value.length)&&ae(this.text)&&!t&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var i=this.element.options,s=[],n="",o=0,r=i.length;o<r;o++){var a=i[o];ae(a.getAttribute("selected"))||(a.getAttribute("value")?s.push(a.getAttribute("value")):n+=a.text+this.delimiterChar)}s.length>0?this.setProperties({value:s},!0):""!==n&&this.setProperties({text:n},!0),(s.length>0||""!==n)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!ae(this.text))&&this.renderPopup(),ae(this.text)||!ae(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof Ip?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),ae(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.setFloatLabelType=function(){var e,t,i,s,n,o,r,a,l;e=this.overAllWrapper,t=this.componentWrapper,i=this.searchWrapper,s=this.inputElement,n=this.value,this.floatLabelType,o=this.placeholder,a=t.querySelector("."+Qf),l=t.querySelector("."+Zf),ae(a)?tg(n,s,r=null!==o?o:""):(r=a.innerText,Ti(i.querySelector("."+Qf)),tg(n,s,r),ae(l)||Ti(i.querySelector("."+Zf))),e.classList.remove("e-float-input"),"Never"!==this.floatLabelType&&eg(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){!ae(this.value)&&this.value.length||"Always"===this.floatLabelType?bi([this.overAllWrapper],"e-valid-input"):Ci([this.overAllWrapper],"e-valid-input")},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),bi([this.componentWrapper],["e-down-icon"])):ae(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),Ci([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){"Box"===this.mode||this.setDynValue&&"Default"===this.mode&&this.inputFocus||this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,e.prototype.destroy.call(this);for(var t=["readonly","aria-disabled","aria-placeholder","placeholder"],i=t.length;i>0;)this.inputElement.removeAttribute(t[i-1]),i--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?Li(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),Li(this.overAllWrapper)))},sg([rs({text:null,value:null,iconCss:null,groupBy:null},Yp)],t.prototype,"fields",void 0),sg([os(!1)],t.prototype,"enablePersistence",void 0),sg([os(null)],t.prototype,"groupTemplate",void 0),sg([os("No records found")],t.prototype,"noRecordsTemplate",void 0),sg([os("Request failed")],t.prototype,"actionFailureTemplate",void 0),sg([os("None")],t.prototype,"sortOrder",void 0),sg([os(!0)],t.prototype,"enabled",void 0),sg([os(!1)],t.prototype,"enableHtmlSanitizer",void 0),sg([os([])],t.prototype,"dataSource",void 0),sg([os(null)],t.prototype,"query",void 0),sg([os("StartsWith")],t.prototype,"filterType",void 0),sg([os(1e3)],t.prototype,"zIndex",void 0),sg([os(!1)],t.prototype,"ignoreAccent",void 0),sg([os()],t.prototype,"locale",void 0),sg([os(!1)],t.prototype,"enableGroupCheckBox",void 0),sg([os(null)],t.prototype,"cssClass",void 0),sg([os("100%")],t.prototype,"width",void 0),sg([os("300px")],t.prototype,"popupHeight",void 0),sg([os("100%")],t.prototype,"popupWidth",void 0),sg([os(null)],t.prototype,"placeholder",void 0),sg([os(null)],t.prototype,"filterBarPlaceholder",void 0),sg([os({})],t.prototype,"htmlAttributes",void 0),sg([os(null)],t.prototype,"valueTemplate",void 0),sg([os(null)],t.prototype,"headerTemplate",void 0),sg([os(null)],t.prototype,"footerTemplate",void 0),sg([os(null)],t.prototype,"itemTemplate",void 0),sg([os(null)],t.prototype,"allowFiltering",void 0),sg([os(!0)],t.prototype,"changeOnBlur",void 0),sg([os(!1)],t.prototype,"allowCustomValue",void 0),sg([os(!0)],t.prototype,"showClearButton",void 0),sg([os(1e3)],t.prototype,"maximumSelectionLength",void 0),sg([os(!1)],t.prototype,"readonly",void 0),sg([os(null)],t.prototype,"text",void 0),sg([os(null)],t.prototype,"value",void 0),sg([os(!0)],t.prototype,"hideSelectedItem",void 0),sg([os(!0)],t.prototype,"closePopupOnSelect",void 0),sg([os("Default")],t.prototype,"mode",void 0),sg([os(",")],t.prototype,"delimiterChar",void 0),sg([os(!0)],t.prototype,"ignoreCase",void 0),sg([os(!1)],t.prototype,"showDropDownIcon",void 0),sg([os("Never")],t.prototype,"floatLabelType",void 0),sg([os(!1)],t.prototype,"showSelectAll",void 0),sg([os("Select All")],t.prototype,"selectAllText",void 0),sg([os("Unselect All")],t.prototype,"unSelectAllText",void 0),sg([os(!0)],t.prototype,"enableSelectionOrder",void 0),sg([os(!0)],t.prototype,"openOnClick",void 0),sg([cs()],t.prototype,"change",void 0),sg([cs()],t.prototype,"removing",void 0),sg([cs()],t.prototype,"removed",void 0),sg([cs()],t.prototype,"selectedAll",void 0),sg([cs()],t.prototype,"beforeOpen",void 0),sg([cs()],t.prototype,"open",void 0),sg([cs()],t.prototype,"close",void 0),sg([cs()],t.prototype,"blur",void 0),sg([cs()],t.prototype,"focus",void 0),sg([cs()],t.prototype,"chipSelection",void 0),sg([cs()],t.prototype,"filtering",void 0),sg([cs()],t.prototype,"tagging",void 0),sg([cs()],t.prototype,"customValueSelection",void 0),t=sg([ps],t)}(rd),rg=function(){function e(e){this.activeLi=[],this.activeEle=[],this.parent=e,this.removeEventListener(),this.addEventListener()}return e.prototype.getModuleName=function(){return"CheckBoxSelection"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlur,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),Ct.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlur),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},e.prototype.listOption=function(e){var t=this;if(ae(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e)};else{var i=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e),i.apply(t,[e])}}},e.prototype.setPlaceholder=function(e){Na.setPlaceholder(e.filterBarPlaceholder,this.filterInput)},e.prototype.checboxCreate=function(e){var t;if(t=ae(e.item)?e:e.item,this.parent.enableGroupCheckBox||"e-list-group-item "!==t.className&&"e-list-group-item"!==t.className){var i=fo(this.parent.createElement,!0),s=Ii("div.e-icons",t);t.getAttribute("data-uid");t.insertBefore(i,t.childNodes[ae(s)?0:1]),Ii(".e-frame",i);Ii(".e-frame",i);return this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),t}return t},e.prototype.setSelectAll=function(){this.parent.showSelectAll?(ae(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(ae(this.parent.filterParent)?Ei([this.checkAllParent],this.parent.popupWrapper):Ei([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(ae(this.parent.filterParent)?wi([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),Ct.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&(!this.parent.isDynamicDataChange||!ye())||this.parent.isDynamicDataChange&&!ae(this.parent.value)&&this.parent.value.length<=1&&ye()?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):ae(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},e.prototype.destroy=function(){this.removeEventListener(),Ct.remove(document,"mousedown",this.onDocumentClick)},e.prototype.listSelection=function(e){var t,i=ye()&&e.module&&"listbox"===e.module;if(ae(e.e)){var s=e.li.querySelector(".e-checkbox-wrapper");t=s?i?s.querySelector(".e-frame"):s.childNodes[1]:e.li.lastElementChild.childNodes[1]}else{var n=e.li.querySelector(".e-checkbox-wrapper .e-frame");t=ae(e.e.target)?i?n:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]:e.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(e.e.target))?e.e.target:i?n:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(t=e.li.firstElementChild.childNodes[1]),ae(t)||(this.checkWrapper=Mi(t,".e-checkbox-wrapper")),!ae(this.checkWrapper)){var o=Ii(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,o.classList.contains("e-check"),e.li,e.e,!1)}},e.prototype.validateCheckNode=function(e,t,i,s,n){this.changeState(e,t?"uncheck":"check",s,!0,n)},e.prototype.clickHandler=function(e){var t;t=e.currentTarget.classList.contains(this.checkAllParent.className)?e.currentTarget.firstElementChild.lastElementChild:e.currentTarget,this.checkWrapper=Mi(t,".e-checkbox-wrapper");if(!ae(this.checkWrapper)){var i=Ii(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,i.classList.contains("e-check"),null,e,!0)}e.preventDefault()},e.prototype.changeState=function(e,t,i,s,n){var o,r=e.getElementsByClassName("e-frame")[0];"check"!==t||r.classList.contains("e-check")?"uncheck"===t&&(r.classList.contains("e-check")||r.classList.contains("e-stop"))?(Ci([r],["e-check","e-stop"]),o="false",n&&(this.parent.selectAllItems(!1,i),this.setLocale())):"indeterminate"!==t||r.classList.contains("e-stop")||(Ci([r],["e-check"]),r.classList.add("e-stop"),o="false",n&&(this.parent.selectAllItems(!1,i),this.setLocale())):(r.classList.remove("e-stop"),r.classList.add("e-check"),o="true",n&&(this.parent.selectAllItems(!0,i),this.setLocale(!0))),ae(o="check"===t?"true":"uncheck"===t?"false":o)||e.setAttribute("aria-checked",o)},e.prototype.setSearchBox=function(e){if(ae(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:"e-filter-parent"}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var t=!1;return bt.isDevice&&(t=!0,this.parent.mobFilter=!1),this.filterInputObj=Na.createInput({element:this.filterInput,buttons:t?["e-input-group-icon e-back-icon e-icons","e-input-group-icon e-clear-icon e-icons"]:["e-input-group-icon e-clear-icon e-icons"],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),ae(this.parent.cssClass)||(-1!==this.parent.cssClass.split(" ").indexOf("e-outline")?bi([this.filterInputObj.container],"e-outline"):-1!==this.parent.cssClass.split(" ").indexOf("e-filled")&&bi([this.filterInputObj.container],"e-filled")),Ei([this.filterInputObj.container],this.parent.filterParent),wi([this.parent.filterParent],e.popupElement),Di(this.filterInput,{"aria-disabled":"false","aria-owns":this.parent.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector(".e-clear-icon"),!bt.isDevice&&this.clearIconElement&&(Ct.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),Ct.add(this.filterInput,"input",this.parent.onInput,this.parent),Ct.add(this.filterInput,"keyup",this.parent.KeyUp,this.parent),Ct.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),Ct.add(this.filterInput,"blur",this.onBlur,this),Ct.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},e.prototype.clickOnBackIcon=function(e){this.parent.hidePopup(),Ci([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.inputElement.focus()},e.prototype.clearText=function(e){this.parent.targetInputElement.value="",this.parent.allowFiltering&&""===this.parent.targetInputElement.value&&this.parent.search(null),this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(e),e.preventDefault()},e.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector(".e-clear-icon"),this.clearIconElement.style.visibility="hidden",Ct.add(this.backIconElement,"click",this.clickOnBackIcon,this),Ct.add(this.clearIconElement,"click",this.clearText,this)},e.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height,t=0;this.checkAllParent&&(t=this.checkAllParent.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-e-t+"px",this.parent.list.style.height=window.innerHeight-e-t+"px";var i=this.filterInput.parentElement.querySelector(".e-clear-icon");Ti(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.setPopupFullScreen=function(){Di(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),bi([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%"},e.prototype.targetElement=function(){return ae(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible"),this.parent.targetInputElement.value},e.prototype.onBlur=function(e){if(!this.parent.element.classList.contains("e-listbox")){var t=void 0;if(this.parent.keyAction)return;if(bt.isIE&&(t=!ae(e)&&e.target),bt.isIE||(t=!ae(e)&&e.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(t)&&!bt.isIE&&this.filterInput)return void this.filterInput.focus();if(this.parent.scrollFocusStatus&&this.filterInput)return e.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(e,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!bt.isDevice&&this.parent.hidePopup()}},e.prototype.onDocumentClick=function(e){if("listbox"!==this.parent.getLocaleName()){var t=e.target;!ae(this.parent.popupObj)&&Mi(t,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&""!==this.filterInput.value||e.preventDefault()),!ae(this.parent.popupObj)&&Mi(t,'[id="'+this.parent.popupObj.element.id+'"]')||this.parent.overAllWrapper.contains(e.target)?this.parent.scrollFocusStatus=(bt.isIE||"edge"===bt.info.name)&&document.activeElement===this.filterInput:(this.parent.overAllWrapper.classList.contains(td)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlur(e,!0),this.parent.focused=!0),this.parent.overAllWrapper.contains(e.target)||!this.parent.overAllWrapper.classList.contains("e-input-focus")||this.parent.isPopupOpen()||(bt.isIE?this.parent.onBlur():this.parent.onBlur(e)),this.filterInput===t&&this.filterInput.focus()}},e.prototype.getFocus=function(e){this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.keyAction&&"clear"!==e.value&&"focus"!==e.value?this.parent.keyAction=!1:("focus"===e.value&&(this.filterInput.focus(),this.parent.removeFocus(),Ct.remove(this.parent.list,"keydown",this.parent.onKeyDown)),"clear"===e.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden"))},e.prototype.checkSelectAll=function(e){"check"===e.value&&"true"!==this.checkAllParent.getAttribute("aria-checked")&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale(!0)),"uncheck"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale()),"indeterminate"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale())},e.prototype.setLocale=function(e){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var t=e?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var i=e?"unSelectAllText":"selectAllText",s=0,n=Xt(t)({},this.parent,i,null,!this.parent.isStringTemplate);s<n.length;s++){var o=n[s];this.selectAllSpan.textContent=o.textContent}}else{var r=new Js(this.parent.getLocaleName(),{},this.parent.locale);""===r.getConstant("selectAllText")&&(r=new Js("dropdowns",{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.parent.locale)),this.selectAllSpan.textContent=e?r.getConstant("unSelectAllText"):r.getConstant("selectAllText")}},e.prototype.getActiveList=function(e){e.li.classList.contains("e-active")?this.activeLi.push(e.li.cloneNode(!0)):this.activeLi.splice(e.index,1)},e.prototype.setReorder=function(e){if(this.parent.enableSelectionOrder&&!ae(this.parent.value)){var t=this.parent.ulElement.querySelectorAll("li.e-active").length,i=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});this.parent.createElement("div");t>0&&(Ei(this.parent.ulElement.querySelectorAll("li.e-active"),i),bi(this.parent.ulElement.querySelectorAll("li.e-active"),"e-reorder-hide"),wi([i],this.parent.list)),this.parent.focusAtFirstListItem()}},e}(),ag=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),lg=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},hg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ag(t,e),lg([os("Multiple")],t.prototype,"mode",void 0),lg([os(!1)],t.prototype,"showCheckbox",void 0),lg([os(!1)],t.prototype,"showSelectAll",void 0),lg([os("Left")],t.prototype,"checkboxPosition",void 0),t}(Ls),cg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ag(t,e),lg([os([])],t.prototype,"items",void 0),lg([os("Right")],t.prototype,"position",void 0),t}(Ls),pg=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isValidKey=!1,s.isDataSourceUpdate=!1,s.keyDownStatus=!1,s}var i;return ag(t,e),i=t,t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.render=function(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,ye()&&this.isServerRendered?(this.list=this.element.parentElement,this.liCollections=this.list.querySelectorAll("."+Ap.li),this.mainList=this.ulElement=this.list.querySelector("ul"),this.setSelection(this.value),this.allowFiltering&&this.setFiltering(),this.initToolbarAndStyles(),this.updateSelectionSettings(),this.wireEvents(),this.initDraggable(),this.initLoad=!1):e.prototype.render.call(this),this.renderComplete()},t.prototype.updateBlazorListData=function(e,t,i){t&&(this.liCollections=this.list.querySelectorAll("."+Ap.li),this.mainList=this.ulElement=this.list.querySelector("ul"),this.allowDragAndDrop&&!this.ulElement.classList.contains("e-sortable")&&this.initDraggable(),i&&this.selectItems(this.listData,!1)),ae(e)||(this.sortedData=this.jsonData=this.listData=e)},t.prototype.initWrapper=function(){var e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(td),this.itemTemplate&&this.renderReactTemplates(),Ci([this.list],[Zp,Xp]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),Di(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},t.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var e=new Js(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=e.getConstant("selectAllText"),this.unSelectAllText=e.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},t.prototype.initDraggable=function(){var e=this;this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new qp(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return e.createElement("span",{className:"e-placeholder"})},helper:function(t){var i=e.list.cloneNode(),s=t.sender.cloneNode(!0);i.appendChild(s);var n=e.getItems()[0];return i.style.width=n.offsetWidth+"px",i.style.height=n.offsetHeight+"px",(e.value&&e.value.length)>1&&e.isSelected(s)&&s.appendChild(e.createElement("span",{className:"e-list-badge",innerHTML:e.value.length+""})),i.style.zIndex=co(e.element)+"",i}})},t.prototype.updateActionCompleteData=function(e,t){this.jsonData.push(t)},t.prototype.initToolbar=function(){var e,t=this.toolbarSettings.position,i=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){var s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),n=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+t.toLowerCase()});this.list.parentElement.insertBefore(n,this.list),n.appendChild("Right"===t?this.list:s),n.appendChild("Right"===t?s:this.list),this.createButtons(s),this.element.id||(this.element.id=he("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}e=this.element.getAttribute("data-value"),i&&e&&i!==e?(this.tBListBox=qi(document.getElementById(i),this.getModuleName()),this.tBListBox.updateToolBarState()):e&&(this.tBListBox=qi(document.getElementById(e),this.getModuleName()),this.tBListBox.updateToolBarState())},t.prototype.createButtons=function(e){var t,i,s=this,n=new Js(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(function(o){i=n.getConstant(o),t=s.createElement("button",{attrs:{type:"button","data-value":o,title:i,"aria-label":i}}),e.appendChild(t),new Po({iconCss:"e-icons e-"+o.toLowerCase()},t).createElement=s.createElement})},t.prototype.validationAttribute=function(t,i){e.prototype.validationAttribute.call(this,t,i),i.required=t.required,t.required=!1},t.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=ge(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?bi([this.list],"e-filter-list"):Ci([this.list],"e-filter-list")},t.prototype.setCssClass=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.cssClass&&bi([e],this.cssClass.split(" ")),this.enableRtl&&bi([e],"e-rtl")},t.prototype.setEnable=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?Ci([e],Ap.disabled):(bi([e],Ap.disabled),ye()&&this.isServerRendered&&this.toolbarSettings.items.length&&Ci([this.list],Ap.disabled))},t.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=ge(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),ga({target:this.spinner},this.createElement),Ia(this.spinner)},t.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&Aa(this.spinner),this.spinner.parentElement&&Ti(this.spinner)},t.prototype.onInput=function(){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,this.refreshClearIcon()},t.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var e=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(e)},t.prototype.refreshClearIcon=function(){this.filterInput.parentElement.querySelector("."+dg.clearIcon)&&(this.filterInput.parentElement.querySelector("."+dg.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")},t.prototype.onActionComplete=function(t,i,s){var n;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(n=ye()&&this.isServerRendered?this.list.getElementsByClassName("e-filter-parent")[0]:this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),e.prototype.onActionComplete.call(this,t,i,s),this.allowFiltering&&!ae(n)&&(this.list.insertBefore(n,this.list.firstElementChild),ye()||this.isServerRendered||(this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(n))),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],re(this.jsonData,i,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],re(this.jsonData,i,[]),this.isDataSourceUpdate=!1),this.allowFiltering){var o=this.list.getElementsByClassName("e-input-filter")[0],r=this.filterInput.value.length;o.selectionStart=r,o.selectionEnd=r,o.focus()}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!ae(s)){var a=this.scope.replace("#","");qi(document.getElementById(a),this.getModuleName()).initToolbar()}this.initLoad=!1},t.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},t.prototype.triggerDragStart=function(e){var t,i=this;e=re(this.getDragArgs(e),{dragSelected:!0}),bt.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,function(s){i.allowDragAll=s.dragSelected,i.allowDragAll||(t=i.ulElement.getElementsByClassName("e-list-badge")[0])&&Ti(t),ye()&&e.bindEvents(e.dragElement)})},t.prototype.triggerDrag=function(e){this.trigger("drag",this.getDragArgs(e));var t=this.getComponent(e.target);if(t&&0===t.listData.length){var i=t.ulElement.getElementsByClassName("e-list-nrt")[0];i&&t.ulElement.removeChild(i)}},t.prototype.beforeDragEnd=function(e){var t=this.getFormattedValue(e.droppedElement.getAttribute("data-value"));this.value.indexOf(t)>-1?e.items=this.getDataByValues(this.value):e.items=this.getDataByValues([t]),this.trigger("beforeDrop",e)},t.prototype.dragEnd=function(e){var t,i,s,n,o,r,a=this,l=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),h=this.getComponent(e.droppedElement),c=this.getDragArgs({target:e.droppedElement},!0),p={previousData:this.dataSource},d={previousData:h.dataSource},u=re({},c,{target:e.target,source:{previousData:this.dataSource}});if(h!==this){var m=re(p,{currentData:this.listData});u=re(u,{source:m,destination:d})}if(bt.isIos&&(this.list.style.overflow=""),h===this){var f=this.ulElement;t=[].slice.call(this.listData),i=[].slice.call(this.liCollections),s=[].slice.call(this.jsonData),r=[].slice.call(this.sortedData);var g=e.currentIndex,v=e.currentIndex=this.getCurIdx(this,e.currentIndex),y=t.indexOf(this.getDataByValue(l)),b=s.indexOf(this.getDataByValue(l)),C=r.indexOf(this.getDataByValue(l));if(t.splice(v,0,t.splice(y,1)[0]),r.splice(g,0,r.splice(C,1)[0]),s.splice(v,0,s.splice(b,1)[0]),ye()||i.splice(v,0,i.splice(y,1)[0]),this.allowDragAll&&(o=this.value&&Array.prototype.indexOf.call(this.value,l)>-1?this.value:[l]).forEach(function(n){if(n!==l){var o=t.indexOf(a.getDataByValue(n)),h=s.indexOf(a.getDataByValue(n)),c=r.indexOf(a.getDataByValue(n));o>v&&v++,s.splice(v,0,s.splice(h,1)[0]),t.splice(v,0,t.splice(o,1)[0]),r.splice(g,0,r.splice(c,1)[0]),ye()||(i.splice(v,0,i.splice(o,1)[0]),f.insertBefore(a.getItems()[a.getIndexByValue(n)],f.getElementsByClassName("e-placeholder")[0]))}else if(ye()){var p=[].slice.call(a.ulElement.getElementsByClassName(Ap.li)),d=a.ulElement.removeChild(p[e.currentIndex]);p.splice(e.currentIndex,1),a.ulElement.insertBefore(d,p[e.previousIndex])}}),this.listData=t,this.jsonData=s,this.sortedData=r,this.liCollections=i,ye()){var S=this.value;this.interopAdaptor.invokeMethodAsync("UpdateListData",this.listData).then(function(){a.updateBlazorListData(null,!0),a.selectItems(a.listData,!1),a.selectItems(S)})}}else{var x,w=[].slice.call(this.liCollections),E=e.currentIndex=this.getCurIdx(h,e.currentIndex),k=h.ulElement;t=[].slice.call(h.listData),i=[].slice.call(h.liCollections),s=[].slice.call(h.jsonData),r=[].slice.call(h.sortedData),o=this.value&&Array.prototype.indexOf.call(this.value,l)>-1&&this.allowDragAll?this.value:[l];var T=[].slice.call(this.listData),L=[].slice.call(this.sortedData);if(o.forEach(function(o,h){n=a.getDataByValue(o);var c=a.listData.indexOf(n),p=a.jsonData.indexOf(n),d=a.sortedData.indexOf(n);T.splice(c,1),a.jsonData.splice(p,1),L.splice(d,1),a.listData=T,a.sortedData=L;var u=o===l?e.currentIndex:E;if(t.splice(u,0,n),s.splice(u,0,n),r.splice(u,0,n),ye()||i.splice(u,0,w.splice(c,1)[0]),o)x=a.getItems()[a.getIndexByValue(o)];else for(var m=a.getItems(),f=0;f<m.length;f++)if(null===m[f].getAttribute("data-value")&&m[f].classList.contains("e-list-item")){x=m[f];break}x||(x=e.helper),a.removeSelected(a,o===l?[e.droppedElement]:[x]),ye()?0===h&&a.ulElement.insertBefore(k.getElementsByClassName(Ap.li)[e.currentIndex],a.ulElement.getElementsByClassName(Ap.li)[e.previousIndex]):k.insertBefore(x,k.getElementsByClassName("e-placeholder")[0]),E++}),ye())this.interopAdaptor.invokeMethodAsync("UpdateListData",this.listData).then(function(){a.updateSelectedOptions(),a.fields.groupBy&&a.setSelection(),a.updateBlazorListData(null,!0,null==a.value||!a.value.length)}),h.interopAdaptor.invokeMethodAsync("UpdateListData",t).then(function(){("None"!==h.sortOrder||a.selectionSettings.showCheckbox!==h.selectionSettings.showCheckbox||h.fields.groupBy)&&h.setSelection(),h.updateBlazorListData(null,!0,null==h.value||!h.value.length)});else{if(this.fields.groupBy&&(this.ulElement.innerHTML=this.renderItems(this.listData,this.fields).innerHTML,this.setSelection()),"None"!==h.sortOrder||this.selectionSettings.showCheckbox!==h.selectionSettings.showCheckbox||h.fields.groupBy||h.itemTemplate||this.itemTemplate){var D=qi(k,"sortable");k.innerHTML=h.renderItems(t,h.fields).innerHTML,D.placeHolderElement&&k.appendChild(D.placeHolderElement),k.appendChild(e.helper),h.setSelection()}this.liCollections=w,h.liCollections=i}h.jsonData=re([],[],s,!1),h.listData=re([],[],t,!1),h.sortedData=re([],[],r,!1),0===this.listData.length&&this.l10nUpdate()}if(this===h){m=re(p,{currentData:t});u=re(u,{source:m})}else{var I=re(d,{currentData:t});u=re(u,{destination:I})}this.trigger("drop",u)},t.prototype.removeSelected=function(e,t){e.selectionSettings.showCheckbox?t.forEach(function(e){e.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):Ci(t,Ap.selected)},t.prototype.getCurIdx=function(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter(function(e){return e.classList.contains(Ap.group)}).length),t},t.prototype.getComponent=function(e){var t,i="EJS-LISTBOX"===this.element.tagName?Mi(e,".e-listbox"):Mi(e,".e-listbox-wrapper")&&Mi(e,".e-listbox-wrapper").querySelector(".e-listbox");return i&&(t=qi(i,this.getModuleName())),t},t.prototype.listOption=function(t,i){return this.listCurrentOptions=e.prototype.listOption.call(this,t,i),this.listCurrentOptions=re({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},t.prototype.triggerBeforeItemRender=function(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})},t.prototype.requiredModules=function(){var e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e},t.prototype.enableItems=function(e,t,i){var s,n=this;void 0===t&&(t=!0),e.forEach(function(e){var o;if(ye()&&"object"==typeof e){if(ae(o=ee(i?n.fields.value:n.fields.text,e)))return}else o=e;(s=n.findListElement(n.list,"li","data-value",i?o:n.getValueByText(o)))&&(t?(Ci([s],Ap.disabled),s.removeAttribute("aria-disabled")):(bi([s],Ap.disabled),s.setAttribute("aria-disabled","true")))})},t.prototype.selectItems=function(e,t,i){void 0===t&&(t=!0),this.setSelection(e,t,!i),this.updateSelectedOptions()},t.prototype.selectAll=function(e){void 0===e&&(e=!0),this.selectAllItems(e)},t.prototype.addItems=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.removeItems=function(e,t){this.removeItem(e,t)},t.prototype.removeItem=function(e,t){var i=[],s=this.list.querySelectorAll("."+id);if(e){e=e instanceof Array?e:[e];var n=this.fields,o=void 0,r=[],a=void 0;re(r,[],this.listData);for(var l=[],h=[],c=0;c<e.length;c++){o=e[c]instanceof Object?ee(n.value,e[c]):e[c].toString();for(var p=0,d=r.length;p<d;p++)(r[p]instanceof Object?ee(n.value,r[p]):r[p].toString())===o&&(a=this.getIndexByValue(o),i.push(s[a]),l.push(p),h.push(a))}for(var u=l.length-1;u>=0;u--)this.listData.splice(l[u],1);for(u=h.length-1;u>=0;u--)this.updateLiCollection(h[u])}else t=t||0,i.push(s[t]),this.listData.splice(t,1),this.updateLiCollection(t);for(p=0;p<i.length;p++)this.ulElement.removeChild(i[p]);0===this.listData.length&&this.l10nUpdate()},t.prototype.getDataByValues=function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.getDataByValue(e[i]));return t},t.prototype.moveUp=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t)},t.prototype.moveDown=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!1,!1,t)},t.prototype.moveTo=function(e,t,s){var n=e?this.getElemByValue(e):this.getSelectedItems(),o=s?qi(s,i):this.getScopedListBox();this.moveData(this,o,!1,n,t)},t.prototype.moveAllTo=function(e,t){if(this.listData.length>0){var s=e?qi(e,i):this.getScopedListBox();this.moveAllData(this,s,!1,t)}},t.prototype.getDataList=function(){return this.jsonData},t.prototype.getSortedList=function(){var e,t;if(e=t=this.sortedData,this.fields.groupBy){e=[];for(var i=0;i<t.length;i++)t[i].isHeader||e.push(t[i])}return e},t.prototype.getElemByValue=function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.ulElement.querySelector('[data-value ="'+e[i]+'"]'));return t},t.prototype.updateLiCollection=function(e){var t=[].slice.call(this.liCollections);t.splice(e,1),this.liCollections=t},t.prototype.selectAllItems=function(e,t){var i=this;if([].slice.call(this.getItems()).forEach(function(t){if(!t.classList.contains(Ap.disabled))if(i.selectionSettings.showCheckbox){var s=t.getElementsByClassName("e-check")[0];(!s&&e||s&&!e)&&(i.notify("updatelist",{li:t,module:"listbox"}),i.maximumSelectionLength>=i.list.querySelectorAll(".e-list-item span.e-check").length&&i.checkMaxSelection())}else e?t.classList.add(Ap.selected):t.classList.remove(Ap.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var s=this.list.getElementsByTagName("li"),n=0;if(e){var o=function(){var e=r.getFormattedValue(s[n].getAttribute("data-value"));r.value.some(function(t){return t===e})||r.value.push(r.getFormattedValue(s[n].getAttribute("data-value")))},r=this;for(n=0;n<s.length;n++)o()}else{var a=function(){var e=l.getFormattedValue(s[n].getAttribute("data-value"));l.value=l.value.filter(function(t){return t!==e})},l=this;for(n=0;n<s.length;n++)a()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)},t.prototype.updateMainList=function(){var e=this.mainList.querySelectorAll(".e-list-item"),t=this.ulElement.querySelectorAll(".e-list-item"),i=e.length,s=t.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||i!==s)for(var n=0,o=0,r=0;n<i;){if(this.value)for(;o<this.value.length;o++)e[n].getAttribute("data-value")===this.value[o]&&r++;!r&&this.selectionSettings.showCheckbox&&e[n].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&r&&i!==s?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[n]),n=0):n++,r=0,o=0}},t.prototype.wireEvents=function(){var e=Mi(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;Ct.add(this.list,"click",this.clickHandler,this),Ct.add(t,"keydown",this.keyDownHandler,this),Ct.add(t,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&Ct.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&Ct.remove(this.list,"scroll",this.setFloatingHeader),e&&Ct.add(e,"reset",this.formResetHandler,this)},t.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&Ct.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},t.prototype.unwireEvents=function(){var e=Mi(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;Ct.remove(this.list,"click",this.clickHandler),Ct.remove(t,"keydown",this.keyDownHandler),Ct.remove(t,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&Ct.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&Ct.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&Ct.remove(e,"reset",this.formResetHandler)},t.prototype.clickHandler=function(e){this.selectHandler(e)},t.prototype.checkSelectAll=function(){for(var e=0,t=this.list.querySelectorAll("li."+id),i=0;i<t.length;i++)t[i].classList.contains("e-disabled")||e++;var s=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===s?"check":0===s?"uncheck":"indeterminate"})},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new up;if(this.allowFiltering){var i=""===this.inputString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Ip||"string"!==s)&&"number"!==s){var n=this.fields.text?this.fields.text:"";t.where(n,i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new up);return t},t.prototype.setFiltering=function(){var e;if(this.initLoad||ae(this.filterParent)){if(ye()&&this.isServerRendered)this.filterParent=this.list.querySelector(".e-filter-parent"),this.filterInput=this.list.querySelector(".e-input-filter");else{this.filterParent=this.createElement("span",{className:dg.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:dg.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);bt.isDevice&&!0,Ei([(e=Na.createInput({element:this.filterInput,buttons:[dg.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement)).container],this.filterParent),wi([this.filterParent],this.list),Di(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})}return this.height.toString().indexOf("%")<0&&bi([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),e}},t.prototype.filterWireEvents=function(e){e&&(this.filterInput=e.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+dg.clearIcon),this.clearFilterIconElem&&(Ct.add(this.clearFilterIconElem,"click",this.clearText,this),e||(this.clearFilterIconElem.style.visibility="hidden")),Ct.add(this.filterInput,"input",this.onInput,this),Ct.add(this.filterInput,"keyup",this.KeyUp,this),Ct.add(this.filterInput,"keydown",this.onKeyDown,this)},t.prototype.selectHandler=function(e,t){var i,s=!0,n=Mi(e.target,".e-list-item"),o=[n];if(n&&n.parentElement){if(i=[].slice.call(n.parentElement.children).indexOf(n),this.selectionSettings.showCheckbox?s=!n.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||bt.isDevice)&&this.isSelected(n)?(n.classList.remove(Ap.selected),n.removeAttribute("aria-selected"),s=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||bt.isDevice)||(this.getSelectedItems().forEach(function(e){e.removeAttribute("aria-selected")}),Ci(this.getSelectedItems(),Ap.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?o=[].slice.call(n.parentElement.children).slice(Math.min(i,this.prevSelIdx),Math.max(i,this.prevSelIdx)+1).filter(function(e){return e.classList.contains("e-list-item")}):this.prevSelIdx=[].slice.call(n.parentElement.children).indexOf(n),s&&(this.selectionSettings.showCheckbox||bi(o,Ap.selected),o.forEach(function(e){e.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",n.id)),t||!(this.maximumSelectionLength>(this.value&&this.value.length))&&s||!(this.maximumSelectionLength>=(this.value&&this.value.length))&&s||this.maximumSelectionLength<(this.value&&this.value.length)||this.notify("updatelist",{li:n,e:e,module:"listbox"}),this.allowFiltering&&!t){var r=this.getFormattedValue(n.getAttribute("data-value"));if(s){var a=[];re(a,this.value),a.push(r),this.value=a}else this.value=this.value.filter(function(e){return e!==r});document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.checkMaxSelection()}},t.prototype.triggerChange=function(e,t){this.trigger("change",{elements:e,items:this.getDataByElements(e),value:this.value,event:t})},t.prototype.getDataByElems=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(this.getDataByValue(this.getFormattedValue(e[i].getAttribute("data-value"))));return t},t.prototype.getDataByElements=function(e){var t,i=[],s=0;if(!ae(this.listData)){var n=this.typeOfData(this.listData).typeof;if("string"===n||"number"===n||"boolean"===n)for(var o=0,r=this.listData;o<r.length;o++){for(var a=r[o],l=s,h=e.length;l<h;l++)if(t=this.getFormattedValue(e[l].getAttribute("data-value")),!ae(a)&&a===t){s=l,i.push(a);break}if(e.length===i.length)break}else for(var c=0,p=this.listData;c<p.length;c++){for(a=p[c],l=s,h=e.length;l<h;l++)if(t=this.getFormattedValue(e[l].getAttribute("data-value")),!ae(a)&&ee(this.fields.value?this.fields.value:"value",a)===t){s=l,i.push(a);break}if(e.length===i.length)break}return i}return null},t.prototype.checkMaxSelection=function(){var e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){var t=0,i=void 0;for(i=this.list.getElementsByClassName("e-list-item");t<i.length;t++)i[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?i[t].classList.add("e-disable"):i[t].classList.contains("e-disable")&&i[t].classList.remove("e-disable"))}},t.prototype.toolbarClickHandler=function(e){var t=Mi(e.target,"button");if(t){if(this.toolbarAction=t.getAttribute("data-value"),t.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}},t.prototype.moveUpDown=function(e,t,i){var s,n=this,o=this.getSelectedItems();if(i&&(o=i),!(e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild))||i){var r={cancel:!1,items:s=this.getDataByElems(o),eventName:this.toolbarAction};this.trigger("actionBegin",r),r.cancel||((e?o:o.reverse()).forEach(function(t){var i=Array.prototype.indexOf.call(n.ulElement.querySelectorAll(".e-list-item"),t),s=Array.prototype.indexOf.call(n.ulElement.children,t);Wp(n.ulElement,n.ulElement,[s],e?s-1:s+2),n.changeData(s,e?s-1:s+1,e?i-1:i+1,t)}),this.trigger("actionComplete",{items:s,eventName:this.toolbarAction}),o[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},t.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},t.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},t.prototype.moveData=function(e,t,i,s,n){var o=this,r=[],a=[],l=[],h=[],c=[].slice.call(e.listData),p=[].slice.call(t.listData),d=[].slice.call(e.sortedData),u=[].slice.call(t.sortedData),m=[].slice.call(e.liCollections),f=[],g=[].slice.call(t.liCollections),v=[],y=[],b=e.getSelectedItems();s&&(b=s);var C="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;if(e.value=[],b.length){this.removeSelected(e,b),b.forEach(function(t,i){r.push(Array.prototype.indexOf.call(e.ulElement.children,t)),f.push(Array.prototype.indexOf.call(e.ulElement.querySelectorAll(".e-list-item"),t)),a.push(Array.prototype.indexOf.call(e.listData,e.getDataByElems([t])[0])),h.push(Array.prototype.indexOf.call(e.sortedData,e.getDataByElems([t])[0])),l.push(Array.prototype.indexOf.call(e.jsonData,e.getDataByElems([t])[0]))}),"None"!==this.sortOrder?h.forEach(function(t){v.push(e.sortedData[t])}):l.forEach(function(t){v.push(e.jsonData[t])});var S={cancel:!1,items:v,eventName:this.toolbarAction};if(e.trigger("actionBegin",S),S.cancel)return;if(!ye()){var x=[];if(f.sort(function(e,t){return e-t}).reverse().forEach(function(e){x.push(m.splice(e,1)[0])}),e.liCollections=m,n){var w=g.splice(0,n);t.liCollections=w.concat(x.reverse()).concat(g)}else t.liCollections=g.concat(x.reverse());if(0===t.listData.length){var E=t.ulElement.getElementsByClassName("e-list-nrt")[0];E&&t.ulElement.removeChild(E)}}a.sort(function(e,t){return t-e}).forEach(function(e){c.splice(e,1)[0]}),h.sort(function(e,t){return t-e}).forEach(function(e){d.splice(e,1)[0]}),l.slice().reverse().forEach(function(t){y.push(e.jsonData.splice(t,1)[0])}),ye()||(C?e.fields.groupBy?e.ulElement.innerHTML=e.renderItems(c,e.fields).innerHTML:b.forEach(function(e){Ti(e)}):(Wp(e.ulElement,t.ulElement,r,n),e.trigger("actionComplete",{items:v,eventName:this.toolbarAction})),t.mainList.childElementCount!==t.jsonData.length&&(t.mainList=t.ulElement),e.updateMainList());var k=[].slice.call(t.jsonData);u=[].slice.call(t.sortedData),ye()||this.selectNextList(b,f,a,e),i&&this.list.focus(),e.listData=c,e.sortedData=d,n=n||p.length;for(var T=v.length-1;T>=0;T--)p.splice(n,0,v[T]),k.splice(n,0,v[T]),u.splice(n,0,v[T]);t.listData=p,t.jsonData=k,t.sortedData=u,ye()?(e.interopAdaptor.invokeMethodAsync("UpdateListData",e.listData).then(function(){e.updateBlazorListData(null,!0),o.selectNextList(b,f,a,e),e.updateSelectedOptions()}),t.interopAdaptor.invokeMethodAsync("UpdateListData",t.listData).then(function(){C&&t.setSelection(),t.updateBlazorListData(null,!0),e.trigger("actionComplete",{items:v,eventName:o.toolbarAction})})):(C&&(t.ulElement.innerHTML=t.renderItems(p,t.fields).innerHTML,t.setSelection()),e.updateSelectedOptions()),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getFormattedValue(e.getSelectedItems()[0].getAttribute("data-value")))},t.prototype.selectNextList=function(e,t,i,s){var n,o,r=s.ulElement.querySelectorAll(".e-list-item").length,a=-1;1===e.length&&r&&!s.selectionSettings.showCheckbox&&(o=r<=t[0]?r-1:t[0],n=s.ulElement.querySelectorAll(".e-list-item")[o],(a=s.getValidIndex(n,o,r===i[0]?38:40))>-1&&s.ulElement.querySelectorAll(".e-list-item")[a].classList.add(Ap.selected))},t.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},t.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},t.prototype.moveAllData=function(e,t,i,s){var n=this,o=[].slice.call(t.listData),r=[].slice.call(t.jsonData),a="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;this.removeSelected(e,e.getSelectedItems());var l=[].slice.call(e.jsonData),h={cancel:!1,items:l,eventName:this.toolbarAction};if(e.trigger("actionBegin",h),!h.cancel){if(!ye()){var c;if(0===t.listData.length)(c=t.ulElement.getElementsByClassName("e-list-nrt")[0])&&t.ulElement.removeChild(c);if(a)(c=e.ulElement.getElementsByClassName("e-list-nrt")[0])&&e.ulElement.removeChild(c);Wp(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number),s),this.trigger("actionComplete",{items:l,eventName:this.toolbarAction})}i&&this.list.focus(),s=s||o.length;for(var p=0;p<e.listData.length;p++)o.splice(s+p,0,e.listData[p]);for(p=0;p<e.jsonData.length;p++)r.splice(s+p,0,e.jsonData[p]);if(!ye()){var d=[].slice.call(e.liCollections),u=[].slice.call(t.liCollections);if(e.liCollections=[],s){var m=u.splice(0,s);t.liCollections=m.concat(d).concat(u)}else t.liCollections=u.concat(d)}e.value=[],o=o.filter(function(e){return!0!==e.isHeader}),t.listData=o,t.jsonData=r,e.listData=e.sortedData=e.jsonData=[],ye()?(a||(t.sortedData=o),e.interopAdaptor.invokeMethodAsync("UpdateListData",e.listData).then(function(){e.updateBlazorListData(null,!0),e.updateSelectedOptions()}),t.interopAdaptor.invokeMethodAsync("UpdateListData",t.listData).then(function(){t.updateBlazorListData(null,!0),e.updateSelectedOptions(),e.trigger("actionComplete",{items:l,eventName:n.toolbarAction})})):(a?(t.ulElement.innerHTML=t.renderItems(o,t.fields).innerHTML,this.trigger("actionComplete",{items:l,eventName:this.toolbarAction})):t.sortedData=o,e.updateSelectedOptions()),0===e.listData.length&&e.l10nUpdate()}},t.prototype.changeData=function(e,t,i,s){var n=[].slice.call(this.listData),o=[].slice.call(this.jsonData),r=[].slice.call(this.sortedData),a=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([s])[0]),l=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([s])[0]),h=[].slice.call(this.liCollections);n.splice(t,0,n.splice(e,1)[0]),o.splice(i,0,o.splice(a,1)[0]),r.splice(t,0,r.splice(l,1)[0]),h.splice(t,0,h.splice(e,1)[0]),this.listData=n,this.jsonData=o,this.liCollections=h,this.sortedData=r},t.prototype.getSelectedItems=function(){var e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(function(t){e.push(Mi(t,".e-list-item"))}):e=[].slice.call(this.ulElement.getElementsByClassName(Ap.selected)),e},t.prototype.getScopedListBox=function(){var e,t=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(function(i){qi(i,t.getModuleName())&&(e=qi(i,t.getModuleName()))}),e},t.prototype.getGrabbedItems=function(){return Array.prototype.slice.call(this.element.querySelectorAll(".e-grabbed"))},t.prototype.getDragArgs=function(e,t){var i=this.getGrabbedItems();return i.length?t&&i.push(e.target):i=[e.target],ye()?{elements:i,items:this.getDataByElems(i),bindEvents:e.bindEvents,dragElement:e.dragElement}:{elements:i,items:this.getDataByElems(i)}},t.prototype.onKeyDown=function(e){this.keyDownHandler(e),event.stopPropagation()},t.prototype.keyDownHandler=function(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&!this.allowFiltering){if(e.target&&e.target.className.indexOf("e-edit-template")>-1)return;if(e.preventDefault(),32===e.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&this.upDownKeyHandler(e);else{var t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}}else this.allowFiltering&&(40!==e.keyCode&&38!==e.keyCode||this.upDownKeyHandler(e))},t.prototype.upDownKeyHandler=function(e){var t=this.ulElement,i=40===e.keyCode||36===e.keyCode?0:t.childElementCount-1,s=t.getElementsByClassName("e-focused")[0]||t.getElementsByClassName(Ap.selected)[0];if(s){if(35!==e.keyCode&&36!==e.keyCode&&(i=Array.prototype.indexOf.call(t.children,s),40===e.keyCode?i++:i--,i<0||i>t.childElementCount-1))return;Ci([s],"e-focused")}var n=t.children[i];if(n){if(-1===(i=this.getValidIndex(n,i,e.keyCode)))return void bi([s],"e-focused");t.children[i].focus(),t.children[i].classList.add("e-focused"),e.ctrlKey||this.selectHandler({target:t.children[i],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0)}},t.prototype.KeyUp=function(e){var t=this;if(ae(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||this.isValidKey,this.isValidKey){this.isValidKey=!1,e.keyCode;this.targetElement(),e.keyCode;if(this.allowFiltering){var i={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,s,n){i.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,s,n))},event:e,cancel:!1};this.trigger("filtering",i,function(e){t.isDataFetched=!1,i.cancel||""!==t.filterInput.value&&t.isFiltered||(i.cancel||t.isCustomFiltering||i.preventDefaultAction||(t.inputString=t.filterInput.value,t.filteringAction(t.jsonData,new up,t.fields)),t.isFiltered||t.isCustomFiltering||i.preventDefaultAction||t.dataUpdater(t.jsonData,new up,t.fields))})}}},t.prototype.filter=function(e,t,i){this.isCustomFiltering=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,i){this.resetList(e,i,t)},t.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},t.prototype.dataUpdater=function(e,t,i){this.isDataFetched=!1;if(""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(s,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,i,t)},t.prototype.focusOutHandler=function(){var e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},t.prototype.getValidIndex=function(e,t,i){var s=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(Ap.group))&&(40===i||36===i?t++:t--),t<0||t===s.childElementCount?-1:(((e=s.querySelectorAll(".e-list-item")[t]).classList.contains("e-disabled")||e.classList.contains(Ap.group))&&(t=this.getValidIndex(e,t,i)),t)},t.prototype.updateSelectedOptions=function(){var e=this,t=[],i=[];if(re(i,this.value),this.getSelectedItems().forEach(function(i){i.classList.contains("e-grabbed")||t.push(e.getFormattedValue(i.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var s=0;s<t.length;s++)i.indexOf(t[s])>-1||i.push(t[s]);this.setProperties({value:i},!0)}else this.setProperties({value:t},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},t.prototype.clearSelection=function(e){var t,i=this;(void 0===e&&(e=this.value),this.selectionSettings.showCheckbox)&&this.getSelectedItems().forEach(function(s){t=i.getFormattedValue(s.getAttribute("data-value")),e.indexOf(t)<0&&(s.getElementsByClassName("e-check")[0].classList.remove("e-check"),s.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),s.removeAttribute("aria-selected"))})},t.prototype.setSelection=function(e,t,i){var s,n,o=this;void 0===e&&(e=this.value),void 0===t&&(t=!0),void 0===i&&(i=!1),e&&e.forEach(function(e){var r;if(i)if(ye()&&"object"==typeof e){if(ae(r=e[o.fields.text||"text"]))return;r=o.getValueByText(r)}else r=o.getValueByText(e);else r=e;(s=o.list.querySelector('[data-value="'+r+'"]'))&&(n=o.selectionSettings.showCheckbox?s.getElementsByClassName("e-frame")[0].classList.contains("e-check"):s.classList.contains("e-selected"),(!t&&n||t&&!n&&s)&&(o.selectionSettings.showCheckbox?o.notify("updatelist",{li:s,module:"listbox"}):t?(s.classList.add(Ap.selected),s.setAttribute("aria-selected","true")):(s.classList.remove(Ap.selected),s.removeAttribute("aria-selected"))))}),this.updateSelectTag()},t.prototype.updateSelectTag=function(){var e=this.getSelectTag(),t="";if(e.innerHTML="",this.value){for(var i=0,s=this.value.length;i<s;i++)t+='<option selected value="'+this.value[i]+'"></option>';e.innerHTML+=t}this.checkSelectAll()},t.prototype.checkDisabledState=function(e){return 0===e.ulElement.querySelectorAll("."+Ap.li).length},t.prototype.updateToolBarState=function(){var e=this;if(this.toolbarSettings.items.length){var t=this.getScopedListBox(),i=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(function(s){var n=i.querySelector('[data-value="'+s+'"]');switch(s){case"moveAllTo":n.disabled=e.checkDisabledState(e);break;case"moveAllFrom":n.disabled=e.checkDisabledState(t);break;case"moveFrom":n.disabled=!t.value||!t.value.length;break;case"moveUp":n.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[0]));break;case"moveDown":n.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[e.ulElement.childElementCount-1]));break;default:n.disabled=!e.value||!e.value.length}})}},t.prototype.setCheckboxPosition=function(){var e=this.list;this.initLoad||"Left"!==this.selectionSettings.checkboxPosition||e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")},t.prototype.showCheckbox=function(e){var t=0,i=this.list.lastElementChild.querySelectorAll("li"),s=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(ye()||(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement)),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var n=new Js(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=n.getConstant("selectAllText"),this.unSelectAllText=n.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else if(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]),!ye()){for(;t<s;t++)i[t].classList.contains("e-list-item")&&i[t].removeChild(i[t].getElementsByClassName("e-checkbox-wrapper")[0]),i[t].hasAttribute("aria-selected")&&i[t].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},t.prototype.isSelected=function(e){return!ae(e)&&(e.classList.contains(Ap.selected)||null!==e.querySelector(".e-check"))},t.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},t.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},t.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},t.prototype.getModuleName=function(){return"listbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"listbox"},t.prototype.destroy=function(){this.itemTemplate&&Zt(this.element.id+"ItemTemplate"),this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(!ye()||ye()&&!this.isServerRendered)&&(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),Ti(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),(!ye()||ye()&&!this.isServerRendered)&&e.prototype.destroy.call(this),this.itemTemplate&&this.clearTemplate()},t.prototype.onPropertyChanged=function(t,i){var s=this.toolbarSettings.items.length?this.list.parentElement:this.list;e.prototype.onPropertyChanged.call(this,t,i),this.setUpdateInitial(["fields","query","dataSource"],t);for(var n=0,o=Object.keys(t);n<o.length;n++){switch(o[n]){case"cssClass":i.cssClass&&Ci([s],i.cssClass.split(" ")),t.cssClass&&bi([s],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?s.classList.add("e-rtl"):s.classList.remove("e-rtl");break;case"value":Ci(this.list.querySelectorAll("."+Ap.selected),Ap.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":t.allowDragAndDrop?this.initDraggable():qi(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,Ci([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&Na.setPlaceholder(t.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(qi(this.ulElement,"sortable").scope=t.scope),this.toolbarSettings.items.length&&(i.scope&&(qi(document.querySelector(i.scope),this.getModuleName()).tBListBox=null),t.scope&&(qi(document.querySelector(t.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var r=void 0,a=t.toolbarSettings.position,l=this.getToolElem();a&&(Ci([s],["e-right","e-left"]),s.classList.add("e-"+a.toLowerCase()),"Left"===a?s.insertBefore(l,this.list):s.appendChild(l)),t.toolbarSettings.items&&(i.toolbarSettings.items.length&&((r=this.list.parentElement).parentElement.insertBefore(this.list,r),Ti(r)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var h=t.selectionSettings.showSelectAll,c=t.selectionSettings.showCheckbox;if(!ae(h)){if(this.showSelectAll=h,this.showSelectAll){var p=new Js(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=p.getConstant("selectAllText"),this.unSelectAllText=p.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}ae(c)||this.showCheckbox(c),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}}},lg([os("")],t.prototype,"cssClass",void 0),lg([os([])],t.prototype,"value",void 0),lg([os("")],t.prototype,"height",void 0),lg([os(!1)],t.prototype,"allowDragAndDrop",void 0),lg([os(1e3)],t.prototype,"maximumSelectionLength",void 0),lg([os(!1)],t.prototype,"allowFiltering",void 0),lg([os("")],t.prototype,"scope",void 0),lg([os(!0)],t.prototype,"ignoreCase",void 0),lg([os(null)],t.prototype,"filterBarPlaceholder",void 0),lg([cs()],t.prototype,"beforeItemRender",void 0),lg([cs()],t.prototype,"filtering",void 0),lg([cs()],t.prototype,"select",void 0),lg([cs()],t.prototype,"change",void 0),lg([cs()],t.prototype,"beforeDrop",void 0),lg([cs()],t.prototype,"dragStart",void 0),lg([cs()],t.prototype,"drag",void 0),lg([cs()],t.prototype,"drop",void 0),lg([cs()],t.prototype,"dataBound",void 0),lg([os(null)],t.prototype,"groupTemplate",void 0),lg([os("No records found")],t.prototype,"noRecordsTemplate",void 0),lg([os("Request failed")],t.prototype,"actionFailureTemplate",void 0),lg([os(1e3)],t.prototype,"zIndex",void 0),lg([os(!1)],t.prototype,"ignoreAccent",void 0),lg([rs({},cg)],t.prototype,"toolbarSettings",void 0),lg([rs({},hg)],t.prototype,"selectionSettings",void 0),t=i=lg([ps],t)}(rd),dg={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"},ug=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"pagerdropdown"},e.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=yi("div",{className:"e-pagesizes"});var t=yi("div",{className:"e-pagerdropdown"}),i=yi("div",{className:"e-pagerconstant"}),s=yi("input",{attrs:{type:"text",tabindex:"1"}});this.pagerCons=yi("span",{className:"e-constant",innerHTML:ye()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(s),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,o=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],r=this.pagerModule.pageSize;this.dropDownListObject=new pd({dataSource:o,value:r.toString(),change:this.onChange.bind(this),cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(s),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=r,e.dataBind(),e.trigger("dropDownChanged",{pageSize:r}),this.addEventListener()},e.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:parseInt(this.dropDownListObject.value,10)})},e.prototype.refresh=function(){this.pagerCons&&(this.pagerModule.pageSize===this.pagerModule.totalRecordsCount?this.pagerCons.innerHTML=ye()?this.pagerModule.getLocalizedLabel("PagerAllDropDown"):this.pagerModule.getLocalizedLabel("pagerAllDropDown"):this.pagerCons.innerHTML=ye()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown"))},e.prototype.beforeValueChange=function(e){if("number"==typeof e.newProp.value){var t=e.newProp.value.toString();e.newProp.value=t}},e.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[i]=parseInt(t[i],10)?t[i].toString():""!==this.pagerModule.getLocalizedLabel(t[i])?this.pagerModule.getLocalizedLabel(t[i]):t[i];return t},e.prototype.setDropDownValue=function(e,t){this.dropDownListObject&&(this.dropDownListObject[e]=t)},e.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},e.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},e.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),Li(this.pagerDropDownDiv))},e}(),mg={},fg={};Object(Y.copy)(mg,q),Object(Y.copy)(fg,s);var gg={},vg={},yg={},bg={};Object(Y.copy)(gg,S),Object(Y.copy)(vg,s),Object(Y.copy)(yg,m),Object(Y.copy)(bg,a);var Cg=function(){function e(e){this.svgLink="http://www.w3.org/2000/svg",this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createSvg=function(e){return ae(e.id)&&(e.id=this.rootId+"_svg"),this.svgObj=document.getElementById(e.id),ae(document.getElementById(e.id))&&(this.svgObj=document.createElementNS(this.svgLink,"svg")),this.svgObj=this.setElementAttributes(e,this.svgObj),this.setSVGSize(e.width,e.height),this.svgObj},e.prototype.setSVGSize=function(e,t){var i=document.getElementById(this.rootId),s=ae(i)?null:i.getBoundingClientRect();ae(this.width)||this.width<=0?this.svgObj.setAttribute("width",e?e.toString():s.width.toString()):this.svgObj.setAttribute("width",this.width.toString()),ae(this.height)||this.height<=0?this.svgObj.setAttribute("height",t?t.toString():"450"):this.svgObj.setAttribute("height",this.height.toString())},e.prototype.drawPath=function(e,t){var i=document.getElementById(e.id);return null===i&&(i=document.createElementNS(this.svgLink,"path")),i=this.setElementAttributes(e,i)},e.prototype.drawLine=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"line")),t=this.setElementAttributes(e,t)},e.prototype.drawRectangle=function(e,t){var i=document.getElementById(e.id);return null===i&&(i=document.createElementNS(this.svgLink,"rect")),i=this.setElementAttributes(e,i)},e.prototype.drawCircle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"circle")),t=this.setElementAttributes(e,t)},e.prototype.drawPolyline=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polyline")),t=this.setElementAttributes(e,t)},e.prototype.drawEllipse=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"ellipse")),t=this.setElementAttributes(e,t)},e.prototype.drawPolygon=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polygon")),t=this.setElementAttributes(e,t)},e.prototype.drawImage=function(e){var t=document.createElementNS(this.svgLink,"image");return t.setAttributeNS(null,"height",e.height.toString()),t.setAttributeNS(null,"width",e.width.toString()),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e.href),t.setAttributeNS(null,"x",e.x.toString()),t.setAttributeNS(null,"y",e.y.toString()),t.setAttributeNS(null,"id",e.id),t.setAttributeNS(null,"visibility",e.visibility),ae(this.getOptionValue(e,"clip-path"))||t.setAttributeNS(null,"clip-path",this.getOptionValue(e,"clip-path")),ae(e.preserveAspectRatio)||t.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio),t},e.prototype.createText=function(e,t,i,s,n,o){var r=document.createElementNS(this.svgLink,"text");return r=this.setElementAttributes(e,r),ae(t)||(r.textContent=t),r},e.prototype.createTSpan=function(e,t){var i=document.createElementNS(this.svgLink,"tspan");return i=this.setElementAttributes(e,i),ae(t)||(i.textContent=t),i},e.prototype.createTitle=function(e){var t=document.createElementNS(this.svgLink,"title");return t.textContent=e,t},e.prototype.createDefs=function(){return document.createElementNS(this.svgLink,"defs")},e.prototype.createClipPath=function(e){var t=document.createElementNS(this.svgLink,"clipPath");return t=this.setElementAttributes(e,t)},e.prototype.createForeignObject=function(e){var t=document.createElementNS(this.svgLink,"foreignObject");return t=this.setElementAttributes(e,t)},e.prototype.createGroup=function(e){var t=document.createElementNS(this.svgLink,"g");return t=this.setElementAttributes(e,t)},e.prototype.createPattern=function(e,t){var i=document.createElementNS(this.svgLink,t);return i=this.setElementAttributes(e,i)},e.prototype.createRadialGradient=function(e,t,i){var s;if(ae(e[0].colorStop))s=e[0].color.toString();else{var n={id:this.rootId+"_"+t+"radialGradient",cx:i.cx+"%",cy:i.cy+"%",r:i.r+"%",fx:i.fx+"%",fy:i.fy+"%"};this.drawGradient("radialGradient",n,e),s="url(#"+this.rootId+"_"+t+"radialGradient)"}return s},e.prototype.createLinearGradient=function(e,t,i){var s;if(ae(e[0].colorStop))s=e[0].color.toString();else{var n={id:this.rootId+"_"+t+"linearGradient",x1:i.x1+"%",y1:i.y1+"%",x2:i.x2+"%",y2:i.y2+"%"};this.drawGradient("linearGradient",n,e),s="url(#"+this.rootId+"_"+t+"linearGradient)"}return s},e.prototype.drawGradient=function(e,t,i){var s=this.createDefs(),n=document.createElementNS(this.svgLink,e);n=this.setElementAttributes(t,n);for(var o=0;o<i.length;o++){var r=document.createElementNS(this.svgLink,"stop");r.setAttribute("offset",i[o].colorStop),r.setAttribute("stop-color",i[o].color),r.setAttribute("stop-opacity",i[o].opacity?i[o].opacity:"1"),ae(i[o].style)||r.setAttribute("style",i[o].style),n.appendChild(r)}return s.appendChild(n),s},e.prototype.drawClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Rect";var s=this.drawRectangle(e);return i.appendChild(s),t.appendChild(i),t},e.prototype.drawCircularClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Circle";var s=this.drawCircle(e);return i.appendChild(s),t.appendChild(i),t},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),s=0;s<i.length;s++)t.setAttribute(i[s],e[i[s]]);return t},e.prototype.createCanvas=function(e){return null},e}(),Sg=function(){function e(e){this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createCanvas=function(e){var t=document.createElement("canvas");return t.setAttribute("id",this.rootId+"_canvas"),this.ctx=t.getContext("2d"),this.canvasObj=t,this.setCanvasSize(e.width,e.height),this.canvasObj},e.prototype.setCanvasSize=function(e,t){var i=document.getElementById(this.rootId),s=ae(i)?null:i.getBoundingClientRect();ae(this.width)?this.canvasObj.setAttribute("width",e?e.toString():s.width.toString()):this.canvasObj.setAttribute("width",this.width.toString()),ae(this.height)?this.canvasObj.setAttribute("height",t?t.toString():"450"):this.canvasObj.setAttribute("height",this.height.toString())},e.prototype.setAttributes=function(e){this.ctx.lineWidth=this.getOptionValue(e,"stroke-width");var t=this.getOptionValue(e,"stroke-dasharray");if(!ae(t)){var i=t.split(",");this.ctx.setLineDash([parseInt(i[0],10),parseInt(i[1],10)])}this.ctx.strokeStyle=this.getOptionValue(e,"stroke")},e.prototype.drawLine=function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.restore()},e.prototype.drawRectangle=function(e,t){var i=this.ctx,s=e.rx;return this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=this.getOptionValue(e,"opacity"),this.setAttributes(e),this.ctx.rect(e.x,e.y,e.width,e.height),null!==s&&s>=0?this.drawCornerRadius(e):("none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.stroke()),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawCornerRadius=function(e){var t=e.rx,i=e.x,s=e.y,n=e.width,o=e.height;"none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,n<2*t&&(t=n/2),o<2*t&&(t=o/2),this.ctx.beginPath(),this.ctx.moveTo(i+n-t,s),this.ctx.arcTo(i+n,s,i+n,s+o,t),this.ctx.arcTo(i+n,s+o,i,s+o,t),this.ctx.arcTo(i,s+o,i,s,t),this.ctx.arcTo(i,s,i+n,s,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},e.prototype.drawPath=function(e,t){var i=e.d.split(" "),s=this.getOptionValue(e,"stroke-width"),n=this.ctx,o=!0;this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=e.opacity?e.opacity:this.getOptionValue(e,"fill-opacity"),this.setAttributes(e);for(var r=0;r<i.length;r+=3){var a=parseFloat(i[r+1]),l=parseFloat(i[r+2]);switch(i[r]){case"M":e.innerR||e.cx||this.ctx.moveTo(a,l);break;case"L":e.innerR||this.ctx.lineTo(a,l);break;case"Q":var h=parseFloat(i[r+3]),c=parseFloat(i[r+4]);this.ctx.quadraticCurveTo(a,l,h,c),r+=2;break;case"C":var p=parseFloat(i[r+3]),d=parseFloat(i[r+4]),u=parseFloat(i[r+5]),m=parseFloat(i[r+6]);this.ctx.bezierCurveTo(a,l,p,d,u,m),r+=4;break;case"A":e.innerR?o&&(this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),o=!1):e.cx?this.ctx.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(this.ctx.moveTo(e.x,e.y),this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.lineTo(e.x,e.y)),r+=5;break;case"z":case"Z":this.ctx.closePath(),r-=2}}return"none"!==e.fill&&void 0!==e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill()),s>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=n,this.canvasObj},e.prototype.createText=function(e,t,i,s,n,o){var r=this.getOptionValue(e,"font-weight");ae(r)||"regular"!==r.toLowerCase()||(r="normal");var a=this.getOptionValue(e,"font-size"),l=this.getOptionValue(e,"font-family"),h=this.getOptionValue(e,"font-style").toLowerCase()+" "+r+" "+a+" "+l,c=this.getOptionValue(e,"text-anchor"),p=void 0!==e.opacity?e.opacity:1;ae(e.labelRotation)||e.labelRotation;if("middle"===c&&(c="center"),this.ctx.save(),this.ctx.fillStyle=e.fill,this.ctx.font=h,this.ctx.textAlign=c,this.ctx.globalAlpha=p,e.baseline&&(this.ctx.textBaseline=e.baseline),!o){this.ctx.translate(e.x+0+(i||0),e.y+(s||0)),this.ctx.rotate(e.labelRotation*Math.PI/180)}return this.ctx.fillText(t,o?e.x:0,o?n:0),this.ctx.restore(),this.canvasObj},e.prototype.drawCircle=function(e,t){var i=this.ctx;return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.ctx.fillStyle=e.fill,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),t&&this.ctx.translate(t[0],t[1]),this.setAttributes(e),this.ctx.stroke(),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawPolyline=function(e){this.ctx.save(),this.ctx.beginPath();for(var t=e.points.split(" "),i=0;i<t.length-1;i++){var s=t[i].split(","),n=parseFloat(s[0]),o=parseFloat(s[1]);0===i?this.ctx.moveTo(n,o):this.ctx.lineTo(n,o)}this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore()},e.prototype.drawEllipse=function(e,t){var i=this.ctx,s=Math.max(e.rx,e.ry),n=e.rx/s,o=e.ry/s;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e.cx,e.cy),t&&this.ctx.translate(t[0],t[1]),this.ctx.save(),this.ctx.scale(n,o),this.ctx.arc(0,0,s,0,2*Math.PI,!1),this.ctx.fillStyle=e.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i},e.prototype.drawImage=function(e){this.ctx.save();var t=new Image;ae(e.href)||(t.src=e.href,this.ctx.drawImage(t,e.x,e.y,e.width,e.height)),this.ctx.restore()},e.prototype.createLinearGradient=function(e){var t;return ae(e[0].colorStop)||(t=this.ctx.createLinearGradient(0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.createRadialGradient=function(e){var t;return ae(e[0].colorStop)||(t=this.ctx.createRadialGradient(0,0,0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.setGradientValues=function(e,t){var i;if(ae(e[0].colorStop))i=e[0].color.toString();else{for(var s=0;s<=e.length-1;s++){var n=e[s].color,o=e[s].colorStop.slice(0,-1),r=parseInt(o,10)/100;t.addColorStop(r,n)}i=t.toString()}return i},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),s=Object.keys(e).map(function(t){return e[t]}),n=0;n<i.length;n++)t.setAttribute(i[n],s[n]);return null},e.prototype.updateCanvasAttributes=function(e){this.setElementAttributes(e,this.canvasObj);var t=this.ctx;if(!ae(this.dataUrl)){var i=new Image;i.onload=function(){t.drawImage(i,0,0)},i.src=this.dataUrl}},e.prototype.clearRect=function(e){this.ctx.restore(),this.ctx.clearRect(e.x,e.y,e.width,e.height)},e.prototype.createGroup=function(e){return null},e.prototype.drawClipPath=function(e){return null},e.prototype.canvasClip=function(e){this.ctx.save(),this.ctx.fillStyle="transparent",this.ctx.rect(e.x,e.y,e.width,e.height),this.ctx.fill(),this.ctx.clip()},e.prototype.canvasRestore=function(){this.ctx.restore()},e.prototype.drawPolygon=function(e){return null},e.prototype.createDefs=function(){return null},e.prototype.createClipPath=function(e){return null},e.prototype.createSvg=function(e){return null},e}();function xg(e){var t;switch(e){case"Highcontrast":case"HighContrast":t={tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696"};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A"};break;case"Bootstrap4":t={tooltipFill:"rgba(0, 0, 0, 0.9)",tooltipBoldLabel:"rgba(255, 255, 255)",tooltipLightLabel:"rgba(255, 255, 255, 0.9)",tooltipHeaderLine:"rgba(255, 255, 255, 0.2)"};break;default:t={tooltipFill:"rgba(0, 8, 22, 0.75)",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff"}}return t}var wg=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();function Eg(e,t){var i=e||"",s=document.getElementById("chartmeasuretext");if(null===s&&(s=yi("text",{id:"chartmeasuretext"}),document.body.appendChild(s)),"string"==typeof e&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(var n=e.split(" "),o=0;o<n.length;o++)-1===n[o].indexOf("<br/>")&&(n[o]=n[o].replace(/[<>]/g,"&"));e=n.join(" ")}return s.innerHTML=i.indexOf("<br>")>-1||i.indexOf("<br/>")>-1?i:e,s.style.position="fixed",s.style.fontSize=t.size,s.style.fontWeight=t.fontWeight,s.style.fontStyle=t.fontStyle,s.style.fontFamily=t.fontFamily,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",new Tg(s.clientWidth,s.clientHeight)}function kg(e,t,i,s,n,o,r,a,l,h,c){var p="",d=i.x,u=i.y,m=i.x+i.width,f=i.y+i.height;return c=c||0,o?(p=(p=p.concat("M "+d+" "+(u+t)+" Q "+d+" "+u+" "+(d+e)+" "+u+"  L "+(m-e)+" "+u+" Q "+m+" "+u+" "+m+" "+(u+t))).concat(" L "+m+" "+(f-t)+" Q "+m+" "+f+" "+(m-e)+" "+f),0!==n&&(p=(p=p.concat(" L "+(s.x+n/2)+" "+f)).concat(" L "+(l+c)+" "+(f+n-c)),p+=" Q "+l+" "+(f+n)+" "+(l-c)+" "+(f+n-c)),p=s.x-n/2>d?p.concat(" L "+(s.x-n/2)+" "+f+" L "+(d+e)+" "+f+" Q "+d+" "+f+" "+d+" "+(f-t)+" z"):0===n?p.concat(" L "+(d+e)+" "+f+" Q "+d+" "+f+" "+d+" "+(f-t)+" z"):p.concat(" L "+d+" "+(f+t)+" z")):r?(p=(p=p.concat("M "+d+" "+(u+t)+" Q "+d+" "+u+" "+(d+e)+" "+u+" L "+(s.x-n/2)+" "+u)).concat(" L "+(l-c)+" "+(s.y+c)),p=(p=(p+=" Q "+l+" "+s.y+" "+(l+c)+" "+(s.y+c)).concat(" L "+(s.x+n/2)+" "+u+" L "+(m-e)+" "+u+" Q "+m+" "+u+" "+m+" "+(u+t))).concat(" L "+m+" "+(f-t)+" Q "+m+" "+f+" "+(m-e)+" "+f+" L "+(d+e)+" "+f+" Q "+d+" "+f+" "+d+" "+(f-t)+" z")):a?(p=(p=(p=p.concat("M "+d+" "+(u+t)+" Q "+d+" "+u+" "+(d+e)+" "+u)).concat(" L "+(m-e)+" "+u+" Q "+m+" "+u+" "+m+" "+(u+t)+" L "+m+" "+(s.y-n/2))).concat(" L "+(m+n-c)+" "+(h-c)),p=(p=(p+=" Q "+(m+n)+" "+h+" "+(m+n-c)+" "+(h+c)).concat(" L "+m+" "+(s.y+n/2)+" L "+m+" "+(f-t)+" Q "+m+" "+f+" "+(m-e)+" "+f)).concat(" L "+(d+e)+" "+f+" Q "+d+" "+f+" "+d+" "+(f-t)+" z")):(p=(p=p.concat("M "+(d+e)+" "+u+" Q "+d+" "+u+" "+d+" "+(u+t)+" L "+d+" "+(s.y-n/2))).concat(" L "+(d-n+c)+" "+(h-c)),p=(p=(p+=" Q "+(d-n)+" "+h+" "+(d-n+c)+" "+(h+c)).concat(" L "+d+" "+(s.y+n/2)+" L "+d+" "+(f-t)+" Q "+d+" "+f+" "+(d+e)+" "+f)).concat(" L "+(m-e)+" "+f+" Q "+m+" "+f+" "+m+" "+(f-t)+" L "+m+" "+(u+t)+" Q "+m+" "+u+" "+(m-e)+" "+u+" z")),p}var Tg=function(){return function(e,t){this.width=e,this.height=t}}(),Lg=function(){return function(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}}(),Dg=function(){return function(e,t){this.isRight=t,this.isBottom=e}}(),Ig=function(){return function(e){this.id=e}}(),Og=function(e){function t(t,i,s,n,o,r,a,l){void 0===r&&(r="");var h=e.call(this,t)||this;return h.transform="",h.baseLine="auto",h.labelRotation=0,h.x=i,h.y=s,h.anchor=n,h.text=o,h.transform=r,h.baseLine=a,h.labelRotation=l,h}return wg(t,e),t}(Ig);function Ag(e){return document.getElementById(e)}function Mg(e){var t=Ag(e);t&&Li(t)}function Pg(e,t,i,s,n,o){var r=new Cg(""),a=Ng(e,i,t,n,s),l=r["draw"+a.functionName](a.renderOption);return l.setAttribute("aria-label",o),l}function Ng(e,t,i,s,n){var o,r="Path",a=t.width,l=t.height,h=e.x,c=e.y,p=e.x+-a/2,d=e.y+-l/2;switch(i){case"Circle":case"Bubble":r="Ellipse",oe(s,{rx:a/2,ry:l/2,cx:h,cy:c});break;case"Cross":oe(s,{d:o="M "+p+" "+c+" L "+(h+a/2)+" "+c+" M "+h+" "+(c+l/2)+" L "+h+" "+(c+-l/2)});break;case"HorizontalLine":oe(s,{d:o="M "+p+" "+c+" L "+(h+a/2)+" "+c});break;case"VerticalLine":oe(s,{d:o="M "+h+" "+(c+l/2)+" L "+h+" "+(c+-l/2)});break;case"Diamond":oe(s,{d:o="M "+p+" "+c+" L "+h+" "+(c+-l/2)+" L "+(h+a/2)+" "+c+" L "+h+" "+(c+l/2)+" L "+p+" "+c+" z"});break;case"Rectangle":oe(s,{d:o="M "+p+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+l/2)+" L "+p+" "+(c+l/2)+" L "+p+" "+(c+-l/2)+" z"});break;case"Triangle":oe(s,{d:o="M "+p+" "+(c+l/2)+" L "+h+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+l/2)+" L "+p+" "+(c+l/2)+" z"});break;case"InvertedTriangle":oe(s,{d:o="M "+(h+a/2)+" "+(c-l/2)+" L "+h+" "+(c+l/2)+" L "+(h-a/2)+" "+(c-l/2)+" L "+(h+a/2)+" "+(c-l/2)+" z"});break;case"Pentagon":for(var u=void 0,m=void 0,f=0;f<=5;f++)u=a/2*Math.cos(Math.PI/180*(72*f)),m=l/2*Math.sin(Math.PI/180*(72*f)),o=0===f?"M "+(h+u)+" "+(c+m)+" ":o.concat("L "+(h+u)+" "+(c+m)+" ");oe(s,{d:o=o.concat("Z")});break;case"Image":r="Image",oe(s,{href:n,height:l,width:a,x:p,y:d})}return{renderOption:s,functionName:r}}var Rg=function(e){function t(t,i,s,n,o,r,a){var l=e.call(this,t)||this;return l.opacity=o,l.fill=i,l.stroke=n,l["stroke-width"]=s,l["stroke-dasharray"]=r,l.d=a,l}return wg(t,e),t}(Ig);function Bg(e,t,i,s){var n,o,r,a=new Cg("");return n={id:e.id,x:e.x,y:e.y,fill:i,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},r="string"==typeof e.text?e.text:e.text[0],(o=a.createText(n,r)).style.fontFamily=t.fontFamily,o.style.fontStyle=t.fontStyle,o.style.fontSize=t.size,o.style.fontWeight=t.fontWeight,o.style.color=t.color,s.appendChild(o),o}var Hg=function(){return function(e,t){this.x=e,this.y=t}}(),Fg=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),jg=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Vg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fg(t,e),jg([os(null)],t.prototype,"size",void 0),jg([os("")],t.prototype,"color",void 0),jg([os("Segoe UI")],t.prototype,"fontFamily",void 0),jg([os("Normal")],t.prototype,"fontWeight",void 0),jg([os("Normal")],t.prototype,"fontStyle",void 0),jg([os(1)],t.prototype,"opacity",void 0),t}(Ls),zg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fg(t,e),jg([os("")],t.prototype,"color",void 0),jg([os(1)],t.prototype,"width",void 0),t}(Ls),_g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fg(t,e),jg([os(0)],t.prototype,"x",void 0),jg([os(0)],t.prototype,"y",void 0),jg([os(0)],t.prototype,"width",void 0),jg([os(0)],t.prototype,"height",void 0),t}(Ls),qg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fg(t,e),jg([os(0)],t.prototype,"x",void 0),jg([os(0)],t.prototype,"y",void 0),t}(Ls),Wg=function(e){function t(t,i){return e.call(this,t,i)||this}return Fg(t,e),t.prototype.preRender=function(){this.allowServerDataBinding=!1,this.initPrivateVariable(),this.isCanvas||this.removeSVG(),this.createTooltipElement()},t.prototype.initPrivateVariable=function(){this.renderer=new Cg(this.element.id),this.themeStyle=xg(this.theme),this.formattedText=[],this.padding=5,this.isFirst=!0,this.markerPoint=[]},t.prototype.removeSVG=function(){var e=document.getElementById(this.element.id+"_svg"),t=document.getElementById(this.element.id+"parent_template");this.blazorTemplate&&Zt(this.element.id+"parent_template_blazorTemplate"),e&&e.parentNode&&Li(e),t&&t.parentNode&&Li(t)},t.prototype.render=function(){if(this.fadeOuted=!1,this.template)this.updateTemplateFn(),this.createTemplate(this.areaBounds,this.location);else{this.renderText(this.isFirst);var e={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",e);var t=this.renderTooltipElement(this.areaBounds,this.location);this.drawMarker(t.isBottom,t.isRight,this.markerSize)}this.trigger("loaded",{tooltip:this});var i=document.getElementById("chartmeasuretext");i&&Li(i),this.allowServerDataBinding=!0},t.prototype.createTooltipElement=function(){if(this.textElements=[],!this.template||this.shared){var e=this.renderer.createSvg({id:this.element.id+"_svg"});this.element.appendChild(e);var t=document.getElementById(this.element.id+"_group");t||(t=this.renderer.createGroup({id:this.element.id+"_group"})).setAttribute("transform","translate(0,0)"),e.appendChild(t);var i=this.renderer.drawPath({id:this.element.id+"_path","stroke-width":"Bootstrap4"===this.theme?0:this.border.width,fill:this.fill||this.themeStyle.tooltipFill,opacity:"Bootstrap4"===this.theme?.9:this.opacity,stroke:this.border.color});t.appendChild(i)}},t.prototype.drawMarker=function(e,t,i){if(this.shapes.length<=0)return null;for(var s,n=0,o=this.renderer.createGroup({id:this.element.id+"_trackball_group"}),r=Ag(this.element.id+"_group"),a=2*this.marginX+i/2+(t?this.arrowPadding:0),l=0,h=this.shapes;l<h.length;l++){var c=h[l];"None"!==c&&(s=new Rg(this.element.id+"_Trackball_"+n,this.palette[n],1,"#cccccc",1,null),this.markerPoint[n]&&o.appendChild(Pg(new Hg(a,this.markerPoint[n]-this.padding+(e?this.arrowPadding:0)),c,new Tg(i,i),"",s,null)),n++)}r.appendChild(o)},t.prototype.renderTooltipElement=function(e,t){var i,s=Ag(this.element.id),n=new Hg(0,0),o=new Hg(0,0),r=Ag(this.element.id+"_svg"),a=Ag(this.element.id+"_group"),l=Ag(this.element.id+"_path"),h=!1,c=!1,p=!1,d=0,u=0;if(this.tipRadius=1,""!==this.header&&(this.elementSize.height+=this.marginY),this.content.length>1?(i=this.sharedTooltipLocation(e,this.location.x,this.location.y),h=!0):(i=this.tooltipLocation(e,t,n,o),this.inverted?d=(c=i.x<t.x+this.clipBounds.x)?0:this.arrowPadding:(p=!(h=i.y<t.y+this.clipBounds.y),u=h?0:this.arrowPadding)),""!==this.header){var m=Eg(this.isWrap?this.wrappedText:this.header,this.textStyle).height+2*this.marginY+(p?this.arrowPadding:0)+(this.isWrap?5:0),f="M "+(3*this.marginX+(c||h||p?0:this.arrowPadding))+" "+m+"L "+(i.width+(c||h||p?0:this.arrowPadding)-2*this.marginX)+" "+m,g=this.renderer.drawPath({id:this.element.id+"_header_path","stroke-width":1,fill:null,opacity:.8,stroke:this.themeStyle.tooltipHeaderLine,d:f});a.appendChild(g)}var v=this.border.width/2,y=new Lg(v+d,v+u,i.width-v,i.height-v);if(a.setAttribute("opacity","1"),!this.enableAnimation||this.shared||this.isFirst?this.updateDiv(s,i.x,i.y):this.animateTooltipDiv(s,i),r.setAttribute("height",(i.height+this.border.width+(this.inverted?0:this.arrowPadding)+5).toString()),r.setAttribute("width",(i.width+this.border.width+(this.inverted?this.arrowPadding:0)+5).toString()),r.setAttribute("opacity","1"),ae(this.tooltipPlacement)||(h=this.tooltipPlacement.indexOf("Top")>-1,p=this.tooltipPlacement.indexOf("Bottom")>-1,c=this.tooltipPlacement.indexOf("Left")>-1),l.setAttribute("d",kg(this.rx,this.ry,y,n,this.arrowPadding,h,p,c,o.x,o.y,this.tipRadius)),this.enableShadow&&"Bootstrap4"!==this.theme){var b=this.element.id+"_shadow";l.setAttribute("filter",bt.isIE?"":"url(#"+b+")");var C='<filter id="'+b+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>';C+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',C+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var S=this.renderer.createDefs();S.setAttribute("id",this.element.id+"SVG_tooltip_definition"),a.appendChild(S),S.innerHTML=C}return l.setAttribute("stroke",this.border.color),this.changeText(new Hg(d,u),p,!c&&!h&&!p,i),new Dg(p,!c&&!h&&!p)},t.prototype.changeText=function(e,t,i,s){var n=document.getElementById(this.element.id+"_text");t&&n.setAttribute("transform","translate(0,"+this.arrowPadding+")"),i&&n.setAttribute("transform","translate("+this.arrowPadding+" 0)")},t.prototype.findFormattedText=function(){this.formattedText=[],""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()&&(this.formattedText=this.formattedText.concat(this.header)),this.formattedText=this.formattedText.concat(this.content)},t.prototype.renderText=function(e){var t,i,s,n,o,r,a,l=0,h=0,c=0,p=re({},this.textStyle,null,!0).properties,d=Ag(this.element.id+"_group"),u="";this.findFormattedText();var m="rtl"===document.body.getAttribute("dir")?"end":"start";this.leftSpace=this.areaBounds.x+this.location.x,this.rightSpace=this.areaBounds.x+this.areaBounds.width-this.leftSpace;var f=this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim(),g=this.header.indexOf("<b>")>-1&&this.header.indexOf("</b>")>-1,v=Eg(this.formattedText[0],p).width+2*this.marginX+this.arrowPadding,y=this.location.x-v<this.location.x,b=this.areaBounds.x+this.areaBounds.width<this.location.x+v,C=""!==f?this.marginY:0,S=!0,x=!0;this.markerPoint=[];var w,E=this.shapes.length>0?10:0,k=this.shapes.length>0?5:0,T="Normal",L=this.themeStyle.tooltipLightLabel,D=22/parseFloat("13px")*parseFloat(p.size);e&&!this.isCanvas||(Mg(this.element.id+"_text"),Mg(this.element.id+"_header_path"),Mg(this.element.id+"_trackball_group"),Mg(this.element.id+"SVG_tooltip_definition"));var I=new Og(this.element.id+"_text",2*this.marginX,2*this.marginY+2*this.padding+(2===this.marginY?3:0),m,""),O=Bg(I,p,null,d),A=1===this.formattedText.length&&this.formattedText[0].indexOf(" : <b>")>-1;i=(a=""!==this.header)&&g?16:13;for(var M=0,P=this.formattedText.length;M<P;M++)if(n=this.formattedText[M].replace(/<(b|strong)>/g,"<b>").replace(/<\/(b|strong)>/g,"</b>").split(/<br.*?>/g),0===M&&!A&&this.isTextWrap&&(this.leftSpace<v||y)&&(this.rightSpace<v||b)&&(w=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/i:this.rightSpace/i),n=(""!==f?f:this.formattedText[M]).match(new RegExp(".{1,"+w+"}","g")),this.wrappedText=g?"<b>"+n.join("<br>")+"</b>":n.join("<br>"),this.isWrap=n.length>1),""!==n[0]){0===M&&""!==f||this.markerPoint.push((""!==f?this.marginY:0)+I.y+l);for(var N=0,R=n.length;N<R;N++){c=0,x=!0,l+=D;for(var B=0,H=(t=n[N].replace(/<b>/g,"<br><b>").replace(/<\/b>/g,"</b><br>").replace(/:/g,"<br>‎:<br>").split("<br>")).length;B<H;B++)if(o=t[B],/\S/.test(o)||""===o||(o=" "),!x&&" "===o||""!==o.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()){c+=" "!==o?4:0,x&&!S?(r={x:2*this.marginX+(E+k),dy:D+(x?C:0),fill:""},C=null):r=S&&x?{x:""===f?2*this.marginX+(E+k):2*this.marginX+(this.isWrap?E+k:0)}:{},x=!1,s=this.renderer.createTSpan(r,""),O.appendChild(s),o.indexOf("<b>")>-1||g&&0===B&&0===M&&(a||this.isWrap)?(T="bold",L=this.themeStyle.tooltipBoldLabel,u="font-weight:"+T,p.fontWeight=T,s.setAttribute("fill",this.textStyle.color||L)):(u="bold"===T?"font-weight:"+T:"",p.fontWeight=T,s.setAttribute("fill",this.textStyle.color||L)),(o.indexOf("</b>")>-1||g&&B===H-1&&0===M&&(a||this.isWrap))&&(T="Normal",L=this.themeStyle.tooltipLightLabel);var F=/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(o);s.textContent=o=o.replace(/<[a-zA-Z\/](.|\n)*?>/g,F?"‎":""),c+=Eg(o,p).width,""!==u&&(s.style.fontWeight=u.split("font-weight:")[1],s.style.color=s.getAttribute("fill")),s.style.fontFamily="inherit",s.style.fontStyle="inherit",s.style.fontSize="inherit",S=!1}c-=4,h=Math.max(h,c)}}this.elementSize=new Tg(h+(h>0?2*this.marginX:0),l),this.elementSize.width+=E+k;var j=O.childNodes[0];if(""!==f&&j&&!this.isWrap){p.fontWeight="bold";var V=(this.elementSize.width+2*this.padding)/2-Eg(f,p).width/2;j.setAttribute("x",V.toString())}},t.prototype.createTemplate=function(e,t){var i={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",i);var s=document.getElementById(this.element.id);this.isCanvas&&this.removeSVG();var n=s.firstElementChild;if(n&&Li(n),i.cancel)Li(Ag(this.element.id+"_tooltip"));else{for(var o=yi("div",{id:this.element.id+"parent_template"}),r=this.templateFn(this.data,this.controlInstance,o.id,o.id+"_blazorTemplate","");r&&r.length>0;)ye()||1===r.length?(o.appendChild(r[0]),r=null):o.appendChild(r[0]);s.appendChild(o);var a=this.isCanvas?o:this.element,l=a.getBoundingClientRect();this.padding=0,this.elementSize=new Tg(l.width,l.height);var h=this.shared?this.sharedTooltipLocation(e,this.location.x,this.location.y):this.tooltipLocation(e,t,new Hg(0,0),new Hg(0,0));if(!this.enableAnimation||this.shared||this.isFirst?this.updateDiv(a,h.x,h.y):this.animateTooltipDiv(this.element,h),this.blazorTemplate){var c=function(){var i=Ag(p.element.id).getBoundingClientRect();p.elementSize=new Tg(i.width,i.height);var s=p.tooltipLocation(e,t,new Hg(0,0),new Hg(0,0));p.updateDiv(Ag(p.element.id),s.x,s.y)},p=this;c.bind(p,e,t),Kt(this.element.id+"parent_template_blazorTemplate",this.blazorTemplate.name,this.blazorTemplate.parent,void 0,c)}}},t.prototype.sharedTooltipLocation=function(e,t,i){var s=this.elementSize.width+2*this.marginX,n=this.elementSize.height+2*this.marginY,o=new Lg(t+2*this.padding,i-n-this.padding,s,n);return o.y<e.y&&(o.y+=o.height+2*this.padding),o.x+o.width>e.x+e.width&&(o.x-=o.width+4*this.padding),o},t.prototype.getCurrentPosition=function(e,t,i,s){var n=this.tooltipPlacement,o=this.clipBounds.x,r=this.clipBounds.y,a=this.offset,l=this.elementSize.width+2*this.marginX,h=this.elementSize.height+2*this.marginY,c=new Hg(t.x,t.y);return"Top"===n||"Bottom"===n?(c=new Hg(c.x+o-this.elementSize.width/2-this.padding,c.y+r-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=s.x=l/2,"Bottom"===n&&(c.y=t.y+r+a),e.x+e.width<c.x+l?(c.x=e.width>l?e.x+e.width-l+6:e.x,i.x=s.x=e.width>l?e.x+t.x-c.x:t.x):e.x>c.x&&(c.x=e.x,i.x=s.x=t.x)):(c=new Hg(c.x+o+a,c.y+r-this.elementSize.height/2-this.padding),i.y=s.y=h/2,"Left"===n&&(c.x=t.x+o-a-(l+this.arrowPadding)),e.y+e.height<c.y+h?(c.y=e.height>h?e.y+e.height-h+6:e.y,i.y=s.y=e.height>h?e.y+t.y-c.y:t.y):e.y>c.y&&(c.y=e.y,i.y=s.y=t.y)),new Lg(c.x,c.y,l,h)},t.prototype.tooltipLocation=function(e,t,i,s){if(!ae(this.tooltipPlacement))return this.getCurrentPosition(e,t,i,s);var n=new Hg(t.x,t.y),o=this.elementSize.width+2*this.marginX,r=this.elementSize.height+2*this.marginY,a=this.offset,l=this.clipBounds.x,h=this.clipBounds.y,c=e.x,p=e.y;return this.inverted?(n=new Hg(n.x+l+a,n.y+h-this.elementSize.height/2-this.padding),i.y=s.y=r/2,(n.x+o+this.arrowPadding>c+e.width||this.isNegative)&&(n.x=(t.x>e.width?e.width:t.x)+l-a-(o+this.arrowPadding)),n.x<c&&(n.x=(t.x<0?0:t.x)+l+a),n.y<=p&&(i.y-=p-n.y,s.y-=p-n.y,n.y=p),n.y+r>=p+e.height&&(i.y+=n.y+r-(p+e.height),s.y+=n.y+r-(p+e.height),n.y-=n.y+r-(p+e.height)),i.y+this.arrowPadding/2>r-this.ry&&(i.y=r-this.ry-this.arrowPadding/2,s.y=r,this.tipRadius=0),i.y-this.arrowPadding/2<this.ry&&(i.y=this.ry+this.arrowPadding/2,s.y=0,this.tipRadius=0)):(n=new Hg(n.x+l-this.elementSize.width/2-this.padding,n.y+h-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=s.x=o/2,(n.y<p||this.isNegative)&&(n.y=(t.y<0?0:t.y)+h+a),n.y+r+this.arrowPadding>p+e.height&&(n.y=Math.min(t.y,p+e.height)+h-this.elementSize.height-2*this.padding-this.arrowPadding-a),s.x=o/2,n.x<c&&(i.x-=c-n.x,s.x-=c-n.x,n.x=c),n.x+o>c+e.width&&(i.x+=n.x+o-(c+e.width),s.x+=n.x+o-(c+e.width),n.x-=n.x+o-(c+e.width)),i.x+this.arrowPadding/2>o-this.rx&&(i.x=o-this.rx-this.arrowPadding/2,s.x=o,this.tipRadius=0),i.x-this.arrowPadding/2<this.rx&&(i.x=this.rx+this.arrowPadding/2,s.x=0,this.tipRadius=0)),new Lg(n.x,n.y,o,r)},t.prototype.animateTooltipDiv=function(e,t){var i,s=this,n=parseFloat(e.style.left),o=parseFloat(e.style.top);new vs({}).animate(e,{duration:this.duration,progress:function(s){i=s.timeStamp/s.duration,e.style.animation=null,e.style.left=n+i*(t.x-n)+"px",e.style.top=o+i*(t.y-o)+"px"},end:function(i){s.updateDiv(e,t.x,t.y),s.trigger("animationComplete",{tooltip:s})}})},t.prototype.updateDiv=function(e,t,i){e.style.left=t+"px",e.style.top=i+"px"},t.prototype.updateTemplateFn=function(){if(this.template){try{document.querySelectorAll(this.template).length&&(this.templateFn=Xt(document.querySelector(this.template).innerHTML.trim()))}catch(e){this.templateFn=Xt(this.template)}}},t.prototype.fadeOut=function(){var e=this,t=this.isCanvas&&!this.template?Ag(this.element.id+"_svg"):Ag(this.element.id);if(t){var i,s=t.firstChild;this.isCanvas&&!this.template&&(s=document.getElementById(this.element.id+"_group")?document.getElementById(this.element.id+"_group"):s),s&&(i=parseFloat(s.getAttribute("opacity"))||1),new vs({}).animate(s,{duration:200,progress:function(t){e.progressAnimation(s,i,t.timeStamp/t.duration)},end:function(t){e.fadeOuted=!0,e.endAnimation(s)}})}},t.prototype.progressAnimation=function(e,t,i){e.style.animation="",e.setAttribute("opacity",(t-i).toString())},t.prototype.endAnimation=function(e){e.setAttribute("opacity","0"),this.template&&(e.style.display="none"),this.trigger("animationComplete",{tooltip:this})},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.element.classList.remove("e-tooltip")},t.prototype.onPropertyChanged=function(e,t){this.blazorTemplate&&Zt(this.element.id+"parent_template_blazorTemplate"),this.isFirst=!1,this.render()},jg([os(!1)],t.prototype,"enable",void 0),jg([os(!1)],t.prototype,"shared",void 0),jg([os(!0)],t.prototype,"enableShadow",void 0),jg([os(null)],t.prototype,"fill",void 0),jg([os("")],t.prototype,"header",void 0),jg([os(.75)],t.prototype,"opacity",void 0),jg([rs({size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},Vg)],t.prototype,"textStyle",void 0),jg([os(null)],t.prototype,"template",void 0),jg([os(!0)],t.prototype,"enableAnimation",void 0),jg([os(300)],t.prototype,"duration",void 0),jg([os(!1)],t.prototype,"inverted",void 0),jg([os(!1)],t.prototype,"isNegative",void 0),jg([rs({color:"#cccccc",width:.5},zg)],t.prototype,"border",void 0),jg([os([])],t.prototype,"content",void 0),jg([os(10)],t.prototype,"markerSize",void 0),jg([rs({x:0,y:0},qg)],t.prototype,"clipBounds",void 0),jg([os([])],t.prototype,"palette",void 0),jg([os([])],t.prototype,"shapes",void 0),jg([rs({x:0,y:0},qg)],t.prototype,"location",void 0),jg([os(0)],t.prototype,"offset",void 0),jg([os(2)],t.prototype,"rx",void 0),jg([os(2)],t.prototype,"ry",void 0),jg([os(5)],t.prototype,"marginX",void 0),jg([os(5)],t.prototype,"marginY",void 0),jg([os(12)],t.prototype,"arrowPadding",void 0),jg([os(null)],t.prototype,"data",void 0),jg([os("Material")],t.prototype,"theme",void 0),jg([rs({x:0,y:0,width:0,height:0},_g)],t.prototype,"areaBounds",void 0),jg([os(null)],t.prototype,"availableSize",void 0),jg([os()],t.prototype,"blazorTemplate",void 0),jg([os(!1)],t.prototype,"isCanvas",void 0),jg([os(!1)],t.prototype,"isTextWrap",void 0),jg([os(null)],t.prototype,"tooltipPlacement",void 0),jg([os(null)],t.prototype,"controlInstance",void 0),jg([cs()],t.prototype,"tooltipRender",void 0),jg([cs()],t.prototype,"loaded",void 0),jg([cs()],t.prototype,"animationComplete",void 0),t=jg([ps],t)}(Ns),Ug=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Gg=function(){return function(e,t,i,s){this.x=e,this.y=t,this.height=i,this.width=s}}(),Yg=function(){return function(e,t){this.height=e,this.width=t}}(),Xg=function(){return function(e,t){this.x=e,this.y=t}}(),Kg=function(e){function t(t,i,s,n,o,r,a,l,h,c){var p=e.call(this,t,i,s,n,o,c)||this;return p.y=r.y,p.x=r.x,p.height=r.height,p.width=r.width,p.rx=a||0,p.ry=l||0,p.transform=h||"",p.stroke=0!==s&&""!==p.stroke?n:"transparent",p}return Ug(t,e),t}(Rg),Zg=function(){return function(e,t,i){this.r=e,this.g=t,this.b=i}}();function Qg(e){return"#"+Jg(e.r)+Jg(e.g)+Jg(e.b)}function Jg(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function $g(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new Zg(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):new Zg(255,255,255)}function ev(e){var t;e="transparent"===e?"white":e,document.body.appendChild(yi("text",{id:"chartmeasuretext"})),(t=document.getElementById("chartmeasuretext")).style.color=e,e=window.getComputedStyle(t).color,Li(t);var i=/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e);return Qg(new Zg(parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)))}var tv=function(){return function(e,t,i,s,n,o,r,a,l,h,c){this.id=e,this["font-size"]=t,this["font-style"]=i,this["font-family"]=s,this["font-weight"]=n,this["text-anchor"]=o,this.fill=r,this.x=a,this.y=l,this.width=h||0,this.height=c||0}}();function iv(e,t,i,s){var n=(s-90)*(Math.PI/180);return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function sv(e,t,i,s,n,o,r){var a=iv(e,t,i,s),l=iv(e,t,i,n),h="0",c=o?"0":"1";return h=o?(s>=n?s:s+360)-n<=180?"0":"1":(n>=s?n:n+360)-s<=180?"0":"1",r?"M "+e+" "+t+" L "+a.x+" "+a.y+" A "+i+" "+i+"  0  "+h+" "+c+" "+l.x+" "+l.y+" Z":"M"+a.x+" "+a.y+"A"+i+" "+i+" 0 "+h+" "+c+" "+l.x+" "+l.y}function nv(e,t){return null!=e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function ov(e,t){for(var i=Object.keys(e),s=0;s<i.length;s++)t.setAttribute(i[s],e[i[s]]);return t}function rv(e,t,i,s,n){var o=t+(n?-i:i);return(n?i:-i)*Math.cos(e/s*(Math.PI/2))+o}var av="annotationRender";function lv(e){return document.getElementById(e)}function hv(e){if(!e)return null;var t="string"==typeof e?lv(e):e;t&&Li(t)}var cv=function(){return function(e,t){this.x=e,this.y=t}}(),pv=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),dv=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},uv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),dv([os(10)],t.prototype,"top",void 0),dv([os(10)],t.prototype,"bottom",void 0),dv([os(10)],t.prototype,"left",void 0),dv([os(10)],t.prototype,"right",void 0),t}(Ls),mv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),dv([os("Normal")],t.prototype,"fontStyle",void 0),dv([os("16px")],t.prototype,"size",void 0),dv([os("Normal")],t.prototype,"fontWeight",void 0),dv([os("")],t.prototype,"color",void 0),dv([os("Segoe UI")],t.prototype,"fontFamily",void 0),dv([os(1)],t.prototype,"opacity",void 0),dv([os("Far")],t.prototype,"textAlignment",void 0),dv([os("")],t.prototype,"text",void 0),t}(Ls),fv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),dv([os(!1)],t.prototype,"enable",void 0),dv([os(2e3)],t.prototype,"duration",void 0),dv([os(0)],t.prototype,"delay",void 0),t}(Ls),gv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),dv([os(null)],t.prototype,"content",void 0),dv([os(0)],t.prototype,"annotationAngle",void 0),dv([os("0%")],t.prototype,"annotationRadius",void 0),t}(Ls),vv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),dv([os("")],t.prototype,"color",void 0),dv([os(null)],t.prototype,"start",void 0),dv([os(null)],t.prototype,"end",void 0),t}(Ls);var yv="http://www.w3.org/2000/svg",bv=function(){function e(e){this.control=e}return e.prototype.render=function(e,t){return this.annotation=e,yi("div",{id:this.control.element.id+"Annotation"+t,styles:"position:absolute;z-index:1",innerHTML:e.content})},e.prototype.processAnnotation=function(e,t,i){var s,n;n=new cv(0,0),(s=this.render(e,t))?this.setElementStyle(n,s,i):this.control.redraw&&(hv(s.id),this.control.isReact&&this.control.clearTemplate())},e.prototype.setElementStyle=function(e,t,i){var s={cancel:!1,name:av,content:t,location:e};if(this.control.trigger(av,s),!s.cancel){var n=this.Location(this.annotation.annotationRadius,this.annotation.annotationAngle);s.content.style.left=n.left+"px",s.content.style.top=n.top+"px",s.content.style.transform="translate(-50%, -50%)",s.content.setAttribute("aria-label","Annotation"),i.appendChild(s.content),this.control.isReact&&this.control.renderReactTemplates()}},e.prototype.Location=function(e,t){var i,s,n=parseFloat(e);if(0===n&&0===t){var o=this.control.progressRect;s=o.x+o.width/2,i=o.y+o.height/2}else{t-=90,t*=Math.PI/180;var r=Math.round(this.control.progressSize.width/2.25),a=Math.round(this.control.progressSize.height/2.25);s=n*Math.cos(t)+r,i=n*Math.sin(t)+a}return{top:i,left:s}},e}(),Cv=function(){function e(){}return e.prototype.doLinearAnimation=function(e,t,i,s,n){var o=this,r=new vs({}),a=e,l=t.isActive?3e3:t.animation.duration,h=a.getAttribute("width"),c=a.getAttribute("x"),p=0,d=0,u=t.enableRtl&&"Round4px"!==t.cornerRadius?parseInt(c,10):s,m=t.enableRtl&&"Round4px"!==t.cornerRadius?parseInt(h,10)-s:parseInt(h,10)-u,f=parseInt(c,10)-m;a.style.visibility="hidden",r.animate(a,{duration:l,delay:i,progress:function(e){t.cancelResize=!0,t.enableRtl&&"Round4px"!==t.cornerRadius?e.timeStamp>=e.delay&&(a.style.visibility="visible",t.isActive?(d=o.activeAnimate(e.timeStamp/e.duration,parseInt(c,10),parseInt(h,10),!0),p=rv(e.timeStamp,.5,.5,e.duration,!0),n.setAttribute("opacity",p.toString()),a.setAttribute("x",d.toString())):(d=rv(e.timeStamp,u,m,e.duration,!0),a.setAttribute("x",d.toString()))):e.timeStamp>=e.delay&&(a.style.visibility="visible",t.isActive?(d=o.activeAnimate(e.timeStamp/e.duration,0,parseInt(h,10),!1),p=rv(e.timeStamp,.5,.5,e.duration,!0),n.setAttribute("opacity",p.toString()),a.setAttribute("width",d.toString())):(d=rv(e.timeStamp,u,m,e.duration,!1),a.setAttribute("width",d.toString())))},end:function(r){t.cancelResize=!1,a.style.visibility="",t.enableRtl&&"Round4px"!==t.cornerRadius?t.isActive?(a.setAttribute("x",c.toString()),o.doLinearAnimation(e,t,i,s,n)):a.setAttribute("x",f.toString()):(a.setAttribute("width",h),t.isActive&&o.doLinearAnimation(e,t,i,s,n)),t.trigger("animationComplete",{value:t.value,trackColor:t.trackColor,progressColor:t.progressColor})}})},e.prototype.doLinearIndeterminate=function(e,t,i,s,n){var o=this,r=new vs({}),a=e,l=a.getAttribute("x"),h=a.getAttribute("width"),c=0,p=h?-parseInt(h,10):-t,d=s.progressRect.x+s.progressRect.width+(h?parseInt(h,10):t),u=s.enableProgressSegments?3500:2500;r.animate(n,{duration:u,delay:0,progress:function(e){s.enableRtl&&"Round4px"!==s.cornerRadius?(c=rv(e.timeStamp,parseInt(l,10)||s.progressRect.x+t,d,e.duration,!0),s.enableProgressSegments?a.setAttribute("d",s.getPathLine(c,t,i)):a.setAttribute("x",c.toString())):(c=rv(e.timeStamp,p,d,e.duration,!1),s.enableProgressSegments?a.setAttribute("d",s.getPathLine(c,t,i)):a.setAttribute("x",c.toString()))},end:function(){s.enableRtl&&!s.enableProgressSegments&&"Round4px"!==s.cornerRadius?a.setAttribute("x",l.toString()):s.enableProgressSegments||a.setAttribute("x",p.toString()),s.destroyIndeterminate||o.doLinearIndeterminate(e,t,i,s,n)}})},e.prototype.doStripedAnimation=function(e,t,i,s){var n=this,o=new vs({}),r=1e3/t.animation.duration;o.animate(e,{duration:t.animation.duration,delay:t.animation.delay,progress:function(){i+=t.enableRtl?-r:r,e.setAttribute("gradientTransform","translate("+i+") rotate(-45)")},end:function(){t.destroyIndeterminate||n.doStripedAnimation(e,t,i,!1)}})},e.prototype.doCircularAnimation=function(e,t,i,s,n,o,r,a,l,h,c,p){var d,u,m=this,f=new vs({}),g=o,v=r.startAngle,y=i+a/2,b=0,C=0,S=r.isActive?3e3:r.animation.duration;v+="Round"===r.cornerRadius&&359.99!==n&&0!==n?r.enableRtl?.45*a:-.45*a:0,n+="Round"===r.cornerRadius&&359.99!==n&&0!==n?.45*a:0,s+="Round"===r.cornerRadius&&359.99!==n&&0!==n?r.enableRtl?-.45*a:.45*a:0,d=ae(h)?v:h,u=ae(h)?n:n-c,g.setAttribute("visibility","Hidden"),f.animate(g,{duration:S,delay:l,progress:function(i){r.cancelResize=!0,i.timeStamp>=i.delay&&(g.setAttribute("visibility","visible"),r.isActive?(b=m.activeAnimate(i.timeStamp/i.duration,d,u,r.enableRtl),C=rv(i.timeStamp,.5,.5,i.duration,!0),p.setAttribute("opacity",C.toString()),g.setAttribute("d",sv(e,t,y,v,b%360,r.enableRtl,!0))):(b=rv(i.timeStamp,d,u,i.duration,r.enableRtl),g.setAttribute("d",sv(e,t,y,v,b%360,r.enableRtl,!0))))},end:function(d){r.cancelResize=!1,g.setAttribute("visibility",""),g.setAttribute("d",sv(e,t,y,v,s,r.enableRtl,!0)),r.isActive&&m.doCircularAnimation(e,t,i,s,n,o,r,a,l,h,c,p),r.trigger("animationComplete",{value:r.value,trackColor:r.trackColor,progressColor:r.progressColor})}})},e.prototype.doCircularIndeterminate=function(e,t,i,s,n,o,r,a,l){var h=this,c=new vs({}),p=r+(t.enableProgressSegments?0:a/2),d=t.enableProgressSegments?2:3;c.animate(l,{progress:function(){e.style.visibility="visible",i+=t.enableRtl?-d:d,s+=t.enableRtl?-d:d,e.setAttribute("d",sv(n,o,p,i%360,s%360,t.enableRtl,!t.enableProgressSegments))},end:function(c){t.destroyIndeterminate||h.doCircularIndeterminate(e,t,i,s,n,o,r,a,l)}})},e.prototype.doLabelAnimation=function(e,t,i,s,n,o){var r,a,l=new vs({}),h=new vs({}),c=e.innerHTML,p=0,d=0,u=0,m=s.labelStyle.text,f=s.labelStyle.textAlignment,g=parseInt(e.getAttribute("x"),10);e.setAttribute("visibility","Hidden"),"Linear"===s.type&&(r=(r=s.enableRtl?s.progressRect.x+s.progressRect.width+o/2:s.progressRect.x-o/2)<=0?0:r,a=s.enableRtl?r-g:g-r),l.animate(e,{duration:s.animation.duration,delay:n,progress:function(n){s.cancelResize=!0,"Linear"===s.type?n.timeStamp>=n.delay&&""===m&&(e.setAttribute("visibility","visible"),p=rv(n.timeStamp,t,i,n.duration,!1),u=parseInt((p/s.progressRect.width*100).toString(),10),e.innerHTML=u.toString()+"%","Far"!==f&&"Center"!==f||(d=rv(n.timeStamp,r,a,n.duration,s.enableRtl),e.setAttribute("x",d.toString()))):"Circular"===s.type&&""===m&&(e.setAttribute("visibility","visible"),p=rv(n.timeStamp,t,i,n.duration,!1),u=parseInt(((p-t)/s.totalAngle*100).toString(),10),e.innerHTML=u.toString()+"%")},end:function(){s.cancelResize=!1,""===m?(e.innerHTML=c,e.setAttribute("x",g.toString())):h.animate(e,{progress:function(t){e.setAttribute("visibility","visible"),p=rv(t.timeStamp,0,1,t.duration,!1),e.setAttribute("opacity",p.toString())},end:function(){e.setAttribute("opacity","1")}})}})},e.prototype.doAnnotationAnimation=function(e,t,i,s){var n,o,r,a,l,h,c,p=new vs({}),d=0,u=t.annotations.length>0,m=t.startAngle,f=t.totalAngle;u&&t.progressAnnotationModule&&(o=document.getElementById(t.element.id+"Annotation0").children[0])&&o.children[0]&&"SPAN"===o.children[0].tagName&&(n=o.children[0]),r=(t.argsData.value-t.minimum)/(t.maximum-t.minimum)*t.totalAngle,t.annotateTotal=r=t.argsData.value<t.minimum||t.argsData.value>t.maximum?0:r,t.annotateEnd=m+r,l=(t.argsData.value-t.minimum)/(t.maximum-t.minimum)*100,l=t.argsData.value<t.minimum||t.argsData.value>t.maximum?0:Math.round(l),h=ae(i)?m:i,c=ae(i)?r:r-s,t.argsData.value<=t.minimum||t.argsData.value>t.maximum?n.innerHTML=l+"%":p.animate(e,{duration:t.animation.duration,delay:t.animation.delay,progress:function(e){t.cancelResize=!0,u&&n&&(d=rv(e.timeStamp,h,c,e.duration,!1),a=parseInt(((Math.round(d)-m)/f*100).toString(),10),n.innerHTML=a?a.toString()+"%":"0%")},end:function(e){t.cancelResize=!1,n.innerHTML=l+"%"}})},e.prototype.activeAnimate=function(e,t,i,s){var n=1-Math.pow(1-e,3);return t+(s?-n*i:n*i)},e}(),Sv=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),xv=function(e){function t(t,i){var s=e.call(this,t)||this;return s.animation=new Cv,s.progress=t,s.annotations=i,s}return Sv(t,e),t.prototype.renderAnnotations=function(e){var t=this;this.annotations=this.progress.annotations;var i=document.getElementById(this.progress.element.id+"Annotation_collections");this.parentElement=i||yi("div",{id:this.progress.element.id+"Annotation_collections",styles:"position:absolute"}),this.annotations.map(function(e,i){t.processAnnotation(e,i,t.parentElement)}),i||e.appendChild(this.parentElement),this.progress.animation.enable&&!this.progress.isIndeterminate&&this.animation.doAnnotationAnimation(this.progress.clipPath,this.progress)},t.prototype.getModuleName=function(){return"ProgressAnnotation"},t.prototype.destroy=function(e){},t}(bv),wv=function(){function e(){}return e.prototype.createLinearSegment=function(e,t,i,s,n,o){var r=e.enableRtl?"Round"===e.cornerRadius?e.progressRect.x+e.progressRect.width-.45*n:e.progressRect.x+e.progressRect.width:"Round"===e.cornerRadius?e.progressRect.x+.45*n:e.progressRect.x,a=e.progressRect.y+e.progressRect.height/2,l=e.gapWidth||e.themeStyle.linearGapWidth,h=o/e.segmentCount,c=o-(e.segmentCount-1)*l;c=(c-("Round"===e.cornerRadius?e.segmentCount*(.9*n):0))/e.segmentCount;for(var p,d,u,m,f="Round"===e.cornerRadius?l+.9*n:l,g=e.renderer.createGroup({id:e.element.id+t}),v=Math.ceil(i/h),y=0,b="Round"===e.cornerRadius?i-.9*n:i,C=e.progressThickness||e.themeStyle.linearProgressThickness,S=0;S<v;S++)p=b<c?b:c,y<e.segmentColor.length?(d=e.segmentColor[y],y++):(y=0,d=e.segmentColor[y],y++),u=new Rg(e.element.id+t+S,"none",C,d,s,"0",this.getLinearSegmentPath(r,a,p,e.enableRtl)),m=e.renderer.drawPath(u),"Round"===e.cornerRadius&&m.setAttribute("stroke-linecap","round"),g.appendChild(m),r+=e.enableRtl?-c-f:c+f,b=(b-=c+f)<0?0:b;return g},e.prototype.getLinearSegmentPath=function(e,t,i,s){return"M "+e+" "+t+" L"+(e+(s?-i:i))+" "+t},e.prototype.createCircularSegment=function(e,t,i,s,n,o,r,a,l,h){var c=e.startAngle,p=this.widthToAngle(e.minimum,e.maximum,o,e.totalAngle);p-="Round"===e.cornerRadius&&359.99===e.totalAngle?this.widthToAngle(0,h,.45*a,l):0;var d=h-(359.99===e.totalAngle?e.segmentCount:e.segmentCount-1)*(e.gapWidth||e.themeStyle.circularGapWidth);d=(d-("Round"===e.cornerRadius?.9*(359.99===e.totalAngle?e.segmentCount:e.segmentCount-1)*a:0))/e.segmentCount;var u=this.widthToAngle(0,h,h/e.segmentCount,l);u-="Round"===e.cornerRadius&&359.99===e.totalAngle?this.widthToAngle(0,h,.45*a,l):0;var m=this.widthToAngle(0,h,d,l),f=this.widthToAngle(0,h,e.gapWidth||e.themeStyle.circularGapWidth,l);f+="Round"===e.cornerRadius?this.widthToAngle(0,h,.9*a,l):0;for(var g,v,y,b,C,S=e.renderer.createGroup({id:e.element.id+t}),x=Math.floor(p/u),w=Math.ceil((p-f*x)/m),E=(c+(e.enableRtl?-m:m))%360,k=0,T=e.progressThickness||e.themeStyle.circularProgressThickness,L=0;L<w;L++)g=sv(i,s,n,c,y=e.enableRtl?e.startAngle-p>E?e.startAngle-p:E:e.startAngle+p<E?e.startAngle+p:E,e.enableRtl),k<e.segmentColor.length?(b=e.segmentColor[k],k++):(k=0,b=e.segmentColor[k],k++),C=new Rg(e.element.id+t+L,"none",T,b,r,"0",g),v=e.renderer.drawPath(C),"Round"===e.cornerRadius&&v.setAttribute("stroke-linecap","round"),S.appendChild(v),c=y+(e.enableRtl?-f:f),E+=e.enableRtl?-m-f:m+f;return S},e.prototype.widthToAngle=function(e,t,i,s){return(i-e)/(t-e)*s},e.prototype.createLinearRange=function(e,t){for(var i,s,n,o,r,a,l,h,c,p,d=t.progressRect.x+(t.enableRtl?t.progressRect.width:0),u=t.progressRect.y+t.progressRect.height/2,m=t.renderer.createGroup({id:t.element.id+"_LinearRangeGroup"}),f=t.rangeColors,g=t.progressThickness||t.themeStyle.linearProgressThickness,v=t.themeStyle.progressOpacity,y=t.minimum,b=t.value,C=t.enableRtl?.1:-.1,S=0;S<f.length;S++)s=f[S].start>=y&&f[S].start<=b&&f[S].end>=y&&f[S].end<=b,r=e*t.calculateProgressRange(f[S].start,y,b),a=e*t.calculateProgressRange(f[S].end,y,b),l=d+(t.enableRtl?-r:r),h=d+(t.enableRtl?-a:a),l=s?t.isGradient&&S>0?l+C:l:d,h=s?h:d,c=t.isGradient?"url(#lineRangeGrad_"+S+")":f[S].color,o=new Rg(t.element.id+"_LinearRange_"+S,"none",g,c,v,"0","M "+l+" "+u+" L"+h+" "+u),n=t.renderer.drawPath(o),m.appendChild(n),t.isGradient&&(p=f.length-1===S?f[S].color:f[S+1].color,i=this.setLinearGradientColor(S,f[S].color,p,l,h,t),m.appendChild(i));return m},e.prototype.createCircularRange=function(e,t,i,s){for(var n,o,r,a,l,h,c,p,d=s.renderer.createGroup({id:s.element.id+"_CircularRangeGroup"}),u=s.rangeColors,m=s.progressThickness||s.themeStyle.linearProgressThickness,f=s.themeStyle.progressOpacity,g=s.minimum,v=s.value,y=s.startAngle,b=this.widthToAngle(s.minimum,s.maximum,s.value,s.totalAngle),C=0;C<u.length;C++)l=u[C].start>=g&&u[C].start<=v&&u[C].end>=g&&u[C].end<=v,o=this.widthToAngle(g,v,u[C].start,b),r=this.widthToAngle(g,v,u[C].end,b),o=l?(y+(s.enableRtl?-o:o))%360:y,r=l?(y+(s.enableRtl?-r:r))%360:y,c=s.isGradient?"url(#circleRangeGrad_"+C+")":u[C].color,h=new Rg(s.element.id+"_CircularRange_"+C,"none",m,c,f,"0",sv(e,t,i,o,r,s.enableRtl)),a=s.renderer.drawPath(h),d.appendChild(a),s.isGradient&&(p=u.length-1===C?u[C].color:u[C+1].color,n=this.setCircularGradientColor(C,u[C].color,p,o,r,i,e,t,s),d.appendChild(n));return d},e.prototype.setLinearGradientColor=function(e,t,i,s,n,o){var r,a,l=[];return a={id:"lineRangeGrad_"+e,x1:s.toString(),x2:n.toString()},l[0]={color:t,colorStop:"50%"},l[1]={color:i,colorStop:"100%"},(r=o.renderer.drawGradient("linearGradient",a,l)).firstElementChild.setAttribute("gradientUnits","userSpaceOnUse"),r},e.prototype.setCircularGradientColor=function(e,t,i,s,n,o,r,a,l){var h,c,p=[],d=iv(r,a,o,s),u=iv(r,a,o,n);return c={id:"circleRangeGrad_"+e,x1:d.x.toString(),x2:u.x.toString(),y1:d.y.toString(),y2:u.y.toString()},p[0]={color:t,colorStop:"50%"},p[1]={color:i,colorStop:"100%"},(h=l.renderer.drawGradient("linearGradient",c,p)).firstElementChild.setAttribute("gradientUnits","userSpaceOnUse"),h},e}(),Ev=function(){function e(e){this.segment=new wv,this.animation=new Cv,this.progress=e}return e.prototype.renderLinearTrack=function(){var e,t,i,s,n=this.progress,o=n.renderer.createGroup({id:n.element.id+"_LinearTrackGroup"});this.isRange=""!==this.progress.rangeColors[0].color||null!==this.progress.rangeColors[0].start||null!==this.progress.rangeColors[0].end,i=n.trackThickness||n.themeStyle.linearTrackThickness,s=n.argsData.trackColor||n.themeStyle.linearTrackColor,"Round4px"===n.cornerRadius?n.segmentCount>1?e=this.createRoundCornerSegment("_LinearTrack_",s,i,!0,0,n):(t=new Rg(n.element.id+"_Lineartrack",s,0,"none",n.themeStyle.trackOpacity,"0",this.cornerRadius(n.progressRect.x,n.progressRect.y,n.progressRect.width,i,4,"")),e=n.renderer.drawPath(t)):(t=new Rg(n.element.id+"_Lineartrack","none",i,s,n.themeStyle.trackOpacity,"0",n.getPathLine(n.progressRect.x,n.progressRect.width,i)),e=n.renderer.drawPath(t),n.trackWidth=e.getTotalLength(),"Round"!==n.cornerRadius||this.isRange||e.setAttribute("stroke-linecap","round"),n.segmentCount>1&&!this.isRange&&!n.enableProgressSegments&&(n.segmentSize=n.calculateSegmentSize(n.trackWidth,i),e.setAttribute("stroke-dasharray",n.segmentSize))),o.appendChild(e),n.svgObject.appendChild(o)},e.prototype.renderLinearProgress=function(e,t){void 0===t&&(t=0);var i,s,n,o,r,a,l,h,c,p,d,u,m=this.progress,f=m.value===m.maximum;n=m.calculateProgressRange(m.argsData.value),m.previousWidth=o=m.progressRect.width*(m.isIndeterminate&&!m.enableProgressSegments?1:n),l=e?Ag(m.element.id+"_LinearProgressGroup"):m.renderer.createGroup({id:m.element.id+"_LinearProgressGroup"}),c=m.progressThickness||m.themeStyle.linearProgressThickness,p=m.isStriped?"url(#"+m.element.id+"_LinearStriped)":this.checkingLinearProgressColor(),i="Round4px"===m.cornerRadius?new Rg(m.element.id+"_Linearprogress",p,0,"none",m.themeStyle.progressOpacity,"0",this.cornerRadius(m.progressRect.x,m.progressRect.y,o,c,4,f||m.isIndeterminate?"":"start")):new Rg(m.element.id+"_Linearprogress","none",c,p,m.themeStyle.progressOpacity,"0",m.getPathLine(m.progressRect.x,o,c)),m.progressWidth=m.renderer.drawPath(i).getTotalLength(),m.segmentSize=m.enableProgressSegments?m.calculateSegmentSize(m.progressWidth,c):m.segmentSize,null===m.secondaryProgress||m.isIndeterminate||this.renderLinearBuffer(m),null!==m.argsData.value&&("Round4px"===m.cornerRadius?s=m.segmentCount>1?this.createRoundCornerSegment("_Linearprogress_",p,c,!1,o,m,m.themeStyle.progressOpacity):m.renderer.drawPath(i):0===m.segmentColor.length||m.isIndeterminate||this.isRange?this.isRange&&!m.isIndeterminate?s=this.segment.createLinearRange(o,m):(e?((s=Ag(m.element.id+"_Linearprogress")).setAttribute("d",m.getPathLine(m.progressRect.x,o,c)),s.setAttribute("stroke",p)):s=m.renderer.drawPath(i),m.segmentCount>1&&s.setAttribute("stroke-dasharray",m.segmentSize),"Round"===m.cornerRadius&&n&&s.setAttribute("stroke-linecap","round")):(d=m.enableProgressSegments?m.progressWidth:m.trackWidth,s=this.segment.createLinearSegment(m,"_LinearProgressSegment",o,m.themeStyle.progressOpacity,c,d)),l.appendChild(s),m.isStriped&&!m.isIndeterminate&&(u=this.checkingLinearProgressColor(),this.renderLinearStriped(u,l,m)),!m.isActive||m.isIndeterminate||m.isStriped||this.renderActiveState(l,n,o,c,e),!m.animation.enable||m.isIndeterminate||m.isActive||m.isStriped||(h=null!==m.secondaryProgress?m.animation.delay+(this.bufferWidth-o):m.animation.delay,this.delay=h,r=m.createClipPath(m.clipPath,n,null,e,c,!1,"Round4px"===m.cornerRadius&&f),l.appendChild(m.clipPath),s.setAttribute("style","clip-path:url(#"+m.element.id+"_clippath)"),this.animation.doLinearAnimation(r,m,h,e?t:0)),m.isIndeterminate&&(a=m.createClipPath(m.clipPath,m.enableProgressSegments?1:n,null,e,c,m.enableProgressSegments),l.appendChild(m.clipPath),s.setAttribute("style","clip-path:url(#"+m.element.id+"_clippath)"),this.animation.doLinearIndeterminate(m.enableProgressSegments?s:a,o,c,m,a)),m.svgObject.appendChild(l))},e.prototype.renderLinearBuffer=function(e){var t,i,s,n,o,r,a,l,h,c=e.secondaryProgress===e.maximum;i=e.calculateProgressRange(e.secondaryProgress),this.bufferWidth=o=e.progressRect.width*i,n=e.renderer.createGroup({id:e.element.id+"_LinearBufferGroup"}),a=e.progressThickness||e.themeStyle.linearProgressThickness,l=this.checkingLinearProgressColor(),"Round4px"===e.cornerRadius?e.segmentCount>1?t=this.createRoundCornerSegment("_Linearbuffer_",l,a,!1,o,e,e.themeStyle.bufferOpacity):(r=new Rg(e.element.id+"_Linearbuffer",l,0,"none",e.themeStyle.bufferOpacity,"0",this.cornerRadius(e.progressRect.x,e.progressRect.y,o,a,4,c?"":"start")),t=e.renderer.drawPath(r)):(r=new Rg(e.element.id+"_Linearbuffer","none",a,l,e.themeStyle.bufferOpacity,"0",e.getPathLine(e.progressRect.x,o,a)),0===e.segmentColor.length||e.isIndeterminate||this.isRange?(t=e.renderer.drawPath(r),e.segmentCount>1&&!this.isRange&&t.setAttribute("stroke-dasharray",e.segmentSize),"Round"!==e.cornerRadius||this.isRange||t.setAttribute("stroke-linecap","round")):(h=e.enableProgressSegments?e.progressWidth:e.trackWidth,t=this.segment.createLinearSegment(e,"_LinearBufferSegment",o,e.themeStyle.bufferOpacity,e.progressThickness||e.themeStyle.linearProgressThickness,h))),n.appendChild(t),e.animation.enable&&(s=e.createClipPath(e.bufferClipPath,i,null,!1,a,!1,"Round4px"===e.cornerRadius&&c),n.appendChild(e.bufferClipPath),t.setAttribute("style","clip-path:url(#"+e.element.id+"_clippathBuffer)"),this.animation.doLinearAnimation(s,e,e.animation.delay,0)),e.svgObject.appendChild(n)},e.prototype.renderLinearLabel=function(){var e,t,i,s,n,o,r,a,l,h,c,p,d,u,m,f=this.progress.progressThickness||this.progress.themeStyle.linearProgressThickness,g=this.progress,v=g.labelStyle.textAlignment,y=g.labelStyle.text,b=this.checkingLinearProgressColor(),C=g.progressRect.width*g.calculateProgressRange(g.value);m=g.renderer.createGroup({id:g.element.id+"_LinearLabelGroup"}),r=(g.value-g.minimum)/(g.maximum-g.minimum)*100,t=g.value<g.minimum||g.value>g.maximum?0:Math.round(r),p=$g(ev(b)),d=Math.round((299*p.r+587*p.g+114*p.b)/1e3),n={cancel:!1,text:y||String(t)+"%",color:g.labelStyle.color},g.trigger("textRender",n),n.cancel||(o=Eg(n.text,g.labelStyle),l=g.enableRtl?g.progressRect.x+g.progressRect.width-o.width/2:g.progressRect.x+o.width/2,g.labelOnTrack?"Near"===v?i=l+(g.enableRtl?-5:5):"Center"===v?(c=g.enableRtl?g.progressRect.x+g.progressRect.width-C/2:g.progressRect.x+C/2,i=(g.enableRtl?c<=l:c>=l)?c:l):(h=g.enableRtl?g.progressRect.x+g.progressRect.width-C+o.width/2:g.progressRect.x+C-o.width/2,h+=g.enableRtl?5:-5,i=(g.enableRtl?h<=l:h>=l)?h:l):"Near"===v?i=l+(g.enableRtl?-5:5):"Center"===v?i=(g.progressRect.x+g.progressRect.width)/2:(i=g.enableRtl?g.progressRect.x+o.width/2:g.progressRect.x+g.progressRect.width-o.width/2,i+=g.enableRtl?5:-5),s="Round4px"===this.progress.cornerRadius?g.progressRect.y+f/2+o.height/4:g.progressRect.y+g.progressRect.height/2+o.height/4,a=new tv(g.element.id+"_linearLabel",g.labelStyle.size||g.themeStyle.linearFontSize,g.labelStyle.fontStyle||g.themeStyle.linearFontStyle,g.labelStyle.fontFamily||g.themeStyle.linearFontFamily,g.labelStyle.fontWeight,"middle",n.color||(d>=128?"black":"white"),i,s),e=g.renderer.createText(a,n.text),m.appendChild(e),g.animation.enable&&!g.isIndeterminate&&(u=g.renderer.createClipPath({id:g.element.id+"_clippathLabel"}),g.createClipPath(u,1,null,!1,g.progressThickness||g.themeStyle.linearProgressThickness,!0),m.appendChild(u),e.setAttribute("style","clip-path:url(#"+g.element.id+"_clippathLabel)"),this.animation.doLabelAnimation(e,0,C,g,this.delay,o.width)),g.svgObject.appendChild(m))},e.prototype.renderActiveState=function(e,t,i,s,n){var o,r,a,l=this.progress,h=l.value===l.maximum;"Round4px"===l.cornerRadius?l.segmentCount>1?o=this.createRoundCornerSegment("_LinearActiveProgress_","#ffffff",s,!1,i,l,.5):(a=new Rg(l.element.id+"_LinearActiveProgress","#ffffff",0,"none",.5,"0",this.cornerRadius(l.progressRect.x,l.progressRect.y,i,s,4,h?"":"start")),o=l.renderer.drawPath(a)):(n?(o=Ag(l.element.id+"_LinearActiveProgress")).setAttribute("d",l.getPathLine(l.progressRect.x,i,s)):(a=new Rg(l.element.id+"_LinearActiveProgress","none",s,"#ffffff",.5,"",l.getPathLine(l.progressRect.x,i,s)),o=l.renderer.drawPath(a)),l.segmentCount>1&&!this.isRange&&o.setAttribute("stroke-dasharray",l.segmentSize),"Round"===l.cornerRadius&&t&&!this.isRange&&o.setAttribute("stroke-linecap","round")),r=l.createClipPath(l.clipPath,t,null,n,s,!1),o.setAttribute("style","clip-path:url(#"+l.element.id+"_clippath)"),e.appendChild(o),e.appendChild(l.clipPath),this.animation.doLinearAnimation(r,l,0,0,o)},e.prototype.renderLinearStriped=function(e,t,i){var s,n,o=i.renderer.createDefs(),r=document.createElementNS(yv,"linearGradient");n=[{offset:"50%","stop-color":e,"stop-opacity":"1"},{offset:"50%","stop-color":e,"stop-opacity":"0.4"}],r=ov({id:i.element.id+"_LinearStriped",x1:i.progressRect.x.toString(),x2:(i.progressRect.x+14).toString(),spreadMethod:"repeat",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-45)"},r);for(var a=0;a<n.length;a++)s=document.createElementNS(yv,"stop"),s=ov(n[a],s),r.appendChild(s);o.appendChild(r),t.appendChild(o),i.animation.enable&&this.animation.doStripedAnimation(r,i,0)},e.prototype.checkingLinearProgressColor=function(){var e,t=this.progress;switch(t.role){case"Success":e=t.themeStyle.success;break;case"Info":e=t.themeStyle.info;break;case"Warning":e=t.themeStyle.warning;break;case"Danger":e=t.themeStyle.danger;break;default:e=t.argsData.progressColor||t.themeStyle.linearProgressColor}return e},e.prototype.cornerRadius=function(e,t,i,s,n,o){var r="",a=i,l=n;switch(o){case"start":r="M"+e+","+t+" h"+i+" v"+s+" h"+-i+" a"+n+","+n+" 0 0 1 "+-n+","+-n+" v"+(2*n-s)+" a"+n+","+n+" 0 0 1 "+n+","+-n+" z";break;case"end":r="M"+e+","+t+" h"+(a-l)+" a"+l+","+l+" 0 0 1 "+l+","+l+" v"+(s-2*l)+" a"+l+","+l+" 0 0 1 "+-l+","+l+" h"+(n-a)+" v"+-s+" z";break;case"none":r="M"+e+","+t+" h"+i+" v"+s+" h"+-i+" v"+-s+" z";break;default:r="M"+e+","+t+" h"+(i-n)+" a"+n+","+n+" 0 0 1 "+n+","+n+" v"+(s-2*n)+" a"+n+","+n+" 0 0 1 "+-n+","+n+" h"+(n-i)+" a"+n+","+n+" 0 0 1 "+-n+","+-n+" v"+(2*n-s)+" a"+n+","+n+" 0 0 1 "+n+","+-n+" z"}return r},e.prototype.createRoundCornerSegment=function(e,t,i,s,n,o,r){for(var a,l,h,c,p=o.progressRect.x,d=o.progressRect.y,u=o.progressRect.width,m=o.gapWidth||o.themeStyle.linearGapWidth,f=(u-(o.segmentCount-1)*m)/o.segmentCount,g=o.renderer.createGroup({id:o.element.id+e+"SegmentGroup"}),v=1;v<=o.segmentCount;v++)if(l=1===v||v===o.segmentCount?1===v?"start":"end":"none",s)a=new Rg(o.element.id+e+v,t,0,"none",o.themeStyle.trackOpacity,"0",this.cornerRadius(p,d,f,i,4,l)),c=o.renderer.drawPath(a),g.appendChild(c),p+=f+m;else if(h=n<f?n:f,a=new Rg(o.element.id+e+v,t,0,"none",r,"0",this.cornerRadius(p,d,h,i,4,l)),c=o.renderer.drawPath(a),g.appendChild(c),p+=f+m,(n-=f+m)<=0)break;return g},e}(),kv=function(){function e(e){this.segment=new wv,this.animation=new Cv,this.progress=e}return e.prototype.renderCircularTrack=function(){var e,t,i,s,n,o,r,a,l,h=this.progress,c=h.renderer.createGroup({id:h.element.id+"_CircularTrackGroup"});t=h.startAngle,h.totalAngle=(h.endAngle-h.startAngle)%360,h.totalAngle=h.totalAngle<=0?360+h.totalAngle:h.totalAngle,h.totalAngle-=360===h.totalAngle?.01:0,this.trackEndAngle=i=(h.startAngle+(h.enableRtl?-h.totalAngle:+h.totalAngle))%360,this.centerX=h.progressRect.x+h.progressRect.width/2,this.centerY=h.progressRect.y+h.progressRect.height/2,this.maxThickness=Math.max(h.trackThickness,h.progressThickness)||Math.max(h.themeStyle.circularProgressThickness,h.themeStyle.circularTrackThickness),this.availableSize=Math.min(h.progressRect.height,h.progressRect.width)/2-this.maxThickness/2,e=null===(e=nv(h.radius,this.availableSize))?0:e,l=h.argsData.trackColor||h.themeStyle.circularTrackColor,r=h.enablePieProgress?h.argsData.trackColor||h.themeStyle.circularTrackColor:"none",a=h.enablePieProgress?0:h.trackThickness||h.themeStyle.circularTrackThickness,n=sv(this.centerX,this.centerY,e,t,i,h.enableRtl,h.enablePieProgress),this.isRange=""!==this.progress.rangeColors[0].color||null!==this.progress.rangeColors[0].start||null!==this.progress.rangeColors[0].end,o=new Rg(h.element.id+"_Circulartrack",r,a,l,h.themeStyle.trackOpacity,"0",n),s=h.renderer.drawPath(o),h.trackWidth=s.getTotalLength(),h.segmentCount>1&&!h.enableProgressSegments&&!h.enablePieProgress&&!this.isRange&&(h.segmentSize=h.calculateSegmentSize(h.trackWidth,a),s.setAttribute("stroke-dasharray",h.segmentSize)),"Round"!==h.cornerRadius||h.enablePieProgress||this.isRange||s.setAttribute("stroke-linecap","round"),c.appendChild(s),h.svgObject.appendChild(c)},e.prototype.renderCircularProgress=function(e,t,i){var s,n,o,r,a,l,h,c,p,d,u,m,f,g,v,y,b,C=this.progress,S=C.startAngle;m=i?Ag(C.element.id+"_CircularProgressGroup"):C.renderer.createGroup({id:C.element.id+"_CircularProgressGroup"}),o=null===(o=nv(C.innerRadius,this.availableSize))?0:o,C.previousTotalEnd=h=C.calculateProgressRange(C.argsData.value),y=(C.startAngle+(C.enableRtl?-h:h))%360,C.previousEndAngle=s=C.isIndeterminate&&!C.enableProgressSegments?(C.startAngle+(C.enableRtl?-C.totalAngle:C.totalAngle))%360:y,a=(a=(h-C.startAngle)%360)<=0?360+a:a,a-=360===a?.01:0,l=sv(this.centerX,this.centerY,o,S,s,C.enableRtl,C.enablePieProgress),u=this.checkingCircularProgressColor(),f=C.enablePieProgress?u:"none",b=C.progressThickness||C.themeStyle.circularProgressThickness,g=C.enablePieProgress?0:b,p=new Rg(C.element.id+"_Circularprogress",f,g,u,C.themeStyle.progressOpacity,"0",l),C.progressWidth=C.renderer.drawPath(p).getTotalLength(),C.segmentSize=this.validateSegmentSize(C,b),null===C.secondaryProgress||C.isIndeterminate||this.renderCircularBuffer(C,o,a),null!==C.argsData.value&&(0===C.segmentColor.length||C.isIndeterminate||C.enablePieProgress?this.isRange&&!C.isIndeterminate?c=this.segment.createCircularRange(this.centerX,this.centerY,o,C):(i?(r=(c=Ag(C.element.id+"_Circularprogress")).getAttribute("d"),c.setAttribute("stroke",u),c.setAttribute("d",l)):c=C.renderer.drawPath(p),C.segmentCount>1&&!C.enablePieProgress&&c.setAttribute("stroke-dasharray",C.segmentSize),"Round"===C.cornerRadius&&S!==s&&c.setAttribute("stroke-linecap","round")):(n=C.enableProgressSegments?a:C.totalAngle,v=C.enableProgressSegments?C.progressWidth:C.trackWidth,c=this.segment.createCircularSegment(C,"_CircularProgressSegment",this.centerX,this.centerY,o,C.argsData.value,C.themeStyle.progressOpacity,b,n,v)),m.appendChild(c),!C.isActive||C.isIndeterminate||C.enablePieProgress||this.renderActiveState(m,o,g,l,y,h,i),(C.animation.enable||C.isIndeterminate)&&(this.delay=null!==C.secondaryProgress?300:C.animation.delay,d=C.createClipPath(C.clipPath,null,i?r:"",i),m.appendChild(C.clipPath),!C.animation.enable||C.isIndeterminate||C.isActive||(c.setAttribute("style","clip-path:url(#"+C.element.id+"_clippath)"),this.animation.doCircularAnimation(this.centerX,this.centerY,o,y,h,d,C,b,this.delay,i?e:null,i?t:null)),C.isIndeterminate&&(C.enableProgressSegments&&d.setAttribute("d",sv(this.centerX,this.centerY,o+b/2,C.startAngle,this.trackEndAngle,C.enableRtl,!0)),c.setAttribute("style","clip-path:url(#"+C.element.id+"_clippath)"),this.animation.doCircularIndeterminate(C.enableProgressSegments?c:d,C,S,y,this.centerX,this.centerY,o,b,d))),C.svgObject.appendChild(m))},e.prototype.renderCircularBuffer=function(e,t,i){var s,n,o,r,a,l,h,c,p,d,u,m;r=e.renderer.createGroup({id:e.element.id+"_ CircularBufferGroup"}),n=e.calculateProgressRange(e.secondaryProgress),u=(e.startAngle+(e.enableRtl?-n:n))%360,a=sv(this.centerX,this.centerY,t,e.startAngle,u,e.enableRtl,e.enablePieProgress),m=this.checkingCircularProgressColor(),h=e.enablePieProgress?m:"none",c=e.enablePieProgress?0:e.progressThickness||e.themeStyle.circularProgressThickness,l=new Rg(e.element.id+"_Circularbuffer",h,c,m,e.themeStyle.bufferOpacity,"0",a),0===e.segmentColor.length||e.isIndeterminate||e.enablePieProgress||this.isRange?(o=e.renderer.drawPath(l),e.segmentCount>1&&!e.enablePieProgress&&!this.isRange&&o.setAttribute("stroke-dasharray",e.segmentSize),"Round"!==e.cornerRadius||this.isRange||o.setAttribute("stroke-linecap","round")):(d=e.enableProgressSegments?i:e.totalAngle,p=e.enableProgressSegments?e.progressWidth:e.trackWidth,o=this.segment.createCircularSegment(e,"_CircularBufferSegment",this.centerX,this.centerY,t,e.secondaryProgress,e.themeStyle.bufferOpacity,c,d,p)),r.appendChild(o),e.animation.enable&&!e.isActive&&(s=e.createClipPath(e.bufferClipPath,null,"",!1),r.appendChild(e.bufferClipPath),o.setAttribute("style","clip-path:url(#"+e.element.id+"_clippathBuffer)"),this.animation.doCircularAnimation(this.centerX,this.centerY,t,u,n,s,e,e.progressThickness||e.themeStyle.circularProgressThickness,e.animation.delay)),e.svgObject.appendChild(r)},e.prototype.renderCircularLabel=function(){var e,t,i,s,n,o,r,a,l,h=this.progress,c=h.labelStyle.text;l=h.renderer.createGroup({id:h.element.id+"_CircularLabelGroup"}),document.getElementById(l.id)&&document.getElementById(l.id).remove(),r=(h.value-h.minimum)/(h.maximum-h.minimum)*100,i=h.value<h.minimum||h.value>h.maximum?0:Math.round(r),n={cancel:!1,text:c||String(i)+"%",color:h.labelStyle.color},h.trigger("textRender",n),n.cancel||(o=Eg(n.text,h.labelStyle),s=this.centerY+o.height/2,a=new tv(h.element.id+"_circularLabel",h.labelStyle.size||h.themeStyle.circularFontSize,h.labelStyle.fontStyle||h.themeStyle.circularFontStyle,h.labelStyle.fontFamily||h.themeStyle.circularFontFamily,h.labelStyle.fontWeight,"middle",n.color||h.themeStyle.fontColor,this.centerX,s,h.progressRect.width,h.progressRect.height),t=h.renderer.createText(a,n.text),l.appendChild(t),h.animation.enable&&!h.isIndeterminate&&(e=(h.value-h.minimum)/(h.maximum-h.minimum)*h.totalAngle,e=h.value<h.minimum||h.value>h.maximum?0:e,this.animation.doLabelAnimation(t,h.startAngle,e,h,this.delay)),h.svgObject.appendChild(l))},e.prototype.renderActiveState=function(e,t,i,s,n,o,r){var a,l,h,c=this.progress,p=i+1;r?(a=Ag(c.element.id+"_CircularActiveProgress")).setAttribute("d",s):(h=new Rg(c.element.id+"_CircularActiveProgress","none",p,"#ffffff",.5,"0",s),a=c.renderer.drawPath(h)),c.segmentCount>1&&a.setAttribute("stroke-dasharray",c.segmentSize),"Round"===c.cornerRadius&&a.setAttribute("stroke-linecap","round"),l=c.createClipPath(c.clipPath,null,"",r),a.setAttribute("style","clip-path:url(#"+c.element.id+"_clippath)"),e.appendChild(a),e.appendChild(c.clipPath),this.animation.doCircularAnimation(this.centerX,this.centerY,t,n,o,l,c,p,0,null,null,a)},e.prototype.validateSegmentSize=function(e,t){var i,s,n;return 0===(s=parseInt(e.radius,10)-parseInt(e.innerRadius,10))||e.enableProgressSegments?i=e.enableProgressSegments?e.calculateSegmentSize(e.progressWidth,t):e.segmentSize:(n=e.trackWidth+(s<0?e.trackWidth*Math.abs(s)/parseInt(e.radius,10):-e.trackWidth*Math.abs(s)/parseInt(e.radius,10)),i=e.calculateSegmentSize(n,t)),i},e.prototype.checkingCircularProgressColor=function(){var e,t=this.progress;switch(t.role){case"Success":e=t.themeStyle.success;break;case"Info":e=t.themeStyle.info;break;case"Warning":e=t.themeStyle.warning;break;case"Danger":e=t.themeStyle.danger;break;default:e=t.argsData.progressColor||t.themeStyle.circularProgressColor}return e},e}(),Tv=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Lv=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Dv=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.linear=new Ev(s),s.circular=new kv(s),s.annotateAnimation=new Cv,s.destroyIndeterminate=!1,s}return Tv(t,e),t.prototype.getModuleName=function(){return"progressbar"},t.prototype.preRender=function(){this.isBlazor=window.Blazor,this.unWireEvents(),this.initPrivateVariable(),this.wireEvents()},t.prototype.initPrivateVariable=function(){this.progressRect=new Gg(0,0,0,0),this.progressSize=new Yg(0,0)},t.prototype.render=function(){var e=this;this.trigger("load",{progressBar:this.isBlazor?{}:this}),this.element.style.display="block",this.element.style.position="relative",this.calculateProgressBarSize(),this.setTheme(),this.createSVG(),this.argsData={value:this.value,progressColor:this.progressColor,trackColor:this.trackColor},this.argsData.value===this.maximum?this.trigger("progressCompleted",this.argsData,function(){e.controlRendering()}):this.trigger("valueChanged",this.argsData,function(){e.controlRendering()})},t.prototype.controlRendering=function(){this.renderElements(),this.trigger("loaded",{progressBar:this.isBlazor?{}:this}),this.renderComplete(),this.controlRenderedTimeStamp=(new Date).getTime()},t.prototype.calculateProgressBarSize=function(){var e=this.element.clientWidth||this.element.offsetWidth,t=this.element.clientHeight,i="Linear"===this.type?200:120,s="Linear"===this.type?30:120,n=Math.max(this.progressThickness,this.trackThickness);s="Linear"===this.type&&n>s-10?n+10:s,this.progressSize.width=nv(this.width,e)||e||i,this.progressSize.height=nv(this.height,t)||t||s,this.progressRect.x=this.margin.left,this.progressRect.y=this.margin.top,this.progressRect.width=this.progressSize.width-(this.margin.left+this.margin.right),this.progressRect.height=this.progressSize.height-(this.margin.top+this.margin.bottom)},t.prototype.renderAnnotations=function(){this.createSecElement(),this.renderAnnotation(),this.setSecondaryElementPosition()},t.prototype.renderElements=function(){this.renderTrack(),this.renderProgress(),this.renderLabel(),this.renderAnnotations()},t.prototype.createSecElement=function(){var e=document.getElementById(this.element.id+"Secondary_Element");if(e)return e.innerHTML="",void(this.secElement=e);this.secElement=yi("div",{id:this.element.id+"Secondary_Element",styles:"position: absolute"}),this.element.appendChild(this.secElement)},t.prototype.setSecondaryElementPosition=function(){var e=this.secElement,t=this.element.getBoundingClientRect(),i=Ag(this.svgObject.id).getBoundingClientRect();e.style.left=Math.max(i.left-t.left,0)+"px",e.style.top=Math.max(i.top-t.top,0)+"px"},t.prototype.createSVG=function(){this.removeSvg(),this.renderer=new Cg(this.element.id),this.svgObject=this.renderer.createSvg({id:this.element.id+"SVG",width:this.progressSize.width,height:this.progressSize.height,style:"background-color:"+this.themeStyle.backgroundColor})},t.prototype.clipPathElement=function(){this.clipPath=this.renderer.createClipPath({id:this.element.id+"_clippath"}),this.bufferClipPath=this.renderer.createClipPath({id:this.element.id+"_clippathBuffer"})},t.prototype.renderTrack=function(){"Linear"===this.type?this.linear.renderLinearTrack():"Circular"===this.type&&this.circular.renderCircularTrack()},t.prototype.renderProgress=function(){this.clipPathElement(),"Linear"===this.type?this.linear.renderLinearProgress():"Circular"===this.type&&this.circular.renderCircularProgress()},t.prototype.renderLabel=function(){"Linear"===this.type&&this.showProgressValue&&!this.isIndeterminate?this.linear.renderLinearLabel():"Circular"===this.type&&this.showProgressValue&&!this.isIndeterminate&&this.circular.renderCircularLabel(),this.element.appendChild(this.svgObject)},t.prototype.getPathLine=function(e,t,i){var s=this.enableRtl?"Round"===this.cornerRadius?e+this.progressRect.width-.45*i:e+this.progressRect.width:"Round"===this.cornerRadius?e+.45*i:e,n=this.enableRtl?"Round"===this.cornerRadius&&t?s-t+.9*i:s-t:"Round"===this.cornerRadius&&t?s+t-.9*i:s+t;return"M"+s+" "+(this.progressRect.y+this.progressRect.height/2)+"L"+n+" "+(this.progressRect.y+this.progressRect.height/2)},t.prototype.calculateProgressRange=function(e,t,i){var s,n=t||this.minimum,o=i||this.maximum;return s=(e-n)/(o-n)*("Linear"===this.type?1:this.totalAngle),e<n||e>o?0:s},t.prototype.calculateSegmentSize=function(e,t){var i="Circular"===this.type&&359.99===this.totalAngle?this.segmentCount:this.segmentCount-1,s=359.99===this.totalAngle||"Linear"===this.type?this.segmentCount:this.segmentCount-1,n=this.gapWidth||("Linear"===this.type?this.themeStyle.linearGapWidth:this.themeStyle.circularGapWidth),o=e-i*n;return" "+(o=(o-("Round"===this.cornerRadius?s*(.9*t):0))/this.segmentCount)+" "+(n+="Round"===this.cornerRadius?.9*t:0)},t.prototype.createClipPath=function(e,t,i,s,n,o,r){var a,l,h,c,p,d,u=this.progressRect.x,m=this.progressRect.width;return"Linear"===this.type?("Round4px"===this.cornerRadius?(c=u,d=m*t,c+=o?0:-4,p=this.progressRect.y,d+=!o&&r||this.isIndeterminate?4:0):(c=this.enableRtl&&!o?u+m:u,d=m*t,c+="Round"!==this.cornerRadius||o?0:this.enableRtl?.45*n:-.45*n,p=this.progressRect.y+this.progressRect.height/2-n/2,d+="Round"!==this.cornerRadius||o?0:.9*n),s?((a=Ag(this.element.id+"_clippathrect")).setAttribute("width",d.toString()),this.isActive&&a.setAttribute("x",c.toString())):(l=new Kg(this.element.id+"_clippathrect","transparent",1,"transparent",1,new Gg(c,p,n,d)),a=this.renderer.drawRectangle(l),e.appendChild(a))):s?(a=Ag(this.element.id+"_clippathcircle")).setAttribute("d",i):(h=new Rg(this.element.id+"_clippathcircle","transparent",10,"transparent",1,"0",i),a=this.renderer.drawPath(h),e.appendChild(a)),a},t.prototype.setTheme=function(){switch(this.themeStyle=function(e){var t;switch(e){case"Material":t={linearTrackColor:"#E3165B",linearProgressColor:"#E3165B",circularTrackColor:"#E3165B",circularProgressColor:"#E3165B",backgroundColor:"transparent",fontColor:"#000000",linearFontFamily:"Roboto",linearFontSize:"12",linearFontStyle:"Regular",circularFontFamily:"Roboto",circularFontStyle:"Normal",circularFontSize:"20",progressOpacity:1,trackOpacity:.26,bufferOpacity:.4,linearGapWidth:4,circularGapWidth:4,linearTrackThickness:4,linearProgressThickness:4,circularTrackThickness:4,circularProgressThickness:4,success:"#4caf50",danger:"#ff6652",warning:"#ff9800",info:"#03a9f4"};break;case"Bootstrap":t={linearTrackColor:"#EEEEEE",linearProgressColor:"#317ab9",circularTrackColor:"#EEEEEE",circularProgressColor:"#317ab9",backgroundColor:"transparent",fontColor:"#000000",linearFontFamily:"Helvetica",linearFontStyle:"Regular",linearFontSize:"12",circularFontFamily:"Segoe UI",circularFontStyle:"Normal",circularFontSize:"20",progressOpacity:1,trackOpacity:1,bufferOpacity:.44,linearGapWidth:4,circularGapWidth:4,linearTrackThickness:20,linearProgressThickness:20,circularTrackThickness:6,circularProgressThickness:6,success:"#48b14c",danger:"#d44f4f",warning:"#fac168",info:"#2aaac0"};break;case"Bootstrap4":t={linearTrackColor:"#E9ECEF",linearProgressColor:"#007bff",circularTrackColor:"#E9ECEF",circularProgressColor:"#007bff",backgroundColor:"transparent",fontColor:"#000000",linearFontFamily:"Helvetica",linearFontStyle:"Regular",linearFontSize:"12",circularFontFamily:"Helvetica",circularFontStyle:"Normal",circularFontSize:"20",progressOpacity:1,trackOpacity:1,bufferOpacity:.44,linearGapWidth:4,circularGapWidth:4,linearTrackThickness:16,linearProgressThickness:16,circularTrackThickness:6,circularProgressThickness:6,success:"#28a745",danger:"#dc3545",warning:"#ffc107",info:"#17a2b8"};break;case"HighContrast":t={linearTrackColor:"#BFBFBF",linearProgressColor:"#FFD939",circularTrackColor:"#BFBFBF",circularProgressColor:"#FFD939",backgroundColor:"transparent",fontColor:"#FFFFFF",linearFontFamily:"Segoe UI",linearFontSize:"12",linearFontStyle:"Regular",circularFontFamily:"Segoe UI",circularFontStyle:"Normal",circularFontSize:"20",progressOpacity:1,trackOpacity:1,bufferOpacity:.35,linearGapWidth:2,circularGapWidth:4,linearTrackThickness:2,linearProgressThickness:2,circularTrackThickness:4,circularProgressThickness:4,success:"#2bc700",danger:"#ff6161",warning:"#ff7d1a",info:"#66b0ff"};break;default:t={linearTrackColor:"#EAEAEA",linearProgressColor:"#0078D6",circularTrackColor:"#E6E6E6",circularProgressColor:"#0078D6",backgroundColor:"transparent",fontColor:"#333333",linearFontFamily:"Segoe UI",linearFontStyle:"Regular",linearFontSize:"12",circularFontFamily:"Segoe UI",circularFontStyle:"Normal",circularFontSize:"20",progressOpacity:1,trackOpacity:1,bufferOpacity:.3,linearGapWidth:2,circularGapWidth:4,linearTrackThickness:2,linearProgressThickness:2,circularTrackThickness:4,circularProgressThickness:4,success:"#166600",danger:"#b30900",warning:"#944000",info:"#0056b3"}}return t}(this.theme),this.theme){case"Bootstrap":case"Bootstrap4":this.cornerRadius="Auto"===this.cornerRadius?"Linear"===this.type?"Round4px":"Round":this.cornerRadius;break;default:this.cornerRadius="Auto"===this.cornerRadius?"Square":this.cornerRadius}},t.prototype.renderAnnotation=function(){this.progressAnnotationModule&&this.annotations.length>0&&this.progressAnnotationModule.renderAnnotations(this.secElement)},t.prototype.progressResize=function(e){var t=this;if(!((new Date).getTime()>this.controlRenderedTimeStamp+800))return!1;var i={bar:this,name:"resized",currentSize:new Yg(0,0),previousSize:new Yg(this.progressSize.width,this.progressSize.height),cancel:!!this.cancelResize};return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){t.isDestroyed?clearTimeout(t.resizeTo):(i.currentSize=t.progressSize,t.trigger("resized",i),null!==t.width&&null!==t.height||i.cancel||(t.secElement.innerHTML="",t.calculateProgressBarSize(),t.createSVG(),t.renderElements()))},500),!1},t.prototype.progressMouseClick=function(e){this.mouseEvent("mouseClick",e)},t.prototype.progressMouseDown=function(e){this.mouseEvent("mouseDown",e)},t.prototype.progressMouseMove=function(e){this.mouseEvent("mouseMove",e)},t.prototype.progressMouseUp=function(e){this.mouseEvent("mouseUp",e)},t.prototype.progressMouseLeave=function(e){this.mouseEvent("mouseLeave",e)},t.prototype.mouseEvent=function(e,t){var i=t.target;this.trigger(e,{target:i.id})},t.prototype.unWireEvents=function(){var e=bt.touchStartEvent,t=bt.touchMoveEvent,i=bt.touchEndEvent,s=bt.isPointer?"pointerleave":"mouseleave";
/*! UnBind the Event handler */
Ct.remove(this.element,"click",this.progressMouseClick),Ct.remove(this.element,e,this.progressMouseDown),Ct.remove(this.element,t,this.progressMouseMove),Ct.remove(this.element,i,this.progressMouseUp),Ct.remove(this.element,s,this.progressMouseLeave),window.removeEventListener(bt.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBounds)},t.prototype.wireEvents=function(){var e=bt.touchStartEvent,t=bt.touchMoveEvent,i=bt.touchEndEvent,s=bt.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */
Ct.add(this.element,"click",this.progressMouseClick,this),Ct.add(this.element,e,this.progressMouseDown,this),Ct.add(this.element,t,this.progressMouseMove,this),Ct.add(this.element,i,this.progressMouseUp,this),Ct.add(this.element,s,this.progressMouseLeave,this),this.resizeBounds=this.progressResize.bind(this),window.addEventListener(bt.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBounds)},t.prototype.removeSvg=function(){var e=document.getElementById(this.element.id+"SVG");e&&Li(e)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"annotations":this.secElement.innerHTML="",this.renderAnnotation();break;case"value":this.cancelResize=!!this.animation.enable,this.argsData={value:this.value,progressColor:this.argsData.progressColor,trackColor:this.argsData.trackColor},this.argsData.value<t.value&&this.animation.enable&&(this.argsData.value=t.value),this.argsData.value===this.maximum?this.trigger("progressCompleted",this.argsData):this.trigger("valueChanged",this.argsData),"Circular"===this.type?(this.circular.renderCircularProgress(this.previousEndAngle,this.previousTotalEnd,!ae(t.value)),this.showProgressValue&&this.circular.renderCircularLabel(),this.progressAnnotationModule&&this.animation.enable&&!this.isIndeterminate&&this.annotateAnimation.doAnnotationAnimation(this.clipPath,this,this.annotateEnd,this.annotateTotal)):this.linear.renderLinearProgress(!ae(t.value),this.previousWidth);break;case"animation":this.createSVG(),this.renderElements()}}},t.prototype.requiredModules=function(){var e=[];return this.annotations.some(function(e){return null!==e.content})&&e.push({member:"ProgressAnnotation",args:[this]}),e},t.prototype.getPersistData=function(){return" "},t.prototype.show=function(){ae(this.svgObject)||(this.svgObject.setAttribute("visibility","Visible"),this.isIndeterminate&&(this.destroyIndeterminate=!1,"Linear"===this.type?this.linear.renderLinearProgress(!0):this.circular.renderCircularProgress(null,null,!0)))},t.prototype.hide=function(){ae(this.svgObject)||(this.svgObject.setAttribute("visibility","Hidden"),this.isIndeterminate&&(this.destroyIndeterminate=!0))},t.prototype.destroy=function(){this.unWireEvents(),e.prototype.destroy.call(this),this.removeSvg(),this.isReact&&this.clearTemplate(),this.svgObject=null,this.element.classList.remove("e-progressbar"),this.refreshing||(this.destroyIndeterminate=!0)},Lv([os("Linear")],t.prototype,"type",void 0),Lv([os(null)],t.prototype,"value",void 0),Lv([os(null)],t.prototype,"secondaryProgress",void 0),Lv([os(0)],t.prototype,"minimum",void 0),Lv([os(100)],t.prototype,"maximum",void 0),Lv([os(0)],t.prototype,"startAngle",void 0),Lv([os(0)],t.prototype,"endAngle",void 0),Lv([os("100%")],t.prototype,"radius",void 0),Lv([os("100%")],t.prototype,"innerRadius",void 0),Lv([os(1)],t.prototype,"segmentCount",void 0),Lv([os(null)],t.prototype,"gapWidth",void 0),Lv([os("")],t.prototype,"segmentColor",void 0),Lv([os("Auto")],t.prototype,"cornerRadius",void 0),Lv([os(null)],t.prototype,"height",void 0),Lv([os(null)],t.prototype,"width",void 0),Lv([os(!1)],t.prototype,"isIndeterminate",void 0),Lv([os(!1)],t.prototype,"isActive",void 0),Lv([os(!1)],t.prototype,"isGradient",void 0),Lv([os(!1)],t.prototype,"isStriped",void 0),Lv([os("Auto")],t.prototype,"role",void 0),Lv([os(!1)],t.prototype,"enableRtl",void 0),Lv([os(!0)],t.prototype,"labelOnTrack",void 0),Lv([os(null)],t.prototype,"trackColor",void 0),Lv([os(null)],t.prototype,"progressColor",void 0),Lv([os(0)],t.prototype,"trackThickness",void 0),Lv([os(0)],t.prototype,"progressThickness",void 0),Lv([os(!1)],t.prototype,"enablePieProgress",void 0),Lv([os("Fabric")],t.prototype,"theme",void 0),Lv([os(!1)],t.prototype,"showProgressValue",void 0),Lv([os(!1)],t.prototype,"enableProgressSegments",void 0),Lv([rs({size:null,color:null,fontStyle:null,fontWeight:"Normal",fontFamily:null},mv)],t.prototype,"labelStyle",void 0),Lv([rs({},uv)],t.prototype,"margin",void 0),Lv([rs({},fv)],t.prototype,"animation",void 0),Lv([cs()],t.prototype,"load",void 0),Lv([cs()],t.prototype,"textRender",void 0),Lv([cs()],t.prototype,"loaded",void 0),Lv([cs()],t.prototype,"valueChanged",void 0),Lv([cs()],t.prototype,"progressCompleted",void 0),Lv([cs()],t.prototype,"animationComplete",void 0),Lv([cs()],t.prototype,"mouseClick",void 0),Lv([cs()],t.prototype,"mouseMove",void 0),Lv([cs()],t.prototype,"mouseUp",void 0),Lv([cs()],t.prototype,"mouseDown",void 0),Lv([cs()],t.prototype,"mouseLeave",void 0),Lv([ls([{}],gv)],t.prototype,"annotations",void 0),Lv([ls([{}],vv)],t.prototype,"rangeColors",void 0),t=Lv([ps],t)}(Ns),Iv={},Ov={},Av={},Mv={};Object(Y.copy)(Iv,U),Object(Y.copy)(Ov,s),Object(Y.copy)(Av,W),Object(Y.copy)(Mv,E);var Pv={},Nv={};Object(Y.copy)(Pv,h),Object(Y.copy)(Nv,s);var Rv={},Bv={};Object(Y.copy)(Rv,c),Object(Y.copy)(Bv,s);var Hv={},Fv={},jv={},Vv={};Object(Y.copy)(Hv,V),Object(Y.copy)(Fv,s),Object(Y.copy)(jv,a),Object(Y.copy)(Vv,o),Object(Y.copy)(Hv,F);var zv={},_v={};Object(Y.copy)(zv,w),Object(Y.copy)(_v,s),Object(Y.copy)(zv,v);var qv=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Wv=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Uv="e-toast-message",Gv="e-toast-close-icon",Yv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qv(t,e),Wv([os("Left")],t.prototype,"X",void 0),Wv([os("Top")],t.prototype,"Y",void 0),t}(Ls),Xv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qv(t,e),Wv([os(null)],t.prototype,"model",void 0),Wv([os(null)],t.prototype,"click",void 0),t}(Ls),Kv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qv(t,e),Wv([os("FadeIn")],t.prototype,"effect",void 0),Wv([os(600)],t.prototype,"duration",void 0),Wv([os("ease")],t.prototype,"easing",void 0),t}(Ls),Zv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qv(t,e),Wv([rs({effect:"FadeIn",duration:600,easing:"ease"},Kv)],t.prototype,"show",void 0),Wv([rs({effect:"FadeOut",duration:600,easing:"ease"},Kv)],t.prototype,"hide",void 0),t}(Ls),Qv=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.toastCollection=[],s}return qv(t,e),t.prototype.getModuleName=function(){return"toast"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.hide("All"),this.element.classList.remove("e-toast-container"),Ri(this.element,{position:"","z-index":""}),ae(this.refElement)||ae(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.element,this.refElement),Ti(this.refElement),this.refElement=void 0),this.isBlazorServer()||e.prototype.destroy.call(this)},t.prototype.preRender=function(){this.isDevice=bt.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px"),ae(this.target)&&(this.target=document.body),this.enableRtl&&!this.isBlazorServer()&&this.element.classList.add("e-rtl")},t.prototype.render=function(){this.progressObj=[],this.intervalId=[],this.contentTemplate=null,this.toastTemplate=null,this.isDevice&&screen.width<768&&new nn(this.element,{swipe:this.swipeHandler.bind(this)}),this.renderComplete(),this.initRenderClass=this.element.className},t.prototype.show=function(e){var t;if(ae(e)||(this.templateChanges(e),t=JSON.parse(JSON.stringify(e)),re(this,this,e)),ae(this.toastContainer)){this.toastContainer=this.getContainer();var i="string"==typeof this.target?document.querySelector(this.target):document.body;if(ae(i))return;"BODY"===i.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",i.style.position="relative"),this.setPositioning(this.position),i.appendChild(this.toastContainer)}this.isBlazorServer()&&this.element.classList.contains("e-control")?this.isToastModel(e):(this.toastEle=this.createElement("div",{className:"e-toast",id:he("toast")}),this.setWidthHeight(),this.setCSSClass(this.cssClass),ae(this.template)||""===this.template?this.personalizeToast():this.templateRendering(),this.setProgress(),this.setCloseButton(),this.setAria(),this.appendToTarget(e),ae(t)||(re(t,{element:[this.toastEle]},!0),this.toastCollection.push(t)),this.isReact&&this.renderReactTemplates())},t.prototype.showToast=function(e,t){this.toastEle=this.element.querySelector("#"+e),this.show(t)},t.prototype.isToastModel=function(e){this.toastContainer=this.element,this.setPositioning(this.position);ae(this.element.lastElementChild)||this.setProgress(),this.setAria(),this.appendToTarget(e)},t.prototype.swipeHandler=function(e){var t=Mi(e.originalEvent.target,".e-toast:not(.e-toast-container)"),i=this.animation.hide.effect;ae(t)||("Right"===e.swipeDirection?(this.animation.hide.effect="SlideRightOut",this.hide(t)):"Left"===e.swipeDirection&&(this.animation.hide.effect="SlideLeftOut",this.hide(t)),this.animation.hide.effect=i)},t.prototype.templateChanges=function(e){le(e.content)||ae(this.contentTemplate)||this.content===e.content||this.clearContentTemplate(),le(e.template)||ae(this.toastTemplate)||this.template===e.template||this.clearToastTemplate()},t.prototype.setCSSClass=function(e){if(e){var t=-1!==e.indexOf(",")?",":" ";Bi(this.toastEle,e.split(t),[])}},t.prototype.setWidthHeight=function(){"300px"===this.width?this.toastEle.style.width=ge(this.width):"100%"===this.width?this.toastContainer.classList.add("e-toast-full-width"):(this.toastEle.style.width=ge(this.width),this.toastContainer.classList.remove("e-toast-full-width")),this.toastEle.style.height=ge(this.height)},t.prototype.templateRendering=function(){this.fetchEle(this.toastEle,this.template,"template")},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var t=ln.beforeSanitize();re(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!ae(t.helper)?e=t.helper(e):t.cancel||(e=ln.serializeValue(t,e))}return e},t.prototype.hide=function(e){if(!ae(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!=typeof e||"All"!==e)ae(e)&&(e=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(e),this.isReact&&this.clearTemplate();else for(var t=0;t<this.toastContainer.childElementCount;t++)this.destroyToast(this.toastContainer.children[t])},t.prototype.fetchEle=function(e,t,i){var s,n,o,r;if(t="string"==typeof t?this.sanitizeHelper(t):t,r=e.classList.contains("e-toast-title")?this.element.id+"title":e.classList.contains("e-toast-content")?this.element.id+"content":this.element.id+"template",!ae(n="content"===i?this.contentTemplate:this.toastTemplate))return e.appendChild(n.cloneNode(!0)),e;try{if(document.querySelectorAll(t).length>0){var a=null;"title"!==i&&(a=document.querySelector(t),e.appendChild(a),a.style.display="");var l=ae(a)?n:a.cloneNode(!0);"content"===i?this.contentTemplate=l:this.toastTemplate=l}}catch(e){s=Xt(t),t}if(!ae(s))if(this.isBlazorServer()){o=s({},this,i,r,!0)}else o=s({},this,i,null,!0);return ae(o)||!(o.length>0)||ae(o[0].tagName)&&1===o.length?0===e.childElementCount&&(e.innerHTML=t):[].slice.call(o).forEach(function(t){ae(t.tagName)||(t.style.display=""),e.appendChild(t)}),e},t.prototype.clearProgress=function(e){ae(this.intervalId[e])||(clearInterval(this.intervalId[e]),delete this.intervalId[e]),ae(this.progressObj[e])||(clearInterval(this.progressObj[e].intervalId),delete this.progressObj[e])},t.prototype.clearContainerPos=function(){var e=this;this.isBlazorServer()?this.toastContainer=null:(this.customPosition?(Ri(this.toastContainer,{left:"",top:""}),this.toastContainer=null,this.customPosition=!1):(["e-toast-top-left","e-toast-top-right","e-toast-bottom-left","e-toast-bottom-right","e-toast-bottom-center","e-toast-top-center","e-toast-full-width"].forEach(function(t){!ae(e.toastContainer)&&e.toastContainer.classList.contains(t)&&e.toastContainer.classList.remove(t)}),this.toastContainer=null),ae(this.contentTemplate)||this.clearContentTemplate(),ae(this.toastTemplate)||this.clearToastTemplate())},t.prototype.clearContentTemplate=function(){this.contentTemplate.style.display="none",document.body.appendChild(this.contentTemplate),this.contentTemplate=null},t.prototype.clearToastTemplate=function(){this.toastTemplate.style.display="none",document.body.appendChild(this.toastTemplate),this.toastTemplate=null},t.prototype.isBlazorServer=function(){return ye()&&this.isServerRendered},t.prototype.destroyToast=function(e){for(var t,i=this,s=0;s<this.toastCollection.length;s++)this.toastCollection[s].element[0]===e&&(t=this.toastCollection[s],this.toastCollection.splice(s,1));var n=this.animation.hide,o={duration:n.duration,name:n.effect,timingFunction:n.easing},r=parseInt(e.id.split("toast_")[1],10),a=this.isBlazorServer()?{options:t,toastContainer:this.toastContainer}:{options:t,toastContainer:this.toastContainer,toastObj:this};ae(this.progressObj[r])||ae(e.querySelector(".e-toast-progress"))||(this.progressObj[r].progressEle.style.width="0%"),o.end=function(){i.clearProgress(r),i.isBlazorServer()&&!ae(t)||Ti(e),i.trigger("close",a),0===i.toastContainer.childElementCount&&i.clearContainerPos()},new vs({}).animate(e,o)},t.prototype.personalizeToast=function(){this.setIcon(),this.setTitle(),this.setContent(),this.actionButtons()},t.prototype.setAria=function(){Di(this.toastEle,{role:"alert"})},t.prototype.setPositioning=function(e){this.isBlazorServer()||(isNaN(parseFloat(e.X))&&isNaN(parseFloat(e.Y))?this.toastContainer.classList.add("e-toast-"+e.Y.toString().toLowerCase()+"-"+e.X.toString().toLowerCase()):(this.customPosition=!0,Ri(this.toastContainer,{left:ge(e.X),top:ge(e.Y)})))},t.prototype.setCloseButton=function(){if(this.showCloseButton){this.l10n=new Js("toast",{close:"Close"},this.locale),this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close"),t=this.createElement("div",{className:Gv+" e-icons ",attrs:{tabindex:"0","aria-label":e}});this.toastEle.appendChild(t)}},t.prototype.setProgress=function(){if(this.timeOut>0){var e=parseInt(this.toastEle.id.split("toast_")[1],10);this.intervalId[e]=window.setTimeout(this.destroyToast.bind(this,this.toastEle),this.timeOut),this.progressObj[e]={hideEta:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[e].maxHideTime=parseFloat(this.timeOut+""),this.progressObj[e].hideEta=(new Date).getTime()+this.progressObj[e].maxHideTime,this.progressObj[e].element=this.toastEle,this.extendedTimeout>0&&(Ct.add(this.toastEle,"mouseover",this.toastHoverAction.bind(this,e)),Ct.add(this.toastEle,"mouseleave",this.delayedToastProgress.bind(this,e)),this.progressObj[e].timeOutId=this.intervalId[e]),this.showProgressBar&&(this.progressBarEle=this.createElement("div",{className:"e-toast-progress"}),this.toastEle.insertBefore(this.progressBarEle,this.toastEle.children[0]),this.progressObj[e].intervalId=setInterval(this.updateProgressBar.bind(this,this.progressObj[e]),10),this.progressObj[e].progressEle=this.progressBarEle)}},t.prototype.toastHoverAction=function(e){clearTimeout(this.progressObj[e].timeOutId),clearInterval(this.progressObj[e].intervalId),this.progressObj[e].hideEta=0,ae(this.progressObj[e].element.querySelector(".e-toast-progress"))||(this.progressObj[e].progressEle.style.width="0%")},t.prototype.delayedToastProgress=function(e){var t=this.progressObj[e],i=t.element;t.timeOutId=window.setTimeout(this.destroyToast.bind(this,i),this.extendedTimeout),t.maxHideTime=parseFloat(this.extendedTimeout+""),t.hideEta=(new Date).getTime()+t.maxHideTime,ae(i.querySelector(".e-toast-progress"))||(t.intervalId=setInterval(this.updateProgressBar.bind(this,t),10))},t.prototype.updateProgressBar=function(e){var t=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;t="Ltr"===this.progressDirection?100-t:t,e.progressEle.style.width=t+"%"},t.prototype.setIcon=function(){if(!ae(this.icon)&&0!==this.icon.length){var e=this.createElement("div",{className:"e-toast-icon e-icons "+this.icon});this.toastEle.appendChild(e)}},t.prototype.setTitle=function(){if(!ae(this.title)){var e=this.createElement("div",{className:"e-toast-title"});e=this.fetchEle(e,this.title,"title");var t=this.createElement("div",{className:Uv});t.appendChild(e),this.toastEle.appendChild(t)}},t.prototype.setContent=function(){var e=this.createElement("div",{className:"e-toast-content"}),t=this.element;if(ae(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s/g,"");if((t.children.length>0||i)&&(!t.firstElementChild||!t.firstElementChild.classList.contains("e-toast"))){this.innerEle=document.createDocumentFragment();for(var s=this.createElement("div");0!==t.childNodes.length;)this.innerEle.appendChild(this.element.childNodes[0]);e.appendChild(this.innerEle),[].slice.call(e.children).forEach(function(e){s.appendChild(e.cloneNode(!0))}),this.content=s,this.appendMessageContainer(e)}}else"object"!=typeof this.content||ae(this.content.tagName)?(e=this.fetchEle(e,this.content,"content"),this.appendMessageContainer(e)):(e.appendChild(this.content),this.content=this.content.cloneNode(!0),this.appendMessageContainer(e))},t.prototype.appendMessageContainer=function(e){if(this.toastEle.querySelectorAll("."+Uv).length>0)this.toastEle.querySelector("."+Uv).appendChild(e);else{var t=this.createElement("div",{className:Uv});t.appendChild(e),this.toastEle.appendChild(t)}},t.prototype.actionButtons=function(){var e=this,t=this.createElement("div",{className:"e-toast-actions"});[].slice.call(this.buttons).forEach(function(i){if(!ae(i.model)){var s=e.createElement("button");s.setAttribute("type","button"),(ae(i.model.cssClass)||0===i.model.cssClass.length)&&(i.model.cssClass="e-primary"),s.classList.add("e-small"),new Po(i.model,s),ae(i.click)||"function"!=typeof i.click||Ct.add(s,"click",i.click),t.appendChild(s)}}),t.childElementCount>0&&this.appendMessageContainer(t)},t.prototype.appendToTarget=function(e){var t=this,i=this.isBlazorServer()?{options:e,element:this.toastEle,cancel:!1}:{options:e,toastObj:this,element:this.toastEle,cancel:!1};this.trigger("beforeOpen",i,function(i){if(i.cancel){if(t.isBlazorServer()){var s=parseInt(t.toastEle.id.split("toast_")[1],10);t.clearProgress(s),Ti(t.toastEle),0===t.toastContainer.childElementCount&&t.clearContainerPos()}}else t.isBlazorServer()||(t.toastEle.style.display="none"),t.newestOnTop&&0!==t.toastContainer.childElementCount?t.toastContainer.insertBefore(t.toastEle,t.toastContainer.children[0]):t.isBlazorServer()||t.toastContainer.appendChild(t.toastEle),Ci([t.toastEle],"e-blazor-toast-hidden"),Ct.add(t.toastEle,"click",t.clickHandler,t),Ct.add(t.toastEle,"keydown",t.keyDownHandler,t),t.toastContainer.style.zIndex=co(t.toastContainer)+"",t.displayToast(t.toastEle,e)})},t.prototype.clickHandler=function(e){var t=this;this.isBlazorServer()||e.stopPropagation();var i=e.target,s=Mi(i,".e-toast"),n=this.isBlazorServer()?{element:s,cancel:!1,clickToClose:!1,originalEvent:e}:{element:s,cancel:!1,clickToClose:!1,originalEvent:e,toastObj:this},o=i.classList.contains(Gv);this.trigger("click",n,function(e){(o&&!e.cancel||e.clickToClose)&&t.destroyToast(s)})},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains(Gv)&&(13===e.keyCode||32===e.keyCode)){var t=Mi(e.target,".e-toast");this.destroyToast(t)}},t.prototype.displayToast=function(e,t){var i=this,s=this.animation.show,n={duration:s.duration,name:s.effect,timingFunction:s.easing},o=this.isBlazorServer()?{options:t,element:this.toastEle}:{options:t,toastObj:this,element:this.toastEle};n.begin=function(){e.style.display=""},n.end=function(){i.trigger("open",o)},new vs(n).animate(e)},t.prototype.getContainer=function(){return this.element.classList.add("e-toast-container"),this.element},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl")}}},Wv([os("300px")],t.prototype,"width",void 0),Wv([os("auto")],t.prototype,"height",void 0),Wv([os(null)],t.prototype,"title",void 0),Wv([os(null)],t.prototype,"content",void 0),Wv([os(!0)],t.prototype,"enableHtmlSanitizer",void 0),Wv([os(null)],t.prototype,"icon",void 0),Wv([os(null)],t.prototype,"cssClass",void 0),Wv([os(null)],t.prototype,"template",void 0),Wv([os(!0)],t.prototype,"newestOnTop",void 0),Wv([os(!1)],t.prototype,"showCloseButton",void 0),Wv([os(!1)],t.prototype,"showProgressBar",void 0),Wv([os(5e3)],t.prototype,"timeOut",void 0),Wv([os("Rtl")],t.prototype,"progressDirection",void 0),Wv([os(1e3)],t.prototype,"extendedTimeout",void 0),Wv([rs({},Zv)],t.prototype,"animation",void 0),Wv([rs({},Yv)],t.prototype,"position",void 0),Wv([ls([{}],Xv)],t.prototype,"buttons",void 0),Wv([os(null)],t.prototype,"target",void 0),Wv([cs()],t.prototype,"created",void 0),Wv([cs()],t.prototype,"beforeSanitizeHtml",void 0),Wv([cs()],t.prototype,"destroyed",void 0),Wv([cs()],t.prototype,"open",void 0),Wv([cs()],t.prototype,"beforeOpen",void 0),Wv([cs()],t.prototype,"close",void 0),Wv([cs()],t.prototype,"click",void 0),t=Wv([ps],t)}(Ns),Jv={},$v={},ey={},ty={};Object(Y.copy)(Jv,G),Object(Y.copy)($v,s),Object(Y.copy)(ey,a),Object(Y.copy)(ty,o);var iy={},sy={};Object(Y.copy)(iy,u),Object(Y.copy)(sy,s),Object(Y.copy)(iy,o);var ny={},oy={},ry={},ay={},ly={},hy={},cy={};Object(Y.copy)(ny,z),Object(Y.copy)(oy,s),Object(Y.copy)(ry,E),Object(Y.copy)(ay,k),Object(Y.copy)(ly,v),Object(Y.copy)(hy,m),Object(Y.copy)(cy,l);var py={},dy={};Object(Y.copy)(py,b),Object(Y.copy)(dy,s);var uy={},my={},fy={},gy={};pg.Inject(rg),Object(Y.copy)(uy,{ListBox:pg,CheckBoxSelection:rg}),Object(Y.copy)(my,s),Object(Y.copy)(fy,E),Object(Y.copy)(gy,k),Object(Y.copy)(gy,T);var vy={},yy={},by={},Cy={};jp.Inject(Vp),Object(Y.copy)(vy,{ListView:jp,Virtualization:Vp}),Object(Y.copy)(yy,s),Object(Y.copy)(by,l),Object(Y.copy)(Cy,E);var Sy=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),xy=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},wy=function(){return function(e,t){this.width=e,this.height=t}}();function Ey(e,t){return null!=e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function ky(e){e.renderer=new Cg(e.element.id),function(e){var t=e.element.clientWidth,i=e.element.clientHeight,s=(e.element.parentElement.clientHeight,e.element.parentElement.clientWidth,Ey(e.element.style.width,t)),n=Ey(e.element.style.height,t);"0px"===e.width||"0%"===e.width||"0%"===e.height||"0px"===e.height?e.availableSize=new wy(0,0):e.availableSize=new wy(Ey(e.width,t)||t||s||600,Ey(e.height,i)||i||n||(e.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}(e),e.svgObject=e.renderer.createSvg({id:e.element.id+"_svg",width:e.availableSize.width,height:e.availableSize.height}),"0px"!==e.width&&"0%"!==e.width&&"0%"!==e.height&&"0px"!==e.height||(e.svgObject.setAttribute("height","0"),e.svgObject.setAttribute("width","0"))}function Ty(e,t,i){var s=i.getBoundingClientRect(),n=i.ownerDocument.defaultView.pageXOffset,o=i.ownerDocument.defaultView.pageYOffset,r=i.ownerDocument.documentElement.clientTop,a=i.ownerDocument.documentElement.clientLeft,l=s.left+n-a,h=s.top+o-r;return new qy(e-l,t-h)}function Ly(e){return e*(Math.PI/180)}function Dy(e){return e*(180/Math.PI)}function Iy(e,t,i,s,n){var o,r,a,l,h,c,p=new wy(n.mapAreaRect.width,n.mapAreaRect.height),d=n.baseMapBounds.longitude,u=n.baseMapBounds.latitude,m=Ly(e),f=Ly(t),g=n.projectionType,v=n.isTileMap?256*Math.pow(2,1):ae(i)?Math.min(p.width,p.height):Math.min(p.width,p.height)*i;if("Normal"===s.geometryType)o=ae(i)?t:Math.abs((t-d.min)*i),r=ae(i)?e:Math.abs((u.max-e)*i);else if("Geographic"===s.geometryType){switch(g){case"Mercator":var y=new Py(v/2,v/2);o=y.x+t*(v/360);var b=function(e,t,i){ae(t)||(e=Math.max(e,t));ae(i)||(e=Math.min(e,i));return e}(Math.sin(Ly(e)),-.9999,.9999);r=y.y+.5*Math.log((1+b)/(1-b))*(-v/(2*Math.PI));break;case"Winkel3":h=((a=Ay(f,m)).x+f/(Math.PI/2))/2,l=(a.y+m)/2;break;case"Miller":h=f,l=1.25*Math.log(Math.tan(Math.PI/4+.4*m));break;case"Eckert3":h=2/(c=Math.sqrt(Math.PI*(4+Math.PI)))*f*(1+Math.sqrt(1-4*m*m/(Math.PI*Math.PI))),l=4/c*m;break;case"AitOff":h=(a=Ay(f,m)).x,l=a.y;break;case"Eckert5":h=f*(1+Math.cos(m))/Math.sqrt(2+Math.PI),l=2*m/Math.sqrt(2+Math.PI);break;case"Equirectangular":h=f,l=m;break;case"Eckert6":c=(1+Math.PI/2)*Math.sin(m);for(var C=1/0,S=0;S<10&&Math.abs(C)>1e-6;S++)m-=C=(m+Math.sin(m)-c)/(1+Math.cos(m));c=Math.sqrt(2+Math.PI),h=f*(1+Math.cos(m))/c,l=2*m/c}o="Mercator"===g?o:My(function(e,t){var i=e.baseMapBounds.longitude,s=ae(e.baseSize)?e.mapAreaRect.width:e.mapAreaRect.width+Math.abs(e.baseSize.width-e.mapAreaRect.width)/2;return Math.round(s*(t-i.min)/(i.max-i.min)*100)/100}(n,Dy(h)),3),r="Mercator"===g?r:-My(function(e,t){var i=e.baseMapBounds.latitude;return Math.round(e.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}(n,Dy(l)),3)}return new Py(o,r)}function Oy(e,t,i,s){var n=256*Math.pow(2,t),o=(e.x+180)/360,r=Math.sin(e.y*Math.PI/180),a=.5-Math.log((1+r)/(1-r))/(4*Math.PI),l=e.x,h=e.y;return s&&(l=o*n+.5+i.x,h=a*n+.5+i.y),{x:l,y:h}}function Ay(e,t){var i,s=Math.cos(t),n=function(e){return e/Math.sin(e)}((i=s*Math.cos(e/=2),Math.acos(i)));return new Py(2*s*Math.sin(e)*n,Math.sin(t)*n)}function My(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}var Py=function(){return function(e,t){this.x=e,this.y=t}}(),Ny=function(){return function(e,t){this.min=e,this.max=t}}(),Ry=function(){return function(e,t){this.latitude=new Ny(e.min,e.max),this.longitude=new Ny(t.min,t.max)}}();function By(e,t){var i=document.getElementById("mapsmeasuretext");return null===i&&(i=yi("text",{id:"mapsmeasuretext"}),document.body.appendChild(i)),i.innerHTML=e,i.style.position="absolute","number"==typeof t.size?i.style.fontSize=t.size+"px":i.style.fontSize=t.size,i.style.fontWeight=t.fontWeight,i.style.fontStyle=t.fontStyle,i.style.fontFamily=t.fontFamily,i.style.visibility="hidden",i.style.top="-100",i.style.left="0",i.style.whiteSpace="nowrap",i.style.lineHeight="normal",new wy(i.clientWidth,i.clientHeight)}var Hy=function(){return function(e,t,i,s,n,o,r){void 0===o&&(o=""),this.transform="",this.baseLine="auto",this.id=e,this.text=n,this.transform=o,this.anchor=s,this.x=t,this.y=i,this.baseLine=r}}(),Fy=function(){return function(e,t,i,s,n,o,r){this.id=e,this.opacity=n,this.fill=t,this.stroke=s,this["stroke-width"]=i,this["stroke-dasharray"]=o,this.d=r}}(),jy=function(){return function(e,t,i){this.r=e,this.g=t,this.b=i}}(),Vy=function(e){function t(t,i,s,n,o,r,a,l,h){var c=e.call(this,t,i,s.width,s.color,n,h)||this;return c.y=o.y,c.x=o.x,c.height=o.height,c.width=o.width,c.rx=r||0,c.ry=a||0,c.transform=l||"",c["stroke-dasharray"]=h,c}return Sy(t,e),t}(Fy),zy=function(e){function t(t,i,s,n,o,r,a,l){var h=e.call(this,t,i,s.width,s.color,n)||this;return h.cy=r,h.cx=o,h.r=a,h["stroke-dasharray"]=l,h}return Sy(t,e),t}(Fy),_y=function(e){function t(t,i,s,n,o,r,a){return void 0===r&&(r=1),void 0===a&&(a=""),e.call(this,t,i,s,n,o,r,a)||this}return Sy(t,e),t}(function(e){function t(t,i,s,n,o,r,a){void 0===r&&(r=1),void 0===a&&(a="");var l=e.call(this,t,s,n,o,r,a)||this;return l.points=i,l}return Sy(t,e),t}(Fy)),qy=function(){return function(e,t){this.x=e,this.y=t}}(),Wy=function(){return function(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}}();function Uy(e,t,i,s,n){void 0===n&&(n=!1);var o,r,a={id:e.id,x:e.x,y:e.y,fill:i,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},l="string"==typeof e.text?e.text:n?e.text[e.text.length-1]:e.text[0],h=new Cg(""),c=h.createText(a,l);if(c.style["user-select"]="none",c.style["font-family"]=t.fontFamily,c.style["font-size"]=t.size,c.style["font-weight"]=t.fontWeight,c.style["font-color"]=t.color,c.style["-moz-user-select"]="none",c.style["-webkit-touch-callout"]="none",c.style["-webkit-user-select"]="none",c.style["-khtml-user-select"]="none",c.style["-ms-user-select"]="none",c.style["-o-user-select"]="none","string"!=typeof e.text&&e.text.length>1)for(var p=1,d=e.text.length;p<d;p++)r=By(e.text[p],t).height,o=h.createTSpan({x:e.x,id:e.id,y:e.y+(n?-p*r:p*r)},n?e.text[e.text.length-(p+1)]:e.text[p]),c.appendChild(o);return s.appendChild(c),c}function Gy(e,t){return t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e}function Yy(e,t,i,s){for(var n=""===e?t:e,o=""===e?n.split("${"):n.split("{{:"),r=0;r<o.length;r++)if(o[r].indexOf("}}")>-1&&o[r].indexOf(".")>-1||o[r].indexOf("}")>-1&&o[r].search(".")>-1)for(var a=""===e?o[r].split("}"):o[r].split("}}"),l=0;l<a.length;l++)if(a[l].indexOf(".")>-1){var h=Ky(i,a[l]).toString();n=""===e?n.split("${"+a[l]+"}").join(Gy(h,s)):n.replace(new RegExp("{{:"+a[l]+"}}","g"),h)}return n}function Xy(e,t,i,s,n,o,r){var a,l,h,c,p,d,u=n.size,m=n.borderColor,f=parseFloat(n.borderWidth),g=n.fill,v=n.dashArray,y={color:m,width:f},b=n.opacity;if(p=new Fy(s,g,f,m,b,v,""),"Circle"===e){var C=(u.width+u.height)/4;c=new zy(s,g,y,b,i.x,i.y,C,v),a=r.renderer.drawCircle(c)}else"Rectangle"===e?(l=i.x-u.width/2,h=i.y-u.height/2,d=new Vy(s,g,y,b,new Wy(l,h,u.width,u.height),null,null,"",v),a=r.renderer.drawRectangle(d)):"Image"===e?(l=i.x-u.width/2,h=i.y-u.height,oe(p,{href:t,height:u.height,width:u.width,x:l,y:h}),a=r.renderer.drawImage(p)):a=function(e,t,i,s,n,o){var r;switch(t){case"Balloon":r=function(e,t,i,s,n){var o=i.width,r=i.height;s.x-=o/2,s.y-=r,t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";var a=e.renderer.drawPath(t),l=i.width/30,h=i.height/30;a.setAttribute("transform","translate("+s.x+", "+s.y+") scale("+l+", "+h+")");var c=e.renderer.createGroup({id:t.id});return nb(a,c),nb(c,n)}(e,i,s,n,o);break;case"Cross":i.d="M "+n.x+" "+(n.y-s.height/2)+" L "+n.x+" "+(n.y+s.height/2)+" M "+(n.x-s.width/2)+" "+n.y+" L "+(n.x+s.width/2)+" "+n.y;break;case"Diamond":i.d="M "+n.x+" "+(n.y-s.height/2)+" L "+(n.x+s.width/2)+" "+n.y+" L "+n.x+" "+(n.y+s.height/2)+" L "+(n.x-s.width/2)+" "+n.y+" Z";break;case"Star":i.d="M "+(n.x+s.width/3)+" "+(n.y-s.height/2)+" L "+(n.x-s.width/2)+" "+(n.y+s.height/6)+" L "+(n.x+s.width/2)+" "+(n.y+s.height/6)+" L "+(n.x-s.width/3)+" "+(n.y-s.height/2)+" L "+n.x+" "+(n.y+s.height/2)+" L "+(n.x+s.width/3)+" "+(n.y-s.height/2)+" Z";break;case"Triangle":i.d="M "+n.x+" "+(n.y-s.height/2)+" L "+(n.x+s.width/2)+" "+(n.y+s.height/2)+" L "+(n.x-s.width/2)+" "+(n.y+s.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(n.x-s.width/2)+" "+n.y+" L "+(n.x+s.width/2)+" "+n.y;break;case"VerticalLine":i.d="M "+n.x+" "+(n.y-s.height/2)+" L "+n.x+" "+(n.y+s.height/2);break;case"InvertedTriangle":i.d="M "+(n.x-s.width/2)+" "+(n.y-s.height/2)+" L "+(n.x+s.width/2)+" "+(n.y-s.height/2)+" L "+n.x+" "+(n.y+s.height/2)+" Z";break;case"Pentagon":for(var a=void 0,l=void 0,h=0;h<5;h++)a=s.width/2*Math.cos(Math.PI/180*(72*h)),l=s.height/2*Math.sin(Math.PI/180*(72*h)),i.d+=(0==h?"M ":"L ")+(n.x+a)+" "+(n.y+l);i.d+=" Z"}"Cross"!==t&&"HorizontalLine"!==t&&"VerticalLine"!==t||(i.stroke="transparent"===i.stroke?i.fill:i.stroke);return"Balloon"===t?r:e.renderer.drawPath(i)}(r,e,p,u,i,o);return a}function Ky(e,t){if(!ae(e)&&!ae(t)){var i=t.replace(/\[/g,".").replace(/\]/g,"").split(".");if(1===i.length)e=e[i[0]];else for(var s=0;s<i.length&&!ae(e);s++)e=e[i[s]]}return e}function Zy(e,t){var i=ae(e.colorValuePath)?t[e.colorValuePath]:e.colorValuePath.indexOf(".")>-1?Ky(t,e.colorValuePath).toString():t[e.colorValuePath];return e.fill=ae(e.colorValuePath)||ae(i)?e.fill:e.colorValuePath.indexOf(".")>-1?Ky(t,e.colorValuePath).toString():t[e.colorValuePath],e}function Qy(e,t){if(ae(e.shapeValuePath)||ae(t[e.shapeValuePath])){var i=ae(e.shapeValuePath)?e.shape:e.shapeValuePath.indexOf(".")>-1?Ky(t,e.shapeValuePath).toString():e.shape;e.shape=i;var s=ae(e.imageUrlValuePath)?e.imageUrl:e.imageUrlValuePath.indexOf(".")>-1?Ky(t,e.imageUrlValuePath).toString():e.imageUrl;e.imageUrl=s}else{var n=e.shapeValuePath.indexOf(".")>-1?Ky(t,e.shapeValuePath).toString():t[e.shapeValuePath];e.shape=n,"Image"==t[e.shapeValuePath]&&(e.imageUrl=ae(e.imageUrlValuePath)||ae(t[e.imageUrlValuePath])?e.imageUrl:e.imageUrlValuePath.indexOf(".")>-1?Ky(t,e.imageUrlValuePath).toString():t[e.imageUrlValuePath])}return e}function Jy(e,t,i,s,n,o,r,a){var l,h,c,p,d,u,m,f=[],g=[],v=0,y=0,b=e.markerClusterSettings.labelStyle,C=0,S=[],x=e.markerClusterSettings,w=i.renderer.createGroup({id:i.element.id+"_LayerIndex_"+s+"_markerCluster"}),E={cancel:!1,name:TC,fill:x.fill,height:x.height,width:x.width,imageUrl:x.imageUrl,shape:x.shape,data:void 0,maps:i,cluster:x,border:x.border};if(ye()){E.data,E.maps,E.cluster;var k=xy(E,["data","maps","cluster"]);E=k}i.trigger("markerClusterRendering",E,function(x){for(var k=0;k<t.childElementCount;k++)if(S=[],"hidden"!==t.childNodes[k].style.visibility){if(m=t.childNodes[k],l=m.getBoundingClientRect(),S.push(k),!ae(l)){for(var T=k+1;T<t.childElementCount;T++)"hidden"!==t.childNodes[T].style.visibility&&(m=t.childNodes[T],ae(h=m.getBoundingClientRect())||l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top||(f.push(h),t.childNodes[T].style.visibility="hidden",S.push(T)));if(v=l.left+l.width/2,y=l.top+l.height,f.length>0){S=S.filter(function(e,t,i){return i.indexOf(e)===t});var L=i.element.getBoundingClientRect();v-=L.left,y=i.isBlazor?y-L.top:y-(i.availableSize.height<=L.height?L.top:L.bottom-L.top);var D=i.isTileMap?new Object:db(i,e,!1),I=i.isTileMap?{x:0,y:0}:0!==i.translatePoint.x?i.translatePoint:D.location,O=parseInt(t.childNodes[k].id.split("_dataIndex_")[1].split("_")[0],10),A=parseInt(t.childNodes[k].id.split("_MarkerIndex_")[1].split("_")[0],10);t.childNodes[k].style.visibility="hidden";var M=e.markerClusterSettings;E.cancel?((u={size:new wy(M.width,M.height),fill:M.fill,borderColor:M.border.color,borderWidth:M.border.width,opacity:M.opacity,dashArray:M.dashArray}).fill=M.fill,u.size.width=M.width,u.size.height=M.height,u.imageUrl=M.imageUrl,u.shape=M.shape,u.borderColor=M.border.color,u.borderWidth=M.border.width):((u={size:new wy(M.width,M.height),fill:M.fill,borderColor:M.border.color,borderWidth:M.border.width,opacity:M.opacity,dashArray:M.dashArray}).fill=E.fill,u.size.width=E.width,u.size.height=E.height,u.imageUrl=E.imageUrl,u.shape=E.shape,u.borderColor=E.border.color,u.borderWidth=E.border.width),v=i.isTileMap?v:t.id.indexOf("_Markers_Group")>-1?v:(v+I.x)*i.mapScaleValue,y=i.isTileMap?y:t.id.indexOf("_Markers_Group")>-1?y:(y+I.y)*i.mapScaleValue;var P=i.element.id+"_LayerIndex_"+s+"_MarkerIndex_"+A+"_dataIndex_"+O+"_cluster_"+C,N=i.element.id+"_LayerIndex_"+s+"_MarkerIndex_"+A+"_dataIndex_"+O+"_cluster_"+C+"_datalabel_"+C;C++;var R="Image"===u.shape?u.size.height/2:0,B=Xy(u.shape,u.imageUrl,{x:0,y:R},P,u,n,i);B.setAttribute("transform","translate( "+v+" "+y+" )"),"Balloon"===E.shape?B.children[0].innerHTML=S.toString():B.innerHTML=S.toString(),c=new Hy(N,0,3.75,"middle",(f.length+1).toString(),"",""),(p=Uy(c,b,b.color,n)).setAttribute("transform","translate( "+v+" "+y+" )"),w.appendChild(p),w.appendChild(B)}}f=[]}o.appendChild(w),i.svgObject.appendChild(o),i.element.appendChild(i.svgObject);for(var H=0;H<w.childElementCount;H++)if("hidden"!==w.childNodes[H].style.visibility&&(m=w.childNodes[H],!(ae(l=m.getBoundingClientRect())||m.id.indexOf("_datalabel_")>-1))){for(var F=H+1;F<w.childElementCount;F++)"hidden"!==w.childNodes[F].style.visibility&&(d=w.childNodes[F],ae(h=d.getBoundingClientRect())||d.id.indexOf("_datalabel_")>-1||l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top||(g.push(d),g.push(w.childNodes[F-1]),w.childNodes[F].style.visibility="hidden",w.childNodes[F-1].style.visibility="hidden",S.push(F)));if(g.length>0){m=w.childNodes[H];for(var j=0;j<g.length;j++)"g"===m.tagName?m.childNodes[0].textContent=m.childNodes[0].textContent+","+g[j].textContent:m.textContent=m.textContent+","+g[j].textContent,w.childNodes[H-1].textContent=(+w.childNodes[H-1].textContent+ +g[j+1].textContent).toString(),j++}g=[]}for(;0<w.childNodes.length;)n.insertBefore(w.childNodes[0],n.firstChild);r?o.appendChild(n):(mb(i.element.id+"_Secondary_Element").appendChild(n),o.appendChild(n)),document.getElementById(i.element.id+"_LayerIndex_0_markerCluster").remove(),a&&document.getElementById(i.element.id+"_Layer_Collections").appendChild(o)})}function $y(e,t,i){var s=e[0].layerIndex,n=e[0].targetClusterIndex,o=e[0].markerIndex,r=e[0].dataIndex,a=t.element.id+"_LayerIndex_"+s+"_MarkerIndex_"+o,l=a+"_dataIndex_"+r+"_cluster_"+n,h=vb(l),c=vb(l+"_datalabel_"+n);h.setAttribute("visibility","visible"),c.setAttribute("visibility","visible");for(var p=e[0].data.length,d=0;d<p;d++)vb(a+"_dataIndex_"+e[0].data[d].index).style.visibility="hidden";cb(t.element.id+"_LayerIndex_"+s+"_MarkerIndex_"+o+"_markerClusterConnectorLine")}function eb(e,t,i,s){var n=e[0].layerIndex,o=e[0].markerIndex,r=e[0].targetClusterIndex,a=e[0].dataIndex,l=s?vb:i.querySelector.bind(i),h=s?"":"#",c=t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+o,p=c+"_dataIndex_"+a+"_cluster_"+r,d=l(h+""+p),u=l(h+""+p+"_datalabel_"+r);d.setAttribute("visibility","hidden"),u.setAttribute("visibility","hidden");var m=t.layers[n].markerSettings[o],f=l(h+""+c+"_dataIndex_"+a),g=m.height,v=m.width,y=+d.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],b=+d.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),C=v+5,S=6.28*C,x=0,w=Math.round(S/v);x+=w;for(var E,k=e[0].data.length,T=Math.round(g/S*100),L=(T=k<w?100/k:T)/100*360,D=k<w?45:0,I=1,O="M "+y+" "+b+" ",A="",M=0;M<k;M++){if(x===M||Math.round(D)>=360){for(D=0,S=6.28*(C=(v+5)*++I),w=Math.round(S/g),T=Math.round(g/S*100);T*w<100;)w++;L=T/100*360,x+=w}var P=y+C*Math.sin(2*Math.PI*D/360),N=b+C*Math.cos(2*Math.PI*D/360);A+=O+"L "+P+" "+N+" ",(f=l(h+""+c+"_dataIndex_"+e[0].data[M].index)).setAttribute("transform","translate( "+P+" "+N+")"),f.style.visibility="visible",D+=L}var R=t.layers[n].markerClusterSettings.connectorLineSettings;E={d:A,id:t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_dataIndex_"+a+"_markerClusterConnectorLine",stroke:R.color,opacity:R.opacity,"stroke-width":R.width},i=s?l(t.element.id+"_Markers_Group"):i;var B=t.renderer.createGroup({id:t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_markerClusterConnectorLine"});B.appendChild(t.renderer.drawPath(E)),i.insertBefore(B,i.querySelector("#"+c+"_dataIndex_0"))}function tb(e,t,i,s,n,o,r,a,l,h,c){var p={size:new wy(e.width,e.height),fill:e.fill,borderColor:e.border.color,borderWidth:e.border.width,opacity:t.opacity,dashArray:t.dashArray},d=Xy(e.shape,e.imageUrl,{x:0,y:0},r,p,c,h),u=(h.isTileMap?n.x:(n.x+o.x)*l)+a.x,m=(h.isTileMap?n.y:(n.y+o.y)*l)+a.y;d.setAttribute("transform","translate( "+u+" "+m+" )"),sb(h.selectedMarkerElementId,h.markerSelectionClass,d,"MarkerselectionMapStyle"),c.appendChild(d);var f=i.length-1===s?"marker":null,g=new Py(u,m);return t.animationDuration>0&&Tb(d,t.animationDelay,t.animationDuration,g,h,f),c}function ib(e,t,i,s,n,o,r,a,l,h){if((t=gb(e.template))&&(h.isBlazor||t(s,h,e.template,h.element.id+"_MarkerTemplate"+n,!1).length)){for(var c=function(e,t,i,s,n){for(var o=yi("div",{id:t,styles:"position: absolute;pointer-events: auto;"}),r=e.length;r>0;)o.appendChild(e[0]),r--;for(var a=o.innerHTML,l=Object.keys(i),h=0;h<l.length;h++)"object"==typeof i[l[h]]?a=Yy(a,"",i,n):"latitude"!==l[h].toLowerCase()&&"longitude"!==l[h].toLowerCase()&&(a=a.replace(new RegExp("{{:"+l[h]+"}}","g"),i[l[h].toString()]));return o.innerHTML=a,o}(t(s,h,e.template,h.element.id+"_MarkerTemplate"+n,!1),i,s,0,h),p=0;p<c.children.length;p++)c.children[p].style.pointerEvents="none";if(c.style.left=(h.isTileMap?r.x:Math.abs(h.baseMapRectBounds.min.x-r.x)*a)+l.x+"px",c.style.top=(h.isTileMap?r.y:Math.abs(h.baseMapRectBounds.min.y-r.y)*a)+l.y+"px",o.appendChild(c),"GoogleStaticMap"===h.layers[h.baseLayerIndex].layerType){var d=mb(h.element.id+"_StaticGoogleMap").getBoundingClientRect(),u=c.getBoundingClientRect();(d.x>u.x||d.x+640<u.x+u.width)&&(d.y>u.y||d.y+d.height<u.y+u.height)&&(c.style.display="none")}}return o}function sb(e,t,i,s){if(e)for(var n=0;n<e.length;n++)i.getAttribute("id")===e[n]&&((ae(vb(t.id))||0===n)&&(document.body.appendChild(t),i.id.indexOf("_MarkerIndex_")>-1&&i.childElementCount>0&&i.children[0].setAttribute("class",s)),i.setAttribute("class",s))}function nb(e,t){return t&&t.appendChild(e),e}function ob(e,t,i,s,n){if(!ae(t))for(var o=0;o<e.length;o++){var r=i.indexOf(".")>-1?Ky(e[o],i):e[o][i],a=rb(r,s,t);if((!ae(r)&&isNaN(t[a])?r.toLowerCase():r)===(!ae(t[a])&&isNaN(t[a])?t[a].toLowerCase():t[a]))return o}return null}function rb(e,t,i){if(!ae(e)&&!ae(i)&&!ae(t))for(var s="[object Array]"===Object.prototype.toString.call(t)?t:[t],n=0;n<s.length;n++){if((ae(e)?e:e.toLowerCase())===(!ae(i[s[n]])&&isNaN(i[s[n]])?i[s[n]].toLowerCase():i[s[n]]))return s[n]}return null}function ab(e,t){if(!e.length)return null;for(var i,s,n,o,r=e.length,a=0,l=0,h=0,c=0;c<=r-1;c++)i=e[c].x,s="Mercator"===t?e[c].y:-e[c].y,c===r-1?(n=e[0].x,o="Mercator"===t?e[0].y:-e[0].y):(n=e[c+1].x,o="Mercator"===t?e[c+1].y:-e[c+1].y),a+=Math.abs(i*o-n*s),l+=Math.abs((i+n)*(i*o-n*s)),h+=Math.abs((s+o)*(i*o-n*s));l*=1/(4*(a*=.5)),h*=1/(4*a);var p={x:0,y:0},d={x:0,y:0},u={x:0,y:0},m={x:0,y:0},f={x:0,y:0},g={x:0,y:0},v={x:0,y:0},y={x:0,y:0},b=0;for(c=0;c<=r-1;c++){var C=e[c];C.y="Mercator"===t?C.y:-C.y,C.y>h?C.x<l&&l-C.x<l-f.x?f={x:C.x,y:C.y}:C.x>l&&(0===g.x||C.x-l<g.x-l)&&(g={x:C.x,y:C.y}):C.x<l&&l-C.x<l-v.x?v={x:C.x,y:C.y}:C.x>l&&(0===y.x||C.x-l<y.x-l)&&(y={x:C.x,y:C.y}),b=g.y-y.y+(g.y-y.y)/4,C.x>l?C.y<h&&h-C.y<h-p.y?p={x:C.x,y:C.y}:C.y>h&&(0===d.y||C.y-h<d.y-h)&&(d={x:C.x,y:C.y}):C.y<h&&h-C.y<h-u.y?u={x:C.x,y:C.y}:C.y>h&&(0===m.y||C.y-h<m.y-h)&&(m={x:C.x,y:C.y})}return{x:l,y:h,rightMin:p,rightMax:d,leftMin:u,leftMax:m,points:e,topMax:y,topMin:v,bottomMax:g,bottomMin:f,height:b}}function lb(e){var t=!1;return"[object Array]"===Object.prototype.toString.call(e)&&Array.prototype.forEach.call(e,function(e,i){ae(e.geometry)||"Path"!==e.geometry.type||(t=!0)}),t}function hb(e,t,i){var s=t,n=By(t,i).width;if(n>e)for(var o=t.length-1;o>=0;--o)if((n=By(s=t.substring(0,o)+"...",i).width)<=e||s.length<4)return s.length<4&&(s=" "),s;return s}function cb(e){var t=document.getElementById(e);return t?Li(t):null}function pb(e,t){var i=Iy(e.minLatOfGivenLocation,e.minLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),s=Iy(e.maxLatOfGivenLocation,e.maxLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),n=(i.x+s.x)/2,o=(i.y+s.y)/2;return new Py(n,o)}function db(e,t,i){var s,n=e.zoomSettings.zoomFactor,o=e.centerPosition,r=o.latitude,a=o.longitude,l=!ae(e.centerLatOfGivenLocation)&&!ae(e.centerLongOfGivenLocation)&&e.zoomNotApplied;ae(e.mapScaleValue)&&(e.mapScaleValue=n),e.zoomSettings.shouldZoomInitially&&e.zoomSettings.enable&&(e.mapScaleValue=s=n=(e.zoomSettings.shouldZoomInitially||e.enablePersistence)&&1==e.scale?e.scale:ae(e.markerZoomFactor)?1:e.markerZoomFactor,e.mapScaleValue===e.markerZoomFactor||e.enablePersistence||(e.mapScaleValue=n=e.markerZoomFactor),ae(e.markerCenterLatitude)||ae(e.markerCenterLongitude)||(r=e.markerCenterLatitude,a=e.markerCenterLongitude)),l&&(e.mapScaleValue=s=n=e.scaleOfGivenLocation);var h=e.baseMapRectBounds.min,c=e.baseMapRectBounds.max,p=i?1:e.mapScaleValue;ae(e.currentShapeDataLength)&&(e.currentShapeDataLength=ae(t.shapeData.features)?t.shapeData.geometries.length:t.shapeData.features.length);var d,u,m=e.totalRect&&e.legendSettings.visible?e.totalRect:e.mapAreaRect,f=e.availableSize,g=Math.abs(c.x-h.x),v=Math.abs(h.y-c.y),y=i?1:1===e.markerZoomFactor?e.mapScaleValue:n;if(o=e.zoomSettings.shouldZoomInitially&&e.markerZoomedState&&!e.zoomPersistence?e.markerZoomCenterPoint:e.centerPosition,!ae(a)&&!ae(r)||l){var b=((g+Math.abs(e.mapAreaRect.width-g))/2+e.mapAreaRect.x)/y,C=((v+Math.abs(e.mapAreaRect.height-v))/2+e.mapAreaRect.y)/y,S=l?pb(e,t):Iy(r,a,e.mapLayerPanel.calculateFactor(t),t,e);ae(e.previousProjection)||e.previousProjection!==e.projectionType?(d=-S.x+b,u=-S.y+C,s=p):(1!==Math.floor(e.scale)&&e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(d=-S.x+b,u=-S.y+C):e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(d=-S.x+b,u=-S.y+C,s=p):(d=e.zoomTranslatePoint.x,u=e.zoomTranslatePoint.y),s=e.mapScaleValue)}else if(ae(e.previousProjection)||e.previousProjection!==e.projectionType){g*=s=parseFloat(Math.min(m.width/g,m.height/v).toFixed(2)),v*=s;var x=0!==h.x&&"layers"===e.translateType?f.width-m.width:0;d=m.x+(-h.x+(m.width/2-g/2))-x,u=m.y+(-h.y+(m.height/2-v/2)),e.previousTranslate=new Py(d,u)}else if(e.zoomSettings.shouldZoomInitially||1!==e.markerZoomFactor||1!==e.mapScaleValue)if(s=e.mapScaleValue<1?e.mapScaleValue+1:e.mapScaleValue,e.mapScaleValue=e.zoomSettings.enable&&1!==e.mapScaleValue?e.mapScaleValue:1,e.currentShapeDataLength!==(ae(t.shapeData.features)?t.shapeData.geometries.length:t.shapeData.features.length)&&"SubLayer"!==t.type){var w=parseFloat(Math.min(m.height/v,m.width/g).toFixed(2));v*=w,g*=w,u=m.y+(-h.y+(m.height/2-v/2)),s=w,d=m.x+(-h.x+(m.width/2-g/2))}else if(e.availableSize.height!==e.heightBeforeRefresh||e.widthBeforeRefresh!==e.availableSize.width){var E=parseFloat(Math.min(m.width/g,m.height/v).toFixed(2)),k=g;k*=E;var T=v;T*=E;var L=m.x+(-h.x+(m.width/2-k/2)),D=m.y+(-h.y+(m.height/2-T/2)),I=(e.translatePoint.x-e.previousTranslate.x)/e.widthBeforeRefresh,O=(e.translatePoint.y-e.previousTranslate.y)/e.heightBeforeRefresh;d=L+I*e.availableSize.width,u=D+O*e.availableSize.height,e.previousTranslate=new Py(L,D),e.zoomTranslatePoint.x=d,e.zoomTranslatePoint.y=u}else ae(e.previousProjection)||1!==e.mapScaleValue||e.zoomModule.isDragZoom?(d=e.zoomTranslatePoint.x,u=e.zoomTranslatePoint.y,s=e.scale):(g*=s=parseFloat(Math.min(m.width/g,m.height/v).toFixed(2)),d=m.x+(-h.x+(m.width/2-g/2)),v*=s,u=m.y+(-h.y+(m.height/2-v/2)));else v*=s=parseFloat(Math.min(m.width/g,m.height/v).toFixed(2)),g*=s,u=m.y+(-h.y+(m.height/2-v/2)),d=m.x+(-h.x+(m.width/2-g/2));return ae(e.translatePoint)||(d=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:d,u=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:u),s=e.enablePersistence?e.mapScaleValue>=1?e.mapScaleValue:1:s,e.widthBeforeRefresh=e.availableSize.width,e.heightBeforeRefresh=e.availableSize.height,{scale:s,location:new Py(d,u)}}function ub(e,t,i){var s,n=e.zoomSettings.zoomFactor,o=e.centerPosition,r=o.latitude,a=o.longitude,l=!ae(e.centerLongOfGivenLocation)&&!ae(e.centerLatOfGivenLocation)&&e.zoomNotApplied;ae(e.previousCenterLatitude)&&ae(e.previousCenterLongitude)?(e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.previousCenterLatitude!==e.centerPosition.latitude&&e.previousCenterLongitude!==e.centerPosition.longitude?(e.centerPositionChanged=!0,e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.centerPositionChanged=!1,(ae(e.mapScaleValue)||n>e.mapScaleValue)&&(e.isReset&&1===e.mapScaleValue?e.mapScaleValue=e.mapScaleValue:e.mapScaleValue=n),e.mapScaleValue=1!==e.zoomSettings.zoomFactor&&e.zoomSettings.zoomFactor===e.mapScaleValue?e.zoomSettings.zoomFactor:e.zoomSettings.zoomFactor===e.mapScaleValue||e.centerPositionChanged?e.zoomSettings.zoomFactor:e.mapScaleValue,e.zoomSettings.shouldZoomInitially&&(e.mapScaleValue=n=s=(e.enablePersistence||e.zoomSettings.shouldZoomInitially)&&1==e.scale?e.scale:ae(e.markerZoomFactor)?e.mapScaleValue:e.markerZoomFactor,n=e.mapScaleValue,ae(e.markerCenterLatitude)||ae(e.markerCenterLongitude)||(r=e.markerCenterLatitude,a=e.markerCenterLongitude)),l&&(e.mapScaleValue=s=n=e.scaleOfGivenLocation);var h,c,p=i?1:e.mapScaleValue,d=e.mapAreaRect,u=e.baseMapRectBounds.min,m=e.baseMapRectBounds.max,f=i?1:e.mapScaleValue,g=Math.abs(m.x-u.x),v=Math.abs(u.y-m.y);if(!ae(a)&&!ae(r)||l){var y=(v+Math.abs(e.mapAreaRect.height-v))/2/f,b=(g+Math.abs(e.mapAreaRect.width-g))/2/f,C=l?pb(e,t):Iy(r,a,e.mapLayerPanel.calculateFactor(t),t,e);ae(e.zoomTranslatePoint)&&ae(e.previousProjection)||e.zoomNotApplied?(h=-C.x+b+e.mapAreaRect.x/p,c=-C.y+y+e.mapAreaRect.y/p):e.previousProjection!==e.projectionType?(h=-C.x+b,c=-C.y+y):(h=e.zoomTranslatePoint.x,c=e.zoomTranslatePoint.y,n=p),ae(e.translatePoint)||(c=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:c,h=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:h),s=0!==n?n:1}else{var S=0===e.zoomSettings.zoomFactor?1:e.zoomSettings.zoomFactor;s=S=S>10?10:S;var x=0===e.mapScaleValue?1:e.mapScaleValue>10?10:e.mapScaleValue;b=d.x+(-u.x+(d.width/2-g/2)),y=d.y+(-u.y+(d.height/2-v/2));if(!ae(e.zoomTranslatePoint)||!ae(e.previousProjection))if(e.previousProjection!==e.projectionType){var w=[],E={x:b,y:y};w.push(E);for(var k=1;k<10;k++){E={x:w[k-1].x-(d.width/k-d.width/(k+1))/2,y:w[k-1].y-(d.height/k-d.height/(k+1))/2},w.push(E)}b=w[S-1].x,y=w[S-1].y}else b=e.zoomTranslatePoint.x,y=e.zoomTranslatePoint.y,S!==x&&(s=x);ae(e.translatePoint)||(h=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:b,c=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:y)}return s=e.enablePersistence?0==e.mapScaleValue?1:e.mapScaleValue:s,{scale:i?1:s,location:new Py(h,c)}}function mb(e){return document.getElementById(e)}function fb(e,t){return e.formatFunction=e.intl.getNumberFormat({format:e.format,useGrouping:e.useGroupingSeparator}),e.formatFunction(t)}function gb(e){var t=null;try{document.querySelectorAll(e).length&&(t=Xt(document.querySelector(e).innerHTML.trim()))}catch(i){t=Xt(e)}return t}function vb(e){return document.getElementById(e)}function yb(e,t,i,s){var n=function(e,t){var i,s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),n=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),o=t.layersCollection[s],r=o.layerData[n].property;return o.dataSource&&(i=o.dataSource[ob(o.dataSource,r,o.shapeDataPath,o.shapePropertyPath)]),{shapeData:r,data:i}}(e,i),o=t.enableMultiSelect?{cancel:!1,name:s,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:n.shapeData,data:n.data,target:e,maps:i,shapeDataCollection:i.shapeSelectionItem}:{cancel:!1,name:s,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:n.shapeData,data:n.data,target:e,maps:i};if(i.isBlazor){o.maps,o.shapeData;o=xy(o,["maps","shapeData"])}return i.trigger(s,o),o}function bb(e){return document.getElementsByClassName(e)}function Cb(e,t){var i=null;return document.getElementById(t)&&(i=document.getElementById(t).querySelector("#"+e)),i}function Sb(e,t,i,s){for(var n,o=s.layers[e].shapeData.features,r=0;r<o.length;r++)if(o[r].properties.name===t){n=s.element.id+"_LayerIndex_"+e+"_shapeIndex_"+r+"_dataIndex_undefined";break}return vb(n)}function xb(e,t,i){return yi("style",{id:e,innerHTML:"."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+";}"})}function wb(e,t,i){vb(e).innerHTML="."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+"}"}function Eb(e,t,i,s,n){var o={color:e.border.color,width:e.border.width/t.scale},r={opacity:e.opacity,fill:e.fill,border:o,name:MC,target:i.id,cancel:!1,shapeData:s,data:n,maps:t};t.trigger("itemSelection",r,function(e){t.shapeSelectionItem.push(r.shapeData),vb("ShapeselectionMap")?wb("ShapeselectionMap","ShapeselectionMapStyle",r):document.body.appendChild(xb("ShapeselectionMap","ShapeselectionMapStyle",r))})}function kb(e){e.removeAttribute("class")}function Tb(e,t,i,s,n,o,r){void 0===r&&(r=0);var a=s.x,l=s.y,h=0,c=e.getAttribute("transform")||"";new vs({}).animate(e,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(h=(t.timeStamp-t.delay)/t.duration,e.setAttribute("transform","translate( "+(a-r*h)+" "+(l-r*h)+" ) scale("+h+")"))},end:function(t){if(e.setAttribute("transform",c),o){var i={cancel:!1,name:AC,element:o,maps:n.isBlazor?null:n};n.trigger(AC,i)}}})}function Lb(e){cb(e)}function Db(e,t,i,s,n,o,r,a,l){var h=Ty(i,s,a);ae(h)||(i=h.x,s=h.y);for(var c=document.getElementById(r),p=By(e,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,d=e.split(" "),u=d[0].length,m=1;m<d.length;m++)u<d[m].length&&(u=d[m].length);c||(c=yi("div",{id:r,styles:'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'})),i<n-p?i=i:i>n-p&&i<n-8*u?p=n-i:i>=n-8*u&&(i>p?i-=p:(p=i,i=0));var f=t.split("px");Ib(c,e,i,s,f,p,n,a),c.clientHeight+2*parseInt(f[0],10)>o&&(p=i,i=0),Ib(c,e,i,s,f,p,n,a),l&&setTimeout(Lb,5e3,r)}function Ib(e,t,i,s,n,o,r,a){e.innerHTML=t,e.style.top=-1!==e.id.indexOf("_Legend")?(parseInt(n[0],10)+s).toString()+"px":(2*parseInt(n[0],10)).toString()+"px",e.style.left=i.toString()+"px",e.style.width=o.toString()+"px",e.style.maxWidth=r.toString()+"px",e.style.wordWrap="break-word",a.appendChild(e)}function Ob(e,t,i,s,n){var o=new Cg(""),r=function(e,t,i,s,n){var o,r="Path",a=t.width,l=t.height,h=e.x,c=e.y,p=e.x+-a/2,d=e.y+-l/2;switch(i){case"Circle":case"Bubble":r="Ellipse",oe(s,{rx:a/2,ry:l/2,cx:h,cy:c});break;case"VerticalLine":oe(s,{d:o="M "+h+" "+(c+l/2)+" L "+h+" "+(c+-l/2)});break;case"Diamond":oe(s,{d:o="M "+p+" "+c+" L "+h+" "+(c+-l/2)+" L "+(h+a/2)+" "+c+" L "+h+" "+(c+l/2)+" L "+p+" "+c+" z"});break;case"Rectangle":oe(s,{d:o="M "+p+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+l/2)+" L "+p+" "+(c+l/2)+" L "+p+" "+(c+-l/2)+" z"});break;case"Triangle":oe(s,{d:o="M "+p+" "+(c+l/2)+" L "+h+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+l/2)+" L "+p+" "+(c+l/2)+" z"});break;case"InvertedTriangle":oe(s,{d:o="M "+(h+a/2)+" "+(c-l/2)+" L "+h+" "+(c+l/2)+" L "+(h-a/2)+" "+(c-l/2)+" L "+(h+a/2)+" "+(c-l/2)+" z"});break;case"Pentagon":for(var u=void 0,m=void 0,f=0;f<=5;f++)u=a/2*Math.cos(Math.PI/180*(72*f)),m=a/2*Math.sin(Math.PI/180*(72*f)),o=0===f?"M "+(h+u)+" "+(c+m)+" ":o.concat("L "+(h+u)+" "+(c+m)+" ");o=o.concat("Z"),oe(s,{d:o});break;case"Star":o="M "+(e.x+t.width/3)+" "+(e.y-t.height/2)+" L "+(e.x-t.width/2)+" "+(e.y+t.height/6)+" L "+(e.x+t.width/2)+" "+(e.y+t.height/6)+" L "+(e.x-t.width/3)+" "+(e.y-t.height/2)+" L "+e.x+" "+(e.y+t.height/2)+" L "+(e.x+t.width/3)+" "+(e.y-t.height/2)+" Z",oe(s,{d:o});break;case"Cross":oe(s,{d:o="M "+p+" "+c+" L "+(h+a/2)+" "+c+" M "+h+" "+(c+l/2)+" L "+h+" "+(c+-l/2)});break;case"Image":r="Image",oe(s,{href:n,height:l,width:a,x:p,y:d})}return{renderOption:s,functionName:r}}(e,i,t,n,s);return o["draw"+r.functionName](r.renderOption)}function Ab(e,t,i,s){for(var n,o=0;o<e.childElementCount;o++)if((n=e.childNodes[o]).id.indexOf("_NavigationGroup")>-1)Mb(n,t,i,s);else{var r=void 0,a=0,l=s.layersCollection[t].shapeSettings.borderWidthValuePath;s.layersCollection[t].shapeSettings.borderWidthValuePath?null!==(a=ob(s.layersCollection[t].dataSource,s.layersCollection[t].layerData[o].property,s.layersCollection[t].shapeDataPath,s.layersCollection[t].shapePropertyPath,s.layersCollection[t]))&&(r=s.layersCollection[t].dataSource[a][l]?s.layersCollection[t].dataSource[a][l]:s.layersCollection[t].shapeSettings.border.width):r=s.layersCollection[t].shapeSettings.border.width,n.setAttribute("stroke-width",(r/i).toString())}}function Mb(e,t,i,s){for(var n,o=0;o<e.childElementCount;o++)if("path"===(n=e.childNodes[o]).tagName){var r=s.layersCollection[t].navigationLineSettings[parseFloat(n.id.split("_NavigationIndex_")[1].split("_")[0])].width;n.setAttribute("stroke-width",(r/i).toString())}}function Pb(e){for(var t=[],i=e.touches,s=0;s<i.length;s++)t.push({pageX:i[s].pageX,pageY:i[s].pageY});return t}function Nb(e,t){var i=e.pageX-t.pageX,s=e.pageY-t.pageY;return Math.sqrt(i*i+s*s)}function Rb(e,t){return e+t}function Bb(e,t,i,s,n){var o,r=this,a=null,l=function(t){a||(a=t);var h=t-a;h<i?(s.call(r,{element:e,delay:0,timeStamp:h,duration:i}),window.requestAnimationFrame(l)):(window.cancelAnimationFrame(o),n.call(r,{element:e}),e.setAttribute("style","visibility:visible"))};o=window.requestAnimationFrame(l)}var Hb,Fb,jb,Vb,zb,_b=function(){return function(e,t,i,s,n){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=s,this.sendData=n}}();function qb(e,t,i,s){var n=0,o=e.getAttribute("transform").split(" ");2===o.length&&(o[2]=o[1].split(")")[0],o[1]=o[0].split("(")[1]);var r=new qy(parseInt(o[1],10),parseInt(o[2],10)),a=s.x-r.x,l=s.y-r.y,h=new qy(0,0);Bb(e,0,i,function(e){e.timeStamp>e.delay&&(n=(e.timeStamp-e.delay)/e.duration,h.x=r.x+n*a,h.y=r.y+n*l,e.element.setAttribute("transform","translate( "+h.x+" "+h.y+" )"))},function(){e.setAttribute("transform","translate( "+s.x+" "+s.y+" )")})}function Wb(e,t){var i=ae(t.shouldZoomPreviousFactor)?null:t.shouldZoomPreviousFactor,s=ae(t.shouldZoomCurrentFactor)?null:t.shouldZoomCurrentFactor;ae(s)?!ae(i)&&ae(s)&&t.shouldZoomPreviousFactor!==e?t.shouldZoomCurrentFactor=e:t.shouldZoomPreviousFactor=e:(t.shouldZoomCurrentFactor=null,t.shouldZoomPreviousFactor=null)}function Ub(e,t,i,s,n,o,r){var a,l,h,c,p,d,u,m=Math.sin(t*Math.PI/180),f=Math.log((1+m)/(1-m))/2,g=Math.max(Math.min(f,Math.PI),-Math.PI)/2,v=Math.sin(e*Math.PI/180),y=Math.log((1+v)/(1-v))/2,b=Math.max(Math.min(y,Math.PI),-Math.PI)/2;if(r.zoomNotApplied&&!r.isTileMap){var C=Math.abs((r.baseMapBounds.latitude.max-r.baseMapBounds.latitude.min)/(t-e)),S=Math.abs((r.baseMapBounds.longitude.max-r.baseMapBounds.longitude.min)/(s-i));c=Math.min(C,S);Iy(e,i,1,r.layersCollection[0],r),Iy(t,s,1,r.layersCollection[0],r)}a=(g-b)/Math.PI;var x=s-i;l=(x<0?x+360:x)/360;return p=Math.log(o/256/a)/Math.LN2,d=Math.log(n/256/l)/Math.LN2,u=r.zoomNotApplied&&!r.isTileMap?c:Math.min(p,d),h=Math.min(u,10),h=r.isTileMap||!r.zoomNotApplied?Math.floor(h):h,r.isTileMap||Wb(h,r),h}function Gb(e){var t,i=ae(e.result)?e.actual:e.result;return ae(i.length)?ae(i.Items)||(t=i.Items):t=i,t}!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Hb||(Hb={})),function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"}}(Fb||(Fb={})),function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}}(jb||(jb={})),function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#000000",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Vb||(Vb={})),function(e){e.mapsTitleFont={fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",size:"14px",fontStyle:"Medium",color:"#FFFFFF"},e.mapsSubTitleFont={size:"13px",color:"#FFFFFF",fontWeight:"Medium",fontFamily:"Roboto, Noto, Sans-serif",fontStyle:"Medium"},e.tooltipLabelFont={size:"12px",color:"#282727",fontWeight:"Regular",fontFamily:"Roboto",fontStyle:"Regular"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",color:"#DADADA",fontStyle:"Medium"}}(zb||(zb={}));var Yb=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Xb=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Kb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("")],t.prototype,"content",void 0),Xb([os("0px")],t.prototype,"x",void 0),Xb([os("0px")],t.prototype,"y",void 0),Xb([os("None")],t.prototype,"verticalAlignment",void 0),Xb([os("None")],t.prototype,"horizontalAlignment",void 0),Xb([os("-1")],t.prototype,"zIndex",void 0),t}(Ls),Zb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("Start")],t.prototype,"position",void 0),Xb([os("false")],t.prototype,"showArrow",void 0),Xb([os(2)],t.prototype,"size",void 0),Xb([os("black")],t.prototype,"color",void 0),Xb([os(0)],t.prototype,"offSet",void 0),t}(Ls),Qb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("12px")],t.prototype,"size",void 0),Xb([os(null)],t.prototype,"color",void 0),Xb([os("Roboto, Noto, Sans-serif")],t.prototype,"fontFamily",void 0),Xb([os("Medium")],t.prototype,"fontWeight",void 0),Xb([os("Medium")],t.prototype,"fontStyle",void 0),Xb([os(1)],t.prototype,"opacity",void 0),t}(Ls),Jb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("")],t.prototype,"color",void 0),Xb([os(0)],t.prototype,"width",void 0),t}(Ls),$b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(null)],t.prototype,"latitude",void 0),Xb([os(null)],t.prototype,"longitude",void 0),t}(Ls),eC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"visible",void 0),Xb([os("")],t.prototype,"template",void 0),Xb([os("")],t.prototype,"fill",void 0),Xb([rs({color:"transparent",width:1},Jb)],t.prototype,"border",void 0),Xb([rs(Hb.tooltipLabelFont,Qb)],t.prototype,"textStyle",void 0),Xb([os(null)],t.prototype,"format",void 0),Xb([os(null)],t.prototype,"valuePath",void 0),t}(Ls),tC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(10)],t.prototype,"left",void 0),Xb([os(10)],t.prototype,"right",void 0),Xb([os(10)],t.prototype,"top",void 0),Xb([os(10)],t.prototype,"bottom",void 0),t}(Ls),iC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("#000000")],t.prototype,"color",void 0),Xb([os(1)],t.prototype,"width",void 0),Xb([os(1)],t.prototype,"opacity",void 0),t}(Ls),sC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"allowClustering",void 0),Xb([rs({color:"transparent",width:1},Jb)],t.prototype,"border",void 0),Xb([os("#D2691E")],t.prototype,"fill",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os("Rectangle")],t.prototype,"shape",void 0),Xb([os(12)],t.prototype,"width",void 0),Xb([os(12)],t.prototype,"height",void 0),Xb([os(new Py(0,0))],t.prototype,"offset",void 0),Xb([os("")],t.prototype,"imageUrl",void 0),Xb([os("")],t.prototype,"dashArray",void 0),Xb([rs({},Qb)],t.prototype,"labelStyle",void 0),Xb([os(!1)],t.prototype,"allowClusterExpand",void 0),Xb([rs({},iC)],t.prototype,"connectorLineSettings",void 0),t}(Ls),nC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(null)],t.prototype,"from",void 0),Xb([os(null)],t.prototype,"to",void 0),Xb([os(null)],t.prototype,"value",void 0),Xb([os(null)],t.prototype,"color",void 0),Xb([os(null)],t.prototype,"minOpacity",void 0),Xb([os(null)],t.prototype,"maxOpacity",void 0),Xb([os(null)],t.prototype,"label",void 0),Xb([os(!0)],t.prototype,"showLegend",void 0),t}(Ls),oC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(null)],t.prototype,"latitude",void 0),Xb([os(null)],t.prototype,"longitude",void 0),t}(Ls),rC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(null)],t.prototype,"shapePath",void 0),Xb([os(null)],t.prototype,"shapeValue",void 0),t}(Ls),aC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"enable",void 0),Xb([os(null)],t.prototype,"fill",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os(!1)],t.prototype,"enableMultiSelect",void 0),Xb([rs({color:"transparent",width:0},Jb)],t.prototype,"border",void 0),t}(Ls),lC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(null)],t.prototype,"fill",void 0),Xb([os(!1)],t.prototype,"enable",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([rs({color:"transparent",width:0},Jb)],t.prototype,"border",void 0),t}(Ls),hC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"visible",void 0),Xb([os(1)],t.prototype,"width",void 0),Xb([os(null)],t.prototype,"longitude",void 0),Xb([os(null)],t.prototype,"latitude",void 0),Xb([os("")],t.prototype,"dashArray",void 0),Xb([os("black")],t.prototype,"color",void 0),Xb([os(0)],t.prototype,"angle",void 0),Xb([rs({showArrow:!1,position:"Start",size:5,color:"black"},Zb)],t.prototype,"arrowSettings",void 0),Xb([rs({},aC)],t.prototype,"selectionSettings",void 0),Xb([rs({},lC)],t.prototype,"highlightSettings",void 0),t}(Ls),cC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([rs({},Jb)],t.prototype,"border",void 0),Xb([os(!1)],t.prototype,"visible",void 0),Xb([os([])],t.prototype,"dataSource",void 0),Xb([os()],t.prototype,"query",void 0),Xb([os(1e3)],t.prototype,"animationDuration",void 0),Xb([os(0)],t.prototype,"animationDelay",void 0),Xb([os("")],t.prototype,"fill",void 0),Xb([os(10)],t.prototype,"minRadius",void 0),Xb([os(20)],t.prototype,"maxRadius",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os(null)],t.prototype,"valuePath",void 0),Xb([os("Circle")],t.prototype,"bubbleType",void 0),Xb([os(null)],t.prototype,"colorValuePath",void 0),Xb([ls([],nC)],t.prototype,"colorMapping",void 0),Xb([rs({},eC)],t.prototype,"tooltipSettings",void 0),Xb([rs({},aC)],t.prototype,"selectionSettings",void 0),Xb([rs({},lC)],t.prototype,"highlightSettings",void 0),t}(Ls),pC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("")],t.prototype,"text",void 0),Xb([os("")],t.prototype,"description",void 0),t}(Ls),dC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([rs({size:Hb.mapsSubTitleFont.size},Qb)],t.prototype,"textStyle",void 0),Xb([os("Center")],t.prototype,"alignment",void 0),t}(pC),uC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([rs({size:Hb.mapsTitleFont.size},Qb)],t.prototype,"textStyle",void 0),Xb([os("Center")],t.prototype,"alignment",void 0),Xb([rs({},dC)],t.prototype,"subtitleSettings",void 0),t}(pC),mC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"enable",void 0),Xb([os(!0)],t.prototype,"enablePanning",void 0),Xb([os(!0)],t.prototype,"enableSelectionZooming",void 0),Xb([os("Horizontal")],t.prototype,"toolBarOrientation",void 0),Xb([os(null)],t.prototype,"color",void 0),Xb([os("#e61576")],t.prototype,"highlightColor",void 0),Xb([os("#e61576")],t.prototype,"selectionColor",void 0),Xb([os("Far")],t.prototype,"horizontalAlignment",void 0),Xb([os("Near")],t.prototype,"verticalAlignment",void 0),Xb([os(["ZoomIn","ZoomOut","Reset"])],t.prototype,"toolbars",void 0),Xb([os(!0)],t.prototype,"mouseWheelZoom",void 0),Xb([os(!1)],t.prototype,"doubleClickZoom",void 0),Xb([os(!1)],t.prototype,"pinchZooming",void 0),Xb([os(!1)],t.prototype,"zoomOnClick",void 0),Xb([os(1)],t.prototype,"zoomFactor",void 0),Xb([os(10)],t.prototype,"maxZoom",void 0),Xb([os(1)],t.prototype,"minZoom",void 0),Xb([os(!1)],t.prototype,"shouldZoomInitially",void 0),Xb([os(!0)],t.prototype,"resetToInitial",void 0),t}(Ls),fC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"enable",void 0),Xb([os(!0)],t.prototype,"applyShapeSettings",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os("")],t.prototype,"fill",void 0),Xb([rs({color:"",width:0},Jb)],t.prototype,"border",void 0),t}(Ls),gC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"toggleVisibility",void 0),Xb([os(!1)],t.prototype,"visible",void 0),Xb([os("transparent")],t.prototype,"background",void 0),Xb([os("Layers")],t.prototype,"type",void 0),Xb([os(!1)],t.prototype,"invertedPointer",void 0),Xb([os("After")],t.prototype,"labelPosition",void 0),Xb([os("None")],t.prototype,"labelDisplayMode",void 0),Xb([os("Circle")],t.prototype,"shape",void 0),Xb([os("")],t.prototype,"width",void 0),Xb([os("")],t.prototype,"height",void 0),Xb([rs({},Qb)],t.prototype,"textStyle",void 0),Xb([os(15)],t.prototype,"shapeWidth",void 0),Xb([os(15)],t.prototype,"shapeHeight",void 0),Xb([os(10)],t.prototype,"shapePadding",void 0),Xb([rs({color:"#000000",width:0},Jb)],t.prototype,"border",void 0),Xb([rs({color:"#000000",width:0},Jb)],t.prototype,"shapeBorder",void 0),Xb([rs({},pC)],t.prototype,"title",void 0),Xb([rs({},Qb)],t.prototype,"titleStyle",void 0),Xb([os("Bottom")],t.prototype,"position",void 0),Xb([os("Center")],t.prototype,"alignment",void 0),Xb([os("None")],t.prototype,"orientation",void 0),Xb([os({x:0,y:0})],t.prototype,"location",void 0),Xb([os(null)],t.prototype,"fill",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os("Default")],t.prototype,"mode",void 0),Xb([os(null)],t.prototype,"showLegendPath",void 0),Xb([os(null)],t.prototype,"valuePath",void 0),Xb([os(!1)],t.prototype,"removeDuplicateLegend",void 0),Xb([rs({},fC)],t.prototype,"toggleLegendSettings",void 0),t}(Ls),vC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(!1)],t.prototype,"visible",void 0),Xb([rs({width:0,color:"transparent"},Jb)],t.prototype,"border",void 0),Xb([os("black")],t.prototype,"fill",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os(5)],t.prototype,"rx",void 0),Xb([os(5)],t.prototype,"ry",void 0),Xb([rs({},Qb)],t.prototype,"textStyle",void 0),Xb([os("")],t.prototype,"labelPath",void 0),Xb([os("None")],t.prototype,"smartLabelMode",void 0),Xb([os("None")],t.prototype,"intersectionAction",void 0),Xb([os("")],t.prototype,"template",void 0),t}(Ls),yC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os("#A6A6A6")],t.prototype,"fill",void 0),Xb([os([])],t.prototype,"palette",void 0),Xb([os(5)],t.prototype,"circleRadius",void 0),Xb([rs({width:0,color:"#000000"},Jb)],t.prototype,"border",void 0),Xb([os("")],t.prototype,"dashArray",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os(null)],t.prototype,"colorValuePath",void 0),Xb([os(null)],t.prototype,"borderColorValuePath",void 0),Xb([os(null)],t.prototype,"borderWidthValuePath",void 0),Xb([os(null)],t.prototype,"valuePath",void 0),Xb([ls([],nC)],t.prototype,"colorMapping",void 0),Xb([os(!1)],t.prototype,"autofill",void 0),t}(Ls),bC=function(e){function t(t,i,s,n){return e.call(this,t,i,s,n)||this}return Yb(t,e),t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([rs({color:"transparent",width:1},Jb)],t.prototype,"border",void 0),Xb([os(null)],t.prototype,"dashArray",void 0),Xb([os(!1)],t.prototype,"visible",void 0),Xb([os("#FF471A")],t.prototype,"fill",void 0),Xb([os(10)],t.prototype,"height",void 0),Xb([os(10)],t.prototype,"width",void 0),Xb([os(1)],t.prototype,"opacity",void 0),Xb([os(null)],t.prototype,"colorValuePath",void 0),Xb([os(null)],t.prototype,"shapeValuePath",void 0),Xb([os(null)],t.prototype,"imageUrlValuePath",void 0),Xb([os("Balloon")],t.prototype,"shape",void 0),Xb([os("")],t.prototype,"legendText",void 0),Xb([os(new Py(0,0))],t.prototype,"offset",void 0),Xb([os("")],t.prototype,"imageUrl",void 0),Xb([os(null)],t.prototype,"template",void 0),Xb([os([])],t.prototype,"dataSource",void 0),Xb([os()],t.prototype,"query",void 0),Xb([rs({},eC)],t.prototype,"tooltipSettings",void 0),Xb([os(1e3)],t.prototype,"animationDuration",void 0),Xb([os(0)],t.prototype,"animationDelay",void 0),Xb([rs({},aC)],t.prototype,"selectionSettings",void 0),Xb([rs({},lC)],t.prototype,"highlightSettings",void 0),Xb([os(null)],t.prototype,"latitudeValuePath",void 0),Xb([os(null)],t.prototype,"longitudeValuePath",void 0),Xb([ls([],oC)],t.prototype,"initialMarkerSelection",void 0),t}(Ls)),CC=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBaseLayer=!1,t}return Yb(t,e),Xb([os(null)],t.prototype,"shapeData",void 0),Xb([os()],t.prototype,"query",void 0),Xb([rs({},yC)],t.prototype,"shapeSettings",void 0),Xb([os([])],t.prototype,"dataSource",void 0),Xb([os("Layer")],t.prototype,"type",void 0),Xb([os("Geographic")],t.prototype,"geometryType",void 0),Xb([os("Aerial")],t.prototype,"bingMapType",void 0),Xb([os("RoadMap")],t.prototype,"staticMapType",void 0),Xb([os("")],t.prototype,"key",void 0),Xb([os("Geometry")],t.prototype,"layerType",void 0),Xb([os("https://a.tile.openstreetmap.org/level/tileX/tileY.png")],t.prototype,"urlTemplate",void 0),Xb([os(!0)],t.prototype,"visible",void 0),Xb([os("name")],t.prototype,"shapeDataPath",void 0),Xb([os("name")],t.prototype,"shapePropertyPath",void 0),Xb([os(0)],t.prototype,"animationDuration",void 0),Xb([ls([],bC)],t.prototype,"markerSettings",void 0),Xb([rs({},sC)],t.prototype,"markerClusterSettings",void 0),Xb([rs({},vC)],t.prototype,"dataLabelSettings",void 0),Xb([ls([],cC)],t.prototype,"bubbleSettings",void 0),Xb([ls([],hC)],t.prototype,"navigationLineSettings",void 0),Xb([rs({},eC)],t.prototype,"tooltipSettings",void 0),Xb([rs({},aC)],t.prototype,"selectionSettings",void 0),Xb([rs({},lC)],t.prototype,"highlightSettings",void 0),Xb([rs({},fC)],t.prototype,"toggleLegendSettings",void 0),Xb([ls([],rC)],t.prototype,"initialShapeSelection",void 0),t}(Ls),SC=function(){return function(e,t,i,s,n,o,r){void 0===i&&(i=256),void 0===s&&(s=256),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=null),this.x=e,this.y=t,this.top=n,this.left=o,this.height=i,this.width=s,this.src=r}}(),xC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yb(t,e),Xb([os(null)],t.prototype,"background",void 0),Xb([rs({color:"transparent",width:1},Jb)],t.prototype,"border",void 0),t}(Ls),wC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},EC=function(){function e(e){this.maps=e,this.trackElements=[],this.sameMarkerData=[]}return e.prototype.markerRender=function(e,t,i,s){var n=this,o=0,r=0,a=0;this.maps.translateType="marker";var l=this.maps.layersCollection[t];this.markerSVGObject=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement",style:"pointer-events: auto;"});var h=yi("div",{id:this.maps.element.id+"_LayerIndex_"+t+"_Markers_Template_Group",className:this.maps.element.id+"_template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+this.maps.mapAreaRect.y+"px;left:"+this.maps.mapAreaRect.x+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});l.markerSettings.map(function(c,p){var d=c.dataSource;Array.prototype.forEach.call(d,function(u,m){n.maps.markerNullCount=p>0&&0===m?0:n.maps.markerNullCount;var f={cancel:!1,name:kC,fill:c.fill,height:c.height,width:c.width,imageUrl:c.imageUrl,shape:c.shape,template:c.template,data:u,maps:n.maps,marker:c,border:c.border,colorValuePath:c.colorValuePath,shapeValuePath:c.shapeValuePath,imageUrlValuePath:c.imageUrlValuePath};if(f=Qy(f=Zy(f,u),u),n.maps.isBlazor){f.maps,f.marker;var g=wC(f,["maps","marker"]);f=g,c.longitudeValuePath=ae(c.longitudeValuePath)?ae(u.Longitude)?ae(u.longitude)?null:"longitude":"Longitude":c.longitudeValuePath,c.latitudeValuePath=ae(c.latitudeValuePath)?ae(u.Latitude)?ae(u.latitude)?null:"latitude":"Latitude":c.latitudeValuePath}n.maps.trigger("markerRendering",f,function(g){c.colorValuePath!==f.colorValuePath&&(f=Zy(f,u)),c.shapeValuePath!==f.shapeValuePath&&(f=Qy(f,u));var v=ae(c.longitudeValuePath)?ae(u.longitude)?ae(u.Longitude)?0:parseFloat(u.Longitude):parseFloat(u.longitude):Number(Ky(u,c.longitudeValuePath)),y=ae(c.latitudeValuePath)?ae(u.latitude)?ae(u.Latitude)?0:parseFloat(u.Latitude):parseFloat(u.latitude):Number(Ky(u,c.latitudeValuePath));if(n.maps.isBlazor){for(var b={},C=[],S=0,x=0;x<Object.keys(u).length;x++)"latitude"!==Object.keys(u)[x].toLowerCase()&&"longitude"!==Object.keys(u)[x].toLowerCase()&&"name"!==Object.keys(u)[x].toLowerCase()&&"blazortemplateid"!==Object.keys(u)[x].toLowerCase()&&"text"!==Object.keys(u)[x].toLowerCase()&&(C[S]=u[Object.keys(u)[x].toLowerCase()],b.text=C,S++);u.text=b.text}var w=c.offset;if(!f.cancel&&c.visible&&!ae(v)&&!ae(y)){var E=n.maps.element.id+"_LayerIndex_"+t+"_MarkerIndex_"+p+"_dataIndex_"+m,k=n.maps.isTileMap?Oy(new qy(v,y),i,n.maps.tileTranslatePoint,!0):Iy(y,v,i,l,n.maps),T=0!==l.animationDuration||ae(n.maps.zoomModule),L=n.maps.isTileMap?"SubLayer"===l.type&&ae(n.maps.zoomModule)?k=Oy(new qy(v,y),n.maps.tileZoomLevel,n.maps.tileTranslatePoint,!0):new Object:!ae(n.maps.zoomModule)&&n.maps.zoomSettings.zoomFactor>1?ub(n.maps,l,T):db(n.maps,l,T),D="AddMarker"===s?n.maps.scale:L.scale,I="AddMarker"===s?n.maps.translatePoint:L.location;!f.template||isNaN(k.x)||isNaN(k.y)?f.template||isNaN(k.x)||isNaN(k.y)||(o++,tb(f,c,d,m,k,I,E,w,D,n.maps,n.markerSVGObject)):(a++,ib(f,void 0,E,u,p,h,k,D,w,n.maps),n.maps.renderReactTemplates())}r+=isNaN(y)||isNaN(v)?1:0,a+=f.cancel?1:0,o+=f.cancel?1:0,n.maps.markerNullCount=ae(v)||ae(y)?n.maps.markerNullCount+1:n.maps.markerNullCount;var O=d.length-n.maps.markerNullCount;n.markerSVGObject.childElementCount===O-a-r&&"Template"!==s&&(e.appendChild(n.markerSVGObject),l.markerClusterSettings.allowClustering&&(n.maps.svgObject.appendChild(n.markerSVGObject),n.maps.element.appendChild(n.maps.svgObject),"OSM"===l.layerType&&n.maps.zoomSettings.enable?e.appendChild(n.markerSVGObject):Jy(l,n.markerSVGObject,n.maps,t,n.markerSVGObject,e,!0,!1),n.maps.renderReactTemplates())),h.childElementCount===d.length-o-r&&mb(n.maps.element.id+"_Secondary_Element")&&(mb(n.maps.element.id+"_Secondary_Element").appendChild(h),n.maps.checkInitialRender||l.markerClusterSettings.allowClustering&&(Jy(l,h,n.maps,t,n.markerSVGObject,e,!1,!1),n.maps.renderReactTemplates()))})})})},e.prototype.calculateIndividualLayerMarkerZoomLevel=function(e,t,i){var s,n,o,r,a=Math.abs(this.maps.baseMapBounds.latitude.max-this.maps.baseMapBounds.latitude.min),l=Math.abs(this.maps.baseMapBounds.longitude.max-this.maps.baseMapBounds.longitude.min);return s=(s=Math.floor(Math.log(t/a)))>i?i:s,n=(n=Math.floor(Math.log(e/l)))>i?i:n,o=Math.min(s,n),r=Math.min(o,i-1),this.maps.isTileMap||Wb(r,this.maps),r},e.prototype.calculateZoomCenterPositionAndFactor=function(e){if(this.maps.zoomSettings.shouldZoomInitially&&this.maps.markerModule){var t,i,s,n,o=void 0,r=void 0,a=void 0,l=this.maps.mapAreaRect.width,h=this.maps.mapAreaRect.height;if(this.maps.markerZoomedState=this.maps.markerZoomedState?this.maps.markerZoomedState:ae(this.maps.markerZoomFactor)?!this.maps.markerZoomedState:this.maps.markerZoomFactor>1?this.maps.markerZoomedState:!this.maps.markerZoomedState,this.maps.defaultState=this.maps.markerZoomedState?!this.maps.markerZoomedState:this.maps.defaultState,Array.prototype.forEach.call(e,function(e,o){0!==e.markerSettings.length&&Array.prototype.forEach.call(e.markerSettings,function(e,o){var r=e.dataSource;Array.prototype.forEach.call(r,function(e,o){var r=ae(e.latitude)?ae(e.Latitude)?null:parseFloat(e.Latitude):parseFloat(e.latitude),a=ae(e.longitude)?ae(e.Longitude)?null:parseFloat(e.Longitude):parseFloat(e.longitude);t=ae(t)&&0===o?a:t,i=ae(i)&&0===o?r:i,s=ae(s)&&0===o?r:s,n=ae(n)&&0===o?a:n,t>a&&(t=a),s>r&&(s=r),n<a&&(n=a),i<r&&(i=r)})})}),!(ae(s)||ae(t)||ae(n)||ae(i))){r=(s+i)/2,a=(t+n)/2,this.maps.markerCenterLatitude=r,this.maps.markerCenterLongitude=a,(ae(this.maps.markerZoomCenterPoint)||this.maps.markerZoomedState)&&(this.maps.markerZoomCenterPoint={latitude:r,longitude:a});var c=void 0;this.maps.isTileMap||0===this.maps.baseMapRectBounds.min.x?(o=Ub(s,i,t,n,l,h,this.maps),this.maps.isTileMap?c=ae(this.maps.markerZoomFactor)?o:ae(this.maps.mapScaleValue)?o:this.maps.mapScaleValue>1&&1!==this.maps.markerZoomFactor?this.maps.mapScaleValue:o:(c=ae(this.maps.mapScaleValue)?o:1!==Math.floor(this.maps.scale)&&this.maps.mapScaleValue!==o&&ae(this.maps.shouldZoomCurrentFactor)?this.maps.mapScaleValue:o)!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor&&1!==this.maps.mapScaleValue||this.maps.enablePersistence||(c=o)):(o=this.calculateIndividualLayerMarkerZoomLevel(l,h,10),c=ae(this.maps.mapScaleValue)?o:this.maps.mapScaleValue!==o?this.maps.mapScaleValue:o),this.maps.markerZoomFactor=c}}else this.maps.markerZoomedState=!1,this.maps.markerZoomFactor>1&&(this.maps.markerCenterLatitude=null,this.maps.markerCenterLongitude=null,this.maps.markerZoomFactor=1,this.maps.enablePersistence||(this.maps.mapScaleValue=1)),this.maps.isTileMap&&!this.maps.enablePersistence&&this.maps.mapScaleValue<=1&&(this.maps.tileZoomLevel=0===this.maps.mapScaleValue?1:this.maps.mapScaleValue,1===this.maps.mapScaleValue&&1===this.maps.markerZoomFactor&&(this.maps.tileTranslatePoint.x=0,this.maps.tileTranslatePoint.y=0))},e.prototype.markerClick=function(e){var t=e.target.id;if(!(-1===t.indexOf("_LayerIndex_")||t.indexOf("_cluster_")>0)){var i=this.getMarker(t);if(!ae(i)){var s={cancel:!1,name:LC,data:i.data,maps:this.maps,marker:i.marker,target:t,x:e.clientX,y:e.clientY,latitude:i.data.latitude||i.data.Latitude,longitude:i.data.longitude||i.data.Longitude,value:i.data.name};if(this.maps.isBlazor){s.maps,s.marker;s=wC(s,["maps","marker"])}this.maps.trigger(LC,s)}}},e.prototype.markerClusterClick=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")&&-1!==t.indexOf("_cluster_")){var i=this.getMarker(t);if(!ae(i)){i.clusterCollection.length>0&&this.maps.markerClusterExpand&&(vb(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&cb(this.maps.element.id+"_mapsTooltip"),this.sameMarkerData.length>0&&!this.maps.markerClusterExpandCheck?(this.maps.markerClusterExpandCheck=!0,$y(this.sameMarkerData,this.maps,this.markerSVGObject)):(this.sameMarkerData=i.clusterCollection,this.maps.markerClusterExpandCheck=!1,eb(this.sameMarkerData,this.maps,this.markerSVGObject,!0)));var s={cancel:!1,name:DC,data:i,maps:this.maps,target:t,x:e.clientX,y:e.clientY,latitude:i.data.latitude||i.data.Latitude,longitude:i.data.longitude||i.data.Longitude,markerClusterCollection:i.markCollection};if(this.maps.isBlazor){s.maps,s.latitude,s.longitude;s=wC(s,["maps","latitude","longitude"])}this.maps.trigger(DC,s)}}},e.prototype.getMarker=function(e){var t,i,s=e.split("_LayerIndex_"),n=parseInt(s[1].split("_")[0],10),o=this.maps.layers[n],r=[],a=[];if(this.maps.markerClusterExpand=o.markerClusterSettings.allowClusterExpand,e.indexOf("_MarkerIndex_")>-1){var l=parseInt(s[1].split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(s[1].split("_dataIndex_")[1].split("_")[0],10);if(i=o.markerSettings[l],!isNaN(l)){t=i.dataSource[h];var c=[];if(!i.template&&e.indexOf("_cluster_")>-1&&this.maps.layers[n].markerClusterSettings.allowClusterExpand&&Array.prototype.forEach.call(i.dataSource,function(e,i){e.latitude===t.latitude&&e.longitude===t.longitude&&c.push({data:t,index:i})}),e.indexOf("_cluster_")>-1){var p=document.getElementById(e.indexOf("_datalabel_")>-1?e.split("_datalabel_")[0]:e).innerHTML.split(",").map(Number);c=[];for(var d=0,u=p;d<u.length;d++){var m=u[d];c.push({data:i.dataSource[m],index:m}),this.maps.isBlazor&&(i.dataSource[m].text=""),r.push(i.dataSource[m])}!1,a.push({data:c,layerIndex:n,markerIndex:l,dataIndex:h,targetClusterIndex:+(e.split("_cluster_")[1].indexOf("_datalabel_")>-1?e.split("_cluster_")[1].split("_datalabel_")[0]:e.split("_cluster_")[1]),isClusterSame:!1})}return{marker:i,data:t,clusterCollection:a,markCollection:r}}}return null},e.prototype.markerMove=function(e){var t=e.target.id;if(!(-1===t.indexOf("_LayerIndex_")||t.indexOf("_cluster_")>0)){var i=this.getMarker(t);if(!ae(i)){var s={cancel:!1,name:IC,data:i.data,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){s.maps;s=wC(s,["maps"])}this.maps.trigger(IC,s)}}},e.prototype.markerClusterMouseMove=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")&&-1!==t.indexOf("_cluster_")){var i=this.getMarker(t);if(this.maps.markerClusterExpand&&e.target.setAttribute("style","cursor: pointer"),!ae(i)){var s={cancel:!1,name:OC,data:i.data,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){s.maps;s=wC(s,["maps"])}this.maps.trigger(OC,s)}}},e.prototype.getModuleName=function(){return"Marker"},e.prototype.destroy=function(e){},e}(),kC="markerRendering",TC="markerClusterRendering",LC="markerClick",DC="markerClusterClick",IC="markerMouseMove",OC="markerClusterMouseMove",AC="animationComplete",MC="itemSelection",PC=function(){function e(e){this.maps=e}return e.prototype.getBingMap=function(e,t,i,s,n,o){for(var r,a="",l=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));l>0;l--){var h=0,c=1<<l-1;0!=(e.x&c)&&h++,0!=(e.y&c)&&(h+=2),a=a+""+h}return r=o[Math.min(parseInt(a.substr(a.length-1,1),10),o.length)],(n=n.replace("{quadkey}",a).replace("{subdomain}",r))+"&mkt="+s+"&ur=IN&Key="+t},e}(),NC=function(){function e(e){this.maps=e}return e.prototype.getShapeColorMapping=function(e,t,i){var s=e.colorValuePath?e.colorValuePath:e.valuePath,n=ae(s)?t[s]:s.indexOf(".")>-1?Ky(t,s):t[s],o=Number(n),r=this.getColorByValue(e.colorMapping,o,n);return ae(r)?i:r},e.prototype.getColorByValue=function(e,t,i){if(isNaN(t)&&ae(i))return null;for(var s,n="",o=0,r=e;o<r.length;o++){var a=r[o];(!ae(a.from)&&!ae(a.to)&&t>=a.from&&t<=a.to||a.value===i)&&(n="[object Array]"===Object.prototype.toString.call(a.color)?ae(a.value)?this.getColor(a,t):a.color[0]:a.color),(t>=a.from&&t<=a.to||a.value===i)&&!ae(a.minOpacity)&&!ae(a.maxOpacity)&&n&&(s=this.deSaturationColor(a,n,t,i)),(""===n||ae(n))&&ae(a.from)&&ae(a.to)&&ae(a.minOpacity)&&ae(a.maxOpacity)&&ae(a.value)&&(n="[object Array]"===Object.prototype.toString.call(a.color)?a.color[0]:a.color)}return{fill:n||(e.length?null:i),opacity:s}},e.prototype.deSaturationColor=function(e,t,i,s){var n=1;(i>=e.from&&i<=e.to||e.value===s)&&(n=(isNaN(i)?e.from/(e.to-e.from):(i-e.from)/(e.to-e.from))*(e.maxOpacity-e.minOpacity)+e.minOpacity);return n},e.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.getColor=function(e,t){var i,s="";return Number(t)===e.from?s=e.color[0]:Number(t)===e.to?s=e.color[e.color.length-1]:(i=this.getGradientColor(Number(t),e),s=this.rgbToHex(i.r,i.g,i.b)),s},e.prototype.getGradientColor=function(e,t){var i,s,n=t.from,o=t.to,r=0,a=o-n;if(r=(e-n)/a,t.color.length<=2)i="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),s="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{i="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),s="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);for(var l=a/(t.color.length-1),h=t.color.length-1,c=[],p={},d=1;d<h;d++)p={b:n+d*l,color:t.color[d]},c.push(p);for(var u=0;u<c.length;u++)n<=e&&e<=c[u].b&&0===u?(s="#"===c[u].color.charAt(0)?c[u].color:this._colorNameToHex(c[u].color),r=e<c[u].b?1-Math.abs((e-c[u].b)/l):(e-c[u].b)/l):c[u].b<=e&&e<=o&&u===c.length-1&&(i="#"===c[u].color.charAt(0)?c[u].color:this._colorNameToHex(c[u].color),r=e<c[u].b?1-Math.abs((e-c[u].b)/l):(e-c[u].b)/l),u!==c.length-1&&u<c.length&&c[u].b<=e&&e<=c[u+1].b&&(i="#"===c[u].color.charAt(0)?c[u].color:this._colorNameToHex(c[u].color),s="#"===c[u+1].color.charAt(0)?c[u+1].color:this._colorNameToHex(c[u+1].color),r=Math.abs(e-c[u+1].b)/l)}return this.getPercentageColor(r,i,s)},e.prototype.getPercentageColor=function(e,t,i){var s=i.split("#")[1],n=t.split("#")[1],o=this.getPercentage(e,parseInt(n.substr(0,2),16),parseInt(s.substr(0,2),16)),r=this.getPercentage(e,parseInt(n.substr(2,2),16),parseInt(s.substr(2,2),16)),a=this.getPercentage(e,parseInt(n.substr(4,2),16),parseInt(s.substr(4,2),16));return new jy(o,r,a)},e.prototype.getPercentage=function(e,t,i){var s=i-t;return Math.round(t+s*e)},e.prototype._colorNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"===Object.prototype.toString.call(e)?e:void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:e},e}(),RC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},BC=function(){function e(e){this.isMapCoordinates=!0,this.horizontalPan=!1,this.horizontalPanXCount=0,this.mapObject=e,this.ajaxModule=new ht,this.ajaxResponse=[]}return e.prototype.measureLayerPanel=function(){var e=this,t=this.mapObject.layersCollection,i=this.mapObject.mapAreaRect,s=mb(this.mapObject.element.id+"_Secondary_Element");if(this.mapObject.isTileMap&&s){this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:i.width,height:i.height});var n=yi("div",{id:this.mapObject.element.id+"_Tile_SVG_Parent",styles:"position: absolute; height: "+i.height+"px; width: "+i.width+"px;"});n.appendChild(this.tileSvgObject),s.appendChild(n)}if(this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType){this.clipRectElement=this.mapObject.renderer.drawClipPath(new Vy(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:(i.width-640)/2,y:0,width:640,height:i.height}))}else this.clipRectElement=this.mapObject.renderer.drawClipPath(new Vy(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:i.x,y:this.mapObject.isTileMap?0:i.y,width:i.width,height:i.height<0?0:i.height}));this.layerGroup.appendChild(this.clipRectElement),this.mapObject.baseMapBounds=null,this.mapObject.baseMapRectBounds=null,this.mapObject.baseSize=null,Array.prototype.forEach.call(t,function(t,i){e.currentLayer=t,e.processLayers(t,i)})},e.prototype.renderTileLayer=function(e,t,i,s){e.currentFactor=e.calculateFactor(t),e.mapObject.defaultState=!(1!==e.mapObject.zoomSettings.zoomFactor&&!ae(e.mapObject.tileZoomLevel)&&1!==e.mapObject.tileZoomLevel),ae(e.mapObject.previousCenterLatitude)&&ae(e.mapObject.previousCenterLongitude)?(e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.previousCenterLatitude!==e.mapObject.centerPosition.latitude&&e.mapObject.previousCenterLongitude!==e.mapObject.centerPosition.longitude?(e.mapObject.centerPositionChanged=!0,e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.centerPositionChanged=!1;var n=new Py(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude),o=n;this.mapObject.isTileMap&&e.mapObject.markerModule&&e.mapObject.zoomSettings.enable&&(e.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection),ae(this.mapObject.markerCenterLatitude)||ae(this.mapObject.markerCenterLongitude)||(o=new Py(e.mapObject.markerCenterLongitude,e.mapObject.markerCenterLatitude))),n=!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.centerPosition.longitude&&e.mapObject.centerPosition.latitude&&!e.mapObject.zoomPersistence&&e.mapObject.defaultState?new Py(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude):e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.markerZoomedState&&!e.mapObject.zoomPersistence&&!ae(e.mapObject.markerZoomCenterPoint)?new Py(e.mapObject.markerZoomCenterPoint.longitude,e.mapObject.markerZoomCenterPoint.latitude):{x:null,y:null};var r=e.mapObject.zoomSettings.shouldZoomInitially?ae(e.mapObject.markerZoomFactor)?1:e.mapObject.markerZoomFactor:e.mapObject.zoomSettings.zoomFactor;if(r=e.mapObject.enablePersistence?ae(e.mapObject.mapScaleValue)?ae(e.mapObject.markerZoomFactor)?e.mapObject.zoomSettings.zoomFactor:e.mapObject.markerZoomFactor:e.mapObject.mapScaleValue:r,r=e.mapObject.zoomSettings.enable?r:e.mapObject.zoomSettings.zoomFactor,ae(e.mapObject.tileZoomLevel)?(e.mapObject.tileZoomLevel=r,e.mapObject.previousZoomFactor=r):this.mapObject.isReset&&1===e.mapObject.tileZoomLevel&&!e.mapObject.zoomSettings.shouldZoomInitially?e.mapObject.tileZoomLevel=e.mapObject.tileZoomLevel:(1!==e.mapObject.zoomSettings.zoomFactor||e.mapObject.zoomSettings.shouldZoomInitially)&&(e.mapObject.tileZoomLevel=e.mapObject.defaultState&&e.mapObject.zoomSettings.enable?e.mapObject.tileZoomLevel:e.mapObject.zoomSettings.shouldZoomInitially||e.mapObject.centerPositionChanged?r:e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor?e.mapObject.zoomSettings.zoomFactor:e.mapObject.tileZoomLevel,!ae(e.mapObject.tileTranslatePoint)&&(e.mapObject.markerZoomFactor!==e.mapObject.mapScaleValue||ae(e.mapObject.markerZoomFactor)&&ae(e.mapObject.mapScaleValue))&&(e.mapObject.zoomSettings.zoomFactor<=1||e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor)&&(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)),r<=1&&!ae(e.mapObject.height)&&!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.tileZoomLevel===e.mapObject.tileZoomScale&&this.mapObject.initialCheck&&function(e){e.tileZoomScale=e.tileZoomLevel=Math.floor(e.availableSize.height/512)+1;var t="GoogleStaticMap"!==e.layers[e.baseLayerIndex].layerType?20:0,i=256*Math.pow(2,e.tileZoomLevel);e.tileTranslatePoint.x=e.availableSize.width/2-i/2,e.tileTranslatePoint.y=e.availableSize.height/2-i/2+t,e.previousTileWidth=e.availableSize.width,e.previousTileHeight=e.availableSize.height}(this.mapObject),ae(e.mapObject.centerLatOfGivenLocation)||ae(e.mapObject.centerLongOfGivenLocation)||!e.mapObject.zoomNotApplied||(o.y=e.mapObject.centerLatOfGivenLocation,o.x=e.mapObject.centerLongOfGivenLocation,e.mapObject.tileZoomLevel=e.mapObject.mapScaleValue=e.mapObject.scaleOfGivenLocation),e.mapObject.tileTranslatePoint=e.panTileMap(e.mapObject.availableSize.width,e.mapObject.availableSize.height,o),this.mapObject.zoomSettings.resetToInitial&&this.mapObject.initialCheck&&!ae(e.mapObject.height)&&this.mapObject.availableSize.height>512){this.mapObject.applyZoomReset=!0,this.mapObject.initialZoomLevel=Math.floor(this.mapObject.availableSize.height/512)+1;var a="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?20:0,l=256*Math.pow(2,this.mapObject.initialZoomLevel);this.mapObject.initialTileTranslate.x=this.mapObject.availableSize.width/2-l/2,this.mapObject.initialTileTranslate.y=this.mapObject.availableSize.height/2-l/2+a}e.generateTiles(e.mapObject.tileZoomLevel,e.mapObject.tileTranslatePoint,null,s),ae(e.mapObject.previousZoomFactor)||e.mapObject.previousZoomFactor===e.mapObject.zoomSettings.zoomFactor||(e.mapObject.previousZoomFactor=e.mapObject.zoomSettings.zoomFactor),e.mapObject.navigationLineModule&&e.layerObject.appendChild(e.mapObject.navigationLineModule.renderNavigation(e.currentLayer,e.mapObject.tileZoomLevel,i)),e.mapObject.markerModule&&e.mapObject.markerModule.markerRender(e.layerObject,i,e.mapObject.tileZoomLevel,null),e.translateLayerElements(e.layerObject,i),e.layerGroup.appendChild(e.layerObject)},e.prototype.processLayers=function(e,t){var i=this;if(this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+t}),!this.mapObject.enablePersistence){var s=this.mapObject.getModuleName()+this.mapObject.element.id;-1===navigator.userAgent.indexOf("Edge")&&!ae(window.localStorage)&&window.localStorage.getItem(s)&&window.localStorage.removeItem(s)}var n={cancel:!1,name:"layerRendering",index:t,layer:e,maps:this.mapObject,visible:e.visible};if(this.mapObject.isBlazor){n.maps,n.layer;var o=RC(n,["maps","layer"]);n=o}this.mapObject.trigger("layerRendering",n,function(s){if(!n.cancel&&n.visible)if("Geometry"!==e.layerType){if("Bing"!==e.layerType||i.bing)i.renderTileLayer(i,e,t);else if(e.key&&e.key.length>1){var o=i,r=new PC(i.mapObject),a="AerialWithLabel"===e.bingMapType?"AerialWithLabelsOnDemand":e.bingMapType,l=new ht({url:"https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?output=json&include=ImageryProviders&urischeme=https&key="+e.key});l.onSuccess=function(s){var n=JSON.parse(s).resourceSets[0].resources[0],a=n.imageUrl,l=n.imageUrlSubdomains,h=n.zoomMax,c=document.getElementById(i.mapObject.element.id+"_Markers_Group");null!=a&&a!==r.imageUrl&&(r.imageUrl=a),null!=l&&l!==r.subDomains&&(r.subDomains=l),null!=h&&h!==r.maxZoom&&(r.maxZoom=h),o.mapObject.bingMap=r,i.mapObject.isBlazor&&(ae(c)||cb(i.mapObject.element.id+"_Markers_Group")),o.renderTileLayer(o,e,t,r),i.mapObject.arrangeTemplate()},l.send()}}else if(!(ae(e.shapeData)||ae(e.shapeData.geometries)&&ae(e.shapeData.features))){var h=!ae(e.shapeData.geometries)&&e.shapeData.geometries.length>0?e.shapeData.geometries:e.shapeData.features;e.layerData=[];var c=e.shapeData.bbox;!ae(c)&&e.isBaseLayer?i.mapObject.baseMapBounds=new Ry({min:c[0][1],max:c[1][1]},{min:c[0][0],max:c[1][0]}):ae(i.mapObject.baseMapBounds)&&!lb(h)&&i.calculateRectBounds(h),i.calculatePathCollection(t,h)}}),this.mapObject.isTileMap?this.tileSvgObject&&(this.tileSvgObject.appendChild(this.layerGroup),this.mapObject.baseMapBounds=null):this.mapObject.svgObject.appendChild(this.layerGroup)},e.prototype.bubbleCalculation=function(e,t){if(null!=e.dataSource&&null!=e)for(var i=e.dataSource,s=0;s<i.length;s++){var n=ae(e.valuePath)?parseFloat(e.dataSource[s][e.valuePath]):e.valuePath.indexOf(".")>-1?Number(Ky(e.dataSource[s],e.valuePath)):parseFloat(e.dataSource[s][e.valuePath]);0!==s?n>t.max?t.max=n:n<t.min&&(t.min=n):t.max=t.min=n}},e.prototype.calculatePathCollection=function(e,t){var i=this;this.groupElements=[],lb(t)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null;var s=this.currentLayer.shapeSettings;this.currentLayer.bubbleSettings;Array.prototype.forEach.call(t,function(e,t){if(!ae(e.geometry)||!ae(e.coordinates)){var s=ae(e.geometry)?e.type:e.geometry.type,n=ae(e.geometry)?e.coordinates:e.geometry.coordinates,o=e.geometry,r=e.properties;"LineString"!==s&&i.generatePoints(s,n,o,r)}}),this.currentLayer.rectBounds=this.rectBounds,ae(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds);var n=s.palette.length>1?s.palette:(this.mapObject.theme,["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]),o=yi("div",{id:this.mapObject.element.id+"_LayerIndex_"+e+"_Label_Template_Group",className:this.mapObject.element.id+"_template",styles:"pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;"});if(0!==this.currentLayer.layerData.length)for(var r=function(r){var l,h,c,p,d,u,m=void 0,f={color:s.border.color,width:s.border.width},g=a.currentLayer.layerData[r],v="",y="",b=s.autofill?n[r%n.length]:s.fill;null===s.colorValuePath||ae(g.property)||(null!==(m=ob(a.currentLayer.dataSource,g.property,a.currentLayer.shapeDataPath,a.currentLayer.shapePropertyPath,a.currentLayer))&&0===s.colorMapping.length?b=a.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?Ky(a.currentLayer.dataSource[m],s.colorValuePath):a.currentLayer.dataSource[m][s.colorValuePath]:g.property[s.colorValuePath]&&0===a.currentLayer.dataSource.length&&0===s.colorMapping.length&&(b=a.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?Ky(g.property,s.colorValuePath):g.property[s.colorValuePath]),b=ae(b)?s.fill:b);var C=a.mapObject.element.id+"_LayerIndex_"+e+"_shapeIndex_"+r+"_dataIndex_"+m;if(d=a.getShapeColorMapping(a.currentLayer,g.property,b),b="[object Object]"!==Object.prototype.toString.call(d)||ae(d.fill)?b:d.fill,a.currentLayer.shapeSettings.borderColorValuePath||a.currentLayer.shapeSettings.borderWidthValuePath){a.currentLayer.shapeSettings.borderColorValuePath,a.currentLayer.shapeSettings.borderWidthValuePath;null!==(m=ob(a.currentLayer.dataSource,g.property,a.currentLayer.shapeDataPath,a.currentLayer.shapePropertyPath,a.currentLayer))&&(a.currentLayer.dataSource[m][s.borderColorValuePath]&&(f.color=a.currentLayer.dataSource[m][s.borderColorValuePath]),a.currentLayer.dataSource[m][s.borderWidthValuePath]&&(f.width=a.currentLayer.dataSource[m][s.borderWidthValuePath]))}u="[object Object]"!==Object.prototype.toString.call(d)||ae(d.opacity)?s.opacity:d.opacity;var S={cancel:!1,name:"shapeRendering",index:r,data:a.currentLayer.dataSource?a.currentLayer.dataSource[m]:null,maps:a.mapObject,shape:s,fill:b,border:{width:f.width,color:f.color}};if(a.mapObject.isBlazor){S.maps;S=RC(S,["maps"])}var x=function(a){var d,m=ae(g._isMultiPolygon)?ae(g.type)?g[0].type:g.type:"MultiPolygon";if(m="Polygon"===m||"MultiPolygon"===m?"Polygon":m,a.cancel?(a.fill=b,a.border.color=s.border.color,a.border.width=s.border.width,i.mapObject.layers[e].shapeSettings.border=s.border):(a.fill="#A6A6A6"===a.fill?a.shape.fill:a.fill,a.border.color="#000000"===a.border.color?a.shape.border.color:a.border.color,a.border.width=0===a.border.width?a.shape.border.width:a.border.width,ae(s.borderColorValuePath)?i.mapObject.layers[e].shapeSettings.border.color=a.border.color:ae(s.borderWidthValuePath)&&(i.mapObject.layers[e].shapeSettings.border.width=a.border.width)),i.groupElements.length<1)p=i.mapObject.renderer.createGroup({id:i.mapObject.element.id+"_LayerIndex_"+e+"_"+m+"_Group",transform:""}),i.groupElements.push(p);else for(var f=0;f<i.groupElements.length;f++){var S=i.groupElements[f];if(S.id.indexOf(m)>-1){p=S;break}if(f>=i.groupElements.length-1){p=i.mapObject.renderer.createGroup({id:i.mapObject.element.id+"_LayerIndex_"+e+"_"+m+"_Group"}),i.groupElements.push(p);break}}switch(m){case"Polygon":g._isMultiPolygon?v=i.generateMultiPolygonPath(g):(v+="M"+g[0].point.x+" "+g[0].point.y,g.map(function(e){v+=" L "+e.point.x+" "+e.point.y})),(v+=" z ").length>3&&(l=new Fy(C,a.fill,a.border.width,a.border.color,u,s.dashArray,v),d=i.mapObject.renderer.drawPath(l));break;case"LineString":g.map(function(e){y+=e.point.x+" , "+e.point.y+" "}),h=new _y(C,y,a.fill,a.border.width,a.border.color,u,s.dashArray),d=i.mapObject.renderer.drawPolyline(h);break;case"Point":var x=g.point;c=new zy(C,a.fill,a.border,u,x.x,x.y,s.circleRadius,null),d=i.mapObject.renderer.drawCircle(c);break;case"Path":v=g.point,l=new Fy(C,a.fill,a.border.width,a.border.color,u,s.dashArray,v),d=i.mapObject.renderer.drawPath(l)}if(!ae(d)){for(var w="[object Array]"===Object.prototype.toString.call(i.currentLayer.shapePropertyPath)?i.currentLayer.shapePropertyPath:[i.currentLayer.shapePropertyPath],E=void 0,k=0;k<w.length;k++)if(!ae(g.property)){E=w[k];break}if(d.setAttribute("aria-label",ae(g.property)?"":g.property[E]),d.setAttribute("tabindex",(i.mapObject.tabIndex+r+2).toString()),sb(i.mapObject.selectedElementId,i.mapObject.shapeSelectionClass,d,"ShapeselectionMapStyle"),i.mapObject.toggledShapeElementId)for(k=0;k<i.mapObject.toggledShapeElementId.length;k++){var T=i.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings?i.currentLayer.shapeSettings:i.mapObject.legendSettings.toggleLegendSettings;i.mapObject.toggledShapeElementId[k]===d.id&&(d.setAttribute("fill",T.fill),d.setAttribute("stroke",T.border.color),d.setAttribute("opacity",T.opacity.toString()),d.setAttribute("stroke-width",T.border.width.toString()))}p.appendChild(d)}r===i.currentLayer.layerData.length-1&&i.layerFeatures(e,n,t,o)};x.bind(a),a.mapObject.trigger("shapeRendering",S,x)},a=this,l=0;l<this.currentLayer.layerData.length;l++)r(l);else this.layerFeatures(e,n,t,o)},e.prototype.layerFeatures=function(e,t,i,s){var n,o=this;if(this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var r,a=this.currentLayer.bubbleSettings.length,l=function(i){r=h.currentLayer.bubbleSettings[i],n=h.mapObject.renderer.createGroup({id:h.mapObject.element.id+"_LayerIndex_"+e+"_bubble_Group_"+i});var s={min:0,max:0};h.bubbleCalculation(r,s),r.dataSource.map(function(a,l){o.renderBubble(o.currentLayer,a,t[l%t.length],s,i,l,n,e,r)}),h.groupElements.push(n)},h=this,c=0;c<a;c++)l(c);this.mapObject.markerModule&&!this.mapObject.isTileMap&&this.mapObject.zoomSettings.enable&&this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);var p=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+e+"_dataLableIndex_Group",style:"pointer-events: none;"});if(this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible){var d=[];i.map(function(t,i){o.renderLabel(o.currentLayer,e,t,p,i,s,d)}),this.groupElements.push(p)}this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,e)),this.groupElements.map(function(e){o.layerObject.appendChild(e)}),this.mapObject.markerModule&&this.mapObject.markerModule.markerRender(this.layerObject,e,this.mapObject.isTileMap?Math.floor(this.currentFactor):this.currentFactor,null),this.translateLayerElements(this.layerObject,e),this.layerGroup.appendChild(this.layerObject)},e.prototype.renderLabel=function(e,t,i,s,n,o,r){this.mapObject.dataLabelModule.renderLabel(e,t,i,e.layerData,s,o,n,r)},e.prototype.generateMultiPolygonPath=function(e){for(var t="",i=0;i<e.length;i++)t+="M"+e[i][0].point.x+" "+e[i][0].point.y,e[i].map(function(e){t+=" L "+e.point.x+" "+e.point.y});return t},e.prototype.renderBubble=function(e,t,i,s,n,o,r,a,l){if(ae(this.mapObject.bubbleModule)||!l.visible)return null;i=l.fill?l.fill:i,this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+a+"_BubbleIndex_"+n+"_dataIndex_"+o,this.mapObject.bubbleModule.renderBubble(l,t,i,s,n,o,a,e,r,this.mapObject.bubbleModule.id)},e.prototype.getShapeColorMapping=function(e,t,i){if(i=i||e.shapeSettings.fill,0===e.shapeSettings.colorMapping.length&&ae(e.dataSource))return i;var s=ob(e.dataSource,t,e.shapeDataPath,e.shapePropertyPath),n=new NC(this.mapObject);return ae(e.dataSource[s])?i:n.getShapeColorMapping(e.shapeSettings,e.dataSource[s],i)},e.prototype.generatePoints=function(e,t,i,s){var n,o,r=this,a=[];switch(e.toLowerCase()){case"polygon":(a=this.calculatePolygonBox(t[0],i,s)).length>0&&(a.property=s,a.type=e,a._isMultiPolygon=!1,this.currentLayer.layerData.push(a));break;case"multipolygon":for(var l=[],h=0;h<t.length;h++)(a=this.calculatePolygonBox(t[h][0],i,s)).length>0&&l.push(a);l.property=s,l.type=e,l._isMultiPolygon=!0,this.currentLayer.layerData.push(l);break;case"linestring":t.map(function(e,t){n=e[1],o=e[0];var i=Iy(n,o,r.currentFactor,r.currentLayer,r.mapObject);a.push({point:i,lat:n,lng:o})}),a.property=s,a.type=e,this.currentLayer.layerData.push(a);break;case"point":var c=!1;if(t.map(function(t,i){if("[object Array]"===Object.prototype.toString.call(t)){n=t[1],o=t[0],c=!0;var a=Iy(n,o,r.currentFactor,r.currentLayer,r.mapObject);r.currentLayer.layerData.push({point:a,type:e,lat:n,lng:o,property:s})}}),!c){n=t[1],o=t[0];var p=Iy(n,o,this.currentFactor,this.currentLayer,this.mapObject);this.currentLayer.layerData.push({point:p,type:e,lat:n,lng:o,property:s})}break;case"path":this.currentLayer.layerData.push({point:i.d,type:e,property:s})}},e.prototype.calculateFactor=function(e){var t,i,s,n=1,o=this.mapObject.baseMapBounds,r=new wy(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5);if(o){var a=Iy(o.latitude.min,o.longitude.min,null,e,this.mapObject),l=Iy(o.latitude.max,o.longitude.max,null,e,this.mapObject);i=l.y-a.y,s=l.x-a.x}else i=s=500;return t=i<r.height?parseFloat(Math.abs(100*Number(r.height/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:r.height/i,n=s<r.width?parseFloat(Math.abs(100*Number(r.width/Number(s.toString()+"e+1"))).toString().split(".")[0])/10:r.width/s,Math.min(n,t)},e.prototype.translateLayerElements=function(e,t){var i;if(this.mapObject.translateType="layer",ae(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!ae(this.mapObject.scale))for(var s=0;s<e.childElementCount;s++)if(!((i=e.childNodes[s]).id.indexOf("_Markers_Group")>-1||i.id.indexOf("_bubble_Group")>-1||i.id.indexOf("_dataLableIndex_Group")>-1||i.id.indexOf("_line_Group")>-1)){c="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ";i.setAttribute("transform",c)}}else{var n=this.currentLayer.animationDuration,o=0!==n||ae(this.mapObject.zoomModule);this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint;var r=void 0;r=this.mapObject.zoomSettings.zoomFactor>1&&!ae(this.mapObject.zoomModule)?ub(this.mapObject,this.currentLayer,o):db(this.mapObject,this.currentLayer,o);var a=this.mapObject.previousScale=r.scale,l=this.mapObject.previousPoint=r.location;this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=l,this.mapObject.baseScale=this.mapObject.scale=a;for(var h=0;h<e.childElementCount;h++)if(!((i=e.childNodes[h]).id.indexOf("_Markers_Group")>-1||i.id.indexOf("_bubble_Group")>-1||i.id.indexOf("_dataLableIndex_Group")>-1)){var c="scale( "+a+" ) translate( "+l.x+" "+l.y+" ) ";i.setAttribute("transform",c),n>0&&!ae(this.mapObject.zoomModule)&&(r=this.mapObject.zoomSettings.zoomFactor>1?ub(this.mapObject,this.currentLayer):db(this.mapObject,this.currentLayer),this.mapObject.scale=r.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=r.location)}}},e.prototype.calculateRectBounds=function(e){var t=this;Array.prototype.forEach.call(e,function(e,i){if(!ae(e.geometry)||!ae(e.coordinates)){var s=ae(e.geometry)?e.type:e.geometry.type,n=ae(e.geometry)?e.coordinates:e.geometry.coordinates;switch(s.toLowerCase()){case"polygon":t.calculateRectBox(n[0]);break;case"multipolygon":n.map(function(e,i){t.calculateRectBox(e[0])})}}})},e.prototype.calculatePolygonBox=function(e,t,i){var s=this,n=[],o=this.mapObject.baseMapBounds;return e.map(function(e,t){var i=e[1],r=e[0];if(r>=o.longitude.min&&r<=o.longitude.max&&i>=o.latitude.min&&i<=o.latitude.max){var a=Iy(i,r,s.currentFactor,s.currentLayer,s.mapObject);ae(s.rectBounds)?s.rectBounds={min:{x:a.x,y:a.y},max:{x:a.x,y:a.y}}:(s.rectBounds.min.x=Math.min(s.rectBounds.min.x,a.x),s.rectBounds.min.y=Math.min(s.rectBounds.min.y,a.y),s.rectBounds.max.x=Math.max(s.rectBounds.max.x,a.x),s.rectBounds.max.y=Math.max(s.rectBounds.max.y,a.y)),n.push({point:a,lat:i,lng:r})}}),n},e.prototype.calculateRectBox=function(e){var t=this;Array.prototype.forEach.call(e,function(e){ae(t.mapObject.baseMapBounds)?t.mapObject.baseMapBounds=new Ry({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(t.mapObject.baseMapBounds.latitude.min=Math.min(t.mapObject.baseMapBounds.latitude.min,e[1]),t.mapObject.baseMapBounds.latitude.max=Math.max(t.mapObject.baseMapBounds.latitude.max,e[1]),t.mapObject.baseMapBounds.longitude.min=Math.min(t.mapObject.baseMapBounds.longitude.min,e[0]),t.mapObject.baseMapBounds.longitude.max=Math.max(t.mapObject.baseMapBounds.longitude.max,e[0]))})},e.prototype.generateTiles=function(e,t,i,s,n){var o,r,a=this.mapObject.locale,l=this.mapObject.availableSize;this.tiles=[],o=r=Math.pow(2,e);var h=0,c=0;t.x+256*o<l.width&&(h=t.x>0?Math.ceil(t.x/256):0,c=t.x+256*o<l.width?Math.ceil((l.width-(t.x+256*o))/256):0),o+=h+c,"Pan"===i?(o=this.horizontalPanXCount>=o?this.horizontalPanXCount:o,this.horizontalPan=!1):(this.horizontalPanXCount=o,this.horizontalPan=!0);var p=this.mapObject.layers[this.mapObject.baseLayerIndex];this.urlTemplate=p.urlTemplate;var d=Math.min(r,(-t.y+l.height)/256+1),u=Math.min(o,(-t.x+l.width+256*c)/256+1),m=-(t.x+256*h+256)/256,f=-(t.y+256)/256;s=s||this.bing||this.mapObject.bingMap;for(var g=Math.round(m);g<Math.round(u);g++)for(var v=Math.round(f);v<Math.round(d);v++){var y=256*g+t.x,b=256*v+t.y;if(y>-256&&y<=l.width&&b>-256&&b<l.height&&v>=0){var C=g;g<0&&(C=C%r+r);var S=new SC(C%r,v);if(S.left=y,S.top=b,"Bing"===p.layerType){var x=p.key;S.src=s.getBingMap(S,x,p.bingMapType,a,s.imageUrl,s.subDomains)}else S.src=this.urlTemplate.replace("level",e.toString()).replace("tileX",S.x.toString()).replace("tileY",S.y.toString());this.tiles.push(S)}}ae(i)||(i.indexOf("wheel")>1?(this.animateToZoomX=this.mapObject.availableSize.width/2-n.x-10,this.animateToZoomY=-n.y):(this.animateToZoomX=-10,this.animateToZoomY=10-(this.mapObject.availableSize.height/2+11.5)));for(var w=re([],this.tiles,[],!0),E=0,k=this.mapObject.layers;E<k.length;E++){var T=k[E];if("SubLayer"===T.type&&T.visible&&("OSM"===T.layerType||"Bing"===T.layerType))for(var L=0,D=w;L<D.length;L++){var I=D[L],O=re({},I,{},!0);"Bing"===T.layerType?O.src=s.getBingMap(O,T.key,T.bingMapType,a,s.imageUrl,s.subDomains):O.src=T.urlTemplate.replace("level",e.toString()).replace("tileX",I.x.toString()).replace("tileY",I.y.toString()),this.tiles.push(O)}}this.arrangeTiles(i,this.animateToZoomX,this.animateToZoomY)},e.prototype.arrangeTiles=function(e,t,i){var s,n=this,o=document.getElementById(this.mapObject.element.id+"_tile_parent"),r=document.getElementById(this.mapObject.element.id+"_tiles");ae(e)||"Pan"===e||"Reset"===e||-1!==e.indexOf("ZoomOut")?s=0:(this.tileAnimation(e,t,i),s=250),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?this.renderGoogleMap(this.mapObject.layers[0].key,this.mapObject.staticMapZoom):setTimeout(function(){var t;o&&(o.style.zIndex="1"),r&&(r.style.zIndex="0",r.style.visibility="hidden"),!document.getElementById(n.mapObject.element.id+"_animated_tiles")&&o?(t=yi("div",{id:n.mapObject.element.id+"_animated_tiles"}),o.appendChild(t)):"Pan"!==e&&r&&o?(r.appendChild(o.children[0]),ae(document.getElementById(n.mapObject.element.id+"_animated_tiles"))||(document.getElementById(n.mapObject.element.id+"_animated_tiles").id=n.mapObject.element.id+"_animated_tiles_old"),t=yi("div",{id:n.mapObject.element.id+"_animated_tiles"}),o.appendChild(t)):t=o?o.children[0]:null;for(var i=0,s=function(s){var o=yi("img");o.setAttribute("src",s.src);var r=n.mapObject.element.id;o.onload=function(){var a;document.getElementById(r+"_tile_"+i)&&"Pan"===e&&cb(r+"_tile_"+i),(a=yi("div",{id:r+"_tile_"+i})).style.position="absolute",a.style.left=s.left+"px",a.style.top=s.top+"px",a.style.height=s.height+"px",a.style.width=s.width+"px",a.appendChild(o),t&&t.appendChild(a),++i===n.tiles.length&&document.getElementById(n.mapObject.element.id+"_animated_tiles_old")&&cb(n.mapObject.element.id+"_animated_tiles_old")}},a=0,l=n.tiles;a<l.length;a++){s(l[a])}},s)},e.prototype.tileAnimation=function(e,t,i){var s=document.getElementById(this.mapObject.element.id+"_tile_parent"),n=document.getElementById("animated_tiles"),o=document.getElementById(this.mapObject.element.id+"_tiles"),r="2";if(0===e.indexOf("ZoomOut")){for(o.style.zIndex="1",s.style.zIndex="0";o.childElementCount>=1;)o.removeChild(o.children[0]);t=0,i=105,r="0.5"}else if("Reset"===e){for(o.style.zIndex="1",s.style.zIndex="0";1!==o.childElementCount&&0!==o.childElementCount;)o.removeChild(o.children[1]);n=o.children[0],t=0,i=0,r="1"}ae(n)||(n.style.transition="250ms",n.style.transform="translate("+t+"px, "+i+"px) scale("+r+")")},e.prototype.renderGoogleMap=function(e,t){var i,s,n,o=this.mapObject;t=this.mapObject.tileZoomLevel;var r=256*Math.pow(2,t);s=o.mapAreaRect.width/2-r/2,n=o.mapAreaRect.height/2-r/2;var a=0,l=0,h=Oy(new Py(null,null),t,{x:s,y:n},this.isMapCoordinates);o.zoomModule&&o.zoomSettings.enable&&(a=o.zoomModule.mouseDownLatLong.x-o.zoomModule.mouseMoveLatLong.x,l=o.zoomModule.mouseDownLatLong.y-o.zoomModule.mouseMoveLatLong.y);var c,p,d=o.pointToLatLong(h.x-a,h.y-l);o.centerPosition.latitude=d.latitude,o.centerPosition.longitude=d.longitude;var u=(c=ae(parseInt(o.width,10))?parseInt(o.width,10)-22:Math.round(o.mapAreaRect.width))>640?(c-640)/2:0,m=(p=ae(parseInt(o.height,10))?parseInt(o.height,10)-22:Math.round(o.mapAreaRect.height))>640?(p-640)/2:0,f=o.layers[o.layers.length-1].staticMapType.toString().toLowerCase();i="https://maps.googleapis.com/maps/api/staticmap?size="+c+"x"+p+"&zoom="+t+"&center="+(o.centerPosition.latitude&&o.centerPosition.longitude?o.centerPosition.latitude.toString()+","+o.centerPosition.longitude.toString():"0,0")+"&maptype="+f+"&key="+e,document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML='<div id="'+this.mapObject.element.id+'_StaticGoogleMap"style="position:absolute; left:'+u+"px; top:"+m+'px"><img src="'+i+'"></div>'},e.prototype.panTileMap=function(e,t,i){this.mapObject.tileZoomLevel<=this.mapObject.tileZoomScale&&this.mapObject.initialCheck&&(this.mapObject.tileZoomLevel=this.mapObject.tileZoomScale);var s,n,o=this.mapObject.tileZoomLevel,r="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.layers.length-1].layerType?20:0,a=256*Math.pow(2,o),l=Oy(i,o,{x:s=e/2-a/2,y:n=t/2-a/2},this.isMapCoordinates);if(r=this.mapObject.zoomNotApplied?0:r,s-=l.x-e/2,n=n-(l.y-t/2)+r,this.mapObject.scale=Math.pow(2,o-1),(ae(this.mapObject.tileTranslatePoint)||0===this.mapObject.tileTranslatePoint.y&&0===this.mapObject.tileTranslatePoint.x||ae(this.mapObject.previousTileWidth)||ae(this.mapObject.previousTileHeight))&&(this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=t),!ae(this.mapObject.tileTranslatePoint)&&ae(i.x)&&(1===this.mapObject.zoomSettings.zoomFactor||this.mapObject.zoomSettings.zoomFactor!==o||!this.mapObject.defaultState)&&(e!==this.mapObject.previousTileWidth||t!==this.mapObject.previousTileHeight)){var h=s-(this.mapObject.previousTileWidth/2-a/2),c=n-(this.mapObject.previousTileHeight/2-a/2+r);this.mapObject.tileTranslatePoint.x=this.mapObject.tileTranslatePoint.x+h,this.mapObject.tileTranslatePoint.y=this.mapObject.tileTranslatePoint.y+c}return ae(this.mapObject.tileTranslatePoint)||this.mapObject.zoomNotApplied||(0===this.mapObject.tileTranslatePoint.x||this.mapObject.tileTranslatePoint.x===s||this.mapObject.centerPositionChanged||(s=this.mapObject.tileTranslatePoint.x),0===this.mapObject.tileTranslatePoint.y||this.mapObject.tileTranslatePoint.y===n||this.mapObject.centerPositionChanged||(n=this.mapObject.tileTranslatePoint.y)),this.mapObject.translatePoint=new Py((s-.01*this.mapObject.zoomSettings.zoomFactor)/this.mapObject.scale,(n-.01*this.mapObject.zoomSettings.zoomFactor)/this.mapObject.scale),this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=t,new Py(s,n)},e}(),HC=function(){function e(e){this.map=e}return e.prototype.renderAnnotationElements=function(){var e=this,t=this.map.element.id+"_Secondary_Element",i=yi("div",{id:this.map.element.id+"_Annotations_Group"});if(i.style.position="absolute",i.style.top="0px",i.style.left="0px",this.map.annotations.map(function(t,s){null!==t.content&&e.createAnnotationTemplate(i,t,s)}),i.childElementCount>0&&!ae(mb(t))){mb(t).appendChild(i);for(var s=0;s<this.map.annotations.length;s++)Kt(this.map.element.id+"_ContentTemplate_"+s,"ContentTemplate",this.map.annotations[s])}this.map.renderReactTemplates()},e.prototype.createAnnotationTemplate=function(e,t,i){var s,n,o,r,a=this,l=this.map,h=l.availableSize,c=(l.element.id,yi("div",{id:l.element.id+"_Annotation_"+i,styles:"position: absolute; z-index:"+t.zIndex+";"})),p={cancel:!1,name:"annotationRendering",content:t.content,annotation:t};this.map.trigger("annotationRendering",p,function(e){if(!p.cancel){if((o=gb(p.content))&&(window.Blazor||o(a.map,a.map,p.content,a.map.element.id+"_ContentTemplate_"+i).length))for(var t=(r=Array.prototype.slice.call(o(window.Blazor?{}:a.map,a.map,p.content,a.map.element.id+"_ContentTemplate_"+i))).length,s=0;s<t;s++)c.appendChild(r[s]);else c.appendChild(yi("div",{innerHTML:p.content}))}});var d=function(e,t){var i,s;return t.appendChild(e),i=e.offsetWidth,s=e.offsetHeight,t.removeChild(e),new wy(i,s)}(c.cloneNode(!0),l.element),u=l.element.getBoundingClientRect(),m=l.svgObject.getBoundingClientRect();s=Math.abs(m.left-u.left),n=Math.abs(m.top-u.top);var f=t.x.indexOf("%")>-1?h.width/100*parseFloat(t.x):parseFloat(t.x),g=t.y.indexOf("%")>-1?h.height/100*parseFloat(t.y):parseFloat(t.y);switch(s="None"===t.horizontalAlignment?s+f:s,n="None"===t.verticalAlignment?n+g:n,t.verticalAlignment){case"Near":n+=g;break;case"Center":n=n+g+(m.height/2-d.height/2);break;case"Far":n=n+m.height+g-d.height}switch(t.horizontalAlignment){case"Near":s+=f;break;case"Center":s=s+f+(m.width/2-d.width/2);break;case"Far":s=s+m.width+f-d.width}c.style.left=s+"px",c.style.top=n+"px",e.appendChild(c)},e.prototype.getModuleName=function(){return"Annotations"},e.prototype.destroy=function(e){},e}(),FC=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),jC=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},VC=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isTileMap=!1,s.isResize=!1,s.baseSize=new wy(0,0),s.translatePoint=new Py(0,0),s.baseTranslatePoint=new Py(0,0),s.zoomTranslatePoint=new Py(0,0),s.markerZoomedState=!0,s.zoomPersistence=!1,s.defaultState=!0,s.centerPositionChanged=!1,s.isTileMapSubLayer=!1,s.markerNullCount=0,s.tileTranslatePoint=new Py(0,0),s.baseTileTranslatePoint=new Py(0,0),s.isDevice=!1,s.staticMapZoom=s.zoomSettings.enable?s.zoomSettings.zoomFactor:0,s.zoomNotApplied=!1,s.dataLabelShape=[],s.zoomShapeCollection=[],s.zoomLabelPositions=[],s.mouseDownEvent={x:null,y:null},s.mouseClickEvent={x:null,y:null},s.selectedElementId=[],s.selectedMarkerElementId=[],s.selectedBubbleElementId=[],s.selectedNavigationElementId=[],s.selectedLegendElementId=[],s.legendSelectionCollection=[],s.shapeSelections=!0,s.legendSelection=!0,s.toggledLegendId=[],s.toggledShapeElementId=[],s.checkInitialRender=!0,s.initialTileTranslate=new Py(0,0),s.initialCheck=!0,s.applyZoomReset=!1,s.markerClusterExpandCheck=!1,s.markerClusterExpand=!1,s.shapeSelectionItem=[],te("mergePersistData",s.mergePersistMapsData,s),s}return FC(t,e),Object.defineProperty(t.prototype,"isShapeSelected",{get:function(){return this.mapSelect},enumerable:!0,configurable:!0}),t.prototype.mergePersistMapsData=function(){var e;if(ae(window.localStorage)||(e=window.localStorage.getItem(this.getModuleName()+this.element.id)),!ae(e)&&""!==e){var t=JSON.parse(e),i=Object.keys(t);this.isProtectedOnChange=!0;for(var s=0,n=i;s<n.length;s++){var o=n[s];"object"!=typeof this[o]||ae(this[o])?this[o]=t[o]:re(this[o],t[o])}this.isProtectedOnChange=!1}},t.prototype.getLocalizedLabel=function(e){return this.localeObject.getConstant(e)},t.prototype.preRender=function(){this.isDevice=bt.isDevice,this.isBlazor=ye(),this.initPrivateVariable(),this.allowServerDataBinding=!1,this.unWireEVents(),this.wireEVents(),this.setCulture()},t.prototype.render=function(){this.trigger("load",this.isBlazor?{}:{maps:this}),this.createSVG(),this.findBaseAndSubLayers(),this.createSecondaryElement(),this.addTabIndex(),this.themeStyle=function(e){var t,i;switch(e.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(e.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#ffffff",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium"};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#ffffff",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif"}}return t}(this.theme),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.renderArea(),this.processRequestJsonData(),this.renderComplete()},t.prototype.processRequestJsonData=function(){var e,t,i=this,s=this.layersCollection.length-1;this.serverProcess={request:0,response:0},Array.prototype.forEach.call(this.layersCollection,function(n,o){n.shapeData instanceof Ip?(i.serverProcess.request++,t=n.shapeData,e=n.query instanceof up?n.query:i.isBlazor?(new up).requiresCount():new up,t.executeQuery(e).then(function(e){i.processResponseJsonData("DataManager",e,n,"ShapeData")})):(n.shapeData instanceof _b||n.shapeData)&&(ae(n.shapeData.dataOptions)||i.processAjaxRequest(n,n.shapeData,"ShapeData"));n.dataSource instanceof Ip&&(i.serverProcess.request++,t=n.dataSource,e=n.query instanceof up?n.query:i.isBlazor?(new up).requiresCount():new up,t.executeQuery(e).then(function(e){n.dataSource=Gb(e)}));if(n.markerSettings.length>0)for(var r=function(s){n.markerSettings[s].dataSource instanceof Ip&&(i.serverProcess.request++,t=n.markerSettings[s].dataSource,e=n.markerSettings[s].query instanceof up?n.markerSettings[s].query:i.isBlazor?(new up).requiresCount():new up,t.executeQuery(e).then(function(e){n.markerSettings[s].dataSource=Gb(e)}))},a=0;a<n.markerSettings.length;a++)r(a);if(n.bubbleSettings.length>0){var l=function(s){n.bubbleSettings[s].dataSource instanceof Ip&&(i.serverProcess.request++,t=n.bubbleSettings[s].dataSource,e=n.bubbleSettings[s].query instanceof up?n.bubbleSettings[s].query:i.isBlazor?(new up).requiresCount():new up,t.executeQuery(e).then(function(e){n.bubbleSettings[s].dataSource=Gb(e)}))};for(a=0;a<n.bubbleSettings.length;a++)l(a)}(n.dataSource instanceof _b||!ae(n.dataSource.dataOptions))&&i.processAjaxRequest(n,n.dataSource,"DataSource"),i.serverProcess.request===i.serverProcess.response&&s===o&&i.processResponseJsonData(null)})},t.prototype.processAjaxRequest=function(e,t,i){var s,n=this;this.serverProcess.request++,(s=new ht(t.dataOptions,t.type,t.async,t.contentType)).onSuccess=function(t){n.processResponseJsonData("Ajax",t,e,i)},s.send(t.sendData)},t.prototype.processResponseJsonData=function(e,t,i,s){if(this.serverProcess.response++,e&&("ShapeData"===s?i.shapeData="DataManager"===e?Gb(t):JSON.parse(t):i.dataSource="DataManager"===e?Gb(t):JSON.parse("["+t+"]")[0]),ae(e)||this.serverProcess.request!==this.serverProcess.response)ae(e)&&this.renderMap();else{var n=this.layersCollection;this.layersCollection=[];for(var o=0;o<n.length;o++)n[o].isBaseLayer&&this.layersCollection.push(n[o]);for(var r=0;r<n.length;r++)n[r].isBaseLayer||this.layersCollection.push(n[r]);this.renderMap()}},t.prototype.renderMap=function(){if(this.legendModule&&this.legendSettings.visible)if(this.isTileMap){var e=this.layersCollection.length-1;this.layersCollection[e].isBaseLayer||(this.isTileMapSubLayer=!0,this.legendModule.renderLegend())}else this.legendModule.renderLegend();this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),ae(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[],this.dataLabelShape=[]),this.mapLayerPanel.measureLayerPanel(),this.element.appendChild(this.svgObject);for(var t=0;t<this.layers.length;t++){if(this.layers[t].selectionSettings&&this.layers[t].selectionSettings.enable&&this.layers[t].initialShapeSelection.length>0&&this.checkInitialRender){var i=this.layers[t].selectionSettings.enableMultiSelect;this.layers[t].selectionSettings.enableMultiSelect=i||!0;for(var s=this.layers[t].initialShapeSelection,n=0;n<this.layers[t].initialShapeSelection.length;n++)this.shapeSelection(t,s[n].shapePath,s[n].shapeValue,!0);this.layers[t].selectionSettings.enableMultiSelect=i,t===this.layers.length-1&&(this.checkInitialRender=!1)}for(var o=0;o<this.layers[t].markerSettings.length;o++)if(this.layers[t].markerSettings[o].selectionSettings&&this.layers[t].markerSettings[o].selectionSettings.enable&&this.layers[t].markerSettings[o].initialMarkerSelection.length>0){var r=this.layers[t].markerSettings[o].initialMarkerSelection;for(n=0;n<r.length;n++)this.markerInitialSelection(t,o,this.layers[t].markerSettings[o],r[n].latitude,r[n].longitude)}}if(!ae(document.getElementById(this.element.id+"_tile_parent"))){var a,l=this.svgObject.getBoundingClientRect(),h=document.getElementById(this.element.id),c=document.getElementById(this.element.id+"_tile_parent"),p=document.getElementById(this.element.id+"_tiles"),d=c.getBoundingClientRect(),u=void 0,m=void 0;m=parseFloat(c.style.left)+h.offsetLeft;var f=By(this.titleSettings.text,this.titleSettings.textStyle),g=By(this.titleSettings.subtitleSettings.text,this.titleSettings.subtitleSettings.textStyle);this.isTileMap&&this.isTileMapSubLayer&&"Bottom"===this.legendSettings.position&&this.legendSettings.visible?"Default"!==this.legendSettings.mode?a=0!==f.width&&0!==f.height?parseFloat(c.style.top)+h.offsetTop+g.height/2-this.legendModule.legendBorderRect.height/2:parseFloat(c.style.top)+h.offsetTop-this.mapAreaRect.y:(m=this.legendModule.legendBorderRect.x,a=0!==f.width&&0!==f.height?parseFloat(c.style.top)+h.offsetTop+g.height/2-this.legendModule.legendBorderRect.y:parseFloat(c.style.top)+h.offsetTop+g.height/2):(u=l.bottom-d.bottom-h.offsetTop,a=parseFloat(c.style.top)+h.offsetTop),a=u<=11?a:2*a,m=u<=11?m:2*m,c.style.top=a+"px",c.style.left=m+"px",p.style.top=a+"px",p.style.left=m+"px"}this.arrangeTemplate();this.isBlazor&&this.blazorTemplates();this.annotationsModule&&"0px"!==this.width&&"0px"!==this.height&&"0%"!==this.width&&"0%"!==this.height&&this.annotationsModule.renderAnnotationElements(),this.element.style.outline="none";for(t=0;t<document.getElementsByTagName("path").length-1;t++)document.getElementsByTagName("path")[t].id.indexOf("shapeIndex")>-1&&(document.getElementsByTagName("path")[t].style.outline="none");this.zoomingChange(),this.trigger("loaded",this.isBlazor?{isResized:this.isResize}:{maps:this,isResized:this.isResize}),this.isResize=!1},t.prototype.markerSelection=function(e,t,i,s){var n={color:e.border.color,width:e.border.width/t.scale},o={opacity:e.opacity,fill:e.fill,border:n,target:i.id,cancel:!1,data:s,maps:t};vb("MarkerselectionMap")?wb("MarkerselectionMap","MarkerselectionMapStyle",o):document.body.appendChild(xb("MarkerselectionMap","MarkerselectionMapStyle",o)),(0===this.selectedMarkerElementId.length||e.enableMultiSelect)&&("g"===i.tagName?i.children[0].setAttribute("class","MarkerselectionMapStyle"):i.setAttribute("class","MarkerselectionMapStyle"))},t.prototype.markerInitialSelection=function(e,t,i,s,n){var o=i.selectionSettings;if(o.enable)for(var r=0;r<i.dataSource.length;r++){var a=i.dataSource[r];if(a.latitude===s&&a.longitude===n){var l=this.element.id+"_LayerIndex_"+e+"_MarkerIndex_"+t+"_dataIndex_"+r;this.markerSelection(o,this,vb(l),a)}}},t.prototype.blazorTemplates=function(){for(var e=this,t=0;t<this.layers.length;t++){var i=this.layers[t].markerSettings.length-1;if(i>=0&&(this.layers[t].dataLabelSettings.visible||this.layers[t].markerSettings[i].template)){Kt(this.element.id+"_LabelTemplate","LabelTemplate",this.layers[t].dataLabelSettings);for(var s=0;s<this.layers[t].markerSettings.length;s++){Kt(this.element.id+"_MarkerTemplate"+s,"MarkerTemplate",this.layers[t].markerSettings[s],void 0,function(){for(var t=0;t<e.layers.length;t++){var i=document.getElementById(e.element.id+"_LayerIndex_"+t+"_Markers_Template_Group");if(!ae(i))for(var s=0;s<i.childElementCount;s++)i.childNodes[s].style.transform="translate(-50%, -50%)"}})}}}},t.prototype.renderArea=function(){var e=this.mapsArea.border.width,t=this.mapsArea.background;if(e>0||t||this.themeStyle.areaBackgroundColor){var i=new Vy(this.element.id+"_MapAreaBorder",t||this.themeStyle.areaBackgroundColor,this.mapsArea.border,1,this.mapAreaRect);this.svgObject.appendChild(this.renderer.drawRectangle(i))}},t.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element"),this.element.setAttribute("tabindex",this.tabIndex.toString())},t.prototype.zoomingChange=function(){var e,t;if(mb(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=mb(this.element.id+"_Layer_Collections")),this.isTileMap&&mb(this.element.id+"_Tile_SVG")&&mb(this.element.id+"_tile_parent")){var i=mb(this.element.id+"_tile_parent").getBoundingClientRect(),s=mb(this.element.id+"_Tile_SVG").getBoundingClientRect();e=i.left-s.left,t=i.top-s.top,mb(this.element.id+"_Tile_SVG_Parent").style.left=e+"px",mb(this.element.id+"_Tile_SVG_Parent").style.top=t+"px";var n=document.getElementsByClassName("template");if(!ae(n)&&n.length>0)for(var o=0;o<n.length;o++){var r=n[o];r.style.left=e+"px",r.style.top=t+"px"}}if(this.zoomSettings.zoomFactor>=1){this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar();var a=document.getElementById(this.element.id+"_Layer_Collections");if(!ae(a)&&a.childElementCount>0)for(o=0;o<a.childNodes.length;o++){var l=a.childNodes[o];if("g"===l.tagName)for(var h=parseFloat(l.id.split("_LayerIndex_")[1].split("_")[0]),c=0;c<l.childNodes.length;c++){var p=l.childNodes[c];p.id.indexOf("_Markers_Group")>-1||p.id.indexOf("_bubble_Group")>-1||p.id.indexOf("_dataLableIndex_Group")>-1||Ab(p,h,this.scale,this)}}this.zoomModule&&this.previousScale!==this.scale&&this.zoomModule.applyTransform(!0)}},t.prototype.createSecondaryElement=function(){if(ae(document.getElementById(this.element.id+"_Secondary_Element"))){var e=yi("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:2;"});this.element.appendChild(e)}},t.prototype.arrangeTemplate=function(){document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none");var e=document.getElementsByClassName(this.element.id+"_template");if(!ae(e)&&e.length>0&&mb(this.element.id+"_Layer_Collections")&&"OSM"!==this.layers[this.layers.length-1].layerType)for(var t=0;t<e.length;t++){var i=e[t];if(!ae(i)&&i.childElementCount>0)for(var s=mb(this.element.id+"_Layer_Collections").getBoundingClientRect(),n=mb(i.id).getBoundingClientRect(),o=this.isTileMap?0:s.left<n.left?-Math.abs(n.left-s.left):Math.abs(n.left-s.left),r=this.isTileMap?0:s.top<n.top?-Math.abs(n.top-s.top):Math.abs(n.top-s.top),a=0;a<i.childElementCount;a++){var l=i.childNodes[a];l.style.left=parseFloat(l.style.left)+o+"px",l.style.top=parseFloat(l.style.top)+r+"px",l.style.transform="translate(-50%, -50%)"}}},t.prototype.createTile=function(){var e=this.layersCollection[0];if(e.isBaseLayer&&("OSM"===e.layerType||"Bing"===e.layerType||"GoogleStaticMap"===e.layerType||"Google"===e.layerType)){"Google"===e.layerType&&(e.urlTemplate="https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level"),cb(this.element.id+"_tile_parent"),cb(this.element.id+"_tiles"),cb("animated_tiles");var t=yi("div",{id:this.element.id+"_tile_parent",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; right: "+this.margin.right+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"}),i=yi("div",{id:this.element.id+"_tiles",styles:"position: absolute; left: "+this.mapAreaRect.x+"px;  right: "+this.margin.right+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"});this.element.appendChild(t),this.element.appendChild(i)}},t.prototype.initPrivateVariable=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-maps").length;this.element.id="maps_control_"+e}this.renderer=new Cg(this.element.id),this.mapLayerPanel=new BC(this)},t.prototype.findBaseAndSubLayers=function(){var e=this,t=this.baseLayerIndex,i=[],s=[];this.layersCollection=[],Array.prototype.forEach.call(this.layers,function(e){"Layer"===e.type?i.push(e):s.push(e)});for(var n=0;n<i.length;n++){var o=i[n];if(o.visible&&t===n){o.isBaseLayer=!0,this.isTileMap="Geometry"!==o.layerType,this.layersCollection.push(o);break}if(n===i.length-1){this.layersCollection.push(i[0]);break}}s.map(function(t,i){t.visible&&e.layersCollection.push(t)})},t.prototype.renderBorder=function(){var e=this.border.width,t=this.svgObject.querySelector("#"+this.element.id+"_MapBorder");if((e>0||this.background||this.themeStyle.backgroundColor)&&ae(t)){var i=new Vy(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,this.border,1,new Wy(e/2,e/2,this.availableSize.width-e,this.availableSize.height-e));this.svgObject.appendChild(this.renderer.drawRectangle(i))}else t.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},t.prototype.renderTitle=function(e,t,i,s){var n,o=e.textStyle,r=Math.abs(this.margin.left+this.margin.right-this.availableSize.width);if(o.fontFamily=this.themeStyle.fontFamily||o.fontFamily,o.size=this.themeStyle.titleFontSize||o.size,e.text){ae(s)&&(s=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var a=hb(r,e.text,o),l=By(a,o),h=function(e,t,i,s){var n,o;switch(t){case"Near":n=e.x;break;case"Center":n="title"===s?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":n="title"===s?e.width-e.y-i.width:e.x+e.width-i.width}return o="title"===s?e.y+i.height/2:e.y+e.height/2+i.height/2,new Py(n,o)}(ae(i)?new Wy(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):i,e.alignment,l,t),c=new Hy(this.element.id+"_Map_"+t,h.x,h.y,"start",a),p=new Wy(h.x,h.y,l.width,l.height),d=Uy(c,o,o.color||("title"===t?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),s);d.setAttribute("aria-label",this.description||e.text),d.setAttribute("tabindex",(this.tabIndex+("title"===t?1:2)).toString()),("title"===t&&!e.subtitleSettings.text||"subtitle"===t)&&(n=Math.abs(p.y+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new Wy(this.margin.left,p.y+10,r,n-10)),"subtitle"!==t&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",p,s):this.svgObject.appendChild(s)}else n=Math.abs(this.margin.top+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new Wy(this.margin.left,this.margin.top,r,n)},t.prototype.createSVG=function(){Zt(this.element.id+"_LabelTemplate");for(var e=0;e<this.layers.length;e++)for(var t=0;t<this.layers[e].markerSettings.length;t++)Zt(this.element.id+"_MarkerTemplate"+t);this.removeSvg(),ky(this)},t.prototype.removeSvg=function(){for(var e=0;e<this.annotations.length;e++)Zt(this.element.id+"_ContentTemplate_"+e);if(cb(this.element.id+"_Secondary_Element"),cb(this.element.id+"_tile_parent"),cb(this.element.id+"_tiles"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&Li(this.svgObject)}this.clearTemplate()},t.prototype.wireEVents=function(){Ct.add(this.element,"click",this.mapsOnClick,this),Ct.add(this.element,"dblclick",this.mapsOnDoubleClick,this),Ct.add(this.element,bt.touchStartEvent,this.mouseDownOnMap,this),Ct.add(this.element,bt.touchMoveEvent,this.mouseMoveOnMap,this),Ct.add(this.element,bt.touchEndEvent,this.mouseEndOnMap,this),Ct.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this),window.addEventListener(bt.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize.bind(this))},t.prototype.unWireEVents=function(){Ct.remove(this.element,"click",this.mapsOnClick),Ct.remove(this.element,"dblclick",this.mapsOnDoubleClick),Ct.remove(this.element,bt.touchStartEvent,this.mouseDownOnMap),Ct.remove(this.element,bt.touchMoveEvent,this.mouseMoveOnMap),Ct.remove(this.element,bt.touchEndEvent,this.mouseEndOnMap),Ct.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap),window.removeEventListener(bt.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize)},t.prototype.mouseLeaveOnMap=function(e){document.getElementsByClassName("highlightMapStyle").length>0&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),kb(document.getElementsByClassName("highlightMapStyle")[0]))},t.prototype.SelectedElement=function(e){var t=!1;return"ShapeselectionMapStyle"===e.getAttribute("class")&&(t=!0),t},t.prototype.mapsOnClick=function(e){var t,i=this,s=e.target,n=s.id,o=0,r=null,a=null;if(this.mouseClickEvent={x:e.x,y:e.y},-1===s.id.indexOf("_ToolBar")){-1===s.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==this.mouseClickEvent.x||this.mouseDownEvent.y!==this.mouseClickEvent.y?this.isTileMap&&this.mouseDownEvent.x===this.mouseClickEvent.x&&this.mouseDownEvent.y===this.mouseClickEvent.y&&(r=(t=this.getTileGeoLocation(e)).latitude,a=t.longitude):(o=parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]),r=(t=this.getGeoLocation(o,e)).latitude,a=t.longitude);var l={cancel:!1,name:"click",target:n,x:e.clientX,y:e.clientY,latitude:r,longitude:a,isShapeSelected:this.SelectedElement(s)};this.trigger("click",l,function(t){if(s.id.indexOf("shapeIndex")>-1&&(i.markerModule&&i.markerModule.sameMarkerData.length>0&&(!i.zoomModule||i.zoomModule.isSingleClick)&&($y(i.markerModule.sameMarkerData,i,vb(i.element.id+"_Markers_Group")),i.markerModule.sameMarkerData=[]),vb(i.element.id+"_mapsTooltip")&&i.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&cb(i.element.id+"_mapsTooltip")),i.markerModule&&(i.markerModule.markerClick(e),i.markerModule.markerClusterClick(e)),i.bubbleModule&&i.bubbleModule.bubbleClick(e),l.cancel||i.notify("click",s),!l.cancel&&-1!==s.id.indexOf("shapeIndex")){var o=parseInt(s.id.split("_LayerIndex_")[1].split("_")[0],10),r=yb(n,i.layers[o].selectionSettings,i,"shapeSelected");r.cancel||!i.selectionModule||ae(i.shapeSelected)?r.cancel&&i.selectionModule&&ae(r.data)&&(kb(s),i.selectionModule.removedSelectionList(s)):wb(i.selectionModule.selectionType+"selectionMap",i.selectionModule.selectionType+"selectionMapStyle",r)}})}},t.prototype.mouseEndOnMap=function(e){var t,i,s;e.target.id,this.element.getBoundingClientRect(),e.target;return-1!==e.type.indexOf("touch")?(this.isTouch=!0,t=(s=e).changedTouches[0].pageX,i=s.changedTouches[0].pageY,s.target):(this.isTouch="touch"===e.pointerType,t=e.pageX,i=e.pageY,e.target),this.isTouch&&(this.titleTooltip(e,t,i,!0),ae(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),this.notify(bt.touchEndEvent,e),e.preventDefault(),!1},t.prototype.mouseDownOnMap=function(e){this.mouseDownEvent={x:e.x,y:e.y};this.element.getBoundingClientRect();var t=e.target;if(-1===t.id.indexOf("_ToolBar")){var i=this.markerModule;(t.id.indexOf("shapeIndex")>-1||t.id.indexOf("Tile")>-1)&&i&&i.sameMarkerData.length>0&&(!this.zoomModule||this.zoomModule.isSingleClick)&&($y(i.sameMarkerData,this,vb(this.element.id+"_Markers_Group")),i.sameMarkerData=[]),i&&(i.markerClick(e),i.markerClusterClick(e)),this.bubbleModule&&this.bubbleModule.bubbleClick(e)}this.notify(bt.touchStartEvent,e)},t.prototype.mapsOnDoubleClick=function(e){this.notify("dblclick",e);var t,i=e.target,s=i.id,n=0,o=null,r=null;if(-1===i.id.indexOf("_ToolBar")){-1===i.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==e.clientX||this.mouseDownEvent.y!==e.clientY?this.isTileMap&&this.mouseDownEvent.x===e.clientX&&this.mouseDownEvent.y===e.clientY&&(o=(t=this.getTileGeoLocation(e)).latitude,r=t.longitude):(n=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),o=(t=this.getGeoLocation(n,e)).latitude,r=t.longitude);var a={cancel:!1,name:"doubleClick",x:e.clientX,y:e.clientY,target:s,latitude:o,longitude:r,isShapeSelected:null},l={cancel:!1,name:"doubleClick",x:e.clientX,y:e.clientY,target:s,latitude:o,longitude:r,isShapeSelected:null};this.trigger("doubleClick",this.isBlazor?l:a)}},t.prototype.mouseMoveOnMap=function(e){"touchmove"===e.type?e.target:e.target,this.markerModule&&(this.markerModule.markerMove(e),this.markerModule.markerClusterMouseMove(e)),this.bubbleModule&&this.bubbleModule.bubbleMove(e),this.onMouseMove(e),this.notify(bt.touchMoveEvent,e)},t.prototype.onMouseMove=function(e){e.target;return this.isTouch||(this.titleTooltip(e,e.pageX,e.pageY),ae(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),!1},t.prototype.legendTooltip=function(e,t,i,s){var n,o,r=e.target.id,a=this.legendModule.currentPage,l=e.target.id.split("_Index_")[1];a=this.legendModule.totalPages.length<=this.legendModule.currentPage?this.legendModule.totalPages.length-1:this.legendModule.currentPage<0?0:this.legendModule.currentPage;for(var h=0!==this.legendModule.totalPages.length?this.legendModule.totalPages[a].Collection.length:this.legendModule.totalPages.length,c=0;c<h;c++)n=(o=this.legendModule.totalPages[a].Collection[c]).DisplayText,r=e.target.id,l=e.target.id.split("_Index_")[1],r===this.element.id+"_Legend_Text_Index_"+l&&e.target.textContent.indexOf("...")>-1&&o.idIndex===parseInt(l,10)&&Db(n,this.legendSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Legend_Text_Tooltip",vb(this.element.id+"_Secondary_Element"),s);r!==this.element.id+"_Legend_Text_Index_"+l&&cb(this.element.id+"_EJ2_Legend_Text_Tooltip")},t.prototype.titleTooltip=function(e,t,i,s){var n=e.target.id;n===this.element.id+"_LegendTitle"&&-1===e.target.textContent.indexOf("...")?Db(this.legendSettings.title.text,this.legendSettings.titleStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_LegendTitle_Tooltip",vb(this.element.id+"_Secondary_Element"),s):cb(this.element.id+"_EJ2_LegendTitle_Tooltip"),n===this.element.id+"_Map_title"&&e.target.textContent.indexOf("...")>-1?Db(this.titleSettings.text,this.titleSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",vb(this.element.id+"_Secondary_Element"),s):cb(this.element.id+"_EJ2_Title_Tooltip")},t.prototype.mapsOnResize=function(e){var t=this;this.isResize=!0;var i={name:"resize",previousSize:this.availableSize,currentSize:new wy(0,0),maps:this.isBlazor?null:this};return this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout(function(){t.unWireEVents(),t.createSVG(),t.refreshing=!0,t.wireEVents(),i.currentSize=t.availableSize,t.trigger("resize",i),t.render()},500)),!1},t.prototype.zoomByPosition=function(e,t){var i,s=this.mapLayerPanel.calculateFactor(this.layersCollection[0]),n=this.mapAreaRect;if(!this.isTileMap&&this.zoomModule)if(ae(e))i={x:n.width/2,y:n.height/2},this.zoomModule.performZooming(i,t,t>this.scale?"ZoomIn":"ZoomOut");else{i=Iy(e.latitude,e.longitude,s,this.layersCollection[0],this);var o=document.getElementById(this.element.id+"_Layer_Collections").getBoundingClientRect(),r=this.svgObject.getBoundingClientRect(),a=Math.abs(o.left-r.left)/this.scale,l=Math.abs(o.top-r.top)/this.scale,h=this.translatePoint.x+a,c=this.translatePoint.y+l;this.scale=t,this.translatePoint.x=((o.left<r.left?h:0)+n.width/2-i.x*t)/t,this.translatePoint.y=((o.top<r.top?c:0)+n.height/2-i.y*t)/t,this.zoomModule.applyTransform()}else this.zoomModule&&(this.tileZoomLevel=t,this.tileTranslatePoint=this.mapLayerPanel.panTileMap(this.availableSize.width,this.availableSize.height,{x:e.longitude,y:e.latitude}),this.mapLayerPanel.generateTiles(t,this.tileTranslatePoint,null,new PC(this)))},t.prototype.panByDirection=function(e,t){var i=0,s=0;switch(e){case"Left":i=-this.mapAreaRect.width/7;break;case"Right":i=this.mapAreaRect.width/7;break;case"Top":s=-this.mapAreaRect.height/7;break;case"Bottom":s=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(e,i,s,t)},t.prototype.addLayer=function(e){this.layers.push(new CC(this.layers[0],"layers",e)),this.refresh()},t.prototype.removeLayer=function(e){this.layers.splice(e,1),this.refresh()},t.prototype.addMarker=function(e,t){var i=document.getElementById(this.element.id+"_LayerIndex_"+e);if(t.length>0&&i){for(var s=0,n=t;s<n.length;s++){var o=n[s];this.layersCollection[e].markerSettings.push(new bC(this,"markerSettings",o))}new EC(this).markerRender(i,e,this.mapLayerPanel.currentFactor,"AddMarker"),this.arrangeTemplate()}},t.prototype.shapeSelection=function(e,t,i,s){var n,o=Array.isArray(t)?t:Array(t);ae(s)&&(s=!0);var r=this.layers[e].selectionSettings;if(!r.enableMultiSelect&&this.legendSelection&&s&&this.removeShapeSelection(),r.enable)for(var a=void 0,l=void 0,h=void 0,c=void 0,p=this.layers[e].shapeData.features,d=0;d<p.length;d++)for(var u=0;u<o.length;u++){if((!ae(p[d].properties[o[u]])&&isNaN(p[d].properties[o[u]])?p[d].properties[o[u]].toLowerCase():p[d].properties[o[u]])===(ae(i)?i:i.toLowerCase())){var m=ob(this.layers[e].dataSource,p[d].properties,this.layers[e].shapeDataPath,this.layers[e].shapePropertyPath,this.layers[e]);if(n=vb(this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+d+"_dataIndex_"+(ae(m)?"undefined":m.toString())),ae(m)&&ae(n)&&(n=vb(this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+d+"_dataIndex_null")),l=parseInt(n.id.split("_shapeIndex_")[1].split("_")[0],10),h=this.layers[e].shapeData.features.length>l?this.layers[e].shapeData.features[l].properties:null,c=ae(a=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10))?null:this.layers[e].dataSource[a],s){if(Eb(r,this,n,h,c),this.shapeSelectionClass=vb("ShapeselectionMap"),this.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&this.legendModule.shapeHighLightAndSelection(n,c,r,"selection",e),(!this.legendSettings.visible||this.legendModule.shapeToggled)&&(n.setAttribute("class","ShapeselectionMapStyle"),-1===this.selectedElementId.indexOf(n.getAttribute("id"))&&this.selectedElementId.push(n.getAttribute("id")),!r.enableMultiSelect))return}else if(this.legendSelection=!r.enableMultiSelect&&!this.legendSelection||this.legendSelection,this.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&"ShapeselectionMapStyle"===n.getAttribute("class")&&this.legendModule.shapeHighLightAndSelection(n,c,r,"selection",e),!this.legendSettings.visible||this.legendModule.shapeToggled){kb(n);var f=this.selectedElementId.indexOf(n.getAttribute("id"));-1!==f&&(this.selectedElementId.splice(f,1),!r.enableMultiSelect&&this.legendSelection&&this.selectedElementId.length>0&&this.removeShapeSelection())}}}},t.prototype.zoomToCoordinates=function(e,t,i,s){var n,o,r,a,l,h=!1;(ae(i)&&ae(s)||ae(e)&&ae(t))&&(e=ae(e)?0:e,t=ae(e)?0:t,i=ae(i)?e:i,s=ae(s)?t:s,h=!0),e>i&&(e=(n=[i,e])[0],i=n[1]),t>s&&(t=(o=[s,t])[0],s=o[1]),h?(r=e+i,a=t+s):(r=(e+i)/2,a=(t+s)/2),this.centerLatOfGivenLocation=r,this.centerLongOfGivenLocation=a,this.minLatOfGivenLocation=e,this.minLongOfGivenLocation=t,this.maxLatOfGivenLocation=i,this.maxLongOfGivenLocation=s,this.zoomNotApplied=!0,this.scaleOfGivenLocation=Ub(e,i,t,s,this.mapAreaRect.width,this.mapAreaRect.height,this),l={cancel:!1,name:"zoom",type:"zoomIn",maps:this.isBlazor?null:this,tileTranslatePoint:{},translatePoint:{},tileZoomLevel:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{},scale:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{previous:this.scale,current:this.scaleOfGivenLocation}},this.trigger("zoom",l),this.refresh()},t.prototype.removeShapeSelection=function(){for(var e=this.selectedElementId.length,t=0;t<e;t++)kb(mb(this.selectedElementId[0])),this.selectedElementId.splice(0,1);if(this.legendSettings.visible){var i=this.legendSelectionCollection.length;for(t=0;t<i;t++)kb(mb(this.legendSelectionCollection[t].legendElement.id)),this.selectedLegendElementId.splice(0,1)}this.shapeSelectionItem=[],this.legendSelectionCollection=[]},t.prototype.setCulture=function(){this.intl=new Qe,this.setLocaleConstants(),this.localeObject=new Js(this.getModuleName(),this.defaultLocalConstants,this.locale)},t.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom in",Zoom:"Zoom",ZoomOut:"Zoom out",Pan:"Pan",Reset:"Reset"}},t.prototype.destroy=function(){this.unWireEVents(),this.shapeSelectionItem=[],this.toggledShapeElementId=[],this.toggledLegendId=[],this.legendSelectionCollection=[],this.selectedLegendElementId=[],this.selectedNavigationElementId=[],this.selectedBubbleElementId=[],this.selectedMarkerElementId=[],this.selectedElementId=[],this.dataLabelShape=[],this.zoomShapeCollection=[],this.zoomLabelPositions=[],this.mouseDownEvent={x:null,y:null},this.mouseClickEvent={x:null,y:null},document.getElementById("mapsmeasuretext")&&document.getElementById("mapsmeasuretext").remove(),this.removeSvg(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"maps"},t.prototype.getPersistData=function(){return this.addOnPersist(["translatePoint","zoomSettings","mapScaleValue","tileTranslatePoint","baseTranslatePoint","scale","zoomPersistence","defaultState","markerZoomedState","initialCheck","initialZoomLevel","initialTileTranslate","applyZoomReset","markerZoomFactor"])},t.prototype.onPropertyChanged=function(t,i){var s=!1,n=!1,o=!1;if(t.layers){var r=Object.keys(t.layers).length;document.getElementById(this.element.id+"_LayerIndex_"+(r-1))}for(var a=0,l=Object.keys(t);a<l.length;a++){var h=l[a];switch(h){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"centerPosition":case"legendSettings":case"zoomSettings":case"baseLayerIndex":if("layers"===h)for(var c=Object.keys(t.layers).length,p=0;p<c;p++)if(!ae(t.layers[p]))for(var d=0,u=Object.keys(t.layers[p]);d<u.length;d++){var m=u[d];"markerSettings"===m?n=!0:"staticMapType"===m&&(o=!0)}s=!0;break;case"locale":case"currencyCode":e.prototype.refresh.call(this)}}s&&(t.layers&&n?(cb(this.element.id+"_Markers_Group"),this.isTileMap?this.isBlazor?this.render():this.mapLayerPanel.renderTileLayer(this.mapLayerPanel,this.layers.currentFactor,this.layers.length-1):this.render()):t.layers&&o?this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length-1].key,this.staticMapZoom):(this.createSVG(),this.render()))},t.prototype.requiredModules=function(){var e=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map(function(e,t){i=null!=e.content}),this.isBubbleVisible()&&e.push({member:"Bubble",args:[this]}),t.highlight&&e.push({member:"Highlight",args:[this]}),t.selection&&e.push({member:"Selection",args:[this]}),this.legendSettings.visible&&e.push({member:"Legend",args:[this]}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&e.push({member:"Zoom",args:[this]}),this.isMarkersVisible()&&e.push({member:"Marker",args:[this]}),this.isDataLabelVisible()&&e.push({member:"DataLabel",args:[this]}),this.isNavigationVisible()&&e.push({member:"NavigationLine",args:[this]}),t.tooltip&&e.push({member:"MapsTooltip",args:[this]}),i&&e.push({member:"Annotations",args:[this,HC]}),this.allowPrint&&e.push({member:"Print",args:[this]}),this.allowImageExport&&e.push({member:"ImageExport",args:[this]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),e},t.prototype.isMarkersVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,function(t,i){for(var s=0;s<t.markerSettings.length;s++)if(t.markerSettings[s].visible){e=!0;break}}),e},t.prototype.isDataLabelVisible=function(){for(var e=!1,t=0;t<this.layers.length;t++)if(this.layers[t].dataLabelSettings.visible){e=!0;break}return e},t.prototype.isNavigationVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,function(t,i){for(var s=0;s<t.navigationLineSettings.length;s++)if(t.navigationLineSettings[s].visible){e=!0;break}}),e},t.prototype.isBubbleVisible=function(){for(var e=!1,t=0,i=this.layers;t<i.length;t++){var s=i[t];if(this.getBubbleVisible(s)){e=!0;break}}return e},t.prototype.getBubbleVisible=function(e){for(var t=!1,i=0,s=e.bubbleSettings;i<s.length;i++){if(s[i].visible){t=!0;break}}return t},t.prototype.print=function(e){this.allowPrint&&this.printModule&&this.printModule.print(e)},t.prototype.export=function(e,t,i,s){var n=this;return ae(s)&&(s=!0),"PDF"!==e&&this.allowImageExport&&this.imageExportModule?new Promise(function(i,o){i(n.imageExportModule.export(e,t,s))}):this.allowPdfExport&&this.pdfExportModule?new Promise(function(o,r){o(n.pdfExportModule.export(e,t,s,i))}):null},t.prototype.findVisibleLayers=function(e,t,i,s,n,o){var r,a;void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===n&&(n=!1),void 0===o&&(o=!1);for(var l=0,h=e;l<h.length;l++){var c=h[l];if(t=c.visible||t,c.visible){r=c.bubbleSettings,a=c.markerSettings;for(var p=0,d=c.navigationLineSettings;p<d.length;p++){var u=d[p];u.visible&&(n=u.highlightSettings.enable||n,o=u.selectionSettings.enable||o)}for(var m=0,f=a;m<f.length;m++){var g=f[m];if(g.visible&&(s=g.tooltipSettings.visible||s,n=g.selectionSettings.enable||n,o=g.highlightSettings.enable||o),s)break}for(var v=0,y=r;v<y.length;v++){var b=y[v];if(b.visible&&(s=b.tooltipSettings.visible||s,n=b.selectionSettings.enable||n,o=b.highlightSettings.enable||o),s)break}s=c.tooltipSettings.visible||s,n=c.selectionSettings.enable||n,o=c.highlightSettings.enable||o}if(t&&i&&s)break}return{layer:t,bubble:i,tooltip:s,selection:n,highlight:o}},t.prototype.getGeoLocation=function(e,t){var i=document.getElementById(this.element.id),s=t.layerX-i.offsetLeft,n=t.layerY-i.offsetTop,o=db(this,this.layersCollection[e],!1).location,r=o.x*this.scale,a=o.y*this.scale,l=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,h=this.clip(s-r,0,l-1)/l-.5,c=.5-this.clip(n-a,0,l-1)/l;return{latitude:90-360*Math.atan(Math.exp(2*-c*Math.PI))/Math.PI,longitude:360*h}},t.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},t.prototype.getTileGeoLocation=function(e){var t,i=document.getElementById(this.element.id),s=document.getElementById(this.element.id+"_tile_parent");return{latitude:(t=this.pointToLatLong(e.layerX+this.mapAreaRect.x-(s.offsetLeft-i.offsetLeft),e.layerY+this.mapAreaRect.y-(s.offsetTop-i.offsetTop))).latitude,longitude:t.longitude}},t.prototype.pointToLatLong=function(e,t){var i="GoogleStaticMap"===this.layers[this.layers.length-1].layerType?0:10;t=this.zoomSettings.enable?t+i:t;var s=256*Math.pow(2,this.tileZoomLevel),n=this.clip(e-this.translatePoint.x*this.scale,0,s-1)/s-.5,o=.5-this.clip(t-this.translatePoint.y*this.scale,0,s-1)/s;return{latitude:90-360*Math.atan(Math.exp(2*-o*Math.PI))/Math.PI,longitude:360*n}},jC([os(null)],t.prototype,"background",void 0),jC([os(!1)],t.prototype,"useGroupingSeparator",void 0),jC([os(null)],t.prototype,"format",void 0),jC([os(null)],t.prototype,"width",void 0),jC([os(null)],t.prototype,"height",void 0),jC([os("MouseMove")],t.prototype,"tooltipDisplayMode",void 0),jC([os(!1)],t.prototype,"allowPrint",void 0),jC([os(!1)],t.prototype,"allowImageExport",void 0),jC([os(!1)],t.prototype,"allowPdfExport",void 0),jC([rs({},uC)],t.prototype,"titleSettings",void 0),jC([rs({},mC)],t.prototype,"zoomSettings",void 0),jC([rs({},gC)],t.prototype,"legendSettings",void 0),jC([ls([],CC)],t.prototype,"layers",void 0),jC([ls([],Kb)],t.prototype,"annotations",void 0),jC([rs({},tC)],t.prototype,"margin",void 0),jC([rs({color:"#DDDDDD",width:0},Jb)],t.prototype,"border",void 0),jC([os("Material")],t.prototype,"theme",void 0),jC([os("Mercator")],t.prototype,"projectionType",void 0),jC([os(0)],t.prototype,"baseLayerIndex",void 0),jC([os(null)],t.prototype,"description",void 0),jC([os(1)],t.prototype,"tabIndex",void 0),jC([rs({latitude:null,longitude:null},$b)],t.prototype,"centerPosition",void 0),jC([rs({},xC)],t.prototype,"mapsArea",void 0),jC([cs()],t.prototype,"load",void 0),jC([cs()],t.prototype,"beforePrint",void 0),jC([cs()],t.prototype,"loaded",void 0),jC([cs()],t.prototype,"click",void 0),jC([cs()],t.prototype,"doubleClick",void 0),jC([cs()],t.prototype,"rightClick",void 0),jC([cs()],t.prototype,"resize",void 0),jC([cs()],t.prototype,"tooltipRender",void 0),jC([cs()],t.prototype,"legendRendering",void 0),jC([cs()],t.prototype,"tooltipRenderComplete",void 0),jC([cs()],t.prototype,"shapeSelected",void 0),jC([cs()],t.prototype,"itemSelection",void 0),jC([cs()],t.prototype,"itemHighlight",void 0),jC([cs()],t.prototype,"shapeHighlight",void 0),jC([cs()],t.prototype,"layerRendering",void 0),jC([cs()],t.prototype,"shapeRendering",void 0),jC([cs()],t.prototype,"markerRendering",void 0),jC([cs()],t.prototype,"markerClusterRendering",void 0),jC([cs()],t.prototype,"markerClick",void 0),jC([cs()],t.prototype,"markerClusterClick",void 0),jC([cs()],t.prototype,"markerClusterMouseMove",void 0),jC([cs()],t.prototype,"markerMouseMove",void 0),jC([cs()],t.prototype,"dataLabelRendering",void 0),jC([cs()],t.prototype,"bubbleRendering",void 0),jC([cs()],t.prototype,"bubbleClick",void 0),jC([cs()],t.prototype,"bubbleMouseMove",void 0),jC([cs()],t.prototype,"animationComplete",void 0),jC([cs()],t.prototype,"annotationRendering",void 0),jC([cs()],t.prototype,"zoom",void 0),jC([cs()],t.prototype,"pan",void 0),t=jC([ps],t)}(Ns),zC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},_C=function(){function e(e){this.id="",this.maps=e,this.bubbleCollection=[]}return e.prototype.renderBubble=function(e,t,i,s,n,o,r,a,l,h){var c,p,d=this,u=a.layerData,m=e.colorValuePath,f=ae(m)?t[m]:m.indexOf(".")>-1?Ky(t,e.colorValuePath):t[m],g=ae(m)?Number(t[m]):m.indexOf(".")>-1?Number(Ky(t,e.colorValuePath)):Number(t[m]),v=ae(e.valuePath)?Number(t[e.valuePath]):e.valuePath.indexOf(".")>-1?Number(Ky(t,e.valuePath)):Number(t[e.valuePath]);if(isNaN(v)&&isNaN(g)&&ae(f))return null;var y,b,C,S,x,w,E=(y=e.minRadius,b=e.maxRadius,C=v,S=s.min,x=s.max,w=(b-y)/100*(100/(x-S)*(C-S))+y,x===S&&(w=(b-y)/100+y),w),k=new NC(this.maps).getColorByValue(e.colorMapping,g,f);p="[object Object]"!==Object.prototype.toString.call(k)||ae(k.fill)?i:k.fill,c="[object Object]"!==Object.prototype.toString.call(k)||ae(k.opacity)?e.opacity:k.opacity;var T=[[]];this.maps.translateType="bubble";for(var L=0,D=0,I=0,O=0,A=u.length;O<A;O++){var M=u[O];M=M.property;var P=rb(t[a.shapeDataPath],a.shapePropertyPath,M);if((!ae(t[a.shapeDataPath])&&isNaN(t[a.shapeDataPath])?t[a.shapeDataPath].toLowerCase():t[a.shapeDataPath])===(!ae(M[P])&&isNaN(M[P])?M[P].toLowerCase():M[P]))if("Point"===u[O].type)T.push(this.getPoints(u[O],[]));else if(u[O]._isMultiPolygon)for(var N=u[O],R=0;R<N.length;R++)T.push(this.getPoints(N[R],[])),D<(I=T[T.length-1].length)&&(D=I,L=T.length-1);else T.push(this.getPoints(u[O],[])),D<(I=T[T.length-1].length)&&(D=I,L=T.length-1)}var B,H,F=this.maps.projectionType,j=ab(T[L],F);if(e.visible){if(ae(j)){var V=T.length-1;if(!T[V].x||!T[V].y)return;if(H={cancel:!1,name:"bubbleRendering",border:e.border,cx:T[V].x,cy:T[V].y,data:t,fill:p,maps:this.maps.isBlazor?null:this.maps,radius:E},this.maps.isBlazor){H.maps;var z=zC(H,["maps"]);H=z}}else B="Mercator"===this.maps.projectionType?j.y:-j.y,H={cancel:!1,name:"bubbleRendering",border:e.border,cx:j.x,cy:B,data:t,fill:p,maps:this.maps.isBlazor?null:this.maps,radius:E};this.maps.trigger("bubbleRendering",H,function(t){if(!H.cancel){var i,s,p,u,m;if("Circle"===e.bubbleType){var f=new zy(h,H.fill,H.border,c,0,0,H.radius,null);s=d.maps,p=f,u=l,i=nb(s.renderer.drawCircle(p),u)}else{var g="Mercator"===d.maps.projectionType?H.cy-E:H.cy+E,v=new Vy(h,H.fill,H.border,c,new Wy(0,0,2*E,2*E),2,2);H.cx-=E,H.cy=g,i=function(e,t,i){return nb(e.renderer.drawRectangle(t),i)}(d.maps,v,l)}sb(d.maps.selectedBubbleElementId,d.maps.bubbleSelectionClass,i,"BubbleselectionMapStyle"),d.bubbleCollection.push({LayerIndex:r,BubbleIndex:n,DataIndex:o,element:i,center:{x:H.cx,y:H.cy}});var y=0!==a.animationDuration||ae(d.maps.zoomModule);m=d.maps.zoomSettings.zoomFactor>1&&!ae(d.maps.zoomModule)?ub(d.maps,a,y):db(d.maps,a,y);var b=e.dataSource,C=m.scale,S=m.location,x=new qy(d.maps.isTileMap?H.cx:(H.cx+S.x)*C,d.maps.isTileMap?H.cy:(H.cy+S.y)*C);i.setAttribute("transform","translate( "+x.x+" "+x.y+" )");var w=b.length-1===o?"bubble":null;"Square"===e.bubbleType?(x.x+=E,x.y+=E*("Mercator"===d.maps.projectionType?1:-1)):E=0,e.animationDuration>0&&Tb(i,e.animationDelay,e.animationDuration,x,d.maps,w,E)}})}},e.prototype.getPoints=function(e,t){return ae(e.map)?t=e.point:e.map(function(e,i){t.push(new Py(e.point.x,e.point.y))}),t},e.prototype.bubbleClick=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")){var i=this.getbubble(t);if(!ae(i)){var s={cancel:!1,name:"bubbleClick",data:i,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){s.maps;s=zC(s,["maps"])}this.maps.trigger("bubbleClick",s)}}},e.prototype.getbubble=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10),s=this.maps.layers[i];if(e.indexOf("_BubbleIndex_")>-1){var n=parseInt(t[1].split("_BubbleIndex_")[1],10),o=parseInt(t[1].split("_BubbleIndex_")[1].split("_dataIndex_")[1],10);if(!isNaN(n))return s.bubbleSettings[n].dataSource[o]}return null},e.prototype.bubbleMove=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")){var i=this.getbubble(t);if(!ae(i)){var s={cancel:!1,name:"bubbleMouseMove",data:i,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){s.maps;s=zC(s,["maps"])}this.maps.trigger("bubbleMouseMove",s)}}},e.prototype.getModuleName=function(){return"Bubble"},e.prototype.destroy=function(e){},e}(),qC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},WC=function(){function e(e){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0},this.maps=e,this.dataLabelCollections=[]}return e.prototype.getDataLabel=function(e,t,i,s){for(var n,o=0;o<e.length;o++){var r,a=e[o];if(r=!ae(a[s])&&isNaN(a[s])?a[s].toLowerCase():a[s],i=ae(i)?i:i.toString(),r===(ae(i)?i:i.toLowerCase())){n=a;break}}return n},e.prototype.renderLabel=function(e,t,i,s,n,o,r,a){var l,h,c,p,d,u,m,f,g=this,v=e.dataLabelSettings,y=e.dataLabelSettings.textStyle,b=e.dataLabelSettings,C=e.dataLabelSettings.labelPath,S=[[]],x=0,w=0,E=i,k="",T=0,L=!1,D=i.properties,I=this.maps.element.id+"_LayerIndex_"+t+"_shapeIndex_"+r+"_LabelIndex_"+r,O=new Py(0,0),A=s[r];y.fontFamily="material"!==this.maps.theme.toLowerCase()?this.maps.themeStyle.labelFontFamily:y.fontFamily,i=A.property;var M,P,N="[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)?e.shapePropertyPath:[e.shapePropertyPath],R=!1,B=0!==e.animationDuration||ae(this.maps.zoomModule),H=this.maps.isTileMap?new Object:this.maps.zoomSettings.zoomFactor>1&&!ae(this.maps.zoomModule)?ub(this.maps,e,B):db(this.maps,e,B),F=this.maps.isTileMap?this.maps.scale:H.scale,j=this.maps.isTileMap?this.maps.translatePoint:H.location,V=this.maps.zoomTranslatePoint,z=ae(this.maps.scale)?1:Math.floor(this.maps.scale),_=this.maps.zoomSettings.enable?!ae(this.maps.zoomShapeCollection)&&this.maps.zoomShapeCollection.length>0:this.maps.zoomSettings.enable;this.maps.translateType="labels";for(var q=0;q<N.length&&!(D[N[q]]&&(M=N[q],p=this.getDataLabel(e.dataSource,e.shapeDataPath,E.properties[M],e.shapeDataPath)));q++);if(p=this.getDataLabel(e.dataSource,e.shapeDataPath,E.properties[M],e.shapeDataPath),!ae(A.property))if(S=[[]],s[r]._isMultiPolygon||"Point"===s[r].type){var W=s[r];if("Point"===W.type){R=!0;var U=[];U.push(this.getPoint(s,[])),w<(T=(S=U)[S.length-1].length)&&(w=T,x=S.length-1)}for(q=0;q<W.length;q++)S.push(this.getPoint(W[q],[])),w<(T=S[S.length-1].length)&&(w=T,x=S.length-1)}else S.push(this.getPoint(s[r],[])),w<(T=S[S.length-1].length)&&(w=T,x=S.length-1);if(k=ae(p)?E.properties[C]:ae(p[C])?p[e.shapeDataPath]:p[e.shapeDataPath].toString(),"[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)&&ae(k)&&0===e.dataSource.length)for(var G=0;G<e.shapePropertyPath.length;G++)if(E.properties[e.shapePropertyPath[G]]){k=E.properties[e.shapePropertyPath[G]];break}ae(k)&&""!==e.dataLabelSettings.template&&0===e.dataSource.length&&(k=E.properties[e.shapePropertyPath]);var Y=k,X=this.maps.projectionType,K=u=R?{x:S[x][r].x,y:S[x][r].y,rightMin:0,rightMax:0,leftMin:0,leftMax:0,points:S[x][r],topMax:0,topMin:0,bottomMax:0,bottomMin:0,height:0}:ab(S[x],X);if(!ae(k)&&!ae(u)){if(_&&z>1&&!this.maps.zoomNotApplied&&""===v.template){if(t>0)for(var Z=0;Z<this.maps.zoomLabelPositions.length;Z++)if(this.maps.zoomLabelPositions[Z].dataLabelText===k){d=r,r=Z,L=!0;break}m=u.x,f=u.y,u.x=(u.x+V.x)*F,u.y=(u.y+V.y)*F}u.y="Mercator"===this.maps.projectionType?u.y:-u.y,u,ae(this.maps.format)||isNaN(parseFloat(k))||this.maps.useGroupingSeparator&&(k=fb(this.maps,parseFloat(k)),ae(p)||(p[C]=k));var Q={name:"dataLabelRendering",maps:this.maps,cancel:!1,border:v.border,datalabel:v,fill:v.fill,template:v.template,text:k};if(this.maps.isBlazor){Q.maps,Q.datalabel;var J=qC(Q,["maps","datalabel"]);Q=J}this.maps.trigger("dataLabelRendering",Q,function(e){if(!Q.cancel){var i,s=_&&z>1&&!g.maps.zoomNotApplied&&g.maps.zoomShapeCollection.length>r?g.maps.zoomShapeCollection[r].width:(u.rightMax.x-u.leftMax.x)*F;ae(g.maps.dataLabelShape)||(P=K.rightMax.x-K.leftMax.x,g.maps.dataLabelShape.push(P)),Q.text===k||Q.cancel||(k=Q.text);var v=By(k,y),C=k,w=v,T=u.y-v.height/4,D=u.y+v.height/4,A=(u.y+j.y)*F-v.height/4,M=(u.y+j.y)*F+v.height/4;if(i=function(e,t,i){for(var s=[],n=0;n<e.length;n++){var o=e[n];t<=o.y&&i>=o.y&&s.push(o)}return s}(S[x],T,D),!R&&i.length>5&&"MultiPolygon"!==E.geometry.type&&"MultiPolygon"!==E.type){var N=ab(i,X);_&&z>1&&!g.maps.zoomNotApplied&&""===Q.template&&(N.x=(g.maps.zoomLabelPositions[r].location.x+V.x)*F,N.y=(g.maps.zoomLabelPositions[r].location.y+V.y)*F),m=N.x,u.x=N.x,s=_&&z>1&&!g.maps.zoomNotApplied&&g.maps.zoomShapeCollection.length>r?g.maps.zoomShapeCollection[r].width:(N.rightMax.x-N.leftMax.x)*F}var B,H=(u.x+j.x)*F+v.width/2,q=(u.x+j.x)*F-v.width/2;if(g.value[r]={rightWidth:H,leftWidth:q,heightTop:A,heightBottom:M},""!==Q.template){var W=(l=gb(Q.template))?l(ae(p)?E.properties:p,g.maps,Q.template,g.maps.element.id+"_LabelTemplate",!1):document.createElement("div");W.innerHTML=l?"":Q.template,(B=function(e,t,i,s,n){for(var o=(ae(e.childElementCount)?e[0]:e).outerHTML,r=Object.keys(i),a=0;a<r.length;a++)o=o.replace(new RegExp("{{:"+r[a]+"}}","g"),i[r[a].toString()]);return yi("div",{id:t,innerHTML:o,styles:"position: absolute"})}(W,I,ae(p)?E.properties:p,0,g.maps)).style.left=Math.abs(g.maps.baseMapRectBounds.min.x-u.x)*F+"px",B.style.top=Math.abs(g.maps.baseMapRectBounds.min.y-u.y)*F+"px",o.appendChild(B)}else{if("Trim"===b.smartLabelMode&&(w=By(C=hb(s,k,y),y),h=new Hy(I,O.x,O.y,"middle",C,"","")),"None"===b.smartLabelMode&&(h=new Hy(I,O.x,O.y,"middle",k,"","")),"Hide"===b.smartLabelMode&&(k=s>=v.width?k:"",h=new Hy(I,O.x,O.y,"middle",k,"","")),k=h.text,"Hide"===b.intersectionAction){for(var U=0;U<a.length;U++)if(!ae(a[U])){if(!(g.value[r].leftWidth>a[U].rightWidth||g.value[r].rightWidth<a[U].leftWidth||g.value[r].heightTop>a[U].heightBottom||g.value[r].heightBottom<a[U].heightTop)){k="";break}k=k}a.push(g.value[r]),h=new Hy(I,O.x,O.y,"middle",k,"","")}if("Trim"===b.intersectionAction){for(var G=0;G<a.length;G++)if(!ae(a[G]))if(a[G].rightWidth<g.value[r].leftWidth||a[G].leftWidth>g.value[r].rightWidth||a[G].heightBottom<g.value[r].heightTop||a[G].heightTop>g.value[r].heightBottom)C=k,0;else{if(g.value[r].leftWidth>a[G].leftWidth){C=hb((s=a[G].rightWidth-g.value[r].leftWidth)-(g.value[r].rightWidth-g.value[r].leftWidth),k,y);break}if(g.value[r].leftWidth<a[G].leftWidth){s=g.value[r].rightWidth-a[G].leftWidth,C=hb(Math.abs(s-(g.value[r].rightWidth-g.value[r].leftWidth)),k,y);break}}w=By(C,y),a.push(g.value[r]),h=new Hy(I,O.x,O.y,"middle",C,"","")}if("None"===b.intersectionAction&&(h=new Hy(I,O.x,O.y,"middle",k,"","")),C.length>1){var Z=Q.border;if(Z.width>1){var J=Q.fill,$=b.opacity,ee=b.rx,te=b.ry,ie=void 0,se=void 0;_&&z>1&&!g.maps.zoomNotApplied?(ie=u.x-v.width/2,se=u.y-v.height/2-5):(ie=(u.x+j.x)*F-v.width/2,se=(u.y+j.y)*F-v.height/2);var ne=new Vy(g.maps.element.id+"_LayerIndex_"+t+"_shapeIndex_"+r+"_rectIndex_"+r,J,Z,$,new Wy(ie,se,v.width,v.height),ee,te),oe=g.maps.renderer.drawRectangle(ne);n.appendChild(oe)}}c=Uy(h,y,y.color||g.maps.themeStyle.dataLabelFontColor,n),_&&z>1&&!g.maps.zoomNotApplied?(c.setAttribute("transform","translate( "+u.x+" "+u.y+" )"),u.x=m,u.y=f):c.setAttribute("transform","translate( "+(u.x+j.x)*F+" "+((u.y+j.y)*F+w.height/4)+" )"),n.appendChild(c)}g.dataLabelCollections.push({location:{x:u.x,y:u.y},element:ae(B)?c:B,layerIndex:t,shapeIndex:L?d:r,labelIndex:L?d:r,dataLabelText:Y}),o.childElementCount>0&&!g.maps.element.contains(o)&&(document.getElementById(g.maps.element.id+"_Secondary_Element").appendChild(o),g.maps.renderReactTemplates())}})}},e.prototype.getPoint=function(e,t){return e.map(function(e,i){t.push(new Py(e.point.x,e.point.y))}),t},e.prototype.getModuleName=function(){return"DataLabel"},e.prototype.destroy=function(e){},e}(),UC=function(){function e(e){this.maps=e}return e.prototype.renderNavigation=function(e,t,i){var s,n,o;n=e.navigationLineSettings;for(var r,a,l,h,c,p,d,u,m,f,g,v,y,b,C,S,x,w,E,k=[],T=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_line_Group"}),L=0;L<n.length;L++){if(r=n[L].properties.latitude,o=n[L].properties.longitude,a=n[L].properties.visible,l=n[L].angle,h=n[L].width||1,c=n[L].color,p=n[L].properties.dashArray,m=!ae(v=n[L].properties.arrowSettings)&&v.properties.showArrow,o.length===r.length&&a)for(var D=0;D<o.length;D++){var I=this.maps.isTileMap?Oy(new Py(o[D],r[D]),t,this.maps.tileTranslatePoint,!0):Iy(r[D],o[D],t,e,this.maps);k.push(I)}w=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_NavigationGroup"+L});for(var O=0;O<k.length-1;O++){l=1<(l=-1>l?-1:l)?1:l;var A=this.maps.element.id+"_LayerIndex_"+i+"_NavigationIndex_"+L+"_Line"+O,M=this.convertRadius(k[O],k[O+1]);if(l<=1&&l>0&&(u=0,k[O].x>k[O+1].x&&(u=1)),l>=-1&&l<0&&(u=1,k[O].x>k[O+1].x&&(u=0)),k[O].x!==k[O+1].x){if(m){f=v.properties.color,g=v.properties.size,x=void 0===v.properties.offSet?0:v.properties.offSet;var P=Math.round(g/2);b="Start"===(y=v.properties.position)?"url(#triangle"+L+")":null,C="End"===y?"url(#triangle"+L+")":null,0!==S&&0===l&&(S="Start"===y?x:-x),S=ae(S)?0:S;var N=this.maps.element.id+"_triangle",R=this.maps.renderer.createDefs();R.innerHTML+='<marker id="triangle'+L+'"></marker>';var B=R.querySelector("#triangle"+L);B.setAttribute("markerWidth",g.toString()),B.setAttribute("markerHeight",g.toString()),B.setAttribute("refX",(P-S).toString()),B.setAttribute("refY",P.toString()),B.setAttribute("orient","auto"),d=new Fy(N,f,h,c,1,p,"M 0,0  L 0,"+g+" L "+P+", "+P+" Z"),s=this.maps.renderer.drawPath(d),B.appendChild(s),R.appendChild(B),w.appendChild(R)}E=0===(l=Math.abs(l))?"M "+k[O].x+","+k[O].y+"L "+k[O+1].x+","+k[O+1].y+" ":"M "+k[O].x+","+k[O].y+" A "+(M/2+(1-l)*M/(10*l))+" "+(M/2+(1-l)*M/(10*l))+" 0,0,"+u+" , "+k[O+1].x+","+k[O+1].y+" ",d=new Fy(A,"none",h,c,1,p,E),s=this.maps.renderer.drawPath(d),ae(y)||("Start"===y?s.setAttribute("marker-start",b):s.setAttribute("marker-end",C)),sb(this.maps.selectedNavigationElementId,this.maps.navigationSelectionClass,s,"navigationlineselectionMapStyle"),w.appendChild(s),T.appendChild(w)}}k=[]}return T},e.prototype.convertRadius=function(e,t){var i=t.x-e.x,s=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))},e.prototype.getModuleName=function(){return"NavigationLine"},e.prototype.destroy=function(e){},e}(),GC=function(){function e(e){this.legendBorderRect=new Wy(0,0,0,0),this.totalPages=[],this.page=0,this.currentPage=0,this.legendItemRect=new Wy(0,0,0,0),this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.shapeHighlightCollection=[],this.legendHighlightCollection=[],this.shapePreviousColor=[],this.selectedNonLegendShapes=[],this.shapeToggled=!0,this.legendElement=null,this.maps=e,this.addEventListener()}return e.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollection=[],this.totalPages=[],this.widthIncrement=0,this.heightIncrement=0,this.defsElement=this.maps.renderer.createDefs(),this.maps.svgObject.appendChild(this.defsElement),this.calculateLegendBounds(),this.drawLegend()},e.prototype.calculateLegendBounds=function(){var e=this,t=this.maps,i=t.legendSettings;this.legendCollection=[];var s=t.mapAreaRect.y;if(this.legendRenderingCollections=[],Array.prototype.forEach.call(t.layersCollection,function(t,s){if(!ae(t.shapeData)){var n=t.shapeData.features,o=t.shapeDataPath,r=t.shapePropertyPath,a=t.dataSource,l=void 0,h=void 0;if("Layers"===i.type&&t.visible)l=t.shapeSettings.colorValuePath,h=t.shapeSettings.colorMapping,e.getLegends(s,n,h,a,o,l,r);else if("Bubbles"===i.type)for(var c=0,p=t.bubbleSettings;c<p.length;c++){var d=p[c];d.visible&&(l=d.colorValuePath,h=d.colorMapping,a=d.dataSource,e.getLegends(s,n,h,a,o,l,r))}else e.getMarkersLegendCollections(s,t.markerSettings)}}),this.legendCollection.length>0)for(var n=0;n<this.legendCollection.length;n++){var o={name:"legendRendering",cancel:!1,fill:(_=this.legendCollection[n]).fill,shape:i.shape,shapeBorder:i.shapeBorder,text:"number"==typeof _.text?_.text.toString():_.text};t.trigger("legendRendering",o),_.fill=o.fill,_.shape=o.shape,_.shapeBorder=o.shapeBorder,_.text=o.text,o.cancel&&(this.legendCollection.splice(n,1),n--)}var r=t.legendSettings.title.text,a=t.legendSettings.titleStyle;if(this.legendCollection.length>0){var l,h,c=i.mode,p=0,d=0,u=0,m=0,f=i.shapePadding,g=i.shapeHeight,v=i.shapeWidth,y=[],b=[],C=i.position,S=i.labelDisplayMode,x="None"===i.orientation?"Top"===C||"Bottom"===C?"Horizontal":"Vertical":i.orientation,w=i.width.length>1?i.width.indexOf("%")>-1?t.availableSize.width/100*parseInt(i.width,10):parseInt(i.width,10):null,E=i.height.length>1?i.height.indexOf("%")>-1?t.availableSize.height/100*parseInt(i.height,10):parseInt(i.height,10):null,k=0,T=0,L=By(r,a);if("Interactive"===c){var D,I,O=i.textStyle,A=this.legendCollection.length;D="Horizontal"===x?ae(w)?t.mapAreaRect.width/A:w/A:ae(w)?25:w,I="Horizontal"===x?ae(E)?25:E:ae(E)?t.mapAreaRect.height/A:E/A,k=0,T=L.height+10;var M=i.labelPosition,P=0,N=0,R=0,B=0,H=0,F=0;for(n=0;n<this.legendCollection.length;n++){k="Horizontal"===x?k+D:k,T="Horizontal"===x?T:T+I;var j=this.legendCollection[n].text,V=new wy(0,0);"None"===S?V=By(j,O):"Trim"===S?V=By(j=hb("Horizontal"===x?D:I,j,O),O):j="",H=Math.max(H,V.height),F=Math.max(F,V.width),V.width>0&&V.height>0&&("Horizontal"===x?(P=k+D/2,N="After"===M?T+I+V.height/2+10:T-10):(P="After"===M?k-V.width/2-10:k+D+V.width/2+10,N=T+I/2+V.height/4)),0===n?(R="Horizontal"===x?k:"After"===M?P-V.width/2:k,B="Horizontal"===x?"After"===M?T:N-V.height/2:T,1===this.legendCollection.length&&(w="Horizontal"===x?Math.abs(k+D-R):D+F+10,E="Horizontal"===x?I+H/2+10:Math.abs(T+I-B))):n===this.legendCollection.length-1&&(w="Horizontal"===x?Math.abs(k+D-R):D+F+10,E="Horizontal"===x?I+H/2+10:Math.abs(T+I-B)),this.legendRenderingCollections.push({fill:this.legendCollection[n].fill,x:k,y:T,width:D,height:I,text:j,textX:P,textY:N,textWidth:V.width,textHeight:V.height,shapeBorder:this.legendCollection[n].shapeBorder})}1===this.legendCollection.length&&(E=I,w=D),this.legendItemRect={x:R,y:B,width:w,height:E}}else{w=ae(w)?t.mapAreaRect.width:w,E=ae(E)?t.mapAreaRect.height:E;var z=0;this.page=0;for(n=0;n<this.legendCollection.length;n++){var _=this.legendCollection[n];ae(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]});var q=By(_.text,i.textStyle);if(this.textMaxWidth=Math.max(this.textMaxWidth,q.width),0===n)k=p=10+v/2,T=d=s+L.height+(g>q.height?g/2:q.height/4);else{var W=q.height>g?q.height:g;if("Horizontal"===x){var U=b[z-1].x+b[z-1].width+10+v;if(U+f+q.width>w){var G=(b[z-1].y>y[z-1].y+g/2?b[z-1].y:y[z-1].y+g/2)+s;G+W>E?(this.getPageChanged(),z=0,y=[],b=[],[],p=k,d=T):(p=y[0].x,d=G+W/2)}else p=U-v/2,d=y[z-1].y}else{var Y=b[z-1].y>y[z-1].y+g/2?b[z-1].y:y[z-1].y+g/2;if(Y+s+W>E){var X=b[z-1].x+this.textMaxWidth+10;X+f+q.width>w?(p=k,d=T,[],b=[],y=[],this.getPageChanged(),z=0):(p=X+v/2,d=y[0].y)}else p=y[z-1].x,d=Y+s+g/2}}u=p+v/2+f,m=d+q.height/4,y.push({x:p,y:d}),b.push({x:u,y:m,width:q.width,height:q.height/2}),this.totalPages[this.page].Collection.push({DisplayText:_.text,ImageSrc:_.imageSrc,Shape:{x:p,y:d},Text:{x:u,y:m},Fill:_.fill,legendShape:_.shape,shapeBorder:_.shapeBorder,idIndex:n,Rect:{x:y[z].x-v/2,y:y[z].y-g/2<m-q.height?y[z].y-g/2:m-q.height,width:Math.abs(y[z].x-v/2-(u+q.width)),height:g>q.height?g:q.height}}),z++}var K=this.totalPages[0].Collection;Array.prototype.forEach.call(K,function(t,i){var s=new Wy(t.Rect.x,t.Rect.y,t.Rect.width,t.Rect.height);0===i&&(l=s.x,h=s.y),e.widthIncrement=Math.max(e.widthIncrement,Math.abs(l-(s.x+s.width))),e.heightIncrement=Math.max(e.heightIncrement,Math.abs(h-(s.y+s.height)))}),w=this.widthIncrement<w?this.widthIncrement:w,E=this.heightIncrement<E?this.heightIncrement:E,this.legendItemRect={x:K[0].Rect.x,y:K[0].Rect.y,width:w,height:E}}}},e.prototype.getLegends=function(e,t,i,s,n,o,r){this.getRangeLegendCollection(e,t,i,s,n,o,r),this.getEqualLegendCollection(e,t,i,s,n,o,r),this.getDataLegendCollection(e,t,i,s,n,o,r)},e.prototype.getPageChanged=function(){this.page++,ae(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},e.prototype.legendTextTrim=function(e,t,i,s){var n=t,o=By(t,i).width,r=s-o;if(s>e)for(var a=t.length-1;a>=0;--a){if(r+(o=By(n=t.substring(0,a)+"...",i).width)<=e||n.length<4)return n.length<4&&(n=" "),n}return n},e.prototype.drawLegend=function(){var e,t=this.maps,i=t.legendSettings,s=t.renderer,n=i.textStyle;if(this.legendGroup=s.createGroup({id:t.element.id+"_Legend_Group"}),"Interactive"===i.mode)for(var o=0;o<this.legendRenderingCollections.length;o++){var r=t.element.id+"_Legend_Index_"+o,a=t.element.id+"_Legend_Index_"+o+"_Text",l=this.legendRenderingCollections[o],h=new Wy(l.x,l.y,l.width,l.height);0===o&&this.renderLegendBorder();var c=new Py(l.textX,l.textY);n.color=null!==n.color?n.color:this.maps.themeStyle.legendTextColor;var p=new Vy(r,l.fill,l.shapeBorder,i.opacity,h);e=new Hy(a,c.x,c.y,"middle",l.text,"",""),n.fontFamily=t.themeStyle.fontFamily||n.fontFamily,n.size=t.themeStyle.legendFontSize||n.size,Uy(e,n,n.color,this.legendGroup),this.legendGroup.appendChild(s.drawRectangle(p)),this.legendToggle()}else this.drawLegendItem(this.currentPage)},e.prototype.drawLegendItem=function(e){var t=this.maps,i=t.legendSettings,s=new wy(i.shapeWidth,i.shapeHeight),n=t.renderer;if(e>=0&&e<this.totalPages.length){Cb(this.legendGroup.id,this.maps.element.id)&&Li(Cb(this.legendGroup.id,this.maps.element.id));for(var o=0;o<this.totalPages[e].Collection.length;o++){var r=this.totalPages[e].Collection[o],a=r.shapeBorder,l=n.createGroup({id:t.element.id+"_Legend_Index_"+r.idIndex}),h=r.DisplayText,c="Markers"===i.type?ae(r.ImageSrc)?i.shape:"Image":r.legendShape,p="HorizontalLine"===i.shape||"VerticalLine"===i.shape||"Cross"===i.shape?ae(i.fill)?"#000000":i.fill:a.color,d=("HorizontalLine"===i.shape||"VerticalLine"===i.shape||"Cross"===i.shape)&&0===a.width?1:a.width,u=t.element.id+"_Legend_Shape_Index_"+r.idIndex,m=t.element.id+"_Legend_Text_Index_"+r.idIndex,f=r.Shape,g=r.Text,v=(ae(r.ImageSrc)?i.shape:r.ImageSrc,new Fy(u,r.Fill,d,p,i.opacity,""));i.textStyle.color=null!==i.textStyle.color?i.textStyle.color:this.maps.themeStyle.legendTextColor,i.textStyle.fontFamily=t.themeStyle.fontFamily||i.textStyle.fontFamily,i.textStyle.size=t.themeStyle.legendFontSize||i.textStyle.size,0===o&&this.renderLegendBorder(),l.appendChild(Ob(f,c,s,r.ImageSrc,v));var y=r.Rect.x+r.Rect.width;if(y>this.legendBorderRect.width)h=this.legendTextTrim(this.legendBorderRect.width,h,i.textStyle,y);if(Uy(new Hy(m,g.x,g.y,"start",h,"",""),i.textStyle,i.textStyle.color,l),this.legendGroup.appendChild(l),o===this.totalPages[e].Collection.length-1){var b=void 0;if(0!==this.page){var C=e+1+"/"+this.totalPages.length,S=i.textStyle,x=By(C,S),w=this.legendItemRect.x+this.legendItemRect.width-x.width-20-10,E=this.legendItemRect.x+this.legendItemRect.width,k=this.legendItemRect.y+this.legendItemRect.height+2.5+10,T=E-10-x.width/2-5;b=n.createGroup({id:t.element.id+"_Legend_Paging_Group"});var L=n.createGroup({id:t.element.id+"_Legend_Left_Paging_Group"}),D=n.createGroup({id:t.element.id+"_Legend_Right_Paging_Group"}),I=" M "+E+" "+k+" L "+(E-10)+" "+(k-5)+" L "+(E-10)+" "+(k+5)+" z ",O=" M "+w+" "+k+" L "+(w+10)+" "+(k-5)+" L "+(w+10)+" "+(k+5)+" z ",A=new Fy(t.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",O);L.appendChild(n.drawPath(A));var M=new Vy(t.element.id+"_Left_Page_Rect","transparent",{},1,new Wy(w-5,k-10,20,20),null,null,"","");L.appendChild(n.drawRectangle(M)),this.wireEvents(L);var P=new Fy(t.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",I);D.appendChild(n.drawPath(P));var N=new Vy(t.element.id+"_Right_Page_Rect","transparent",{},1,new Wy(E-10,k-5,10,10),null,null,"","");D.appendChild(n.drawRectangle(N)),this.wireEvents(D),b.appendChild(L),b.appendChild(D);var R={id:t.element.id+"_Paging_Text",x:T,y:k+x.height/4,fill:"#a6a6a6","font-size":"14px","font-style":S.fontStyle,"font-family":S.fontFamily,"font-weight":S.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};b.appendChild(n.createText(R,C)),this.legendGroup.appendChild(b)}this.legendToggle()}}}},e.prototype.legendHighLightAndSelection=function(e,t){var i,s,n,o;o="Default"===this.maps.legendSettings.mode?document.getElementById(e.id.replace("Shape","Text")):document.getElementById(e.id+"_Text");var r,a=this.maps.legendModule.legendCollection,l=this.maps.layers[a[0].data[0].layerIndex].selectionSettings.enableMultiSelect,h=0,c=!0,p=parseFloat(e.id.charAt(e.id.length-1));this.updateLegendElement();var d=this.maps.toggledLegendId.indexOf(p);if(this.maps.legendSettings.toggleLegendSettings.enable&&"highlight"===t&&-1!==d){var u=this.getIndexofLegend(this.legendHighlightCollection,e);return-1!==u&&this.legendHighlightCollection.splice(u,1),this.removeLegendHighlightCollection(),null}if("selection"===t){if(this.shapeHighlightCollection=[],this.maps.shapeSelections||l||(this.removeAllSelections(),this.maps.shapeSelections=!0),this.maps.legendSelectionCollection.length>0&&(l||this.maps.shapeSelections))for(var m=0;m<this.maps.legendSelectionCollection.length;m++){if(e===this.maps.legendSelectionCollection[m].legendElement){this.maps.legendSelectionCollection[m].legendElement=e,c=!1,this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[m].legendElement),this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(p),1),this.maps.legendSelectionCollection.splice(m,1),this.maps.legendSelection=!(this.maps.legendSelectionCollection.length>0);break}if(!l)if(this.maps.legendSelectionCollection.length>1){for(var f=0;f<this.maps.legendSelectionCollection.length;f++)this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[f].legendElement);this.maps.legendSelectionCollection=[]}else this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[m].legendElement),this.maps.legendSelectionCollection.splice(m,1)}}else{if(this.maps.legendSelectionCollection.length>0)for(m=0;m<this.maps.legendSelectionCollection.length;m++){if((e.id.indexOf("_Legend_Shape")>-1||e.id.indexOf("_Legend_Index"))&&e===this.maps.legendSelectionCollection[m].legendElement){c=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(c)for(var g=0;g<a.length;g++){var v="Interactive"===this.maps.legendSettings.mode?parseFloat(e.id.split("_Legend_Index_")[1]):parseFloat(e.id.split("_Legend_Shape_Index_")[1]);if(o.textContent===a[g].text&&a[g].data.length>0&&v===g){var y=this.maps.layers[a[g].data[0].layerIndex],b=void 0,C=void 0,S=void 0;if(ae(y)||(b="selection"===t?y.selectionSettings.enable:y.highlightSettings.enable,C=void 0,C="selection"===t?y.selectionSettings:y.highlightSettings,S=a[g].data),b)for(var x=0;x<S.length;x++){i=S[x].shapeIndex,s=S[x].layerIndex,n=S[x].dataIndex;var w=document.getElementById(this.maps.element.id+"_LayerIndex_"+s+"_shapeIndex_"+i+"_dataIndex_"+n);if(null!==w){var E=!0;if(null!==this.maps.legendSelectionCollection)for(var k=0;k<this.maps.legendSelectionCollection.length;k++)if(this.maps.legendSelectionCollection[k].legendElement===e){E=!1;break}if("highlight"===t&&E){0===x&&(this.legendHighlightCollection=[],this.pushCollection(e,this.legendHighlightCollection,a[g],y.shapeSettings)),r=this.legendHighlightCollection.length;var T=this.legendHighlightCollection[r-1].legendOldFill;this.legendHighlightCollection[r-1].MapShapeCollection.Elements.push(w);var L=this.legendHighlightCollection[r-1].MapShapeCollection.Elements.length-1,D=w.getAttribute("fill");this.legendHighlightCollection[r-1].shapeOldFillColor.push(D);var I=this.legendHighlightCollection[r-1].shapeOldFillColor[L];this.shapePreviousColor=this.legendHighlightCollection[r-1].shapeOldFillColor,this.setColor(w,ae(C.fill)?I:C.fill,C.opacity.toString(),C.border.color,C.border.width.toString(),"highlight"),this.setColor(e,ae(C.fill)?T:C.fill,C.opacity.toString(),C.border.color,C.border.width.toString(),"highlight")}else if("selection"===t){this.legendHighlightCollection=[],this.maps.legendSelectionClass=C,0===x&&(this.pushCollection(e,this.maps.legendSelectionCollection,a[g],y.shapeSettings),l?this.maps.selectedLegendElementId.push(g):0===this.maps.selectedLegendElementId.length?this.maps.selectedLegendElementId.push(g):(this.maps.selectedLegendElementId=[],this.maps.selectedLegendElementId.push(g))),h=this.maps.legendSelectionCollection.length;var O;O=this.maps.legendSelectionCollection[h-1].legendOldFill,this.maps.legendSelectionCollection[h-1].MapShapeCollection.Elements.push(w),this.maps.legendSelectionCollection[h-1].shapeOldFillColor=this.shapePreviousColor,this.setColor(e,ae(C.fill)?O:C.fill,C.opacity.toString(),C.border.color,C.border.width.toString(),"selection"),this.setColor(w,ae(C.fill)?O:C.fill,C.opacity.toString(),C.border.color,C.border.width.toString(),"selection"),-1===this.maps.selectedElementId.indexOf(w.getAttribute("id"))&&this.maps.selectedElementId.push(w.getAttribute("id")),x===S.length-1&&(this.maps.legendSelection=!1,this.removeLegend(this.maps.legendSelectionCollection))}}}}}},e.prototype.setColor=function(e,t,i,s,n,o){"selection"===o?(!function(e,t,i,s,n,o,r){var a;vb(e)||(a=yi("style",{id:e,innerHTML:"."+t+"{fill:"+i+";opacity:"+s+";stroke-width:"+o+";stroke:"+n+";}"}),r.shapeSelectionClass=a,document.body.appendChild(a))}("ShapeselectionMap","ShapeselectionMapStyle",t,i,s,n,this.maps),e.setAttribute("class","ShapeselectionMapStyle")):(e.setAttribute("fill",t),e.setAttribute("opacity",i),e.setAttribute("stroke",s),e.setAttribute("stroke-width",(Number(n)/this.maps.scale).toString()))},e.prototype.pushCollection=function(e,t,i,s){t.push({legendElement:e,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:s.opacity,shapeOldBorderColor:s.border.color,shapeOldBorderWidth:s.border.width}),length=t.length,t[length-1].MapShapeCollection={Elements:[]},t[length-1].shapeOldFillColor=[]},e.prototype.removeLegend=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.setColor(i.legendElement,i.legendOldFill,i.legendOldOpacity,i.legendOldBorderColor,i.legendOldBorderWidth,"highlight");for(var s=i.MapShapeCollection.Elements.length,n=0;n<s;n++){var o=-1!==i.legendOldFill.indexOf("url")?i.shapeOldFillColor[n]:i.legendOldFill;this.setColor(i.MapShapeCollection.Elements[n],o,i.shapeOpacity,i.shapeOldBorderColor,i.shapeOldBorderWidth,"highlight")}}},e.prototype.removeLegendHighlightCollection=function(){this.legendHighlightCollection.length>0&&(this.removeLegend(this.legendHighlightCollection),this.legendHighlightCollection=[])},e.prototype.removeLegendSelectionCollection=function(e){if(this.maps.legendSelectionCollection.length>0){kb(e);for(var t=this.shapesOfLegend(e),i=t.length,s=0;s<i;s++){var n=vb(t[s]);if("ShapeselectionMapStyle"===n.getAttribute("class")){kb(n);var o;-1!==(o=this.maps.selectedElementId.indexOf(n.id))&&this.maps.selectedElementId.splice(o,1)}}}},e.prototype.removeShapeHighlightCollection=function(){if(this.shapeHighlightCollection.length>0)for(var e=0;e<this.shapeHighlightCollection.length;e++){for(var t=this.shapeHighlightCollection[e],i=!0,s=0;s<this.maps.legendSelectionCollection.length;s++)this.maps.legendSelectionCollection[s].legendElement===t.legendElement&&(i=!1);i&&this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth,"highlight")}},e.prototype.shapeHighLightAndSelection=function(e,t,i,s,n){if(void 0!==t){this.updateLegendElement(),this.shapeToggled=!0;var o=this.maps.legendModule.legendCollection,r=this.legendIndexOnShape(t,n),a=this.shapeDataOnLegend(e),l=this.maps.toggledLegendId.indexOf(r.actualIndex);if(this.maps.legendSettings.toggleLegendSettings.enable&&-1!==l){this.shapeToggled=!1,this.legendHighlightCollection=[];var h=this.getIndexofLegend(this.shapeHighlightCollection,a.LegendEle);return-1!==h&&this.shapeHighlightCollection.splice(h,1),this.removeShapeHighlightCollection(),null}if(void 0===r.currentIndex&&void 0===r.actualIndex)return this.removeShapeHighlightCollection(),null;if(void 0!==r.currentIndex||"selection"!==s||this.maps.layers[n].selectionSettings.enableMultiSelect||"ShapeselectionMapStyle"===e.getAttribute("class")||(this.maps.legendSelection=!1),"selection"!==s||this.maps.layers[n].selectionSettings.enableMultiSelect||this.maps.legendSelection||(this.removeAllSelections(),this.maps.legendSelection=!0),void 0===r.currentIndex){if("selection"===s&&void 0!==r.actualIndex){for(var c=0,p=0;p<a.Elements.length;p++)"ShapeselectionMapStyle"===a.Elements[p].getAttribute("class")&&c++;var d=this.maps.selectedLegendElementId.indexOf(r.actualIndex);-1===d?(this.maps.selectedLegendElementId.push(r.actualIndex),this.maps.legendSelectionClass=i):c<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&(this.maps.layers[n].selectionSettings.enableMultiSelect?c<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&this.maps.selectedLegendElementId.splice(d,1):this.maps.selectedLegendElementId.splice(d,1))}return this.removeShapeHighlightCollection(),null}var u=o[r.actualIndex].text,m=void 0,f=void 0;"Default"===this.maps.legendSettings.mode?void 0!==r.currentIndex&&(m=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+r.actualIndex).textContent,f=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+r.actualIndex)):(m=document.getElementById(this.maps.element.id+"_Legend_Index_"+r.actualIndex+"_Text").textContent,f=document.getElementById(this.maps.element.id+"_Legend_Index_"+r.actualIndex)),this.oldShapeElement=a.LegendEle;var g=this.maps.legendSelectionCollection.length;if(u===m){var v=!0;if(this.maps.legendSelectionCollection)for(p=0;p<this.maps.legendSelectionCollection.length;p++)if(this.maps.legendSelectionCollection[p].legendElement===a.LegendEle){v=!1;break}if("highlight"===s&&v){(void 0===(b=this.isTargetSelected(a,this.shapeHighlightCollection))||b&&!b.IsSelected)&&this.pushCollection(f,this.shapeHighlightCollection,o[r.actualIndex],this.maps.layers[n].shapeSettings);for(var y=0;y<this.shapeHighlightCollection.length;y++)a.LegendEle.id===this.shapeHighlightCollection[y].legendElement.id&&(this.shapeHighlightCollection[y].legendElement=a.LegendEle);if(g>0)for(y=0;y<g;y++){if(a.LegendEle===this.maps.legendSelectionCollection[y].legendElement){this.maps.legendSelectionCollection[y].legendElement=a.LegendEle,this.removeShapeHighlightCollection();break}y===g-1&&(this.removeShapeHighlightCollection(),this.setColor(f,ae(i.fill)?f.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight"))}else this.removeShapeHighlightCollection(),this.setColor(f,ae(i.fill)?f.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight")}else if("selection"===s){var b=this.isTargetSelected(a,this.maps.legendSelectionCollection);if(g>0)for(y=0;y<this.maps.legendSelectionCollection.length;)if(a.LegendEle===this.maps.legendSelectionCollection[y].legendElement||i.enableMultiSelect)y++;else{var C=this.maps.legendSelectionCollection[y],S=this.maps.selectedLegendElementId.indexOf(r.actualIndex);this.maps.selectedLegendElementId.splice(S,1),this.maps.legendSelectionCollection.splice(y,1),kb(C.legendElement),this.maps.shapeSelections=!0,y=0}if(b&&b.IsSelected&&"ShapeselectionMapStyle"===e.getAttribute("class")){C=this.maps.legendSelectionCollection[b.SelectionIndex];var x=0;if(i.enableMultiSelect)for(p=0;p<a.Elements.length;p++)e.getAttribute("class")===a.Elements[p].getAttribute("class")&&x++;x<=1&&(i.enableMultiSelect||this.maps.legendSelection)&&(this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(r.actualIndex),1),ae(a.LegendEle)||kb(a.LegendEle),this.maps.legendSelectionCollection.splice(b.SelectionIndex,1),this.maps.shapeSelections=!0)}else{if((void 0===b||b&&!b.IsSelected)&&!ae(f))-1===(E=this.getIndexofLegend(this.maps.legendSelectionCollection,f))&&this.pushCollection(f,this.maps.legendSelectionCollection,o[r.actualIndex],this.maps.layers[n].shapeSettings);var w=!0;for(p=0;p<this.maps.selectedLegendElementId.length;p++)r.actualIndex===this.maps.selectedLegendElementId[p]&&(w=!1);if(w&&this.maps.selectedLegendElementId.push(r.actualIndex),this.maps.legendSelectionClass=i,this.removeLegend(this.shapeHighlightCollection),!ae(f)){this.setColor(f,ae(i.fill)?f.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"selection");var E=this.getIndexofLegend(this.maps.legendSelectionCollection,f);this.maps.legendSelectionCollection[E].MapShapeCollection.Elements.push(e)}this.maps.shapeSelections=!1}}else document.getElementsByClassName("highlightMapStyle").length>0&&(this.removeShapeHighlightCollection(),kb(document.getElementsByClassName("highlightMapStyle")[0]))}}else this.removeShapeHighlightCollection()},e.prototype.isTargetSelected=function(e,t){for(var i,s=0;s<t.length;s++)ae(e.LegendEle.getAttribute("id"))||e.LegendEle.getAttribute("id")!==t[s].legendElement.getAttribute("id")||(i={IsSelected:!0,SelectionIndex:s});return i},e.prototype.updateLegendElement=function(){for(var e=0;e<this.maps.legendSelectionCollection.length;e++)document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id)&&(this.maps.legendSelectionCollection[e].legendElement=document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id))},e.prototype.getIndexofLegend=function(e,t){return e.map(function(e){return e.legendElement}).indexOf(t)},e.prototype.removeAllSelections=function(){for(var e=0;e<this.maps.selectedElementId.length;e++){kb(i=document.getElementById(this.maps.selectedElementId[e]))}for(var t=0;t<this.maps.selectedLegendElementId.length;t++){var i=("Interactive"===this.maps.legendSettings.mode?"container_Legend_Index_":"container_Legend_Shape_Index_")+this.maps.selectedLegendElementId[t];ae(document.getElementById(i))||kb(document.getElementById(i))}this.maps.legendSelectionCollection=[],this.maps.selectedLegendElementId=[],this.maps.selectedElementId=[]},e.prototype.legendIndexOnShape=function(e,t){var i,s,n,o=e[this.maps.layers[t].shapeDataPath],r=this.maps.legendSettings.mode,a=this.maps.legendModule.legendCollection;"Default"!==r||ae(this.maps.legendModule.totalPages)||(n=this.maps.legendModule.totalPages[this.maps.legendModule.currentPage].Collection);for(var l="Default"===r?n.length:1,h=0;h<a.length;h++){for(var c=a[h].data,p=0;p<l;p++)if("Default"!==r||a[h].text===n[p].DisplayText)for(var d=0;d<c.length;d++)o===c[d].name&&(i=p);for(d=0;d<c.length;d++)o===c[d].name&&(s=h)}return{currentIndex:i,actualIndex:s}},e.prototype.shapeDataOnLegend=function(e){for(var t,i,s,n=this.maps.legendModule.legendCollection,o=this.maps.legendSettings,r=0;r<n.length;r++){for(var a=n[r].data,l=!1,h=[],c={Elements:[]},p=0;p<a.length;p++){t=a[p].shapeIndex,i=a[p].layerIndex,s=a[p].dataIndex;var d=document.getElementById(this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+t+"_dataIndex_"+s);e===d&&(l=!0),h.push(d)}if(l)return ae(c.LegendEle)&&(c.LegendEle="Default"===o.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+r):document.getElementById(this.maps.element.id+"_Legend_Index_"+r)),c.Elements=h,c}return null},e.prototype.shapesOfLegend=function(e){for(var t,i,s,n=parseFloat(e.id.charAt(e.id.length-1)),o=this.maps.legendModule.legendCollection[n].data,r=[],a=0;a<o.length;a++){t=o[a].shapeIndex,i=o[a].layerIndex,s=o[a].dataIndex;var l=document.getElementById(this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+t+"_dataIndex_"+s);ae(l)||r.push(l.id)}return r},e.prototype.legendToggle=function(){var e=this.maps,t=e.legendSettings;if(this.maps.selectedLegendElementId)for(var i=0;i<this.maps.selectedLegendElementId.length;i++){var s="Interactive"===t.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_",n=e.svgObject.querySelector("#"+s+this.maps.selectedLegendElementId[i]);if(!ae(n)){var o=ae(this.maps.legendSelectionClass.fill)?n.getAttribute("fill"):this.maps.legendSelectionClass.fill;this.setColor(n,o,this.maps.legendSelectionClass.opacity.toString(),this.maps.legendSelectionClass.border.color,this.maps.legendSelectionClass.border.width.toString(),"selection");for(var r=0;r<this.maps.legendSelectionCollection.length;r++)this.maps.legendSelectionCollection[r].legendElement.id===n.id&&(this.maps.legendSelectionCollection[r].legendElement=n);if(-1===this.getIndexofLegend(this.maps.legendSelectionCollection,n)){var a=this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[i]].data[i].layerIndex;this.pushCollection(n,this.maps.legendSelectionCollection,this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[i]],this.maps.layers[a].shapeSettings)}}}if(this.maps.toggledLegendId)for(i=0;i<this.maps.toggledLegendId.length;i++){var l="Interactive"===t.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[i]+"_Text":"#"+this.maps.element.id+"_Legend_Text_Index_"+this.maps.toggledLegendId[i],h=e.svgObject.querySelector(l);ae(h)||h.setAttribute("fill","#E5E5E5");var c="Interactive"===t.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[i]:"#"+this.maps.element.id+"_Legend_Shape_Index_"+this.maps.toggledLegendId[i],p=e.svgObject.querySelector(c);ae(p)||p.setAttribute("fill","#E5E5E5")}},e.prototype.renderLegendBorder=function(){var e=this.maps,t=e.legendSettings,i=t.title.text,s=t.titleStyle,n=hb(this.legendItemRect.width+20,i,s),o=By(n,s);this.legendBorderRect=new Wy(this.legendItemRect.x-10,this.legendItemRect.y-10-o.height,this.legendItemRect.width+20,this.legendItemRect.height+20+o.height+("Interactive"===t.mode?0:0!==this.page?10:0));var r=new Vy(e.element.id+"_Legend_Border",t.background,t.border,1,this.legendBorderRect,null,null,"","");this.legendGroup.appendChild(e.renderer.drawRectangle(r)),this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,t),this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),e.svgObject.appendChild(this.legendGroup),i&&(s.color=null!==s.color?s.color:this.maps.themeStyle.legendTextColor,Uy(new Hy(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-o.height/2-5,"middle",n,""),s,s.color,this.legendGroup))},e.prototype.changeNextPage=function(e){this.currentPage=e.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1,this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"}),this.drawLegendItem(this.currentPage),Cb(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(Cb(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},e.prototype.getLegendAlignment=function(e,t,i,s){var n,o,r,a=(r=re({},e.mapAreaRect,r,!0)).x,l=r.y,h=r.height,c=r.width,p=e.availableSize.width,d=e.availableSize.height;if("Float"===s.position)this.translate=s.location;else{switch(s.position){case"Top":case"Bottom":r.height=h-i,n=p/2-t/2,o="Top"===s.position?l:l+r.height,r.y="Top"===s.position?l+i+10:l;break;case"Left":case"Right":r.width=c-t,n="Left"===s.position?a:a+r.width-10,o=d/2-i/2,r.x="Left"===s.position?a+t:a}switch(s.alignment){case"Near":"Top"===s.position||"Bottom"===s.position?n=r.x:o=r.y;break;case"Far":"Top"===s.position||"Bottom"===s.position?n=p-t-10:o=d-i}(s.height||s.width)&&"Interactive"!==s.mode?e.totalRect=r:((s.height||s.width)&&"Interactive"===s.mode&&(e.totalRect=r),e.mapAreaRect=r),this.translate=new Py(n,o)}},e.prototype.getMarkersLegendCollections=function(e,t){var i=this;Array.prototype.forEach.call(t,function(t,s){var n=t.dataSource,o=t.legendText;Array.prototype.forEach.call(n,function(n,r){var a=null,l=!!ae(n[i.maps.legendSettings.showLegendPath])||n[i.maps.legendSettings.showLegendPath];if(t.visible&&l&&!ae(n.latitude)&&!ae(n.longitude)){if(t.template){var h=gb(t.template)(i.maps);a=(ae(h.childElementCount)?h[0]:h).querySelector("img").src}var c=ae(n[o])?"":n[o];!!i.maps.legendSettings.removeDuplicateLegend&&i.removeDuplicates(i.legendCollection,c)||i.legendCollection.push({layerIndex:e,markerIndex:s,dataIndex:r,fill:t.fill,text:c,imageSrc:a})}})})},e.prototype.getRangeLegendCollection=function(e,t,i,s,n,o,r){for(var a,l=this,h=0,c=this.maps.legendSettings.fill,p=[],d=function(i){if(!ae(i.from)&&!ae(i.to)){a=ae(i.label)?i.from+" - "+i.to:i.label,p=[];var d=!1;Array.prototype.forEach.call(s,function(s,a){var h=o.indexOf(".")>-1?Number(Ky(s,o)):parseFloat(s[o]);h>=i.from&&h<=i.to&&(d=!0,p.push(l.getLegendData(e,a,s,n,t,r,h)))}),d||p.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var m=ae(c)?"[object Array]"===Object.prototype.toString.call(i.color)?ae(i.value)?u.legendGradientColor(i,h):i.color[0]:i.color:c;h++,u.getOverallLegendItemsCollection(a,m,p,i.showLegend)}},u=this,m=0,f=i;m<f.length;m++){d(f[m])}},e.prototype.getOverallLegendItemsCollection=function(e,t,i,s){var n=[],o=this.maps.legendSettings;if(i.length>0&&s){for(var r=0;r<i.length;r++){var a=i[r];if(a.length>0)for(var l=0;l<a.length;l++)n.push(a[l]);else n.push(i[r]);n._isVisible=!0}!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,e)||this.legendCollection.push({text:e,fill:t,data:n,opacity:o.opacity,borderColor:o.shapeBorder.color,borderWidth:o.shapeBorder.width})}},e.prototype.removeDuplicates=function(e,t){for(var i=!1,s=0;s<e.length;s++)if(e[s].text===t){i=!0;break}return i},e.prototype.getEqualLegendCollection=function(e,t,i,s,n,o,r){for(var a,l=this,h=this.maps.legendSettings.fill,c=[],p=[],d=[],u=[],m=function(m){if(ae(m.value)){if(ae(m.minOpacity)&&ae(m.maxOpacity)&&ae(m.value)&&ae(m.from)&&ae(m.to)&&!ae(m.color)){if(Array.prototype.forEach.call(s,function(i,s){for(var a=o.indexOf(".")>-1?Ky(i,o):i[o],h=0;h<d.length;h++)a===d[h]&&u.push(l.getLegendData(e,s,i,n,t,r,a))}),0===d.length){var g=!1;Array.prototype.forEach.call(s,function(s,a){g=!1;for(var h=s[o],c=0;c<i.length;c++)ae(h)||isNaN(h)?g||(g=!1):h>=i[c].from&&h<=i[c].to&&(g=!0);g||u.push(l.getLegendData(e,a,s,n,t,r,h))})}a=ae(m.label)?"Others":m.label;var v="[object Array]"===Object.prototype.toString.call(m.color)?m.color[0]:m.color;0,f.getOverallLegendItemsCollection(a,v,u,m.showLegend)}}else{a=ae(m.label)?m.value:m.label,p=[];var y=!1;Array.prototype.forEach.call(s,function(i,s){var a=o.indexOf(".")>-1?Ky(i,o):i[o];a===m.value?(y=!0,-1===c.indexOf(a)&&c.push(a),p.push(l.getLegendData(e,s,i,n,t,r,a))):-1===d.indexOf(a)&&d.push(a)});for(var b=0;b<c.length;b++)for(var C=0;C<d.length;C++)if(c[b]===d[C]){var S=d.indexOf(c[b]);d.splice(S,1)}y||p.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var x=ae(h)?"[object Array]"===Object.prototype.toString.call(m.color)?m.color[0]:m.color:h;0,f.getOverallLegendItemsCollection(a,x,p,m.showLegend)}},f=this,g=0,v=i;g<v.length;g++){m(v[g])}},e.prototype.getDataLegendCollection=function(e,t,i,s,n,o,r){var a,l=this,h=this.maps.legendSettings.fill,c=this.maps.legendSettings.valuePath;ae(o)||ae(s)||Array.prototype.forEach.call(s,function(s,p){var d=!!ae(l.maps.legendSettings.showLegendPath)||!ae(s[l.maps.legendSettings.showLegendPath])&&s[l.maps.legendSettings.showLegendPath],u=o.indexOf(".")>-1?Ky(s,o):s[o],m=[],f=ae(h)?u:h;ae(u)||0!==i.length||(a=ae(s[c])?n.indexOf(".")>-1?Ky(s,n):s[n]:c.indexOf(".")>-1?Ky(s,c):s[c],m.push(l.getLegendData(e,p,s,n,t,r,u))),l.getOverallLegendItemsCollection(a,f,m,d)})},e.prototype.interactiveHandler=function(e){var t=e.target,i=this.maps.legendSettings,s=this.maps.element.id+"_Interactive_Legend",n="Layers"===i.type?"_shapeIndex_":"Markers"===i.type?"_MarkerIndex_":"_BubbleIndex_";if(t.id.indexOf(n)>1){var o=parseFloat(t.id.split("_LayerIndex_")[1].split("_")[0]),r=parseFloat(t.id.split(/_dataIndex_/i)[1].split("_")[0]),a=void 0,l=void 0,h=void 0;ae(Cb(s,this.maps.element.id))||Li(Cb(s,this.maps.element.id));var c=this.maps.layersCollection[o],p="Layers"===i.type?c.visible:"Markers"===i.type?c.markerSettings[parseFloat(t.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[o]);if(i.visible&&this.legendRenderingCollections.length>0&&"Interactive"===i.mode&&p)for(var d=this.maps.svgObject.getBoundingClientRect(),u=0;u<this.legendCollection.length;u++){var m=this.legendCollection[u],f=Cb(this.maps.element.id+"_Legend_Index_"+u,this.maps.element.id),g=f.getBoundingClientRect(),v=new Wy(Math.abs(g.left-d.left),Math.abs(g.top-d.top),g.width,g.height);if(a=f.getAttribute("fill"),l=i.shapeBorder.color,h=i.shapeBorder.width,!ae(m.data))for(var y=m.data,b=0;b<y.length;b++)if(r===y[b].dataIndex&&o===y[b].layerIndex){this.renderInteractivePointer(i,a,l,s,h,v);break}}}else ae(Cb(s,this.maps.element.id))||Li(Cb(s,this.maps.element.id))},e.prototype.renderInteractivePointer=function(e,t,i,s,n,o){var r,a,l,h;r="Horizontal"===("None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation)?e.invertedPointer?" M "+(l=o.x+o.width/2)+" "+(h=o.y+o.height)+" L "+(l-10)+" "+(h+10)+" L "+(l+10)+" "+(h+10)+" Z ":" M "+(l=o.x+o.width/2)+" "+(h=o.y)+" L "+(l-10)+" "+(h-10)+" L "+(l+10)+" "+(h-10)+" Z ":e.invertedPointer?" M "+(l=o.x)+" "+(h=o.y+o.height/2)+" L "+(l-10)+" "+(h-10)+" L "+(l-10)+" "+(h+10)+" z ":" M "+(l=o.x+o.width)+" "+(h=o.y+o.height/2)+" L "+(l+10)+" "+(h-10)+" L "+(l+10)+" "+(h+10)+" z ",a=new Fy(s,t,n,i,1,"",r),this.maps.svgObject.appendChild(this.maps.renderer.drawPath(a))},e.prototype.wireEvents=function(e){Ct.add(e,bt.touchStartEvent,this.changeNextPage,this)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(bt.touchMoveEvent,this.interactiveHandler,this),this.maps.on(bt.touchEndEvent,this.interactiveHandler,this),this.maps.on("click",this.legendClick,this))},e.prototype.legendClick=function(e){var t=this.maps.legendSettings.toggleLegendSettings.fill,i=this.maps.legendSettings.toggleLegendSettings.opacity,s=this.maps.legendSettings.toggleLegendSettings.border.color,n=this.maps.legendSettings.toggleLegendSettings.border.width;if(e.parentNode.id.indexOf(this.maps.element.id+"_Legend_Index_")>-1){var o=void 0,r=parseFloat(e.parentElement.id.substr((this.maps.element.id+"_Legend_Index_").length)),a=(f=this.legendCollection[r].data)._isVisible,l=void 0;if(this.maps.legendSettings.toggleLegendSettings.enable&&"Bubbles"===this.maps.legendSettings.type)for(var h=0;h<this.maps.layers.length;h++)for(var c=0;c<this.maps.layers[h].bubbleSettings.length;c++){for(var p=0;p<f.length;p++)l=this.legendCollection[r].data[p],o=Cb(this.maps.element.id+"_LayerIndex_"+l.layerIndex+"_BubbleIndex_"+c+"_dataIndex_"+l.dataIndex,this.maps.element.id),a&&null!==o?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(o.setAttribute("fill",this.maps.layers[h].shapeSettings.fill),o.setAttribute("stroke",this.maps.layers[h].shapeSettings.border.color),o.setAttribute("opacity",this.maps.layers[h].shapeSettings.opacity.toString()),o.setAttribute("stroke-width",this.maps.layers[h].shapeSettings.border.width.toString())):(o.setAttribute("fill",t),o.setAttribute("opacity",i.toString()),o.setAttribute("stroke",s),o.setAttribute("stroke-width",n.toString())),null!==e&&(Cb(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),Cb(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(o.setAttribute("fill",this.legendCollection[r].fill),o.setAttribute("stroke",this.maps.layers[h].bubbleSettings[c].border.color),o.setAttribute("opacity",this.maps.layers[h].bubbleSettings[c].opacity.toString()),o.setAttribute("stroke-width",this.maps.layers[h].bubbleSettings[c].border.width.toString()),null!==e&&(Cb(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill),Cb(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#757575")));f._isVisible=!a}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var d=void 0;this.removeCollections(e,r);var u=this.maps.toggledLegendId.indexOf(r);-1!==u&&(a=!1);for(c=0;c<this.maps.layers.length;c++)for(p=0;p<f.length;p++)if(l=this.legendCollection[r].data[p],null!==(d=Cb(this.maps.element.id+"_LayerIndex_"+l.layerIndex+"_shapeIndex_"+l.shapeIndex+"_dataIndex_"+l.dataIndex,this.maps.element.id))){var m=this.maps.toggledShapeElementId.indexOf(d.id);a?(0===p&&this.maps.toggledLegendId.push(r),-1===m&&this.maps.toggledShapeElementId.push(d.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(d.setAttribute("fill",this.maps.layers[c].shapeSettings.fill),d.setAttribute("opacity",this.maps.layers[c].shapeSettings.opacity.toString()),d.setAttribute("stroke",this.maps.layers[c].shapeSettings.border.color),d.setAttribute("stroke-width",this.maps.layers[c].shapeSettings.border.width.toString())):(d.setAttribute("fill",t),d.setAttribute("opacity",i.toString()),d.setAttribute("stroke",s),d.setAttribute("stroke-width",n.toString())),null!==e&&(Cb(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),Cb(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==u&&0===p&&this.maps.toggledLegendId.splice(u,1),-1!==m&&this.maps.toggledShapeElementId.splice(m,1),d.setAttribute("fill",this.legendCollection[r].fill),d.setAttribute("opacity",this.maps.layers[c].shapeSettings.opacity.toString()),d.setAttribute("stroke",this.maps.layers[c].shapeSettings.border.color),d.setAttribute("stroke-width",this.maps.layers[c].shapeSettings.border.width.toString()),null!==e&&(Cb(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#757575"),Cb(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill)))}f._isVisible=!a}}else if(!ae(e.id)&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_Text")){var f,g=void 0,v=(r=parseFloat(e.id.substr((this.maps.element.id+"_Legend_Index_").length)),void 0);a=(f=this.legendCollection[r].data)._isVisible;if("Bubbles"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable)for(h=0;h<this.maps.layers.length;h++)for(c=0;c<this.maps.layers[h].bubbleSettings.length;c++){for(p=0;p<f.length;p++)v=this.legendCollection[r].data[p],g=Cb(this.maps.element.id+"_LayerIndex_"+v.layerIndex+"_BubbleIndex_"+c+"_dataIndex_"+v.dataIndex,this.maps.element.id),a&&null!==g?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(g.setAttribute("fill",this.maps.layers[h].shapeSettings.fill),g.setAttribute("stroke",this.maps.layers[h].shapeSettings.border.color),g.setAttribute("stroke-width",this.maps.layers[h].shapeSettings.border.width.toString()),g.setAttribute("opacity",this.maps.layers[h].shapeSettings.opacity.toString())):(g.setAttribute("fill",t),g.setAttribute("opacity",i.toString()),g.setAttribute("stroke",s),g.setAttribute("stroke-width",n.toString())),null!==e&&(Cb(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"),Cb(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(g.setAttribute("fill",this.legendCollection[r].fill),g.setAttribute("stroke",this.maps.layers[h].bubbleSettings[c].border.color),g.setAttribute("stroke-width",this.maps.layers[h].bubbleSettings[c].border.width.toString()),g.setAttribute("opacity",this.maps.layers[h].bubbleSettings[c].opacity.toString()),null!==e&&(Cb(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill),Cb(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#757575")));f._isVisible=!a}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var y=void 0;this.removeCollections(e,r);var b=this.maps.toggledLegendId.indexOf(r);-1!==b&&(a=!1);for(h=0;h<this.maps.layers.length;h++)for(p=0;p<f.length;p++)if(v=this.legendCollection[r].data[p],null!==(y=Cb(this.maps.element.id+"_LayerIndex_"+v.layerIndex+"_shapeIndex_"+v.shapeIndex+"_dataIndex_"+v.dataIndex,this.maps.element.id))){m=this.maps.toggledShapeElementId.indexOf(y.id);a?(0===p&&this.maps.toggledLegendId.push(r),-1===m&&this.maps.toggledShapeElementId.push(y.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(y.setAttribute("fill",this.maps.layers[0].shapeSettings.fill),y.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),y.setAttribute("opacity",this.maps.layers[h].shapeSettings.opacity.toString()),y.setAttribute("stroke-width",this.maps.layers[h].shapeSettings.border.width.toString())):(y.setAttribute("fill",t),y.setAttribute("opacity",i.toString()),y.setAttribute("stroke",s),y.setAttribute("stroke-width",n.toString())),null!==e&&(Cb(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),Cb(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==b&&0===p&&this.maps.toggledLegendId.splice(b,1),-1!==m&&this.maps.toggledShapeElementId.splice(m,1),y.setAttribute("fill",this.legendCollection[r].fill),y.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),y.setAttribute("opacity",this.maps.layers[h].shapeSettings.opacity.toString()),y.setAttribute("stroke-width",this.maps.layers[h].shapeSettings.border.width.toString()),null!==e&&(Cb(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#757575"),Cb(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill)))}f._isVisible=!a}}},e.prototype.removeCollections=function(e,t){this.removeLegendSelectionCollection(e);var i=this.getIndexofLegend(this.maps.legendSelectionCollection,e);-1!==i&&this.maps.legendSelectionCollection.splice(i,1),-1!==this.getIndexofLegend(this.legendHighlightCollection,e)&&this.legendHighlightCollection.splice(i,1);var s=this.getIndexofLegend(this.shapeHighlightCollection,e);-1!==s&&this.shapeHighlightCollection.splice(s,1);var n=this.maps.selectedLegendElementId.indexOf(t);-1!==n&&this.maps.selectedLegendElementId.splice(n,1)},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(bt.touchMoveEvent,this.interactiveHandler),this.maps.off(bt.touchEndEvent,this.interactiveHandler),this.maps.off("click",this.legendClick))},e.prototype.getLegendData=function(e,t,i,s,n,o,r){var a=[];if("[object Array]"===Object.prototype.toString.call(n))for(var l=0;l<n.length;l++){var h=n[l],c=s.indexOf(".")>-1?Ky(i,s):i[s],p=rb(i[s],o,h.properties),d=ae(c)?c:c.toLowerCase();(!ae(h.properties[p])&&isNaN(h.properties[p])?h.properties[p].toLowerCase():h.properties[p])===d&&a.push({layerIndex:e,shapeIndex:l,dataIndex:t,name:i[s],value:r})}return a},e.prototype.legendGradientColor=function(e,t){var i,s="http://www.w3.org/2000/svg";if(!ae(e.color)&&"object"==typeof e.color){var n,o,r=document.createElementNS(s,"linearGradient"),a=this.maps.legendSettings.position;n="Top"===a||"Bottom"===a?"100":"0",o="Top"===a||"Bottom"===a?"0":"100",r.setAttribute("id","linear_"+t+"_"+this.maps.element.id),r.setAttribute("x1","0%"),r.setAttribute("y1","0%"),r.setAttribute("x2",n+"%"),r.setAttribute("y2",o+"%");for(var l=0;l<e.color.length;l++){var h=100/(e.color.length-1),c=document.createElementNS(s,"stop");c.setAttribute("offset",l*h+"%"),c.setAttribute("stop-color",e.color[l]),c.setAttribute("stop-opacity",1..toString()),r.appendChild(c)}this.legendLinearGradient=r;var p="url(#linear_"+t+"_"+this.maps.element.id+")";this.defsElement.appendChild(r),i=p}return i},e.prototype.getModuleName=function(){return"Legend"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),YC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},XC=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(bt.touchMoveEvent,this.mouseMove,this),this.maps.on(bt.touchStartEvent,this.mouseMove,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(bt.touchMoveEvent,this.mouseMove),this.maps.off(bt.touchStartEvent,this.mouseMove))},e.prototype.addHighlight=function(e,t,i){var s=Sb(e,t,0,this.maps);i?this.mapHighlight(s,null,null):kb(s)},e.prototype.mouseMove=function(e){var t,i=e.target,s="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1;if((-1!==i.id.indexOf("LayerIndex")||i.id.indexOf("NavigationIndex")>-1)&&"ShapeselectionMapStyle"!==i.getAttribute("class")&&!s&&"MarkerselectionMapStyle"!==i.getAttribute("class")&&"BubbleselectionMapStyle"!==i.getAttribute("class")&&"navigationlineselectionMapStyle"!==i.getAttribute("class")){t=parseInt(i.id.split("_LayerIndex_")[1].split("_")[0],10);var n=void 0,o=void 0,r=void 0,a=void 0;if(i.id.indexOf("shapeIndex")>-1)r=parseInt(i.id.split("_shapeIndex_")[1].split("_")[0],10),n=this.maps.layers[t].shapeData.features?this.maps.layers[t].shapeData.features[r].properties:null,o=ae(a=parseInt(i.id.split("_dataIndex_")[1].split("_")[0],10))?null:this.maps.layers[t].dataSource[a],this.highlightSettings=this.maps.layers[t].highlightSettings;else if(i.id.indexOf("BubbleIndex")>-1){var l=parseInt(i.id.split("_BubbleIndex_")[1].split("_")[0],10);a=parseInt(i.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[t].bubbleSettings[l].dataSource[a],this.highlightSettings=this.maps.layers[t].bubbleSettings[l].highlightSettings}else if(i.id.indexOf("MarkerIndex")>-1){var h=parseInt(i.id.split("_MarkerIndex_")[1].split("_")[0],10);a=parseInt(i.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[t].markerSettings[h].dataSource[a],this.highlightSettings=this.maps.layers[t].markerSettings[h].highlightSettings}else{var c=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10);t=parseInt(i.id.split("_LayerIndex_")[1].split("_")[0],10),n=null,o={latitude:this.maps.layers[t].navigationLineSettings[c].latitude,longitude:this.maps.layers[t].navigationLineSettings[c].longitude},this.highlightSettings=this.maps.layers[t].navigationLineSettings[c].highlightSettings}if(this.highlightSettings.enable){this.maps.legendSettings.visible&&-1===i.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(i,o,this.highlightSettings,"highlight",t),(!(i.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.mapHighlight(i,n,o)}else{var p=document.getElementsByClassName("highlightMapStyle")[0];if(!ae(p)&&(kb(p),p.id.indexOf("NavigationIndex")>-1)){c=parseInt(p.id.split("_NavigationIndex_")[1].split("_")[0],10);var d=parseInt(p.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);p.setAttribute("stroke-width",this.maps.layers[d].navigationLineSettings[c].width.toString()),p.setAttribute("stroke",this.maps.layers[d].navigationLineSettings[c].color)}}}else if(bb("highlightMapStyle").length>0){if((i=bb("highlightMapStyle")[0]).id.indexOf("NavigationIndex")>-1){c=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10);t=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),i.setAttribute("stroke-width",this.maps.layers[t].navigationLineSettings[c].width.toString()),i.setAttribute("stroke",this.maps.layers[t].navigationLineSettings[c].color)}kb(i),this.maps.legendSettings.visible&&this.maps.legendModule.removeShapeHighlightCollection()}else-1===i.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")&&-1===i.id.indexOf(this.maps.element.id+"_Legend_Index")||!this.maps.legendSettings.visible||-1!==i.id.indexOf("_Text")?this.maps.legendSettings.visible&&this.maps.legendModule.removeLegendHighlightCollection():this.maps.legendModule.legendHighLightAndSelection(i,"highlight")},e.prototype.mapHighlight=function(e,t,i){var s=this,n=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),o=!1;if(e.id.indexOf("MarkerIndex")>-1){var r=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);o=this.maps.layers[n].markerSettings[r].highlightSettings.enable}var a={color:this.highlightSettings.border.color,width:this.highlightSettings.border.width/(o?1:this.maps.scale)},l={opacity:this.highlightSettings.opacity,fill:-1===e.id.indexOf("NavigationIndex")?ae(this.highlightSettings.fill)?e.getAttribute("fill"):this.highlightSettings.fill:"none",border:a,name:"itemHighlight",target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps};if(this.maps.isBlazor){l.shapeData,l.maps;var h=YC(l,["shapeData","maps"]);l=h}this.maps.trigger("itemHighlight",l,function(){s.highlightMap(e,l)})},e.prototype.highlightMap=function(e,t){if("highlightMapStyle"!==e.getAttribute("class")){if(bb("highlightMapStyle").length>0){var i=bb("highlightMapStyle")[0];if(kb(i),i.id.indexOf("NavigationIndex")>-1){var s=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);i.setAttribute("stroke-width",this.maps.layers[n].navigationLineSettings[s].width.toString()),i.setAttribute("stroke",this.maps.layers[n].navigationLineSettings[s].color)}}vb("highlightMap")?wb("highlightMap","highlightMapStyle",t):document.body.appendChild(xb("highlightMap","highlightMapStyle",t)),e.setAttribute("class","highlightMapStyle")}},e.prototype.getModuleName=function(){return"Highlight"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),KC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},ZC=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on("click",this.mouseClick,this),this.maps.on(bt.touchEndEvent,this.mouseClick,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off("click",this.mouseClick),this.maps.off(bt.touchEndEvent,this.mouseClick))},e.prototype.mouseClick=function(e){if(!ae(e.type)&&-1!==e.type.indexOf("touch")&&ae(e.id)&&(e=e.target),!ae(e.id)&&(e.id.indexOf("LayerIndex")>-1||e.id.indexOf("NavigationIndex")>-1)){var t,i=void 0,s=void 0,n=void 0,o=void 0;if(t=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),e.id.indexOf("shapeIndex")>-1)n=parseInt(e.id.split("_shapeIndex_")[1].split("_")[0],10),i=this.maps.layers[t].shapeData.features.length>n?this.maps.layers[t].shapeData.features[n].properties:null,s=ae(o=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10))?null:this.maps.layers[t].dataSource[o],this.selectionsettings=this.maps.layers[t].selectionSettings,this.selectionType="Shape";else if(e.id.indexOf("BubbleIndex")>-1){var r=parseInt(e.id.split("_BubbleIndex_")[1].split("_")[0],10);o=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),s=this.maps.layers[t].bubbleSettings[r].dataSource[o],this.selectionsettings=this.maps.layers[t].bubbleSettings[r].selectionSettings,this.selectionType="Bubble"}else if(e.id.indexOf("MarkerIndex")>-1){var a=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);o=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),s=this.maps.layers[t].markerSettings[a].dataSource[o],this.selectionsettings=this.maps.layers[t].markerSettings[a].selectionSettings,this.selectionType="Marker"}else{var l=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10);i=null,s={latitude:this.maps.layers[t].navigationLineSettings[l].latitude,longitude:this.maps.layers[t].navigationLineSettings[l].longitude},this.selectionsettings=this.maps.layers[t].navigationLineSettings[l].selectionSettings,this.selectionType="navigationline"}if(this.selectionsettings.enable)this.maps.mapSelect=!!e,this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(e,s,this.selectionsettings,"selection",t),(!(e.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.selectMap(e,i,s)}else this.maps.legendSettings.visible&&!this.maps.legendSettings.toggleLegendSettings.enable&&!ae(e.id)&&-1===e.id.indexOf("_Text")&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule.legendHighLightAndSelection(e,"selection")},e.prototype.addSelection=function(e,t,i){var s=Sb(e,t,0,this.maps);i?this.selectMap(s,null,null):kb(s)},e.prototype.selectMap=function(e,t,i){var s=this,n=(this.selectionsettings,{color:this.selectionsettings.border.color,width:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale)}),o={opacity:this.selectionsettings.opacity,fill:"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:n,name:MC,target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps};if(this.maps.isBlazor){o.shapeData,o.maps;var r=KC(o,["shapeData","maps"]);o=r}this.maps.trigger("itemSelection",o,function(t){if(!o.cancel)if(e.getAttribute("class")===s.selectionType+"selectionMapStyle"){kb(e),s.removedSelectionList(e);for(var i=0;i<s.maps.shapeSelectionItem.length;i++)if(s.maps.shapeSelectionItem[i]===o.shapeData){s.maps.shapeSelectionItem.splice(i,1);break}if(e.id.indexOf("NavigationIndex")>-1){var n=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),r=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);e.setAttribute("stroke-width",s.maps.layers[r].navigationLineSettings[n].width.toString()),e.setAttribute("stroke",s.maps.layers[r].navigationLineSettings[n].color)}}else{var a=mb(s.maps.element.id+"_Layer_Collections");if(!s.selectionsettings.enableMultiSelect&&a.getElementsByClassName(s.selectionType+"selectionMapStyle").length>0){for(var l=a.getElementsByClassName(s.selectionType+"selectionMapStyle").length,h=void 0,c=0;c<l;c++)kb(h=a.getElementsByClassName(s.selectionType+"selectionMapStyle")[0]),s.removedSelectionList(h);if("Shape"===s.selectionType){s.maps.shapeSelectionItem=[];for(var p=s.maps.selectedElementId.length,d=0;d<p;d++){kb(h=a.getElementsByClassName(s.selectionType+"selectionMapStyle")[0]);var u=s.maps.selectedElementId.indexOf(h.getAttribute("id"));s.maps.selectedElementId.splice(u,1)}}if(h.id.indexOf("NavigationIndex")>-1){n=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),r=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);h.setAttribute("stroke-width",s.maps.layers[r].navigationLineSettings[n].width.toString()),h.setAttribute("stroke",s.maps.layers[r].navigationLineSettings[n].color)}}vb(s.selectionType+"selectionMap")?wb(s.selectionType+"selectionMap",s.selectionType+"selectionMapStyle",o):document.body.appendChild(xb(s.selectionType+"selectionMap",s.selectionType+"selectionMapStyle",o)),e.setAttribute("class",s.selectionType+"selectionMapStyle"),"ShapeselectionMapStyle"===e.getAttribute("class")&&(s.maps.shapeSelectionClass=vb(s.selectionType+"selectionMap"),s.maps.selectedElementId.push(e.getAttribute("id")),s.maps.shapeSelectionItem.push(o.shapeData)),"MarkerselectionMapStyle"===e.getAttribute("class")&&(s.maps.markerSelectionClass=vb(s.selectionType+"selectionMap"),s.maps.selectedMarkerElementId.push(e.getAttribute("id"))),"BubbleselectionMapStyle"===e.getAttribute("class")&&(s.maps.bubbleSelectionClass=vb(s.selectionType+"selectionMap"),s.maps.selectedBubbleElementId.push(e.getAttribute("id"))),"navigationlineselectionMapStyle"===e.getAttribute("class")&&(s.maps.navigationSelectionClass=vb(s.selectionType+"selectionMap"),s.maps.selectedNavigationElementId.push(e.getAttribute("id")))}})},e.prototype.removedSelectionList=function(e){"Shape"===this.selectionType&&this.maps.selectedElementId.splice(this.maps.selectedElementId.indexOf(e.getAttribute("id")),1),"Bubble"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1),"Marker"===this.selectionType&&this.maps.selectedMarkerElementId.splice(this.maps.selectedMarkerElementId.indexOf(e.getAttribute("id")),1),"navigationline"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1)},e.prototype.getModuleName=function(){return"Selection"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),QC=function(){function e(e){this.maps=e,this.tooltipId=this.maps.element.id+"_mapsTooltip",this.addEventListener()}return e.prototype.renderTooltip=function(e){var t,i,s,n,o,r,a,l=this;-1!==e.type.indexOf("touch")?(this.isTouch=!0,t=(n=e).changedTouches[0].pageX,i=n.changedTouches[0].pageY,s=n.target):(this.isTouch="touch"===e.pointerType,t=e.pageX,i=e.pageY,s=e.target);var h,c,p,d="",u=s.id,m=[],f=u.indexOf("_LayerIndex_")>-1&&parseFloat(u.split("_LayerIndex_")[1].split("_")[0]),g=this.maps.layersCollection[f];if(c=Ty(t,i,this.maps.svgObject),this.tooltipTargetID=u,u.indexOf("_shapeIndex_")>-1||u.indexOf("_MarkerIndex_")>-1||u.indexOf("_BubbleIndex_")>-1){if(u.indexOf("_shapeIndex_")>-1){(a=g.tooltipSettings).textStyle.fontFamily=this.maps.themeStyle.fontFamily||a.textStyle.fontFamily,a.textStyle.opacity=this.maps.themeStyle.tooltipTextOpacity||a.textStyle.opacity;var v=parseInt(u.split("_shapeIndex_")[1].split("_")[0],10);if(ae(g.layerData)||ae(g.layerData[v]))return;var y=g.layerData[v].property,b=!1,C="[object Array]"===Object.prototype.toString.call(g.shapePropertyPath)?g.shapePropertyPath:[g.shapePropertyPath];if(!ae(C)){for(var S=0;S<C.length;S++)for(var x=0;x<g.dataSource.length;x++){var w=g.dataSource[x],E=g.shapeDataPath.indexOf(".")>-1?Ky(w,g.shapeDataPath):w[g.shapeDataPath];if((!ae(E)&&isNaN(w[g.shapeDataPath])?E.toLowerCase():E)===(!ae(y[C[S]])&&isNaN(y[C[S]])?y[C[S]].toLowerCase():y[C[S]])){b=!0,f=x,S=C.length;break}}if(f=b?f:null,!ae(g.dataSource[f]))for(p in m=JSON.parse(JSON.stringify(g.dataSource[f])),y)m.hasOwnProperty(p)||(m[p]=y[p])}if(a.visible&&(!ae(f)&&!isNaN(f)||!ae(y)))if(g.tooltipSettings.format)d=this.formatter(g.tooltipSettings.format,m);else{var k=rb(g.shapeDataPath,g.shapePropertyPath,y);d=ae(g.dataSource)||ae(f)?y[k]:Gy(a.valuePath.indexOf(".")>-1?Ky(g.dataSource[f],a.valuePath):g.dataSource[f][a.valuePath],this.maps),ae(d)&&(d=a.valuePath.indexOf(".")>-1?Ky(y,a.valuePath):y[a.valuePath])}}else if(u.indexOf("_MarkerIndex_")>-1){var T=parseInt(u.split("_MarkerIndex_")[1].split("_")[0],10),L=parseInt(u.split("_MarkerIndex_")[1].split("_")[2],10),D=g.markerSettings[T];a=D.tooltipSettings,m=D.dataSource[L],a.visible&&!isNaN(T)&&(d=D.tooltipSettings.format?this.formatter(D.tooltipSettings.format,D.dataSource[L]):D.template&&!D.tooltipSettings.valuePath?D.template.split(">")[1].split("<")[0]:Gy(D.tooltipSettings.valuePath.indexOf(".")>-1?Ky(D.dataSource[L],D.tooltipSettings.valuePath):D.dataSource[L][D.tooltipSettings.valuePath],this.maps))}else if(u.indexOf("_BubbleIndex_")>-1){var I=parseInt(u.split("_BubbleIndex_")[1].split("_")[0],10),O=(L=parseInt(u.split("_BubbleIndex_")[1].split("_")[2],10),g.bubbleSettings[I]);a=O.tooltipSettings,m=O.dataSource[L],a.visible&&!isNaN(L)&&(d=O.tooltipSettings.format?this.formatter(O.tooltipSettings.format,O.dataSource[L]):Gy(O.tooltipSettings.valuePath.indexOf(".")>-1?Ky(O.dataSource[L],O.tooltipSettings.valuePath):O.dataSource[L][O.tooltipSettings.valuePath],this.maps))}document.getElementById(this.tooltipId)?h=document.getElementById(this.tooltipId):(h=yi("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(h)),null!==a.template&&1===Object.keys("object"==typeof a.template?a.template:{}).length&&(a.template=a.template[Object.keys(a.template)[0]]);var A={location:c,text:[],data:m=this.setTooltipContent(a,m),textStyle:a.textStyle,template:a.template};if(o={cancel:!1,name:"tooltipRender",options:A,fill:a.fill,maps:this.maps,element:s,eventArgs:e},this.maps.isBlazor){var M={location:c},P={name:"tooltipRender",cancel:!1,options:M,data:m,textStyle:o.options.textStyle,fill:o.fill,element:s,eventArgs:e};this.maps.trigger("tooltipRender",P,function(e){if(P.cancel||!a.visible||ae(d)||-1!==u.indexOf("_cluster_")||-1!==u.indexOf("_dataLabel_"))l.removeTooltip(),l.maps.clearTemplate();else{u.indexOf("MarkerIndex")>0?"MarkerTooltipTemplate":u.indexOf("BubbleIndex")>0?"BubbleTooltipTemplate":"LayerTooltipTemplate",l.maps.isProtectedOnChange=!0,l.svgTooltip=new Wg(P.cancel?{enable:!0,header:"",content:[d.toString()],shapes:[],location:M.location,palette:[void 0],areaBounds:l.maps.mapAreaRect,textStyle:o.options.textStyle,availableSize:l.maps.availableSize,fill:o.fill}:{enable:!0,header:"",content:[d.toString()],shapes:[],location:M.location,palette:[void 0],areaBounds:l.maps.mapAreaRect,textStyle:P.textStyle,availableSize:l.maps.availableSize,fill:P.fill});var t=h;l.svgTooltip.opacity=l.maps.themeStyle.tooltipFillOpacity||l.svgTooltip.opacity,l.svgTooltip.appendTo(t),l.maps.renderReactTemplates()}})}else this.maps.trigger("tooltipRender",o,function(e){if(o.cancel||!a.visible||ae(d)||-1!==u.indexOf("_cluster_")||-1!==u.indexOf("_dataLabel_"))l.removeTooltip(),l.maps.clearTemplate();else if(l.maps.isProtectedOnChange=!0,o.options.textStyle.color=l.maps.themeStyle.tooltipFontColor||o.options.textStyle.color,o.cancel?l.svgTooltip=new Wg({enable:!0,header:"",data:a.data,template:a.template,content:[d.toString()],shapes:[],location:a.location,palette:[void 0],areaBounds:l.maps.mapAreaRect,textStyle:a.textStyle,availableSize:l.maps.availableSize,fill:a.fill||l.maps.themeStyle.tooltipFillColor}):l.svgTooltip=new Wg({enable:!0,header:"",data:o.options.data,template:o.options.template,content:[d.toString()],shapes:[],location:o.options.location,palette:[void 0],areaBounds:l.maps.mapAreaRect,textStyle:o.options.textStyle,availableSize:l.maps.availableSize,fill:o.fill||l.maps.themeStyle.tooltipFillColor}),l.svgTooltip.opacity=l.maps.themeStyle.tooltipFillOpacity||l.svgTooltip.opacity,l.svgTooltip.appendTo(h),l.maps.renderReactTemplates(),null!==(r=document.getElementById(l.maps.element.id+"_mapsTooltip"))&&-1!==r.innerHTML.indexOf("href")&&-1!==r.innerHTML.indexOf("</a>")){var t=r.getAttribute("style");t=t.replace("pointer-events: none;","position-events:all;"),r.setAttribute("style",t)}});this.svgTooltip&&this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:A,element:this.svgTooltip.element}),this.svgTooltip?this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:A,element:this.svgTooltip.element}):(this.removeTooltip(),this.maps.clearTemplate())}else null!==(r=document.getElementById(this.maps.element.id+"_mapsTooltip"))&&-1!==r.innerHTML.indexOf("href")&&-1!==r.innerHTML.indexOf("</a>")?this.maps.notify("click",this):(this.removeTooltip(),this.maps.clearTemplate())},e.prototype.setTooltipContent=function(e,t){var i=re({},t,null,!0);return this.maps.format&&!isNaN(Number(i[e.valuePath]))?i[e.valuePath]=fb(this.maps,Number(i[e.valuePath])):i=Object.keys(i).length?i:void 0,i},e.prototype.formatter=function(e,t){void 0===t&&(t={});for(var i=0,s=Object.keys(t);i<s.length;i++){var n=s[i];e="object"==typeof t[n]?Yy("",e,t,this.maps):e.split("${"+n+"}").join(Gy(t[n],this.maps))}return e},e.prototype.mouseUpHandler=function(e){this.renderTooltip(e),"MouseMove"===this.maps.tooltipDisplayMode&&(clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3))},e.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-maps-Tooltip").length>0&&Li(document.getElementsByClassName("EJ2-maps-Tooltip")[0])},e.prototype.addEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.on("dblclick",this.renderTooltip,this):"Click"===this.maps.tooltipDisplayMode?this.maps.on(bt.touchEndEvent,this.mouseUpHandler,this):this.maps.on(bt.touchMoveEvent,this.renderTooltip,this),this.maps.element.addEventListener("contextmenu",this.removeTooltip),this.maps.on(bt.touchCancelEvent,this.removeTooltip,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.off("dblclick",this.removeTooltip):"Click"===this.maps.tooltipDisplayMode?this.maps.off(bt.touchEndEvent,this.mouseUpHandler):this.maps.off(bt.touchMoveEvent,this.renderTooltip),this.maps.off(bt.touchCancelEvent,this.removeTooltip))},e.prototype.getModuleName=function(){return"MapsTooltip"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),JC=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(i[s[n]]=e[s[n]])}return i},$C=function(){function e(e){this.isPanning=!1,this.mouseEnter=!1,this.isTouch=!1,this.rectZoomingStart=!1,this.pinchRect=new Wy(0,0,0,0),this.browserName=bt.info.name,this.isPointer=bt.isPointer,this.handled=!1,this.pinchFactor=1,this.startTouches=[],this.shapeZoomLocation=[],this.intersect=[],this.mouseDownLatLong={x:0,y:0},this.mouseMoveLatLong={x:0,y:0},this.isSingleClick=!1,this.maps=e,this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",this.cancelEvent=this.isPointer?"pointerleave":"mouseleave",this.selectionColor=this.maps.zoomSettings.selectionColor,this.fillColor=this.maps.zoomSettings.color,this.addEventListener(),this.groupElements=[]}return e.prototype.performZooming=function(e,t,i){var s=this,n=this.maps;n.previousProjection=n.projectionType,n.defaultState=!1,n.initialCheck=!1,n.markerZoomedState=!1,n.zoomPersistence=n.enablePersistence;var o=n.tileZoomLevel,r=n.previousScale=n.scale,a=n.zoomSettings.maxZoom,l=n.zoomSettings.minZoom;t=l>t&&"ZoomIn"===i?l+1:t;var h=n.tileTranslatePoint;if(!n.isTileMap&&("ZoomIn"===i?t>=l&&t<=a:t>=l)){var c=n.mapAreaRect,p=n.baseMapRectBounds.min,d=n.baseMapRectBounds.max,u=Math.abs(p.x-d.x),m=Math.abs(p.y-d.y),f=n.translatePoint,g=f.x-(c.width/r-c.width/t)/(c.width/e.x),v=f.y-(c.height/r-c.height/t)/(c.height/e.y),y=Math.abs(n.baseMapRectBounds.max.y-n.baseMapRectBounds.min.y)*t;g=y<n.mapAreaRect.height?c.x+(-p.x+(c.width/2-u/2)):g,v=y<n.mapAreaRect.height?c.y+(-p.y+(c.height/2-m/2)):v,n.translatePoint=new Py(g,v),n.scale=t,this.triggerZoomEvent(h,o,i),this.applyTransform()}else if(n.isTileMap&&t>=l&&t<=a){this.getTileTranslatePosition(o,t,e,i),n.tileZoomLevel=t,n.scale=Math.pow(2,t-1),"ZoomOut"===i&&n.zoomSettings.resetToInitial&&n.applyZoomReset&&t<=n.initialZoomLevel&&(n.initialCheck=!0,n.zoomPersistence=!1,n.tileTranslatePoint.x=n.initialTileTranslate.x,n.tileTranslatePoint.y=n.initialTileTranslate.y,t=n.tileZoomLevel=n.mapScaleValue=n.initialZoomLevel,n.scale=Math.pow(2,t-1)),n.translatePoint.y=(n.tileTranslatePoint.y-.01*n.mapScaleValue)/n.scale,n.translatePoint.x=(n.tileTranslatePoint.x-.01*n.mapScaleValue)/n.scale,this.triggerZoomEvent(h,o,i),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),n.mapLayerPanel.generateTiles(t,n.tileTranslatePoint,i+"wheel",null,e);document.getElementById(this.maps.element.id+"_tiles");setTimeout(function(){s.applyTransform(),document.getElementById(s.maps.element.id+"_LayerIndex_1")&&(document.getElementById(s.maps.element.id+"_LayerIndex_1").style.display="block")},250)}this.maps.zoomNotApplied=!1},e.prototype.triggerZoomEvent=function(e,t,i){var s,n=this.maps;s=n.isTileMap?{cancel:!1,name:"zoom",type:i,maps:n.isBlazor?null:n,tileTranslatePoint:{previous:e,current:n.tileTranslatePoint},translatePoint:{previous:n.previousPoint,current:n.translatePoint},tileZoomLevel:{previous:t,current:n.tileZoomLevel},scale:{previous:n.previousScale,current:n.scale}}:{cancel:!1,name:"zoom",type:i,maps:n.isBlazor?null:n,tileTranslatePoint:{},translatePoint:{previous:n.previousPoint,current:n.translatePoint},tileZoomLevel:{},scale:{previous:n.previousScale,current:n.scale}},n.trigger("zoom",s)},e.prototype.getTileTranslatePosition=function(e,t,i,s){var n=this.maps,o="ZoomOut"===s?10:"Reset"===s&&t>1?0:10,r=n.availableSize,a=256*Math.pow(2,e),l=256*Math.pow(2,t),h=(i.x-n.tileTranslatePoint.x)/a*100,c=(i.y-n.tileTranslatePoint.y)/a*100;n.tileTranslatePoint.x=1===t?r.width/2-256:i.x-h*l/100,n.tileTranslatePoint.y=1===t?r.height/2-256+2*o:i.y-c*l/100},e.prototype.performRectZooming=function(){this.isDragZoom=!0;var e=this.maps,t=e.availableSize;e.previousProjection=e.projectionType;var i=e.tileZoomLevel,s=e.tileTranslatePoint,n=this.zoomingRect,o=e.zoomSettings.maxZoom,r=e.zoomSettings.minZoom;if(n.height>0&&n.width>0){var a=this.zoomingRect.x+this.zoomingRect.width/2,l=this.zoomingRect.y+this.zoomingRect.height/2,h=void 0;if(e.isTileMap)h=(h=i+Math.round(i+(t.width/n.width+t.height/n.height)/2))>=r&&h<=o?h:o,this.getTileTranslatePosition(i,h,{x:a,y:l}),e.tileZoomLevel=h,e.translatePoint.x=(e.tileTranslatePoint.x-.5*Math.pow(2,h))/Math.pow(2,h),e.translatePoint.y=(e.tileTranslatePoint.y-.5*Math.pow(2,h))/Math.pow(2,h),e.scale=Math.pow(2,h),this.triggerZoomEvent(s,i,""),e.mapLayerPanel.generateTiles(h,e.tileTranslatePoint);else{var c=e.previousScale=e.scale;h=c+Math.round((t.width/n.width+t.height/n.height)/2);var p=e.previousPoint=e.translatePoint,d=p.x-(t.width/c-t.width/h)/(t.width/a),u=p.y-(t.height/c-t.height/h)/(t.height/l);e.translatePoint=new Py(d,u),e.scale=h,this.triggerZoomEvent(s,i,"")}e.mapScaleValue=h,this.applyTransform(!0),this.maps.zoomNotApplied=!1,this.zoomingRect=null}},e.prototype.setInteraction=function(e){this.lastScale=1,this.interaction=e},e.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},e.prototype.performPinchZooming=function(e){var t=this.maps,i=t.tileZoomLevel,s=t.mapAreaRect;t.previousScale=t.scale,t.previousPoint=t.translatePoint;var n,o,r,a,l,h,c,p,d=t.tileTranslatePoint,u=(n=this.touchStartList,o=this.touchMoveList,r=Nb(n[0],n[1]),Nb(o[0],o[1])/r),m=function(e){return{x:e.map(function(e){return e.x}).reduce(Rb)/e.length,y:e.map(function(e){return e.y}).reduce(Rb)/e.length}}((a=this.touchMoveList,l=this.maps,h=l.element.getBoundingClientRect(),c=h.top+document.defaultView.pageXOffset,p=h.left+document.defaultView.pageYOffset,Array.prototype.slice.call(a).map(function(e){return{x:e.pageX-p,y:e.pageY-c}}))),f=u/this.lastScale;this.lastScale=u,this.pinchFactor*=f,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom));var g=this.pinchFactor;if(t.isTileMap){var v=g;this.getTileTranslatePosition(i,v,{x:m.x,y:m.y}),t.tileZoomLevel=v,t.translatePoint.x=(t.tileTranslatePoint.x-.5*Math.pow(2,v))/Math.pow(2,v),t.translatePoint.y=(t.tileTranslatePoint.y-.5*Math.pow(2,v))/Math.pow(2,v),t.scale=Math.pow(2,v),this.triggerZoomEvent(d,i,""),t.mapLayerPanel.generateTiles(v,t.tileTranslatePoint)}else{var y=t.baseMapRectBounds.min,b=t.baseMapRectBounds.max,C=Math.abs(y.x-b.x),S=Math.abs(y.y-b.y),x=t.translatePoint,w=Math.abs(t.baseMapRectBounds.max.y-t.baseMapRectBounds.min.y)*g,E=x.x-(s.width/t.scale-s.width/g)/(s.width/m.x),k=x.y-(s.height/t.scale-s.height/g)/(s.height/m.y);E=w<t.mapAreaRect.height?s.x+(-y.x+(s.width/2-C/2)):E,k=w<t.mapAreaRect.height?s.y+(-y.y+(s.height/2-S/2)):k,t.translatePoint=new Py(E,k),t.scale=g,this.triggerZoomEvent(d,i,"")}this.applyTransform()},e.prototype.drawZoomRectangle=function(){var e,t,i,s,n=this.maps,o=this.mouseDownPoints,r=this.mouseMovePoints;i=Math.abs(r.x-o.x),s=Math.abs(r.y-o.y),e=r.x>o.x?o.x:o.x-i,t=r.y>o.y?o.y:o.y-s;mb(n.element.id).getBoundingClientRect();if(e>n.mapAreaRect.x&&e<n.mapAreaRect.x+n.mapAreaRect.width&&t>n.mapAreaRect.y&&t<n.mapAreaRect.y+n.mapAreaRect.height){this.zoomingRect=new Wy(e,t,i,s);var a=n.renderer.createSvg({id:n.element.id+"_Selection_Rect_Zooming",width:n.availableSize.width,height:n.availableSize.height}),l=new Vy(n.element.id+"_ZoomRect","#d3d3d3",{width:1,color:"#009900"},.5,this.zoomingRect,0,0,"","3");a.appendChild(n.renderer.drawRectangle(l)),mb(n.element.id+"_Secondary_Element").appendChild(a)}},e.prototype.animateTransform=function(e,t,i,s,n){var o=this.currentLayer.animationDuration;t&&0!==o?function(e,t,i,s,n,o,r){var a=0,l=r.previousPoint,h=r.previousScale,c=n-h,p=new qy(0,0),d=1;if(n!==h){var u=function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)}(l,s),m=function(e,t){return null===t?e.x:e.y-t*e.x}(l,u),f=s.x-l.x,g=s.y-l.y;Bb(e,0,i,function(e){e.timeStamp>e.delay&&(a=(e.timeStamp-e.delay)/e.duration,d=h+a*c,p.x=l.x+a*f/(d/n),p.y=null==u?l.y+a*g:u*p.x+m,e.element.setAttribute("transform","scale( "+d+" ) translate( "+p.x+" "+p.y+" )"),r.translatePoint=p,r.scale=d,r.zoomModule.processTemplate(s.x,s.y,d,r))},function(){r.translatePoint=s,r.scale=n,e.setAttribute("transform","scale( "+n+" ) translate( "+s.x+" "+s.y+" )"),r.zoomModule.processTemplate(s.x,s.y,n,r)})}else e.setAttribute("transform","scale( "+n+" ) translate( "+s.x+" "+s.y+" )")}(e,0,o,new qy(i,s),n,this.maps.mapAreaRect,this.maps):e.setAttribute("transform","scale("+n+") translate( "+i+" "+s+" )")},e.prototype.applyTransform=function(e){var t;this.templateCount=0;var i=this.maps.scale,s=this.maps.translatePoint.x,n=this.maps.translatePoint.y;if(this.maps.zoomShapeCollection=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&cb(this.maps.element.id+"_mapsTooltip"),this.layerCollectionEle){for(var o=0;o<this.layerCollectionEle.childElementCount;o++){var r=this.layerCollectionEle.childNodes[o];if("g"===r.tagName){this.templateCount++,this.index=r.id.indexOf("_LayerIndex_")>-1&&parseFloat(r.id.split("_LayerIndex_")[1].split("_")[0]),this.currentLayer=this.maps.layersCollection[this.index];for(var a=this.maps.mapLayerPanel.calculateFactor(this.currentLayer),l=0;l<r.childElementCount;l++){var h=r.childNodes[l];if(h.id.indexOf("_Markers_Group")>-1||h.id.indexOf("_bubble_Group")>-1||h.id.indexOf("_dataLableIndex_Group")>-1){if(h.id.indexOf("_Markers_Group")>-1){if(this.isPanning&&!this.maps.isBlazor||this.markerTranslates(h.childNodes[0],a,s,n,i,"Marker",r,e),!ae(h=r.childNodes[l])){for(var c=0;c<h.childElementCount;c++){this.markerTranslate(h.childNodes[c],a,s,n,i,"Marker",e);parseInt(h.childNodes[c].id.split("_LayerIndex_")[1].split("_")[0],10);for(var p=parseInt(h.childNodes[c].id.split("_dataIndex_")[1].split("_")[0],10),d=parseInt(h.childNodes[c].id.split("_MarkerIndex_")[1].split("_")[0],10),u=this.currentLayer.markerSettings[d].dataSource[p],m=0;m<this.currentLayer.markerSettings[d].initialMarkerSelection.length;m++)this.currentLayer.markerSettings[d].initialMarkerSelection[m].latitude!==u.latitude&&this.currentLayer.markerSettings[d].initialMarkerSelection[m].longitude!==u.longitude||this.maps.markerSelection(this.currentLayer.markerSettings[d].selectionSettings,this.maps,h.children[c],this.currentLayer.markerSettings[d].dataSource[p]);!this.maps.isTileMap&&this.currentLayer.animationDuration>0&&("visibility:hidden",h.setAttribute("style","visibility:hidden"))}if(this.isPanning&&this.maps.markerModule.sameMarkerData.length>0?eb(this.maps.markerModule.sameMarkerData,this.maps,h,!0):this.maps.markerModule.sameMarkerData.length>0&&(this.maps.markerModule.sameMarkerData=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&cb(this.maps.element.id+"_mapsTooltip")),document.getElementById(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&!this.isPanning){var f=this.maps.mapsTooltipModule,g=h.querySelector("#"+f.tooltipTargetID);if(!ae(g))if("hidden"===g.style.visibility)cb(this.maps.element.id+"_mapsTooltip");else{var v=parseFloat(g.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[1]),y=parseFloat(g.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[2]);this.maps.isTileMap&&(v+=+vb(this.maps.element.id+"_tile_parent").style.left.split("px")[0],y+=+vb(this.maps.element.id+"_tile_parent").style.top.split("px")[0]),f.svgTooltip.location.x=v,f.svgTooltip.location.y=y,f.svgTooltip.enableAnimation=!1}}}}else if(h.id.indexOf("_bubble_Group")>-1){var b=void 0;for(c=0;c<h.childElementCount;c++){(b=h.childNodes[c]).getAttribute("transform");t=parseFloat(b.id.split("_LayerIndex_")[1].split("_")[0]);for(var C=parseFloat(b.id.split("_BubbleIndex_")[1].split("_")[0]),S=(p=parseFloat(b.id.split("_BubbleIndex_")[1].split("_")[2]),0);S<this.maps.bubbleModule.bubbleCollection.length;S++){var x=this.maps.bubbleModule.bubbleCollection[S];if(x.LayerIndex===t&&x.BubbleIndex===C&&x.DataIndex===p){var w=(x.center.x+s)*i,E=(x.center.y+n)*i,k=this.currentLayer.animationDuration;e&&0!==k?qb(b,0,k,new qy(w,E)):b.setAttribute("transform","translate( "+w+" "+E+" )");break}}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1){this.intersect=[],this.maps.zoomLabelPositions=[],this.maps.zoomLabelPositions=this.maps.dataLabelModule.dataLabelCollections;for(c=0;c<h.childElementCount;c++)if(h.childNodes[c].id.indexOf("_LabelIndex_")>-1){var T=parseFloat(h.childNodes[c].id.split("_LabelIndex_")[1].split("_")[0]);this.zoomshapewidth=this.shapeZoomLocation[T].getBoundingClientRect(),this.maps.zoomShapeCollection.push(this.zoomshapewidth),this.dataLabelTranslate(h.childNodes[c],a,s,n,i,"DataLabel",e);var L=this.maps.layers[this.index].dataLabelSettings.border;if(c>0&&L.width>1&&h.childNodes[c-1].id.indexOf("_rectIndex_")>-1){var D=(this.maps.zoomLabelPositions[T].location.x+s)*i,I=(this.maps.zoomLabelPositions[T].location.y+n)*i,O=By(h.childNodes[c].innerHTML,this.maps.layers[this.index].dataLabelSettings.textStyle),A=h.childNodes[c-1],M=D-O.width/2,P=I-O.height/2-5;A.setAttribute("x",M),A.setAttribute("y",P)}}}}else this.maps.isTileMap&&h.id.indexOf("_line_Group")>-1?(h.remove(),r.children.length>0&&r.children[0]?r.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index),r.children[0]):r.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index))):(Ab(h,this.index,i,this.maps),this.maps.zoomTranslatePoint=this.maps.translatePoint,this.animateTransform(h,e,s,n,i),this.shapeZoomLocation=h.childNodes)}}this.maps.arrangeTemplate();this.maps.isBlazor&&this.maps.blazorTemplates()}ae(this.currentLayer)||e&&0!==this.currentLayer.animationDuration||this.processTemplate(s,n,i,this.maps)}},e.prototype.markerTranslates=function(e,t,i,s,n,o,r,a){var l,h=this;void 0===a&&(a=!1);var c=0,p=0,d=0,u=parseInt((e||r).id.split("_LayerIndex_")[1].split("_")[0],10);l=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement",style:"pointer-events: auto;"}),document.getElementById(l.id)&&cb(l.id);var m=this.maps.mapAreaRect,f=yi("div",{id:this.maps.element.id+"_LayerIndex_"+u+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+m.y+"px;left:"+m.x+"px;height:"+m.height+"px;width:"+m.width+"px;"});document.getElementById(f.id)&&cb(f.id);var g=this.maps.layersCollection[u];g.markerSettings.map(function(e,a){var m=e.dataSource;Array.prototype.forEach.call(m,function(v,y){h.maps.markerNullCount=a>=0&&0===y?0:h.maps.markerNullCount;var b={template:e.template,data:v,maps:h.maps,marker:e,cancel:!1,name:kC,fill:e.fill,colorValuePath:e.colorValuePath,shapeValuePath:e.shapeValuePath,height:e.height,width:e.width,imageUrl:e.imageUrl,shape:e.shape,border:e.border};if(b=Zy(b=Qy(b,v),v),h.maps.isBlazor){b.maps,b.marker;var C=JC(b,["maps","marker"]);b=C;e.longitudeValuePath=ae(e.longitudeValuePath)?ae(v.Longitude)?ae(v.longitude)?null:"longitude":"Longitude":e.longitudeValuePath,e.latitudeValuePath=ae(e.latitudeValuePath)?ae(v.Latitude)?ae(v.latitude)?null:"latitude":"Latitude":e.latitudeValuePath}h.maps.trigger("markerRendering",b,function(C){e.shapeValuePath!==b.shapeValuePath&&(b=Qy(b,v)),e.colorValuePath!==b.colorValuePath&&(b=Zy(b,v));var S=ae(e.latitudeValuePath)?ae(v.latitude)?ae(v.Latitude)?0:v.Latitude:parseFloat(v.latitude):Number(Ky(v,e.latitudeValuePath)),x=ae(e.longitudeValuePath)?ae(v.longitude)?ae(v.Longitude)?0:v.Longitude:parseFloat(v.longitude):Number(Ky(v,e.longitudeValuePath));if(h.maps.isBlazor){for(var w={},E=0,k=[],T=0;T<Object.keys(v).length;T++)"text"!==Object.keys(v)[T].toLowerCase()&&"latitude"!==Object.keys(v)[T].toLowerCase()&&"blazortemplateid"!==Object.keys(v)[T].toLowerCase()&&"longitude"!==Object.keys(v)[T].toLowerCase()&&"name"!==Object.keys(v)[T].toLowerCase()&&(w.text=k,k[E]=v[Object.keys(v)[T].toLowerCase()],E++);v.text=w.text}var L=e.offset;if(!b.cancel&&e.visible&&!ae(x)&&!ae(S)){var D=h.maps.element.id+"_LayerIndex_"+u+"_MarkerIndex_"+a+"_dataIndex_"+y,I=h.maps.isTileMap?Oy(new qy(x,S),h.maps.tileZoomLevel,h.maps.tileTranslatePoint,!0):Iy(S,x,t,g,h.maps),O=(0!==g.animationDuration||ae(h.maps.zoomModule),{x:i,y:s});!b.template||isNaN(I.x)||isNaN(I.y)?b.template||isNaN(I.x)||isNaN(I.y)||(p++,tb(b,e,m,y,I,O,D,L,n,h.maps,l)):(d++,ib(b,void 0,D,v,a,f,I,n,L,h.maps))}c+=isNaN(S)||isNaN(x)?1:0,d+=b.cancel?1:0,p+=b.cancel?1:0,h.maps.markerNullCount=ae(S)&&ae(x)?h.maps.markerNullCount+1:h.maps.markerNullCount;m.length,h.maps.markerNullCount;l.childElementCount===m.length-d-c&&"Template"!==o&&(r.appendChild(l),g.markerClusterSettings.allowClustering&&(h.maps.svgObject.appendChild(l),h.maps.element.appendChild(h.maps.svgObject),Jy(g,l,h.maps,u,l,r,!0,!0))),f.childElementCount===m.length-p-c&&mb(h.maps.element.id+"_Secondary_Element")&&(mb(h.maps.element.id+"_Secondary_Element").appendChild(f),n<=1&&g.markerClusterSettings.allowClustering&&Jy(g,f,h.maps,u,l,r,!1,!0))})})})},e.prototype.processTemplate=function(e,t,i,s){for(var n=0;n<this.templateCount;n++){this.currentLayer=s.layersCollection[n];var o=s.mapLayerPanel.calculateFactor(this.currentLayer),r=mb(s.element.id+"_LayerIndex_"+n+"_Markers_Template_Group"),a=mb(s.element.id+"_LayerIndex_"+n+"_Label_Template_Group");if(!ae(r)&&r.childElementCount>0)for(var l=0;l<r.childElementCount;l++)this.markerTranslate(r.childNodes[l],o,e,t,i,"Template");if(!ae(a)&&a.childElementCount>0)for(l=0;l<a.childElementCount;l++)this.dataLabelTranslate(a.childNodes[l],o,e,t,i,"Template")}},e.prototype.dataLabelTranslate=function(e,t,i,s,n,o,r){void 0===r&&(r=!1);var a,l,h,c,p,d=this.maps.dataLabelModule.dataLabelCollections,u=(e.getBoundingClientRect(),this.maps.layers[this.index].dataLabelSettings.textStyle),m=(this.maps.layers[this.index].dataLabelSettings.labelPath,parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0])),f=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);e.id.indexOf("_LabelIndex_")>-1&&(p=parseFloat(e.id.split("_LabelIndex_")[1].split("_")[0]));for(var g=this.currentLayer.animationDuration,v=0;v<d.length;v++){var y=d[v];if(y.layerIndex===m&&y.shapeIndex===f&&y.labelIndex===p){var b=y.location.x,C=y.location.y;if("Template"===o){var S=mb(this.maps.element.id+"_Layer_Collections");b=Math.abs(this.maps.baseMapRectBounds.min.x-b)*n,C=Math.abs(this.maps.baseMapRectBounds.min.y-C)*n;var x=e.getBoundingClientRect(),w=S.getBoundingClientRect(),E=e.parentElement.getBoundingClientRect(),k=b+(w.left-E.left)-x.width/2,T=C+(w.top-E.top)-x.height/2;e.style.left=k+"px",e.style.top=T+"px"}else{b=(b+i)*n;var L=(C=(C+s)*n)-(c=By(h=y.dataLabelText,u)).height/4,D=C+c.height/4,I={rightWidth:b+c.width/2,leftWidth:b-c.width/2,heightTop:L,heightBottom:D};if(r&&0!==g||e.setAttribute("transform","translate( "+b+" "+C+" )"),"Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(n>1?(a=this.zoomshapewidth.width>=c.width?h:"",e.innerHTML=a):(a=this.maps.dataLabelShape[v]>=c.width?h:"",e.innerHTML=a)),"Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(n>1?(a=hb(this.zoomshapewidth.width,h,u),e.innerHTML=a):(a=hb(this.maps.dataLabelShape[v],h,u),e.innerHTML=a)),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var O=0;O<this.intersect.length;O++)if(!ae(this.intersect[O])){if(!(I.leftWidth>this.intersect[O].rightWidth||I.rightWidth<this.intersect[O].leftWidth||I.heightTop>this.intersect[O].heightBottom||I.heightBottom<this.intersect[O].heightTop)){a="",e.innerHTML=a;break}a=ae(a)?h:a,e.innerHTML=a}this.intersect.push(I)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var A=0;A<this.intersect.length;A++)if(!ae(this.intersect[A]))if(I.rightWidth<this.intersect[A].leftWidth||I.leftWidth>this.intersect[A].rightWidth||I.heightBottom<this.intersect[A].heightTop||I.heightTop>this.intersect[A].heightBottom)l=ae(a)?h:a,n>1&&(l=hb(this.zoomshapewidth.width,l,u)),e.innerHTML=l;else{if(I.leftWidth>this.intersect[A].leftWidth){l=hb((M=this.intersect[A].rightWidth-I.leftWidth)-(I.rightWidth-I.leftWidth),a=ae(a)?h:a,u),e.innerHTML=l;break}if(I.leftWidth<this.intersect[A].leftWidth){var M=I.rightWidth-this.intersect[A].leftWidth;l=hb(Math.abs(M-(I.rightWidth-I.leftWidth)),a=ae(a)?h:a,u),e.innerHTML=l;break}}this.intersect.push(I),ae(l)&&(l=hb(this.zoomshapewidth.width,h,u),e.innerHTML=l)}else qb(e,0,g,new qy(b,C))}}}},e.prototype.markerTranslate=function(e,t,i,s,n,o,r){void 0===r&&(r=!1);var a=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),c=this.maps.layersCollection[a],p=c.markerSettings[l];if(!ae(p)&&!ae(p.dataSource)&&!ae(p.dataSource[h])){if(this.maps.isBlazor){p.longitudeValuePath=ae(p.longitudeValuePath)?ae(p.dataSource[h].Longitude)?ae(p.dataSource[h].longitude)?null:"longitude":"Longitude":p.longitudeValuePath,p.latitudeValuePath=ae(p.latitudeValuePath)?ae(p.dataSource[h].Latitude)?ae(p.dataSource[h].latitude)?null:"latitude":"Latitude":p.latitudeValuePath;for(var d={},u=0,m=[],f=0;f<Object.keys(p.dataSource[h]).length;f++)"text"!==Object.keys(p.dataSource[h])[f].toLowerCase()&&"longitude"!==Object.keys(p.dataSource[h])[f].toLowerCase()&&"latitude"!==Object.keys(p.dataSource[h])[f].toLowerCase()&&"blazortemplateid"!==Object.keys(p.dataSource[h])[f].toLowerCase()&&"name"!==Object.keys(p.dataSource[h])[f].toLowerCase()&&(d.text=m,m[u]=p.dataSource[h][Object.keys(p.dataSource[h])[f].toLowerCase()],u++);p.dataSource[h].text=d.text}var g=ae(p.longitudeValuePath)?ae(p.dataSource[h].longitude)?ae(p.dataSource[h].Latitude)?0:parseFloat(p.dataSource[h].Latitude):parseFloat(p.dataSource[h].longitude):Number(Ky(p.dataSource[h],p.longitudeValuePath)),v=ae(p.latitudeValuePath)?ae(p.dataSource[h].latitude)?ae(p.dataSource[h].Latitude)?0:parseFloat(p.dataSource[h].Latitude):parseFloat(p.dataSource[h].latitude):Number(Ky(p.dataSource[h],p.latitudeValuePath)),y=this.currentLayer.animationDuration,b=this.maps.isTileMap?Oy(new Py(g,v),this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):Iy(v,g,t,c,this.maps);if(this.maps.isTileMap)if("Template"===o){var C=e.getBoundingClientRect();if(e.style.left=b.x-C.width/2+p.offset.x+"px",e.style.top=b.y-C.height/2+p.offset.y+"px","GoogleStaticMap"===this.maps.layers[this.maps.baseLayerIndex].layerType){var S=mb(this.maps.element.id+"_StaticGoogleMap").getBoundingClientRect();"none"!==e.style.display&&((S.x>C.x||S.x+640<C.x+C.width)&&(S.y>C.y||S.y+S.height<C.y+C.height)?e.style.display="none":(S.x>C.x||S.x+640<C.x+C.width)&&(e.style.display="none"))}}else b.x+=p.offset.x,b.y+=p.offset.y,e.setAttribute("transform","translate( "+b.x+" "+b.y+" )");else if("Template"===o){b.x=Math.abs(this.maps.baseMapRectBounds.min.x-b.x)*n,b.y=Math.abs(this.maps.baseMapRectBounds.min.y-b.y)*n;var x=mb(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),w=e.parentElement.getBoundingClientRect();e.style.left=b.x+(x.left-w.left)+p.offset.x+"px",e.style.top=b.y+(x.top-w.top)+p.offset.y+"px",e.style.transform="translate(-50%, -50%)"}else b.x=(b.x+i)*n+p.offset.x,b.y=(b.y+s)*n+p.offset.y,r&&0!==y?qb(e,0,y,b):e.setAttribute("transform","translate( "+b.x+" "+b.y+" )")}},e.prototype.panning=function(e,t,i,s){var n,o=this.maps,r=this.mouseDownPoints,a=this.mouseMovePoints,l=o.scale;o.markerZoomedState=!1,o.zoomPersistence=o.enablePersistence,o.defaultState=!1,o.initialCheck=!1;var h,c,p=o.translatePoint,d=o.tileTranslatePoint;if(t=ae(t)?r.x-a.x:t,i=ae(i)?r.y-a.y:i,o.isTileMap){if(this.maps.tileZoomLevel>1){h=o.tileTranslatePoint.x-t,c=o.tileTranslatePoint.y-i,this.distanceX=h-o.tileTranslatePoint.x,this.distanceY=c-o.tileTranslatePoint.y,o.tileTranslatePoint.x=h,o.tileTranslatePoint.y=c,(o.tileTranslatePoint.y>-10&&i<0||o.tileTranslatePoint.y<-256*(Math.pow(2,this.maps.tileZoomLevel)-2)&&i>0)&&(o.tileTranslatePoint.x=h+t,o.tileTranslatePoint.y=c+i),o.translatePoint.x=(o.tileTranslatePoint.x-t)/o.scale,o.translatePoint.y=(o.tileTranslatePoint.y-i)/o.scale;var u=this.maps.getTileGeoLocation(s);n={cancel:!1,name:"pan",maps:o.isBlazor?null:o,tileTranslatePoint:{previous:d,current:o.tileTranslatePoint},translatePoint:{previous:p,current:o.translatePoint},scale:o.scale,tileZoomLevel:o.tileZoomLevel,latitude:u.latitude,longitude:u.longitude},o.trigger("pan",n),o.mapLayerPanel.generateTiles(o.tileZoomLevel,o.tileTranslatePoint,"Pan"),this.applyTransform()}}else{h=p.x-t/l,c=p.y-i/l;var m=mb(o.element.id+"_Layer_Collections").getBoundingClientRect(),f=mb(o.element.id+"_svg").getBoundingClientRect(),g=t<0?m.left<=f.left+o.mapAreaRect.x:m.left+m.width>=f.left+f.width+o.mapAreaRect.x+o.margin.left,v=i<0?m.top<=f.top+o.mapAreaRect.y:m.top+m.height+o.margin.top>=f.top+f.height,y=this.maps.getGeoLocation(this.maps.layersCollection.length-1,s);n={cancel:!1,name:"pan",maps:o.isBlazor?null:o,tileTranslatePoint:{},translatePoint:{previous:p,current:new Py(h,c)},scale:o.scale,tileZoomLevel:o.tileZoomLevel,latitude:y.latitude,longitude:y.longitude},o.trigger("pan",n),n.cancel||(g&&v?(o.translatePoint=new Py(h,c),this.applyTransform()):g?(o.translatePoint=new Py(h,o.translatePoint.y),this.applyTransform()):v&&(o.translatePoint=new Py(o.translatePoint.x,c),this.applyTransform())),this.maps.zoomNotApplied=!1}o.zoomTranslatePoint=o.translatePoint,this.mouseDownPoints=this.mouseMovePoints,this.maps.zoomNotApplied=!1,this.isSingleClick=!1},e.prototype.toAlignSublayer=function(){this.maps.translatePoint.x=ae(this.distanceX)?this.maps.translatePoint.x:this.maps.translatePoint.x-this.distanceX/this.maps.scale,this.maps.translatePoint.y=ae(this.distanceY)?this.maps.translatePoint.y:this.maps.translatePoint.y-this.distanceY/this.maps.scale,this.applyTransform(!1)},e.prototype.toolBarZooming=function(e,t){var i=this,s=this.maps;s.initialCheck=!1,s.defaultState="Reset"===t&&1===e&&!(s.zoomSettings.resetToInitial&&s.applyZoomReset)||"ZoomOut"===t&&1===e;var n=s.tileZoomLevel,o=s.previousScale=s.scale;s.markerZoomedState=!1,s.zoomPersistence=s.enablePersistence,s.mapScaleValue=e;var r=s.zoomSettings.maxZoom,a=s.zoomSettings.minZoom,l=s.mapAreaRect,h=s.previousPoint=s.translatePoint,c=s.tileTranslatePoint;if(s.previousProjection=s.projectionType,e="ZoomOut"===t&&1===Math.round(e)?1:e,e=a>(e="Reset"===t?1:0===Math.round(e)?1:e)&&"ZoomIn"===t?a+1:e,!s.isTileMap&&("ZoomIn"===t?e>=a&&e<=r:e>=a||s.isReset)){var p=s.baseMapRectBounds.min,d=s.baseMapRectBounds.max,u=Math.abs(d.x-p.x),m=Math.abs(p.y-d.y),f=h.x-(l.width/o-l.width/e)/2,g=h.y-(l.height/o-l.height/e)/2,v=Math.abs(s.baseMapRectBounds.max.y-s.baseMapRectBounds.min.y)*e;f=v<s.mapAreaRect.height?l.x+(-p.x+(l.width/2-u/2)):f,g=v<s.mapAreaRect.height?l.y+(-p.y+(l.height/2-m/2)):g,s.translatePoint=new Py(f,g),s.zoomTranslatePoint=s.translatePoint,s.scale=e,this.triggerZoomEvent(c,n,t),this.applyTransform(!0)}else if(s.isTileMap&&(e>=a&&e<=r||s.isReset)){var y=n<a&&!s.isReset?a:e;s.scale=Math.pow(2,y-1),s.tileZoomLevel=y;var b={x:s.availableSize.width/2,y:s.availableSize.height/2};this.getTileTranslatePosition(n,y,b,t),(s.zoomSettings.resetToInitial&&s.applyZoomReset&&"Reset"===t||"ZoomOut"===t&&s.zoomSettings.resetToInitial&&s.applyZoomReset&&y<=s.initialZoomLevel)&&(s.initialCheck=!0,s.zoomPersistence=!1,s.tileTranslatePoint.x=s.initialTileTranslate.x,s.tileTranslatePoint.y=s.initialTileTranslate.y,y=s.tileZoomLevel=s.mapScaleValue=s.initialZoomLevel),this.triggerZoomEvent(c,n,t),s.translatePoint.y=(s.tileTranslatePoint.y-.01*s.mapScaleValue)/s.scale,s.translatePoint.x=(s.tileTranslatePoint.x-.01*s.mapScaleValue)/s.scale,document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),s.mapLayerPanel.generateTiles(y,s.tileTranslatePoint,t);document.getElementById(this.maps.element.id+"_tiles");setTimeout(function(){i.applyTransform(!0),document.getElementById(i.maps.element.id+"_LayerIndex_1")&&(document.getElementById(i.maps.element.id+"_LayerIndex_1").style.display="block")},250)}this.maps.zoomNotApplied=!1},e.prototype.createZoomingToolbars=function(){var e=this.maps;this.toolBarGroup=e.renderer.createGroup({id:e.element.id+"_Zooming_KitCollection",opacity:.3});var t=15,i=15,s=e.zoomSettings.toolBarOrientation,n=e.zoomSettings.toolbars;var o=e.zoomSettings.toolbars.length,r="Horizontal"===e.zoomSettings.toolBarOrientation?16*o+20*o:32,a="Horizontal"===e.zoomSettings.toolBarOrientation?32:16*o+20*o;this.toolBarGroup.appendChild(e.renderer.drawRectangle(new Vy(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},1,new Wy(0,0,r,a),0,0)));var l=e.renderer.createDefs();l.innerHTML='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/><feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>',this.toolBarGroup.appendChild(l);var h=e.renderer.drawRectangle(new Vy(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},.1,new Wy(0,0,r,a),0,0));h.setAttribute("filter","url(#chart_shadow)"),this.toolBarGroup.appendChild(h);for(var c=0;c<n.length;c++){var p=n[c];this.currentToolbarEle=e.renderer.createGroup({id:e.element.id+"_Zooming_ToolBar_"+p+"_Group",transform:"translate( "+t+" "+i+" ) "}),this.currentToolbarEle.setAttribute("class","e-maps-toolbar");var d="transparent",u="";switch(p.toLowerCase()){case"zoom":var m=void 0,f=void 0;u="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,",u+="5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571",u+="L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,",this.maps.zoomSettings.enablePanning&&!this.maps.zoomSettings.enableSelectionZooming?(m=d,f=this.maps.themeStyle.zoomFillColor):this.maps.zoomSettings.enablePanning&&this.maps.zoomSettings.enableSelectionZooming?(m=d,f=this.maps.themeStyle.zoomFillColor):this.maps.zoomSettings.enablePanning||this.maps.zoomSettings.enableSelectionZooming?(m=this.selectionColor,f=this.selectionColor):(m=d,f=this.maps.themeStyle.zoomFillColor),this.currentToolbarEle.appendChild(e.renderer.drawPath(new Fy(e.element.id+"_Zooming_ToolBar_"+p,m,1,f,1,null,u+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"))),this.zoomElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":u="M 8, 0 L 8, 16 M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Fy(e.element.id+"_Zooming_ToolBar_"+p+"_Path",d,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomInElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":u="M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Fy(e.element.id+"_Zooming_ToolBar_"+p,d,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomOutElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":var g=void 0;u="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,",u+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z",this.maps.zoomSettings.enablePanning&&this.maps.zoomModule.isDragZoom?g="#737373":this.maps.zoomSettings.enablePanning?g=this.selectionColor:(g="#737373",this.currentToolbarEle.setAttribute("class","")),this.currentToolbarEle.appendChild(e.renderer.drawPath(new Fy(e.element.id+"_Zooming_ToolBar_"+p,g,1,g,1,null,u))),this.panColor=g,this.panElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":u="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,",u+="1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,",u+="13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Fy(e.element.id+"_Zooming_ToolBar_"+p,this.fillColor,null,this.maps.themeStyle.zoomFillColor,1,null,u+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"))),this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.currentToolbarEle.appendChild(e.renderer.drawCircle(new zy(e.element.id+"_Zooming_ToolBar_"+p+"_Rect",d,{color:this.maps.themeStyle.zoomFillColor,width:1},1,8,8,16,""))),t="Horizontal"===s?t+36:t,i="Horizontal"===s?i:i+36,this.toolBarGroup.appendChild(this.currentToolbarEle)}},e.prototype.performToolBarAction=function(e){var t=e.target;e.stopImmediatePropagation();var i="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1,s=t.id.split("_Zooming_ToolBar_")[1].split("_")[0];i?(this.handled=!0,this.performZoomingByToolBar(s)):"mousedown"!==e.type&&"pointerdown"!==e.type||this.handled?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(s))},e.prototype.performZoomingByToolBar=function(e){var t=this.maps;switch(t.isReset=!1,e.toLowerCase()){case"zoom":this.panColor=this.fillColor,this.zoomColor=this.selectionColor,this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.fillColor);break;case"pan":this.maps.zoomSettings.enablePanning?this.panColor=this.selectionColor:this.panColor="#737373",this.zoomColor=this.fillColor,this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.panColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor));break;case"zoomin":t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)+1,"ZoomIn");break;case"zoomout":t.staticMapZoom=t.tileZoomLevel,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut");break;case"reset":t.staticMapZoom=t.zoomSettings.enable?t.zoomSettings.zoomFactor:0,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming(1,"Reset"),this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,"#737373"))}this.panningStyle(e.toLowerCase())},e.prototype.panningStyle=function(e){var t=mb(this.maps.element.id+"_svg");"pan"===e||this.isPanning?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},e.prototype.applySelection=function(e,t){if(e)for(var i,s=0;s<e.childElementCount;s++)"circle"!==(i=e.childNodes[s]).tagName&&(i.setAttribute("fill",t),i.setAttribute("stroke",t))},e.prototype.showTooltip=function(e){var t=e.target.id.split("_Zooming_ToolBar_")[1].split("_")[0];this.isTouch||function(e,t,i,s,n){var o=vb(e),r="top:"+i.toString()+"px;left:"+s.toString()+"px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:"+n+";border-radius:2px;";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=yi("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))}("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),e.pageY+10,e.pageX+10,"10px")},e.prototype.removeTooltip=function(){mb("EJ2_Map_Toolbar_Tip")&&Li(mb("EJ2_Map_Toolbar_Tip"))},e.prototype.alignToolBar=function(){var e=this.maps,t=yi("div",{id:e.element.id+"_ToolBar",styles:"position:absolute;z-index:2"}),i=e.renderer.createSvg({id:e.element.id+"_Zooming_ToolBar",width:10,height:10});i.appendChild(this.toolBarGroup),t.appendChild(i),mb(e.element.id+"_Secondary_Element")&&mb(e.element.id+"_Secondary_Element").appendChild(t);var s=this.toolBarGroup.getBoundingClientRect();i.setAttribute("height",(s.height+5).toString()),i.setAttribute("width",(s.width+5).toString());var n=ae(e.totalRect)?e.mapAreaRect:e.totalRect,o=0,r=0;switch(e.zoomSettings.verticalAlignment){case"Near":r=n.y;break;case"Center":r=n.height/2-s.height/2;break;case"Far":r=n.height-s.height-10}switch(e.zoomSettings.horizontalAlignment){case"Near":o=n.x;break;case"Center":o=n.width/2-s.width/2;break;case"Far":o=n.width-s.width-10}t.style.left=o+"px",t.style.top=r+"px";var a=this.maps.zoomSettings.highlightColor,l=" .e-maps-toolbar:hover > circle { stroke:"+a+"; } .e-maps-toolbar:hover > path { fill: "+a+" ;  stroke: "+a+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",h=document.createElement("style");h.appendChild(document.createTextNode(l)),t.appendChild(h)},e.prototype.wireEvents=function(e,t){Ct.add(e,bt.touchStartEvent,t,this),Ct.add(e,"mouseover",this.showTooltip,this),Ct.add(e,"mouseout",this.removeTooltip,this)},e.prototype.mapMouseWheel=function(e){if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom){var t=this.maps;t.availableSize;t.markerZoomedState=!1,t.zoomPersistence=t.enablePersistence;var i=this.getMousePosition(e.pageX,e.pageY),s=t.tileZoomLevel,n=t.scale,o=t.isTileMap?s:n;if(i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height){e.preventDefault();var r="mozilla"!==this.browserName||this.isPointer?e.wheelDelta/120>0?"ZoomIn":"ZoomOut":-e.detail/3>0?"ZoomIn":"ZoomOut";"ZoomIn"===r?(t.mapScaleValue=o+1,t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.performZooming(i,o+1,r)):(t.mapScaleValue=o-1,t.staticMapZoom=t.tileZoomLevel,1===t.mapScaleValue&&(t.markerCenterLatitude=null,t.markerCenterLongitude=null),t.staticMapZoom>1&&t.staticMapZoom<22&&(t.staticMapZoom-=1),this.performZooming(i,o-1,r))}}},e.prototype.doubleClick=function(e){var t=e.pageX,i=e.pageY;e.target;if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom&&!(e.target.id.indexOf("_Zooming_")>-1)){var s=this.getMousePosition(t,i),n=this.maps,o=(n.availableSize,n.tileZoomLevel),r=n.scale;n.mapScaleValue=n.mapScaleValue+1;var a=n.isTileMap?o:r;s.x>n.mapAreaRect.x&&s.x<n.mapAreaRect.x+n.mapAreaRect.width&&s.y>n.mapAreaRect.y&&s.y<n.mapAreaRect.y+n.mapAreaRect.height&&this.performZooming(s,a+1,"ZoomIn")}},e.prototype.mouseDownHandler=function(e){var t,i,s=null;e.target;"touchstart"===e.type?(this.isTouch=!0,s=e.touches,e.target,t=s[0].clientX,i=s[0].clientY):(t=e.pageX,i=e.pageY,e.target),this.maps.zoomSettings.enablePanning?this.isPanning=this.panColor===this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor!==this.selectionColor:this.isPanning=this.panColor!==this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor===this.selectionColor,this.mouseDownLatLong={x:t,y:i},this.rectZoomingStart=!this.isPanning&&this.maps.zoomSettings.enable,this.mouseDownPoints=this.getMousePosition(t,i),this.isTouch&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=s.length),this.isSingleClick=!0},e.prototype.mouseMoveHandler=function(e){var t,i,s,n=this.maps,o=null,r=this.maps.zoomSettings;"touchmove"===e.type?(this.isTouch=!0,s=e.target,t=(o=e.touches)[0].clientX,i=o[0].clientY):(t=e.pageX,i=e.pageY,s=e.target),mb(n.element.id+"_Zooming_KitCollection")&&(s.id.indexOf("_Zooming_")>-1?(mb(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),document.getElementById(n.element.id+"_Zooming_ToolBar_Pan_Group")&&(this.maps.zoomSettings.enablePanning||(s.id.indexOf("_Zooming_ToolBar")>-1||s.id.indexOf("_Zooming_Rect")>-1)&&(mb(n.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","0.3"),mb(n.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","0.3")))):(mb(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"),!this.maps.zoomSettings.enablePanning&&document.getElementById(n.element.id+"_Zooming_ToolBar_Pan_Group")&&(mb(n.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","1"),mb(n.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","1")))),this.isTouch&&this.maps.zoomSettings.pinchZooming&&(this.firstMove&&2===o.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=Pb(e)):2===o.length&&2===this.touchStartList.length&&(this.touchMoveList=Pb(e),e.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(e)),this.firstMove=!1),this.mouseMovePoints=this.getMousePosition(t,i);e.target.id,e.target;r.enable&&this.isPanning&&(bt.isDevice&&o.length>=1||!bt.isDevice)&&(e.preventDefault(),this.maps.element.style.cursor="pointer",this.mouseMoveLatLong={x:t,y:i},this.mouseDownLatLong.x!==this.mouseMoveLatLong.x&&this.mouseDownLatLong.y!==this.mouseMoveLatLong.y&&(this.maps.zoomSettings.enablePanning&&this.panning("None",null,null,e),this.mouseDownLatLong.x=t,this.mouseDownLatLong.y=i)),(this.isTouch?1===o.length&&this.rectZoomingStart:this.rectZoomingStart)&&(e.preventDefault(),this.maps.zoomSettings.enableSelectionZooming&&this.drawZoomRectangle())},e.prototype.mouseUpHandler=function(e){this.maps;this.rectZoomingStart=!1,this.isPanning=!1,this.isSingleClick=!!this.isSingleClick,this.isTouch=!1,this.touchStartList=[],this.touchMoveList=[],this.lastScale=1,this.maps.element.style.cursor="auto",ae(this.distanceX)&&ae(this.distanceY)||ae(this.currentLayer)||"SubLayer"!==this.currentLayer.type||(this.toAlignSublayer(),this.distanceX=this.distanceY=null);var t=mb(this.maps.element.id+"_Selection_Rect_Zooming");t&&this.maps.zoomSettings.enable&&this.maps.zoomSettings.enableSelectionZooming&&(!0,Li(t),this.performRectZooming()),this.mouseMoveLatLong={x:0,y:0},this.mouseDownLatLong={x:0,y:0}},e.prototype.mouseCancelHandler=function(e){this.isPanning=!1,this.isTouch=!1,this.rectZoomingStart=!1;var t=mb(this.maps.element.id+"_Selection_Rect_Zooming");t&&this.maps.zoomSettings.enable&&(Li(t),this.performRectZooming())},e.prototype.click=function(e){var t=this.maps;if(t.markerModule&&t.markerModule.sameMarkerData.length>0||e.target.id.indexOf("MarkerIndex")>-1&&-1==e.target.id.indexOf("cluster"))return null;if(this.isSingleClick&&t.zoomSettings.zoomOnClick&&!(e.target.id.indexOf("_Zooming_")>-1)&&!t.zoomSettings.doubleClickZoom&&this.zoomColor!==this.selectionColor){var i=e.pageX,s=e.pageY,n=this.getMousePosition(i,s),o=t.tileZoomLevel,r=t.scale;t.mapScaleValue=t.mapScaleValue+1;var a=t.isTileMap?o:r;n.x>t.mapAreaRect.x&&n.x<t.mapAreaRect.x+t.mapAreaRect.width&&n.y>t.mapAreaRect.y&&n.y<t.mapAreaRect.y+t.mapAreaRect.height&&this.performZooming(n,a+1,"ZoomIn")}},e.prototype.getMousePosition=function(e,t){var i=this.maps,s=i.element.getBoundingClientRect(),n=i.element.ownerDocument.defaultView.pageXOffset,o=i.element.ownerDocument.defaultView.pageYOffset,r=i.element.ownerDocument.documentElement.clientTop,a=i.element.ownerDocument.documentElement.clientLeft,l=s.left+n-a,h=s.top+o-r;return new Py(Math.abs(e-l),Math.abs(t-h))},e.prototype.addEventListener=function(){this.maps.isDestroyed||(Ct.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),Ct.add(this.maps.element,"click",this.click,this),Ct.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(bt.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(bt.touchStartEvent,this.mouseDownHandler,this),this.maps.on(bt.touchEndEvent,this.mouseUpHandler,this),Ct.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(Ct.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),Ct.remove(this.maps.element,"click",this.click),Ct.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(bt.touchMoveEvent,this.mouseMoveHandler),this.maps.off(bt.touchStartEvent,this.mouseDownHandler),this.maps.off(bt.touchEndEvent,this.mouseUpHandler),this.maps.off(this.cancelEvent,this.mouseCancelHandler))},e.prototype.getModuleName=function(){return"Zoom"},e.prototype.destroy=function(e){this.removeEventListener()},e}();var eS;new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){var t;!function(e){e[e.None=0]="None",e[e.Ascii=1]="Ascii",e[e.Unicode=2]="Unicode"}(e.ForceEncoding||(e.ForceEncoding={})),function(e){e[e.StringValue=0]="StringValue",e[e.ByteBuffer=1]="ByteBuffer"}(t||(t={}))}(eS||(eS={}));var tS,iS,sS,nS,oS,rS,aS,lS,hS,cS,pS,dS,uS;!function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(tS||(tS={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(iS||(iS={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e[e.Justify=3]="Justify"}(sS||(sS={})),function(e){e[e.Fill=0]="Fill",e[e.Stroke=1]="Stroke",e[e.FillStroke=2]="FillStroke",e[e.None=3]="None",e[e.ClipFlag=4]="ClipFlag",e[e.ClipFill=4]="ClipFill",e[e.ClipStroke=5]="ClipStroke",e[e.ClipFillStroke=6]="ClipFillStroke",e[e.Clip=7]="Clip"}(nS||(nS={})),function(e){e[e.Miter=0]="Miter",e[e.Round=1]="Round",e[e.Bevel=2]="Bevel"}(oS||(oS={})),function(e){e[e.Flat=0]="Flat",e[e.Round=1]="Round",e[e.Square=2]="Square"}(rS||(rS={})),function(e){e[e.Solid=0]="Solid",e[e.Dash=1]="Dash",e[e.Dot=2]="Dot",e[e.DashDot=3]="DashDot",e[e.DashDotDot=4]="DashDotDot",e[e.Custom=5]="Custom"}(aS||(aS={})),function(e){e[e.Winding=0]="Winding",e[e.Alternate=1]="Alternate"}(lS||(lS={})),function(e){e[e.Rgb=0]="Rgb",e[e.Cmyk=1]="Cmyk",e[e.GrayScale=2]="GrayScale",e[e.Indexed=3]="Indexed"}(hS||(hS={})),function(e){e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Hue=12]="Hue",e[e.Saturation=13]="Saturation",e[e.Color=14]="Color",e[e.Luminosity=15]="Luminosity"}(cS||(cS={})),function(e){e[e.Centimeter=0]="Centimeter",e[e.Pica=1]="Pica",e[e.Pixel=2]="Pixel",e[e.Point=3]="Point",e[e.Inch=4]="Inch",e[e.Document=5]="Document",e[e.Millimeter=6]="Millimeter"}(pS||(pS={})),function(e){e[e.Fit=0]="Fit",e[e.Center=1]="Center",e[e.Stretch=2]="Stretch",e[e.Tile=3]="Tile"}(dS||(dS={})),function(e){e[e.None=0]="None",e[e.LeftToRight=1]="LeftToRight",e[e.RightToLeft=2]="RightToLeft"}(uS||(uS={}));var mS,fS,gS,vS,yS,bS,CS,SS,xS,wS,ES,kS,TS;!function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Underline=4]="Underline",e[e.Strikeout=8]="Strikeout"}(mS||(mS={})),function(e){e[e.Helvetica=0]="Helvetica",e[e.Courier=1]="Courier",e[e.TimesRoman=2]="TimesRoman",e[e.Symbol=3]="Symbol",e[e.ZapfDingbats=4]="ZapfDingbats"}(fS||(fS={})),function(e){e[e.Standard=0]="Standard",e[e.TrueType=1]="TrueType",e[e.TrueTypeEmbedded=2]="TrueTypeEmbedded"}(gS||(gS={})),function(e){e[e.None=0]="None",e[e.Word=1]="Word",e[e.WordOnly=2]="WordOnly",e[e.Character=3]="Character"}(vS||(vS={})),function(e){e[e.None=0]="None",e[e.SuperScript=1]="SuperScript",e[e.SubScript=2]="SubScript"}(yS||(yS={})),function(e){e[e.Unknown=0]="Unknown",e[e.StandardEncoding=1]="StandardEncoding",e[e.MacRomanEncoding=2]="MacRomanEncoding",e[e.MacExpertEncoding=3]="MacExpertEncoding",e[e.WinAnsiEncoding=4]="WinAnsiEncoding",e[e.PdfDocEncoding=5]="PdfDocEncoding",e[e.IdentityH=6]="IdentityH"}(bS||(bS={})),function(e){e[e.Apple=0]="Apple",e[e.Microsoft=4]="Microsoft",e[e.Trimmed=6]="Trimmed"}(CS||(CS={})),function(e){e[e.Unknown=0]="Unknown",e[e.Symbol=1]="Symbol",e[e.Unicode=2]="Unicode",e[e.Macintosh=3]="Macintosh"}(SS||(SS={})),function(e){e[e.AppleUnicode=0]="AppleUnicode",e[e.Macintosh=1]="Macintosh",e[e.Iso=2]="Iso",e[e.Microsoft=3]="Microsoft"}(xS||(xS={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unicode=1]="Unicode"}(wS||(wS={})),function(e){e[e.Roman=0]="Roman",e[e.Japanese=1]="Japanese",e[e.Chinese=2]="Chinese"}(ES||(ES={})),function(e){e[e.FixedPitch=1]="FixedPitch",e[e.Serif=2]="Serif",e[e.Symbolic=4]="Symbolic",e[e.Script=8]="Script",e[e.Nonsymbolic=32]="Nonsymbolic",e[e.Italic=64]="Italic",e[e.ForceBold=262144]="ForceBold"}(kS||(kS={})),function(e){e[e.Arg1And2AreWords=1]="Arg1And2AreWords",e[e.ArgsAreXyValues=2]="ArgsAreXyValues",e[e.RoundXyToGrid=4]="RoundXyToGrid",e[e.WeHaveScale=8]="WeHaveScale",e[e.Reserved=16]="Reserved",e[e.MoreComponents=32]="MoreComponents",e[e.WeHaveAnXyScale=64]="WeHaveAnXyScale",e[e.WeHaveTwoByTwo=128]="WeHaveTwoByTwo",e[e.WeHaveInstructions=256]="WeHaveInstructions",e[e.UseMyMetrics=512]="UseMyMetrics"}(TS||(TS={}));var LS;!function(e){e[e.None=0]="None",e[e.NewLineBreak=1]="NewLineBreak",e[e.LayoutBreak=2]="LayoutBreak",e[e.FirstParagraphLine=4]="FirstParagraphLine",e[e.LastParagraphLine=8]="LastParagraphLine"}(LS||(LS={}));var DS;!function(e){e[e.None=0]="None",e[e.Registered=1]="Registered"}(DS||(DS={}));var IS;!function(e){e[e.Free=0]="Free",e[e.Normal=1]="Normal",e[e.Packed=2]="Packed"}(IS||(IS={}));var OS,AS,MS,PS,NS,RS;!function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape"}(OS||(OS={})),function(e){e[e.RotateAngle0=0]="RotateAngle0",e[e.RotateAngle90=1]="RotateAngle90",e[e.RotateAngle180=2]="RotateAngle180",e[e.RotateAngle270=3]="RotateAngle270"}(AS||(AS={})),function(e){e[e.None=0]="None",e[e.Numeric=1]="Numeric",e[e.LowerLatin=2]="LowerLatin",e[e.LowerRoman=3]="LowerRoman",e[e.UpperLatin=4]="UpperLatin",e[e.UpperRoman=5]="UpperRoman"}(MS||(MS={})),function(e){e[e.None=0]="None",e[e.Bottom=1]="Bottom",e[e.Top=2]="Top",e[e.Left=3]="Left",e[e.Right=4]="Right",e[e.Fill=5]="Fill"}(PS||(PS={})),function(e){e[e.None=0]="None",e[e.TopLeft=1]="TopLeft",e[e.TopCenter=2]="TopCenter",e[e.TopRight=3]="TopRight",e[e.MiddleLeft=4]="MiddleLeft",e[e.MiddleCenter=5]="MiddleCenter",e[e.MiddleRight=6]="MiddleRight",e[e.BottomLeft=7]="BottomLeft",e[e.BottomCenter=8]="BottomCenter",e[e.BottomRight=9]="BottomRight"}(NS||(NS={})),function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom",e[e.Left=3]="Left",e[e.Right=4]="Right"}(RS||(RS={}));var BS;!function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Unknown=0]="Unknown",e[e.Bmp=1]="Bmp",e[e.Emf=2]="Emf",e[e.Gif=3]="Gif",e[e.Jpeg=4]="Jpeg",e[e.Png=5]="Png",e[e.Wmf=6]="Wmf",e[e.Icon=7]="Icon"}(BS||(BS={}));var HS,FS,jS;(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Paginate=0]="Paginate",e[e.OnePage=1]="OnePage"}(HS||(HS={})),function(e){e[e.FitPage=0]="FitPage",e[e.FitElement=1]="FitElement",e[e.FitColumnsToPage=2]="FitColumnsToPage"}(FS||(FS={})),function(e){e[e.Start=0]="Start",e[e.Line=1]="Line",e[e.Bezier3=3]="Bezier3",e[e.Bezier=3]="Bezier",e[e.PathTypeMask=7]="PathTypeMask",e[e.DashMode=16]="DashMode",e[e.PathMarker=32]="PathMarker",e[e.CloseSubpath=128]="CloseSubpath"}(jS||(jS={}));var VS;(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Location=0]="Location",e[e.FitToPage=1]="FitToPage",e[e.FitR=2]="FitR"}(VS||(VS={}));var zS,_S,qS,WS;!function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End",e[e.Both=3]="Both"}(zS||(zS={})),function(e){e[e.BackwardDiagonal=0]="BackwardDiagonal",e[e.ForwardDiagonal=1]="ForwardDiagonal",e[e.Horizontal=2]="Horizontal",e[e.Vertical=3]="Vertical"}(_S||(_S={})),function(e){e[e.Function=1]="Function",e[e.Axial=2]="Axial",e[e.Radial=3]="Radial"}(qS||(qS={})),function(e){e[e.ActiveBorder=1]="ActiveBorder",e[e.ActiveCaption=2]="ActiveCaption",e[e.ActiveCaptionText=3]="ActiveCaptionText",e[e.AppWorkspace=4]="AppWorkspace",e[e.Control=5]="Control",e[e.ControlDark=6]="ControlDark",e[e.ControlDarkDark=7]="ControlDarkDark",e[e.ControlLight=8]="ControlLight",e[e.ControlLightLight=9]="ControlLightLight",e[e.ControlText=10]="ControlText",e[e.Desktop=11]="Desktop",e[e.GrayText=12]="GrayText",e[e.Highlight=13]="Highlight",e[e.HighlightText=14]="HighlightText",e[e.HotTrack=15]="HotTrack",e[e.InactiveBorder=16]="InactiveBorder",e[e.InactiveCaption=17]="InactiveCaption",e[e.InactiveCaptionText=18]="InactiveCaptionText",e[e.Info=19]="Info",e[e.InfoText=20]="InfoText",e[e.Menu=21]="Menu",e[e.MenuText=22]="MenuText",e[e.ScrollBar=23]="ScrollBar",e[e.Window=24]="Window",e[e.WindowFrame=25]="WindowFrame",e[e.WindowText=26]="WindowText",e[e.Transparent=27]="Transparent",e[e.AliceBlue=28]="AliceBlue",e[e.AntiqueWhite=29]="AntiqueWhite",e[e.Aqua=30]="Aqua",e[e.Aquamarine=31]="Aquamarine",e[e.Azure=32]="Azure",e[e.Beige=33]="Beige",e[e.Bisque=34]="Bisque",e[e.Black=35]="Black",e[e.BlanchedAlmond=36]="BlanchedAlmond",e[e.Blue=37]="Blue",e[e.BlueViolet=38]="BlueViolet",e[e.Brown=39]="Brown",e[e.BurlyWood=40]="BurlyWood",e[e.CadetBlue=41]="CadetBlue",e[e.Chartreuse=42]="Chartreuse",e[e.Chocolate=43]="Chocolate",e[e.Coral=44]="Coral",e[e.CornflowerBlue=45]="CornflowerBlue",e[e.Cornsilk=46]="Cornsilk",e[e.Crimson=47]="Crimson",e[e.Cyan=48]="Cyan",e[e.DarkBlue=49]="DarkBlue",e[e.DarkCyan=50]="DarkCyan",e[e.DarkGoldenrod=51]="DarkGoldenrod",e[e.DarkGray=52]="DarkGray",e[e.DarkGreen=53]="DarkGreen",e[e.DarkKhaki=54]="DarkKhaki",e[e.DarkMagenta=55]="DarkMagenta",e[e.DarkOliveGreen=56]="DarkOliveGreen",e[e.DarkOrange=57]="DarkOrange",e[e.DarkOrchid=58]="DarkOrchid",e[e.DarkRed=59]="DarkRed",e[e.DarkSalmon=60]="DarkSalmon",e[e.DarkSeaGreen=61]="DarkSeaGreen",e[e.DarkSlateBlue=62]="DarkSlateBlue",e[e.DarkSlateGray=63]="DarkSlateGray",e[e.DarkTurquoise=64]="DarkTurquoise",e[e.DarkViolet=65]="DarkViolet",e[e.DeepPink=66]="DeepPink",e[e.DeepSkyBlue=67]="DeepSkyBlue",e[e.DimGray=68]="DimGray",e[e.DodgerBlue=69]="DodgerBlue",e[e.Firebrick=70]="Firebrick",e[e.FloralWhite=71]="FloralWhite",e[e.ForestGreen=72]="ForestGreen",e[e.Fuchsia=73]="Fuchsia",e[e.Gainsboro=74]="Gainsboro",e[e.GhostWhite=75]="GhostWhite",e[e.Gold=76]="Gold",e[e.Goldenrod=77]="Goldenrod",e[e.Gray=78]="Gray",e[e.Green=79]="Green",e[e.GreenYellow=80]="GreenYellow",e[e.Honeydew=81]="Honeydew",e[e.HotPink=82]="HotPink",e[e.IndianRed=83]="IndianRed",e[e.Indigo=84]="Indigo",e[e.Ivory=85]="Ivory",e[e.Khaki=86]="Khaki",e[e.Lavender=87]="Lavender",e[e.LavenderBlush=88]="LavenderBlush",e[e.LawnGreen=89]="LawnGreen",e[e.LemonChiffon=90]="LemonChiffon",e[e.LightBlue=91]="LightBlue",e[e.LightCoral=92]="LightCoral",e[e.LightCyan=93]="LightCyan",e[e.LightGoldenrodYellow=94]="LightGoldenrodYellow",e[e.LightGray=95]="LightGray",e[e.LightGreen=96]="LightGreen",e[e.LightPink=97]="LightPink",e[e.LightSalmon=98]="LightSalmon",e[e.LightSeaGreen=99]="LightSeaGreen",e[e.LightSkyBlue=100]="LightSkyBlue",e[e.LightSlateGray=101]="LightSlateGray",e[e.LightSteelBlue=102]="LightSteelBlue",e[e.LightYellow=103]="LightYellow",e[e.Lime=104]="Lime",e[e.LimeGreen=105]="LimeGreen",e[e.Linen=106]="Linen",e[e.Magenta=107]="Magenta",e[e.Maroon=108]="Maroon",e[e.MediumAquamarine=109]="MediumAquamarine",e[e.MediumBlue=110]="MediumBlue",e[e.MediumOrchid=111]="MediumOrchid",e[e.MediumPurple=112]="MediumPurple",e[e.MediumSeaGreen=113]="MediumSeaGreen",e[e.MediumSlateBlue=114]="MediumSlateBlue",e[e.MediumSpringGreen=115]="MediumSpringGreen",e[e.MediumTurquoise=116]="MediumTurquoise",e[e.MediumVioletRed=117]="MediumVioletRed",e[e.MidnightBlue=118]="MidnightBlue",e[e.MintCream=119]="MintCream",e[e.MistyRose=120]="MistyRose",e[e.Moccasin=121]="Moccasin",e[e.NavajoWhite=122]="NavajoWhite",e[e.Navy=123]="Navy",e[e.OldLace=124]="OldLace",e[e.Olive=125]="Olive",e[e.OliveDrab=126]="OliveDrab",e[e.Orange=127]="Orange",e[e.OrangeRed=128]="OrangeRed",e[e.Orchid=129]="Orchid",e[e.PaleGoldenrod=130]="PaleGoldenrod",e[e.PaleGreen=131]="PaleGreen",e[e.PaleTurquoise=132]="PaleTurquoise",e[e.PaleVioletRed=133]="PaleVioletRed",e[e.PapayaWhip=134]="PapayaWhip",e[e.PeachPuff=135]="PeachPuff",e[e.Peru=136]="Peru",e[e.Pink=137]="Pink",e[e.Plum=138]="Plum",e[e.PowderBlue=139]="PowderBlue",e[e.Purple=140]="Purple",e[e.Red=141]="Red",e[e.RosyBrown=142]="RosyBrown",e[e.RoyalBlue=143]="RoyalBlue",e[e.SaddleBrown=144]="SaddleBrown",e[e.Salmon=145]="Salmon",e[e.SandyBrown=146]="SandyBrown",e[e.SeaGreen=147]="SeaGreen",e[e.SeaShell=148]="SeaShell",e[e.Sienna=149]="Sienna",e[e.Silver=150]="Silver",e[e.SkyBlue=151]="SkyBlue",e[e.SlateBlue=152]="SlateBlue",e[e.SlateGray=153]="SlateGray",e[e.Snow=154]="Snow",e[e.SpringGreen=155]="SpringGreen",e[e.SteelBlue=156]="SteelBlue",e[e.Tan=157]="Tan",e[e.Teal=158]="Teal",e[e.Thistle=159]="Thistle",e[e.Tomato=160]="Tomato",e[e.Turquoise=161]="Turquoise",e[e.Violet=162]="Violet",e[e.Wheat=163]="Wheat",e[e.White=164]="White",e[e.WhiteSmoke=165]="WhiteSmoke",e[e.Yellow=166]="Yellow",e[e.YellowGreen=167]="YellowGreen",e[e.ButtonFace=168]="ButtonFace",e[e.ButtonHighlight=169]="ButtonHighlight",e[e.ButtonShadow=170]="ButtonShadow",e[e.GradientActiveCaption=171]="GradientActiveCaption",e[e.GradientInactiveCaption=172]="GradientInactiveCaption",e[e.MenuBar=173]="MenuBar",e[e.MenuHighlight=174]="MenuHighlight"}(WS||(WS={}));var US;(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.Overlap=0]="Overlap",e[e.Inside=1]="Inside"}(US||(US={}));var GS;!function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();!function(e){e[e.NextPage=0]="NextPage",e[e.LastPage=1]="LastPage"}(GS||(GS={}));(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();var YS={},XS={},KS={},ZS={};VC.Inject(_C,GC,EC,XC,ZC,QC,$C,WC,UC,HC),Object(Y.copy)(YS,{Maps:VC,Bubble:_C,Legend:GC,Marker:EC,Highlight:XC,Selection:ZC,MapsTooltip:QC,Zoom:$C,DataLabel:WC,NavigationLine:UC,Annotations:HC}),Object(Y.copy)(XS,s),Object(Y.copy)(KS,E),Object(Y.copy)(ZS,W);var QS={},JS={},$S={},ex={},tx={},ix={},sx={};og.Inject(rg),Object(Y.copy)(QS,{MultiSelect:og,CheckBoxSelection:rg}),Object(Y.copy)(JS,s),Object(Y.copy)($S,E),Object(Y.copy)(ex,k),Object(Y.copy)(tx,v),Object(Y.copy)(ix,a),Object(Y.copy)(sx,o);var nx,ox,rx="keyUp",ax="keyDown",lx="rtl-mode",hx="e-rte-quick-toolbar",cx="e-rte-dropdown-popup",px="e-rte-dropdown-btn",dx="e-toolbar-item",ux="e-imgbreak",mx="e-imginline",fx="e-active",gx="e-rte-image",vx="e-rte-table";!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.InlineToolbar=6]="InlineToolbar",e[e.TableToolbar=7]="TableToolbar"}(nx||(nx={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(ox||(ox={}));var yx=["alignments","formats","fontname","fontsize","fontcolor","backgroundcolor","align","display","tablerows","tablecolumns","tablecellhorizontalalign","tablecellverticalalign","styles"],bx={alignments:{id:"Alignments",icon:"e-alignments",tooltip:"Alignments",command:"Alignments",subCommand:"Alignments"},justifyleft:{id:"JustifyLeft",icon:"e-justify-left",tooltip:"JustifyLeft",command:"Alignments",subCommand:"JustifyLeft"},justifycenter:{id:"JustifyCenter",icon:"e-justify-center",tooltip:"JustifyCenter",command:"Alignments",subCommand:"JustifyCenter"},justifyright:{id:"JustifyRight",icon:"e-justify-right",tooltip:"JustifyRight",command:"Alignments",subCommand:"JustifyRight"},justifyfull:{id:"JustifyFull",icon:"e-justify-full",tooltip:"JustifyFull",command:"Alignments",subCommand:"JustifyFull"},fontname:{id:"FontName",icon:"e-font-name",tooltip:"Font Name",command:"Font",subCommand:"FontName"},fontsize:{id:"FontSize",icon:"e-font-size",tooltip:"Font Size",command:"Font",subCommand:"FontSize"},fontcolor:{id:"FontColor",icon:"e-font-color",tooltip:"Font Color",command:"Font",subCommand:"FontColor",value:"#ff0000ff"},backgroundcolor:{id:"BackgroundColor",icon:"e-background-color",tooltip:"Background Color",command:"Font",subCommand:"BackgroundColor",value:"#ffff00ff"},bold:{id:"Bold",icon:"e-bold",tooltip:"Bold",command:"Style",subCommand:"Bold"},italic:{id:"Italic",icon:"e-italic",tooltip:"Italic",command:"Style",subCommand:"Italic"},underline:{id:"Underline",icon:"e-underline",tooltip:"Underline",command:"Style",subCommand:"Underline"},strikethrough:{id:"StrikeThrough",icon:"e-strike-through",tooltip:"StrikeThrough",command:"Style",subCommand:"StrikeThrough"},clearformat:{id:"ClearFormat",icon:"e-clear-format",tooltip:"Clear Format",command:"Clear",subCommand:"ClearFormat"},clearall:{id:"ClearAll",icon:"e-clear-all",tooltip:"Clear All",command:"Clear",subCommand:"ClearAll"},cut:{id:"Cut",icon:"e-cut",tooltip:"Cut",command:"ClipBoard",subCommand:"Cut"},copy:{id:"Copy",icon:"e-copy",tooltip:"Copy",command:"ClipBoard",subCommand:"Copy"},paste:{id:"Paste",icon:"e-paste",tooltip:"Paste",command:"ClipBoard",subCommand:"Paste"},unorderedlist:{id:"UnorderedList",icon:"e-unorder-list",tooltip:"Bulleted List",command:"Lists",subCommand:"UL"},orderedlist:{id:"OrderedList",icon:"e-order-list",tooltip:"Numbered List",command:"Lists",subCommand:"OL"},indent:{id:"Indent",icon:"e-indent",tooltip:"Increase Indent",command:"Indents",subCommand:"Indent"},outdent:{id:"Outdent",icon:"e-outdent",tooltip:"Decrease Indent",command:"Indents",subCommand:"Outdent"},undo:{id:"Undo",icon:"e-undo",tooltip:"Undo",command:"Actions",subCommand:"Undo"},redo:{id:"Redo",icon:"e-redo",tooltip:"Redo",command:"Actions",subCommand:"Redo"},superscript:{id:"SuperScript",icon:"e-super-script",tooltip:"Superscript",command:"Effects",subCommand:"SuperScript"},subscript:{id:"SubScript",icon:"e-sub-script",tooltip:"Subscript",command:"Effects",subCommand:"SubScript"},createlink:{id:"CreateLink",icon:"e-create-link",tooltip:"Insert Hyperlink",command:"Links",subCommand:"CreateLink"},openlink:{id:"OpenLink",icon:"e-open-link",tooltip:"Open Link",command:"Links",subCommand:"OpenLink"},editlink:{id:"EditLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Links",subCommand:"EditLink"},removelink:{id:"RemoveLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Links",subCommand:"RemoveLink"},image:{id:"Image",icon:"e-image",tooltip:"Insert Image",command:"Images",subCommand:"Image"},filemanager:{id:"FileManager",icon:"e-rte-file-manager",tooltip:"File Manager",command:"Files",subCommand:"File"},createtable:{id:"CreateTable",icon:"e-create-table",tooltip:"Create Table",command:"Table",subCommand:"CreateTable"},removetable:{id:"removeTable",icon:"e-remove-table",tooltip:"Remove Table",command:"removeTable",subCommand:"removeTable"},replace:{id:"Replace",icon:"e-replace",tooltip:"Replace",command:"Images",subCommand:"Replace"},align:{id:"Align",icon:"e-align",tooltip:"Align",command:"Images",subCommand:"Align"},caption:{id:"Caption",icon:"e-caption",tooltip:"Image Caption",command:"Images",subCommand:"Caption"},remove:{id:"Remove",icon:"e-remove",tooltip:"Remove",command:"Images",subCommand:"Remove"},openimagelink:{id:"OpenImageLink",icon:"e-open-link",tooltip:"Open Link",command:"Images",subCommand:"OpenImageLink"},editimagelink:{id:"EditImageLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Images",subCommand:"EditImageLink"},removeimagelink:{id:"RemoveImageLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Images",subCommand:"RemoveImageLink"},insertlink:{id:"InsertLink",icon:"e-insert-link",tooltip:"Insert Link",command:"Images",subCommand:"InsertLink"},display:{id:"Display",icon:"e-display",tooltip:"Display",command:"Images",subCommand:"Display"},alttext:{id:"AltText",icon:"e-alt-text",tooltip:"Alternative Text",command:"Images",subCommand:"AltText"},dimension:{id:"Dimension",icon:"e-dimension",tooltip:"Change Size",command:"Images",subCommand:"Dimension"},fullscreen:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"View",subCommand:"Maximize"},maximize:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"FullScreen",subCommand:"Maximize"},minimize:{id:"Minimize",icon:"e-minimize",tooltip:"Minimize",command:"FullScreen",subCommand:"Minimize"},lowercase:{id:"LowerCase",icon:"e-lower-case",tooltip:"Lower Case",command:"Casing",subCommand:"LowerCase"},uppercase:{id:"UpperCase",icon:"e-upper-case",tooltip:"Upper Case",command:"Casing",subCommand:"UpperCase"},print:{id:"Print",icon:"e-print",tooltip:"Print",command:"Print",subCommand:"Print"},formats:{id:"Formats",icon:"e-formats",tooltip:"Formats",command:"Formats",subCommand:"Formats"},sourcecode:{id:"SourceCode",icon:"e-source-code",tooltip:"Source Code",command:"SourceCode",subCommand:"SourceCode"},preview:{id:"Preview",icon:"e-preview",tooltip:"Preview",command:"Preview",subCommand:"Preview"},viewside:{id:"ViewSide",icon:"e-view-side",tooltip:"ViewSide",command:"ViewSide",subCommand:"ViewSide"},insertcode:{id:"InsertCode",icon:"e-insert-code",tooltip:"Insert Code",command:"Formats",subCommand:"Pre"},tableheader:{id:"TableHeader",icon:"e-table-header",tooltip:"Table Header",command:"Table",subCommand:"TableHeader"},tableremove:{id:"TableRemove",icon:"e-table-remove",tooltip:"Table Remove",command:"Table",subCommand:"TableRemove"},tablerows:{id:"TableRows",icon:"e-table-rows",tooltip:"Table Rows",command:"Table",subCommand:"TableRows"},tablecolumns:{id:"TableColumns",icon:"e-table-columns",tooltip:"Table Columns",command:"Table",subCommand:"TableColumns"},tablecellbackground:{id:"TableCellBackground",icon:"e-table-cell-background",tooltip:"Table Cell Background",command:"Table",subCommand:"TableCellBackground"},tablecellhorizontalalign:{id:"TableCellHorizontalAlign",icon:"e-table-cell-horizontalAlign",tooltip:"Table Cell HorizontalAlign",command:"Table",subCommand:"TableCellHorizontalAlign"},tablecellverticalalign:{id:"TableCellVerticalAlign",icon:"e-table-cell-verticalAlign",tooltip:"Table Cell VerticalAlign",command:"Table",subCommand:"TableCellVerticalAlign"},tableeditproperties:{id:"TableEditProperties",icon:"e-table-edit-properties",tooltip:"Table Edit Properties",command:"Table",subCommand:"TableEditProperties"},styles:{id:"Styles",icon:"e-table-styles",tooltip:"Styles",command:"Table",subCommand:"Styles"}},Cx=[{locale:"alignmentsDropDownLeft",value:"JustifyLeft"},{locale:"alignmentsDropDownCenter",value:"JustifyCenter"},{locale:"alignmentsDropDownRight",value:"JustifyRight"},{locale:"alignmentsDropDownJustify",value:"JustifyFull"}],Sx=[{iconCss:"e-icons e-justify-left",text:"Align Left",command:"Alignments",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",text:"Align Center",command:"Alignments",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",text:"Align Right",command:"Alignments",subCommand:"JustifyRight"},{iconCss:"e-icons e-justify-full",text:"Align Justify",command:"Alignments",subCommand:"JustifyFull"}],xx=[{iconCss:"e-icons e-justify-left",command:"Images",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Images",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Images",subCommand:"JustifyRight"}],wx=[{locale:"imageDisplayDropDownInline",value:"Inline"},{locale:"imageDisplayDropDownBreak",value:"Break"}],Ex=[{text:"Inline",cssClass:"e-inline",command:"Images",subCommand:"Inline"},{text:"Break",cssClass:"e-break",command:"Images",subCommand:"Break"}],kx=[{locale:"tableInsertRowDropDownBefore",value:"InsertRowBefore"},{locale:"tableInsertRowDropDownAfter",value:"InsertRowAfter"},{locale:"tableInsertRowDropDownDelete",value:"DeleteRow"}],Tx=[{iconCss:"e-icons e-insert-row-before",text:"Insert row before",command:"Table",subCommand:"InsertRowBefore"},{iconCss:"e-icons e-insert-row-after",text:"Insert row after",command:"Table",subCommand:"InsertRowAfter"},{iconCss:"e-icons e-delete-row",text:"Delete row",command:"Table",subCommand:"DeleteRow"}],Lx=[{locale:"tableInsertColumnDropDownLeft",value:"InsertColumnLeft"},{locale:"tableInsertColumnDropDownRight",value:"InsertColumnRight"},{locale:"tableInsertColumnDropDownDelete",value:"DeleteColumn"}],Dx=[{iconCss:"e-icons e-insert-column-left",text:"Insert column left",command:"Table",subCommand:"InsertColumnLeft"},{iconCss:"e-icons e-insert-column-right",text:"Insert column right",command:"Table",subCommand:"InsertColumnRight"},{iconCss:"e-icons e-delete-column",text:"Delete column",command:"Table",subCommand:"DeleteColumn"}],Ix=[{locale:"tableVerticalAlignDropDownTop",value:"AlignTop"},{locale:"tableVerticalAlignDropDownMiddle",value:"AlignMiddle"},{locale:"tableVerticalAlignDropDownBottom",value:"AlignBottom"}],Ox=[{iconCss:"e-icons e-align-top",text:"Align Top",command:"Table",subCommand:"AlignTop"},{iconCss:"e-icons e-align-middle",text:"Align Middle",command:"Table",subCommand:"AlignMiddle"},{iconCss:"e-icons e-align-bottom",text:"Align Bottom",command:"Table",subCommand:"AlignBottom"}],Ax=[{locale:"tableStylesDropDownDashedBorder",value:"Dashed"},{locale:"tableStylesDropDownAlternateRows",value:"Alternate"}],Mx=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}];function Px(e,t,i){for(var s=0;t.length>s;s++)if(t[s].value===i.subCommand)return e.localeObj.getConstant(t[s].locale);return i.text}var Nx={alignments:"Alignments",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",fontName:"Font Name",fontSize:"Font Size",fontColor:"Font Color",backgroundColor:"Background Color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",clearFormat:"Clear Format",clearAll:"Clear All",cut:"Cut",copy:"Copy",paste:"Paste",unorderedList:"Bulleted List",orderedList:"Numbered List",indent:"Increase Indent",outdent:"Decrease Indent",undo:"Undo",redo:"Redo",superscript:"Superscript",subscript:"Subscript",createLink:"Insert Link",openLink:"Open Link",editLink:"Edit Link",removeLink:"Remove Link",image:"Insert Image",replace:"Replace",align:"Align",caption:"Image Caption",remove:"Remove",insertLink:"Insert Link",display:"Display",altText:"Alternative Text",dimension:"Change Size",fullscreen:"Maximize",maximize:"Maximize",minimize:"Minimize",lowerCase:"Lower Case",upperCase:"Upper Case",print:"Print",formats:"Formats",sourcecode:"Code View",preview:"Preview",viewside:"ViewSide",insertCode:"Insert Code",linkText:"Display Text",linkTooltipLabel:"Title",linkWebUrl:"Web Address",linkTitle:"Enter a title",linkurl:"http://example.com",linkOpenInNewWindow:"Open Link in New Window",linkHeader:"Insert Link",dialogInsert:"Insert",dialogCancel:"Cancel",dialogUpdate:"Update",imageHeader:"Insert Image",imageLinkHeader:"You can also provide a link from the web",mdimageLink:"Please provide a URL for your image",imageUploadMessage:"Drop image here or browse to upload",imageDeviceUploadMessage:"Click here to upload",imageAlternateText:"Alternate Text",alternateHeader:"Alternative Text",browse:"Browse",imageUrl:"http://example.com/image.png",imageCaption:"Caption",imageSizeHeader:"Image Size",imageHeight:"Height",imageWidth:"Width",textPlaceholder:"Enter Text",inserttablebtn:"Insert Table",tabledialogHeader:"Insert Table",tableWidth:"Width",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",columns:"Number of columns",rows:"Number of rows",tableRows:"Table Rows",tableColumns:"Table Columns",tableCellHorizontalAlign:"Table Cell Horizontal Align",tableCellVerticalAlign:"Table Cell Vertical Align",createTable:"Create Table",removeTable:"Remove Table",tableHeader:"Table Header",tableRemove:"Table Remove",tableCellBackground:"Table Cell Background",tableEditProperties:"Table Edit Properties",styles:"Styles",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",insertRowBefore:"Insert Row Before",insertRowAfter:"Insert Row After",deleteRow:"Delete Row",tableEditHeader:"Edit Table",TableHeadingText:"Heading",TableColText:"Col",imageInsertLinkHeader:"Insert Link",editImageHeader:"Edit Image",alignmentsDropDownLeft:"Align Left",alignmentsDropDownCenter:"Align Center",alignmentsDropDownRight:"Align Right",alignmentsDropDownJustify:"Align Justify",imageDisplayDropDownInline:"Inline",imageDisplayDropDownBreak:"Break",tableInsertRowDropDownBefore:"Insert row before",tableInsertRowDropDownAfter:"Insert row after",tableInsertRowDropDownDelete:"Delete row",tableInsertColumnDropDownLeft:"Insert column left",tableInsertColumnDropDownRight:"Insert column right",tableInsertColumnDropDownDelete:"Delete column",tableVerticalAlignDropDownTop:"Align Top",tableVerticalAlignDropDownMiddle:"Align Middle",tableVerticalAlignDropDownBottom:"Align Bottom",tableStylesDropDownDashedBorder:"Dashed Borders",tableStylesDropDownAlternateRows:"Alternate Rows",pasteFormat:"Paste Format",pasteFormatContent:"Choose the formatting action",plainText:"Plain Text",cleanFormat:"Clean",keepFormat:"Keep",pasteDialogOk:"OK",pasteDialogCancel:"Cancel",fileManager:"File Manager",fileDialogHeader:"File Browser"},Rx={alignments:"alignments",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",justifyfull:"justifyFull",fontname:"fontName",fontsize:"fontSize",fontcolor:"fontColor",backgroundcolor:"backgroundColor",bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",clearformat:"clearFormat",clearall:"clearAll",cut:"cut",copy:"copy",paste:"paste",unorderedlist:"unorderedList",orderedlist:"orderedList",indent:"indent",outdent:"outdent",undo:"undo",redo:"redo",superscript:"superscript",subscript:"subscript",createlink:"createLink",openlink:"openLink",editlink:"editLink",removelink:"removeLink",openimagelink:"openLink",editimagelink:"editLink",removeimagelink:"removeLink",image:"image",replace:"replace",align:"align",caption:"caption",remove:"remove",insertlink:"insertLink",display:"display",alttext:"altText",dimension:"dimension",fullscreen:"fullscreen",maximize:"maximize",minimize:"minimize",lowercase:"lowerCase",uppercase:"upperCase",print:"print",formats:"formats",sourcecode:"sourcecode",preview:"preview",viewside:"viewside",insertcode:"insertCode",tablerows:"tableRows",tablecolumns:"tableColumns",tablecellhorizontalalign:"tableCellHorizontalAlign",tablecellverticalalign:"tableCellVerticalAlign",createtable:"createTable",removetable:"removeTable",tableheader:"tableHeader",tableremove:"tableRemove",tablecellbackground:"tableCellBackground",tableeditproperties:"tableEditProperties",styles:"styles",insertcolumnleft:"insertColumnLeft",insertcolumnright:"insertColumnRight",deletecolumn:"deleteColumn",aligntop:"AlignTop",alignmiddle:"AlignMiddle",alignbottom:"AlignBottom",insertrowbefore:"insertRowBefore",insertrowafter:"insertRowAfter",deleterow:"deleteRow"},Bx=["Undo","Redo"],Hx=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Fx(e,t){var i=-1;return t.some(function(t,s){return"string"==typeof t&&e===t.toLocaleLowerCase()&&(i=s,!0)}),i}function jx(e,t){var i=!1;return e.classList.contains(t)&&(i=!0),i}function Vx(e,t,i,s){for(var n,o,r=0;r<e.length;r++){if("value"===i&&e[r].value.toLocaleLowerCase()===t.toLocaleLowerCase()){n=e[r];break}if("text"===i&&e[r].text.toLocaleLowerCase()===t.toLocaleLowerCase()){n=e[r];break}if("subCommand"===i&&e[r].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){n=e[r];break}}if(!ae(n))switch(s){case"text":o=n.text;break;case"value":o=n.value;break;case"iconCss":o=n.iconCss}return o}function zx(){var e=!1;return bt.isDevice&&bt.isIos&&(e=!0),e}function _x(e){return ae(e)?"":e}function qx(e,t){var i=t.getService("rteLocale"),s=Rx[e];return i.getConstant(s)}function Wx(e,t){for(var i=e.dropDownModule,s=e.args,n=0,o=Object.keys(e.args);n<o.length;n++)for(var r=o[n],a=0;a<e.tbItems.length;a++){var l=e.tbItems[a].subCommand,h=l&&l.toLocaleLowerCase();if(l&&h===r||"UL"===l&&"unorderedlist"===r||"OL"===l&&"orderedlist"===r||"pre"===h&&"insertcode"===r)if("boolean"==typeof s[r])!0===s[r]?bi([e.tbElements[a]],[fx]):Ci([e.tbElements[a]],[fx]);else if(("string"==typeof s[r]||null===s[r])&&Fx(r,e.parent.toolbarSettings.items)>-1){var c=s[r]?s[r]:"",p="";switch(r){case"formats":if(ae(i.formatDropDown)||t||!ae(i.formatDropDown)&&i.formatDropDown.isDestroyed)break;var d=e.parent.format.types;p=Vx(d,c,"subCommand","text");var u=ae(e.parent.format.default)?d[0].text:e.parent.format.default;i.formatDropDown.content='<span style="display: inline-flex;width:'+e.parent.format.width+'" ><span class="e-rte-dropdown-btn-text">'+(ae(p)?u:p)+"</span></span>",i.formatDropDown.dataBind();break;case"alignments":if(ae(i.alignDropDown)||!ae(i.alignDropDown)&&i.alignDropDown.isDestroyed)break;p=Vx(Sx,c,"subCommand","iconCss"),i.alignDropDown.iconCss=ae(p)?"e-icons e-justify-left":p,i.alignDropDown.dataBind();break;case"fontname":if(ae(i.fontNameDropDown)||t||!ae(i.fontNameDropDown)&&i.fontNameDropDown.isDestroyed)break;var m=e.parent.fontFamily.items;p=Vx(m,c,"value","text");var f=ae(e.parent.fontFamily.default)?m[0].text:e.parent.fontFamily.default,g=ae(p)?f:p;e.tbElements[a].title=g,i.fontNameDropDown.content='<span style="display: inline-flex;width:'+e.parent.fontFamily.width+'" ><span class="e-rte-dropdown-btn-text">'+g+"</span></span>",i.fontNameDropDown.dataBind();break;case"fontsize":if(ae(i.fontSizeDropDown)||!ae(i.fontSizeDropDown)&&i.fontSizeDropDown.isDestroyed)break;var v=e.parent.fontSize.items,y=ae(e.parent.fontSize.default)?v[1].text:e.parent.fontSize.default;p=Vx(v,""===c?y.replace(/\s/g,""):c,"value","text"),i.fontSizeDropDown.content='<span style="display: inline-flex;width:'+e.parent.fontSize.width+'" ><span class="e-rte-dropdown-btn-text">'+_x(p)+"</span></span>",i.fontSizeDropDown.dataBind()}}}}function Ux(e){return"object"==typeof e?e:[e]}function Gx(e,t){for(var i=[],s=0;s<e.length;s++)for(var n=0;n<t.length;n++)if("Separator"!==t[n].type){if("OrderedList"===e[s]&&"OL"===t[n].subCommand){i.push(n);break}if("UnorderedList"===e[s]&&"UL"===t[n].subCommand){i.push(n);break}if("InsertCode"===e[s]&&"Pre"===t[n].subCommand){i.push(n);break}if("FileManager"===e[s]&&"File"===t[n].subCommand){i.push(n);break}if(e[s]===t[n].subCommand){i.push(n);break}}return i}function Yx(e,t){for(var i=0,s=Gx(Ux(Bx),e.toolbarObj.items),n=Oi("."+dx,e.toolbarObj.element),o=0,r=Object.keys(t);o<r.length;o++){var a=r[o],l=n[s[i]];l&&e.toolbarObj.enableItems(l,t[a]),i++}}function Xx(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}function Kx(e){var t=yi("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)}function Zx(e){for(var t={},i=Object.keys(e),s=0;s<Object.keys(e).length;s++)t[i[s].toLocaleLowerCase()]=e[i[s]];return t}function Qx(e,t){var i;return null!==e&&""!==e?(i=t.enableHtmlEncode?Jx(ew(e)):Jx(e),t.setProperties({value:i},!0)):i=t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",i}function Jx(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var i=document.createElement("div");if(t.childNodes.length>0){for(var s=void 0,n=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||Hx.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(s?n.appendChild(t.firstChild):(o=yi("p"),i.appendChild(o),o.appendChild(t.firstChild)),n=o,s=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?Ti(t.firstChild):(i.appendChild(t.firstChild),s=!1);for(var r=i.querySelectorAll("img"),a=0;a<r.length;a++)r[a].classList.contains(gx)||r[a].classList.add(gx),r[a].classList.contains(mx)||r[a].classList.contains(ux)||r[a].classList.add(mx)}return i.innerHTML}function $x(e){return"<p><br></p>"===e||"&lt;p&gt;&lt;br&gt;&lt;/p&gt;"===e||""===e}function ew(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function tw(e,t){if(t.enableHtmlSanitizer){var i=ln.beforeSanitize();re(i,i,{cancel:!1,helper:null}),t.trigger("beforeSanitizeHtml",i),i.cancel&&!ae(i.helper)?e=i.helper(e):i.cancel||(e=ln.serializeValue(i,e))}return e}function iw(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),n=s.length,o=new Uint8Array(n);n--;)o[n]=s.charCodeAt(n);return new Blob([o],{type:i})}var sw=function(){function e(e){this.parent=e,this.wireEvent()}return e.prototype.wireEvent=function(){this.parent.on("destroy",this.unWireEvent,this)},e.prototype.unWireEvent=function(){this.parent.off("destroy",this.unWireEvent),this.popupOverlay&&Ct.remove(this.popupOverlay,"click touchmove",this.onPopupOverlay),this.removePopupContainer()},e.prototype.toolbarBeforeCreate=function(e){"Extended"===this.mode&&(e.enableCollision=!1)},e.prototype.toolbarCreated=function(){this.parent.notify("toolbarCreated",this)},e.prototype.toolbarClicked=function(e){this.parent.enabled&&(this.parent.readonly||this.parent.notify("toolbarClick",e),this.parent.trigger("toolbarClick",e))},e.prototype.dropDownSelected=function(e){this.parent.notify("dropDownSelect",e),this.onPopupOverlay()},e.prototype.beforeDropDownItemRender=function(e){!this.parent.readonly&&this.parent.enabled&&this.parent.notify("beforeDropDownItemRender",e)},e.prototype.dropDownOpen=function(e){bt.isDevice&&!e.element.parentElement.classList.contains("e-quick-dropdown")&&this.popupModal(e.element.parentElement),this.parent.notify("selection-save",e)},e.prototype.dropDownClose=function(e){this.removePopupContainer(),this.parent.notify("selection-restore",e)},e.prototype.removePopupContainer=function(){if(bt.isDevice&&!ae(this.popupContainer)){var e=this.popupContainer.querySelector(".e-dropdown-popup.e-tbar-btn.e-control");e&&(this.popupContainer.parentNode.insertBefore(e,this.popupContainer.nextSibling),e.style.removeProperty("position"),Ci([e],"e-popup-modal")),Ti(this.popupContainer),this.popupContainer=void 0}},e.prototype.renderToolbar=function(e){this.setPanel(e.target),this.renderPanel(),this.mode=e.overflowMode,e.rteToolbarObj.toolbarObj=new Em({items:e.items,width:"100%",overflowMode:e.overflowMode,beforeCreate:this.toolbarBeforeCreate.bind(this),created:this.toolbarCreated.bind(this),clicked:this.toolbarClicked.bind(this),enablePersistence:e.enablePersistence,enableRtl:e.enableRtl}),e.rteToolbarObj.toolbarObj.isStringTemplate=!0,e.rteToolbarObj.toolbarObj.createElement=this.parent.createElement,e.rteToolbarObj.toolbarObj.appendTo(e.target)},e.prototype.renderDropDownButton=function(e){var t,i=this;e.element.classList.add(px),t=e.cssClass+" e-rte-elements e-tbar-btn",this.parent.inlineMode.enable&&bt.isDevice&&(t+=" e-rte-inline-dropdown");var s=this,n=new Lc({items:e.items,iconCss:e.iconCss,cssClass:t,content:e.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(e){if(!s.parent.readonly&&s.parent.enabled){for(var t=0;t<e.element.childNodes.length;t++){var o=i.parent.createElement("div");o.innerHTML=n.content.trim(),""!==o.textContent.trim()&&e.element.childNodes[t].textContent.trim()===o.textContent.trim()?e.element.childNodes[t].classList.contains("e-active")||bi([e.element.childNodes[t]],"e-active"):Ci([e.element.childNodes[t]],"e-active")}s.parent.notify("beforeDropDownOpen",e)}else e.cancel=!0},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return n.isStringTemplate=!0,n.createElement=s.parent.createElement,n.appendTo(e.element),e.element.tabIndex=-1,document.getElementById(n.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),n},e.prototype.onPopupOverlay=function(e){ae(this.popupOverlay)||(Mi(this.popupOverlay,".e-popup-container").style.display="none",this.popupOverlay.style.display="none",Ci([this.popupOverlay],"e-popup-overlay"))},e.prototype.setIsModel=function(e){Mi(e,".e-popup-container")?(e.parentElement.style.display="flex",this.popupOverlay=e.nextElementSibling,this.popupOverlay.style.display="block",bi([this.popupOverlay],"e-popup-overlay")):(this.popupContainer=this.parent.createElement("div",{className:"e-rte-modal-popup e-popup-container e-center"}),e.parentNode.insertBefore(this.popupContainer,e),this.popupContainer.appendChild(e),this.popupContainer.style.zIndex=e.style.zIndex,this.popupContainer.style.display="flex",e.style.position="relative",bi([e],"e-popup-modal"),this.popupOverlay=this.parent.createElement("div",{className:"e-popup-overlay"}),this.popupOverlay.style.zIndex=(parseInt(e.style.zIndex,null)-1).toString(),this.popupOverlay.style.display="block",this.popupContainer.appendChild(this.popupOverlay),Ct.add(this.popupOverlay,"click touchmove",this.onPopupOverlay,this))},e.prototype.paletteSelection=function(e,t){var i=e.element.querySelector(".e-control.e-colorpicker"),s=[].slice.call(Oi(".e-tile",i.parentElement));Ci(s,"e-selected");var n=t.querySelector(".e-rte-elements").style.borderBottomColor;s.filter(function(e){e.style.backgroundColor===n&&bi([e],"e-selected")})},e.prototype.renderColorPickerDropDown=function(e,t,i){var s=this,n=this,o="e-rte-elements e-tbar-btn"+(this.parent.inlineMode?" e-rte-inline-dropdown":"");o+=" "+("backgroundcolor"===t?"e-rte-backgroundcolor-dropdown":"e-rte-fontcolor-dropdown");var r,a=n.parent.createElement("span",{className:"e-rte-color-content"}),l=n.parent.createElement("span",{className:e.cssClass});l.style.borderBottomColor="backgroundcolor"===t?n.parent.backgroundColor.default:n.parent.fontColor.default,a.appendChild(l);var h=new Lc({target:i.element.parentElement,cssClass:o,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,beforeOpen:function(t){if(!n.parent.readonly&&n.parent.enabled){var i=t.event?t.event.target:null;if(n.currentElement=h.element,n.currentDropdown=h,n.paletteSelection(t,n.currentElement),t.event&&"click"===t.event.type&&(i.classList.contains("e-rte-color-content")||i.parentElement.classList.contains("e-rte-color-content"))){t.cancel=!0;var s=i.classList.contains("e-rte-elements")?i.style.borderBottomColor:i.querySelector(".e-rte-elements").style.borderBottomColor;n.parent.notify("selection-restore",{});var o=(r=n.parent.formatter.editorManager.nodeSelection.getRange(n.parent.contentModule.getDocument())).startContainer.parentNode;("TD"===r.startContainer.nodeName||"TH"===r.startContainer.nodeName||Mi(r.startContainer.parentNode,"td,th")||n.parent.iframeSettings.enable&&!jx(o.ownerDocument.querySelector("body"),"e-lib"))&&r.collapsed&&"BackgroundColor"===e.subCommand?n.parent.notify("tableColorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:s}}):n.parent.notify("colorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:s}})}else{var a=Ce(t.element.querySelector(".e-control.e-colorpicker"),tp);a.showButtons=!t.element.querySelector(".e-color-palette"),a.dataBind(),t.element.onclick=function(e){e.target.classList.contains("e-cancel")&&h.toggle()}}}else t.cancel=!0},open:function(e){var t;s.setColorPickerContentWidth(i);var n=e.element.querySelector(".e-control.e-colorpicker");(t=e.element.querySelector(".e-color-palette")?n.parentElement.querySelector(".e-palette"):n.parentElement.querySelector("e-handler"))&&t.focus(),bt.isDevice&&s.popupModal(e.element.parentElement),s.pickerRefresh(e)},beforeClose:function(t){var i=t.event?t.event.target:null;if(t.event&&"click"===t.event.type&&(i.classList.contains("e-rte-color-content")||i.parentElement.classList.contains("e-rte-color-content"))){var s=i.classList.contains("e-rte-elements")?i.style.borderBottomColor:i.querySelector(".e-rte-elements").style.borderBottomColor;("TD"===(r=n.parent.formatter.editorManager.nodeSelection.getRange(n.parent.contentModule.getDocument())).startContainer.nodeName||"TH"===r.startContainer.nodeName||Mi(r.startContainer.parentNode,"td,th"))&&r.collapsed?n.parent.notify("tableColorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:s}}):n.parent.notify("colorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:s}})}else;},close:function(e){n.parent.notify("selection-restore",{});var t=Mi(e.element.parentElement,".e-popup-container");if(t&&(t.style.display="none",t.lastElementChild.style.display="none",Ci([t.lastElementChild],"e-popup-overlay")),bt.isDevice&&!ae(t)){var i=t.querySelector(".e-dropdown-popup.e-tbar-btn.e-control");i&&(t.parentNode.insertBefore(i,t.nextSibling),i.style.removeProperty("position"),Ci([i],"e-popup-modal")),Ti(t),n.popupContainer=void 0}}});return h.isStringTemplate=!0,h.createElement=n.parent.createElement,h.appendTo(e.element),document.getElementById(h.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),h.element.insertBefore(a,h.element.querySelector(".e-caret")),e.element.tabIndex=-1,h.element.removeAttribute("type"),h.element.onmousedown=function(){n.parent.notify("selection-save",{})},h.element.onkeydown=function(){n.parent.notify("selection-save",{})},h},e.prototype.pickerRefresh=function(e){if("Picker"===this.parent.backgroundColor.mode){var t=e.element.parentElement;t.style.width=(t.offsetWidth+5).toString()+"px",Ce(t,lo).refreshPosition(t),t.style.width=(t.offsetWidth-5).toString()+"px"}},e.prototype.popupModal=function(e){var t=Ce(e,lo);t.relateTo=document.body,t.position={X:0,Y:0},t.targetType="container",t.collision={X:"fit",Y:"fit"},t.offsetY=4,t.dataBind(),this.setIsModel(e)},e.prototype.setColorPickerContentWidth=function(e){var t=e.element.nextSibling;if("0px"===t.style.width){t.style.width="";var i=parseInt(getComputedStyle(t).borderBottomWidth,10);t.style.width=ge(t.children[0].offsetWidth+i+i)}},e.prototype.renderColorPicker=function(e,t){var i=this,s=new tp({enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,inline:!0,created:function(){var e="backgroundcolor"===t?i.parent.backgroundColor.default:i.parent.fontColor.default;s.setProperties({value:e})},mode:"backgroundcolor"===t?i.parent.backgroundColor.mode:i.parent.fontColor.mode,modeSwitcher:"backgroundcolor"===t?i.parent.backgroundColor.modeSwitcher:i.parent.fontColor.modeSwitcher,beforeTileRender:function(e){e.element.classList.add("e-rte-square-palette"),e.element.classList.add("e-custom-tile"),""===e.value&&e.element.classList.add("e-nocolor-item")},change:function(t){var s=t.currentValue.rgba;t.item={command:e.command,subCommand:e.subCommand,value:s},i.parent.notify("selection-restore",{}),i.currentElement.querySelector(".e-rte-elements").style.borderBottomColor=s;var n=i.parent.formatter.editorManager.nodeSelection.getRange(i.parent.contentModule.getDocument());("TD"===n.startContainer.nodeName||"TH"===n.startContainer.nodeName||Mi(n.startContainer.parentNode,"td,th"))&&n.collapsed&&"BackgroundColor"===e.subCommand?i.parent.notify("tableColorPickerChanged",t):i.parent.notify("colorPickerChanged",t),i.currentDropdown.toggle()},beforeModeSwitch:function(e){""===s.value&&s.setProperties({value:"Picker"===e.mode?"#008000ff":""},!0),s.showButtons="Palette"!==e.mode}});return s.isStringTemplate=!0,s.columns="backgroundcolor"===t?this.parent.backgroundColor.columns:this.parent.fontColor.columns,s.presetColors="backgroundcolor"===t?this.parent.backgroundColor.colorCode:this.parent.fontColor.colorCode,s.cssClass="backgroundcolor"===t?"e-rte-backgroundcolor-colorpicker":"e-rte-fontcolor-colorpicker",s.createElement=this.parent.createElement,s.appendTo(document.body.querySelector(e.target)),s},e.prototype.renderPanel=function(){this.getPanel().classList.add("e-rte-toolbar")},e.prototype.getPanel=function(){return this.toolbarPanel},e.prototype.setPanel=function(e){this.toolbarPanel=e},e}(),nw=function(){function e(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?re(this.tools,bx,Zx(this.parent.toolbarSettings.itemConfigs),!0):this.tools=bx}return e.prototype.addEventListener=function(){this.parent.on(lx,this.setRtl,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off(lx,this.setRtl),this.parent.off("destroy",this.removeEventListener)},e.prototype.setRtl=function(e){ae(this.toolbarObj)||this.toolbarObj.setProperties({enableRtl:e.enableRtl})},e.prototype.getTemplateObject=function(e,t){var i;switch(e){case"fontcolor":case"backgroundcolor":i="span";break;default:i="button"}return{command:this.tools[e.toLocaleLowerCase()].command,subCommand:this.tools[e.toLocaleLowerCase()].subCommand,template:this.parent.createElement(i,{id:this.parent.getID()+"_"+t+"_"+this.tools[e.toLocaleLowerCase()].id}).outerHTML,tooltipText:qx(e,this.locator)}},e.prototype.getObject=function(e,t){var i=e.toLowerCase();if(-1!==yx.indexOf(i))return this.getTemplateObject(i,t);switch(i){case"|":return{type:"Separator"};case"-":return{type:"Separator",cssClass:"e-rte-horizontal-separator"};default:return{id:this.parent.getID()+"_"+t+"_"+this.tools[i.toLocaleLowerCase()].id,prefixIcon:this.tools[i.toLocaleLowerCase()].icon,tooltipText:qx(i,this.locator),command:this.tools[i.toLocaleLowerCase()].command,subCommand:this.tools[i.toLocaleLowerCase()].subCommand}}},e.prototype.getItems=function(e,t){var i=this;if(this.parent.toolbarSettings.items.length<1)return[];for(var s=[],n=function(e){switch(typeof e){case"string":s.push(o.getObject(e,t));break;default:if(!ae(e.click)){var n=e,r=n.click;n.click=function(){n.undo&&0===i.parent.formatter.getUndoRedoStack().length&&i.parent.formatter.saveData(),r.call(i),i.parent.formatter.getUndoRedoStack()[i.parent.formatter.getUndoRedoStack().length-1].text.trim()!==i.parent.inputElement.innerHTML.trim()&&n.undo&&i.parent.formatter.saveData()}}s.push(e)}},o=this,r=0,a=e;r<a.length;r++){n(a[r])}return s},e.prototype.getToolbarOptions=function(e){return{target:e.target,rteToolbarObj:this,items:this.getItems(e.items,e.container),overflowMode:e.mode,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl}},e.prototype.render=function(e){this.toolbarRenderer=this.renderFactory.getRenderer(nx.Toolbar),this.toolbarRenderer.renderToolbar(this.getToolbarOptions(e))},e}(),ow=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(nx.Toolbar)},e.prototype.beforeRender=function(e){var t=e.item;t.cssClass&&bi([e.element],t.cssClass),"Alignments"!==t.command&&"JustifyLeft"!==t.subCommand&&"JustifyRight"!==t.subCommand&&"JustifyCenter"!==t.subCommand||e.element.setAttribute("title",qx(t.subCommand.toLocaleLowerCase(),this.locator))},e.prototype.dropdownContent=function(e,t,i){return'<span style="display: inline-flex;width:'+("quick"===t?"auto":e)+'" ><span class="e-rte-dropdown-btn-text">'+i+"</span></span>"},e.prototype.renderDropDowns=function(e){var t=this;this.initializeInstance();var i=e.containerType,s=e.container;yx.forEach(function(n){var o=void 0;if(-1!==Fx(n,e.items))switch(n){case"formats":if(ae(o=Ii("#"+t.parent.getID()+"_"+i+"_Formats",s))||o.classList.contains(px))return;var r=t.parent.format.types.slice();r.forEach(function(e){Object.defineProperties(e,{command:{value:"Formats",enumerable:!0},subCommand:{value:e.value,enumerable:!0}})});var a=ae(t.parent.format.default)?r[0].text:t.parent.format.default;t.formatDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:"quick"===i?"e-formats e-icons":"",content:t.dropdownContent(t.parent.format.width,i,"quick"===i?"":Vx(r,a,"text","text")),cssClass:cx+" e-rte-dropdown-items e-formats-tbar-btn",itemName:"Formats",items:r,element:o});break;case"fontname":if(ae(o=Ii("#"+t.parent.getID()+"_"+i+"_FontName",s))||o.classList.contains(px))return;var l=t.parent.fontFamily.items.slice();l.forEach(function(e){Object.defineProperties(e,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontName",enumerable:!0}})});var h=ae(t.parent.fontFamily.default)?l[0].text:t.parent.fontFamily.default;t.fontNameDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:"quick"===i?"e-font-name e-icons":"",content:t.dropdownContent(t.parent.fontFamily.width,i,"quick"===i?"":Vx(l,h,"text","text")),cssClass:cx+" e-rte-dropdown-items e-font-name-tbar-btn",itemName:"FontName",items:l,element:o}),ae(t.parent.fontFamily.default)||(t.getEditNode().style.fontFamily=t.parent.fontFamily.default);break;case"fontsize":if(ae(o=Ii("#"+t.parent.getID()+"_"+i+"_FontSize",s))||o.classList.contains(px))return;var c=t.parent.fontSize.items.slice();c.forEach(function(e){Object.defineProperties(e,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontSize",enumerable:!0}})});var p=ae(t.parent.fontSize.default)?c[1].text:t.parent.fontSize.default;t.fontSizeDropDown=t.toolbarRenderer.renderDropDownButton({content:t.dropdownContent(t.parent.fontSize.width,i,_x(Vx(c,p.replace(/\s/g,""),"value","text"))),cssClass:cx+" e-rte-dropdown-items e-font-size-tbar-btn",itemName:"FontSize",items:c,element:o}),ae(t.parent.fontSize.default)||(t.getEditNode().style.fontSize=t.parent.fontSize.default);break;case"alignments":if(ae(o=Ii("#"+t.parent.getID()+"_"+i+"_Alignments",s))||o.classList.contains(px))return;t.alignDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:cx+" e-rte-dropdown-items",itemName:"Alignments",items:Sx,element:o});break;case"align":t.imageAlignmentDropDown(i,s,o);break;case"display":t.imageDisplayDropDown(i,s,o);break;case"tablerows":t.rowDropDown(i,s,o);break;case"tablecolumns":t.columnDropDown(i,s,o);break;case"tablecellverticalalign":t.verticalAlignDropDown(i,s,o);break;case"styles":t.tableStylesDropDown(i,s,o)}})},e.prototype.getUpdateItems=function(e,t){var i=e.slice();return i.forEach(function(e){Object.defineProperties(e,{command:{value:"Format"===t?"Formats":"Font",enumerable:!0},subCommand:{value:"Format"===t?e.value:t,enumerable:!0}})}),i},e.prototype.onPropertyChanged=function(e){for(var t,i,s=e.newProp,n=0,o=Object.keys(s);n<o.length;n++){switch(o[n]){case"fontFamily":if(this.fontNameDropDown)for(var r=0,a=Object.keys(s.fontFamily);r<a.length;r++){switch(a[r]){case"default":case"width":var l=this.fontNameDropDown.items;t=ae(Mi(this.fontNameDropDown.element,"."+hx))?"toolbar":"quick";var h=ae(this.parent.fontFamily.default)?l[0].text:this.parent.fontFamily.default;i=this.dropdownContent(this.parent.fontFamily.width,t,"quick"===t?"":Vx(l,h,"text","text")),this.fontNameDropDown.setProperties({content:i}),ae(this.parent.fontFamily.default)?this.getEditNode().style.removeProperty("font-family"):this.getEditNode().style.fontFamily=this.parent.fontFamily.default;break;case"items":this.fontNameDropDown.setProperties({items:this.getUpdateItems(s.fontFamily.items,"FontName")})}}break;case"fontSize":if(this.fontSizeDropDown)for(var c=0,p=Object.keys(s.fontSize);c<p.length;c++){switch(p[c]){case"default":case"width":var d=this.fontSizeDropDown.items;t=ae(Mi(this.fontSizeDropDown.element,"."+hx))?"toolbar":"quick";var u=ae(this.parent.fontSize.default)?d[1].text:this.parent.fontSize.default;i=this.dropdownContent(this.parent.fontSize.width,t,_x(Vx(d,u.replace(/\s/g,""),"value","text"))),this.fontSizeDropDown.setProperties({content:i}),ae(this.parent.fontSize.default)?this.getEditNode().style.removeProperty("font-size"):this.getEditNode().style.fontSize=this.parent.fontSize.default;break;case"items":this.fontSizeDropDown.setProperties({items:this.getUpdateItems(s.fontSize.items,"FontSize")})}}break;case"format":if(this.formatDropDown)for(var m=0,f=Object.keys(s.format);m<f.length;m++){switch(f[m]){case"default":case"width":var g=this.formatDropDown.items;t=ae(Mi(this.formatDropDown.element,"."+hx))?"toolbar":"quick";var v=ae(this.parent.format.default)?g[0].text:this.parent.format.default;i=this.dropdownContent(this.parent.format.width,t,"quick"===t?"":Vx(g,v,"text","text")),this.formatDropDown.setProperties({content:i});break;case"types":this.formatDropDown.setProperties({items:this.getUpdateItems(s.format.types,"Format")})}}}}},e.prototype.getEditNode=function(){return this.parent.contentModule.getEditPanel()},e.prototype.rowDropDown=function(e,t,i){(i=Ii("#"+this.parent.getID()+"_"+e+"_TableRows",t)).classList.contains(px)||(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-rows e-icons",cssClass:cx+" e-rte-dropdown-items e-quick-dropdown",itemName:"TableRows",items:Tx,element:i}))},e.prototype.columnDropDown=function(e,t,i){(i=Ii("#"+this.parent.getID()+"_"+e+"_TableColumns",t)).classList.contains(px)||(this.tableColumnsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-columns e-icons",cssClass:cx+" e-rte-dropdown-items e-quick-dropdown",itemName:"TableColumns",items:Dx,element:i}))},e.prototype.verticalAlignDropDown=function(e,t,i){(i=Ii("#"+this.parent.getID()+"_"+e+"_TableCellVerticalAlign",t)).classList.contains(px)||(this.tableCellVerticalAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell-ver-align e-icons",cssClass:cx+" e-rte-dropdown-items e-quick-dropdown",itemName:"TableCellVerticalAlign",items:Ox,element:i}))},e.prototype.imageDisplayDropDown=function(e,t,i){(i=Ii("#"+this.parent.getID()+"_"+e+"_Display",t)).classList.contains(px)||(this.displayDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-display e-icons",cssClass:cx+" e-rte-dropdown-items e-quick-dropdown",itemName:"Display",items:Ex,element:i}))},e.prototype.imageAlignmentDropDown=function(e,t,i){(i=Ii("#"+this.parent.getID()+"_"+e+"_Align",t)).classList.contains(px)||(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:cx+" e-rte-dropdown-icons e-quick-dropdown",itemName:"Align",items:xx,element:i}))},e.prototype.tableStylesDropDown=function(e,t,i){(i=Ii("#"+this.parent.getID()+"_"+e+"_Styles",t)).classList.contains(px)||(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-style e-icons",cssClass:cx+" e-rte-dropdown-icons e-quick-dropdown",itemName:"Styles",items:this.parent.tableSettings.styles,element:i}))},e.prototype.removeDropDownClasses=function(e){Ci([e],[px,cx,"e-rte-dropdown-icons","e-rte-dropdown-items"])},e.prototype.destroyDropDowns=function(){this.formatDropDown&&(this.removeDropDownClasses(this.formatDropDown.element),this.formatDropDown.destroy()),this.fontNameDropDown&&(this.removeDropDownClasses(this.fontNameDropDown.element),this.fontNameDropDown.destroy()),this.fontSizeDropDown&&(this.removeDropDownClasses(this.fontSizeDropDown.element),this.fontSizeDropDown.destroy()),this.alignDropDown&&(this.removeDropDownClasses(this.alignDropDown.element),this.alignDropDown.destroy()),this.imageAlignDropDown&&(this.removeDropDownClasses(this.imageAlignDropDown.element),this.imageAlignDropDown.destroy()),this.displayDropDown&&(this.removeDropDownClasses(this.displayDropDown.element),this.displayDropDown.destroy()),this.tableRowsDropDown&&(this.removeDropDownClasses(this.tableRowsDropDown.element),this.tableRowsDropDown.destroy()),this.tableColumnsDropDown&&(this.removeDropDownClasses(this.tableColumnsDropDown.element),this.tableColumnsDropDown.destroy()),this.tableCellVerticalAlignDropDown&&(this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element),this.tableCellVerticalAlignDropDown.destroy())},e.prototype.setRtl=function(e){this.formatDropDown&&this.formatDropDown.setProperties({enableRtl:e.enableRtl}),this.fontNameDropDown&&this.fontNameDropDown.setProperties({enableRtl:e.enableRtl}),this.fontSizeDropDown&&this.fontSizeDropDown.setProperties({enableRtl:e.enableRtl}),this.alignDropDown&&this.alignDropDown.setProperties({enableRtl:e.enableRtl}),this.imageAlignDropDown&&this.imageAlignDropDown.setProperties({enableRtl:e.enableRtl}),this.displayDropDown&&this.displayDropDown.setProperties({enableRtl:e.enableRtl})},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("beforeDropDownItemRender",this.beforeRender,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on(lx,this.setRtl,this),this.parent.on("destroy",this.removeEventListener,this),this.parent.on("model-changed",this.onPropertyChanged,this))},e.prototype.onIframeMouseDown=function(){Xx(document,"mousedown")},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off(lx,this.setRtl),this.parent.off("beforeDropDownItemRender",this.beforeRender),this.parent.off("destroy",this.removeEventListener),this.parent.off("model-changed",this.onPropertyChanged))},e}(),rw=function(){function e(){this.services={}}return e.prototype.register=function(e,t){ae(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(ae(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),aw=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var i=ne(nx,e);ae(this.rendererMap[i])&&(this.rendererMap[i]=t)},e.prototype.getRenderer=function(e){var t=ne(nx,e);if(ae(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},e}(),lw=function(){function e(e){this.parent=e,this.addEventListener(),this.serviceLocator=new rw,this.serviceLocator.register("rendererFactory",new aw)}return e.prototype.addEventListener=function(){this.parent.on("toolbarClick",this.toolbarClick,this),this.parent.on("dropDownSelect",this.dropDownSelect,this),this.parent.on("colorPickerChanged",this.renderSelection,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.toolbarClick=function(e){if(!ae(e.item)){if(!ae(e.item.controlParent)){var t=e.item.controlParent.activeEle;t&&(t.tabIndex=-1)}this.parent.notify("html-toolbar-click",e),this.parent.notify("markdown-toolbar-click",e)}},e.prototype.dropDownSelect=function(e){if(this.parent.notify("selection-restore",{}),!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!e.item||"Images"!==e.item.command&&"Display"!==e.item.command&&"Table"!==e.item.command){var t=e.item.controlParent&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar&&this.parent.quickToolbarModule.tableQTBar.element.contains(e.item.controlParent.element)?"Table":null;this.parent.formatter.process(this.parent,e,e.originalEvent,t)}this.parent.notify("selection-save",{})},e.prototype.renderSelection=function(e){this.parent.notify("selection-restore",{}),this.parent.formatter.process(this.parent,e,e.originalEvent,null),this.parent.notify("selection-save",{})},e.prototype.removeEventListener=function(){this.parent.off("toolbarClick",this.toolbarClick),this.parent.off("dropDownSelect",this.dropDownSelect),this.parent.off("colorPickerChanged",this.renderSelection),this.parent.off("destroy",this.removeEventListener)},e}(),hw=function(){function e(e,t){var i;this.parent=e,this.isToolbar=!1,this.locator=t,this.isTransformChild=!1,this.renderFactory=this.locator.getService("rendererFactory"),i=this.parent,Sx.forEach(function(e,t){Sx[t].text=Px(i,Cx,Sx[t])}),Ex.forEach(function(e,t){Ex[t].text=Px(i,wx,Ex[t])}),Tx.forEach(function(e,t){Tx[t].text=Px(i,kx,Tx[t])}),Dx.forEach(function(e,t){Dx[t].text=Px(i,Lx,Dx[t])}),Ox.forEach(function(e,t){Ox[t].text=Px(i,Ix,Ox[t])}),Mx.forEach(function(e,t){Mx[t].text=Px(i,Ax,Mx[t])}),this.renderFactory.addRenderer(nx.Toolbar,new sw(this.parent)),this.toolbarRenderer=this.renderFactory.getRenderer(nx.Toolbar),this.baseToolbar=new nw(this.parent,this.locator),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?re(this.tools,bx,Zx(this.parent.toolbarSettings.itemConfigs),!0):this.tools=bx}return e.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(nx.Content),this.editableElement=this.contentRenderer.getEditPanel(),this.editPanel=this.contentRenderer.getPanel()},e.prototype.toolbarBindEvent=function(){this.parent.inlineMode.enable||(this.keyBoardModule=new Qs(this.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}))},e.prototype.toolBarKeyDown=function(e){switch(e.action){case"escape":this.parent.contentModule.getEditPanel().focus()}},e.prototype.createToolbarElement=function(){this.tbElement=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar"}),!bt.isDevice&&this.parent.inlineMode.enable&&zx()||(this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable?(this.tbWrapper=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar_wrapper",innerHTML:this.tbElement.outerHTML,className:"e-toolbar-wrapper"}),this.tbElement=this.tbWrapper.firstElementChild,this.parent.element.insertBefore(this.tbWrapper,this.editPanel)):this.parent.element.insertBefore(this.tbElement,this.editPanel))},e.prototype.getToolbarMode=function(){var e;switch(this.parent.toolbarSettings.type){case ox.Expand:e="Extended";break;case ox.Scrollable:e="Scrollable";break;default:e="MultiRow"}return zx()&&this.parent.toolbarSettings.type===ox.Expand&&(e=ox.Scrollable),e},e.prototype.checkToolbarResponsive=function(e){return!(!bt.isDevice||zx())&&(t=this.parent.toolbarSettings.type===ox.Expand?ox.MultiRow:this.parent.toolbarSettings.type,this.baseToolbar.render({container:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items,mode:t,target:e}),this.parent.toolbarSettings.type===ox.Expand&&(bi([e],["e-rte-tb-mobile"]),this.parent.inlineMode.enable?this.addFixedTBarClass():bi([e],["e-tb-static"])),this.wireEvents(),this.dropDownModule.renderDropDowns({container:e,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify("render-color-picker",{container:this.tbElement,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),!0);var t},e.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var e=Oi('[style*="transform"]',document),t=0;t<e.length;t++)if(!ae(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}},e.prototype.toggleFloatClass=function(e){var t,i,s=!1,n=!1,o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?i=e.target.body:e&&e.target!==document?i=e.target:(s=!0,i=document.body);var r=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;var a=0,l=this.parent.element.offsetHeight;if(s){var h=window.getComputedStyle(i);a=parseFloat(h.marginTop.split("px")[0])+parseFloat(h.paddingTop.split("px")[0])}var c=this.parent.element.getBoundingClientRect().top,p=bt.isMSPointer&&s?window.pageYOffset:i.parentElement.scrollTop,d=i.getBoundingClientRect(),u=s?d.top+p:d.top;c>u+o||c<-l||c<0&&!(c-(s?0:u)+l>r+o)?(n=!1,Ci([this.tbElement],["e-rte-tb-abs-float"])):c<u+o&&(t=c<0?-c+u:u-c,t=s?t-a:t,bi([this.tbElement],["e-rte-tb-abs-float"]),n=!0)}else{var m=this.parent.element.getBoundingClientRect();if(window.innerHeight<m.top)return;t=e&&e.target!==document?i.getBoundingClientRect().top:0,m.bottom<o+r+t||m.bottom<0||m.top>o+t?n=!1:m.top<o&&(n=!0)}n?(bi([this.tbElement],["e-rte-tb-float"]),Ri(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+t+"px"})):(Ci([this.tbElement],["e-rte-tb-float"]),Ri(this.tbElement,{top:"0px",width:"100%"}))},e.prototype.renderToolbar=function(){if(this.initializeInstance(),this.createToolbarElement(),!this.checkToolbarResponsive(this.tbElement)){this.parent.inlineMode.enable?this.parent.notify("renderInlineToolbar",{}):(this.baseToolbar.render({container:"toolbar",items:this.parent.toolbarSettings.items,mode:this.getToolbarMode(),target:this.tbElement}),this.parent.inlineMode.enable||(this.parent.toolbarSettings.enableFloating&&(this.checkIsTransformChild(),this.toggleFloatClass()),this.parent.toolbarSettings.type===ox.Expand&&bi([this.parent.element],["e-rte-tb-expand"]))),this.wireEvents(),this.parent.inlineMode.enable&&!zx()&&this.addFixedTBarClass(),this.parent.inlineMode.enable||(this.dropDownModule.renderDropDowns({container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify("render-color-picker",{container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.refreshToolbarOverflow());var e=this.parent.element.querySelector(".e-rte-srctextarea"),t=this.parent.element.querySelector(".e-source-content");(!this.parent.iframeSettings.enable&&!ae(e)&&"block"===e.style.display||this.parent.iframeSettings.enable&&!ae(t)&&"block"===t.style.display)&&(this.parent.notify("updateToolbarItem",{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),this.parent.disableToolbarItem(this.parent.toolbarSettings.items))}},e.prototype.addFixedTBarClass=function(){bi([this.tbElement],["e-rte-tb-fixed"])},e.prototype.removeFixedTBarClass=function(){Ci([this.tbElement],["e-rte-tb-fixed"])},e.prototype.showFixedTBar=function(){bi([this.tbElement],["e-show"]),bt.isIos&&bi([this.tbElement],["e-tbar-ios-fixed"])},e.prototype.hideFixedTBar=function(){this.isToolbar?this.isToolbar=!1:Ci([this.tbElement],["e-show","e-tbar-ios-fixed"])},e.prototype.updateItem=function(e){var t=this.tools[e.updateItem.toLocaleLowerCase()],i=Gx(Ux(this.tools[e.targetItem.toLocaleLowerCase()].subCommand),e.baseToolbar.toolbarObj.items)[0];if(ae(i))this.addTBarItem(e,0);else{var s=this.parent.inlineMode.enable?"_quick_":"_toolbar_";e.baseToolbar.toolbarObj.items[i].id=this.parent.getID()+s+t.id,e.baseToolbar.toolbarObj.items[i].prefixIcon=t.icon,e.baseToolbar.toolbarObj.items[i].tooltipText=t.tooltip,e.baseToolbar.toolbarObj.items[i].subCommand=t.subCommand,e.baseToolbar.toolbarObj.dataBind()}},e.prototype.updateToolbarStatus=function(e){this.tbElement&&(!this.parent.inlineMode.enable||!zx()&&bt.isDevice)&&Wx({args:e,dropDownModule:this.dropDownModule,parent:this.parent,tbElements:Oi("."+dx,this.tbElement),tbItems:this.baseToolbar.toolbarObj.items},!!this.parent.inlineMode.enable)},e.prototype.fullScreen=function(e){this.parent.fullScreenModule.showFullScreen(e)},e.prototype.hideScreen=function(e){this.parent.fullScreenModule.hideFullScreen(e)},e.prototype.getBaseToolbar=function(){return this.baseToolbar},e.prototype.addTBarItem=function(e,t){e.baseToolbar.toolbarObj.addItems([e.baseToolbar.getObject(e.updateItem,"toolbar")],t)},e.prototype.enableTBarItems=function(e,t,i,s){var n=Gx(Ux(t),e.toolbarObj.items);this.tbItems=Oi("."+dx,e.toolbarObj.element);for(var o=0;o<n.length;o++){var r=this.tbItems[n[o]];r&&e.toolbarObj.enableItems(r,i)}Ii(".e-rte-srctextarea",this.parent.element)||s||Yx(e,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},e.prototype.removeTBarItems=function(e){ae(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var t=Gx(Ux(e),this.baseToolbar.toolbarObj.items);this.tbItems=this.parent.inlineMode.enable?Oi("."+dx,this.baseToolbar.toolbarObj.element):Oi("."+dx,this.parent.element);for(var i=0;i<t.length;i++)this.baseToolbar.toolbarObj.removeItems(this.tbItems[t[i]])},e.prototype.getExpandTBarPopHeight=function(){var e=0;if(this.parent.toolbarSettings.type===ox.Expand&&this.tbElement.classList.contains("e-extended-toolbar")){var t=Ii(".e-toolbar-extended",this.tbElement);t&&this.tbElement.classList.contains("e-expand-open")||t&&t.classList.contains("e-popup-open")?(bi([t],["e-visible"]),e+=t.offsetHeight,Ci([t],["e-visible"])):Ci([this.tbElement],["e-expand-open"])}return e},e.prototype.getToolbarHeight=function(){return this.tbElement.offsetHeight},e.prototype.getToolbarElement=function(){return Ii(".e-rte-toolbar",this.parent.element)},e.prototype.refreshToolbarOverflow=function(){this.baseToolbar.toolbarObj.refreshOverflow()},e.prototype.isToolbarDestroyed=function(){return this.baseToolbar.toolbarObj&&!this.baseToolbar.toolbarObj.isDestroyed},e.prototype.destroyToolbar=function(){if(this.isToolbarDestroyed()){this.parent.unWireScrollElementsEvents(),this.unWireEvents(),this.parent.notify("destroy-color-picker",{}),this.dropDownModule.destroyDropDowns(),this.baseToolbar.toolbarObj.destroy(),this.removeEventListener(),Ci([this.parent.element],["e-rte-tb-expand"]);var e=Ii(".e-toolbar-wrapper",this.parent.element),t=Ii(".e-rte-toolbar",this.parent.element);ae(e)?ae(t)||Ti(t):Ti(e)}},e.prototype.destroy=function(){this.isToolbarDestroyed()&&(this.destroyToolbar(),this.keyBoardModule&&this.keyBoardModule.destroy())},e.prototype.scrollHandler=function(e){this.parent.inlineMode.enable||this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args)},e.prototype.getDOMVisibility=function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)},e.prototype.mouseDownHandler=function(){bt.isDevice&&this.parent.inlineMode.enable&&!zx()&&this.showFixedTBar()},e.prototype.focusChangeHandler=function(){bt.isDevice&&this.parent.inlineMode.enable&&!zx()&&(this.isToolbar=!1,this.hideFixedTBar())},e.prototype.dropDownBeforeOpenHandler=function(){this.isToolbar=!0},e.prototype.tbFocusHandler=function(e){var t=document.activeElement,i=Mi(t,".e-rte-toolbar");if(t===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var s=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),n=0;n<s.length;n++)ae(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?s[n].setAttribute("tabindex","0"):s[n].setAttribute("tabindex","1")},e.prototype.tbKeydownHandler=function(e){(e.target.classList.contains("e-dropdown-btn")||e.target.getAttribute("id")===this.parent.getID()+"_toolbar_CreateTable")&&e.target.setAttribute("tabindex","0")},e.prototype.toolbarClickHandler=function(e){var t=Mi(e.originalEvent.target,".e-hor-nav");t&&this.parent.toolbarSettings.type===ox.Expand&&!ae(t)?t.classList.contains("e-nav-active")?(bi([this.tbElement],["e-expand-open"]),this.parent.setContentHeight("toolbar",!0)):(Ci([this.tbElement],["e-expand-open"]),this.parent.setContentHeight("toolbar",!1)):(bt.isDevice||this.parent.inlineMode.enable)&&(this.isToolbar=!0),ae(t)&&this.parent.toolbarSettings.type===ox.Expand&&Ci([this.tbElement],["e-expand-open"])},e.prototype.wireEvents=function(){this.parent.inlineMode.enable&&zx()||(Ct.add(this.tbElement,"focusin",this.tbFocusHandler,this),Ct.add(this.tbElement,"keydown",this.tbKeydownHandler,this))},e.prototype.unWireEvents=function(){Ct.remove(this.tbElement,"focusin",this.tbFocusHandler),Ct.remove(this.tbElement,"keydown",this.tbKeydownHandler)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.dropDownModule=new ow(this.parent,this.locator),this.toolbarActionModule=new lw(this.parent),this.parent.on("initial-end",this.renderToolbar,this),this.parent.on("scroll",this.scrollHandler,this),this.parent.on("bind-on-end",this.toolbarBindEvent,this),this.parent.on("toolbar-updated",this.updateToolbarStatus,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.on("refresh-begin",this.onRefresh,this),this.parent.on("destroy",this.destroy,this),this.parent.on("enableFullScreen",this.fullScreen,this),this.parent.on("disableFullScreen",this.hideScreen,this),this.parent.on("updateToolbarItem",this.updateItem,this),this.parent.on("beforeDropDownOpen",this.dropDownBeforeOpenHandler,this),this.parent.on("expandPopupClick",this.parent.setContentHeight,this.parent),this.parent.on("focusChange",this.focusChangeHandler,this),this.parent.on("mouseDown",this.mouseDownHandler,this),this.parent.on("sourceCodeMouseDown",this.mouseDownHandler,this),this.parent.inlineMode.enable||zx()||this.parent.on("toolbarClick",this.toolbarClickHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.renderToolbar),this.parent.off("scroll",this.scrollHandler),this.parent.off("bind-on-end",this.toolbarBindEvent),this.parent.off("toolbar-updated",this.updateToolbarStatus),this.parent.off("model-changed",this.onPropertyChanged),this.parent.off("refresh-begin",this.onRefresh),this.parent.off("destroy",this.destroy),this.parent.off("enableFullScreen",this.parent.fullScreenModule.showFullScreen),this.parent.off("disableFullScreen",this.parent.fullScreenModule.hideFullScreen),this.parent.off("updateToolbarItem",this.updateItem),this.parent.off("beforeDropDownOpen",this.dropDownBeforeOpenHandler),this.parent.off("expandPopupClick",this.parent.setContentHeight),this.parent.off("focusChange",this.focusChangeHandler),this.parent.off("mouseDown",this.mouseDownHandler),this.parent.off("sourceCodeMouseDown",this.mouseDownHandler),this.parent.inlineMode.enable||zx()||this.parent.off("toolbarClick",this.toolbarClickHandler))},e.prototype.onRefresh=function(){this.refreshToolbarOverflow(),this.parent.setContentHeight("",!0)},e.prototype.onPropertyChanged=function(e){if(!ae(e.newProp.inlineMode))for(var t=0,i=Object.keys(e.newProp.inlineMode);t<i.length;t++){switch(i[t]){case"enable":this.refreshToolbar()}}e.module===this.getModuleName()&&this.refreshToolbar()},e.prototype.refreshToolbar=function(){ae(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var e=Ii(".e-toolbar-wrapper",this.parent.element);(Ii(".e-rte-toolbar",this.parent.element)||e)&&this.destroyToolbar(),this.parent.toolbarSettings.enable&&(this.addEventListener(),this.renderToolbar(),this.parent.wireScrollElementsEvents(),Ii(".e-rte-srctextarea",this.parent.element)||Yx(this.baseToolbar,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus()))},e.prototype.getModuleName=function(){return"toolbar"},e}(),cw=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),pw=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},dw={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},uw=function(e){function t(t,s){var n=e.call(this,s,t)||this;return n.keyPressHandler=function(e){for(var t=e.altKey,s=e.ctrlKey,o=e.shiftKey,r=e.which,a=0,l=Object.keys(n.keyConfigs);a<l.length;a++)for(var h=l[a],c=0,p=n.keyConfigs[h].split(",");c<p.length;c++){var d=p[c],u=i.getKeyConfigData(d.trim());t===u.altKey&&s===u.ctrlKey&&o===u.shiftKey&&r===u.keyCode&&(e.action=h)}n.keyAction&&n.keyAction(e)},n.bind(),n}var i;return cw(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),s={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?s.keyCode=Number(t[t.length-1]):s.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=s,s},t.getKeyCode=function(e){return dw[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},pw([os({})],t.prototype,"keyConfigs",void 0),pw([os("keyup")],t.prototype,"eventName",void 0),pw([cs()],t.prototype,"keyAction",void 0),t=i=pw([ps],t)}(_i),mw=function(){function e(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?re(this.tools,bx,Zx(this.parent.toolbarSettings.itemConfigs),!0):this.tools=bx}return e.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(nx.Toolbar)},e.prototype.renderColorPickerInput=function(e){var t=this;this.initializeInstance();var i,s,n=e.containerType,o=e.container;yx.forEach(function(r){if(-1!==Fx(r,e.items))switch(r){case"fontcolor":i=t.parent.getID()+"_"+n+"_FontColor_Target";var a=t.parent.createElement("input");a.id=i,a.classList.add("e-rte-fontcolor-element"),document.body.appendChild(a),s={cssClass:t.tools[r.toLocaleLowerCase()].icon+" e-rte-elements e-icons",value:t.tools[r.toLocaleLowerCase()].value,command:t.tools[r.toLocaleLowerCase()].command,subCommand:t.tools[r.toLocaleLowerCase()].subCommand,element:Ii("#"+t.parent.getID()+"_"+n+"_FontColor",o),target:"#"+i},t.fontColorPicker=t.toolbarRenderer.renderColorPicker(s,"fontcolor"),t.fontColorDropDown=t.toolbarRenderer.renderColorPickerDropDown(s,"fontcolor",t.fontColorPicker);break;case"backgroundcolor":i=t.parent.getID()+"_"+n+"_BackgroundColor_Target";var l=t.parent.createElement("input");l.id=i,l.classList.add("e-rte-backgroundcolor-element"),document.body.appendChild(l),s={cssClass:t.tools[r.toLocaleLowerCase()].icon+" e-rte-elements e-icons",value:t.tools[r.toLocaleLowerCase()].value,command:t.tools[r.toLocaleLowerCase()].command,subCommand:t.tools[r.toLocaleLowerCase()].subCommand,element:Ii("#"+t.parent.getID()+"_"+n+"_BackgroundColor",o),target:"#"+i},t.backgroundColorPicker=t.toolbarRenderer.renderColorPicker(s,"backgroundcolor"),t.backgroundColorDropDown=t.toolbarRenderer.renderColorPickerDropDown(s,"backgroundcolor",t.backgroundColorPicker)}})},e.prototype.destroy=function(){this.removeEventListener(),this.destroyColorPicker()},e.prototype.destroyColorPicker=function(){var e;(this.fontColorPicker&&!this.fontColorPicker.isDestroyed&&this.fontColorPicker.destroy(),this.backgroundColorPicker&&!this.backgroundColorPicker.isDestroyed&&this.backgroundColorPicker.destroy(),this.fontColorDropDown&&!this.fontColorDropDown.isDestroyed)&&((e=this.fontColorDropDown.element.querySelector(".e-rte-color-content"))&&Ti(e),this.fontColorDropDown.destroy());this.backgroundColorDropDown&&!this.backgroundColorDropDown.isDestroyed&&((e=this.backgroundColorDropDown.element.querySelector(".e-rte-color-content"))&&Ti(e),this.backgroundColorDropDown.destroy())},e.prototype.setRtl=function(e){this.fontColorPicker&&(this.fontColorPicker.setProperties({enableRtl:e.enableRtl}),this.fontColorDropDown.setProperties({enableRtl:e.enableRtl})),this.backgroundColorPicker&&(this.backgroundColorPicker.setProperties({enableRtl:e.enableRtl}),this.backgroundColorDropDown.setProperties({enableRtl:e.enableRtl}))},e.prototype.addEventListener=function(){this.parent.on("toolbarRenderComplete",this.renderColorPickerInput,this),this.parent.on(lx,this.setRtl,this),this.parent.on("destroy",this.destroy,this),this.parent.on("destroy-color-picker",this.destroyColorPicker,this),this.parent.on("model-changed",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=e.newProp,i=0,s=Object.keys(t);i<s.length;i++){switch(s[i]){case"fontColor":if(this.fontColorPicker)for(var n=0,o=Object.keys(t.fontColor);n<o.length;n++){switch(o[n]){case"default":this.fontColorPicker.setProperties({value:t.fontColor.default}),this.fontColorDropDown.element.querySelector("."+this.tools.fontcolor.icon).style.borderBottomColor=t.fontColor.default;break;case"mode":this.fontColorPicker.setProperties({mode:t.fontColor.mode});break;case"columns":this.fontColorPicker.setProperties({columns:t.fontColor.columns});break;case"colorCode":this.fontColorPicker.setProperties({presetColors:t.fontColor.colorCode});break;case"modeSwitcher":this.fontColorPicker.setProperties({modeSwitcher:t.fontColor.modeSwitcher})}}break;case"backgroundColor":if(this.backgroundColorPicker)for(var r=0,a=Object.keys(t.backgroundColor);r<a.length;r++){switch(a[r]){case"default":this.backgroundColorPicker.setProperties({value:t.backgroundColor.default}),this.backgroundColorDropDown.element.querySelector("."+this.tools.backgroundcolor.icon).style.borderBottomColor=t.backgroundColor.default;break;case"mode":this.backgroundColorPicker.setProperties({mode:t.backgroundColor.mode});break;case"columns":this.backgroundColorPicker.setProperties({columns:t.backgroundColor.columns});break;case"colorCode":this.backgroundColorPicker.setProperties({presetColors:t.backgroundColor.colorCode});break;case"modeSwitcher":this.backgroundColorPicker.setProperties({modeSwitcher:t.backgroundColor.modeSwitcher})}}}}},e.prototype.removeEventListener=function(){this.parent.off("toolbarRenderComplete",this.renderColorPickerInput),this.parent.off("destroy",this.destroy),this.parent.off(lx,this.setRtl),this.parent.off("destroy-color-picker",this.destroyColorPicker),this.parent.off("model-changed",this.onPropertyChanged)},e}(),fw=function(){function e(e,t){this.parent=e,this.locator=t,this.isDOMElement=!1,this.renderFactory=this.locator.getService("rendererFactory"),this.contentRenderer=this.renderFactory.getRenderer(nx.Content),this.popupRenderer=this.renderFactory.getRenderer(nx.Popup),this.dropDownButtons=new ow(this.parent,this.locator),this.colorPickerObj=new mw(this.parent,this.locator)}return e.prototype.appendPopupContent=function(){this.toolbarElement=this.parent.createElement("div",{className:hx}),this.element.appendChild(this.toolbarElement)},e.prototype.render=function(e){var t;t="Image"===e.popupType?"e-rte-image-popup":"Inline"===e.popupType?"e-rte-inline-popup":"";var i=he(e.popupType+"_Quick_Popup");this.stringItems=e.toolbarItems,this.element=this.parent.createElement("div",{id:i,className:t+" e-rte-elements"}),this.element.setAttribute("aria-owns",this.parent.getID()),this.appendPopupContent(),this.createToolbar(e.toolbarItems,e.mode),this.popupRenderer.renderPopup(this),this.addEventListener()},e.prototype.createToolbar=function(e,t){this.quickTBarObj=new nw(this.parent,this.locator),this.quickTBarObj.render({container:"quick",target:this.toolbarElement,items:e,mode:t}),this.quickTBarObj.toolbarObj.refresh()},e.prototype.setPosition=function(e){var t,i,s=Mi(e.target,".e-img-caption"),n=ae(s)?e.target:s;bi([this.toolbarElement],["e-remove-white-space"]);var o=n.offsetTop,r=window.pageYOffset+e.parentData.top;i=o-e.editTop>e.popHeight?r+e.tBarElementHeight+(o-e.editTop)-e.popHeight-5:e.editTop+e.editHeight-(o+n.offsetHeight)>e.popHeight?r+e.tBarElementHeight+(o-e.editTop)+n.offsetHeight+5:e.y,t=n.offsetWidth>e.popWidth?n.offsetWidth/2-e.popWidth/2+e.parentData.left+n.offsetLeft:e.parentData.left+n.offsetLeft,this.popupObj.position.X=t+e.popWidth>e.parentData.right?e.parentData.right-e.popWidth:t,this.popupObj.position.Y=i>=0?i:e.y+5,this.popupObj.dataBind(),Ci([this.toolbarElement],["e-remove-white-space"])},e.prototype.checkCollision=function(e,t,i){var s,n,o=e.parentData.top,r=e.windowY+o+e.tBarElementHeight,a=[];a="document"===t?Fn(e.popup):Fn(e.popup,e.parentElement);for(var l=0;l<a.length;l++)switch(a[l]){case"top":n="document"===t?e.windowY:window.pageYOffset+o+e.tBarElementHeight;break;case"bottom":n="document"===t?"inline"===i?e.y-e.popHeight-10:e.windowHeight-(o+e.tBarElementHeight)>e.popHeight?r-e.windowHeight>e.popHeight?r+(e.windowHeight-o)-e.popHeight:r:e.windowY+(o+e.tBarElementHeight):"IMG"!==e.target.tagName?e.parentData.bottom+window.pageYOffset-e.popHeight-10:e.parentData.bottom+window.pageYOffset-e.popHeight-5;break;case"right":s="inline"===i?e.windowWidth-(e.popWidth+e.bodyRightSpace+10):e.x-e.popWidth;break;case"left":s="inline"===i?0:e.parentData.left}this.popupObj.position.X=s||this.popupObj.position.X,this.popupObj.position.Y=n||this.popupObj.position.Y,this.popupObj.dataBind()},e.prototype.showPopup=function(e,t,i){var s=this,n=ye()?{cancel:!1,targetElement:i}:{popup:this.popupObj,cancel:!1,targetElement:i};this.parent.trigger("beforeQuickToolbarOpen",n,function(n){if(!n.cancel){var o,r=void 0,a=void 0,l=window.getComputedStyle(document.body),h=parseFloat(l.marginRight.split("px")[0])+parseFloat(l.paddingRight.split("px")[0]),c=window.innerHeight,p=window.innerWidth,d=s.parent.element,u=!ae(s.parent.getToolbar()),m=u&&s.parent.toolbarModule.getToolbarHeight(),f=u&&s.parent.toolbarModule.getExpandTBarPopHeight(),g=u?m+f:0;if(bi([s.element],["e-hide"]),bt.isDevice&&!zx()&&bi([s.parent.getToolbar()],["e-hide"]),s.parent.iframeSettings.enable)r=(o=s.contentRenderer.getPanel().contentWindow).pageYOffset,a=o.innerHeight;else r=(o=Mi(i,".e-rte-content"))?o.scrollTop:0,a=o?o.offsetHeight:0;s.parent.inlineMode.enable||Mi(i,"table")||(s.parent.disableToolbarItem(s.parent.toolbarSettings.items),s.parent.enableToolbarItem(["Undo","Redo"])),Ei([s.element],document.body),s.popupObj.position.X=e+20,s.popupObj.position.Y=t+(s.parent.iframeSettings.enable?35:20),s.popupObj.dataBind(),s.popupObj.element.classList.add("e-popup-open"),s.dropDownButtons.renderDropDowns({container:s.toolbarElement,containerType:"quick",items:s.stringItems}),s.colorPickerObj.renderColorPickerInput({container:s.toolbarElement,containerType:"quick",items:s.stringItems});var v={x:e,y:t,target:i,editTop:r,editHeight:a,popup:s.popupObj.element,popHeight:s.popupObj.element.offsetHeight,popWidth:s.popupObj.element.offsetWidth,parentElement:d,bodyRightSpace:h,windowY:window.pageYOffset,windowHeight:c,windowWidth:p,parentData:d.getBoundingClientRect(),tBarElementHeight:g};"IMG"===i.tagName&&s.setPosition(v),s.parent.inlineMode.enable||s.checkCollision(v,"parent",""),s.checkCollision(v,"document",s.parent.inlineMode.enable?"inline":""),s.popupObj.element.classList.remove("e-popup-open"),Ci([s.element],["e-hide"]),s.popupObj.show({name:"ZoomIn",duration:bt.isIE?250:400}),Ri(s.element,{maxWidth:s.parent.element.offsetWidth+"px"}),bi([s.element],["e-rte-pop"]),s.isDOMElement=!0}})},e.prototype.hidePopup=function(){var e=this.parent.sourceCodeModule.getViewPanel();bt.isDevice&&!zx()&&Ci([this.parent.getToolbar()],["e-hide"]),ae(this.parent.getToolbar())||this.parent.inlineMode.enable||(ae(e)||"none"===e.style.display)&&this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.removeEleFromDOM(),this.isDOMElement=!1},e.prototype.addQTBarItem=function(e,t){this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(e,"toolbar"),t)},e.prototype.removeQTBarItem=function(e){this.quickTBarObj.toolbarObj.removeItems(e)},e.prototype.removeEleFromDOM=function(){var e=this.popupObj.element;if(this.isDOMElement){this.dropDownButtons.destroyDropDowns(),this.colorPickerObj.destroyColorPicker(),Ci([this.element],["e-rte-pop"]),Ti(e);var t=ye()?{element:this.popupObj.element}:this.popupObj;this.parent.trigger("quickToolbarClose",t)}},e.prototype.updateStatus=function(e){Wx({args:e,dropDownModule:this.dropDownButtons,parent:this.parent,tbElements:Oi("."+dx,this.element),tbItems:this.quickTBarObj.toolbarObj.items},!0),Ii(".e-rte-srctextarea",this.parent.element)||Yx(this.parent.getBaseToolbarObject(),this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},e.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM()),this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("destroy",this.destroy,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.inlineMode.enable&&this.parent.on("toolbar-updated",this.updateStatus,this))},e.prototype.onPropertyChanged=function(e){if(!ae(e.newProp.inlineMode))for(var t=0,i=Object.keys(e.newProp.inlineMode);t<i.length;t++){switch(i[t]){case"enable":e.newProp.inlineMode.enable?this.parent.on("toolbar-updated",this.updateStatus,this):this.parent.off("toolbar-updated",this.updateStatus)}}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("destroy",this.destroy),this.parent.off("model-changed",this.onPropertyChanged),this.parent.inlineMode.enable&&this.parent.off("toolbar-updated",this.updateStatus))},e}(),gw=function(){function e(e){this.parent=e}return e.prototype.quickToolbarOpen=function(){var e=ye()?{element:this.popupObj.element}:this.popupObj;this.parent.trigger("quickToolbarOpen",e)},e.prototype.renderPopup=function(e){this.setPanel(e.element),this.renderPanel(),e.popupObj=new lo(e.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=e.popupObj,e.popupObj.hide()},e.prototype.renderPanel=function(){this.getPanel().classList.add("e-rte-quick-popup")},e.prototype.getPanel=function(){return this.popupPanel},e.prototype.setPanel=function(e){this.popupPanel=e},e}(),vw=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.renderFactory.addRenderer(nx.Popup,new gw(this.parent)),this.addEventListener()}return e.prototype.formatItems=function(e){var t=[];return e.forEach(function(e){if("string"==typeof e)switch(e.toLocaleLowerCase()){case"open":t.push("openLink");break;case"edit":t.push("editLink");break;case"unlink":t.push("removeLink");break;default:t.push(e)}else t.push(e)}),t},e.prototype.getQTBarOptions=function(e,t,i,s){return{popupType:e,toolbarItems:i,mode:t,renderType:s}},e.prototype.createQTBar=function(e,t,i,s){if(i.length<1)return null;var n=new fw(this.parent,this.locator);return n.render(this.getQTBarOptions(e,t,this.formatItems(i),s)),n},e.prototype.initializeQuickToolbars=function(){this.parent.quickToolbarModule=this,this.contentRenderer=this.renderFactory.getRenderer(nx.Content),this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&zx()&&Ct.add(this.contentRenderer.getDocument(),"selectionchange",this.selectionChangeHandler,this)},e.prototype.onMouseDown=function(e){this.parent.isBlur=!1,this.parent.isRTE=!0},e.prototype.renderQuickToolbars=function(){this.linkQTBar||this.imageQTBar||this.textQTBar||this.tableQTBar||(this.linkQTBar=this.createQTBar("Link","Scrollable",this.parent.quickToolbarSettings.link,nx.LinkToolbar),this.renderFactory.addRenderer(nx.LinkToolbar,this.linkQTBar),this.textQTBar=this.createQTBar("Text","Scrollable",this.parent.quickToolbarSettings.text,nx.TextToolbar),this.renderFactory.addRenderer(nx.TextToolbar,this.textQTBar),this.imageQTBar=this.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,nx.ImageToolbar),this.renderFactory.addRenderer(nx.ImageToolbar,this.imageQTBar),this.tableQTBar=this.createQTBar("Table","MultiRow",this.parent.quickToolbarSettings.table,nx.TableToolbar),this.renderFactory.addRenderer(nx.TableToolbar,this.tableQTBar),this.linkQTBar&&Ct.add(this.linkQTBar.element,"mousedown",this.onMouseDown,this),this.imageQTBar&&Ct.add(this.imageQTBar.element,"mousedown",this.onMouseDown,this),this.textQTBar&&Ct.add(this.textQTBar.element,"mousedown",this.onMouseDown,this),this.tableQTBar&&Ct.add(this.tableQTBar.element,"mousedown",this.onMouseDown,this))},e.prototype.renderInlineQuickToolbar=function(){!this.parent.inlineMode.enable||bt.isDevice&&!zx()||(bi([this.parent.element],["e-rte-inline"]),this.inlineQTBar=this.createQTBar("Inline","MultiRow",this.parent.toolbarSettings.items,nx.InlineToolbar),this.renderFactory.addRenderer(nx.InlineToolbar,this.inlineQTBar),Ct.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this))},e.prototype.showInlineQTBar=function(e,t,i){this.parent.readonly||this.inlineQTBar.showPopup(e,t,i)},e.prototype.hideInlineQTBar=function(){this.inlineQTBar&&!jx(this.inlineQTBar.element,"e-popup-close")&&this.inlineQTBar.hidePopup()},e.prototype.hideQuickToolbars=function(){this.linkQTBar&&!jx(this.linkQTBar.element,"e-popup-close")&&document.body.contains(this.linkQTBar.element)&&this.linkQTBar.hidePopup(),this.textQTBar&&!jx(this.textQTBar.element,"e-popup-close")&&document.body.contains(this.textQTBar.element)&&this.textQTBar.hidePopup(),this.imageQTBar&&!jx(this.imageQTBar.element,"e-popup-close")&&document.body.contains(this.imageQTBar.element)&&this.imageQTBar.hidePopup(),this.tableQTBar&&!jx(this.tableQTBar.element,"e-popup-close")&&document.body.contains(this.tableQTBar.element)&&this.tableQTBar.hidePopup(),!this.parent.inlineMode.enable||bt.isDevice&&!zx()||this.hideInlineQTBar()},e.prototype.deBounce=function(e,t,i){var s=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout(function(){s.showInlineQTBar(e,t,i)},1e3)},e.prototype.mouseUpHandler=function(e){if(this.parent.inlineMode.enable&&(!bt.isDevice||zx())){var t;t=e.args.touches?e.args.changedTouches[0]:e.args;var i=this.parent.getRange(),s=e.args.target;if(ae(Ii(".e-rte-inline-popup",document.body))){if(zx()&&e.touchData&&e.touchData.prevClientX!==e.touchData.clientX&&e.touchData.prevClientY!==e.touchData.clientY)return;if(this.hideInlineQTBar(),this.offsetX=t.pageX,this.offsetY=function(e,t,i){return i?window.pageYOffset+t.getBoundingClientRect().top+e.clientY:e.pageY}(t,this.parent.element,this.parent.iframeSettings.enable),"TEXTAREA"===s.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,s);else{var n=Mi(s,"a");if(!("IMG"===(s=n||s).tagName||"A"===s.tagName||Mi(s,"td,th")&&i.collapsed)){if(this.parent.inlineMode.onSelection&&i.collapsed)return;this.target=s,this.showInlineQTBar(this.offsetX,this.offsetY,s)}}}}},e.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||bt.isDevice&&!zx()||ae(Ii(".e-rte-inline-popup",document))||this.hideInlineQTBar()},e.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||bt.isDevice&&!zx()||ae(Ii(".e-rte-inline-popup",document))||this.hideInlineQTBar()},e.prototype.keyUpHandler=function(e){if(this.parent.inlineMode.enable&&!bt.isDevice){if(this.parent.inlineMode.onSelection)return;var t=e.args;this.deBounce(this.offsetX,this.offsetY,t.target)}},e.prototype.selectionChangeHandler=function(e){var t=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout(function(){t.onSelectionChange(e)},1e3)},e.prototype.onSelectionChange=function(e){ae(Ii(".e-rte-inline-popup",document.body))&&(this.contentRenderer.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:e}))},e.prototype.getInlineBaseToolbar=function(){return this.inlineQTBar&&this.inlineQTBar.quickTBarObj},e.prototype.destroy=function(){this.linkQTBar&&(Ct.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),this.linkQTBar.destroy()),this.textQTBar&&(Ct.remove(this.textQTBar.element,"mousedown",this.onMouseDown),this.textQTBar.destroy()),this.imageQTBar&&(Ct.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),this.imageQTBar.destroy()),this.tableQTBar&&(Ct.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),this.tableQTBar.destroy()),this.inlineQTBar&&(Ct.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),zx()&&Ct.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener()},e.prototype.wireInlineQTBarEvents=function(){this.parent.on("mouseUp",this.mouseUpHandler,this),this.parent.on("mouseDown",this.inlineQTBarMouseDownHandler,this),this.parent.on(ax,this.keyDownHandler,this),this.parent.on(rx,this.keyUpHandler,this),this.parent.on("sourceCodeMouseDown",this.mouseUpHandler,this),this.parent.on("renderInlineToolbar",this.renderInlineQuickToolbar,this)},e.prototype.unWireInlineQTBarEvents=function(){this.parent.off("mouseUp",this.mouseUpHandler),this.parent.off("mouseDown",this.inlineQTBarMouseDownHandler),this.parent.off(ax,this.keyDownHandler),this.parent.off(rx,this.keyUpHandler),this.parent.off("sourceCodeMouseDown",this.mouseUpHandler),this.parent.off("renderInlineToolbar",this.renderInlineQuickToolbar)},e.prototype.toolbarUpdated=function(e){this.linkQTBar&&!jx(this.linkQTBar.element,"e-popup-close")&&this.linkQTBar.hidePopup(),this.imageQTBar&&!jx(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.tableQTBar&&!jx(this.tableQTBar.element,"e-popup-close")&&this.tableQTBar.hidePopup()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initial-end",this.initializeQuickToolbars,this),this.parent.on("mouseDown",this.renderQuickToolbars,this),this.parent.on("toolbar-updated",this.toolbarUpdated,this),this.parent.on("drop",this.renderQuickToolbars,this),this.wireInlineQTBarEvents(),this.parent.on("model-changed",this.onPropertyChanged,this),"hide"===this.parent.quickToolbarSettings.actionOnScroll&&(this.parent.on("scroll",this.hideQuickToolbars,this),this.parent.on("contentscroll",this.hideQuickToolbars,this)),this.parent.on("focusChange",this.hideQuickToolbars,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on("destroy",this.destroy,this),this.parent.on(ax,this.onKeyDown,this),this.parent.on(lx,this.setRtl,this))},e.prototype.onKeyDown=function(e){var t=e.args;8!==t.which&&46!==t.which||this.imageQTBar&&!jx(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup()},e.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},e.prototype.setRtl=function(e){this.inlineQTBar&&this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl}),this.imageQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl}),this.linkQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl})},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.initializeQuickToolbars),this.parent.off("mouseDown",this.renderQuickToolbars),this.parent.off("toolbar-updated",this.toolbarUpdated),this.parent.off("drop",this.renderQuickToolbars),this.unWireInlineQTBarEvents(),this.parent.off("model-changed",this.onPropertyChanged),"hide"===this.parent.quickToolbarSettings.actionOnScroll&&(this.parent.off("scroll",this.hideQuickToolbars),this.parent.off("contentscroll",this.hideQuickToolbars)),this.parent.off("focusChange",this.hideQuickToolbars),this.parent.off("destroy",this.destroy),this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off(ax,this.onKeyDown),this.parent.off(lx,this.setRtl))},e.prototype.onPropertyChanged=function(e){if(!ae(e.newProp.quickToolbarSettings))for(var t=0,i=Object.keys(e.newProp.quickToolbarSettings);t<i.length;t++){switch(i[t]){case"actionOnScroll":"none"===e.newProp.quickToolbarSettings.actionOnScroll?(this.parent.off("scroll",this.hideQuickToolbars),this.parent.off("contentscroll",this.hideQuickToolbars)):(this.parent.on("scroll",this.hideQuickToolbars,this),this.parent.on("contentscroll",this.hideQuickToolbars,this))}}e.module===this.getModuleName()&&(this.inlineQTBar&&(Ci([this.parent.element],["e-rte-inline"]),this.unWireInlineQTBarEvents(),this.hideInlineQTBar()),!this.parent.inlineMode.enable||bt.isDevice&&!zx()||(bi([this.parent.element],["e-rte-inline"]),this.wireInlineQTBarEvents()))},e.prototype.getModuleName=function(){return"quickToolbar"},e}(),yw=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(nx.Content),this.editPanel=this.contentRenderer.getEditPanel(),this.addEventListener()},e.prototype.renderCount=function(){this.initializeInstance(),this.element=this.parent.createElement("span",{className:"e-rte-character-count"}),this.contentRenderer.getPanel().parentElement.appendChild(this.element),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength)},e.prototype.appendCount=function(){var e="Markdown"===this.parent.editorMode?this.editPanel.value.trim():this.editPanel.textContent.trim();this.htmlLength=e.length;var t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.element.innerHTML=t},e.prototype.charCountBackground=function(e){var t=e/this.parent.maxLength*100;t<85?(this.element.classList.remove("e-warning"),this.element.classList.remove("e-error")):t>85&&t<=90?(this.element.classList.remove("e-error"),this.element.classList.add("e-warning")):t>90&&(this.element.classList.remove("e-warning"),this.element.classList.add("e-error"))},e.prototype.refresh=function(){ae(this.editPanel)||(this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.destroy=function(){this.element&&!ae(this.parent.element.querySelector(".e-rte-character-count"))&&Ti(this.element),this.removeEventListener()},e.prototype.toggle=function(e){this.element.style.display="viewSource"===e.member?"none":"block"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initial-end",this.renderCount,this),this.parent.on(rx,this.refresh,this),this.parent.on("count",this.refresh,this),this.parent.on("refresh-begin",this.refresh,this),this.parent.on("mouseDown",this.refresh,this),this.parent.on("destroy",this.destroy,this),this.parent.on("sourceCode",this.toggle,this),this.parent.on("updateSource",this.toggle,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.renderCount),this.parent.off(rx,this.refresh),this.parent.off("refresh-begin",this.refresh),this.parent.off("count",this.refresh),this.parent.off("mouseDown",this.refresh),this.parent.off("destroy",this.destroy),this.parent.off("sourceCode",this.toggle),this.parent.off("updateSource",this.toggle))},e.prototype.getModuleName=function(){return"count"},e}(),bw=function(){function e(){}return e.prototype.getLineNumber=function(e,t){return e.value.substr(0,t).split("\n").length},e.prototype.getSelectedText=function(e){var t=e.selectionStart,i=e.selectionEnd;return e.value.substring(t,i)},e.prototype.getAllParents=function(e){return e.split("\n")},e.prototype.getSelectedLine=function(e){return this.getAllParents(e.value)[this.getLineNumber(e,e.selectionStart)-1]},e.prototype.getLine=function(e,t){return this.getAllParents(e.value)[t]},e.prototype.getSelectedParentPoints=function(e){var t=this.getAllParents(e.value),i=this.getLineNumber(e,e.selectionStart),s=this.getLineNumber(e,e.selectionEnd),n=this.getSelectedText(e).split("\n"),o=[],r=t[i-1],a=t.slice(0,i-1).join("").length,l={};if(l.line=i-1,l.start=a+l.line,l.end=""!==r?l.start+r.length+1:l.start+r.length,l.text=r,o.push(l),n.length>1){for(var h=1;h<n.length-1;h++){var c={};c.line=o[h-1].line+1,c.start=(n[h],o[h-1].end),c.end=c.start+n[h].length+1,c.text=n[h],o.push(c)}var p={};p.line=o[o.length-1].line+1,p.start=o[o.length-1].end,p.end=p.start+t[s-1].length+1,p.text=t[s-1],o.push(p)}return o},e.prototype.setSelection=function(e,t,i){e.setSelectionRange(t,i),e.focus()},e.prototype.save=function(e,t){this.selectionStart=e,this.selectionEnd=t},e.prototype.restore=function(e){this.setSelection(e,this.selectionStart,this.selectionEnd)},e.prototype.isStartWith=function(e,t){var i=!1;e&&(i=(e.trim()===t.trim()?new RegExp("^("+this.replaceSpecialChar(t.trim())+")","gim"):new RegExp("^("+this.replaceSpecialChar(t)+")","gim")).test(e.trim()));return i},e.prototype.replaceSpecialChar=function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/g,"\\$&")},e.prototype.isClear=function(e,t){for(var i=0;i<e.length;i++)if(new RegExp(t,"gim").test(e[i].text))return!0;return!1},e.prototype.getSelectedInlinePoints=function(e){return{start:e.selectionStart,end:e.selectionEnd,text:this.getSelectedText(e)}},e}(),Cw=function(){function e(e){this.toolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,uppercase:!1,inlinecode:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null},this.selection=new bw,this.parent=e,this.element=this.parent.contentModule.getEditPanel(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off("toolbar-refresh",this.onRefreshHandler),this.parent.off("destroy",this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this.selection.getSelectedParentPoints(this.element);this.toolbarStatus={orderedlist:!e.documentNode&&this.isListsApplied(t,"OL"),unorderedlist:!e.documentNode&&this.isListsApplied(t,"UL"),formats:this.currentFormat(t,e.documentNode),bold:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Bold"),italic:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Italic"),inlinecode:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode"),strikethrough:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("StrikeThrough"),subscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SubScript"),superscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SuperScript"),uppercase:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("UpperCase")},this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode")&&(this.toolbarStatus.formats="pre"),this.parent.notify("toolbar-updated",this.toolbarStatus)},e.prototype.isListsApplied=function(e,t){var i=!0;if("OL"===t)for(var s=0;s<e.length;s++){var n=e[s].text.trim().split(" ",2)[0]+" ";if(!/^[\d.]+[ ]+$/.test(n)){i=!1;break}}else for(s=0;s<e.length;s++)if(!this.selection.isStartWith(e[s].text,this.parent.formatter.listTags[t])){i=!1;break}return i},e.prototype.currentFormat=function(e,t){for(var i="p",s=Object.keys(this.parent.formatter.formatTags),n="backward"===this.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<s.length;o++){if("pre"!==s[o]&&this.selection.isStartWith(n,this.parent.formatter.formatTags[s[o]])){i=s[o];break}if("pre"===s[o]&&this.codeFormat()){i=s[o];break}}return i},e.prototype.codeFormat=function(){var e,t=!1,i=this.parent.inputElement,s=i.selectionStart,n=(e=s,function(t){return[t.slice(0,e),t.slice(e)]})(i.value),o=this.parent.formatter.formatTags.pre,r=this.getSelectedText(i);if(""!==r&&r===r.toLocaleUpperCase())return!0;if(""===r){var a=i.value.substr(n[0].length-1,1),l=n[1].substr(0,1);if(""!==a&&""!==l&&a.match(/[a-z]/i)&&a===a.toLocaleUpperCase()&&l===l.toLocaleUpperCase())return!0}return this.isCode(n[0],o)&&this.isCode(n[1],o)&&n[0].match(this.multiCharRegx(o)).length%2==1&&n[1].match(this.multiCharRegx(o)).length%2==1&&(t=!0),t},e.prototype.getSelectedText=function(e){return e.value.substring(e.selectionStart,e.selectionEnd)},e.prototype.isCode=function(e,t){return-1!==e.search("\\"+t)},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e}(),Sw=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("execCommandCallBack",this.commandCallBack,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.notify("toolbar-refresh",{args:e}),this.parent.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.off("execCommandCallBack",this.commandCallBack),this.parent.off("destroy",this.removeEventListener)},e}(),xw=function(){function e(){}return e.prototype.process=function(e,t,i,s){var n,o=this,r=e.contentModule.getDocument().getSelection(),a=r.rangeCount>0?r.getRangeAt(r.rangeCount-1):null;if("HTML"===e.editorMode&&(n=this.editorManager.nodeSelection.save(a,e.contentModule.getDocument())),ae(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||"Files"===t.item.command||!a||e.contentModule.getEditPanel().contains(this.getAncestorNode(a.commonAncestorContainer))||e.contentModule.getEditPanel()===a.commonAncestorContainer||e.contentModule.getPanel()===a.commonAncestorContainer){if(ae(t)){var l=i.action;if("tab"!==l&&"enter"!==l&&"space"!==l&&"escape"!==l){t={},"Markdown"===e.editorMode&&"insert-table"===l&&(s={headingText:e.localeObj.getConstant("TableHeadingText"),colText:e.localeObj.getConstant("TableColText")});var h={originalEvent:i,cancel:!1,requestType:l||i.key+"Key",itemCollection:s};re(t,t,h,!0),ye()&&(delete t.item,delete t.itemCollection),e.trigger("actionBegin",t,function(e){e.cancel&&("paste"!==l&&"cut"!==l&&"copy"!==l||i.preventDefault())})}var c=!!ae(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===i.which&&c||9!==i.which)&&this.editorManager.observer.notify("keydown"===i.type?"keydown":"keyup",{event:i,callBack:this.onSuccess.bind(this,e),value:s})}else!ae(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(re(t,t,{requestType:t.item.subCommand,cancel:!1,itemCollection:s},!0),e.trigger("actionBegin",t,function(r){if(!r.cancel){0===o.getUndoRedoStack().length&&"Links"!==r.item.command&&"Images"!==r.item.command&&o.saveData(),e.isBlur=!1,e.contentModule.getEditPanel().focus(),"HTML"===e.editorMode&&n.restore();var a=r.item.subCommand.toLocaleLowerCase();"paste"===a||"cut"===a||"copy"===a?e.clipboardAction(a,i):(o.editorManager.observer.notify("checkUndoStack",{subCommand:r.item.subCommand}),o.editorManager.execCommand(r.item.command,r.item.subCommand,i,o.onSuccess.bind(o,e),r.item.value,"Pre"===r.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:s,"#"+e.getID()+" iframe"))}}));(ae(i)||i&&"copy"!==i.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var i=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){e.notify("content-changed",{}),i.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){e.notify("content-changed",{}),t&&(ae(t.event)||"copy"!==t.event.action)&&(this.enableUndo(e),e.notify("execCommandCallBack",t)),e.trigger("actionComplete",t,function(t){if(e.setPlaceHolder(),"Images"===t.requestType||"Links"===t.requestType&&"HTML"===e.editorMode){var i=t;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.notify("insertCompleted",{args:i.event,type:t.requestType,isNotify:!0,elements:i.elements})}e.autoResize()})},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){var t=this.getUndoStatus();!e.inlineMode.enable||bt.isDevice&&!zx()?e.toolbarModule&&(Yx(e.toolbarModule.baseToolbar,t),e.trigger("toolbarStatusUpdate",t)):(Yx(e.quickToolbarModule.inlineQTBar.quickTBarObj,t),e.trigger("toolbarStatusUpdate",t))},e}(),ww=function(){function e(e){re(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("lists-commands",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("keyup-handler",this.keyUpHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.which){case 9:this.tabKey(e)}switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.keyUpHandler=function(e){switch(e.event.which){case 13:this.enterKey(e)}},e.prototype.tabKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n=this.selection.getSelectedParentPoints(t),o=0,r=this.isNotFirstLine(t,n[0]);if(r||e.event.shiftKey){var a=this.olListType(),l=this.getListRegex();this.currentAction=this.getAction(n[0].text);for(var h=0;h<n.length;h++){var c=(e.event.shiftKey,n[h].line-1),p=this.selection.getLine(t,c);if(p&&(!e.event.shiftKey&&r||e.event.shiftKey)){var d=p.split(". "),u=e.event.shiftKey?-"\t".length:"\t".length,m=n[h].text.split("\t");if(e.event.shiftKey&&1===m.length)break;if("OL"===this.currentAction&&/^\d+$/.test(d[0].trim())&&a){e.event.preventDefault(),n[h].text=e.event.shiftKey?m.splice(1,m.length).join("\t"):"\t"+n[h].text;var f=this.getTabSpace(n[h].text),g=this.getTabSpace(p),v=n[h].text.split(". ");if(f===g)this.changeTextAreaValue(v,this.nextOrderedListValue(d[0].trim()),e,t,n,h,s);else if(g<f)this.changeTextAreaValue(v,"1. ",e,t,n,h,s);else for(;g.length>f.length;null){c-=1;var y=(p=this.selection.getLine(t,c)).trim().split(". ");if(/^\d+$/.test(y[0])&&(g=this.getTabSpace(p)).length<=f.length){this.changeTextAreaValue(v,this.nextOrderedListValue(y[0]),e,t,n,h,s);break}}}else("UL"===this.currentAction&&l.test(p.trim())||!a)&&(e.event.preventDefault(),n[h].text=e.event.shiftKey?m.splice(1,m.length).join("\t"):"\t"+n[h].text,t.value=t.value.substr(0,n[h].start)+n[h].text+"\n"+t.value.substr(n[h].end,t.value.length));if(i=0===h?i+u:i,o+=u,1!==n.length)for(var b=h;b<n.length;b++)n[b].start=0!==b?n[b].start+u:n[b].start,n[b].end=n[b].end+u}}this.restore(t,i,s+o,e)}else this.restore(t,i,s+o,e)},e.prototype.changeTextAreaValue=function(e,t,i,s,n,o,r){var a=t;e.splice(0,1);var l,h=this.selection.getAllParents(s.value).length,c="",p=this.getTabSpace(n[o].text),d=parseInt(a.split(".")[0],null),u=this.getTabSpace(n[o].text),m=!0,f=!0,g=-1,v=!0,y=0,b="";c=""!==this.selection.getLine(s,n[0].line+1)?"":c+s.value.substr(n[0].end,s.value.length);for(var C=1;C<h&&!ae(this.selection.getLine(s,n[0].line+C))&&""!==this.selection.getLine(s,n[0].line+C);C++){var S=this.selection.getLine(s,n[0].line+C),x=this.getTabSpace(S),w=S.split(". ");if(1===w.length){c+=s.value.substr(n[0].end+y,s.value.length);break}y+=S.length;var E=!1;if(l=i.event.shiftKey?p.length+1:p.length-1,x.length>u.length&&(v=!1),p.length!==x.length&&x.length<u.length?(f=!0,m=!1,E=!(!i.event.shiftKey||p.length!==x.length)&&(f=!1,!0)):v&&i.event.shiftKey&&p.length===x.length&&x.length===u.length&&(f=!1,E=!0),b=""===c?"":"\n",l===x.length&&f){var k=i.event.shiftKey?(g++,this.nextOrderedListValue(g.toString())):this.previousOrderedListValue(w[0]);w.splice(0,1),c=c+b+x+k+w.join(". ")}else if(p.length===x.length&&m||E){k=this.nextOrderedListValue(d.toString());d++,w.splice(0,1),c=c+b+x+k+w.join(". ")}else c=c+b+S,f=!1;u=this.getTabSpace(S)}n[o].text=this.getTabSpace(n[o].text)+a+e.join(". ")+"\n",s.value=s.value.substr(0,n[o].start)+n[o].text+c},e.prototype.getTabSpace=function(e){for(var t=e.split("\t"),i="",s=0;s<t.length&&""===t[s];s++)i+="\t";return i},e.prototype.isNotFirstLine=function(e,t){var i,s=t.text,n=t.line-1,o=this.selection.getLine(e,n),r=this.getListRegex(),a=!1;if(o){this.currentAction=this.getAction(o);var l=o.split(". ");i="OL"===this.currentAction?/^\d+$/.test(l[0].trim()):r.test(o.trim())}if(o&&i){var h=this.getTabSpace(s),c=this.getTabSpace(o);for(a=h===c||a;c.length>h.length;null){n-=1;l=(o=this.selection.getLine(e,n)).trim().split(". ");if(("OL"===this.currentAction?/^\d+$/.test(l[0]):r.test(o.trim()))&&(c=this.getTabSpace(o)).length<=h.length){a=!0;break}}}return a},e.prototype.getAction=function(e){var t=e.split(". ")[0],i=/^\d+$/.test(t.trim()),s=e.trim().split(new RegExp("^("+this.selection.replaceSpecialChar(this.syntax.UL).trim()+")"))[1];return i?"OL":s?"UL":"NOTLIST"},e.prototype.nextOrderedListValue=function(e){return(parseInt(e,null)+1).toString()+". "},e.prototype.previousOrderedListValue=function(e){return(parseInt(e,null)-1).toString()+". "},e.prototype.enterKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n=this.selection.getSelectedParentPoints(t),o=this.selection.getLine(t,n[0].line-1),r=this.olListType(),a=this.getListRegex(),l=[];ae(o)||(l=o.split(". "),this.currentAction=this.getAction(o));var h=0;if("OL"===this.currentAction&&l.length>1&&/^\d+$/.test(l[0].trim())&&r&&""!==l[1]){var c=this.getTabSpace(o);this.currentAction=this.getAction(o);var p=this.nextOrderedListValue(l[0]);n[0].text=c+p+n[0].text;for(var d=this.selection.getAllParents(t.value).length,u="\n",m=this.getTabSpace(o),f=this.getTabSpace(n[0].text),g=!0,v=1;v<d&&""!==t.value.substr(n[0].end,t.value.length);v++){var y=this.selection.getLine(t,n[0].line+v);if(ae(y))u+="";else{var b=y.split(". "),C=this.getTabSpace(y);if(C.length<f.length&&(g=!1),b.length>1&&/^\d+$/.test(b[0].trim())&&m.length===C.length&&g){var S=this.nextOrderedListValue(b[0]);b.splice(0,1),u=u+C+S+b.join(". ")+"\n"}else u=u+y+"\n",f=this.getTabSpace(y)}}t.value=t.value.substr(0,n[0].start)+m+p+this.selection.getLine(t,n[0].line)+u,i=i+p.length+c.length,h+=p.length+c.length}else if("UL"===this.currentAction&&a.test(o.trim())&&""!==o.trim().replace(a,"")||"OL"===this.currentAction&&!r){c=this.getTabSpace(o),p=this.syntax[this.currentAction];n[0].text=c+p+n[0].text+(n[0].text.trim().length>0?"\n":""),t.value=t.value.substr(0,n[0].start)+n[0].text+t.value.substr(n[0].end,t.value.length),i=i+p.length+c.length,h+=p.length+c.length}this.restore(t,i,s+h,e)},e.prototype.olListType=function(){var e=this.syntax.OL.split(".,");return(1===e.length?null:parseInt(e[2].trim(),null)-parseInt(e[0].trim(),null))?1:0},e.prototype.applyListsHandler=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd),this.currentAction=e.subCommand;var i,s,n=t.selectionStart,o=t.selectionEnd,r=0,a=0,l=0,h=this.selection.getSelectedParentPoints(t),c="";i=this.olListType();for(var p={},d=0;d<h.length;d++)if(s=i?"OL"===this.currentAction?d+i+". ":this.syntax[this.currentAction]:"OL"===this.currentAction?this.syntax.OL:this.syntax[this.currentAction],this.selection.isStartWith(h[d].text,s))h[d].text=h[d].text.replace(s,""),t.value=t.value.substr(0,h[d].start+l)+h[d].text+"\n"+t.value.substr(h[d].end+l,t.value.length),l-=s.length,a=s.length,this.restore(t,n-a,o+l,null);else{if(""===h[d].text&&0===d&&(this.selection.save(n,o),1!==h.length))for(var u=d;u<h.length;u++)h[u].start=0!==u?1+h[u].start:h[u].start,h[u].end=1+h[u].end;var m=ae(h[d-1])?0:this.getTabSpace(h[d-1].text).length,f=this.appliedLine(h[d].text,s,p,m);if(c=f.line?c:s,h[d].text=f.line?f.line:c+h[d].text,f.space=f.space?f.space:0,t.value=t.value.substr(0,h[d].start+l)+h[d].text+"\n"+t.value.substr(h[d].end,t.value.length),n=0===d?n+c.length+f.space>0?n+c.length+f.space:0:n,r+=c.length+f.space,1!==h.length)for(u=d;u<h.length;u++)h[u].start=0!==u?c.length+h[u].start+f.space:h[u].start,h[u].end=c.length+h[u].end+f.space;this.restore(t,n,o+r,null)}this.restore(t,null,null,e)},e.prototype.appliedLine=function(e,t,i,s){var n={},o=new RegExp("^["+this.syntax.UL.trim()+"]"),r=e.split(". "),a=r[0]+". ",l=o.test(e.trim())||e.trim()===this.syntax.OL.trim()||e.trim()===this.syntax.UL.trim()||/^\d+$/.test(r[0].trim()),h=this.olListType(),c=this.getTabSpace(e).length;if("OL"===this.currentAction&&h&&(i[c.toString()]=ae(i[c.toString()])?1:i[c.toString()].valueOf()+1,t=i[c.toString()].valueOf().toString()+". ",!ae(s)&&s>c&&(i[s.toString()]=0)),l){var p=void 0,d=void 0;o.test(e.trim())?(d=this.syntax.UL,p=t,n.space=t.trim().length-this.syntax.UL.trim().length):/^\d+$/.test(r[0].trim())&&h?(d=r[0].trim()+". ",p=t,n.space=this.syntax.UL.trim().length-a.trim().length):/^\d+$/.test(r[0].trim())&&(d=r[0].trim()+". ",p=this.syntax.UL,n.space=this.syntax.UL.trim().length-a.trim().length),n.line=e.replace(d,p)}return n},e.prototype.restore=function(e,t,i,s){ae(t)||ae(t)||this.selection.save(t,i),ae(s)||this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.getListRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length;i++){var s=this.selection.replaceSpecialChar(this.syntax[t[i]]);e+=""===e?"^("+s+")|^("+s.trim()+")":"|^("+s+")|^("+s.trim()+")"}return new RegExp(e)},e}(),Ew=function(){function e(e){re(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this)},e.prototype.applyFormats=function(e){e.subCommand=e.subCommand.toLowerCase();var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=this.selection.getSelectedParentPoints(t);if(this.isAppliedFormat(i)===e.subCommand){if("pre"===e.subCommand){if(!(i.length>1))return;this.applyCodeBlock(t,e,i)}return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e)}if("p"===e.subCommand)return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e);("pre"===e.subCommand&&1!==i.length||"pre"!==e.subCommand)&&this.cleanFormat(t,e.subCommand);var s=t.selectionStart,n=t.selectionEnd,o=0;if(i=this.selection.getSelectedParentPoints(t),"pre"!==e.subCommand){for(var r=0;r<i.length;r++)if(""===i[r].text||this.selection.isStartWith(i[r].text,"\\"+this.syntax[e.subCommand])){if(""===i[r].text&&0===r&&(this.selection.save(s,n),1!==i.length))for(a=r;a<i.length;a++)i[a].start=0!==a?1+i[a].start:i[a].start,i[a].end=1+i[a].end}else if(i[r].text=this.syntax[e.subCommand]+i[r].text,t.value=t.value.substr(0,i[r].start)+i[r].text+"\n"+t.value.substr(i[r].end,t.value.length),s=0===r?s+this.syntax[e.subCommand].length:s,o+=this.syntax[e.subCommand].length,1!==i.length)for(var a=r;a<i.length;a++)i[a].start=0!==a?this.syntax[e.subCommand].length+i[a].start:i[a].start,i[a].end=this.syntax[e.subCommand].length+i[a].end;this.restore(t,s,n+o,e)}else i.length>1?this.applyCodeBlock(t,e,i):(re(e,e,{subCommand:"InlineCode"},!0),this.parent.observer.notify("command-type",e))},e.prototype.clearRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length&&"pre"!==t[i]&&"p"!==t[i];i++)e+=""===e?"^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")":"|^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")";return e},e.prototype.cleanFormat=function(e,t){var i=this.selection.getSelectedParentPoints(e),s=e.selectionStart,n=e.selectionEnd,o=0;if(this.selection.isClear(i,this.clearRegex())){for(var r=0;r<i.length;r++){for(var a=Object.keys(this.syntax),l=0;""!==i[r].text&&l<a.length;l++){var h=this.syntax[a[l]];if(a[l]!==t){var c=new RegExp("^("+this.selection.replaceSpecialChar(h)+")","gim");if(c.test(i[r].text)){if(i[r].text=i[r].text.replace(c,""),e.value=e.value.substr(0,i[r].start)+i[r].text+"\n"+e.value.substr(i[r].end,e.value.length),s=0===r?s-h.length>0?s-h.length:0:s,o+=h.length,1!==i.length)for(var p=0;p<i.length;p++)i[p].start=0!==p?i[p].start-h.length:i[p].start,i[p].end=i[p].end-h.length;break}}}if(""===i[r].text&&0===r&&(this.selection.save(s,n),1!==i.length))for(l=r;l<i.length;l++)i[l].start=0!==l?1+i[l].start:i[l].start,i[l].end=1+i[l].end}this.restore(e,s,n-o)}},e.prototype.applyCodeBlock=function(e,t,i){var s=t.subCommand,n=i[0].start,o=i[i.length-1].end,r=this.selection.getAllParents(e.value),a=r[i[0].line-1],l=r[i.length+1+1];if(this.selection.isStartWith(a,this.syntax.pre.split("\n")[0])||this.selection.isStartWith(l,this.syntax.pre.split("\n")[0])){var h=this.syntax[s],c=this.parent.markdownSelection.getSelectedInlinePoints(e),p=e.value.substr(0,e.selectionStart).lastIndexOf(h),d=e.value.substr(e.selectionEnd,e.selectionEnd).indexOf(h);d+=c.end;var u=this.replaceAt(e.value.substr(0,c.start),h,"",p,c.start),m=this.replaceAt(e.value.substr(c.end,e.value.length),h,"",0,d);e.value=u+c.text+m,n=this.selection.selectionStart-h.length,o=this.selection.selectionEnd-h.length}else{var f=e.value.substring(n,o).split("\n"),g=""===f[f.length-1]?"":"\n";e.value=e.value.substr(0,n)+this.syntax[s]+e.value.substring(n,o)+g+this.syntax[s]+e.value.substr(o,e.value.length),n=this.selection.selectionStart+this.syntax[s].length,o=this.selection.selectionEnd+this.syntax[s].length-1}this.restore(e,n,o,t)},e.prototype.replaceAt=function(e,t,i,s,n){return e.slice(0,s)+e.slice(s,n).replace(t,i)+e.slice(n)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.isAppliedFormat=function(e,t){for(var i="p",s=(Object.keys(this.syntax),Object.keys(this.syntax)),n="backward"===this.parent.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<s.length;o++){if("pre"!==s[o]&&this.selection.isStartWith(n,this.syntax[s[o]])){i=s[o];break}if("pre"===s[o]){var r=this.selection.getAllParents(this.parent.element.value),a=r[e[0].line-1],l=r[e.length+1];if(this.selection.isStartWith(a,this.syntax[s[o]].split("\n")[0])&&this.selection.isStartWith(l,this.syntax[s[o]].split("\n")[0])){i=s[o];break}}}return i},e}(),kw=function(){function e(e){re(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("command-type",this.applyCommands,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.action){case"bold":this.applyCommands({subCommand:"Bold",callBack:e.callBack}),e.event.preventDefault();break;case"italic":this.applyCommands({subCommand:"Italic",callBack:e.callBack}),e.event.preventDefault();break;case"strikethrough":this.applyCommands({subCommand:"StrikeThrough",callBack:e.callBack}),e.event.preventDefault();break;case"uppercase":this.applyCommands({subCommand:"UpperCase",callBack:e.callBack}),e.event.preventDefault();break;case"lowercase":this.applyCommands({subCommand:"LowerCase",callBack:e.callBack}),e.event.preventDefault();break;case"superscript":this.applyCommands({subCommand:"SuperScript",callBack:e.callBack}),e.event.preventDefault();break;case"subscript":this.applyCommands({subCommand:"SubScript",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.isBold=function(e,t){return-1!==e.search("\\"+t+"\\"+t)},e.prototype.isItalic=function(e,t){return-1!==e.search("\\"+t)},e.prototype.isMatch=function(e,t){var i=[""];switch(t){case this.syntax.Italic:case this.syntax.InlineCode:case this.syntax.StrikeThrough:i=e.match(this.singleCharRegx(t))}return i},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+"\\"+e+")","g")},e.prototype.singleCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e.prototype.isAppliedCommand=function(e){var t,i=!1,s=this.parent.element,n=s.selectionStart,o=(t=n,function(e){return[e.slice(0,t),e.slice(t)]})(s.value),r=this.syntax.Bold.substr(0,1),a=this.syntax.Italic,l=this.parent.markdownSelection.getSelectedText(s);if(""!==l&&l===l.toLocaleUpperCase()&&"UpperCase"===e)return!0;if(""===l){var h=s.value.substr(o[0].length-1,1),c=o[1].substr(0,1);if(""!==h&&""!==c&&h.match(/[a-z]/i)&&h===h.toLocaleUpperCase()&&c===c.toLocaleUpperCase()&&"UpperCase"===e)return!0}return this.isBold(o[0],r)||this.isItalic(o[0],a)||this.isBold(o[1],r)||this.isItalic(o[1],a)||(ae(this.isMatch(o[0],this.syntax.StrikeThrough))||ae(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),ae(this.isMatch(o[0],this.syntax.InlineCode))||ae(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),ae(o[0].match(/\<sub>/g))||ae(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),ae(o[0].match(/\<sup>/g))||ae(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0)),this.isBold(o[0],r)&&this.isBold(o[1],r)&&o[0].match(this.multiCharRegx(r)).length%2==1&&o[1].match(this.multiCharRegx(r)).length%2==1&&"Bold"===e&&(i=!0),o[0]=this.isBold(o[0],r)?o[0].replace(this.multiCharRegx(r),"$%@"):o[0],o[1]=this.isBold(o[1],r)?o[1].replace(this.multiCharRegx(r),"$%@"):o[1],ae(this.isMatch(o[0],this.syntax.Italic))||ae(this.isMatch(o[1],this.syntax.Italic))||this.isMatch(o[0],this.syntax.Italic).length%2!=1||this.isMatch(o[1],this.syntax.Italic).length%2!=1||"Italic"!==e||(i=!0),ae(this.isMatch(o[0],this.syntax.StrikeThrough))||ae(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),ae(this.isMatch(o[0],this.syntax.InlineCode))||ae(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),ae(o[0].match(/\<sub>/g))||ae(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),ae(o[0].match(/\<sup>/g))||ae(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0),i},e.prototype.applyCommands=function(e){this.currentAction=e.subCommand;var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n=0,o=this.parent.markdownSelection.getSelectedInlinePoints(t);if(this.isAppliedCommand(e.subCommand)&&""!==o.text){var r=this.syntax[e.subCommand],a="SubScript"===e.subCommand?"</sub>":"SuperScript"===e.subCommand?"</sup>":this.syntax[e.subCommand],l="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:r.length,h=t.value.substr(0,o.start).lastIndexOf(r),c=t.value.substr(o.end,t.value.length).indexOf(a);c+=o.end;var p=this.replaceAt(t.value.substr(0,o.start),r,"",h,o.start),d=this.replaceAt(t.value.substr(o.end,t.value.length),a,"",0,c);return t.value=p+o.text+d,void this.restore(t,i-l,s-l,e)}if(""===o.text||this.isApplied(o,e.subCommand))"UpperCase"!==e.subCommand&&"LowerCase"!==e.subCommand?("SubScript"===e.subCommand||"SuperScript"===e.subCommand?(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5)):(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand]),t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),n=this.syntax[e.subCommand].length,o.start===o.end?this.restore(t,i+n,s+n,e):this.restore(t,i+n,s-n,e)):this.restore(t,i,s,e);else{n="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:this.syntax[e.subCommand].length;var u=t.value.substr(o.start-this.syntax[e.subCommand].length,this.syntax[e.subCommand].length),m=void 0;if(u===e.subCommand||o.start-this.syntax[e.subCommand].length===t.value.indexOf(this.syntax[e.subCommand])&&(o.end===t.value.lastIndexOf(this.syntax[e.subCommand])||o.end===t.value.lastIndexOf("</"+this.syntax[e.subCommand].substring(1,5)))){m="SubScript"===e.subCommand||"SuperScript"===e.subCommand?t.value.substr(o.end,this.syntax[e.subCommand].length+1):t.value.substr(o.end,this.syntax[e.subCommand].length);p=this.replaceAt(t.value.substr(0,o.start),u,"",o.start-this.syntax[e.subCommand].length,o.start),d=this.replaceAt(t.value.substr(o.end,t.value.length),m,"",0,m.length);t.value=p+o.text+d,this.restore(t,i-n,s-n,e)}else"SubScript"===e.subCommand||"SuperScript"===e.subCommand?o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5):"UpperCase"===e.subCommand||"LowerCase"===e.subCommand?o.text="UpperCase"===e.subCommand?o.text.toUpperCase():o.text.toLowerCase():o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand],t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),this.restore(t,i+n,s+n,e)}this.parent.undoRedoManager.saveData()},e.prototype.replaceAt=function(e,t,i,s,n){return e.slice(0,s)+e.slice(s,n).replace(t,i)+e.slice(n)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.textReplace=function(e,t){var i=this.singleCharRegx(this.syntax[t]);switch(t){case"Bold":i=this.multiCharRegx(this.syntax[t].substr(0,1)),e=e.replace(i,"");break;case"Italic":if(this.isBold(e,this.syntax[t].substr(0,1))){var s=this.multiCharRegx(this.syntax[t].substr(0,1)),n=e;n=n.replace(s,"$%@").replace(i,"");var o=new RegExp("\\$%@","g");e=n.replace(o,this.syntax[t].substr(0,1)+this.syntax[t].substr(0,1))}else e=e.replace(i,"");break;case"StrikeThrough":case"InlineCode":e=e.replace(i,"");break;case"SubScript":e=e.replace(/<sub>/g,"").replace(/<\/sub>/g,"");break;case"SuperScript":e=e.replace(/<sup>/g,"").replace(/<\/sup>/g,"")}return e},e.prototype.isApplied=function(e,t){var i=this.singleCharRegx(this.syntax[t]);switch(t){case"SubScript":case"SuperScript":return(i=this.singleCharRegx(this.syntax[t])).test(e.text);case"Bold":case"StrikeThrough":return(i=this.multiCharRegx(this.syntax[t].substr(0,1))).test(e.text);case"UpperCase":case"LowerCase":return(i=new RegExp("^["+this.syntax[t]+"]*$","g")).test(e.text);case"Italic":var s=void 0,n=this.multiCharRegx(this.syntax[t].substr(0,1));if(n.test(e.text)){var o=e.text;o=o.replace(n,"$%#"),s=i.test(o)}else s=i.test(e.text);return s;case"InlineCode":return i.test(e.text)}},e}(),Tw={h6:"###### ",h5:"##### ",h4:"#### ",h3:"### ",h2:"## ",h1:"# ",blockquote:"> ",pre:"```\n",p:""},Lw={Bold:"**",Italic:"*",StrikeThrough:"~~",InlineCode:"`",SubScript:"<sub>",SuperScript:"<sup>",UpperCase:"A-Z",LowerCase:"a-z"},Dw={OL:"1. ",UL:"- "},Iw={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46"},Ow={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=","full-screen":"ctrl+shift+f","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o"},Aw={b:["strong"],strong:["b"],i:["emp","cite"],emp:["i","cite"],cite:["i","emp"]},Mw=["BR","IMG"],Pw=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=ae(t)?30:t.undoRedoSteps,this.undoRedoTimer=ae(t)?300:t.undoRedoTimer,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){var e=ce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){var e=ce(this.keyUp,300);this.parent.observer.off("keyup-handler",e),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction),this.parent.observer.off("model_changed_plugin",this.onPropertyChanged)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n={text:this.parent.element.value,start:i,end:s};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].start===i&&this.undoRedoStack[this.undoRedoStack.length-1].end===s||(this.undoRedoStack.push(n),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){this.currentAction="Undo";var t=this.undoRedoStack[this.steps-1].start,i=this.undoRedoStack[this.steps-1].end,s=this.undoRedoStack[this.steps-1].text;this.parent.element.value=s,this.parent.element.focus(),this.steps--,this.restore(this.parent.element,t,i,e)}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){this.currentAction="Redo";var t=this.undoRedoStack[this.steps+1].start,i=this.undoRedoStack[this.steps+1].end;this.parent.element.value=this.undoRedoStack[this.steps+1].text,this.parent.element.focus(),this.steps++,this.restore(this.parent.element,t,i,e)}},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),Nw=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("link-commands",this.createLink,this)},e.prototype.createLink=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,s=t.selectionEnd,n="Image"===e.subCommand?this.selection.getSelectedText(t):e.item.text,o="Image"===e.subCommand?i+2:i+1,r="Image"===e.subCommand?s+2:s+1;n="Image"===e.subCommand?"!["+n+"]("+e.item.url+")":"["+n+"]("+e.item.url+")",t.value=t.value.substr(0,i)+n+t.value.substr(s,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e}(),Rw=function(){function e(e){re(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-table",this.createTable,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("insert-table",this.createTable),this.parent.observer.off("keydown-handler",this.onKeyDown)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onKeyDown=function(e){"insert-table"===e.event.action&&(e.item=e.value,this.createTable(e))},e.prototype.createTable=function(e){this.element=this.parent.element;var t,i=this.element.selectionStart,s=this.element.selectionEnd;t=this.element.value,this.locale=e,this.selection.save(i,s),this.restore(this.element.selectionStart,this.element.selectionEnd,null),this.insertTable(i,s,t,e)},e.prototype.getTable=function(){var e="";return e+=this.textNonEmpty(),e+=this.tableHeader(this.locale),e+=this.tableCell(this.locale)},e.prototype.tableHeader=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var s=1;s<=2;s++)t+=1===i?e.item.headingText+" "+s+"|":"---------|";t+=this.insertLine()}return t},e.prototype.tableCell=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var s=1;s<=2;s++)t+=e.item.colText+" "+this.convertToLetters(i)+s+"|";t+=this.insertLine()}return t+=this.insertLine()},e.prototype.insertLine=function(){var e=document.createElement("div");return e.innerHTML="\n",e.textContent},e.prototype.insertTable=function(e,t,i,s){var n=this.selection.getSelectedParentPoints(this.element),o=n[n.length-1].text.split(" ",2),r=this.getFormatTag();o.length<2?(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)):this.ensureFormatApply(n[n.length-1].text)?this.checkValid(e,t,this.getTable(),i,s,o,n,r):(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)),this.restore(this.element.selectionStart,this.element.selectionEnd,s)},e.prototype.makeSelection=function(e,t,i){i=t+(e.length>0?12:10),t+=e.length>0?3:1,this.selection.setSelection(this.element,t,i)},e.prototype.getFormatTag=function(){for(var e=Object.keys(this.syntaxTag.Formats),t=Object.keys(this.syntaxTag.List),i=[],s=0;s<e.length;s++)i.push(this.syntaxTag.Formats[e[s]]);for(var n=0;n<t.length;n++)i.push(this.syntaxTag.List[t[n]]);return i},e.prototype.ensureFormatApply=function(e){for(var t=this.getFormatTag(),i=e.trim().split(" ",2)[0]+" ",s=0;s<t.length;s++)if(i===t[s]||/^[\d.]+[ ]+$/.test(i))return!0;return!1},e.prototype.ensureStartValid=function(e,t){for(var i=t[0].text.split(" ",2),s=e+1;s<=e+i[0].length+1;s++)if(this.element.selectionStart===s||this.element.selectionEnd===s)return!1;return!0},e.prototype.ensureEndValid=function(e,t){for(var i=e+1;i<=e+t+1;i++)if(this.element.selectionEnd===i)return!1;return!0},e.prototype.updateValueWithFormat=function(e,t){var i=this.element.value.substring(this.element.selectionEnd,this.element.value.length);return t+=i.replace(i,e[0]+" "+i),this.element.value.substr(0,this.element.selectionStart)+t},e.prototype.updateValue=function(e){return this.element.value.substr(0,this.element.selectionStart)+e+this.element.value.substr(this.element.selectionEnd,this.element.value.length)},e.prototype.checkValid=function(e,t,i,s,n,o,r,a){this.ensureStartValid(r[0].start,r)&&this.ensureEndValid(r[r.length-1].start,o[0].length)&&(e===r[0].start?e!==t&&t!==r[r.length-1].end-1?this.element.value=this.updateValueWithFormat(o,i):this.element.value=this.updateValue(i):t===r[r.length-1].end-1?this.element.value=this.updateValue(i):this.element.value=this.updateValueWithFormat(o,i),this.makeSelection(s,e,t))},e.prototype.convertToLetters=function(e){var t="A".charCodeAt(0),i="";do{e-=1,i=String.fromCharCode(t+e%26)+i,e=e/26>>0}while(e>0);return i},e.prototype.textNonEmpty=function(){var e="";return(this.isCursorBased()||this.isSelectionBased())&&this.element.value.length>0&&(e+=this.insertLine(),e+=this.insertLine()),e},e.prototype.isCursorBased=function(){return this.element.selectionStart===this.element.selectionEnd},e.prototype.isSelectionBased=function(){return this.element.selectionStart!==this.element.selectionEnd},e.prototype.restore=function(e,t,i){this.selection.save(e,t),this.selection.restore(this.element),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(this.element),editorMode:"Markdown",event:i.event})},e}(),Bw=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-commands",this.clear,this)},e.prototype.replaceRegex=function(e){return e.replace(/\*/gi,"\\*").replace(/\&/gi,"\\&").replace(/\-/gi,"\\-").replace(/\^/gi,"\\^").replace(/\$/gi,"\\$").replace(/\./gi,"\\.").replace(/\|/gi,"\\|").replace(/\?/gi,"\\?").replace(/\+/gi,"\\+").replace(/\-/gi,"\\-").replace(/\&/gi,"\\&")},e.prototype.clearSelectionTags=function(e){for(var t=this.parent.selectionTags,i=Object.keys(t),s=0;s<i.length;s++){var n=i[s];if(t.hasOwnProperty(n)&&""!==t[n]){var o,r,a=this.replaceRegex(t[n]),l=void 0;l="<sup>"===t[n]?new RegExp("<sup>(.*?)</sup>","ig"):"<sub>"===t[n]?new RegExp("<sub>(.*?)</sub>","ig"):new RegExp(a+"(.*?)"+a,"ig"),o=t[n].length,r="<sup>"===t[n]||"<sub>"===t[n]?t[n].length+1:t[n].length;for(var h=e.match(l),c=0;h&&c<h.length&&""!==h[c];c++)e=e.replace(h[c],h[c].substr(o,h[c].length-r-o))}}return e},e.prototype.clearFormatTags=function(e){var t=e.split("\n");return this.clearFormatLines(t)},e.prototype.clearFormatLines=function(e){for(var t=[this.parent.formatTags,this.parent.listTags],i="",s=0;s<e.length;s++){for(var n=0;n<t.length;n++)for(var o=t[n],r=Object.keys(o),a=0;a<r.length;a++){var l=r[a];o.hasOwnProperty(l)&&""!==o[l]&&0===e[s].indexOf(o[l])&&(e[s]=e[s].replace(o[l],""),e[s]=this.clearFormatLines([e[s]]))}i=i+e[s]+(s!==e.length-1?"\n":"")}return i},e.prototype.clear=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,s=t.selectionEnd,n=this.selection.getSelectedText(t);n=this.clearSelectionTags(n),n=this.clearFormatTags(n),t.value=t.value.substr(0,i)+n+t.value.substr(s,t.value.length),this.parent.markdownSelection.setSelection(t,i,i+n.length),this.restore(t,i,i+n.length,e)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e}(),Hw=function(){function e(e){this.initialize(),re(this,this,e,!0),this.observer=new We(this),this.markdownSelection=new bw,this.listObj=new ww({parent:this,syntax:this.listTags}),this.formatObj=new Ew({parent:this,syntax:this.formatTags}),this.undoRedoManager=new Pw(this,e.options),this.mdSelectionFormats=new kw({parent:this,syntax:this.selectionTags}),this.linkObj=new Nw(this),this.tableObj=new Rw({parent:this,syntaxTag:{Formats:this.formatTags,List:this.listTags}}),this.clearObj=new Bw(this),this.wireEvents()}return e.prototype.initialize=function(){this.formatTags=Tw,this.listTags=Dw,this.selectionTags=Lw},e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,i,s,n,o){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("lists-commands",{subCommand:t,event:i,callBack:s});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:s});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:s});break;case"style":case"effects":case"casing":this.observer.notify("command-type",{subCommand:t,event:i,callBack:s});break;case"links":case"images":this.observer.notify("link-commands",{subCommand:t,event:i,callBack:s,item:o});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("insert-table",{subCommand:t,item:o,event:i,callBack:s})}break;case"clear":this.observer.notify("clear-commands",{subCommand:t,event:i,callBack:s})}},e}(),Fw=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),jw=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),re(i,i,t,!0),t&&i.element&&i.updateFormatter(i.element,document,t.options),i}return Fw(t,e),t.prototype.initialize=function(){this.keyConfig=Ow,this.formatTags=Tw,this.listTags=Dw,this.selectionTags=Lw},t.prototype.updateFormatter=function(e,t,i){e&&(this.editorManager=new Hw({element:e,formatTags:this.formatTags,listTags:this.listTags,selectionTags:this.selectionTags,options:i}))},t}(xw),Vw=function(){function e(e){this.parent=e}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement("div",{id:this.parent.getID()+"_view",className:"e-rte-content"});this.editableElement=this.parent.createElement("textarea",{className:"e-content",id:this.parent.getID()+"_editable-content"}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().value},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),zw=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.saveSelection=new bw,this.parent.on("initial-load",this.instantiateRenderer,this),this.parent.on("initial-end",this.render,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.on("markdown-toolbar-click",this.onToolbarClick,this),this.parent.on("destroy",this.destroy,this),this.parent.on("selectAll",this.selectAll,this),this.parent.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.on("selection-save",this.onSelectionSave,this),this.parent.on("selection-restore",this.onSelectionRestore,this),this.parent.on("readOnlyMode",this.updateReadOnly,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(this.parent.contentModule.getEditPanel().setAttribute("readonly","readonly"),bi([this.parent.element],"e-rte-readonly")):(this.parent.contentModule.getEditPanel().removeAttribute("readonly"),Ci([this.parent.element],"e-rte-readonly"))},e.prototype.onSelectionSave=function(){var e=this.parent.contentModule.getEditPanel();this.saveSelection.save(e.selectionStart,e.selectionEnd)},e.prototype.onSelectionRestore=function(e){this.contentRenderer.getEditPanel().focus();var t=this.parent.contentModule.getEditPanel();this.saveSelection.restore(t)},e.prototype.onToolbarClick=function(e){var t,i,s,n=e.item,o=this.parent.contentModule.getEditPanel();switch(o.focus(),i=o.selectionStart,s=o.selectionEnd,t=o.value.substring(i,s),n.subCommand){case"Maximize":this.parent.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.notify("insertLink",{member:"link",args:e,text:t,module:"Markdown"});break;case"Image":this.parent.notify("insertImage",{member:"image",args:e,text:t,module:"Markdown"});break;case"CreateTable":var r={headingText:this.parent.localeObj.getConstant("TableHeadingText"),colText:this.parent.localeObj.getConstant("TableColText")};this.parent.formatter.process(this.parent,e,e.originalEvent,r);break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}},e.prototype.instantiateRenderer=function(){this.renderFactory.addRenderer(nx.Content,new Vw(this.parent))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.render),this.parent.off("model-changed",this.onPropertyChanged),this.parent.off("destroy",this.destroy),this.parent.off("markdown-toolbar-click",this.onToolbarClick),this.parent.off("initial-load",this.instantiateRenderer),this.parent.off("selectAll",this.selectAll),this.parent.off("getSelectedHtml",this.getSelectedHtml),this.parent.off("selection-save",this.onSelectionSave),this.parent.off("selection-restore",this.onSelectionRestore),this.parent.off("readOnlyMode",this.updateReadOnly))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(nx.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};ae(this.parent.formatter)?this.parent.formatter=new jw({element:e,options:t}):this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new Cw(this.parent)),this.parent.notify("bind-on-end",{})},e.prototype.onPropertyChanged=function(e){if(!ae(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),i={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),i)}},e.prototype.getModuleName=function(){return"markdownEditor"},e.prototype.selectAll=function(){this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.contentModule.getEditPanel(),0,this.parent.contentModule.getEditPanel().value.length)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()))},e}(),_w=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],qw=["td","th"],Ww=["table","tbody","td","tfoot","th","thead","tr"],Uw=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),i=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return i.startContainer!==e||i.endContainer!==e||i.startOffset||i.endOffset||(i.setStart(e.body,0),i.collapse(!0)),i},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var i=0;i<t.childNodes.length;i++)if(e.indexOf(t.childNodes[i])>-1)return!0;return!1},e.prototype.getNode=function(e,t,i){return t!==e||3!==e.nodeType&&e.firstChild&&-1===i.indexOf(e.firstChild)&&!this.isChildNode(i,e)?-1===i.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(i,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,i=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if(t===i&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var s=[];do{-1===s.indexOf(t)&&s.push(t),t=this.getNode(t,i,s)}while(t);return s},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var i=0;i<e.length;i++)-1!==e.indexOf(e[i].parentNode)||3===e[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(i,1),i--):3===e[i].nodeType&&(e[i]=e[i].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)"BR"!==e[i].nodeName&&(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,i){var s=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(i||this.rootNode)&&!ae(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),s.push(this.getIndex(e)),e=e.parentNode;return s},e.prototype.setRangePoint=function(e,t,i,s){for(var n=this.rootNode,o=i.length,r=s;o--;null)n=n&&n.childNodes[i[o]];return n&&r>=0&&"html"!==n.nodeName&&e[t?"setStart":"setEnd"](n,r),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var i=this.get(e);i.removeAllRanges(),i.addRange(t)},e.prototype.setSelectionText=function(e,t,i,s,n){var o=e.createRange();o.setStart(t,s),o.setEnd(i,n),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var i=e.createRange();i.selectNode(t),this.setRange(e,i)},e.prototype.setSelectionNode=function(e,t){var i=e.createRange();i.selectNodeContents(t),this.setRange(e,i)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,i){i.surroundContents(t),this.selectRange(e,i)},e.prototype.setCursorPoint=function(e,t,i){var s=e.createRange(),n=e.defaultView.getSelection();s.setStart(t,i),s.collapse(!0),n.removeAllRanges(),n.addRange(s)},e}(),Gw=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Yw(){var e=!1;return bt.isDevice&&bt.isIos&&(e=!0),e}function Xw(e,t){if("BODY"===e.nodeName&&!ae(t)){var i=top.window.document.querySelector(t);ae(i)||i.contentWindow.focus()}}var Kw="e-editor-select-start",Zw="e-editor-select-end",Qw=function(){function e(e,t){this.parent=e,this.nodeSelection=new Uw,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&_w.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},i=e.attributes;if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s];t[n.nodeName]=n.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",i=this.rawAttributes(e),s=Object.keys(i).sort(),n=0;n<s.length;n++){var o=s[n],r=i[o];r.indexOf("'")<0&&r.indexOf('"')>=0?t+=" "+o+"='"+r+"'":r.indexOf('"')>=0&&r.indexOf("'")>=0?t+=" "+o+'="'+(r=r.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+r+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,i=t.length-1;i>=0;i--){var s=t[i];e.removeAttribute(s.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,i){return"<"+e.toLowerCase()+this.attributes(t)+">"+i+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),Ti(e)},e.prototype.parseHTMLFragment=function(e){var t=yi("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;)i.push(e.firstChild),t.insertBefore(e.firstChild,e);return i=i.length>0?i:[e.parentNode],t.removeChild(e),i},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(Kw)||e.childNodes[t-1].classList.contains(Zw))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var i=[],s=0;s<t.length;s++)e.contains(t[s])&&e!==t[s]&&i.push(t[s]);return i},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(var s=0;s<t.rangeCount;s++)i.push(t.getRangeAt(s))}else i=[this.currentDocument.createRange()];return void 0!==e?i[e]:i},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var i,s,n=this.parent.querySelector("."+Kw),o=this.parent.querySelector("."+Zw);if(""===n.textContent&&ae(o)&&"tab"!==t&&(1===n.childNodes.length&&"BR"===n.childNodes[0].nodeName?n.innerHTML="&#65279;&#65279;<br>":n.innerHTML="&#65279;&#65279;"),this.hasClass(n,Kw)&&n.classList.length>1){var r=this.createTagString("p",n,this.encode(n.textContent));this.replaceWith(n,r),(n=this.parent.querySelector("."+Kw)).classList.remove(Kw),i=n.childNodes[0]}else i=this.unWrap(n)[0];if(this.hasClass(o,Zw)&&o.classList.length>1){r=this.createTagString("p",o,this.encode(o.textContent));this.replaceWith(o,r),(o=this.parent.querySelector("."+Zw)).classList.remove(Zw),s=o.childNodes[0]}else s=o?this.unWrap(o)[0]:i;return e.startContainer=e.getNodeArray(i,!0),e.endContainer=e.getNodeArray(s,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,i=t.startContainer.childNodes,s=(i.length>1&&"TABLE"===i[0].nodeName?function(e){var t=e;do{t.childNodes.length>0&&(t=t.childNodes[0])}while(t.childNodes.length>0);return t}(i[t.startOffset+1]):i[t.startOffset])||t.startContainer,n=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(s.nodeType===Node.ELEMENT_NODE&&n.nodeType===Node.ELEMENT_NODE&&(s.contains(n)||n.contains(s))){var o=s.contains(n)?s:n;if(o.nodeType!==Node.TEXT_NODE){for(var r=[],a=[],l=o;o.contains(l);null)r.indexOf(l)<0&&l.childNodes&&l.childNodes.length?(r.push(l),l=l.childNodes[0]):l.nextSibling?l=l.nextSibling:l.parentNode&&(l=l.parentNode,r.push(l)),a.indexOf(l)<0&&(l.nodeType===Node.TEXT_NODE||qw.indexOf(l.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===l.tagName||"IMG"===l.tagName))&&a.push(l);a.length&&(s=s.contains(n)?a[0]:s,n=a[a.length-1])}}if(s!==n){if(s.nodeType!==Node.TEXT_NODE&&("BR"===s.tagName&&qw.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===s.tagName))this.replaceWith(s,this.marker(Kw,this.encode(s.textContent))),t.startContainer.querySelector("."+Kw).appendChild(s);else this.replaceWith(s,this.marker(Kw,this.encode(s.textContent)));if(n.nodeType!==Node.TEXT_NODE&&"BR"===n.tagName&&qw.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(n,this.marker(Zw,this.encode(n.textContent))),t.endContainer.querySelector("."+Zw).appendChild(n);else this.ensureSelfClosingTag(n,Zw,t)}else this.ensureSelfClosingTag(s,Kw,t)},e.prototype.ensureSelfClosingTag=function(e,t,i){var s=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName){this.replaceWith(e,this.marker(Kw,this.encode(e.textContent))),i.startContainer.querySelector("."+Kw).appendChild(e)}else{if("IMG"===e.tagName){var n=document.createElement("p");e.parentElement.insertBefore(n,e),n.appendChild(e),e=n.children[0]}if("TABLE"===e.tagName)if(s=!0,""===e.textContent){var o=e.querySelectorAll("td");e=ae((e=o[o.length-1]).childNodes[0])?e:e.childNodes[0]}else{for(var r=e.lastChild;3!==r.nodeType&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;e=r}for(var a=0;a<Mw.length;a++)e=e.tagName!==Mw[a]||s?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName){this.replaceWith(e,this.marker(Zw,this.encode(e.textContent))),i.endContainer.querySelector("."+Zw).appendChild(e)}else{var l=this.marker(t,"");Ei([this.parseHTMLFragment(l)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var i="<p></p>",s=e.parentNode;qw.indexOf(s.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(i)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(Kw)||e.classList.contains(Zw))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){i="<p></p>";var n=e;e=this.wrap(e,this.parseHTMLFragment(i)),!(n.nodeType===Node.ELEMENT_NODE&&n.firstChild&&"BR"===n.firstChild.nodeName&&(n.classList.contains(Kw)||n.classList.contains(Zw)))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var i=this.getRangePoint(),s=0;s<i.length;s++){var n=void 0,o=i[s],r=this.getSelectedNode(o.startContainer,o.startOffset),a=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(r)&&e.indexOf(r)<0&&e.push(r),(n=this.blockParentNode(r))&&e.indexOf(n)<0)if(qw.indexOf(n.tagName.toLocaleLowerCase())>=0&&("BR"===r.tagName||r.nodeType===Node.TEXT_NODE||r.classList.contains(Kw)||r.classList.contains(Zw))){var l=r.previousSibling&&r.previousSibling.nodeType===Node.TEXT_NODE?r.previousSibling:r;r.nextSibling||r.previousSibling||"BR"!==r.tagName?e.push(this.createTempNode(l)):e.push(l)}else e.push(n);for(var h=[],c=r;c!==a&&c!==this.parent;null)h.indexOf(c)<0&&c.childNodes&&c.childNodes.length?(h.push(c),c=c.childNodes[0]):c&&8!==c.nodeType&&("BR"===c.tagName||c.nodeType===Node.TEXT_NODE&&""!==c.textContent.trim()||c.nodeType!==Node.TEXT_NODE&&(c.classList.contains(Kw)||c.classList.contains(Zw)))&&qw.indexOf(c.parentNode.tagName.toLocaleLowerCase())>=0?c=this.createTempNode(c):c.nextSibling&&8!==c.nextSibling.nodeType&&("BR"===c.nextSibling.tagName||c.nextSibling.nodeType===Node.TEXT_NODE||c.nextSibling.classList.contains(Kw)||c.nextSibling.classList.contains(Zw))&&qw.indexOf(c.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?c=this.createTempNode(c.nextSibling):c.nextSibling?c=c.nextSibling:c.parentNode&&(c=c.parentNode,h.push(c)),e.indexOf(c)<0&&c.nodeType===Node.ELEMENT_NODE&&qw.indexOf(c.parentNode.tagName.toLocaleLowerCase())>=0&&(c.classList.contains(Kw)||c.classList.contains(Zw))&&e.push(this.createTempNode(c)),this.isBlockNode(c)&&this.ignoreTableTag(c)&&h.indexOf(c)<0&&e.indexOf(c)<0&&(c!==a||o.endOffset>0)&&e.push(c),"IMG"===c.nodeName&&"true"===c.parentElement.contentEditable&&e.push(c);(n=this.blockParentNode(a))&&this.ignoreTableTag(n)&&e.indexOf(n)<0&&!ae(n.previousElementSibling)&&"IMG"!==n.previousElementSibling.tagName&&e.push(n)}for(var p=e.length-1;p>0;p--){if((h=this.nodeFinds(e[p],e)).length){var d=e[p].querySelectorAll("ul, ol");if("LI"===e[p].tagName&&d.length>0)continue;e.splice(p,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(Ww.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),Jw=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=ae(e)?null:e.innerText.trim().split(".")[0]+".";if(!ae(i))for(var s=0;s<t.length;s++)if(t[s].test(i))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!ae(e.startContainer.textContent.slice(0,e.startOffset)))for(var i=0;i<t.length;i++)if(t[i].test(e.startContainer.textContent.slice(0,e.startOffset)))return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),s=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),i.previousElementSibling),n=i.nextElementSibling,o=ae(s)?null:s.innerText.trim().substring(0,1),r=ae(n)?null:n.innerText.trim().substring(0,1),a=this.testCurrentList(t),l=this.testList(s),h=this.testList(n);l||h||"*"===o||"*"===r||(a?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"===t.startContainer.textContent.slice(0,t.startOffset)&&(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);i===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&"LI"===i.tagName&&""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)&&(i.textContent="")},e.prototype.backspaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),s=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if((i="BR"===i.nodeName?i.parentElement:i)===(s="BR"===s.nodeName?s.parentElement:s)&&!ae(Mi(i,"li"))&&(""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)||1===i.textContent.length&&8203===i.textContent.charCodeAt(0))&&(i.textContent=""),i===s&&""===i.textContent){if("LI"===i.parentElement.tagName&&"LI"===s.parentElement.tagName)Ti(i);else if(i.closest("ul")||i.closest("ol")){if((n=ae(i.closest("ul"))?i.closest("ol"):i.closest("ul")).firstElementChild===i&&!ae(n.children[1])&&("OL"===n.children[1].tagName||"UL"===n.children[1].tagName))if(n.tagName===n.children[1].tagName){for(;n.children[1].lastChild;)this.parent.domNode.insertAfter(n.children[1].lastChild,n.children[1]);Ti(n.children[1])}else n.parentElement.insertBefore(n.children[1],n)}}else if(!ae(i.firstChild)&&"BR"===i.firstChild.nodeName&&("UL"===i.childNodes[1].nodeName||"OL"===i.childNodes[1].nodeName)){var n;if((n=ae(i.closest("ul"))?i.closest("ol"):i.closest("ul")).tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);Ti(i.childNodes[1])}else n.parentElement.insertBefore(i.children[1],n)}},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&"delete"===e.event.action){var t=(r=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,i=r.startContainer,s=r.endContainer,n=3===i.nodeType?i.parentElement:i,o=3===s.nodeType?s.parentElement:s;"UL"!==t.nodeName&&"OL"!==t.nodeName||n===o||ae(Mi(n,"ul"))&&ae(Mi(n,"ol"))||ae(Mi(o,"ul"))&&ae(Mi(o,"ol"))||t.lastElementChild!==Mi(o,"li")||r.collapsed||Ti(t)}if(9===e.event.which){var r=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(r,this.parent.currentDocument));var a=void 0,l=r.startOffset,h=r.endOffset;if((n=this.parent.domNode.getSelectedNode(r.startContainer,r.startOffset))===(o=this.parent.domNode.getSelectedNode(r.endContainer,r.endOffset))&&("BR"===n.nodeName||"#text"===n.nodeName)&&qw.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),a=this.domNode.blockNodes();for(var c=[],p=!0,d=0;d<a.length;d++)"LI"===a[d].parentNode.tagName?c.push(a[d].parentNode):"LI"===a[d].tagName&&"P"!==a[d].childNodes[0].tagName&&"OL"!==a[d].childNodes[0].tagName&&"UL"!==a[d].childNodes[0].tagName&&c.push(a[d]);c.length>1||c.length&&(0===l&&0===h||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(c[0]),e.event.shiftKey?(this.revertList(c),this.revertClean()):p=this.nestedList(c),p&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var i=e[t].querySelectorAll("ul, ol");if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s].previousSibling;n&&"LI"===n.tagName&&n.appendChild(i[s])}}},e.prototype.noPreviousElement=function(e){var t,i,s=e.querySelectorAll("ol, ul"),n=e.querySelectorAll("li"),o=this.domNode.contents(n[0])[0];if(n.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=n[0]:i=s[0],t)for(var r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){var a=r.nextSibling;wi([r],t),Ri(e,{"list-style-type":"none"}),Ri(t,{"list-style-type":""}),r=a}else if(i){wi([h=yi("li")],i);for(r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){a=r.nextSibling;h.appendChild(r),r=a}wi([i],e.parentNode),Ti(e),wi([l=yi("li",{styles:"list-style-type: none;"})],i.parentNode),Ei([i],l)}else{var l,h;wi([l=yi("li",{styles:"list-style-type: none;"})],e.parentNode),wi([h=yi(e.parentNode.tagName)],l),Ei([e],h)}},e.prototype.nestedList=function(e){for(var t=!1,i=0;i<e.length;i++){var s=this.domNode.getPreviousNode(e[i]);if(s){t=!0;var n=void 0,o=void 0,r=e[i].querySelectorAll("ol, ul"),a=e[i].querySelectorAll("li"),l=this.domNode.contents(a[0])[0];if(a.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=a[0]:n=r[0],n){wi([p=yi("li")],n);for(var h=this.domNode.contents(e[i])[0];h&&!this.domNode.isList(h);null){var c=h.nextSibling;p.appendChild(h),h=c}Ei([n],s),Ti(e[i])}else if(o){if("LI"===s.tagName){for(h=this.domNode.contents(e[i])[0];h&&!this.domNode.isList(h);null){c=h.nextSibling;wi([h],o),Ri(e[i],{"list-style-type":"none"}),Ri(o,{"list-style-type":""}),h=c}Ei([o.parentNode],s),Ti(e[i])}}else{var p;if("LI"===s.tagName)Ei([p=yi(e[i].parentNode.tagName)],s),Ei([e[i]],p)}}else{var d=e[i];t=!0,this.noPreviousElement(d)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.domNode.setMarker(this.saveSelection);for(var i=this.domNode.blockNodes(),s=0;s<i.length;s++)"TABLE"!==i[s].tagName||t.collapsed||i.splice(s,1),i.length>0&&"LI"!==i[s].tagName&&"LI"===i[s].parentNode.tagName&&(i[s]=i[s].parentNode);this.applyLists(i,this.currentAction,e.selector),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.applyLists=function(e,t,i){if(this.isRevert(e,t))this.revertList(e),this.removeEmptyListElements();else{this.checkLists(e,t);for(var s=0;s<e.length;s++)if("true"===e[s].getAttribute("contenteditable")&&1===e[s].childNodes.length&&"TABLE"===e[s].childNodes[0].nodeName){var n=document.createElement(t);n.innerHTML="<li><br/></li>",e[s].appendChild(n)}else if("LI"!==e[s].tagName){!1;var o="<"+t+">",r="</"+t+">",a="li"+("IMG"===e[s].tagName?"":this.domNode.attributes(e[s])),l="p"===e[s].tagName.toLowerCase()?e[s].innerHTML:e[s].outerHTML,h=o+this.domNode.createTagString(a,null,l)+r;this.domNode.replaceWith(e[s],h)}}this.cleanNode(),this.parent.editableElement.focus(),Yw()&&Xw(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&Ti(e[t])},e.prototype.isRevert=function(e,t){for(var i=!0,s=0;s<e.length;s++){if("LI"!==e[s].tagName)return!1;e[s].parentNode.tagName!==t&&(i=!1)}return i},e.prototype.checkLists=function(e,t){for(var i=[],s=0;s<e.length;s++){var n=e[s].parentNode;"LI"===e[s].tagName&&n.tagName!==t&&i.indexOf(n)<0&&i.push(n)}for(var o=i.length-1;o>=0;o--){var r=i[o],a="<"+t.toLowerCase()+" "+this.domNode.attributes(r)+">"+r.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(i[o],a)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var i=e[t];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){for(var s=this.domNode.contents(i),n=0;n<s.length;n++)i.previousElementSibling.appendChild(s[n]);i.parentNode.removeChild(i)}}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var i=[],s=[],n=[],o=[];n=t[t.length-1].childNodes;for(var r=0;r<n.length;r++)if("OL"===n[r].tagName||"UL"===n[r].tagName){var a=n[r].querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[l])}for(var h=0;h<o.length;h++){for(var c=0,p=0;p<e.length;p++)o[h].contains(e[p])||(c+=1);c===e.length&&s.push(o[h])}if(s.length>0)for(var d=0;d<s.length;d++)"OL"!==this.domNode.contents(s[d])[0].nodeName&&"UL"!==this.domNode.contents(s[d])[0].nodeName&&i.push(s[d]);i.length>0&&this.nestedList(i)}},e.prototype.revertList=function(e){for(var t=[],i=e.length-1;i>=0;i--)for(var s=i-1;s>=0;s--)if(e[s].contains(e[i])||e[s]===e[i]){t.push(e[i]),e.splice(i,1);break}this.findUnSelected(t,e);var n=[];for(i=0;i<e.length;i++){var o=e[i];3===this.domNode.contents(o)[0].nodeType&&0===this.domNode.contents(o)[0].textContent.trim().length&&Ti(this.domNode.contents(o)[0]);var r=e[i].parentNode,a=o.getAttribute("class");if(0===t.length){var l=e[i].querySelectorAll("ul, ol")[0];if(l)if(l.querySelectorAll("li")){var h=yi(l.tagName);Ei([h],l.parentNode);var c=yi("li",{styles:"list-style-type: none;"});Ei([c],h),Ei([l],c)}}if(o.parentNode.insertBefore(this.closeTag(r.tagName),o),"LI"===r.parentNode.tagName)o.parentNode.insertBefore(this.closeTag("LI"),o);else{if(a&&' class="'+a+'"',0===o.querySelectorAll(_w.join(", ")).length){var p="<p"+(ae(a)?' class="e-rte-wrap-inner"':' class="'+a+' e-rte-wrap-inner"')+this.domNode.attributes(r)+"></p>";this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(o)[0].nodeType){var d=this.domNode.createTagString("p",r,this.parent.domNode.encode(this.domNode.contents(o)[0].textContent));this.domNode.replaceWith(this.domNode.contents(o)[0],d)}else if(this.domNode.contents(o)[0].classList.contains(Kw)||this.domNode.contents(o)[0].classList.contains(Zw)){d=this.domNode.createTagString("p",r,this.domNode.contents(o)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(o)[0],d)}else{var u=o.firstChild;a=u.getAttribute("class"),Di(u,this.domNode.rawAttributes(r)),a&&u.getAttribute("class")&&Di(u,{class:a+" "+u.getAttribute("class")})}Ei([this.openTag("LI")],o),wi([this.closeTag("LI")],o)}this.domNode.insertAfter(this.openTag(r.tagName),o),"LI"===r.parentNode.tagName&&(r=r.parentNode.parentNode),n.indexOf(r)<0&&n.push(r)}for(i=0;i<n.length;i++){var m=n[i],f=m.innerHTML;f=(f=f.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(m)+">"),this.domNode.replaceWith(m,this.domNode.openTagString(m)+f.trim()+this.domNode.closeTagString(m))}var g=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(i=0;i<g.length;i++)Ti(g[i]);var v=this.parent.editableElement.querySelectorAll("li:empty");for(i=0;i<v.length;i++)Ti(v[i])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),$w=function(){function e(){}return e.WrapBefore=function(e,t,i){return t.innerText=e.textContent,i?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;null)i.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),i},e.AppendBefore=function(e,t,i){return t.parentNode?i?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),eE=function(){function e(){this.position=-1,this.nodeSelection=new Uw}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,i){if(t){var s=e.cloneRange(),n=t.parentNode,o=this.nodeSelection.getIndex(t);s.collapse(i),i?s.setStartBefore(t):s.setEndAfter(t);var r,a=s.extractContents();if(i){if(t=n.childNodes[o],(a=this.spliceEmptyNode(a,!1))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isImgElm(a)||""!==a.textContent))if(t)$w.AppendBefore(a,t);else n.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",t=r.firstChild,n.appendChild(t)}else if(t=n.childNodes.length>1?n.childNodes[o]:n.childNodes[0],(a=this.spliceEmptyNode(a,!0))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isImgElm(a)||""!==a.textContent))if(t)$w.AppendBefore(a,t,!0);else n.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",n.insertBefore(r.firstChild,n.firstChild),t=n.firstChild;return t}return null},e.prototype.isImgElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var i=e.childNodes[0],s=0;!ae(i.childNodes)&&s<i.childNodes.length;s++)"IMG"===i.childNodes[s].nodeName&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var i;return(i=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[i],t):i>-1?this.spliceEmptyNode(e.childNodes[0],t):3!==e.nodeType&&11!==e.nodeType&&e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,i){for(var s=(e=i?e:e.reverse())[0],n=0;n<e.length&&(i?e[n]<t:e[n]>=t);n++)s=e[n];return s},e.prototype.GetCursorRange=function(e,t,i){var s=e.createRange(),n=[];n.push(0);for(var o=this.TrimLineBreak(i.data),r=o.indexOf(" ",0);-1!==r;)n.indexOf(r)<0&&n.push(r),new RegExp("\\s").test(o[r-1])&&n.indexOf(r-1)<0&&n.push(r-1),new RegExp("\\s").test(o[r+1])&&n.push(r+1),r=o.indexOf(" ",r+1);if(n.push(o.length),n.indexOf(t.startOffset)>=0||n.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||n[n.length-1]-1===t.startOffset)s=t,this.position=1;else{var a=this.GetCursorStart(n,t.startOffset,!0);this.position=t.startOffset-a,s.setStart(t.startContainer,a),s.setEnd(t.startContainer,this.GetCursorStart(n,t.startOffset,!1))}return s},e.prototype.GetCursorNode=function(e,t,i){return this.GetSpliceNode(this.GetCursorRange(e,t,i),i)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),tE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyUp=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.endContainer,s=i.lastChild;if(13===e.event.which&&t.startContainer===i&&3!==i.nodeType){var n=yi("p");if(n.innerHTML="<br>","BR"===s.nodeName&&s.previousSibling&&"TABLE"===s.previousSibling.nodeName)i.replaceChild(n,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];!ae(o)&&"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(n,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0))}}},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,s=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,n=Mi(i,"pre"),o=Mi(s,"pre");if(!ae(n)&&!ae(n.parentElement)&&"LI"===n.parentElement.tagName)return;if((ae(n)&&!ae(o)||!ae(n)&&ae(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0)),13===e.event.which&&!ae(n)&&!ae(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var r=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],a=t.startContainer.childNodes[t.endOffset-1],l=t.startContainer;if(ae(r)||ae(a)||!ae(r.nextSibling)||"BR"!==r.nodeName||"BR"!==a.nodeName)if(8203===l.textContent.charCodeAt(0)&&1===l.textContent.length||0===l.textContent.length){for(;"PRE"!==l.parentElement.nodeName&&(1===l.textContent.length||0===l.textContent.length);)l=l.parentElement;!ae(l.previousSibling)&&"BR"===l.previousSibling.nodeName&&ae(l.nextSibling)?this.paraFocus(l.parentElement):this.isNotEndCursor(n,t)}else this.isNotEndCursor(n,t);else this.paraFocus(t.startContainer)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!ae(e.endContainer.textContent.match(t))){var i=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,i)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e){var t=yi("p");t.innerHTML="<br>",this.parent.domNode.insertAfter(t,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0),Ti(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var i=new eE,s=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var n=yi("br");e.childNodes[t.endOffset].parentElement.insertBefore(n,e.childNodes[t.endOffset])}else{var o=i.SplitNode(t,e,!0);this.insertMarker(e,t);var r=e.previousElementSibling;"PRE"===r.tagName&&(r.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),Ti(e))}this.setCursorPosition(s,e)},e.prototype.setCursorPosition=function(e,t){var i=!1,s=this.parent.editableElement.querySelector(".tempSpan"),n=s.parentElement;if(""===s.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),e)if(i)n===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),Ti(s)):this.focusSelectionParent(s,n);else{var o=yi("br");this.parent.domNode.insertAfter(o,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),Ti(s)}else i?this.focusSelectionParent(s,n):Ti(s)},e.prototype.focusSelectionParent=function(e,t){Ti(e),t.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var i=yi("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement!==t.endContainer||ae(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||t.collapsed||(i=!0);var s=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(s);for(var n=this.parent.domNode.blockNodes(),o=0;o<n.length;o++){var r=void 0,a=void 0;if("blockquote"===e.subCommand.toLowerCase()?(r=this.getParentNode(n[o]),a=this.parent.domNode.isList(r)||"TABLE"===r.tagName?r.outerHTML:r.innerHTML):a=(r=n[o]).innerHTML,!(e.subCommand.toLowerCase()===r.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!ae(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||ae(r.parentNode)||"LI"===r.tagName&&"pre"!==e.subCommand.toLowerCase()||"TABLE"===r.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(r,e.subCommand);var l="pre"===e.subCommand.toLowerCase()&&"pre"===r.tagName.toLowerCase()?"p":e.subCommand,h=this.parent.domNode.createTagString(l,r,a.replace(/>\s+</g,"><"));"LI"===r.tagName?(r.innerHTML="",r.insertAdjacentHTML("beforeend",h)):this.parent.domNode.replaceWith(r,h)}}this.preFormatMerge();var c=this.parent.editableElement.querySelector("."+Kw),p=this.parent.editableElement.querySelector("."+Zw);ae(c)||ae(p)||(c=c.lastChild,p=p.lastChild),s=this.parent.domNode.saveMarker(s,null),Yw()&&Xw(this.parent.editableElement,e.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,c,p,0,p.textContent.length):s.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!ae(e))for(var t=0;t<e.length;t++){var i=e[t].previousElementSibling;ae(i)||"PRE"!==i.tagName||(i.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),Ti(e[t]))}},e.prototype.cleanFormats=function(e,t){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var s=0;s<i.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;s++)e.style.removeProperty(i[s])},e}(),iE=function(){function e(){}return e.Insert=function(e,t,i,s){var n,o;"string"==typeof t?((o=document.createElement("div")).innerHTML=t,n=s?o:o.firstChild):s&&(ae(t)||ae(t.classList)||!t.classList.contains("pasteContent"))?((o=document.createElement("div")).appendChild(t),n=o):n=t;var r=new Uw,a=new eE,l=r.getRange(e),h=l.startOffset===l.endOffset&&0===l.startOffset&&l.startContainer===l.endContainer,c=l.collapsed,p=this.getNodeCollection(l,r,n),d="table"===n.nodeName.toLowerCase()?this.closestEle(p[0].parentNode,i):p[0];if(s||!ae(n)&&!ae(n.classList)&&n.classList.contains("pasteContent"))this.pasteInsertHTML(p,n,l,r,a,e,c,d,i);else if(i!==l.startContainer&&(!c&&(d.nodeType!==Node.ELEMENT_NODE||-1===Ww.indexOf(d.tagName.toLocaleLowerCase()))||"table"===n.nodeName.toLowerCase()&&d&&-1===Ww.indexOf(d.tagName.toLocaleLowerCase()))){var u=a.GetSpliceNode(l,d),m=u.previousSibling,f=u.parentNode;if(1===p.length)r.setSelectionContents(e,u),l=r.getRange(e);else{var g=a.GetSpliceNode(l,p[p.length-1].parentElement);g=ae(g)?u:g,r.setSelectionText(e,u,g,0,3===g.nodeType?g.textContent.length:g.childNodes.length),l=r.getRange(e)}l.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(i);for(var v=0;v<p.length;v++)if(3!==p[v].nodeType&&null!=p[v].parentNode){if("IMG"===p[v].nodeName)continue;p[v].parentNode.removeChild(p[v])}if(m)$w.AppendBefore(n,m,!0);else{for(var y=null;f!==i&&f.firstChild&&""===f.textContent.trim();){y=f,f=f.parentNode}null!==y&&(f=y),f.firstChild&&(f!==i||"TABLE"===n.nodeName&&h&&f===l.startContainer&&f===l.endContainer)?""===f.textContent.trim()&&f!==i?($w.AppendBefore(n,f,!1),Ti(f)):$w.AppendBefore(n,f.firstChild,!1):f.appendChild(n)}"IMG"===n.nodeName?this.imageFocus(n,r,e):3!==n.nodeType?r.setSelectionText(e,n,n,0,n.childNodes.length):r.setSelectionText(e,n,n,0,n.textContent.length)}else{if(l.deleteContents(),h&&""===l.startContainer.textContent&&(l.startContainer.innerHTML=""),bt.isIE){var b=e.createDocumentFragment();b.appendChild(n),l.insertNode(b)}else l.insertNode(n);3!==n.nodeType&&n.childNodes.length>0?r.setSelectionText(e,n,n,1,1):"IMG"===n.nodeName?this.imageFocus(n,r,e):3!==n.nodeType?r.setSelectionContents(e,n):r.setSelectionText(e,n,n,n.textContent.length,n.textContent.length)}},e.pasteInsertHTML=function(e,t,i,s,n,o,r,a,l){var h,c,p,d,u=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(u&&i.startContainer===l&&""===l.textContent){var m=this.getImmediateBlockNode(e[e.length-1],l);s.setSelectionText(o,m,m,0,0),i=s.getRange(o)}l!==i.startContainer&&(!r&&(a.nodeType!==Node.ELEMENT_NODE||-1===Ww.indexOf(a.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&a&&-1===Ww.indexOf(a.tagName.toLocaleLowerCase()))&&(c=ae((d=n.GetSpliceNode(i,a)).previousSibling)?d.parentNode.previousSibling:d.previousSibling,1===e.length?(s.setSelectionContents(o,d),i=s.getRange(o),p=!0):(h=ae(h=n.GetSpliceNode(i,e[e.length-1].parentElement))?d:h,s.setSelectionText(o,d,h,0,3===h.nodeType?h.textContent.length:h.childNodes.length),i=s.getRange(o),p=!1));var f=!1;this.removingComments(t);for(var g,v=t.childNodes,y=0;y<v.length;y++)if(_w.indexOf(v[y].nodeName.toLocaleLowerCase())>=0){f=!0;break}var b=document.createDocumentFragment();if(f){this.insertTempNode(i,t,e,n,l);var C=!0,S=void 0,x=void 0,w=void 0;for(i.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&C||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&C){if(g=t.firstChild,ae(t.previousElementSibling)){var E=yi("p");t.parentElement.insertBefore(E,t)}t.previousElementSibling.appendChild(t.firstChild)}else g=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(w.appendChild(t.firstChild),b.appendChild(w)):((x=yi("p")).appendChild(t.firstChild),b.appendChild(x)),w=x,S=!0):(b.appendChild(t.firstChild),S=!1),C=!1;else Ti(t.firstChild);t.parentNode.replaceChild(b,t)}else if(u){var k=yi("span",{className:"tempSpan"});for(i.insertNode(k);t.firstChild;)g=t.firstChild,b.appendChild(t.firstChild);k.parentNode.replaceChild(b,k)}else{for(;t.firstChild;)g=t.firstChild,b.appendChild(t.firstChild);p?d.parentNode.replaceChild(b,d):(i.deleteContents(),Ti(h),ae(c)?l.appendChild(b):c.parentNode.appendChild(b))}"#text"===g.nodeName?this.placeCursorEnd(g,t,s,o,l):this.cursorPos(g,t,s,o,l)},e.placeCursorEnd=function(e,t,i,s,n){for(e="BR"===e.nodeName?e.previousSibling:e;!ae(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName;)e=e.lastChild;"IMG"===(e=ae(e)?t:e).nodeName?this.imageFocus(e,i,s):i.setSelectionText(s,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(n)},e.getNodeCollection=function(e,t,i){var s=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&("TD"===e.startContainer.nodeName||3!==e.startContainer.nodeType&&i.classList&&i.classList.contains("pasteContent"))?s.push(e.startContainer.childNodes[e.endOffset]):s=t.getInsertNodeCollection(e),s},e.insertTempNode=function(e,t,i,s,n){if(e.startContainer!==n||ae(e.startContainer.childNodes[e.endOffset-1])||"TABLE"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==n||ae(e.startContainer.childNodes[e.endOffset])||"TABLE"!==e.startContainer.childNodes[e.endOffset].nodeName){var o=this.getImmediateBlockNode(i[i.length-1],n);if("TD"===o.nodeName||"TH"===o.nodeName){var r=yi("span",{className:"tempSpan"});e.insertNode(r),r.parentNode.replaceChild(t,r)}else{var a=s.GetSpliceNode(e,o);a.parentNode.replaceChild(t,a)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else ae(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,i,s,n){e.classList.add("lastNode"),n.innerHTML=function(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var i=document.createElement("div");if(t.childNodes.length>0){for(var s=void 0,n=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||Gw.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(s?n.appendChild(t.firstChild):(o=yi("p"),i.appendChild(o),o.appendChild(t.firstChild)),n=o,s=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?Ti(t.firstChild):(i.appendChild(t.firstChild),s=!1);for(var r=i.querySelectorAll("table"),a=0;a<r.length;a++){"0"===r[a].getAttribute("border")&&r[a].removeAttribute("border");for(var l=r[a].querySelectorAll("td"),h=0;h<l.length;h++)"none"===l[h].style.borderLeft&&l[h].style.removeProperty("border-left"),"none"===l[h].style.borderRight&&l[h].style.removeProperty("border-right"),"none"===l[h].style.borderBottom&&l[h].style.removeProperty("border-bottom"),"none"===l[h].style.borderTop&&l[h].style.removeProperty("border-top"),"none"===l[h].style.border&&l[h].style.removeProperty("border");r[a].classList.contains(vx)||r[a].classList.add(vx)}var c=i.querySelectorAll("img");for(a=0;a<c.length;a++)c[a].classList.contains(gx)||c[a].classList.add(gx),c[a].classList.contains(mx)||c[a].classList.contains(ux)||c[a].classList.add(mx)}return i.innerHTML}(n.innerHTML),e=n.querySelector(".lastNode"),this.placeCursorEnd(e,t,i,s,n),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class")},e.imageFocus=function(e,t,i){var s=document.createTextNode(" ");e.parentNode.insertBefore(s,e.nextSibling),t.setSelectionText(i,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(_w.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){return ae(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"SOURCE"!==t[i].tagName&&"HR"!==t[i].tagName){var s=this.findDetachEmptyElem(t[i]);ae(s)||Ti(s)}},e.closestEle=function(e,t){for(var i=e;i&&1===i.nodeType;){if(i.parentNode===t||!ae(i.parentNode.tagName)&&-1!==qw.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e}(),sE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!ae(e.item.selectParent)&&e.item.selectParent.length>0&&Mi(e.item.selectParent[0],"a");if(t=ae(t)?!ae(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,ae(t)||"A"!==t.tagName){var i=(new Uw).getRange(this.parent.currentDocument),s=!!ae(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(i.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||i.collapsed||s){var n=this.createAchorNode(e);if(n.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),iE.Insert(this.parent.currentDocument,n,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){l="Paste"===e.item.action?n.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,n.childNodes[0],n.childNodes[0],l,n.childNodes[0].textContent.length)}else{var o=e.item.selection.range.startContainer;o.textContent=this.removeText(o.textContent,e.item.text)}}else this.createLinkNode(e)}else{var r=t,a="";if(ae(e.item.url)||r.setAttribute("href",e.item.url),ae(e.item.title)||r.setAttribute("title",e.item.title),ae(e.item.text)||""===e.item.text||(a=r.innerText,r.innerText=e.item.text),ae(e.item.target)?r.removeAttribute("target"):r.setAttribute("target",e.item.target),a===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,r,r,1,1),e.item.selection.restore();else{var l="Paste"===e.item.action?r.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,r.childNodes[0],r.childNodes[0],l,r.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,i,s=new Uw,n=new eE,o=s.getRange(this.parent.currentDocument),r=this.getSelectionNodes(s.getNodeCollection(o)),a=s.save(o,this.parent.currentDocument),l=[],h=[],c=[],p=[],d=[],u=0;u<r.length;u++)r[u]=n.GetSpliceNode(o,r[u]),l[u]=r[u];for(var m=0;m<l.length;m++){var f=!0;for(t=l[m];!0===f;){if("A"===t.parentNode.nodeName){var g=t.parentNode;t.parentNode.parentNode.insertBefore(g.firstChild,g),t.parentNode.removeChild(g)}this.isBlockNode(t.parentNode)||0===l.length||0===m||m===l.length-1?(h[m]=t,f=!1):t=t.parentNode}}m=0;for(var v=0;m<h.length;m++)if(0===m&&(d[v]=h[m]),h.length>1&&m<h.length-1){if(h[m].parentElement===h[m+1].parentElement&&h[m]===h[m+1])continue;d[v+1]=h[m+1],v++}var y=0;p[y]=this.createAchorNode(e);for(m=0;m<d.length;m++)if(0===m&&(i=d[m].cloneNode(!0),p[m].appendChild(i)),m<d.length-1)if(d[m].parentNode===d[m+1].parentNode){var b=d[m+1].cloneNode(!0);p[y].appendChild(b)}else p[y+=1]=this.createAchorNode(e),i=d[m+1].cloneNode(!0),p[y].appendChild(i);this.parent.nodeSelection.setRange(document,a.range);m=0;for(var C=0,S=0;m<=d.length;m++)0===m&&(d[m].parentNode.insertBefore(p[C],d[m].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,p[C]),c[S]=d[m],S++),m<d.length-1&&(d[m].parentNode===d[m+1].parentNode?(c[S]=d[m+1],S++):(C+=1,d[m+1].parentNode.insertBefore(p[C],d[m+1]),c[S]=d[m+1],S++));for(m=0;m<c.length;m++)c[m].parentNode&&c[m].parentNode.removeChild(c[m])},e.prototype.createAchorNode=function(e){var t=yi("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:ae(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return ae(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&_w.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var i=e.split(" "),s=0;s<i.length;s++)i[s]===t&&(i.splice(s,1),s--);return i.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var i=Mi(e.item.selectParent[0],"a"),s=i||e.item.selectParent[0],n=s.parentNode,o=[];s.firstChild;null)o.push(n.insertBefore(s.firstChild,s));n.removeChild(s),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var r=0;r<t.length;r++)for(var a=t[r].querySelectorAll("a"),l=0;l<a.length;l++)document.getSelection().containsNode(a[l],!0)&&(a[l].outerHTML=a[l].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),nE=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){return[Mi(e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(t)Ri(this.getTableNode(i)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(s);for(var n=this.parent.domNode.blockNodes(),o=0;o<n.length;o++){Ri(n[o],{"text-align":this.alignments[e.subCommand]})}var r=this.parent.domNode.getImageTagInSelection();for(o=0;o<r.length;o++){var a=[];a.push(r[o]),this.parent.imgObj.imageCommand({item:{selectNode:a},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),s=this.parent.domNode.saveMarker(s),Yw()&&Xw(this.parent.editableElement,e.selector),s.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(i):this.parent.domNode.blockNodes()})},e}(),oE=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(i);for(var s=this.parent.domNode.blockNodes(),n=s.slice(),o=[],r=0;r<n.length;r++)"LI"!==n[r].tagName&&"LI"===n[r].parentNode.tagName?(s.splice(s.indexOf(n[r]),1),o.push(n[r].parentNode)):"LI"===n[r].tagName&&(s.splice(s.indexOf(n[r]),1),o.push(n[r]));o.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(r=0;r<s.length;r++){var a=s[r],l=a.style.marginLeft,h=void 0;"Indent"===e.subCommand?(h=""===l?this.indentValue+"px":parseInt(l,null)+this.indentValue+"px",a.style.marginLeft=h):(h=""===l||"0px"===l?"":parseInt(l,null)-this.indentValue+"px",a.style.marginLeft=h)}this.parent.editableElement.focus(),Yw()&&Xw(this.parent.editableElement,e.selector),(i=this.parent.domNode.saveMarker(i)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),rE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-IMAGE",this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){var t=this;if(e.item.url=ae(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,ae(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var i=yi("img");this.setStyle(i,e),ae(e.item.selection)||e.item.selection.restore(),ae(e.selector)||"pasteCleanupModule"!==e.selector?iE.Insert(this.parent.currentDocument,i,this.parent.editableElement):e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[i]})}else{var s=e.item.selectParent[0];this.setStyle(s,e)}if(e.callBack&&(ae(e.selector)||!ae(e.selector)&&"pasteCleanupModule"!==e.selector)){var n=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],o="Replace"===e.value?e.item.selectParent[0]:bt.isIE?n.previousSibling:n.previousElementSibling;o.addEventListener("load",function(){e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[o]})})}},e.prototype.setStyle=function(e,t){ae(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(ae(t.item.cssClass)?"":" "+t.item.cssClass)),ae(t.item.altText)||e.setAttribute("alt",t.item.altText),ae(t.item.width)||ae(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),ae(t.item.height)||ae(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),ae(t.item.width)||ae(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),ae(t.item.width)||ae(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),ae(t.item.height)||ae(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),ae(t.item.height)||ae(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=yi("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),ae(e.item.target)||t.setAttribute("target",e.item.target),iE.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var i=Ii(".e-img-wrap",t),s=Ii(".e-img-inner",t),n=s.cloneNode(!0);Ti(Ii("a",t)),Ti(s),i.appendChild(e.item.insertElement),i.appendChild(n)}else Ti(t),bt.isIE&&e.item.selection.restore(),iE.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,ae(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){Mi(e.item.selectNode[0],"a")?"A"!==e.item.selectNode[0].parentElement.nodeName||ae(e.item.selectNode[0].parentElement.innerText)?Ti(Mi(e.item.selectNode[0],"a")):Ti(e.item.selectNode[0]):ae(Mi(e.item.selectNode[0],".e-img-caption"))?Ti(e.item.selectNode[0]):Ti(Mi(e.item.selectNode[0],".e-img-caption")),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="",t.width=e.item.width,t.height=e.item.height,this.callBack(e)},e.prototype.imageCaption=function(e){iE.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),bi([t],"e-rte-image"),ae(Mi(t,".e-img-caption"))||(Ci([Mi(t,".e-img-caption")],"e-imgright"),bi([Mi(t,".e-img-caption")],"e-imgleft")),"A"===t.parentElement.nodeName?(Ci([t.parentElement],"e-imgright"),bi([t.parentElement],"e-imgleft")):bi([t],"e-imgleft"),this.callBack(e)},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),bi([t],"e-rte-image"),ae(Mi(t,".e-img-caption"))||(Ci([Mi(t,".e-img-caption")],"e-imgleft"),Ci([Mi(t,".e-img-caption")],"e-imgright"),bi([Mi(t,".e-img-caption")],"e-imgcenter")),"A"===t.parentElement.nodeName?(Ci([t.parentElement],"e-imgleft"),Ci([t.parentElement],"e-imgright"),bi([t.parentElement],"e-imgcenter"),bi([t],"e-imgcenter")):bi([t],"e-imgcenter"),this.callBack(e)},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),bi([t],"e-rte-image"),ae(Mi(t,".e-img-caption"))||(Ci([Mi(t,".e-img-caption")],"e-imgleft"),bi([Mi(t,".e-img-caption")],"e-imgright")),"A"===t.parentElement.nodeName?(Ci([t.parentElement],"e-imgleft"),bi([t.parentElement],"e-imgright")):bi([t],"e-imgright"),this.callBack(e)},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),bi([t],"e-rte-image"),bi([t],"e-imginline"),ae(Mi(t,".e-img-caption"))||(Ci([Mi(t,".e-img-caption")],"e-imgbreak"),Ci([Mi(t,".e-img-caption")],"e-imgcenter"),Ci([Mi(t,".e-img-caption")],"e-imgleft"),Ci([Mi(t,".e-img-caption")],"e-imgright"),bi([Mi(t,".e-img-caption")],"e-caption-inline")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),bi([t],"e-imgbreak"),bi([t],"e-rte-image"),ae(Mi(t,".e-img-caption"))||(Ci([Mi(t,".e-img-caption")],"e-caption-inline"),Ci([Mi(t,".e-img-caption")],"e-imgcenter"),Ci([Mi(t,".e-img-caption")],"e-imgleft"),Ci([Mi(t,".e-img-caption")],"e-imgright"),bi([Mi(t,".e-img-caption")],"e-imgbreak")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),aE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-TABLE",this.createTable,this),this.parent.observer.on("INSERT-ROW",this.insertRow,this),this.parent.observer.on("INSERT-COLUMN",this.insertColumn,this),this.parent.observer.on("DELETE-ROW",this.deleteRow,this),this.parent.observer.on("DELETE-COLUMN",this.deleteColumn,this),this.parent.observer.on("REMOVE-TABLE",this.removeTable,this),this.parent.observer.on("TABLE-HEADER",this.tableHeader,this),this.parent.observer.on("TABLE_VERTICAL_ALIGN",this.tableVerticalAlign,this)},e.prototype.createTable=function(e){var t=yi("table",{className:"e-rte-table"}),i=yi("tbody");ae(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),ae(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),ae(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));for(var s=parseInt(e.item.width.width,10)>100?100/e.item.columns:parseInt(e.item.width.width,10)/e.item.columns,n=0;n<e.item.row;n++){for(var o=yi("tr"),r=0;r<e.item.columns;r++){var a=yi("td");a.appendChild(yi("br")),a.style.width=s+"%",o.appendChild(a)}i.appendChild(o)}if(t.appendChild(i),e.item.selection.restore(),iE.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),null===t.nextElementSibling){var l=yi("p");l.appendChild(yi("br")),this.insertAfter(l,t)}return t.querySelector("td").classList.add("e-cell-select"),e.callBack&&e.callBack({requestType:"Table",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.removeEmptyNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),t=0;t<e.length;t++)Ti(e[t]);var i=this.parent.editableElement.querySelectorAll("li *:empty");for(t=0;t<i.length;t++)Ti(i[t]),i.length===t+1&&(i=this.parent.editableElement.querySelectorAll("li *:empty"),t=-1);var s=this.parent.editableElement.querySelectorAll("li:empty");for(t=0;t<s.length;t++)Ti(s[t])},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.insertRow=function(e){var t=e.item.selection.range.startContainer;if("th"!==(t=3===t.nodeType?t.parentNode:t).nodeName.toLowerCase()||"InsertRowBefore"!==e.item.subCommand){var i,s=Mi(t,"tr");if("th"!==t.nodeName.toLowerCase()){i=Mi(t,"tr").cloneNode(!0);var n=Array.prototype.slice.call(i.querySelectorAll("td"));Array.prototype.forEach.call(n,function(e){e.innerHTML="",e.appendChild(yi("br")),e.removeAttribute("class")})}else{var o=s.childNodes;i=yi("tr");for(var r=0;r<o.length;r++){var a=yi("td");a.appendChild(yi("br")),i.appendChild(a)}}"InsertRowBefore"===e.item.subCommand?s.parentElement.insertBefore(i,s):this.insertAfter(i,s),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.insertColumn=function(e){var t=e.item.selection.range.startContainer;t="TD"!==(t=3===t.nodeType?t.parentNode:t).nodeName?Mi(t,"td,th"):t;for(var i,s=Mi(t,"tr"),n=Mi(s,"table").rows,o=Array.prototype.slice.call(s.querySelectorAll("th,td")).indexOf(t),r=parseInt(e.item.width,10)/(s.querySelectorAll("td,th").length+1),a=0;a<Mi(s,"table").querySelectorAll("th,td").length;a++)Mi(s,"table").querySelectorAll("th,td")[a].style.width=r+"%";for(var l=0;l<n.length;l++){var h=(i=n[l].querySelectorAll("th,td")[o]).cloneNode(!0);h.innerHTML="",h.appendChild(yi("br")),h.removeAttribute("class"),"InsertColumnLeft"===e.item.subCommand?i.parentElement.insertBefore(h,i):this.insertAfter(h,i)}e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.deleteColumn=function(e){var t=e.item.selection.range.startContainer,i=(t=3===t.nodeType?t.parentNode:t).cellIndex,s=Mi(t,"table"),n=Mi(t,"tr"),o=Mi(n,"table").rows;if(1===n.querySelectorAll("th,td").length)e.item.selection.restore(),Ti(Mi(t.parentElement,"table"));else for(var r=0;r<o.length;r++)o[r].deleteCell(i),bt.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,s.querySelector("td"),s.querySelector("td"),0,0),s.querySelector("td, th").classList.add("e-cell-select"));if(e.callBack){var a=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==a.nodeName){var l=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,h=a.children[l];this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,h,0)}e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.deleteRow=function(e){var t=e.item.selection.range.startContainer,i=Mi(t=3===t.nodeType?t.parentNode:t,"tr").rowIndex,s=Mi(t,"table");1===s.rows.length?(e.item.selection.restore(),Ti(Mi(t.parentElement,"table"))):("TH"===t.tagName?Ti(s.querySelector("thead")):s.deleteRow(i),e.item.selection.setSelectionText(this.parent.currentDocument,s.querySelector("td"),s.querySelector("td"),0,0),s.querySelector("td, th").classList.add("e-cell-select")),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.removeTable=function(e){var t=e.item.selection.range.startContainer,i=Mi((t=3===t.nodeType?t.parentNode:t).parentElement,"table");i&&(e.item.selection.restore(),Ti(i)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableHeader=function(e){var t=!1,i=e.item.selection.range.startContainer,s=Mi((i=3===i.nodeType?i.parentNode:i).parentElement,"table");if([].slice.call(s.childNodes).forEach(function(e){"THEAD"===e.nodeName&&(t=!0)}),s&&!t)for(var n=s.querySelector("tr").childElementCount,o=s.createTHead().insertRow(0),r=0;r<n;r++){var a=yi("th");a.appendChild(yi("br")),o.appendChild(a)}else s.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableVerticalAlign=function(e){"AlignTop"===e.item.subCommand?e.item.tableCell.style.verticalAlign="top":"AlignMiddle"===e.item.subCommand?e.item.tableCell.style.verticalAlign="middle":e.item.tableCell.style.verticalAlign="bottom",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),lE=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,i){var s=this.getFormatParent(e,t,i);return null!==s&&s!==i?s:null},e.prototype.getFormatParent=function(e,t,i){do{e=e.parentNode}while(e&&e!==i&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,i){switch(i){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var i=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isBackgroundColor=function(t){var i=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontSize=function(t){var i=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontName=function(t){var i=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var"],e}(),hE=function(){function e(){}return e.applyFormat=function(e,t,i,s,n){if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1){"backgroundcolor"===t&&""===s&&(s="transparent");var o,r=new Uw,a=new eE,l=new lE,h=r.getRange(e),c=r.save(h,e),p=h.collapsed?r.getSelectionNodeCollection(h):r.getSelectionNodeCollectionBr(h),d=!1,u=!1,m=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(h.collapsed)if(p.length>0)d=!0,h=a.GetCursorRange(e,h,p[0]);else if(3===h.startContainer.nodeType&&h.startContainer.parentElement.childElementCount>0&&h.startOffset>0&&"br"!==h.startContainer.parentElement.firstElementChild.tagName.toLowerCase())d=!0,h=a.GetCursorRange(e,h,h.startContainer),p.push(h.startContainer);else if("td"!==h.startContainer.nodeName.toLowerCase()){var f=this.insertCursorNode(e,r,h,l,a,t,s,i);r.endContainer=r.startContainer=r.getNodeArray(f,!0),r.endOffset=r.startOffset=1}o=h.collapsed;for(var g=!1,v=0;v<p.length;v++){var y=l.getFormattedNode(p[v],t,i);null===y&&("subscript"===t?g=null!==(y=l.getFormattedNode(p[v],"superscript",i)):"superscript"===t&&(g=null!==(y=l.getFormattedNode(p[v],"subscript",i)))),0===v&&null===y&&(u=!0),p[v]=null===y||u&&!m?this.insertFormat(e,p,v,y,o,u,m,h,a,t,s):this.removeFormat(p,v,y,o,u,m,h,a,t,s,r),r=this.applySelection(p,r,a,v,d)}Yw()&&Xw(i,n),c.restore(),g&&this.applyFormat(e,t,i)}},e.insertCursorNode=function(e,t,i,s,n,o,r,a){var l=t.getNodeCollection(i),h=l.length>0?l.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(s,l,o,a):s.getFormattedNode(l[0],o,a):null,c=null;return h?(c=l[0],$w.unwrap(h)):(l.length>1&&i.startOffset>0&&l[0].firstElementChild&&"br"===l[0].firstElementChild.tagName.toLowerCase()&&(l[0].innerHTML=""),c=this.getInsertNode(e,i,o,r).firstChild),c},e.getCursorFormat=function(e,t,i,s){for(var n,o=0;o<t.length;o++)n=t[o].lastElementChild?t[o].lastElementChild:t[o];return e.getFormattedNode(n,i,s)},e.removeFormat=function(e,t,i,s,n,o,r,a,l,h,c){var p,d,u=null;if(r.startContainer!==r.endContainer||0!==r.startOffset||r.endOffset!==r.startContainer.length){var m=[],f=e[t];do{m.push(c.getIndex(f)),f=f.parentNode}while(f&&f!==i);if("BR"!==e[t].nodeName&&(f=u=s&&i.textContent.length-1===r.startOffset?a.SplitNode(r,i,!0):a.GetSpliceNode(r,i)),s){for(var g=u;null!==g.firstChild&&3!==g.firstChild.nodeType;null)g=g.firstChild;g.innerHTML="&#8203;",e[t]=g.firstChild}else{for(;f&&f.childNodes.length>0&&m.length-1>=0&&f.childNodes.length>m[m.length-1];)f=f.childNodes[m[m.length-1]],m.pop();if("BR"!==e[t].nodeName)if(3!==f.nodeType||s&&""===f.nodeValue){var v=document.createElement("div");v.innerHTML="&#8203;",3!==f.nodeType?(f.insertBefore(v.firstChild,f.firstChild),e[t]=f.firstChild):(f.parentNode.insertBefore(v.firstChild,f),e[t]=f.previousSibling,f.parentNode.removeChild(f))}else e[t]=f}}if("backgroundcolor"===l&&(p=i.style.fontSize),"fontsize"===l){var y=Mi(e[t].parentElement,"span[style*=background-color]");ae(y)||(d=y.style.backgroundColor)}var b=i.getAttribute("style"),C=i.tagName,S=$w.unwrap(i);if(S.length>0&&o){for(var x=0;x<S.length;x++)S[x]=$w.Wrap(S[x],this.GetFormatNode(l,h,C,b));var w=e[t].parentElement;if(ae(p)||""===p||(w.style.fontSize=p),ae(d)||""===d||(w.style.backgroundColor=d),"backgroundcolor"===l&&!ae(p)&&""!==p&&w.parentElement.innerHTML===w.outerHTML){var E=w.parentElement;E.parentElement.insertBefore(w,E),Ti(E)}if("fontsize"===l){for(var k=e[t].parentElement,T=e[t].parentElement;!ae(T)&&"li"!==T.tagName.toLowerCase();)k=T=T.parentElement;ae(k)||"li"!==k.tagName.toLowerCase()||k.textContent.trim()!==e[t].textContent.trim()||(k.style.fontSize=h)}}return e[t]},e.insertFormat=function(e,t,i,s,n,o,r,a,l,h,c){if(n)if("uppercase"!==h&&"lowercase"!==h){p=this.getInsertNode(e,a,h,c);t[i]=p.firstChild,l.position=1}else l.position=a.startOffset;else if(null===s&&o||r){if("BR"!==t[i].nodeName&&(t[i]=l.GetSpliceNode(a,t[i]),t[i].textContent=l.TrimLineBreak(t[i].textContent)),"uppercase"===h||"lowercase"===h)t[i].textContent="uppercase"===h?t[i].textContent.toLocaleUpperCase():t[i].textContent.toLocaleLowerCase();else if(!0!==r||""!==c){var p=this.GetFormatNode(h,c);if("fontsize"===h){for(var d=t[i].parentElement,u=t[i].parentElement;!ae(u)&&"li"!==u.tagName.toLowerCase();)d=u=u.parentElement;ae(d)||"li"!==d.tagName.toLowerCase()||d.textContent.trim()!==t[i].textContent.trim()||(d.style.fontSize=c),t[i]=this.applyStyles(t,i,p);var m=Mi(t[i].parentElement,"span[style*=background-color]");ae(m)||(t[i].parentElement.style.backgroundColor=m.style.backgroundColor)}else t[i]=this.applyStyles(t,i,p)}}else t[i]=l.GetSpliceNode(a,t[i]);return t[i]},e.applyStyles=function(e,t,i){return e[t]=t===e.length-1||"BR"===e[t].nodeName?$w.Wrap(e[t],i):$w.WrapBefore(e[t],i,!0),e[t]=this.getChildNode(e[t],i),e[t]},e.getInsertNode=function(e,t,i,s){var n=this.GetFormatNode(i,s);if(n.innerHTML="&#8203;",bt.isIE){var o=e.createDocumentFragment();o.appendChild(n),t.insertNode(o)}else t.insertNode(n);return n},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,i,s,n){return 1!==e.length||n?1===e.length&&n?(t.startContainer=t.getNodeArray(e[s],!0),t.endContainer=t.startContainer,t.startOffset=i.position,t.endOffset=i.position):0===s?(t.startContainer=t.getNodeArray(e[s],!0),t.startOffset=0):s===e.length-1&&(t.endContainer=t.getNodeArray(e[s],!1),t.endOffset=e[s].textContent.length):(t.startContainer=t.getNodeArray(e[s],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[s].textContent.length),t},e.GetFormatNode=function(e,t,i,s){var n;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.textDecoration="underline",n;case"strikethrough":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.textDecoration="line-through",n;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.color=t,n.style.textDecoration="inherit",n;case"fontname":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.fontFamily=t,n;case"fontsize":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.fontSize=t,n;default:return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.backgroundColor=t,n}},e.updateStyles=function(e,t,i){null!==i&&"SPAN"===t&&e.setAttribute("style",i)},e}(),cE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),hE.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){hE.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),pE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},e.prototype.applyHtml=function(e){if(iE.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),"pasteCleanup"===e.subCommand){var t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),s=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),n=[].slice.call(s);e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:i,imgElem:n})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),dE=function(){function e(){}return e.clear=function(e,t,i){var s=new Uw,n=new eE,o=s.getRange(e),r=o.collapsed,a=s.getInsertNodeCollection(o),l=s.save(o,e);if(!r){var h=void 0;if(h="BR"===a[0].nodeName&&Mi(a[0],"table")?n.GetSpliceNode(o,Mi(a[0],"table")):n.GetSpliceNode(o,a[a.length>1&&"IMG"===a[0].nodeName?1:0]),1===a.length)s.setSelectionContents(e,h),o=s.getRange(e);else{for(var c=1,p=a[a.length-c];a.length<=c&&"BR"===a[a.length-c].nodeName;)c++,p=a[a.length-c];var d=n.GetSpliceNode(o,p);s.setSelectionText(e,h,d,0,3===d.nodeType?d.textContent.length:d.childNodes.length),o=s.getRange(e)}var u=s.getNodeCollection(o),m=u.slice();this.clearInlines(s.getSelectionNodes(m),m,s.getRange(e),n,t),this.reSelection(e,l,u),o=s.getRange(e);var f=(u=s.getNodeCollection(o)).slice();this.clearBlocks(e,f,t,n,s),Yw()&&Xw(t,i),this.reSelection(e,l,u)}},e.reSelection=function(e,t,i){var s=t.getInsertNodes(i);t.startContainer=t.getNodeArray(s[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(s[s.length-1],!1,e);var n=s[s.length-1];t.endOffset=3===n.nodeType?n.textContent.length:n.childNodes.length,t.restore()},e.clearBlocks=function(e,t,i,s,n){for(var o=[],r=0;r<t.length;r++)this.BLOCK_TAGS.indexOf(t[r].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r])?o.push(t[r]):this.BLOCK_TAGS.indexOf(t[r].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r].parentNode)&&i!==t[r].parentNode&&o.push(t[r].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,s,n)},e.spliceParent=function(e,t){for(var i=0;i<e.length;i++)for(var s=e[i].childNodes.length,n=0;n<s;n++)if(t.indexOf(e[i].childNodes[n])>0&&e[i].childNodes[n].childNodes.length>0&&(t=this.spliceParent([e[i].childNodes[n]],t)[1]),t.indexOf(e[i].childNodes[n])<=-1&&""!==e[i].childNodes[n].textContent.trim()){for(var o=0;o<s;o++)t.indexOf(e[i].childNodes[o])>-1&&t.splice(t.indexOf(e[i].childNodes[o]),1);n=e[i].childNodes.length;var r=e.indexOf(e[i].parentNode),a=t.indexOf(e[i].parentNode);r>-1&&e.splice(r,1),a>-1&&t.splice(a,1);var l=t.indexOf(e[i]);l>-1&&t.splice(l,1),e.splice(i,1),i--}return[e,t]},e.removeChild=function(e,t){var i=t.childNodes.length;if(i>0)for(var s=0;s<i;s++)e.indexOf(t.childNodes[s])>-1&&(e=this.removeChild(e,t.childNodes[s])).splice(e.indexOf(t.childNodes[s]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,i,s){for(var n=0;n<t.length;n++)if(this.NONVALID_TAGS.indexOf(t[n].nodeName.toLowerCase())>-1&&t[n].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[n].parentNode.nodeName.toLowerCase())>-1&&(s.setSelectionText(e,t[n],t[n],0,t[n].childNodes.length),$w.unwrap(i.GetSpliceNode(s.getRange(e),t[n].parentNode))),"p"!==t[n].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[n].nodeName.toLowerCase())<0&&"p"!==t[n].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[n].nodeName.toLocaleLowerCase()||"li"===t[n].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[n].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[n].childNodes.length&&"p"===t[n].childNodes[0].nodeName.toLocaleLowerCase()||$w.Wrap(t[n],e.createElement("p"));var o=$w.unwrap(t[n]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&($w.Wrap(t[n],e.createElement("p")),$w.unwrap(t[n]));for(var r=0;r<o.length;r++)if(this.NONVALID_TAGS.indexOf(o[r].nodeName.toLowerCase())>-1)this.unWrap(e,[o[r]],i,s);else if(this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"!==o[r].nodeName.toLocaleLowerCase()){var a=this.removeParent([o[r]]);this.unWrap(e,a,i,s)}else this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&o[r].parentNode.nodeName.toLocaleLowerCase()===o[r].nodeName.toLocaleLowerCase()?$w.unwrap(o[r]):this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"===o[r].nodeName.toLocaleLowerCase()&&($w.Wrap(o[r],e.createElement("p")),$w.unwrap(o[r]))}else $w.Wrap(t[n],e.createElement("p")),$w.unwrap(t[n])},e.clearInlines=function(e,t,i,s,n){for(var o=0;o<e.length;o++)e[o].parentNode&&lE.inlineTags.indexOf(e[o].parentNode.nodeName.toLocaleLowerCase())>-1&&(s.GetSpliceNode(i,e[o].parentNode),this.removeInlineParent(e[o].parentNode))},e.removeInlineParent=function(e){for(var t=$w.unwrap(e),i=0;i<t.length;i++)1===t[i].parentNode.childNodes.length&&lE.inlineTags.indexOf(t[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[i].parentNode):lE.inlineTags.indexOf(t[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[i])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e}(),uE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(dE.clear(this.parent.currentDocument,this.parent.editableElement,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),mE=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=ae(t)?30:t.undoRedoSteps,this.undoRedoTimer=ae(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=ce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=(new Uw).getRange(this.parent.currentDocument),i=(new Uw).save(t,this.parent.currentDocument),s={text:this.parent.editableElement.innerHTML,range:i};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===i.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===i.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===i.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===s.text.trim()||(this.undoRedoStack.push(s),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=i,this.parent.editableElement.focus(),Yw()&&Xw(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),Yw()&&Xw(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),fE=function(){function e(e){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.removableElements=["o:p","style"],this.listContents=[],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("ms_word_cleanup_plugin",this.wordCleanup,this)},e.prototype.wordCleanup=function(e){var t=e.allowedStylePropertiesArray,i=[],s=e.args.clipboardData.getData("text/HTML"),n=e.args.clipboardData.getData("text/rtf"),o=yi("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=s;var r=/style='mso-width-source:/i;/class='?Mso|style='[^ ]*\bmso-/i.test(s)||/class="?Mso|style="[^ ]*\bmso-/i.test(s)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(s)||r.test(s)?(this.imageConversion(o,n),s=s.replace(/<img[^>]+>/i,""),ae((i=this.cleanUp(o,i))[0])||"UL"===i[0].parentElement.tagName||"OL"===i[0].parentElement.tagName||this.listConverter(i),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.breakLineAddition(o),this.removeClassName(o),r.test(s)&&this.addTableBorderClass(o),e.callBack(o.innerHTML)):e.callBack(o.innerHTML)},e.prototype.addTableBorderClass=function(e){for(var t=e.querySelectorAll("table"),i=!1,s=0;s<t.length;s++){for(var n=0;n<this.borderStyle.length;n++)if(t[s].innerHTML.indexOf(this.borderStyle[n])>=0){i=!0;break}i&&(t[s].classList.add("e-rte-table-border"),i=!1)}},e.prototype.imageConversion=function(e,t){this.checkVShape(e);var i=e.querySelectorAll("img"),s=[],n=[],o=[];if(i.length>0){for(var r=0;r<i.length;r++)s.push(i[r].getAttribute("src")),o.push(i[r].getAttribute("src").split("/")[i[r].getAttribute("src").split("/").length-1].split(".")[0]);var a=this.hexConversion(t);for(r=0;r<a.length;r++)n.push(this.convertToBase64(a[r]));for(r=0;r<i.length;r++)i[r].setAttribute("src",n[r]),i[r].setAttribute("id","msWordImg-"+o[r])}},e.prototype.checkVShape=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)switch(t[i].nodeName){case"V:SHAPETYPE":Ti(t[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===t[i].firstElementChild.nodeName){var s=t[i].firstElementChild.getAttribute("src"),n=yi("img");n.setAttribute("src",s),t[i].parentElement.insertBefore(n,t[i]),Ti(t[i])}}},e.prototype.convertToBase64=function(e){var t=this.conHexStringToBytes(e.hex),i=this.conBytesToBase64(t);return e.type?"data:"+e.type+";base64,"+i:null},e.prototype.conBytesToBase64=function(e){for(var t="",i=e.length,s=0;s<i;s+=3){var n=e.slice(s,s+3),o=n.length,r=[];if(o<3)for(var a=o;a<3;a++)n[a]=0;r[0]=(252&n[0])>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|(192&n[2])>>6,r[3]=63&n[2];for(a=0;a<4;a++)t+=a<=o?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r[a]):"="}return t},e.prototype.conHexStringToBytes=function(e){for(var t=[],i=e.length/2,s=0;s<i;s++)t.push(parseInt(e.substr(2*s,2),16));return t},e.prototype.hexConversion=function(e){var t,i=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,s=new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),n=e.match(s),o=[];if(!ae(n))for(var r=0;r<n.length;r++)if(i.test(n[r])){if(-1!==n[r].indexOf("\\pngblip"))t="image/png";else{if(-1===n[r].indexOf("\\jpegblip"))continue;t="image/jpeg"}o.push({hex:t?n[r].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:t})}return o},e.prototype.removeClassName=function(e){for(var t=e.querySelectorAll("*[class]"),i=0;i<t.length;i++)t[i].removeAttribute("class")},e.prototype.breakLineAddition=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)if(0===t[i].children.length&&"&nbsp;"===t[i].innerHTML&&"&nbsp;"===t[i].innerHTML&&!t[i].closest("li")&&!t[i].closest("td")){var s=this.findDetachElem(t[i]),n=yi("br");ae(s.parentElement)||(s.parentElement.insertBefore(n,s),Ti(s))}},e.prototype.findDetachElem=function(e){return!ae(e.parentElement)&&""===e.parentElement.textContent.trim()&&"TD"!==e.parentElement.tagName&&ae(e.parentElement.querySelector("img"))?this.findDetachElem(e.parentElement):e},e.prototype.removeUnwantedElements=function(e){for(var t=e.innerHTML,i=0;i<this.removableElements.length;i++){var s=new RegExp("<"+this.removableElements[i]+">","g"),n=new RegExp("</"+this.removableElements[i]+">","g");t=(t=t.replace(s,"")).replace(n,"")}e.innerHTML=t,e.querySelectorAll(":empty")},e.prototype.findDetachEmptyElem=function(e){return ae(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"MSWord-Content"!==e.parentElement.getAttribute("id")&&ae(e.parentElement.querySelector("img"))?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"HR"!==t[i].tagName){var s=this.findDetachEmptyElem(t[i]);ae(s)||Ti(s)}},e.prototype.styleCorrection=function(e,t){var i=e.querySelectorAll("style");if(i.length>0){var s=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),n=ae(s)?null:this.findStyleObject(s),o=Object.keys(n),r=o.map(function(e){return n[e]});r=this.removeUnwantedStyle(r,t),this.filterStyles(e,t);for(var a=void 0,l=!1,h=0;h<o.length;h++){if(""===o[h].split(".")[0])a=e.getElementsByClassName(o[h].split(".")[1]),l=!0;else{if(1===o[h].split(".").length&&o[h].split(".")[0].indexOf("@")>=0)continue;a=1===o[h].split(".").length&&o[h].split(".")[0].indexOf("@")<0?e.getElementsByTagName(o[h]):e.querySelectorAll(o[h])}for(var c=0;c<a.length;c++){var p=a[c].getAttribute("style");if(ae(p)||""===p.trim())a[c].setAttribute("style",r[h]);else{var d=r[h].split(";");if(!l)for(var u=0;u<d.length;u++)p.indexOf(d[u].split(":")[0])>=0&&(d.splice(u,1),u--);r[h]=d.join(";")+";";var m=p+r[h];a[c].setAttribute("style",m)}}l=!1}}},e.prototype.filterStyles=function(e,t){for(var i=e.querySelectorAll("*[style]"),s=0;s<i.length;s++){for(var n=i[s].getAttribute("style").split(";"),o="",r=0;r<n.length;r++)t.indexOf(n[r].split(":")[0].trim())>=0&&(o+=n[r]+";");i[s].setAttribute("style",o)}},e.prototype.removeUnwantedStyle=function(e,t){for(var i=0;i<e.length;i++){var s=e[i].split(";");e[i]="";for(var n=0;n<s.length;n++)t.indexOf(s[n].split(":")[0])>=0&&(e[i]+=s[n]+";")}return e},e.prototype.findStyleObject=function(e){for(var t={},i=0;i<e.length;i++){var s=e[i],n=s.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=s.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");n=n.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),n=n.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var r=n.split(", "),a=0;a<r.length;a++)t[r[a]]=o}return t},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.prototype.cleanUp=function(e,t){for(var i,s=[],n=e.querySelectorAll("*"),o=0;o<n.length;o++)-1===this.ignorableNodes.indexOf(n[o].nodeName)||3===n[o].nodeType&&""===n[o].textContent.trim()?s.push(n[o]):(n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&1!==n[o].childElementCount&&t.push(n[o]),!i||-1===this.blockNode.indexOf(n[o].nodeName.toLowerCase())||n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")||t.push(null),-1!==this.blockNode.indexOf(n[o].nodeName.toLowerCase())&&(i=!(!n[o].className||-1===n[o].className.toLowerCase().indexOf("msolistparagraph"))));return t.length&&null!==t[t.length-1]&&t.push(null),t},e.prototype.listConverter=function(e){for(var t,i,s=[],n=[],o="",r=0;r<e.length;r++)if(null!==e[r]){t=(o=e[r].getAttribute("style"))&&-1!==o.indexOf("level")?parseInt(o.charAt(o.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(e[r]);var a=void 0;if(!ae(this.listContents[0])){a=this.listContents[0].trim().length>1?"ol":"ul";for(var l=[],h=1;h<this.listContents.length;h++)l.push(this.listContents[h]);var c=void 0;ae(e[r].className)||(c=e[r].className),n.push({listType:a,content:l,nestedLevel:t,class:c})}}else s.push({content:this.makeConversion(n),node:e[r-1]}),n=[];for(i=e.shift();i;){for(var p=[],d=0;d<s.length;d++)if(s[d].node===i){for(var u=0;u<s[d].content.childNodes.length;u++)p.push(s[d].content.childNodes[u]);for(u=0;u<p.length;u++)i.parentElement.insertBefore(p[u],i);break}i.remove(),(i=e.shift())||(i=e.shift())}},e.prototype.makeConversion=function(e){for(var t,i,s,n=yi("div"),o=1,r=0,a=0;a<e.length;a++){var l=yi("p");if(l.innerHTML=e[a].content.join(" "),1===e[a].nestedLevel&&0===r&&e[a].content)n.appendChild(t=yi(e[a].listType)),(i=yi("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);else if(e[a].nestedLevel===o)i.parentElement.tagName.toLowerCase()===e[a].listType?(i.parentElement.appendChild(i=yi("li")),i.appendChild(l)):(t=yi(e[a].listType),i.parentElement.parentElement.appendChild(t),(i=yi("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()));else if(e[a].nestedLevel>o)if(ae(i))n.appendChild(t=yi(e[a].listType)),(i=yi("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);else{for(var h=0;h<e[a].nestedLevel-o;h++)i.appendChild(t=yi(e[a].listType)),i=yi("li",{styles:"list-style-type: none;"}),t.appendChild(i);i.appendChild(l),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel),t.childNodes[0].style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel)}else if(1===e[a].nestedLevel)n.lastChild.tagName.toLowerCase()===e[a].listType?t=n.lastChild:n.appendChild(t=yi(e[a].listType)),(i=yi("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);else for(s=i;s.parentElement;)if((s=s.parentElement).attributes.getNamedItem("level")){if(parseInt(s.attributes.getNamedItem("level").textContent,null)===e[a].nestedLevel){(i=yi("li")).appendChild(l),s.appendChild(i);break}if(e[a].nestedLevel>parseInt(s.attributes.getNamedItem("level").textContent,null)){s.appendChild(t=yi(e[a].listType)),(i=yi("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);break}}i.setAttribute("class",e[a].class),o=e[a].nestedLevel,r++}return n},e.prototype.getListStyle=function(e,t){return t=t>0?t-1:t,"ol"===e?t<this.olData.length?this.olData[t]:this.olData[0]:t<this.ulData.length?this.ulData[t]:this.ulData[0]},e.prototype.getListContent=function(e){var t="";""!==e.firstElementChild.textContent.trim()||ae(e.firstElementChild.firstElementChild)||"IMG"!==e.firstElementChild.firstElementChild.nodeName?(t=e.firstElementChild.textContent.trim(),this.listContents.push(t)):(t=e.innerHTML.trim(),this.listContents.push(""),this.listContents.push(t)),Ti(e.firstElementChild),this.listContents.push(e.innerHTML)},e}(),gE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);iE.Insert(this.parent.currentDocument,t),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),vE=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new Uw,this.domNode=new Qw(this.editableElement,this.currentDocument),this.observer=new We(this),this.listObj=new Jw(this),this.formatObj=new tE(this),this.alignmentObj=new nE(this),this.indentsObj=new oE(this),this.linkObj=new sE(this),this.imgObj=new rE(this),this.selectionObj=new cE(this),this.inserthtmlObj=new pE(this),this.insertTextObj=new gE(this),this.clearObj=new uE(this),this.tableObj=new aE(this),this.undoRedoManager=new mE(this,e.options),this.msWordPaste=new fE(this),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,i,s,n,o,r){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:s,selector:r});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:s,selector:r,exeValue:o});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:i,callBack:s,selector:r,value:o});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:i,callBack:s,selector:r});break;case"links":this.observer.notify("INSERT-LINK",{command:e,value:t,item:o,event:i,callBack:s});break;case"files":this.observer.notify("INSERT-IMAGE",{command:e,value:"Image",item:o,event:i,callBack:s,selector:r});break;case"images":this.observer.notify("INSERT-IMAGE",{command:e,value:t,item:o,event:i,callBack:s,selector:r});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("INSERT-TABLE",{item:o,event:i,callBack:s});break;case"insertrowbefore":case"insertrowafter":this.observer.notify("INSERT-ROW",{item:o,event:i,callBack:s});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify("INSERT-COLUMN",{item:o,event:i,callBack:s});break;case"deleterow":this.observer.notify("DELETE-ROW",{item:o,event:i,callBack:s});break;case"deletecolumn":this.observer.notify("DELETE-COLUMN",{item:o,event:i,callBack:s});break;case"tableremove":this.observer.notify("REMOVE-TABLE",{item:o,event:i,callBack:s});break;case"tableheader":this.observer.notify("TABLE-HEADER",{item:o,event:i,callBack:s});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify("TABLE_VERTICAL_ALIGN",{item:o,event:i,callBack:s})}break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:i,callBack:s,value:n,selector:r});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:s,value:n});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:s,value:n});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:i,callBack:s,selector:r});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:s,selector:r})}},e}(),yE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),bE=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),re(i,i,t,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,t.options),i}return yE(t,e),t.prototype.initialize=function(){this.keyConfig=Iw},t.prototype.updateFormatter=function(e,t,i){e&&t&&(this.editorManager=new vE({document:t,editableElement:e,options:i}))},t}(xw),CE={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},SE=function(){function e(){}return e.get=function(e,t,i,s,n,o){for(var r=JSON.parse(JSON.stringify(CE)),a=JSON.parse(JSON.stringify(CE)),l=new Uw,h=o?[o]:l.getNodeCollection(l.getRange(e)),c=h.length,p=0;p<h.length;p++)("BR"!==h[p].nodeName&&3!==h[p].nodeType||c>1&&3===h[p].nodeType&&""===h[p].textContent.trim())&&(h.splice(p,1),p--);for(p=0;p<h.length;p++)r=this.getFormatParent(e,r,h[p],t,i,s,n),(0===p&&r.bold||!r.bold)&&(a.bold=r.bold),(0===p&&r.insertcode||!r.insertcode)&&(a.insertcode=r.insertcode),(0===p&&r.italic||!r.italic)&&(a.italic=r.italic),(0===p&&r.underline||!r.underline)&&(a.underline=r.underline),(0===p&&r.strikethrough||!r.strikethrough)&&(a.strikethrough=r.strikethrough),(0===p&&r.superscript||!r.superscript)&&(a.superscript=r.superscript),(0===p&&r.subscript||!r.subscript)&&(a.subscript=r.subscript),(0===p&&r.fontcolor||!r.fontcolor)&&(a.fontcolor=r.fontcolor),(0===p&&r.fontname||!r.fontname)&&(a.fontname=r.fontname),(0===p&&r.fontsize||!r.fontsize)&&(a.fontsize=r.fontsize),(0===p&&r.backgroundcolor||!r.backgroundcolor)&&(a.backgroundcolor=r.backgroundcolor),(0===p&&r.orderedlist||!r.orderedlist)&&(a.orderedlist=r.orderedlist),(0===p&&r.unorderedlist||!r.unorderedlist)&&(a.unorderedlist=r.unorderedlist),(0===p&&r.alignments||!r.alignments)&&(a.alignments=r.alignments),(0===p&&r.formats||!r.formats)&&(a.formats=r.formats),(0===p&&r.createlink||!r.createlink)&&(a.createlink=r.createlink),r=JSON.parse(JSON.stringify(CE));return a},e.getFormatParent=function(e,t,i,s,n,o,r){if(s.contains(i)||3===i.nodeType&&3!==s.nodeType&&s.contains(i.parentNode))do{t=this.isFormattedNode(e,t,i,n,o,r),i=i.parentNode}while(i&&i!==s);return t},e.isFormattedNode=function(e,t,i,s,n,o){return t.bold||(t.bold=lE.isBold(i)),t.italic||(t.italic=lE.isItalic(i)),t.underline||(t.underline=lE.isUnderline(i)),t.strikethrough||(t.strikethrough=lE.isStrikethrough(i)),t.superscript||(t.superscript=lE.isSuperscript(i)),t.subscript||(t.subscript=lE.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(e,i)),t.fontname||(t.fontname=this.isFontName(e,i,o)),t.fontsize||(t.fontsize=this.isFontSize(i,n)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,s),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t},e.isFontColor=function(e,t){var i=t.style&&t.style.color;return null!=i&&""!==i||3===t.nodeType||(i=this.getComputedStyle(e,t,"color")),null!==i&&""!==i&&void 0!==i?i:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t){var i=e.style&&e.style.fontSize;return null!==i&&""!==i&&void 0!==i&&(null==t||t.indexOf(i)>-1)?i:null},e.isFontName=function(e,t,i){var s=t.style&&t.style.fontFamily;null!=s&&""!==s||3===t.nodeType||(s=this.getComputedStyle(e,t,"font-family"));var n=null;return null!==s&&""!==s&&void 0!==s&&(null==i||i.filter(function(e,t){var i=new RegExp(s,"i");(e.replace(/"/g,"").replace(/ /g,"")===s.replace(/"/g,"").replace(/ /g,"")||e.search(i)>-1)&&(n=t)})&&null!==n)?null!==n?i[n]:s.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&_w.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,i){return e.defaultView.getComputedStyle(t,null).getPropertyValue(i)},e}(),xE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off("toolbar-refresh",this.onRefreshHandler),this.parent.off("destroy",this.removeEventListener)},e.prototype.onRefreshHandler=function(e){if(!this.parent.readonly){var t=[],i=[],s=[];this.parent.fontSize.items.forEach(function(e){t.push(e.value)}),this.parent.fontFamily.items.forEach(function(e){i.push(e.value)}),this.parent.format.types.forEach(function(e){s.push(e.value.toLocaleLowerCase())}),this.toolbarStatus=SE.get(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel(),s,t,i,e.documentNode),this.parent.notify("toolbar-updated",this.toolbarStatus)}},e}(),wE=function(){function e(e,t){this.parent=e,this.serviceLocator=t}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),i=Qx(e.value,e);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:i}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().innerText},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),EE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),kE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return EE(t,e),t.prototype.renderPanel=function(){var e=this.parent,t="\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset='utf-8' /> \n            <style>\n                @charset \"UTF-8\";\n                body {\n                    font-family: \"Roboto\", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                table { border-collapse: collapse; empty-cells: show;}\n                table td,table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            </style>\n        </head>"+('<body spellcheck="false" autocorrect="off" contenteditable="true">'+Qx(e.value,e)+"</body></html>"),i=this.parent.createElement("iframe",{innerHTML:t,id:this.parent.getID()+"_rte-view",className:"e-rte-content",styles:"display:block;"});this.setPanel(i),e.element.appendChild(i),i.contentDocument.body.id=this.parent.getID()+"_rte-edit-view",i.contentDocument.body.setAttribute("aria-owns",this.parent.getID()),i.contentDocument.open(),t=this.setThemeColor(t,{color:"#333"}),i.contentDocument.write(t),i.contentDocument.close(),e.enableRtl&&this.contentPanel.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,t){var i=getComputedStyle(this.parent.element,".e-richtexteditor").getPropertyValue("color");return e.replace(t.color,i)},t.prototype.getEditPanel=function(){return ae(this.contentPanel.contentDocument)?this.parent.inputElement:this.contentPanel.contentDocument.body},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t}(wE),TE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("xhtmlValidation",this.enableXhtmlValidation,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off("xhtmlValidation",this.enableXhtmlValidation),this.parent.off("destroy",this.removeEventListener)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(ae(this.parent.inputElement)?this.currentElement=this.parent.element:this.currentElement=this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML),this.parent.setProperties({value:this.currentElement.innerHTML},!0))},e.prototype.selfEncloseValidation=function(e){var t;e=e.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/&nbsp;/gi," ").replace(/ /g," ");for(var i=[],s=[],n=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],o=0;o<n.length;o++){for(t=n[o].exec(e);null!==t;)i.push(t[0].toString()),t=n[o].exec(e);s=i.slice(0);for(var r=0;r<i.length;r++)-1!==i[r].indexOf("/")&&i[r].lastIndexOf("/")===i[r].length-2||(i[r]=i[r].substr(0,i[r].length-1)+" /"+i[r].substr(i[r].length-1,i[r].length));for(var a=0;a<=i.length-1;a++)e=e.replace(s[a],i[a])}return e},e.prototype.AddRootElement=function(){if(1===this.currentElement.childNodes.length&&"DIV"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){for(var e=this.parent.createElement("div");this.currentElement.childNodes.length>0;)e.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];8===i.nodeType||"V:IMAGE"===i.nodeName?(e.removeChild(i),t--):1===i.nodeType&&this.clean(i)}return this.currentElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.currentElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute("alt"))e[t].setAttribute("alt","")}},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var i=this.currentElement.querySelectorAll(t),s=0;s<i.length;s++)for(var n=i[s].querySelectorAll(e),o=n.length;o>0;o--)Ti(n[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.currentElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var i=this.parent.createElement("span");i.style.textDecoration="underline",i.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(i,e[t]),Ti(e[t])}var s=this.currentElement.querySelectorAll("strong");for(t=s.length-1;t>=0;t--){var n=this.parent.createElement("b");n.innerHTML=s[t].innerHTML,s[t].parentNode.insertBefore(n,s[t]),Ti(s[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(var t=0;t<this.currentElement.childNodes.length;t++){var i=this.currentElement.childNodes[t];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes()))for(var s=0;s<i.childNodes.length;s++){var n=i.childNodes[s];if(3!==n.nodeType&&"TABLE"!==n.nodeName&&"TBODY"!==n.nodeName&&"THEAD"!==n.nodeName&&"TH"!==n.nodeName&&"TR"!==n.nodeName&&"TD"!==n.nodeName&&n.hasAttribute(e)&&n.removeAttribute(e),n.hasChildNodes())for(var o=0;o<n.childNodes.length;o++)3!==n.childNodes[o].nodeType&&"TABLE"!==n.childNodes[o].nodeName&&"TBODY"!==n.childNodes[o].nodeName&&"THEAD"!==n.childNodes[o].nodeName&&"TH"!==n.childNodes[o].nodeName&&"TR"!==n.childNodes[o].nodeName&&"TD"!==n.childNodes[o].nodeName&&n.childNodes[o].hasAttribute(e)&&n.childNodes[o].removeAttribute(e)}}},e}(),LE=function(){function e(e,t){this.rangeCollection=[],this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new TE(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.sanitizeHelper=function(e){return e=tw(e,this.parent)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new Uw,this.colorPickerModule=new mw(this.parent,this.locator),this.parent.on("initial-load",this.instantiateRenderer,this),this.parent.on("html-toolbar-click",this.onToolbarClick,this),this.parent.on(ax,this.onKeyDown,this),this.parent.on("render-color-picker",this.renderColorPicker,this),this.parent.on("initial-end",this.render,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.on("destroy",this.destroy,this),this.parent.on("selectAll",this.selectAll,this),this.parent.on("selectRange",this.selectRange,this),this.parent.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.on("selection-save",this.onSelectionSave,this),this.parent.on("selection-restore",this.onSelectionRestore,this),this.parent.on("readOnlyMode",this.updateReadOnly,this),this.parent.on("paste-content",this.onPaste,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(Di(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),bi([this.parent.element],"e-rte-readonly")):(Di(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),Ci([this.parent.element],"e-rte-readonly"))},e.prototype.onSelectionSave=function(){var e=this.contentRenderer.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},e.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),(ae(e.items)||e.items)&&this.saveSelection.restore()},e.prototype.onKeyDown=function(e){if(9===e.args.keyCode&&this.parent.enableTabKey){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t);if("LI"!==i[0].nodeName&&!Mi(i[0],"li")&&!Mi(i[0],"table")||0!==t.startOffset)if(e.args.preventDefault(),e.args.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var s=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),s,s,0,s.textContent.length),iE.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else iE.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}"space"!==e.args.action&&"enter"!==e.args.action||this.spaceLink(e.args)},e.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),n=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),r="",a=0;a<o.length;a++)if(""===o[a].trim())r+="<p><br></p>";else{for(var l="",h=!0,c=o[a].split(" "),p=0;p<c.length;p++)""===c[p].trim()?l+=h?"&nbsp;":" ":(h=!1,l+=c[p]+" ");r+=0===a?"<span>"+l.trim()+"</span>":"<p>"+l.trim()+"</p>"}var d=this.parent.createElement("div");d.setAttribute("class","pasteContent"),d.style.display="inline",d.innerHTML=r;var u=d.querySelectorAll("span, p");for(a=0;a<u.length;a++){var m=u[a].innerHTML.split(" "),f="";for(p=0;p<m.length;p++)m[p].match(s)||m[p].match(n)?f+='<a className="e-rte-anchor" href="'+m[p]+'" title="'+m[p]+'">'+m[p]+" </a>":f+=m[p]+" ";u[a].innerHTML=f.trim()}ae(this.parent.pasteCleanupModule)?this.parent.formatter.editorManager.execCommand("insertHTML",null,null,null,d):e.callBack(d.innerHTML)}},e.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t),s=t.startContainer.textContent.substr(0,t.endOffset),n=s.split(" "),o=n[n.length-1],r=t.startOffset-(s.length-n[n.length-1].length);o=o.slice(0,r);var a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(a)){var l=this.nodeSelectionObj.save(t,this.parent.contentModule.getDocument()),h={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,h)}},e.prototype.onToolbarClick=function(e){var t,i,s,n=e.item,o=Mi(e.originalEvent.target,".e-rte-quick-popup");if(o&&!o.classList.contains("e-rte-inline-popup")){if("SourceCode"!==n.subCommand&&"Preview"!==n.subCommand&&"FontColor"!==n.subCommand&&"BackgroundColor"!==n.subCommand){Yw()&&"Images"===n.command&&this.nodeSelectionObj.restore();var r=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());t=this.nodeSelectionObj.save(r,this.parent.contentModule.getDocument()),i=this.nodeSelectionObj.getNodeCollection(r),s=this.nodeSelectionObj.getParentNodeCollection(r)}"Images"===n.command&&this.parent.notify("image-toolbar-action",{member:"image",args:e,selectNode:i,selection:t,selectParent:s}),"Links"===n.command&&this.parent.notify("link-toolbar-action",{member:"link",args:e,selectNode:i,selection:t,selectParent:s}),"Table"===n.command&&this.parent.notify("table-toolbar-action",{member:"table",args:e,selectNode:i,selection:t,selectParent:s})}else{var a=this.parent.element.querySelector("#"+this.parent.getID()+"_rtelink"),l=this.parent.element.querySelector("#"+this.parent.getID()+"_image");if("SourceCode"!==n.subCommand&&"Preview"!==n.subCommand&&"FontColor"!==n.subCommand&&"BackgroundColor"!==n.subCommand){r=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());ae(a)&&ae(l)&&(t=this.nodeSelectionObj.save(r,this.parent.contentModule.getDocument())),i=this.nodeSelectionObj.getNodeCollection(r),s=this.nodeSelectionObj.getParentNodeCollection(r)}switch(n.subCommand){case"Maximize":this.parent.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.notify("insertLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:s});break;case"RemoveLink":this.parent.notify("unLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:s});break;case"Print":this.parent.print();break;case"Image":this.parent.notify("insertImage",{member:"image",args:e,selectNode:i,selection:t,selectParent:s});break;case"CreateTable":this.parent.notify("createTable",{member:"table",args:e,selection:t});break;case"SourceCode":this.parent.notify("sourceCode",{member:"viewSource",args:e});break;case"Preview":this.parent.notify("updateSource",{member:"updateSource",args:e});break;case"FontColor":case"BackgroundColor":break;case"File":this.parent.notify("renderFileManager",{member:"fileManager",args:e,selectNode:i,selection:t,selectParent:s});break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}},e.prototype.renderColorPicker=function(e){this.colorPickerModule.renderColorPickerInput(e)},e.prototype.instantiateRenderer=function(){this.parent.iframeSettings.enable?this.renderFactory.addRenderer(nx.Content,new kE(this.parent,this.locator)):this.renderFactory.addRenderer(nx.Content,new wE(this.parent,this.locator))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.render),this.parent.off("model-changed",this.onPropertyChanged),this.parent.off("html-toolbar-click",this.onToolbarClick),this.parent.off("render-color-picker",this.renderColorPicker),this.parent.off("destroy",this.destroy),this.parent.off(ax,this.onKeyDown),this.parent.off("initial-load",this.instantiateRenderer),this.parent.off("selectAll",this.selectAll),this.parent.off("selectRange",this.selectRange),this.parent.off("getSelectedHtml",this.getSelectedHtml),this.parent.off("selection-save",this.onSelectionSave),this.parent.off("selection-restore",this.onSelectionRestore),this.parent.off("readOnlyMode",this.updateReadOnly),this.parent.off("paste-content",this.onPaste))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(nx.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(ae(this.parent.formatter)){var i=new bE({currentDocument:this.contentRenderer.getDocument(),element:e,options:t});this.parent.setProperties({formatter:i},!0)}else this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t);this.parent.enableXhtml&&this.parent.notify("xhtmlValidation",{}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new xE(this.parent)),this.parent.notify("bind-on-end",{})},e.prototype.onPropertyChanged=function(e){if(!ae(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),i={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),i)}},e.prototype.getModuleName=function(){return"htmlEditor"},e.prototype.selectAll=function(){var e=function e(t,i){var s=[];for(i=i.firstChild;i;i=i.nextSibling)3===i.nodeType?s.push(i):s=s.concat(e(t,i));return s}(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},e.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),e.range)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},e}(),DE=function(){function e(e,t){this.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],this.blockNode=["div","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","td","tr","th","tbody","tfoot","thead","table","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.isNotFromHtml=!1,this.containsHtml=!1,this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.i10n=t.getService("rteLocale"),this.dialogRenderObj=t.getService("dialogRenderObject"),this.addEventListener()}return e.prototype.addEventListener=function(){this.nodeSelectionObj=new Uw,this.parent.isDestroyed||(this.parent.on("pasteClean",this.pasteClean,this),this.parent.on("destroy",this.destroy,this))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("pasteClean",this.pasteClean),this.parent.off("destroy",this.destroy))},e.prototype.pasteClean=function(e){var t,i=this,s={requestType:"Paste",editorMode:this.parent.editorMode,event:e},n=null;if(e.args&&!ae(e.args.clipboardData)&&(n=e.args.clipboardData.getData("text/html")),e.args&&null!==n&&"HTML"===this.parent.editorMode){if(0===n.length){var o=new RegExp(/<\/[a-z][\s\S]*>/i);n=e.args.clipboardData.getData("text/plain"),this.isNotFromHtml=""!==n,n=(n=n.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),this.containsHtml=o.test(n);var r=e&&e.args.clipboardData&&e.args.clipboardData.items.length>0?e.args.clipboardData.items[0].getAsFile():null;if(this.parent.notify("paste-content",{file:r,args:e.args,text:n,callBack:function(o){"object"==typeof(t=o)?i.parent.formatter.editorManager.execCommand("Images","Image",e.args,i.imageFormatting.bind(i,s),"pasteCleanup",t,"pasteCleanupModule"):n=t}}),!o.test(n)){var a=this.parent.createElement("div");a.innerHTML=this.splitBreakLine(n),n=a.innerHTML}}else n.length>0&&this.parent.formatter.editorManager.observer.notify("ms_word_cleanup",{args:e.args,text:e.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(e){n=e}});this.contentRenderer=this.renderFactory.getRenderer(nx.Content);var l=this.contentRenderer.getDocument(),h=this.nodeSelectionObj.getRange(l);if(this.saveSelection=this.nodeSelectionObj.save(h,l),this.parent.pasteCleanupSettings.prompt){e.args.preventDefault();var c=this.parent.createElement("div");c.innerHTML=n,""===c.textContent&&ae(c.querySelector("img"))&&ae(c.querySelector("table"))||this.pasteDialog(n,s)}else this.parent.pasteCleanupSettings.plainText?(e.args.preventDefault(),this.plainFormatting(n,s)):this.parent.pasteCleanupSettings.keepFormat?(e.args.preventDefault(),this.formatting(n,!1,s)):(e.args.preventDefault(),this.formatting(n,!0,s))}},e.prototype.splitBreakLine=function(e){for(var t=e.split("\n"),i="",s=0;s<t.length;s++){if(""===t[s].trim())i+="<p><br></p>";else i+="<p>"+this.makeSpace(t[s]).trim()+"</p>"}return i},e.prototype.makeSpace=function(e){for(var t="",i=!0,s=e.split(" "),n=0;n<s.length;n++)""===s[n].trim()?t+=i?"&nbsp;":" ":(i=!1,t+=s[n]+" ");return t},e.prototype.imgUploading=function(e){var t=e.querySelectorAll(".pasteContent_Img");if(this.parent.insertImageSettings.saveUrl&&t.length>0){for(var i=[],s=[],n=[],o=0;o<t.length;o++)t[o].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(i.push(t[o].getAttribute("src")),s.push(he("rte_image")),n.push(t[o]));var r=[];for(o=0;o<i.length;o++)r.push(this.base64ToFile(i[o],s[o]));for(o=0;o<r.length;o++)this.uploadMethod(r[o],n[o]);ae(this.parent.insertImageSettings.path)&&"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t)}else"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t);var a=e.querySelectorAll(".pasteContent_Img");for(o=0;o<a.length;o++)a[o].classList.remove("pasteContent_Img"),""===a[o].getAttribute("class").trim()&&t[o].removeAttribute("class")},e.prototype.getBlob=function(e){for(var t=0;t<e.length;t++)if(!ae(e[t].getAttribute("src"))&&e[t].getAttribute("src").split(",")[0].indexOf("base64")>=0){var i=URL.createObjectURL(iw(e[t].getAttribute("src")));e[t].setAttribute("src",i)}},e.prototype.uploadMethod=function(e,t){var i=this,s=document.createElement("div");document.body.appendChild(s),s.setAttribute("display","none"),t.style.opacity="0.5";var n=this.parent.createElement("div");this.parent.element.appendChild(n);var o=this.parent.createElement("input",{id:this.parent.element.id+"_upload",attrs:{type:"File",name:"UploadFiles"}}),r=this.parent.iframeSettings.enable?-50:-90,a=new lo(n,{relateTo:t,height:"85px",width:"300px",offsetY:r,content:o,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){i.parent.isBlur=!1,a.destroy(),Ti(a.element)}});a.element.style.display="none",bi([a.element],["e-popup-open","e-rte-upload-popup"]);var l,h,c=e.size>1e6?300:100;setTimeout(function(){i.refreshPopup(t,a)},c);var p=new mc({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:"e-rte-dialog-upload",dropArea:this.parent.inputElement,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),success:function(e){setTimeout(function(){i.popupClose(a,p,t,e)},900)},uploading:function(e){i.parent.isServerRendered||(i.parent.trigger("imageUploading",e),i.parent.inputElement.contentEditable="false")},beforeUpload:function(e){i.parent.isServerRendered?((h=JSON.parse(JSON.stringify(e))).filesData=l,e.cancel=!0,i.parent.trigger("imageUploading",h,function(e){e.cancel||(p.currentRequestHeader=e.currentRequest?e.currentRequest:p.currentRequestHeader,p.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:p.customFormDatas,p.uploadFiles(l,null))})):i.parent.trigger("beforeImageUpload",e)},failure:function(e){setTimeout(function(){i.uploadFailure(t,p,a,e)},900)},canceling:function(){i.parent.inputElement.contentEditable="true"," "===t.nextSibling.textContent&&Ti(t.nextSibling),Ti(t),a.close()},selected:function(e){e.cancel=!0,i.parent.isServerRendered&&(l=e.filesData)},removing:function(){i.parent.inputElement.contentEditable="true"," "===t.nextSibling.textContent&&Ti(t.nextSibling),Ti(t),a.close()}});p.appendTo(a.element.childNodes[0]);var d=[{name:e.name,rawFile:e,size:e.size,type:e.type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"}];p.createFileList(d),p.filesData.push(d[0]),l=d,p.upload(d),a.element.getElementsByClassName("e-file-select-wrap")[0].style.display="none",Ti(a.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap"))},e.prototype.uploadFailure=function(e,t,i,s){this.parent.inputElement.contentEditable="true",Ti(e),i&&i.close(),this.parent.trigger("imageUploadFailed",s),t.destroy()},e.prototype.popupClose=function(e,t,i,s){var n=this;this.parent.inputElement.contentEditable="true",s.element=i,this.parent.trigger("imageUploadSuccess",s,function(e){if(!ae(n.parent.insertImageSettings.path)){var t=n.parent.insertImageSettings.path+e.file.name;i.src=t,i.setAttribute("alt",e.file.name)}}),e.close(),i.style.opacity="1",t.destroy()},e.prototype.refreshPopup=function(e,t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(t.relateTo=this.parent.inputElement,t.offsetY=this.parent.iframeSettings.enable?-30:-65,t.element.style.display="block"):t&&(t.refreshPosition(e),t.element.style.display="block")},e.prototype.base64ToFile=function(e,t){for(var i=e.split(","),s=i[0].match(/:(.*?);/)[1].split("/")[1],n=atob(i[1]),o=n.length,r=new Uint8Array(o);o--;)r[o]=n.charCodeAt(o);if(bt.isIE||navigator.appVersion.indexOf("Edge")>-1){var a=new Blob([r],{type:s});return re(a,{name:t+"."+(ae(s)?"":s)}),a}return new File([r],t+"."+(ae(s)?"":s),{type:s})},e.prototype.imageFormatting=function(e,t){var i=this.parent.createElement("span");i.appendChild(t.elements[0]);var s=i.innerHTML;this.contentRenderer=this.renderFactory.getRenderer(nx.Content);var n=this.contentRenderer.getDocument(),o=this.nodeSelectionObj.getRange(n);this.saveSelection=this.nodeSelectionObj.save(o,n),this.parent.pasteCleanupSettings.prompt?this.pasteDialog(s,e):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(s,e):this.parent.pasteCleanupSettings.keepFormat?this.formatting(s,!1,e):this.formatting(s,!0,e)},e.prototype.radioRender=function(){var e=new qo({label:this.i10n.getConstant("keepFormat"),name:"pasteOption",checked:!0});e.isStringTemplate=!0;var t=this.parent.element.querySelector("#keepFormating");e.appendTo(t);var i=new qo({label:this.i10n.getConstant("cleanFormat"),name:"pasteOption"});i.isStringTemplate=!0;var s=this.parent.element.querySelector("#cleanFormat");i.appendTo(s);var n=new qo({label:this.i10n.getConstant("plainText"),name:"pasteOption"});n.isStringTemplate=!0;var o=this.parent.element.querySelector("#plainTextFormat");n.appendTo(o)},e.prototype.selectFormatting=function(e,t,i,s){i?this.formatting(e,!1,t):s?this.formatting(e,!0,t):this.plainFormatting(e,t)},e.prototype.pasteDialog=function(e,t){var i=this,s=!1,n=this.parent.height,o={buttons:[{click:function(){if(!r.isDestroyed){var o=i.parent.element.querySelector("#keepFormating").checked,a=i.parent.element.querySelector("#cleanFormat").checked;r.hide(),i.parent.height=s?n:i.parent.height,s=!1;var l=ye()?null:r;i.dialogRenderObj.close(l),r.destroy(),i.selectFormatting(e,t,o,a)}},buttonModel:{isPrimary:!0,cssClass:"e-flat e-rte-pasteok",content:this.i10n.getConstant("pasteDialogOk")}},{click:function(){if(!r.isDestroyed){r.hide(),i.parent.height=s?n:i.parent.height,s=!1;var e=ye()?null:r;i.dialogRenderObj.close(e),r.destroy()}},buttonModel:{cssClass:"e-flat e-rte-pastecancel",content:this.i10n.getConstant("pasteDialogCancel")}}],header:this.i10n.getConstant("pasteFormat"),content:this.i10n.getConstant("pasteFormatContent")+'<br/><div><div style="padding-top:24px;"><input type="radio" class="e-rte-keepformat" id="keepFormating"/></div><div style="padding-top:20px;"><input type="radio" class="e-rte-removeformat" id="cleanFormat"/></div><div style="padding-top:20px;"><input type="radio" class="e-rte-plainformat" id="plainTextFormat"/></div></div>',target:this.parent.element,width:"300px",height:"265px",cssClass:"e-rte-dialog-minheight",isModal:!0,visible:!1},r=this.dialogRenderObj.render(o),a=this.parent.element.querySelector("#"+this.parent.getID()+"_pasteCleanupDialog");null!==a&&""!==a.innerHTML&&this.destroyDialog(a),null===a&&(a=this.parent.createElement("div",{id:this.parent.getID()+"_pasteCleanupDialog"}),this.parent.element.appendChild(a)),r.appendTo(a),this.radioRender(),this.parent.element.offsetHeight<parseInt(r.height.split("px")[0],null)&&(this.parent.height=parseInt(r.height.split("px")[0],null)+40,s=!0),r.show()},e.prototype.destroyDialog=function(e){Ti(this.parent.element.querySelector(".e-dlg-container"));for(var t=e.children.length,i=0;i<t;i++)Ti(e.children[0])},e.prototype.formatting=function(e,t,i){var s=this,n=this.parent.createElement("div",{className:"pasteContent",styles:"display:inline;"});this.isNotFromHtml&&this.containsHtml&&(e=this.splitBreakLine(e)),n.innerHTML=e,null!==this.parent.pasteCleanupSettings.deniedTags&&(n=this.deniedTags(n)),t?n=this.deniedAttributes(n,t):null!==this.parent.pasteCleanupSettings.deniedAttrs&&(n=this.deniedAttributes(n,t)),null!==this.parent.pasteCleanupSettings.allowedStyleProps&&(n=this.allowedStyle(n)),this.saveSelection.restore(),n.innerHTML=this.sanitizeHelper(n.innerHTML);for(var o=n.querySelectorAll("img"),r=0;r<o.length;r++)o[r].classList.add("pasteContent_Img");this.addTempClass(n),""===n.textContent&&ae(n.querySelector("img"))&&ae(n.querySelector("table"))||(this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",i,function(e){re(i,{elements:e.elements,imageElements:e.imgElem},!0),s.parent.formatter.onSuccess(s.parent,i)},n),this.removeTempClass(),this.parent.notify("toolbar-refresh",{}),this.imgUploading(this.parent.inputElement),this.parent.iframeSettings.enable&&this.parent.updateValue())},e.prototype.addTempClass=function(e){for(var t=e.children,i=0;i<t.length;i++)t[i].classList.add("pasteContent_RTE")},e.prototype.removeTempClass=function(){for(var e=this.parent.inputElement.querySelectorAll(".pasteContent_RTE"),t=0;t<e.length;t++)e[t].classList.remove("pasteContent_RTE"),""===e[t].getAttribute("class")&&e[t].removeAttribute("class")},e.prototype.sanitizeHelper=function(e){return e=tw(e,this.parent)},e.prototype.plainFormatting=function(e,t){var i=this,s=this.parent.createElement("div",{className:"pasteContent",styles:"display:inline;"});if(s.innerHTML=e,this.detachInlineElements(s),this.getTextContent(s),""!==s.textContent.trim()){if(!ae(s.firstElementChild)&&"BR"!==s.firstElementChild.tagName){var n=s.firstElementChild;if(!ae(s.firstElementChild)){for(var o=this.parent.createElement("span"),r=0,a=0;r<n.childNodes.length;r++,a++)if("#text"===n.childNodes[r].nodeName)o.appendChild(n.childNodes[r]),s.insertBefore(o,s.firstElementChild),r--;else{if("#text"===n.childNodes[r].nodeName||0!==a)break;for(var l=0;l<n.childNodes[r].childNodes.length;l++)o.appendChild(n.childNodes[r].childNodes[l]),s.insertBefore(o,s.firstElementChild),l--;r--}n.hasChildNodes()||Ti(n)}}this.removeEmptyElements(s),this.saveSelection.restore(),s.innerHTML=this.sanitizeHelper(s.innerHTML),this.addTempClass(s),this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",t,function(e){re(t,{elements:e.elements,imageElements:e.imgElem},!0),i.parent.formatter.onSuccess(i.parent,t)},s),this.removeTempClass()}else this.saveSelection.restore(),re(t,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,t)},e.prototype.getTextContent=function(e){for(var t=0;t<this.blockNode.length;t++)for(var i=e.querySelectorAll(this.blockNode[t]),s=0;s<i.length;s++){for(var n=void 0,o=0,r=0,a=void 0;o<i[s].childNodes.length;o++,r++)if("DIV"===i[s].childNodes[o].nodeName||"P"===i[s].childNodes[o].nodeName||"#text"===i[s].childNodes[o].nodeName&&"&nbsp;"!==i[s].childNodes[o].nodeValue.replace(/\u00a0/g,"&nbsp;")&&""===i[s].childNodes[o].textContent.trim())n=i[s].childNodes[o].parentElement,i[s].childNodes[o].parentElement.parentElement.insertBefore(i[s].childNodes[o],i[s].childNodes[o].parentElement),o--;else{if(n=i[s].childNodes[o].parentElement,"text"===a){n.previousElementSibling.appendChild(i[s].childNodes[o])}else{var l=this.parent.createElement("div",{id:"newDiv"});l.appendChild(i[s].childNodes[o]),n.parentElement.insertBefore(l,n)}o--,a="text"}ae(n)||Ti(n)}var h=e.querySelectorAll("*");for(t=0;t<h.length;t++){var c=h[t].attributes;for(s=0;s<c.length;s++)h[t].removeAttribute(c[s].name),s--}},e.prototype.detachInlineElements=function(e){for(var t=0;t<this.inlineNode.length;t++)for(var i=e.querySelectorAll(this.inlineNode[t]),s=0;s<i.length;s++){for(var n=void 0,o=0;o<i[s].childNodes.length;o++)n=i[s].childNodes[o].parentElement,i[s].childNodes[o].parentElement.parentElement.insertBefore(i[s].childNodes[o],i[s].childNodes[o].parentElement),o--;ae(n)||Ti(n)}},e.prototype.findDetachEmptyElem=function(e){return ae(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"pasteContent"!==e.parentElement.getAttribute("class")?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("BR"!==t[i].tagName){var s=this.findDetachEmptyElem(t[i]);ae(s)||Ti(s)}},e.prototype.tagGrouping=function(e){for(var t=e.slice(),i=Object.keys(Aw),s=i.map(function(e){return Aw[e]}),n=[],o=0;o<t.length;o++)if(t[o].split("[").length>1&&(t[o]=t[o].split("[")[0].trim()),i.indexOf(t[o])>-1)for(var r=0;r<s[i.indexOf(t[o])].length;r++)t.indexOf(s[i.indexOf(t[o])][r])<0&&n.indexOf(s[i.indexOf(t[o])][r])<0&&n.push(s[i.indexOf(t[o])][r]);return e.concat(n)},e.prototype.attributesfilter=function(e){for(var t=0;t<e.length;t++)if(e[t].split("[").length>1){for(var i=e[t].split("[")[1].split("]")[0].split(","),s=[],n=[],o=0;o<i.length;o++)i[o].indexOf("!")<0?s.push(i[o].trim()):n.push(i[o].split("!")[1].trim());var r=s.length>1?s.join("]["):s.join(),a=n.length>1?n.join("]["):n.join();if(a.length>0){var l=""!==r?e[t].split("[")[0]+"["+r+"]":e[t].split("[")[0];e[t]=l+":not(["+a+"])"}else e[t]=e[t].split("[")[0]+"["+r+"]"}return e},e.prototype.deniedTags=function(e){var t=ae(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice();t=this.attributesfilter(t),t=this.tagGrouping(t);for(var i=0;i<t.length;i++)for(var s=e.querySelectorAll(t[i]),n=s.length-1;n>=0;n--){for(var o=s[n].parentNode;s[n].firstChild;)o.insertBefore(s[n].firstChild,s[n]);o.removeChild(s[n])}return e},e.prototype.deniedAttributes=function(e,t){var i=ae(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice();t&&i.push("style");for(var s=0;s<i.length;s++)for(var n=e.querySelectorAll("["+i[s]+"]"),o=0;o<n.length;o++)n[o].removeAttribute(i[s]);return e},e.prototype.allowedStyle=function(e){var t=ae(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice();t.push("list-style-type","list-style");for(var i=e.querySelectorAll("[style]"),s=0;s<i.length;s++){for(var n,o=[],r=i[s].getAttribute("style").split(";"),a=0;a<r.length;a++)t.indexOf(r[a].split(":")[0].trim())>=0&&o.push(r[a]);i[s].removeAttribute("style"),(n=""===o.join(";").trim()?o.join(";"):o.join(";")+";")&&i[s].setAttribute("style",n)}return e},e.prototype.getModuleName=function(){return"pasteCleanup"},e}(),IE=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initial-end",this.renderResizable,this),this.parent.on("destroy",this.destroy,this))},e.prototype.renderResizable=function(){this.resizer=this.parent.createElement("div",{id:this.parent.getID()+"-resizable",className:"e-icons e-resize-handle e-south-east"}),this.parent.element.classList.add("e-rte-resize"),this.parent.element.appendChild(this.resizer),this.touchStartEvent="msie"===bt.info.name?"pointerdown":"touchstart",Ct.add(this.resizer,"mousedown",this.resizeStart,this),Ct.add(this.resizer,this.touchStartEvent,this.resizeStart,this)},e.prototype.resizeStart=function(e){var t=this;e.cancelable&&e.preventDefault(),this.wireResizeEvents(),this.parent.notify("resizeInitialized",{});var i=ye()?{requestType:"editor"}:{event:e,requestType:"editor"};this.parent.trigger("resizeStart",i,function(e){e.cancel&&t.unwireResizeEvents()})},e.prototype.performResize=function(e){var t=this,i=ye()?{requestType:"editor"}:{event:e,requestType:"editor"};this.parent.trigger("resizing",i,function(e){e.cancel&&t.unwireResizeEvents()});var s=this.parent.element.getBoundingClientRect();if(this.isMouseEvent(e))this.parent.element.style.height=e.clientY-s.top+"px",this.parent.element.style.width=e.clientX-s.left+"px";else{var n="msie"!==bt.info.name?e.touches[0]:e;this.parent.element.style.height=n.clientY-s.top+"px",this.parent.element.style.width=n.clientX-s.left+"px"}this.parent.toolbarSettings.enable||this.parent.setContentHeight("",!1),this.parent.refreshUI()},e.prototype.stopResize=function(e){this.parent.refreshUI(),this.unwireResizeEvents();var t=ye()?{requestType:"editor"}:{event:e,requestType:"editor"};this.parent.trigger("resizeStop",t)},e.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},e.prototype.isMouseEvent=function(e){var t=!1;return("mouse"===this.getEventType(e.type)||!ae(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},e.prototype.wireResizeEvents=function(){Ct.add(document,"mousemove",this.performResize,this),Ct.add(document,"mouseup",this.stopResize,this),this.touchMoveEvent="msie"===bt.info.name?"pointermove":"touchmove",this.touchEndEvent="msie"===bt.info.name?"pointerup":"touchend",Ct.add(document,this.touchMoveEvent,this.performResize,this),Ct.add(document,this.touchEndEvent,this.stopResize,this)},e.prototype.unwireResizeEvents=function(){Ct.remove(document,"mousemove",this.performResize),Ct.remove(document,"mouseup",this.stopResize),Ct.remove(document,this.touchMoveEvent,this.performResize),Ct.remove(document,this.touchEndEvent,this.stopResize)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.renderResizable),this.parent.element.classList.remove("e-rte-resize"),Ct.remove(this.resizer,"mousedown",this.resizeStart),Ct.remove(this.resizer,this.touchStartEvent,this.resizeStart),this.resizer&&Ti(this.resizer),this.parent.off("destroy",this.destroy))},e.prototype.getModuleName=function(){return"resize"},e}(),OE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),AE=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},ME=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return OE(t,e),AE([os(null)],t.prototype,"downloadUrl",void 0),AE([os(null)],t.prototype,"getImageUrl",void 0),AE([os(null)],t.prototype,"uploadUrl",void 0),AE([os(null)],t.prototype,"url",void 0),t}(Ls),PE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),NE=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},RE=["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],BE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return PE(t,e),NE([os(RE)],t.prototype,"items",void 0),NE([os(!0)],t.prototype,"visible",void 0),t}(Ls),HE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),FE=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},jE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return HE(t,e),FE([os(!0)],t.prototype,"allowSearchOnTyping",void 0),FE([os("contains")],t.prototype,"filterType",void 0),FE([os(!0)],t.prototype,"ignoreCase",void 0),t}(Ls),VE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),zE=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},_E=[{field:"name",headerText:"Name",minWidth:120,template:'<span class="e-fe-text">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"_fm_modified",headerText:"DateModified",type:"dateTime",format:"MMMM dd, yyyy HH:mm",minWidth:120,width:"190"},{field:"size",headerText:"Size",minWidth:90,width:"110",template:'<span class="e-fe-size">${size}</span>'}],qE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return VE(t,e),zE([os(!0)],t.prototype,"columnResizing",void 0),zE([os(_E)],t.prototype,"columns",void 0),t}(Ls),WE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),UE=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},GE=["Open","|","Cut","Copy","|","Delete","Download","Rename","|","Details"],YE=["Open","|","Cut","Copy","Paste","|","Delete","Rename","Download","|","Details"],XE=["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"],KE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return WE(t,e),UE([os(GE)],t.prototype,"file",void 0),UE([os(YE)],t.prototype,"folder",void 0),UE([os(XE)],t.prototype,"layout",void 0),UE([os(!0)],t.prototype,"visible",void 0),t}(Ls),ZE=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),QE=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},JE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ZE(t,e),QE([os("650px")],t.prototype,"maxWidth",void 0),QE([os("240px")],t.prototype,"minWidth",void 0),QE([os(!0)],t.prototype,"visible",void 0),t}(Ls),$E=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),ek=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},tk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $E(t,e),ek([os("")],t.prototype,"allowedExtensions",void 0),ek([os(!0)],t.prototype,"autoUpload",void 0),ek([os(!1)],t.prototype,"autoClose",void 0),ek([os(0)],t.prototype,"minFileSize",void 0),ek([os(3e7)],t.prototype,"maxFileSize",void 0),t}(Ls);(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();var ik;(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear();!function(e){(ik||(ik={})).createListItems=function(e,t,i,s,n,o){var r,a;this.calendarMode;var l=6e4*o,h=[],c=[];for(r=+t.setMilliseconds(0),a=+i.setMilliseconds(0);a>=r;)c.push(r),h.push(s.formatDate(new Date(r),{format:n,type:"time"})),r+=l;return{collection:c,list:dp.createList(e,h,null,!0)}}}();(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds(),(new Date).getMilliseconds(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();var sk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),nk=(Array,function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),ok=(Array,function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),rk=(Array,function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),ak=function(){return function(){}}();Array,function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();(function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}})(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}}();var lk=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showFullScreen=function(e){!0!==this.parent.toolbarSettings.enable||"Markdown"===this.parent.editorMode||ae(this.parent.quickToolbarModule)||this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=ho(this.parent.element),this.parent.element.classList.contains("e-rte-full-screen")||(this.parent.trigger("actionBegin",{requestType:"Maximize",targetItem:"Maximize",args:e}),this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable&&this.parent.toolbarSettings.enable&&(this.parent.getToolbarElement().style.width="100%",this.parent.getToolbarElement().style.top="0px"),this.parent.element.classList.add("e-rte-full-screen"),this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),bt.isDevice&&this.parent.toolbarModule.removeFixedTBarClass(),this.parent.toolbarModule.updateItem({targetItem:"Maximize",updateItem:"Minimize",baseToolbar:this.parent.getBaseToolbarObject()})),this.parent.trigger("actionComplete",{requestType:"Maximize",targetItem:"Maximize",args:e}))},e.prototype.hideFullScreen=function(e){if(!0!==this.parent.toolbarSettings.enable||"Markdown"===this.parent.editorMode||ae(this.parent.quickToolbarModule)||this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.element.classList.contains("e-rte-full-screen")){this.parent.element.classList.remove("e-rte-full-screen");for(var t=document.querySelectorAll(".e-rte-overflow"),i=0;i<t.length;i++)Ci([t[i]],["e-rte-overflow"]);this.parent.trigger("actionBegin",{requestType:"Minimize",targetItem:"Minimize",args:e}),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),this.parent.toolbarModule.updateItem({targetItem:"Minimize",updateItem:"Maximize",baseToolbar:this.parent.getBaseToolbarObject()}),bt.isDevice&&this.parent.inlineMode.enable&&this.parent.toolbarModule.addFixedTBarClass()),this.parent.trigger("actionComplete",{requestType:"Minimize",targetItem:"Minimize",args:e})}},e.prototype.toggleParentOverflow=function(e){if(!ae(this.scrollableParent))for(var t=0;t<this.scrollableParent.length;t++){if("#document"===this.scrollableParent[t].nodeName)bi([document.querySelector("body")],["e-rte-overflow"]);else bi([this.scrollableParent[t]],["e-rte-overflow"])}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"full-screen":this.showFullScreen(e.args),t.preventDefault();break;case"escape":this.hideFullScreen(e.args),t.preventDefault()}},e.prototype.addEventListener=function(){this.parent.on(ax,this.onKeyDown,this),this.parent.on("destroy",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off(ax,this.onKeyDown),this.parent.off("destroy",this.destroy)},e.prototype.destroy=function(){this.parent.element.classList.contains("e-rte-full-screen")&&this.toggleParentOverflow(!1);for(var e=document.querySelectorAll(".e-rte-overflow"),t=0;t<e.length;t++)Ci([e[t]],["e-rte-overflow"]);this.removeEventListener()},e}();function hk(e,t,i,s){var n;i?n=t.contentModule.getDocument().querySelector("body"):n=t.element;if(Object.keys(e).length)for(var o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];if("class"===a)n.classList.add(e[a]);else if("disabled"===a&&"disabled"===e[a])t.enabled=!1,t.setEnable();else if("readonly"===a&&"readonly"===e[a])t.readonly=!0,t.setReadOnly(s);else if("style"===a)n.setAttribute("style",e[a]);else if("tabindex"===a)t.inputElement.setAttribute("tabindex",e[a]);else if("placeholder"===a)t.placeholder=e[a],t.setPlaceHolder();else{["name","required"].indexOf(a)>-1?t.valueContainer.setAttribute(a,e[a]):n.setAttribute(a,e[a])}}}var ck=function(){function e(e,t){this.parent=e,this.locator=t,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.render=function(){this.parent;this.contentRenderer=this.renderer.getRenderer(nx.Content),this.contentRenderer.renderPanel()},e.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.parent.notify(e.requestType+"-begin",e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("model-changed",this.refresh,this),this.parent.on(rx,this.keyUp,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("model-changed",this.refresh),this.parent.off(rx,this.keyUp))},e.prototype.keyUp=function(e){if("HTML"===this.parent.editorMode)switch(e.args.which){case 46:case 8:var t=this.parent.contentModule.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||"P"===t[0].tagName&&(0===t[0].childNodes.length||""===t[0].textContent))){var i=this.parent.contentModule.getEditPanel();i.innerHTML="<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i.childNodes[0],0)}}},e}(),pk=function(){function e(e,t){this.parent=e,this.rteID=e.element.id,this.i10n=t.getService("rteLocale"),this.addEventListener(),this.serviceLocator=t,this.rendererFactory=t.getService("rendererFactory"),this.dialogRenderObj=t.getService("dialogRenderObject")}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("insertLink",this.linkDialog,this),this.parent.on(ax,this.onKeyDown,this),this.parent.on("insertCompleted",this.showLinkQuickToolbar,this),this.parent.on("link-toolbar-action",this.onToolbarAction,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on("unLink",this.removeLink,this),this.parent.on("editLink",this.editLink,this),this.parent.on("openLink",this.openLink,this),this.parent.on("editAreaClick",this.editAreaClickHandler,this),this.parent.on("destroy",this.destroy,this))},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"OpenLink":this.parent.notify("openLink",e);break;case"EditLink":this.parent.notify("editLink",e);break;case"RemoveLink":this.parent.notify("unLink",e)}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("insertLink",this.linkDialog),this.parent.off(ax,this.onKeyDown),this.parent.off("insertCompleted",this.showLinkQuickToolbar),this.parent.off("link-toolbar-action",this.onToolbarAction),this.parent.off("unLink",this.removeLink),this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off("editLink",this.editLink),this.parent.off("openLink",this.openLink),this.parent.off("editAreaClick",this.editAreaClickHandler),this.parent.off("destroy",this.destroy))},e.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},e.prototype.showLinkQuickToolbar=function(e){if("enter"!==e.args.action&&"space"!==e.args.action){var t=void 0,i=void 0;if("Links"!==e.type||ae(this.parent.quickToolbarModule)||ae(this.parent.quickToolbarModule.linkQTBar))return;this.quickToolObj=this.parent.quickToolbarModule;var s,n=this.parent.element.getBoundingClientRect().top,o=this.parent.element.getBoundingClientRect().left,r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if([].forEach.call(e.elements,function(e,t){0===t&&(s="#text"===e.nodeName?e.parentNode:e)}),e.isNotify){var a=this.parent.toolbarModule.getToolbarElement(),l=s.getBoundingClientRect().top,h=s.getBoundingClientRect().left,c=l-n,p=a?a.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;t=this.parent.iframeSettings.enable?o+h:s.getBoundingClientRect().left,i=window.pageYOffset+(this.parent.iframeSettings.enable?n+p+l:n+c)}else{var d=void 0;d=e.args.touches?e.args.changedTouches[0]:d=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+o+d.clientX:d.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+n+d.clientY:d.pageY}this.quickToolObj.linkQTBar&&this.quickToolObj.linkQTBar.showPopup(t,i,r.endContainer)}},e.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.linkQTBar&&document.body.contains(this.quickToolObj.linkQTBar.element)&&this.quickToolObj.linkQTBar.hidePopup()},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.linkQTBar){this.quickToolObj=this.parent.quickToolbarModule;var s=t.target;s=this.getAnchorNode(s),this.contentModule=this.rendererFactory.getRenderer(nx.Content);var n=this.quickToolObj.linkQTBar.element.classList.contains("e-rte-pop");if("A"===s.nodeName&&s.childNodes.length>0&&"IMG"!==s.childNodes[0].nodeName&&"IMG"!==e.args.target.nodeName){if(n)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()}}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"escape":ae(this.dialogObj)||this.dialogObj.close();break;case"insert-link":if("HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),r={args:e.args,selectNode:n,selection:s,selectParent:o};this.linkDialog(r)}else{var a=this.parent.contentModule.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(a.selectionStart,a.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:t},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertLink"})}t.preventDefault()}},e.prototype.linkDialog=function(e,t){var i=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else if("HTML"===this.parent.editorMode&&e.selectParent.length>0&&!ae(e.selectParent[0].classList)&&e.selectParent[0].classList.contains("e-rte-anchor")&&ae(t))this.editLink(e);else{var s,n=this.i10n.getConstant("linkWebUrl"),o=this.i10n.getConstant("linkText"),r=this.i10n.getConstant("linkTooltipLabel"),a=this.i10n.getConstant("linkurl"),l=this.i10n.getConstant("textPlaceholder"),h=this.i10n.getConstant("linkTitle"),c=this.parent.createElement("div",{className:"e-rte-link-dialog",id:this.rteID+"_rtelink"});this.parent.element.appendChild(c);var p=this.parent.createElement("div",{className:"e-rte-linkcontent",id:this.rteID+"_linkContent"}),d=Kx('<div class="e-rte-label"><label>'+n+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" spellcheck="false" placeholder="'+a+'" class="e-input e-rte-linkurl"/></div><div class="e-rte-label"><label>'+o+'</label></div><div class="e-rte-field"> <input type="text" data-role ="none" spellcheck="false" class="e-input e-rte-linkText" placeholder="'+l+'"></div><div class="e-rte-label">'+("HTML"===this.parent.editorMode?"<label>"+r+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" spellcheck="false" placeholder = "'+h+'" class="e-input e-rte-linkTitle"></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget"  data-role ="none"></div>':""));p.appendChild(d);var u=p.querySelector(".e-rte-linkTarget"),m=p.querySelector(".e-rte-linkurl"),f=p.querySelector(".e-rte-linkText"),g=p.querySelector(".e-rte-linkTitle"),v=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new jo({label:v,checked:!0,enableRtl:this.parent.enableRtl}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(u),s="HTML"===this.parent.editorMode?e.selection.getRange(this.parent.contentModule.getDocument()).toString():e.text;var y=this.i10n.getConstant("dialogInsert"),b=this.i10n.getConstant("dialogCancel"),C=e.selection,S={selfLink:this,selection:e.selection,selectParent:e.selectParent,args:e.args},x={header:this.i10n.getConstant("linkHeader"),content:p,cssClass:"e-rte-elements",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:bt.isDevice?"290px":"310px",height:"inherit",isModal:bt.isDevice,buttons:[{click:this.insertlink.bind(S),buttonModel:{content:y,cssClass:"e-flat e-insertLink",isPrimary:!0}},{click:this.cancelDialog.bind(S),buttonModel:{cssClass:"e-flat",content:b}}],target:bt.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(e){i.parent.isBlur=!1,e&&e.event.returnValue&&("HTML"===i.parent.editorMode?C.restore():i.parent.formatter.editorManager.markdownSelection.restore(i.parent.contentModule.getEditPanel())),i.dialogObj.destroy(),Ti(i.dialogObj.element);var t=ye()?null:i.dialogObj;i.dialogRenderObj.close(t),i.dialogObj=null}};this.dialogObj=this.dialogRenderObj.render(x),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(c),c.style.maxHeight="inherit",ae(t)||(m.value=t.url,f.value=t.text,g.value=t.title,t.target?this.checkBoxObj.checked=!0:this.checkBoxObj.checked=!1,this.dialogObj.header=t.header,this.dialogObj.element.querySelector(".e-insertLink").textContent=t.btnText),this.checkUrl(!1),("HTML"===this.parent.editorMode&&ae(t)&&(!ae(s)&&""!==s&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||"Markdown"===e.module)&&(f.value=s),Ct.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup())}},e.prototype.insertlink=function(e){var t,i=this.selfLink.dialogObj.element,s=i.querySelector(".e-rte-linkurl").value,n=i.querySelector(".e-rte-linkText").value;"HTML"===this.selfLink.parent.editorMode&&(t=i.querySelector(".e-rte-linkTitle").value);var o=this.selfLink.checkBoxObj.checked?"_blank":null;if(""!==s){this.selfLink.isUrl(s)?this.selfLink.checkUrl(!1):(n=""===n?s:n,s=this.selfLink.parent.enableAutoUrl?s:s.indexOf("http")>-1?s:"http://"+s);var r=this.selfLink;if("HTML"===r.parent.editorMode&&ae(Mi(this.selection.range.startContainer.parentNode,"#"+r.parent.contentModule.getPanel().id))){r.parent.contentModule.getEditPanel().focus(),bt.isIE&&r.parent.iframeSettings.enable&&this.selection.restore();var a=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument());this.selection=r.parent.formatter.editorManager.nodeSelection.save(a,r.parent.contentModule.getDocument()),this.selectParent=r.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(a)}var l,h={url:s,text:n,title:t,target:o,selection:this.selection,selectParent:this.selectParent};if(document.body.contains(r.dialogObj.element)&&this.selfLink.dialogObj.hide({returnValue:!1}),Yw()&&r.parent.iframeSettings.enable&&Ii("iframe",r.parent.element).contentWindow.focus(),"HTML"===r.parent.editorMode&&this.selection.restore(),0===r.parent.formatter.getUndoRedoStack().length&&r.parent.formatter.saveData(),"KeyK"===this.args.code){var c=this.args;re(this.args,{item:{command:"Links",subCommand:"CreateLink"},originalEvent:c},!0),l={item:{command:"Links",subCommand:"CreateLink"},originalEvent:c}}else l=this.args;this.selfLink.parent.formatter.process(this.selfLink.parent,l,this.args.originalEvent,h),this.selfLink.parent.contentModule.getEditPanel().focus()}else this.selfLink.checkUrl(!0)},e.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},e.prototype.checkUrl=function(e){var t=this.dialogObj.element.querySelector(".e-rte-linkurl");e?(bi([t],"e-error"),t.setSelectionRange(0,t.value.length),t.focus()):Ci([t],"e-error")},e.prototype.removeLink=function(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,subCommand:e.args.item.subCommand}),Yw()&&this.parent.iframeSettings.enable?Ii("iframe",this.parent.element).contentWindow.focus():this.parent.contentModule.getEditPanel().focus(),this.hideLinkQuickToolbar()},e.prototype.openLink=function(e){var t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,target:""===t.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.getAnchorNode=function(e){var t=Mi(e,"a");return t||e},e.prototype.editLink=function(e){var t=this.getAnchorNode(e.selectNode[0]),i=this.getAnchorNode(e.selectParent[0]);if((i="A"===t.nodeName?t:i).classList.contains("e-rte-anchor")||"A"===i.tagName){var s=this.i10n.getConstant("dialogUpdate"),n={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target,header:this.i10n.getConstant("editLink"),btnText:s};this.linkDialog(e,n)}},e.prototype.cancelDialog=function(e){this.selfLink.parent.isBlur=!1,this.selfLink.dialogObj.hide({returnValue:!0}),Yw()?this.selection.restore():this.selfLink.parent.contentModule.getEditPanel().focus()},e.prototype.onDocumentClick=function(e){var t=e.target;!ae(this.dialogObj)&&(!Mi(t,"#"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||(this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)||this.parent.inlineMode.enable&&!Mi(t,"#"+this.dialogObj.element.id))&&!Mi(t,"#"+this.parent.getID()+"_toolbar_CreateLink")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_CreateLink"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,Xx(this.parent.element,"focusout"))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return"link"},e}(),dk=function(){function e(e,t){this.isImgUploaded=!1,this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteID=e.element.id,this.i10n=t.getService("rteLocale"),this.rendererFactory=t.getService("rendererFactory"),this.dialogRenderObj=t.getService("dialogRenderObject"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ax,this.onKeyDown,this),this.parent.on(rx,this.onKeyUp,this),this.parent.on("insertImage",this.insertImage,this),this.parent.on("insertCompleted",this.showImageQuickToolbar,this),this.parent.on("image-toolbar-action",this.onToolbarAction,this),this.parent.on("caption",this.caption,this),this.parent.on("delete",this.deleteImg,this),this.parent.on("insertImgLink",this.insertImgLink,this),this.parent.on("imgAltText",this.insertAltText,this),this.parent.on("editAreaClick",this.editAreaClickHandler,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on("imageSize",this.imageSize,this),this.parent.on("dropDownSelect",this.alignmentSelect,this),this.parent.on("initial-end",this.afterRender,this),this.parent.on("paste-content",this.imagePaste,this),this.parent.on("destroy",this.removeEventListener,this))},e.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){this.parent.off(ax,this.onKeyDown),this.parent.off(rx,this.onKeyUp),this.parent.off("insertImage",this.insertImage),this.parent.off("insertCompleted",this.showImageQuickToolbar),this.parent.off("caption",this.caption),this.parent.off("image-toolbar-action",this.onToolbarAction),this.parent.off("delete",this.deleteImg),this.parent.off("insertImgLink",this.insertImgLink),this.parent.off("imgAltText",this.insertAltText),this.parent.off("editAreaClick",this.editAreaClickHandler),this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off("imageSize",this.imageSize),this.parent.off("dropDownSelect",this.alignmentSelect),this.parent.off("initial-end",this.afterRender),this.parent.off("paste-content",this.imagePaste),this.parent.off("destroy",this.removeEventListener);var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.removeEventListener("drop",this.dragDrop.bind(this),!0),e.removeEventListener("dragstart",this.dragStart.bind(this),!0),e.removeEventListener("dragenter",this.dragEnter.bind(this),!0),e.removeEventListener("dragover",this.dragOver.bind(this),!0),ae(this.contentModule)||(Ct.remove(this.contentModule.getEditPanel(),bt.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off("checkUndoStack",this.undoStack),this.parent.insertImageSettings.resize&&(Ct.remove(this.parent.contentModule.getEditPanel(),bt.touchStartEvent,this.resizeStart),Ct.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),Ct.remove(this.contentModule.getEditPanel(),"cut",this.onCutHandler)))}},e.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},e.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(nx.Content),Ct.add(this.contentModule.getEditPanel(),bt.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(Ct.add(this.parent.contentModule.getEditPanel(),bt.touchStartEvent,this.resizeStart,this),Ct.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),Ct.add(this.contentModule.getEditPanel(),"cut",this.onCutHandler,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragOver.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)},e.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=this.parent.createElement("div"),s=Kx(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(s);var n=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&n.length>0){for(var o=0;o<n.length;o++)n[o].style.outline="";Ti(i.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},e.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",bt.isDevice&&Ci([e.target.parentElement],"e-mob-span");var t=ye()?{requestType:"images"}:{event:e,requestType:"images"};this.parent.trigger("resizeStop",t);this.getPointX(e),this.parent.iframeSettings.enable?(window.pageYOffset,this.parent.element.getBoundingClientRect().top,e.clientY):e.pageY;this.parent.formatter.editorManager.observer.on("checkUndoStack",this.undoStack,this),this.parent.formatter.saveData()},e.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var s=t||e.target;if(this.prevSelectedImgEle=this.imgEle,"IMG"===s.tagName){this.parent.preventDefaultResize(e);var n=s;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&Ti(this.imgResizeDiv),this.imageResize(n)}if(s.classList.contains("e-rte-imageboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup(),s.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),s.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),s.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),s.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),bt.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))bi([this.imgResizeDiv],"e-mob-span");else{var o=ye()?{requestType:"images"}:{event:e,requestType:"images"};this.parent.trigger("resizeStart",o,function(e){e.cancel&&i.cancelResizeAction()})}Ct.add(this.contentModule.getDocument(),bt.touchEndEvent,this.resizeEnd,this)}}},e.prototype.imageClick=function(e){bt.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.contentModule.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()},e.prototype.onCutHandler=function(){this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},e.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,bi([this.imgEle],"e-resize"),this.imgResizeDiv=this.parent.createElement("span",{className:"e-img-resize",id:this.rteID+"_imgResize"}),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),bt.isDevice&&bi([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv),Ct.add(this.contentModule.getDocument(),bt.touchMoveEvent,this.resizing,this)},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},e.prototype.imgResizePos=function(e,t){var i=this.calcPos(e),s=i.top,n=i.left,o=e.width,r=e.height,a=bt.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=bt.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=n-a+"px",t.querySelector(".e-rte-botLeft").style.top=r-a+s+"px",t.querySelector(".e-rte-botRight").style.left=o-(a-l)+n+"px",t.querySelector(".e-rte-botRight").style.top=r-a+s+"px",t.querySelector(".e-rte-topRight").style.left=o-(a-l)+n+"px",t.querySelector(".e-rte-topRight").style.top=s-a+"px",t.querySelector(".e-rte-topLeft").style.left=n-a+"px",t.querySelector(".e-rte-topLeft").style.top=s-a+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),s=e.ownerDocument,n=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?Mi(e,"#"+this.parent.getID()+"_rte-edit-view"):e.offsetParent)||s.documentElement;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},e.prototype.setAspectRatio=function(e,t,i){if(!ae(e.width)){var s=""!==e.style.width?parseInt(e.style.width,10):e.width,n=""!==e.style.height?parseInt(e.style.height,10):e.height;s>n?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(s/n*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=s/n*i+"px",e.style.height=i+"px"):(e.setAttribute("width",(s/n*i).toString()),e.setAttribute("height",i.toString())):n>s?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=n/s*t+"px"):(e.setAttribute("width",t.toString()),e.setAttribute("height",(n/s*t).toString())):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=t+"px"):(e.setAttribute("width",t.toString()),e.setAttribute("height",t.toString()))}},e.prototype.pixToPerc=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},e.prototype.imgDupMouseMove=function(e,t,i){var s=this,n=ye()?{requestType:"images"}:{event:i,requestType:"images"};this.parent.trigger("resizing",n,function(i){if(i.cancel)s.cancelResizeAction();else{if(parseInt(s.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(s.parent.getInsertImgMaxWidth(),10)<=parseInt(e,10)&&ae(s.imgEle.style.width))return;if(!s.parent.insertImageSettings.resizeByPercent&&(parseInt(s.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(s.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10)))return;s.imgEle.parentElement.style.cursor="pointer",s.setAspectRatio(s.imgEle,parseInt(e,10),parseInt(t,10)),s.resizeImgDupPos(s.imgEle),s.imgResizePos(s.imgEle,s.imgResizeDiv),s.parent.setContentHeight("",!1)}})},e.prototype.resizing=function(e){this.imgEle.offsetWidth>=this.parent.getInsertImgMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),s=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,n=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.imgDupPos.width,10)+s,r=parseInt(this.imgDupPos.height,10)+n;this.pageX=t,this.pageY=i,this.resizeBtnStat.botRight?this.imgDupMouseMove(o+"px",r+"px",e):this.resizeBtnStat.botLeft?this.imgDupMouseMove(o+"px",r+"px",e):this.resizeBtnStat.topRight?this.imgDupMouseMove(o+"px",r+"px",e):this.resizeBtnStat.topLeft&&this.imgDupMouseMove(o+"px",r+"px",e)},e.prototype.cancelResizeAction=function(){Ct.remove(this.contentModule.getDocument(),bt.touchMoveEvent,this.resizing),Ct.remove(this.contentModule.getDocument(),bt.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(Ti(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},e.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:""!==e.style.height?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}},e.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},e.prototype.onToolbarAction=function(e){switch(Yw()&&this.parent.notify("selection-restore",{}),e.args.item.subCommand){case"Replace":this.parent.fileManagerSettings.enable?this.parent.notify("renderFileManager",e):this.parent.notify("insertImage",e);break;case"Caption":this.parent.notify("caption",e);break;case"InsertLink":this.parent.notify("insertImgLink",e);break;case"AltText":this.parent.notify("imgAltText",e);break;case"Remove":this.parent.notify("delete",e);break;case"Dimension":this.parent.notify("imageSize",e);break;case"OpenImageLink":this.openImgLink(e);break;case"EditImageLink":this.editImgLink(e);break;case"RemoveImageLink":this.removeImgLink(e)}},e.prototype.openImgLink=function(e){var t=""===e.selectParent[0].parentNode.target?"_self":"_blank";this.parent.formatter.process(this.parent,e.args,e.args,{url:e.selectParent[0].parentNode.href,target:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.editImgLink=function(e){var t=e.selectParent[0].parentNode,i=this.i10n.getConstant("dialogUpdate"),s={url:t.href,target:t.target,header:"Edit Link",btnText:i};this.insertImgLink(e,s)},e.prototype.removeImgLink=function(e){bt.isIE&&this.contentModule.getEditPanel().focus(),e.selection.restore();var t=!(!this.contentModule.getEditPanel().contains(this.captionEle)||!Ii("a",this.captionEle)),i=t?[this.captionEle]:[e.selectNode[0].parentElement];this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:e.selectNode[0],selectParent:i,selection:e.selection,subCommand:e.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),ae(e.selectParent)||Ci([e.selectParent[0]],"e-img-focus")),t&&Ii(".e-img-inner",this.captionEle).focus()},e.prototype.onKeyDown=function(e){var t,i,s,n,o,r=e.args;this.deletedImg=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"IMG"===a[l].nodeName&&this.deletedImg.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkImageBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkImageDel(t)}if(!ae(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action)&&"IMG"===n[0].tagName&&n[0].parentElement)){var c=n[0].parentElement.childNodes[0];this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),c,c,c.textContent.length,c.textContent.length),Ci([n[0]],"e-img-focus"),this.quickToolObj.imageQTBar.hidePopup()}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(s&&"IMG"===s[0].nodeName&&s.length<1){r.preventDefault();var p={selectNode:s,selection:i,selectParent:n,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:r}};this.deleteImg(p,r.keyCode)}this.parent.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()}switch("Backspace"===r.code&&(r.action="backspace"),r.action){case"escape":ae(this.dialogObj)||this.dialogObj.close();break;case"backspace":case"delete":for(l=0;l<this.deletedImg.length;l++){var d=this.deletedImg[l].src;this.imageRemovePost(d),this.parent.trigger("afterImageDelete",{element:this.deletedImg[l],src:d})}break;case"insert-image":"HTML"===this.parent.editorMode?this.insertImage({args:{item:{command:"Images",subCommand:"Image"},originalEvent:r},selectNode:s,selection:i,selectParent:n}):this.insertImage({args:{item:{command:"Images",subCommand:"Image"},originalEvent:r},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertImage"}),r.preventDefault()}},e.prototype.onKeyUp=function(e){if(!ae(this.deletedImg)&&this.deletedImg.length>0)for(var t=0;t<this.deletedImg.length;t++){var i={element:this.deletedImg[t],src:this.deletedImg[t].getAttribute("src")};this.parent.trigger("afterImageDelete",i)}},e.prototype.checkImageBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||ae(e.startContainer.previousSibling)||"IMG"!==e.startContainer.previousSibling.nodeName?"#text"===e.startContainer.nodeName||ae(e.startContainer.childNodes[e.startOffset-1])||"IMG"!==e.startContainer.childNodes[e.startOffset-1].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedImg.push(e.startContainer.previousSibling)},e.prototype.checkImageDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||ae(e.startContainer.nextSibling)||"IMG"!==e.startContainer.nextSibling.nodeName?"#text"===e.startContainer.nodeName||ae(e.startContainer.childNodes[e.startOffset])||"IMG"!==e.startContainer.childNodes[e.startOffset].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset]):this.deletedImg.push(e.startContainer.nextSibling)},e.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Images"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),n={args:e,selectNode:s="IMG"===s[0].nodeName?s:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignImage(n,"JustifyLeft");break;case"JustifyCenter":this.alignImage(n,"JustifyCenter");break;case"JustifyRight":this.alignImage(n,"JustifyRight");break;case"Inline":this.inline(n);break;case"Break":this.break(n)}this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),Ci([s[0]],"e-img-focus")),this.cancelResizeAction()}},e.prototype.imageWithLinkQTBarItemUpdate=function(){for(var e=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item"),t=0;t<e.length;t++)e[t].getAttribute("title")===this.i10n.getConstant("openLink")||e[t].getAttribute("title")===this.i10n.getConstant("editLink")||e[t].getAttribute("title")===this.i10n.getConstant("removeLink")?(bi([e[t]],"e-link-groups"),e[t].style.display="none"):"Insert Link"===e[t].getAttribute("title")?e[t].style.display="":e[t].classList.contains("e-rte-horizontal-separator")&&(e[t],Ti(e[t]));var i=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(i.length/2))},e.prototype.showImageQuickToolbar=function(e){var t=this;if("Images"===e.type&&!ae(this.parent.quickToolbarModule)&&!ae(this.parent.quickToolbarModule.imageQTBar)){this.quickToolObj=this.parent.quickToolbarModule;var i=e.args,s=e.elements;[].forEach.call(e.elements,function(e,t){0===t&&(s=e)}),s&&!Mi(s,"a")&&this.imageWithLinkQTBarItemUpdate(),"IMG"===s.nodeName&&bi([s],["e-img-focus"]);var n=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+i.clientY:i.pageY;this.parent.quickToolbarModule.imageQTBar&&(e.isNotify?setTimeout(function(){t.quickToolObj.imageQTBar.showPopup(i.pageX,n,s)},400):this.quickToolObj.imageQTBar.showPopup(i.pageX,n,s))}},e.prototype.hideImageQuickToolbar=function(){ae(this.contentModule.getEditPanel().querySelector(".e-img-focus"))||(Ci([this.contentModule.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup())},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideImageQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!ae(t.target)&&"IMG"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.imageQTBar){this.quickToolObj=this.parent.quickToolbarModule;var s=t.target;this.contentModule=this.rendererFactory.getRenderer(nx.Content);var n=this.quickToolObj.imageQTBar.element.classList.contains("e-rte-pop");if("IMG"===s.nodeName&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),s),Yw()&&this.parent.notify("selection-save",e),bi([s],"e-img-focus");var o=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item");if(Mi(s,"a")){for(var r=0;r<o.length;r++)o[r].getAttribute("title")===this.i10n.getConstant("openLink")||o[r].getAttribute("title")===this.i10n.getConstant("editLink")||o[r].getAttribute("title")===this.i10n.getConstant("removeLink")?(o[r].style.display="",Ci([o[r]],"e-link-groups")):"Insert Link"===o[r].getAttribute("title")?o[r].style.display="none":o[r].classList.contains("e-rte-horizontal-separator")&&(o[r],Ti(o[r]));var a=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(a.length/2))}else Mi(s,"a")||this.imageWithLinkQTBarItemUpdate();this.showImageQuickToolbar({args:t,type:"Images",elements:[t.target]})}else this.hideImageQuickToolbar()}}},e.prototype.insertImgLink=function(e,t){var i=this;if("IMG"===e.selectNode[0].nodeName&&(this.imagDialog(e),!ae(this.dialogObj))){var s=this.parent.createElement("div",{className:"e-img-linkwrap"}),n=Kx('<div class="e-rte-field"><input type="text" data-role ="none" class="e-input e-img-link" spellcheck="false" placeholder="'+this.i10n.getConstant("linkurl")+'"/></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget"  data-role ="none"></div>');s.appendChild(n);var o=s.querySelector(".e-rte-linkTarget"),r=s.querySelector(".e-img-link"),a=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new jo({label:a,checked:!0,enableRtl:this.parent.enableRtl,change:function(e){l=e.checked?"_blank":null}}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(o);var l=this.checkBoxObj.checked?"_blank":null,h=this.i10n.getConstant("dialogUpdate"),c={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode,selectParent:e.selectParent,link:r,target:l};this.dialogObj.setProperties({height:"inherit",width:"290px",header:this.parent.localeObj.getConstant("imageInsertLinkHeader"),content:s,position:{X:"center",Y:"center"},buttons:[{click:function(e){i.insertlink(c)},buttonModel:{content:h,cssClass:"e-flat e-update-link",isPrimary:!0}}]}),ae(t)||(r.value=t.url,t.target?this.checkBoxObj.checked=!0:this.checkBoxObj.checked=!1,this.dialogObj.header=t.header),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}},e.prototype.insertAltText=function(e){var t=this;if("IMG"===e.selectNode[0].nodeName){this.imagDialog(e);var i=this.i10n.getConstant("altText");if(!ae(this.dialogObj)){var s=this.parent.createElement("div",{className:"e-img-altwrap"}),n=this.i10n.getConstant("alternateHeader"),o=this.i10n.getConstant("dialogUpdate"),r=Kx('<div class="e-rte-field"><input type="text" spellcheck="false" value="'+(null===e.selectNode[0].getAttribute("alt")?"":e.selectNode[0].getAttribute("alt"))+'" class="e-input e-img-alt" placeholder="'+i+'"/></div>');s.appendChild(r);var a=s.querySelector(".e-img-alt"),l={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode,alt:a};this.dialogObj.setProperties({height:"inherit",width:"290px",header:n,content:s,position:{X:"center",Y:"center"},buttons:[{click:function(e){t.insertAlt(l)},buttonModel:{content:o,cssClass:"e-flat e-update-alt",isPrimary:!0}}]}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}}},e.prototype.insertAlt=function(e){if(!ae(e.alt)){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();var t=e.alt.value;this.parent.formatter.process(this.parent,e.args,e.args,{altText:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),this.dialogObj.hide({returnValue:!1})}},e.prototype.insertlink=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.link.value;if(""===t)return bi([e.link],"e-error"),e.link.setSelectionRange(0,t.length),void e.link.focus();this.isUrl(t)?Ci([e.link],"e-error"):t="http://"+t;var i=e.selfImage;if("HTML"===i.parent.editorMode&&e.selection.restore(),0===i.parent.formatter.getUndoRedoStack().length&&i.parent.formatter.saveData(),"A"===e.selectNode[0].parentElement.nodeName)return i.parent.formatter.process(i.parent,e.args,e.args,{url:t,target:i.checkBoxObj.checked?"_blank":null,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),void i.dialogObj.hide({returnValue:!0});i.parent.formatter.process(i.parent,e.args,e.args,{url:t,target:i.checkBoxObj.checked?"_blank":null,selectNode:e.selectNode,subCommand:e.args.item.subCommand,selection:e.selection});var s=Mi(e.selectNode[0],".e-img-caption");s&&Ii(".e-img-inner",s).focus(),i.dialogObj.hide({returnValue:!1})}},e.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},e.prototype.deleteImg=function(e,t){if("IMG"===e.selectNode[0].nodeName){var i={element:e.selectNode[0],src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.imageRemovePost(i.src),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),ae(t)&&this.parent.trigger("afterImageDelete",i)}},e.prototype.imageRemovePost=function(e){var t=new ht(this.parent.insertImageSettings.removeUrl,"POST",!0,null),i=new FormData;i.append(name,e),t.send(i)},e.prototype.caption=function(e){var t=e.selectNode[0];if("IMG"===t.nodeName){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),bi([t],"e-rte-image");var i=e.args.item?e.args.item.subCommand:"Caption";if(ae(Mi(t,".e-img-caption"))){this.captionEle=this.parent.createElement("span",{className:"e-img-caption e-rte-img-caption",attrs:{contenteditable:"false",draggable:"false",style:"width:"+this.parent.insertImageSettings.width}});var s=this.parent.createElement("span",{className:"e-img-wrap"}),n=this.parent.createElement("span",{className:"e-img-inner",attrs:{contenteditable:"true"}}),o=e.selectNode[0].parentElement;"A"===o.tagName&&o.setAttribute("contenteditable","true"),s.appendChild("A"===o.tagName?o:e.selectNode[0]),s.appendChild(n);var r=this.i10n.getConstant("imageCaption");n.innerHTML=r,this.captionEle.appendChild(s),t.classList.contains(mx)&&bi([this.captionEle],"e-caption-inline"),t.classList.contains(ux)&&bi([this.captionEle],ux),t.classList.contains("e-imgleft")&&bi([this.captionEle],"e-imgleft"),t.classList.contains("e-imgright")&&bi([this.captionEle],"e-imgright"),t.classList.contains("e-imgcenter")&&bi([this.captionEle],"e-imgcenter"),this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:this.captionEle,selectNode:e.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),n.childNodes[0],n.childNodes[0],0,n.childNodes[0].textContent.length)}else Ti(Mi(t,".e-img-caption")),bt.isIE&&(this.contentModule.getEditPanel().focus(),e.selection.restore()),"A"===t.parentElement.tagName?this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t.parentElement,selectNode:e.selectNode,subCommand:i}):this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t,selectNode:e.selectNode,subCommand:i});this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),Ci([t],"e-img-focus"))}},e.prototype.imageSize=function(e){var t=this;if("IMG"===e.selectNode[0].nodeName&&(this.imagDialog(e),!ae(this.dialogObj))){var i=this.i10n.getConstant("imageSizeHeader"),s=this.i10n.getConstant("dialogUpdate"),n=this.imgsizeInput(e),o={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode};this.dialogObj.setProperties({height:"inherit",width:"290px",header:i,content:n,position:{X:"center",Y:"center"},buttons:[{click:function(e){t.insertSize(o)},buttonModel:{content:s,cssClass:"e-flat e-update-size",isPrimary:!0}}]}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}},e.prototype.break=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},e.prototype.inline=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},e.prototype.alignImage=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},e.prototype.imagDialog=function(e){var t=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else{var i=this.parent.createElement("div",{className:"e-rte-img-dialog",id:this.rteID+"_image"});this.parent.element.appendChild(i);var s=this.i10n.getConstant("dialogInsert"),n=this.i10n.getConstant("dialogCancel"),o=this.i10n.getConstant("imageHeader"),r=e.selection,a={selfImage:this,selection:e.selection,args:e.args,selectParent:e.selectParent},l={header:o,cssClass:"e-rte-elements",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:bt.isDevice?"290px":"340px",height:"inherit",position:{X:"center",Y:bt.isDevice?"center":"top"},isModal:bt.isDevice,buttons:[{click:this.insertImageUrl.bind(a),buttonModel:{content:s,cssClass:"e-flat e-insertImage",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:"e-flat e-cancel",content:n}}],target:bt.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(e){t.isImgUploaded&&t.uploadObj.removing(),t.parent.isBlur=!1,e&&e.event.returnValue&&("HTML"===t.parent.editorMode?r.restore():t.parent.formatter.editorManager.markdownSelection.restore(t.parent.contentModule.getEditPanel())),t.dialogObj.destroy(),Ti(t.dialogObj.element),t.dialogRenderObj.close(e),t.dialogObj=null}},h=this.parent.createElement("div",{className:"e-img-content"});(!ae(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode)&&h.appendChild(this.imgUpload(e));var c=this.parent.createElement("div",{className:"e-linkheader"}),p=this.i10n.getConstant("imageLinkHeader");"HTML"===this.parent.editorMode?c.innerHTML=p:c.innerHTML=this.i10n.getConstant("mdimageLink"),h.appendChild(c),h.appendChild(this.imageUrlPopup(e)),e.selectNode&&"IMG"===e.selectNode[0].nodeName?(l.header=this.parent.localeObj.getConstant("editImageHeader"),l.content=h):l.content=h,this.dialogObj=this.dialogRenderObj.render(l),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(i),e.selectNode&&"IMG"===e.selectNode[0].nodeName&&"insertImage"===e.name&&(this.dialogObj.element.querySelector(".e-insertImage").textContent=this.parent.localeObj.getConstant("dialogUpdate")),i.style.maxHeight="inherit",this.quickToolObj&&(this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),ae(e.selectParent)||Ci([e.selectParent[0]],"e-img-focus")),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup())}},e.prototype.cancelDialog=function(e){this.parent.isBlur=!1,this.dialogObj.hide({returnValue:!0}),this.isImgUploaded&&this.uploadObj.removing()},e.prototype.onDocumentClick=function(e){var t=e.target;"IMG"===t.nodeName&&(this.imgEle=t),!ae(this.dialogObj)&&(!Mi(t,"#"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!Mi(t,"#"+this.parent.getID()+"_toolbar_Image")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_Image"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,Xx(this.parent.element,"focusout")),"IMG"===e.target.tagName||!this.imgResizeDiv||this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(e.target)||!this.contentModule.getEditPanel().contains(this.imgResizeDiv)||this.cancelResizeAction(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&("IMG"!==t.tagName&&this.removeResizeEle(),ae(this.prevSelectedImgEle)||(this.prevSelectedImgEle.style.outline=""))},e.prototype.removeResizeEle=function(){Ct.remove(this.contentModule.getDocument(),bt.touchMoveEvent,this.resizing),Ct.remove(this.contentModule.getDocument(),bt.touchEndEvent,this.resizeEnd),Ti(this.contentModule.getEditPanel().querySelector(".e-img-resize"))},e.prototype.imageUrlPopup=function(e){var t=this.parent.createElement("div",{className:"imgUrl"}),i=this.i10n.getConstant("imageUrl");return this.inputUrl=this.parent.createElement("input",{className:"e-input e-img-url",attrs:{placeholder:i,spellcheck:"false"}}),t.appendChild(this.inputUrl),t},e.prototype.insertImageUrl=function(e){var t=this.selfImage;t.isImgUploaded=!1;var i=t.inputUrl.value;if(0===t.parent.formatter.getUndoRedoStack().length&&t.parent.formatter.saveData(),ae(t.uploadUrl)||""===t.uploadUrl.url){if(""!==i){if("HTML"===t.parent.editorMode&&ae(Mi(this.selection.range.startContainer.parentNode,"#"+t.contentModule.getPanel().id))){t.contentModule.getEditPanel().focus();var s=t.parent.formatter.editorManager.nodeSelection.getRange(t.contentModule.getDocument());this.selection=t.parent.formatter.editorManager.nodeSelection.save(s,t.contentModule.getDocument()),this.selectParent=t.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(s)}var n=/[\w-]+.(jpg|png|jpeg|gif)/g,o=ae(i.match(n))||"HTML"!==t.parent.editorMode?"":i.match(n)[0],r={cssClass:"inline"===t.parent.insertImageSettings.display?mx:ux,url:i,selection:this.selection,altText:o,selectParent:this.selectParent,width:{width:t.parent.insertImageSettings.width,minWidth:t.parent.insertImageSettings.minWidth,maxWidth:t.parent.getInsertImgMaxWidth()},height:{height:t.parent.insertImageSettings.height,minHeight:t.parent.insertImageSettings.minHeight,maxHeight:t.parent.insertImageSettings.maxHeight}};t.parent.formatter.process(t.parent,this.args,this.args.originalEvent,r),t.dialogObj.hide({returnValue:!1})}}else t.uploadUrl.cssClass="inline"===t.parent.insertImageSettings.display?mx:ux,t.dialogObj.hide({returnValue:!1}),t.parent.formatter.process(t.parent,this.args,this.args.originalEvent,t.uploadUrl),t.uploadUrl.url="",t.contentModule.getEditPanel().querySelector(".e-img-resize")&&(t.imgEle.style.outline="",t.removeResizeEle())},e.prototype.imgsizeInput=function(e){var t=e.selectNode[0],i=this.i10n.getConstant("imageHeight"),s=this.i10n.getConstant("imageWidth"),n=this.parent.createElement("div",{className:"e-img-sizewrap"}),o=Kx('<div class="e-rte-label"><label>'+s+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" id="imgwidth" class="e-img-width" value='+("auto"===t.getAttribute("width")||ae(t.getAttribute("width"))?t.width:t.getClientRects()[0].width)+' /></div><div class="e-rte-label"><label>'+i+'</label></div><div class="e-rte-field"> <input type="text" data-role ="none" id="imgheight" class="e-img-height" value='+("auto"===t.getAttribute("height")||ae(t.getAttribute("height"))?t.height:t.getClientRects()[0].height)+" /></div>");n.appendChild(o);var r=new _a({format:"###.### px",min:this.parent.insertImageSettings.minWidth,max:this.parent.getInsertImgMaxWidth(),enableRtl:this.parent.enableRtl,locale:this.parent.locale});r.isStringTemplate=!0,r.createElement=this.parent.createElement,r.appendTo(n.querySelector("#imgwidth"));var a=new _a({format:"###.### px",min:this.parent.insertImageSettings.minHeight,max:this.parent.insertImageSettings.maxHeight,enableRtl:this.parent.enableRtl,locale:this.parent.locale});return a.isStringTemplate=!0,a.createElement=this.parent.createElement,a.appendTo(n.querySelector("#imgheight")),n},e.prototype.insertSize=function(e){e.selection.restore();var t=e.selfImage;0===t.parent.formatter.getUndoRedoStack().length&&t.parent.formatter.saveData();var i=t.dialogObj.element,s=parseFloat(i.querySelector(".e-img-width").value),n=parseFloat(i.parentElement.querySelector(".e-img-height").value);t.parent.formatter.process(this.parent,e.args,e.args,{width:s,height:n,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),this.imgResizeDiv&&t.imgResizePos(e.selectNode[0],this.imgResizeDiv),t.dialogObj.hide({returnValue:!0})},e.prototype.insertImage=function(e){if(this.imagDialog(e),!ae(this.dialogObj)){this.dialogObj.element.style.maxHeight="inherit";var t=this.dialogObj.element.querySelector(".e-img-content");!ae(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?t.querySelector("#"+this.rteID+"_insertImage").focus():t.querySelector(".e-img-url").focus()}},e.prototype.imgUpload=function(e){var t,i,s=this,n=this,o=n.parent.iframeSettings.enable;if("HTML"===n.parent.editorMode&&(!o&&ae(Mi(e.selection.range.startContainer.parentNode,"#"+this.parent.contentModule.getPanel().id))||o&&!jx(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body"),"e-lib"))){this.contentModule.getEditPanel().focus();var r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());t=this.parent.formatter.editorManager.nodeSelection.save(r,this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(r)}else t=e.selection,i=e.selectParent;var a=this.parent.createElement("div",{className:"e-img-uploadwrap e-droparea"}),l=this.i10n.getConstant("imageDeviceUploadMessage"),h=this.i10n.getConstant("imageUploadMessage"),c=this.parent.createElement("span",{className:"e-droptext"}),p=this.parent.createElement("span",{className:"e-rte-upload-text",innerHTML:bt.isDevice?l:h});c.appendChild(p);var d=this.parent.createElement("button",{className:"e-browsebtn",id:this.rteID+"_insertImage",attrs:{autofocus:"true",type:"button"}});c.appendChild(d),a.appendChild(c);var u=this.i10n.getConstant("browse"),m=new Po({content:u,enableRtl:this.parent.enableRtl});m.isStringTemplate=!0,m.createElement=this.parent.createElement,m.appendTo(d);var f=bt.isDevice?c:d;Ct.add(f,"click",this.fileSelect,this);var g,v,y,b,C,S=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"}});return a.appendChild(S),this.uploadObj=new mc({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},dropArea:c,multiple:!1,enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),selected:function(e){n.isImgUploaded=!0,y=e,b=e.filesData,s.parent.isServerRendered&&(y=JSON.parse(JSON.stringify(e)),e.cancel=!0,v=e.filesData,y.filesData=v),s.parent.trigger("imageSelected",y,function(e){if(!e.cancel){if(s.checkExtension(e.filesData[0]),g=e.filesData[0].name,"HTML"===s.parent.editorMode&&ae(s.parent.insertImageSettings.path)){var o=new FileReader;o.addEventListener("load",function(e){var r="Base64"===s.parent.insertImageSettings.saveFormat?o.result:URL.createObjectURL(iw(o.result));n.uploadUrl={url:r,selection:t,altText:g,selectParent:i,width:{width:n.parent.insertImageSettings.width,minWidth:n.parent.insertImageSettings.minWidth,maxWidth:n.parent.getInsertImgMaxWidth()},height:{height:n.parent.insertImageSettings.height,minHeight:n.parent.insertImageSettings.minHeight,maxHeight:n.parent.insertImageSettings.maxHeight}},n.inputUrl.setAttribute("disabled","true")}),o.readAsDataURL(e.filesData[0].rawFile)}s.parent.isServerRendered&&s.uploadObj._internalRenderSelect(e,v)}})},beforeUpload:function(e){s.parent.isServerRendered?((C=JSON.parse(JSON.stringify(e))).filesData=b,e.cancel=!0,s.parent.trigger("imageUploading",C,function(e){e.cancel||(s.uploadObj.currentRequestHeader=e.currentRequest?e.currentRequest:s.uploadObj.currentRequestHeader,s.uploadObj.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:s.uploadObj.customFormDatas,s.uploadObj.uploadFiles(v,null))})):s.parent.trigger("beforeImageUpload",e)},uploading:function(e){s.parent.isServerRendered||s.parent.trigger("imageUploading",e)},success:function(e){s.parent.trigger("imageUploadSuccess",e,function(e){if(!ae(s.parent.insertImageSettings.path)){var o=s.parent.insertImageSettings.path+e.file.name;n.uploadUrl={url:o,selection:t,altText:g,selectParent:i,width:{width:n.parent.insertImageSettings.width,minWidth:n.parent.insertImageSettings.minWidth,maxWidth:n.parent.getInsertImgMaxWidth()},height:{height:n.parent.insertImageSettings.height,minHeight:n.parent.insertImageSettings.minHeight,maxHeight:n.parent.insertImageSettings.maxHeight}},n.inputUrl.setAttribute("disabled","true")}})},failure:function(e){s.parent.trigger("imageUploadFailed",e)},removing:function(){s.parent.trigger("imageRemoving",e,function(e){n.isImgUploaded=!1,n.inputUrl.removeAttribute("disabled"),n.uploadUrl&&(n.uploadUrl.url=""),s.dialogObj.getButtons(0).element.removeAttribute("disabled")})}}),this.uploadObj.isStringTemplate=!0,this.uploadObj.createElement=this.parent.createElement,this.uploadObj.appendTo(S),a},e.prototype.checkExtension=function(e){this.uploadObj.allowedExtensions&&(-1===this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(("."+e.type).toLocaleLowerCase())?this.dialogObj.getButtons(0).element.setAttribute("disabled","disabled"):this.dialogObj.getButtons(0).element.removeAttribute("disabled"))},e.prototype.fileSelect=function(){return this.dialogObj.element.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1},e.prototype.dragStart=function(e){if("IMG"!==e.target.nodeName)return!0;this.parent.trigger("actionBegin",e,function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add("e-rte-drag-image"))})},e.prototype.dragEnter=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},e.prototype.dragOver=function(e){if(!("edge"===bt.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||bt.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()},e.prototype.dragDrop=function(e){var t=this;this.parent.trigger("beforeImageDrop",e,function(e){var i=t.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image"),s=i&&"IMG"===i.tagName||e.dataTransfer.files.length>0;!e.cancel&&s?t.parent.trigger("actionBegin",e,function(i){if(i.cancel)e.preventDefault();else{if(Mi(e.target,"#"+t.parent.getID()+"_toolbar")||"false"===t.parent.inputElement.contentEditable)return void e.preventDefault();t.parent.element.querySelector(".e-img-resize")&&Ti(t.imgResizeDiv),e.preventDefault();var s=void 0;if(t.contentModule.getDocument().caretRangeFromPoint?s=t.contentModule.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(s=t.contentModule.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):s=t.getDropRange(e.clientX,e.clientY),t.parent.notify("selectRange",{range:s}),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(e)}}):s&&e.preventDefault()})},e.prototype.getDropRange=function(e,t){var i=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),i);var s=this.contentModule.getDocument().elementFromPoint(e,t),n=s.childNodes.length>0?s.childNodes[0]:s,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(n,o),i.setEnd(n,o);else{var r=void 0;do{o++,i.setStart(n,o),i.setEnd(n,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<n.length-1)}return i},e.prototype.insertDragImage=function(e){var t=this;e.preventDefault();var i=this.parent.element.querySelector("e-popup-open");if(this.parent.notify("drop",{args:e}),i&&i.classList.add("e-hide"),e.dataTransfer.files.length>0){if(e.dataTransfer.files.length>1)return;for(var s=e.dataTransfer.files,n=s[0].name,o=n.substring(n.lastIndexOf(".")),r=this.parent.insertImageSettings.allowedTypes,a=0;a<r.length;a++)if(o.toLocaleLowerCase()===r[a].toLowerCase())if(this.parent.insertImageSettings.saveUrl)this.onSelect(e);else{var l={args:e,text:"",file:s[0]};e.preventDefault(),this.imagePaste(l)}}else{var h=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),c=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(c&&"IMG"===c.tagName){c.nextElementSibling&&c.nextElementSibling.classList.contains("e-img-inner")?h.insertNode(c.parentElement.parentElement):h.insertNode(c),c.classList.remove("e-rte-drag-image");var p={elements:[c]};c.addEventListener("load",function(){t.parent.trigger("actionComplete",p)}),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());l=e;this.resizeStart(l,c),this.hideImageQuickToolbar()}}},e.prototype.onSelect=function(e){var t=this,i=this,s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.createElement("ul",{className:"e-upload-files"});this.parent.element.appendChild(n);var o={name:"",size:0,status:"",statusCode:"",type:"",rawFile:e.dataTransfer.files[0],validationMessages:{}},r=this.parent.createElement("IMG");r.style.opacity="0.5",r.classList.add(gx),r.classList.add(mx),r.classList.add("e-resize");var a=o.rawFile,l=new FileReader;l.addEventListener("load",function(){var e=URL.createObjectURL(iw(l.result));r.src="Blob"===i.parent.insertImageSettings.saveFormat?e:l.result}),a&&l.readAsDataURL(a),s.insertNode(r),this.uploadMethod(e,r);var h={elements:[r]};r.addEventListener("load",function(){t.parent.trigger("actionComplete",h)})},e.prototype.uploadMethod=function(e,t){var i=this,s=!1,n=this,o=this.parent.createElement("div");this.parent.element.appendChild(o);var r=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"}}),a=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new lo(o,{relateTo:t,height:"85px",width:"300px",offsetY:a,content:r,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){i.parent.isBlur=!1,i.popupObj.destroy(),Ti(i.popupObj.element),i.popupObj=null}}),this.popupObj.element.style.display="none",bi([this.popupObj.element],"e-popup-open"),bi([this.popupObj.element],"e-rte-upload-popup");var l=e.dataTransfer.files[0].size>1e6?300:100;setTimeout(function(){n.refreshPopup(t)},l);var h,c,p=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());this.uploadObj=new mc({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:"e-rte-dialog-upload",dropArea:this.parent.element,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),removing:function(){i.parent.inputElement.contentEditable="true",s=!1,Ti(t),i.popupObj.close()},canceling:function(){i.parent.inputElement.contentEditable="true",s=!1,Ti(t),i.popupObj.close()},beforeUpload:function(e){i.parent.isServerRendered?((c=JSON.parse(JSON.stringify(e))).filesData=h,s=!0,e.cancel=!0,i.parent.trigger("imageUploading",c,function(e){e.cancel||(i.uploadObj.currentRequestHeader=e.currentRequest?e.currentRequest:i.uploadObj.currentRequestHeader,i.uploadObj.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:i.uploadObj.customFormDatas,i.uploadObj.uploadFiles(h,null),i.parent.inputElement.contentEditable="false")})):i.parent.trigger("beforeImageUpload",e)},uploading:function(e){i.parent.isServerRendered||(s=!0,i.parent.trigger("imageUploading",e),i.parent.inputElement.contentEditable="false")},selected:function(e){s&&(e.cancel=!0),i.parent.isServerRendered&&(h=e.filesData)},failure:function(n){s=!1,i.parent.inputElement.contentEditable="true";var o={args:e,type:"Images",isNotify:void 0,elements:t};setTimeout(function(){i.uploadFailure(t,o,n)},900)},success:function(n){s=!1,i.parent.inputElement.contentEditable="true";var o={args:e,type:"Images",isNotify:void 0,elements:t};setTimeout(function(){i.uploadSuccess(t,e,o,n)},900)}}),this.uploadObj.appendTo(this.popupObj.element.childNodes[0]),Ti(this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap")),p.selectNodeContents(t),this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),p)},e.prototype.refreshPopup=function(e){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(this.popupObj.relateTo=this.parent.inputElement,this.popupObj.offsetY=this.parent.iframeSettings.enable?-30:-65,this.popupObj.element.style.display="block"):this.popupObj&&(this.popupObj.refreshPosition(e),this.popupObj.element.style.display="block")},e.prototype.uploadFailure=function(e,t,i){Ti(e),this.popupObj&&this.popupObj.close(),this.parent.trigger("imageUploadFailed",i),this.uploadObj.destroy()},e.prototype.uploadSuccess=function(e,t,i,s){var n=this;e.style.opacity="1",e.classList.add("e-img-focus"),s.element=e,this.parent.trigger("imageUploadSuccess",s,function(t){if(!ae(n.parent.insertImageSettings.path)){var i=n.parent.insertImageSettings.path+t.file.name;e.src=i,e.setAttribute("alt",t.file.name)}}),this.popupObj&&(this.popupObj.close(),this.uploadObj.destroy()),this.showImageQuickToolbar(i),this.resizeStart(t,e)},e.prototype.imagePaste=function(e){var t=this;if(0===e.text.length&&!ae(e.file)){var i=this,s=new FileReader;e.args.preventDefault(),s.addEventListener("load",function(n){var o={cssClass:"inline"===i.parent.insertImageSettings.display?mx:ux,url:"Base64"!==t.parent.insertImageSettings.saveFormat&&ae(e.callBack)?URL.createObjectURL(iw(s.result)):s.result,width:{width:i.parent.insertImageSettings.width,minWidth:i.parent.insertImageSettings.minWidth,maxWidth:i.parent.getInsertImgMaxWidth()},height:{height:i.parent.insertImageSettings.height,minHeight:i.parent.insertImageSettings.minHeight,maxHeight:i.parent.insertImageSettings.maxHeight}};ae(e.callBack)?(i.parent.formatter.process(i.parent,{item:{command:"Images",subCommand:"Image"}},e.args,o),t.showPopupToolBar(e,o)):e.callBack(o)}),s.readAsDataURL(e.file)}},e.prototype.showPopupToolBar=function(e,t){var i=this,s='img[src="'+t.url+'"]',n=this.parent.inputElement.querySelector(s);this.parent.quickToolbarModule.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,nx.ImageToolbar);var o={args:e.args,type:"Images",isNotify:void 0,elements:n};n&&setTimeout(function(){i.showImageQuickToolbar(o),i.resizeStart(e.args,n)},0)},e.prototype.destroy=function(){this.prevSelectedImgEle=void 0,this.removeEventListener()},e.prototype.getModuleName=function(){return"image"},e}(),uk=function(){function e(e,t){this.parent=e;var i=t;this.rendererFactory=i.getService("rendererFactory"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("sourceCode",this.sourceCode,this),this.parent.on("initial-end",this.onInitialEnd,this),this.parent.on("updateSource",this.updateSourceCode,this),this.parent.on("destroy",this.destroy,this)},e.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off("sourceCode",this.sourceCode),this.parent.off("updateSource",this.updateSourceCode),this.parent.off("initial-end",this.onInitialEnd),this.parent.off("destroy",this.destroy),this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},e.prototype.getSourceCode=function(){return this.parent.createElement("textarea",{className:"e-rte-srctextarea"})},e.prototype.wireEvent=function(e){this.keyboardModule=new uw(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),Ct.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},e.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&Ct.remove(this.previewElement,"mousedown",this.mouseDownHandler)},e.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new uw(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},e.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},e.prototype.mouseDownHandler=function(e){this.parent.notify("sourceCodeMouseDown",{args:e})},e.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable){this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}}},e.prototype.onKeyDown=function(e){switch(e.event.action){case"html-source":e.event.preventDefault(),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event})}},e.prototype.sourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger("actionBegin",{requestType:"SourceCode",targetItem:"SourceCode",args:e});var t=Oi("."+dx,this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(nx.Content),this.parent.notify("updateToolbarItem",{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),ae(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){var i=void 0;(i=ae(this.parent.element.querySelector("#"+this.parent.element.id+"_source-view"))?this.parent.createElement("div",{className:"e-source-content",id:this.parent.element.id+"_source-view"}):this.parent.element.querySelector("#"+this.parent.element.id+"_source-view")).appendChild(this.previewElement),this.parent.element.appendChild(i),i.style.height=this.contentModule.getPanel().style.height,i.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display="none",i.style.display="block"}else this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.contentModule.getEditPanel().style.display="none",this.previewElement.style.display="block";(this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem("SourceCode"),this.parent.getToolbar()&&Ci([this.parent.getToolbar()],["e-expand-open"]),Ci(t,[fx]),this.parent.setContentHeight("sourceCode",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),ae(this.parent.placeholder)||this.parent.iframeSettings.enable)||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="none");this.parent.trigger("actionComplete",{requestType:"SourceCode",targetItem:"SourceCode",args:e}),this.parent.invokeChangeEvent()},e.prototype.updateSourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger("actionBegin",{requestType:"Preview",targetItem:"Preview",args:e});var t=this.getPanel();this.parent.notify("updateToolbarItem",{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:this.parent.getBaseToolbarObject()});var i=this.parent.serializeValue(t.value),s=null===i||""===i?"<p><br/></p>":i;(this.parent.iframeSettings.enable?(t.parentElement.style.display="none",this.contentModule.getPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=s):(t.style.display="none",this.contentModule.getEditPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=s),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&Ci([this.parent.getToolbar()],["e-expand-open"]),this.parent.setContentHeight("preview",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),ae(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length)||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="block");this.parent.trigger("actionComplete",{requestType:"Preview",targetItem:"Preview",args:e}),this.parent.formatter.enableUndo(this.parent),this.parent.invokeChangeEvent()},e.prototype.getTextAreaValue=function(){return"<p><br></p>"===this.contentModule.getEditPanel().innerHTML||1===this.contentModule.getEditPanel().childNodes.length&&"P"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length?"":this.parent.value},e.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},e.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},e.prototype.destroy=function(){this.removeEventListener()},e}(),mk=function(){function e(e,t){this.ensureInsideTableList=!0,this.pageX=null,this.pageY=null,this.moveEle=null,this.parent=e,this.rteID=e.element.id,this.l10n=t.getService("rteLocale"),this.rendererFactory=t.getService("rendererFactory"),this.dialogRenderObj=t.getService("dialogRenderObject"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("createTable",this.renderDlgContent,this),this.parent.on("initial-end",this.afterRender,this),this.parent.on("docClick",this.docClick,this),this.parent.on("editAreaClick",this.editAreaClickHandler,this),this.parent.on("table-toolbar-action",this.onToolbarAction,this),this.parent.on("dropDownSelect",this.dropdownSelect,this),this.parent.on(ax,this.keyDown,this),this.parent.on("mouseUp",this.selectionTable,this),this.parent.on("destroy",this.destroy,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("createTable",this.renderDlgContent),this.parent.off("initial-end",this.afterRender),this.parent.off("docClick",this.docClick),this.parent.off("editAreaClick",this.editAreaClickHandler),this.parent.off("table-toolbar-action",this.onToolbarAction),this.parent.off("dropDownSelect",this.dropdownSelect),this.parent.off("mouseDown",this.cellSelect),this.parent.off("tableColorPickerChanged",this.setBGColor),this.parent.off(ax,this.keyDown),this.parent.off("mouseUp",this.selectionTable),this.parent.off("destroy",this.destroy))},e.prototype.selectionTable=function(e){var t=e.args.target;"mozilla"!==bt.info.name||ae(Mi(t,"table"))||"TABLE"!==Mi(t,"table").tagName||this.parent.contentModule.getEditPanel().setAttribute("contenteditable","true")},e.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(nx.Content),this.parent.on("tableColorPickerChanged",this.setBGColor,this),this.parent.on("mouseDown",this.cellSelect,this),this.parent.tableSettings.resize&&Ct.add(this.parent.contentModule.getEditPanel(),bt.touchStartEvent,this.resizeStart,this),!bt.isDevice&&this.parent.tableSettings.resize&&Ct.add(this.contentModule.getEditPanel(),"mouseover",this.resizeHelper,this)},e.prototype.dropdownSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Table"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s={args:e,selection:this.parent.formatter.editorManager.nodeSelection.save(i,this.contentModule.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)};switch(t.subCommand){case"InsertRowBefore":case"InsertRowAfter":this.addRow(s.selection,e);break;case"InsertColumnLeft":case"InsertColumnRight":this.addColumn(s.selection,e);break;case"DeleteColumn":case"DeleteRow":this.removeRowColumn(s.selection,e);break;case"AlignTop":case"AlignMiddle":case"AlignBottom":this.verticalAlign(s,e);break;case"Dashed":case"Alternate":this.tableStyles(s,t.subCommand)}}},e.prototype.keyDown=function(e){var t=e.args;switch(t.action){case"escape":break;case"insert-table":if("HTML"===this.parent.editorMode){var i=this.parent.contentModule.getDocument(),s=this.parent.formatter.editorManager.nodeSelection.getRange(i),n=this.parent.formatter.editorManager.nodeSelection.save(s,i),o={originalEvent:e.args,item:{command:"Table",subCommand:"CreateTable"}};this.insertTableDialog({self:this,args:o,selection:n})}t.preventDefault()}if(!ae(this.parent.formatter.editorManager.nodeSelection)&&this.contentModule&&"KeyK"!==t.code){s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(s,this.contentModule.getDocument());var r=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(s)[0];if(r=r&&"TD"!==r.tagName&&"TH"!==r.tagName?r.parentElement:r,(8===t.keyCode||46===t.keyCode||t.ctrlKey&&88===t.keyCode)&&(r&&"TBODY"===r.tagName?(t.preventDefault(),this.removeTable(n,t,!0)):r&&r.querySelectorAll("table").length>0&&this.removeResizeElement()),r&&"TD"!==r.tagName&&"TH"!==r.tagName){var a=Mi(r,"td");r=!ae(a)&&this.parent.inputElement.contains(a)?a:r}if(r&&("TD"===r.tagName||"TH"===r.tagName))switch(t.keyCode){case 9:case 37:case 39:this.tabSelection(t,n,r);break;case 40:case 38:this.tableArrowNavigation(t,n,r)}}},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"TableHeader":this.tableHeader(e.selection,e.args);break;case"TableRemove":this.removeTable(e.selection,e.args);break;case"TableEditProperties":this.editTable(e)}},e.prototype.verticalAlign=function(e,t){var i=Mi(e.selectParent[0],"td")||Mi(e.selectParent[0],"th");i&&this.parent.formatter.process(this.parent,t,t,{tableCell:i,subCommand:t.item.subCommand})},e.prototype.tableStyles=function(e,t){var i=Mi(e.selectParent[0],"table");"Dashed"===t&&(this.parent.element.classList.contains("e-dashed-border")?this.parent.element.classList.remove("e-dashed-border"):this.parent.element.classList.add("e-dashed-border"),i.classList.contains("e-dashed-border")?i.classList.remove("e-dashed-border"):i.classList.add("e-dashed-border")),"Alternate"===t&&(this.parent.element.classList.contains("e-alternate-border")?this.parent.element.classList.remove("e-alternate-border"):this.parent.element.classList.add("e-alternate-border"),i.classList.contains("e-alternate-border")?i.classList.remove("e-alternate-border"):i.classList.add("e-alternate-border")),this.parent.formatter.saveData(),this.parent.formatter.editorManager.nodeSelection.restore()},e.prototype.insideList=function(e){for(var t=this.parent.formatter.editorManager.domNode.blockNodes(),i=[],s=0;s<t.length;s++)"LI"===t[s].parentNode.tagName?i.push(t[s].parentNode):"LI"===t[s].tagName&&"P"!==t[s].childNodes[0].tagName&&"OL"!==t[s].childNodes[0].tagName&&"UL"!==t[s].childNodes[0].tagName&&i.push(t[s]);return i.length>1||i.length&&0===e.startOffset&&0===e.endOffset?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},e.prototype.tabSelection=function(e,t,i){var s=this.insideList(t.range);if((37!==e.keyCode&&39!==e.keyCode||3!==t.range.startContainer.nodeType)&&!s)if(e.preventDefault(),i.classList.remove("e-cell-select"),e.shiftKey||37===e.keyCode){var n=ae(i.previousSibling)?ae(Mi(i,"tr").previousSibling)?ae(Mi(i,"table").previousSibling)?i:"td"===Mi(i,"table").previousSibling.nodeName.toLowerCase()?Mi(i,"table").previousSibling:i:Mi(i,"tr").previousSibling.childNodes[Mi(i,"tr").previousSibling.childNodes.length-1]:i.previousSibling;if(i===n&&0===i.cellIndex&&Mi(i,"table").tHead){var o=Mi(i,"table");n=o.rows[0].cells[o.rows[0].cells.length-1]}37===e.keyCode&&i===n&&(n=Mi(i,"table").previousSibling),n&&(""!==n.textContent.trim()&&Mi(n,"td")?t.setSelectionNode(this.contentModule.getDocument(),n):t.setSelectionText(this.contentModule.getDocument(),n,n,0,0))}else{var r=ae(i.nextSibling)?ae(Mi(i,"tr").nextSibling)?ae(Mi(i,"table").nextSibling)?i:"td"===Mi(i,"table").nextSibling.nodeName.toLowerCase()?Mi(i,"table").nextSibling:i:Mi(i,"tr").nextSibling.childNodes[0]:i.nextSibling;i===r&&"TH"===i.nodeName&&(r=Mi(i,"table").rows[1].cells[0]),39===e.keyCode&&i===r&&(r=Mi(i,"table").nextSibling),r&&(""!==r.textContent.trim()&&Mi(r,"td")?t.setSelectionNode(this.contentModule.getDocument(),r):t.setSelectionText(this.contentModule.getDocument(),r,r,0,0)),i===r&&39!==e.keyCode&&r&&(this.addRow(t,e,!0),""!==(r=r.parentElement.nextSibling.firstChild).textContent.trim()&&Mi(r,"td")?t.setSelectionNode(this.contentModule.getDocument(),r):t.setSelectionText(this.contentModule.getDocument(),r,r,0,0))}},e.prototype.tableArrowNavigation=function(e,t,i){var s=t.range.startContainer;40===e.keyCode&&3===s.nodeType&&(s.nextSibling&&"BR"===s.nextSibling.nodeName||s.parentNode&&"TD"!==s.parentNode.nodeName)||38===e.keyCode&&3===s.nodeType&&(s.previousSibling&&"BR"===s.previousSibling.nodeName||s.parentNode&&"TD"!==s.parentNode.nodeName)||(e.preventDefault(),i.classList.remove("e-cell-select"),(i=40===e.keyCode?ae(Mi(i,"tr").nextSibling)?Mi(i,"table").tHead&&"TH"===i.nodeName?Mi(i,"table").rows[1].cells[i.cellIndex]:ae(Mi(i,"table").nextSibling)?i:Mi(i,"table").nextSibling:Mi(i,"tr").nextSibling.children[i.cellIndex]:ae(Mi(i,"tr").previousSibling)?Mi(i,"table").tHead&&"TH"!==i.nodeName?Mi(i,"table").tHead.rows[0].cells[i.cellIndex]:ae(Mi(i,"table").previousSibling)?i:Mi(i,"table").previousSibling:Mi(i,"tr").previousSibling.children[i.cellIndex])&&t.setSelectionText(this.contentModule.getDocument(),i,i,0,0))},e.prototype.setBGColor=function(e){var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.contentModule.getDocument()).range.startContainer;if((i=3===i.nodeType?Mi(i.parentNode,"td,th"):Mi(i,"td, th"))&&("TD"===i.nodeName||"TH"===i.nodeName)){for(var s=Mi(i,"table").querySelectorAll(".e-cell-select"),n=0;n<s.length;n++)s[n].style.backgroundColor=e.item.value;this.parent.formatter.saveData()}},e.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.tableQTBar&&document.body.contains(this.quickToolObj.tableQTBar.element)&&this.quickToolObj.tableQTBar.hidePopup()},e.prototype.tableHeader=function(e,t){this.parent.formatter.process(this.parent,t,t.originalEvent,{selection:e,subCommand:t.item.subCommand})},e.prototype.editAreaClickHandler=function(e){if(!this.parent.readonly){var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar){this.quickToolObj=this.parent.quickToolbarModule;var s=t.target;if(this.contentModule=this.rendererFactory.getRenderer(nx.Content),this.quickToolObj.tableQTBar.element.classList.contains("e-rte-pop"))return;var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()),o=Mi(s,"table");if(s&&"A"!==s.nodeName&&"IMG"!==s.nodeName&&("TD"===s.nodeName||"TH"===s.nodeName||"TABLE"===s.nodeName||o&&this.parent.contentModule.getEditPanel().contains(o))&&(3!==n.startContainer.nodeType||n.collapsed)){var r=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());this.parent.formatter.editorManager.nodeSelection.save(r,this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());var a=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+t.clientY:t.pageY;this.quickToolObj.tableQTBar.showPopup(t.pageX,a,s),this.parent.formatter.editorManager.nodeSelection.restore()}else this.hideTableQuickToolbar()}}},e.prototype.tableCellSelect=function(e){var t=e.target,i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),s=Array.prototype.slice.call(t.parentElement.children).indexOf(t),n=this.dlgDiv.querySelectorAll(".e-rte-tablecell");Array.prototype.forEach.call(n,function(e){var t=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),n=Array.prototype.slice.call(e.parentElement.children).indexOf(e);Ci([e],"e-active"),t<=i&&n<=s&&bi([e],"e-active")}),this.tblHeader.innerHTML=s+1+"x"+(i+1)},e.prototype.tableCellLeave=function(e){Ci(this.dlgDiv.querySelectorAll(".e-rte-tablecell"),"e-active"),bi([this.dlgDiv.querySelector(".e-rte-tablecell")],"e-active"),this.tblHeader.innerHTML="1x1"},e.prototype.tableCellClick=function(e){var t=e.target,i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement)+1,s=Array.prototype.slice.call(t.parentElement.children).indexOf(t)+1;this.self.tableInsert(i,s,e,this)},e.prototype.tableInsert=function(e,t,i,s){var n=s.self?s.self:this,o=s.selection.range.startContainer;"P"!==o.nodeName||""!==o.textContent.trim()||o.childNodes.length>0||(o.innerHTML="<br />");var r=o.parentNode;if("HTML"===n.parent.editorMode&&(n.parent.iframeSettings.enable&&!jx(r.ownerDocument.querySelector("body"),"e-lib")||!n.parent.iframeSettings.enable&&ae(Mi(r,"#"+n.contentModule.getPanel().id)))){n.contentModule.getEditPanel().focus();var a=n.parent.formatter.editorManager.nodeSelection.getRange(n.contentModule.getDocument());s.selection=n.parent.formatter.editorManager.nodeSelection.save(a,n.contentModule.getDocument())}var l={row:e,columns:t,width:{minWidth:n.parent.tableSettings.minWidth,maxWidth:n.parent.tableSettings.maxWidth,width:n.parent.tableSettings.width},selection:s.selection};n.popupObj&&n.popupObj.hide(),n.editdlgObj&&n.editdlgObj.hide(),n.parent.formatter.process(n.parent,s.args,s.args.originalEvent,l),n.contentModule.getEditPanel().focus(),n.parent.on("mouseDown",n.cellSelect,n)},e.prototype.cellSelect=function(e){var t=e.args.target,i=Mi(t,"td,th");t="TD"!==t.nodeName&&i&&this.parent.contentModule.getEditPanel().contains(i)?i:t,Ci(this.contentModule.getEditPanel().querySelectorAll("table td, table th"),"e-cell-select"),!t||"TD"!==t.tagName&&"TH"!==t.tagName||(t.removeAttribute("class"),bi([t],"e-cell-select"),this.curTable=this.curTable?this.curTable:Mi(t,"table"),this.removeResizeElement(),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&Ti(this.helper)),"mozilla"!==bt.info.name||ae(Mi(t,"table"))||"TABLE"!==Mi(t,"table").tagName||this.parent.contentModule.getEditPanel().setAttribute("contenteditable","false")},e.prototype.resizeHelper=function(e){if(!this.parent.readonly){var t=e.target||e.targetTouches[0].target,i=Mi(t,"table");"TABLE"!==t.nodeName&&"TD"!==t.nodeName&&"TH"!==t.nodeName||(this.curTable=i&&this.parent.contentModule.getEditPanel().contains(i)&&("TD"===t.nodeName||"TH"===t.nodeName)?i:t,this.removeResizeElement(),this.tableResizeEleCreation(this.curTable,e))}},e.prototype.tableResizeEleCreation=function(e,t){this.parent.preventDefaultResize(t);for(var i=Array.prototype.slice.call(e.rows[0].cells,1),s=[],n=0;n<e.rows.length;n++)s.push(Array.prototype.slice.call(e.rows[n].cells,0,1)[0]);var o=parseInt(getComputedStyle(e).height,10),r=parseInt(getComputedStyle(e).width,10),a=this.calcPos(e);for(n=0;i.length>n;n++){var l=this.parent.createElement("span",{attrs:{"data-col":(n+1).toString(),unselectable:"on",contenteditable:"false"}});l.classList.add("e-rte-table-resize","e-column-resize"),l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[n]).left)+"px;",this.contentModule.getEditPanel().appendChild(l)}for(n=0;s.length>n;n++){var h=this.parent.createElement("span",{attrs:{"data-row":n.toString(),unselectable:"on",contenteditable:"false"}});h.classList.add("e-rte-table-resize","e-row-resize");var c=ae(e.getAttribute("cellspacing"))&&""===e.getAttribute("cellspacing")?this.calcPos(s[n]).left:0;h.style.cssText="width: "+r+"px; height: 4px; top: "+(this.calcPos(s[n]).top+a.top+s[n].offsetHeight-2)+"px; left:"+(c+a.left)+"px;",this.contentModule.getEditPanel().appendChild(h)}var p=this.parent.createElement("span",{className:"e-table-box",attrs:{"data-col":i.length.toString(),unselectable:"on",contenteditable:"false"}});p.style.cssText="top: "+(a.top+o-4)+"px; left:"+(a.left+r-4)+"px;",bt.isDevice&&p.classList.add("e-rmob"),this.contentModule.getEditPanel().appendChild(p)},e.prototype.removeResizeElement=function(){var e=this.parent.contentModule.getEditPanel().querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box");if(e.length>0)for(var t=0;t<e.length;t++)Ti(e[t])},e.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),s=e.ownerDocument,n=e.offsetParent||s.documentElement;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return"TD"===n.nodeName&&"TABLE"===e.nodeName&&(n=Mi(n,".e-control")),n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},e.prototype.resizeStart=function(e){var t=this;if(!this.parent.readonly){bt.isDevice&&this.resizeHelper(e);var i=e.target;if(i.classList.contains("e-column-resize")||i.classList.contains("e-row-resize")||i.classList.contains("e-table-box")){if(e.preventDefault(),this.parent.preventDefaultResize(e),Ci(this.curTable.querySelectorAll("td,th"),"e-cell-select"),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),this.resizeBtnInit(),this.hideTableQuickToolbar(),i.classList.contains("e-column-resize")&&(this.resizeBtnStat.column=!0,this.columnEle=this.curTable.rows[0].cells[parseInt(i.getAttribute("data-col"),10)],this.colIndex=this.columnEle.cellIndex,this.moveEle=e.target,this.appendHelper()),i.classList.contains("e-row-resize")&&(this.rowEle=this.curTable.rows[parseInt(i.getAttribute("data-row"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),i.classList.contains("e-table-box")&&(this.resizeBtnStat.tableBox=!0),bt.isDevice&&this.helper&&!this.helper.classList.contains("e-reicon"))this.helper.classList.add("e-reicon"),Ct.add(document,bt.touchStartEvent,this.removeHelper,this),Ct.add(this.helper,bt.touchStartEvent,this.resizeStart,this);else{var s=ye()?{requestType:"Table"}:{event:e,requestType:"Table"};this.parent.trigger("resizeStart",s,function(e){e.cancel&&t.cancelResizeAction()})}Ct.add(this.contentModule.getDocument(),bt.touchMoveEvent,this.resizing,this),Ct.add(this.contentModule.getDocument(),bt.touchEndEvent,this.resizeEnd,this)}}},e.prototype.removeHelper=function(e){!e.target.classList.contains("e-reicon")&&this.helper&&(Ct.remove(document,bt.touchStartEvent,this.removeHelper),Ct.remove(this.helper,bt.touchStartEvent,this.resizeStart),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&Ti(this.helper),this.pageX=null,this.helper=null)},e.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:"e-table-rhelper"}),bt.isDevice&&this.helper.classList.add("e-reicon"),this.contentModule.getEditPanel().appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){var e=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add("e-column-helper"),this.helper.style.cssText="height: "+getComputedStyle(this.curTable).height+"; top: "+e.top+"px; left:"+(e.left+this.calcPos(this.columnEle).left-1)+"px;"):(this.helper.classList.add("e-row-helper"),this.helper.style.cssText="width: "+getComputedStyle(this.curTable).width+"; top: "+(this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight)+"px; left:"+(this.calcPos(this.rowEle).left+e.left)+"px;")},e.prototype.updateHelper=function(){var e=this.calcPos(this.curTable);if(this.resizeBtnStat.column){var t=e.left+this.calcPos(this.columnEle).left-1;this.helper.style.left=t+"px"}else{var i=this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight;this.helper.style.top=i+"px"}},e.prototype.resizing=function(e){var t=this,i=this.getPointX(e),s=this.getPointY(e),n=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,o=this.parent.enableRtl?-(s-this.pageY):s-this.pageY;this.pageX=i,this.pageY=s;var r=ye()?{requestType:"table"}:{event:e,requestType:"table"};this.parent.trigger("resizing",r,function(i){if(i.cancel)t.cancelResizeAction();else{var s=t.contentModule.getEditPanel().querySelector(".e-table-box"),r=parseInt(getComputedStyle(t.curTable).width,10),a=parseInt(getComputedStyle(t.curTable).height,10),l=+getComputedStyle(t.contentModule.getEditPanel()).paddingRight.match(/\d/g).join(""),h=t.contentModule.getEditPanel().offsetWidth-2*l;if(t.resizeBtnStat.column){for(var c=t.curTable.rows[0].cells,p=parseFloat(t.columnEle.offsetWidth.toString())-n,d=parseFloat(t.columnEle.offsetWidth.toString())+parseFloat(c[t.colIndex-1].offsetWidth.toString()),u=0;u<t.curTable.rows.length;u++)if(d-p>20&&p>20){var m=d-p,f=p;t.curTable.rows[u].cells[t.colIndex-1].style.width=t.convertPixelToPercentage(m,r)+"%",t.curTable.rows[u].cells[t.colIndex].style.width=t.convertPixelToPercentage(f,r)+"%"}t.updateHelper()}else if(t.resizeBtnStat.row){t.parent.preventDefaultResize(e);var g=parseFloat(t.rowEle.clientHeight.toString())+o;g>20&&(t.rowEle.style.height=g+"px"),t.curTable.style.height="",s.style.cssText="top: "+(t.calcPos(t.curTable).top+a-4)+"px; left:"+(t.calcPos(t.curTable).left+r-4)+"px;",t.updateHelper()}else if(t.resizeBtnStat.tableBox&&!ae(s)){bt.isDevice||Ct.remove(t.contentModule.getEditPanel(),"mouseover",t.resizeHelper);var v=t.curTable.style.width.indexOf("%")>-1;t.curTable.style.width=v?t.convertPixelToPercentage(r+n,h)+"%":r+n+"px",t.curTable.style.height=a+o+"px",s.classList.add("e-rbox-select"),s.style.cssText="top: "+(t.calcPos(t.curTable).top+a-4)+"px; left:"+(t.calcPos(t.curTable).left+r-4)+"px;"}}})},e.prototype.convertPixelToPercentage=function(e,t){return e/t*100},e.prototype.cancelResizeAction=function(){Ct.remove(this.contentModule.getDocument(),bt.touchMoveEvent,this.resizing),Ct.remove(this.contentModule.getDocument(),bt.touchEndEvent,this.resizeEnd),this.removeResizeElement()},e.prototype.resizeEnd=function(e){this.resizeBtnInit(),Ct.remove(this.contentModule.getDocument(),bt.touchMoveEvent,this.resizing),Ct.remove(this.contentModule.getDocument(),bt.touchEndEvent,this.resizeEnd),this.contentModule.getEditPanel().querySelector(".e-table-box")&&this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector(".e-table-box"))&&(bt.isDevice||Ct.add(this.contentModule.getEditPanel(),"mouseover",this.resizeHelper,this),this.removeResizeElement(),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&(Ti(this.helper),this.helper=null),this.pageX=null,this.pageY=null,this.moveEle=null);var t=ye()?{requestType:"table"}:{event:e,requestType:"table"};this.parent.trigger("resizeStop",t),this.parent.formatter.saveData()},e.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},e.prototype.addRow=function(e,t,i){var s;i&&(s={item:{command:"Table",subCommand:"InsertRowAfter"}});var n={selection:e,subCommand:i?s.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?s:t,t,n)},e.prototype.addColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,width:this.parent.tableSettings.width,subCommand:t.item.subCommand})},e.prototype.removeRowColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar()},e.prototype.removeTable=function(e,t,i){var s;i&&(s={item:{command:"Table",subCommand:"TableRemove"}});var n={selection:e,subCommand:i?s.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?s:t,t.originalEvent,n),this.contentModule.getEditPanel().focus(),this.removeResizeElement(),this.hideTableQuickToolbar()},e.prototype.renderDlgContent=function(e){var t=this;if(bt.isDevice||this.parent.inlineMode.enable)this.insertTableDialog(e);else if(this.popupObj)this.popupObj.hide();else{this.hideTableQuickToolbar();var i=this.l10n.getConstant("inserttablebtn");this.dlgDiv=this.parent.createElement("div",{className:"e-rte-table-popup",id:this.rteID+"_table"}),this.tblHeader=this.parent.createElement("div",{className:"e-rte-popup-header"}),this.tblHeader.innerHTML="1X1",this.dlgDiv.appendChild(this.tblHeader);var s=this.parent.createElement("div",{className:"e-rte-table-span"});this.drawTable(s,e),this.dlgDiv.appendChild(s),this.dlgDiv.appendChild(this.parent.createElement("span",{className:"e-span-border"}));var n=this.parent.createElement("button",{className:"e-insert-table-btn",id:this.rteID+"_insertTable",attrs:{type:"button",tabindex:"0"}});ae(this.parent.getToolbarElement().querySelector(".e-expended-nav"))||this.parent.getToolbarElement().querySelector(".e-expended-nav").setAttribute("tabindex","1"),this.dlgDiv.appendChild(n);var o=new Po({iconCss:"e-icons e-create-table",content:i,cssClass:"e-flat",enableRtl:this.parent.enableRtl,locale:this.parent.locale});o.isStringTemplate=!0,o.appendTo(n),Ct.add(n,"click",this.insertTableDialog,{self:this,args:e.args,selection:e.selection}),this.parent.getToolbar().appendChild(this.dlgDiv);var r=e.args.originalEvent.target;r=r.classList.contains("e-toolbar-item")?r.firstChild:r.parentElement,this.popupObj=new lo(this.dlgDiv,{targetType:"relative",relateTo:r,collision:{X:"fit",Y:"none"},offsetY:8,viewPortElement:this.parent.element,position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){t.parent.isBlur=!1,t.popupObj.destroy(),Ti(t.popupObj.element),t.popupObj=null}}),bi([this.popupObj.element],"e-popup-open"),this.popupObj.refreshPosition(r)}},e.prototype.docClick=function(e){var t=e.args.target;t&&t.classList&&(this.popupObj&&!Mi(t,"#"+this.popupObj.element.id)||this.editdlgObj&&!Mi(t,"#"+this.editdlgObj.element.id))&&!t.classList.contains("e-create-table")&&t.offsetParent&&!t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&(this.popupObj&&this.popupObj.hide(),this.editdlgObj&&this.editdlgObj.hide(),this.parent.isBlur=!0,Xx(this.parent.element,"focusout"));var i=Mi(t,"td"),s=!(!i||!this.parent.contentModule.getEditPanel().contains(i));!t||"TD"===t.tagName||"TH"===t.tagName||s||null!==Mi(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||Mi(t,".e-rte-dropdown-popup")||Mi(t,".e-rte-elements")||(Ci(this.parent.element.querySelectorAll("table td"),"e-cell-select"),bt.isIE||this.hideTableQuickToolbar()),!t||!t.classList||t.classList.contains("e-column-resize")||t.classList.contains("e-row-resize")||t.classList.contains("e-table-box")||this.removeResizeElement()},e.prototype.drawTable=function(e,t){for(var i,s,n=0;n<3;n++){i=this.parent.createElement("div",{className:"e-rte-table-row",attrs:{"data-column":""+n}});for(var o=0;o<10;o++){var r=n>2?"none":"inline-block";s=this.parent.createElement("div",{className:"e-rte-tablecell e-default",attrs:{"data-cell":""+o}}),i.appendChild(s),s.style.display=r,0===o&&0===n&&bi([s],"e-active"),Ct.add(s,"mousemove",this.tableCellSelect,this),Ct.add(i,"mouseleave",this.tableCellLeave,this),Ct.add(s,"mouseup",this.tableCellClick,{self:this,args:t.args,selection:t.selection})}e.appendChild(i)}},e.prototype.editTable=function(e){var t=this;this.createDialog(e);var i=this.tableDlgContent(e),s=this.l10n.getConstant("dialogUpdate"),n=this.l10n.getConstant("dialogCancel"),o=this.l10n.getConstant("tableEditHeader");this.editdlgObj.setProperties({height:"initial",width:"290px",content:i,header:o,buttons:[{click:this.applyProperties.bind(this,e),buttonModel:{content:s,cssClass:"e-flat e-size-update",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:"e-flat e-cancel",content:n}}]}),this.editdlgObj.element.style.maxHeight="none",this.editdlgObj.content.querySelector("input").focus(),this.hideTableQuickToolbar()},e.prototype.insertTableDialog=function(e){var t=this.self?this.self:this;t.popupObj&&t.popupObj.hide(),t.createDialog(e);var i=t.tableCellDlgContent(),s=t.l10n.getConstant("dialogInsert"),n=t.l10n.getConstant("dialogCancel");t.editdlgObj.setProperties({height:"initial",width:"290px",content:i,buttons:[{click:t.customTable.bind(this,e),buttonModel:{content:s,cssClass:"e-flat e-insert-table",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:"e-flat e-cancel",content:n}}]}),t.editdlgObj.element.style.maxHeight="none",t.editdlgObj.content.querySelector("input").focus()},e.prototype.tableCellDlgContent=function(){var e=this.l10n.getConstant("columns"),t=this.l10n.getConstant("rows"),i=this.parent.createElement("div",{className:"e-cell-wrap"}),s=Kx('<div class="e-rte-field"><input type="text"  data-role ="none" id="tableColumn" class="e-table-column"/></div><div class="e-rte-field"><input type="text" data-role ="none" id="tableRow" class="e-table-row" /></div>');return i.appendChild(s),this.columnTextBox=new _a({format:"n0",min:1,value:3,placeholder:e,floatLabelType:"Auto",max:50,enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.columnTextBox.isStringTemplate=!0,this.columnTextBox.appendTo(i.querySelector("#tableColumn")),this.rowTextBox=new _a({format:"n0",min:1,value:3,placeholder:t,floatLabelType:"Auto",max:50,enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.rowTextBox.isStringTemplate=!0,this.rowTextBox.appendTo(i.querySelector("#tableRow")),i},e.prototype.createDialog=function(e){var t=this;if(this.editdlgObj)this.editdlgObj.hide({returnValue:!0});else{var i=this.parent.createElement("div",{className:"e-rte-edit-table",id:this.rteID+"_tabledialog"});this.parent.element.appendChild(i);var s=this.l10n.getConstant("dialogInsert"),n=this.l10n.getConstant("dialogCancel"),o={header:this.l10n.getConstant("tabledialogHeader"),cssClass:"e-rte-elements",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:bt.isDevice?"290px":"340px",height:"initial",position:{X:"center",Y:bt.isDevice?"center":"top"},isModal:bt.isDevice,buttons:[{buttonModel:{content:s,cssClass:"e-flat e-insert-table",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:"e-flat e-cancel",content:n}}],target:bt.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(e){t.parent.isBlur=!1,t.editdlgObj.destroy(),Ti(t.editdlgObj.element),t.dialogRenderObj.close(e),t.editdlgObj=null}};this.editdlgObj=this.dialogRenderObj.render(o),this.editdlgObj.appendTo(i),this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup()}},e.prototype.customTable=function(e,t){var i=this.self?this.self:this;if(i.rowTextBox.value&&i.columnTextBox.value){var s=bt.isDevice||!ae(e.args)&&!ae(e.args.originalEvent)&&"insert-table"===e.args.originalEvent.action||i.parent.inlineMode.enable?e:this;i.tableInsert(i.rowTextBox.value,i.columnTextBox.value,t,s)}},e.prototype.cancelDialog=function(e){this.parent.isBlur=!1,this.editdlgObj.hide({returnValue:!0})},e.prototype.applyProperties=function(e,t){var i=this.editdlgObj.element,s=Mi(e.selectNode[0],"table");if(s.style.width=i.querySelector(".e-table-width").value+"px",""!==i.querySelector(".e-cell-padding").value)for(var n=s.querySelectorAll("td"),o=0;o<n.length;o++){var r="";""===n[o].style.padding?r=n[o].getAttribute("style")+" padding:"+i.querySelector(".e-cell-padding").value+"px;":(n[o].style.padding=i.querySelector(".e-cell-padding").value+"px",r=n[o].getAttribute("style")),n[o].setAttribute("style",r)}s.cellSpacing=i.querySelector(".e-cell-spacing").value,ae(s.cellSpacing)&&"0"===s.cellSpacing?Ci([s],"e-rte-table-border"):bi([s],"e-rte-table-border"),this.parent.formatter.saveData(),this.editdlgObj.hide({returnValue:!0})},e.prototype.tableDlgContent=function(e){var t=e.selectParent[0],i=this.l10n.getConstant("tableWidth"),s=this.l10n.getConstant("cellpadding"),n=this.l10n.getConstant("cellspacing"),o=this.parent.createElement("div",{className:"e-table-sizewrap"}),r=Mi(t,"table").getClientRects()[0].width,a=Mi(t,"td").style.padding,l=Mi(t,"table").getAttribute("cellspacing"),h=Kx('<div class="e-rte-field"><input type="text" data-role ="none" id="tableWidth" class="e-table-width"  /></div><div class="e-rte-field"><input type="text" data-role ="none" id="cellPadding" class="e-cell-padding" /> </div><div class="e-rte-field"><input type="text" data-role ="none" id="cellSpacing" class="e-cell-spacing" /></div>');o.appendChild(h);var c=new _a({format:"n0",min:0,value:r,placeholder:i,floatLabelType:"Auto",enableRtl:this.parent.enableRtl,locale:this.parent.locale});c.isStringTemplate=!0,c.appendTo(o.querySelector("#tableWidth"));var p=new _a({format:"n0",min:0,value:""!==a?parseInt(a,null):0,placeholder:s,floatLabelType:"Auto",enableRtl:this.parent.enableRtl,locale:this.parent.locale});p.isStringTemplate=!0,p.appendTo(o.querySelector("#cellPadding"));var d=new _a({format:"n0",min:0,value:""===l||ae(l)?0:parseInt(l,null),placeholder:n,floatLabelType:"Auto",enableRtl:this.parent.enableRtl,locale:this.parent.locale});return d.isStringTemplate=!0,d.appendTo(o.querySelector("#cellSpacing")),o},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return"table"},e}(),fk=function(){function e(e){this.parent=e}return e.prototype.render=function(e){var t;return e.beforeOpen=this.beforeOpen.bind(this),e.open=this.open.bind(this),ae(e.close)&&(e.close=this.close.bind(this)),e.beforeClose=this.beforeClose.bind(this),(t=new Wr(e)).isStringTemplate=!0,t},e.prototype.beforeOpen=function(e){this.parent.trigger("beforeDialogOpen",e)},e.prototype.open=function(e){this.parent.trigger("dialogOpen",e)},e.prototype.beforeClose=function(e){this.parent.trigger("beforeDialogClose",e,function(e){e.cancel||e.container.classList.contains("e-popup-close")&&(e.cancel=!0)})},e.prototype.close=function(e){this.parent.trigger("dialogClose",e)},e}(),gk={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}},vk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),yk=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},bk=["Bold","Italic","Underline","|","Formats","Alignments","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"],Ck=[{text:"Segoe UI",value:"Segoe UI",cssClass:"e-segoe-ui"},{text:"Arial",value:"Arial,Helvetica,sans-serif",cssClass:"e-arial"},{text:"Georgia",value:"Georgia,serif",cssClass:"e-georgia"},{text:"Impact",value:"Impact,Charcoal,sans-serif",cssClass:"e-impact"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif",cssClass:"e-tahoma"},{text:"Times New Roman",value:"Times New Roman,Times,serif",cssClass:"e-times-new-roman"},{text:"Verdana",value:"Verdana,Geneva,sans-serif",cssClass:"e-verdana"}],Sk=[{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}],xk=[{text:"Paragraph",value:"P",cssClass:"e-paragraph"},{text:"Code",value:"Pre",cssClass:"e-code"},{text:"Quotation",value:"BlockQuote",cssClass:"e-quote"},{text:"Heading 1",value:"H1",cssClass:"e-h1"},{text:"Heading 2",value:"H2",cssClass:"e-h2"},{text:"Heading 3",value:"H3",cssClass:"e-h3"},{text:"Heading 4",value:"H4",cssClass:"e-h4"}],wk={Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]},Ek={Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]},kk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os(!0)],t.prototype,"enable",void 0),yk([os(!0)],t.prototype,"enableFloating",void 0),yk([os(ox.Expand)],t.prototype,"type",void 0),yk([os(bk)],t.prototype,"items",void 0),yk([os({})],t.prototype,"itemConfigs",void 0),t}(Ls),Tk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os([".jpeg",".jpg",".png"])],t.prototype,"allowedTypes",void 0),yk([os("inline")],t.prototype,"display",void 0),yk([os("Blob")],t.prototype,"saveFormat",void 0),yk([os("auto")],t.prototype,"width",void 0),yk([os("auto")],t.prototype,"height",void 0),yk([os(null)],t.prototype,"saveUrl",void 0),yk([os(null)],t.prototype,"path",void 0),yk([os(!0)],t.prototype,"resize",void 0),yk([os(null)],t.prototype,"removeUrl",void 0),yk([os(0)],t.prototype,"minWidth",void 0),yk([os(null)],t.prototype,"maxWidth",void 0),yk([os(0)],t.prototype,"minHeight",void 0),yk([os(null)],t.prototype,"maxHeight",void 0),yk([os(!1)],t.prototype,"resizeByPercent",void 0),t}(Ls),Lk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([rs({getImageUrl:null,url:null,uploadUrl:null},ME)],t.prototype,"ajaxSettings",void 0),yk([os(!1)],t.prototype,"allowDragAndDrop",void 0),yk([rs({visible:!0,file:["Open","|","Cut","Copy","|","Delete","Rename","|","Details"],folder:["Open","|","Cut","Copy","Paste","|","Delete","Rename","|","Details"],layout:["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"]},KE)],t.prototype,"contextMenuSettings",void 0),yk([os("")],t.prototype,"cssClass",void 0),yk([rs({},qE)],t.prototype,"detailsViewSettings",void 0),yk([os(!1)],t.prototype,"enable",void 0),yk([rs({maxWidth:"650px",minWidth:"240px",visible:!0},JE)],t.prototype,"navigationPaneSettings",void 0),yk([os("/")],t.prototype,"path",void 0),yk([os(null)],t.prototype,"rootAliasName",void 0),yk([rs({},jE)],t.prototype,"searchSettings",void 0),yk([os(!0)],t.prototype,"showFileExtension",void 0),yk([os(!1)],t.prototype,"showHiddenItems",void 0),yk([os(!0)],t.prototype,"showThumbnail",void 0),yk([os("Ascending")],t.prototype,"sortOrder",void 0),yk([rs({visible:!0,items:["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"]},BE)],t.prototype,"toolbarSettings",void 0),yk([rs({autoUpload:!0,minFileSize:0,maxFileSize:3e7,allowedExtensions:"",autoClose:!1},tk)],t.prototype,"uploadSettings",void 0),yk([os("LargeIcons")],t.prototype,"view",void 0),t}(Ls),Dk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os("100%")],t.prototype,"width",void 0),yk([os(Mx)],t.prototype,"styles",void 0),yk([os(!0)],t.prototype,"resize",void 0),yk([os(0)],t.prototype,"minWidth",void 0),yk([os(null)],t.prototype,"maxWidth",void 0),t}(Ls),Ik=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os(!0)],t.prototype,"enable",void 0),yk([os(!1)],t.prototype,"showOnRightClick",void 0),yk([os("hide")],t.prototype,"actionOnScroll",void 0),yk([os(["Open","Edit","UnLink"])],t.prototype,"link",void 0),yk([os(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],t.prototype,"image",void 0),yk([os(["Cut","Copy","Paste"])],t.prototype,"text",void 0),yk([os(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],t.prototype,"table",void 0),t}(Ls),Ok=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os(!1)],t.prototype,"prompt",void 0),yk([os(null)],t.prototype,"deniedAttrs",void 0),yk([os(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"])],t.prototype,"allowedStyleProps",void 0),yk([os(null)],t.prototype,"deniedTags",void 0),yk([os(!0)],t.prototype,"keepFormat",void 0),yk([os(!1)],t.prototype,"plainText",void 0),t}(Ls),Ak=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os(null)],t.prototype,"default",void 0),yk([os("65px")],t.prototype,"width",void 0),yk([os(Ck)],t.prototype,"items",void 0),t}(Ls),Mk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os(null)],t.prototype,"default",void 0),yk([os("35px")],t.prototype,"width",void 0),yk([os(Sk)],t.prototype,"items",void 0),t}(Ls),Pk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os(null)],t.prototype,"default",void 0),yk([os("65px")],t.prototype,"width",void 0),yk([os(xk)],t.prototype,"types",void 0),t}(Ls),Nk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os("#ff0000")],t.prototype,"default",void 0),yk([os("Palette")],t.prototype,"mode",void 0),yk([os(10)],t.prototype,"columns",void 0),yk([os(wk)],t.prototype,"colorCode",void 0),yk([os(!1)],t.prototype,"modeSwitcher",void 0),t}(Ls),Rk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vk(t,e),yk([os("#ffff00")],t.prototype,"default",void 0),yk([os("Palette")],t.prototype,"mode",void 0),yk([os(10)],t.prototype,"columns",void 0),yk([os(Ek)],t.prototype,"colorCode",void 0),yk([os(!1)],t.prototype,"modeSwitcher",void 0),t}(Ls),Bk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Hk=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Fk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bk(t,e),Hk([os([])],t.prototype,"styles",void 0),Hk([os([])],t.prototype,"scripts",void 0),t}(Ls),jk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bk(t,e),Hk([os(!1)],t.prototype,"enable",void 0),Hk([os(null)],t.prototype,"attributes",void 0),Hk([rs({},Fk)],t.prototype,"resources",void 0),t}(Ls),Vk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),zk=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},_k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vk(t,e),zk([os(!1)],t.prototype,"enable",void 0),zk([os(!0)],t.prototype,"onSelection",void 0),t}(Ls),qk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Wk=function(){return(Wk=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Uk=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Gk=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.defaultResetValue=null,s.isResizeInitialized=!1,s.isFocusOut=!1,s.isRTE=!1,s.isBlur=!0,s.needsID=!0,s}return qk(t,e),t.prototype.requiredModules=function(){var e=[];return this.toolbarSettings.enable&&(e.push({member:"toolbar",args:[this,this.serviceLocator]}),e.push({member:"link",args:[this,this.serviceLocator]}),e.push({member:"table",args:[this,this.serviceLocator]}),e.push({member:"image",args:[this,this.serviceLocator]}),this.quickToolbarSettings.enable&&e.push({member:"quickToolbar",args:[this,this.serviceLocator]})),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),"Markdown"===this.editorMode&&e.push({member:"markdownEditor",args:[this,this.serviceLocator]}),"HTML"===this.editorMode&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]})),this.fileManagerSettings.enable&&e.push({member:"fileManager",args:[this,this.serviceLocator]}),this.enableResize&&e.push({member:"resize",args:[this]}),e},t.prototype.updateEnable=function(){this.enabled?(Ci([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),ae(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(Ci(this.getToolbar().querySelectorAll("."+fx),fx),Ci([this.getToolbar()],["e-rte-tb-float","e-rte-tb-abs-float"])),bi([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.preRender=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new rw,this.initializeServices(),this.setContainer(),this.persistData(),Ri(this.element,{width:ge(this.width)}),Di(this.element,{role:"application"})},t.prototype.persistData=function(){if(this.enablePersistence&&"TEXTAREA"===this.originalElement.tagName){this.element.id=this.originalElement.id+"_wrapper";var e=window.localStorage.getItem(this.getModuleName()+this.element.id);ae(e)||""===e||this.setProperties(JSON.parse(e),!0)}},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),null!==this.value&&null===this.valueTemplate||this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.isBlazor()||(this.element.innerHTML="");for(var e=["class","style","id","ejs-for"],t={},i=0;i<this.element.attributes.length;i++)-1!==e.indexOf(this.element.attributes[i].name)||/^data-val/.test(this.element.attributes[i].name)||(t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name));if(re(t,this.htmlAttributes,t),this.setProperties({htmlAttributes:t},!0),ae(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),"TEXTAREA"===this.element.tagName){var s=this.createElement("div",{className:this.element.getAttribute("class")});this.isBlazor()||(this.element.innerHTML=""),this.element.parentElement.insertBefore(s,this.element),ye()?(s.appendChild(this.element),this.valueContainer=this.createElement("textarea",{id:this.element.id+"-value"})):this.valueContainer=this.element,Ci([this.valueContainer],this.element.getAttribute("class").split(" ")),this.isBlazor()&&bi([this.element],"e-rte-hidden"),this.element=s}else this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value"});this.valueContainer.name=this.getID(),bi([this.valueContainer],"e-rte-hidden"),this.element.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify("selectAll",{})},t.prototype.selectRange=function(e){this.notify("selectRange",{range:e})},t.prototype.getSelection=function(){var e="";return this.notify("getSelectedHtml",{callBack:function(t){e=t}}),e},t.prototype.executeCommand=function(e,t,i){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var s=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||s.startContainer!==this.inputElement)||!this.inputElement.contains(s.startContainer))&&this.focusIn()}var n=gk[e];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(n.command,n.subCommand?n.subCommand:t||n.value,null,null,t||n.value,t||n.value),i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.notify("content-changed",{})},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertHTML":this.enableHtmlSanitizer&&(t="string"==typeof t?this.htmlEditorModule.sanitizeHelper(t):this.htmlEditorModule.sanitizeHelper(t.outerHTML));break;case"insertTable":ae(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":var i=this.createElement("img",{attrs:{src:t.url}}),s=i.outerHTML;this.enableHtmlSanitizer&&(s=this.htmlEditorModule.sanitizeHelper(i.outerHTML));var n=""!==s&&this.createElement("div",{innerHTML:s}).firstElementChild.getAttribute("src")||null;n=ae(n)?"":n,t.url=n,ae(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),ae(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break;case"createLink":var o=this.createElement("a",{attrs:{href:t.url}}),r=o.outerHTML;this.enableHtmlSanitizer&&(r=this.htmlEditorModule.sanitizeHelper(o.outerHTML));var a=""!==r&&this.createElement("div",{innerHTML:r}).firstElementChild.getAttribute("href")||null;a=ae(a)?"":a,t.url=a}return t},t.prototype.encode=function(e){var t=this.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.render=function(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new ck(this,this.serviceLocator),this.sourceCodeModule=new uk(this,this.serviceLocator),this.notify("initial-load",{}),this.trigger("load"),this.RTERender();new Sw(this);this.notify("initial-end",{}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.toolbarSettings.enable&&"Expand"===this.toolbarSettings.type&&!ae(this.getToolbar())&&this.toolbarSettings.items.indexOf("Undo")>-1&&this.toolbarSettings.items.indexOf("Redo")>-1&&this.disableToolbarItem(["Undo","Redo"]),this.setContentHeight(),null!==this.value&&(this.isBlazor()?this.defaultResetValue=this.value:this.valueContainer.defaultValue=this.value),this.enabled?this.eventInitializer():this.unWireEvents(),this.renderComplete()},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.keyDown=function(e){if(this.notify(ax,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange();if(Mi("#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var i=new RegExp(String.fromCharCode(8203),"g"),s=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(i,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,s)}else if("Backspace"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){var n=t.startContainer.parentElement,o=void 0,r=void 0;for(r=0;r<n.childNodes.length;r++)n.childNodes[r]===t.startContainer&&(o=r);var a=!0,l=[];for(r=o;r>=0;r--)3===n.childNodes[r].nodeType&&8203===n.childNodes[r].textContent.charCodeAt(0)&&a?l.push(r):a=!1;if(l.length>0)for(r=l.length-1;r>0;r--)n.childNodes[l[r]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which))switch(this.formatter.process(this,null,e),e.action){case"toolbar-focus":if(this.toolbarSettings.enable){this.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}break;case"escape":this.contentModule.getEditPanel().focus()}ae(this.placeholder)||(ae(this.placeHolderWrapper)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderWrapper.style.display="none"),this.autoResize()},t.prototype.keyUp=function(e){this.notify(rx,{member:"keyup",args:e}),"KeyX"!==e.code||88!==e.which||88!==e.keyCode||!e.ctrlKey||""!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||(this.inputElement.innerHTML=Qx("<p><br></p>",this));var t=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),this.inputElement&&0!==this.inputElement.textContent.length&&this.notify("toolbar-refresh",{args:e}),ae(this.placeholder)||"Enter"===e.key&&13===e.keyCode||"<p><br></p>"!==this.inputElement.innerHTML||this.setPlaceHolder()},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||ae(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(ew(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if(ae(e)){var t=this.inputElement.innerHTML;this.setProperties({value:$x(t)?null:t})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(zx()){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.notify("editAreaClick",{member:"editAreaClick",args:e})}else this.notify("editAreaClick",{member:"editAreaClick",args:e})},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.notify("toolbar-refresh",{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&bt.isDevice){var t=e.target,i=Mi(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.contentModule.getEditPanel().contains(i))return}this.notifyMouseUp(e)},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand("copy",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand("cut",!1,null)},t.prototype.onPaste=function(e){var t=this,i={originalEvent:e,cancel:!1,requestType:"Paste"};this.trigger("actionBegin",i,function(i){var s=t.getText().length-t.getSelection().length+(ae(e)||ae(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if("Markdown"!==t.editorMode)if(!i.cancel&&"true"===t.inputElement.contentEditable&&(-1===t.maxLength||s<t.maxLength))if(ae(t.pasteCleanupModule)){var n={requestType:"Paste",editorMode:t.editorMode,event:e},o=null;e&&!ae(e.clipboardData)&&(o=e.clipboardData.getData("text/plain"));var r=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==o&&t.notify("paste-content",{file:r,args:e,text:o}),setTimeout(function(){t.formatter.onSuccess(t,n)},0)}else t.notify("pasteClean",{args:e});else e.preventDefault();else-1===t.maxLength||s<t.maxLength||e.preventDefault()})},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.destroy=function(){if(!this.isDestroyed&&this.isRendered)if(null!==this.element.offsetParent){if(this.notify("destroy",{}),this.destroyDependentModules(),ae(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),this.unWireEvents(),"TEXTAREA"===this.originalElement.tagName){ye()&&(Ti(this.valueContainer),this.valueContainer=this.element.querySelector(".e-blazor-hidden.e-control.e-richtexteditor")),this.element.parentElement.insertBefore(this.valueContainer,this.element),this.valueContainer.id=this.getID(),this.valueContainer.removeAttribute("name"),Ti(this.element),""!==this.originalElement.innerHTML.trim()?ye()||(this.valueContainer.value=this.originalElement.innerHTML.trim(),this.setProperties({value:ae(this.initialValue)?null:this.initialValue},!0)):this.valueContainer.value=this.isBlazor()?this.defaultResetValue:this.valueContainer.defaultValue,this.element=this.valueContainer;for(var t=0;t<this.originalElement.classList.length;t++)bi([this.element],this.originalElement.classList[t]);Ci([this.element],"e-rte-hidden")}else""!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:ae(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML="";if(this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),!ae(this.cssClass)){var i=this.cssClass.split(" ");for(t=0;t<i.length;t++)""!==i[t].trim()&&Ci([this.element],i[t])}this.removeHtmlAttributes(),this.removeAttributes(),e.prototype.destroy.call(this),this.isRendered=!1,this.enablePersistence&&window.localStorage.removeItem(this.getModuleName()+this.element.id)}else ae(this.toolbarModule)||this.toolbarModule.destroy()},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),t=0;t<e.length&&this.element.hasAttribute(e[t]);t++)this.element.removeAttribute(e[t])},t.prototype.removeAttributes=function(){this.enabled||Ci([this.element],"e-disabled"),this.enableRtl&&Ci([this.element],"e-rtl"),this.readonly&&Ci([this.element],"e-rte-readonly"),""!==this.element.style.width&&""===this.originalElement.style.width&&this.element.style.removeProperty("width"),""!==this.element.style.height&&""===this.originalElement.style.height&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()},t.prototype.getContent=function(){return this.iframeSettings.enable&&ye()?this.inputElement:this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var e=this.createElement("div"),t=this.contentModule.getDocument().getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0).cloneContents();e.appendChild(i)}return e.innerHTML},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange(),t="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,i=e.getClientRects()[0].left,s=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,s,t)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.getModuleName=function(){return"richtexteditor"},t.prototype.onPropertyChanged=function(t,i){for(var s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];switch(o){case"value":var r,a=t[o];r="HTML"===this.editorMode?Qx(a,this):a,ae(a)||""===a||(this.value=this.serializeValue(this.enableHtmlEncode?this.encode(ew(r)):r)),this.updatePanelValue(),this.setPlaceHolder(),this.notify("xhtmlValidation",{module:"XhtmlValidation",newProp:t,oldProp:i}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.showCharCount&&this.countModule.refresh();break;case"valueTemplate":this.setValue(),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(t[o]),this.toolbarSettings.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(t[o]),this.setContentHeight(),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(i[o]),this.setCssClass(t[o]);break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=t[o],this.setPlaceHolder();break;case"htmlAttributes":hk(this.htmlAttributes,this,!1,!1);break;case"iframeSettings":var l=i[o];if(l.resources){var h=this.contentModule.getDocument().querySelector("head"),c=void 0;l.resources.scripts&&(c=h.querySelectorAll(".rte-iframe-script-sheet"),this.removeSheets(c)),l.resources.styles&&(c=h.querySelectorAll(".rte-iframe-style-sheet"),this.removeSheets(c))}this.setIframeSettings();break;case"locale":e.prototype.refresh.call(this);break;case"inlineMode":this.notify("model-changed",{module:"quickToolbar",newProp:t,oldProp:i}),this.setContentHeight();break;case"toolbarSettings":this.notify("model-changed",{module:"toolbar",newProp:t,oldProp:i}),this.setContentHeight();break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":t[o]&&this.countModule?this.countModule.renderCount():!1===t[o]&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:t,oldProp:i});break;case"enableXhtml":this.notify("xhtmlValidation",{module:"XhtmlValidation",newProp:t,oldProp:i});break;case"quickToolbarSettings":t.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent(),this.notify("model-changed",{newProp:t,oldProp:i});break;default:this.notify("model-changed",{newProp:t,oldProp:i})}}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(ew(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:ew(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)Ti(e[t])},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?ew(e):e;var t=this.element.querySelector(".e-rte-srctextarea");e?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?this.inputElement.innerHTML="<p><br/></p>":this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()},t.prototype.setHeight=function(e){this.element.style.height="auto"!==e?ge(e):"auto","Expand"===this.toolbarSettings.type&&("string"==typeof this.height&&this.height.indexOf("px")>-1||"number"==typeof this.height)?this.element.classList.add("e-rte-fixed-tb-expand"):this.element.classList.remove("e-rte-fixed-tb-expand")},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder e-rte-placeholder"}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),Di(this.placeHolderWrapper,{style:"font-size: 14px; padding: 16px; margin-left: 0px; margin-right: 0px;"})),this.placeHolderWrapper.innerHTML=this.placeholder,0!==this.inputElement.textContent.length||ae(this.inputElement.firstChild)||"P"!==this.inputElement.firstChild.nodeName||ae(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName?this.placeHolderWrapper.style.display="none":this.placeHolderWrapper.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.setWidth=function(e){"auto"!==e?Ri(this.element,{width:ge(this.width)}):this.element.style.width="auto"},t.prototype.setCssClass=function(e){if(!ae(e))for(var t=e.split(" "),i=0;i<t.length;i++)""!==t[i].trim()&&this.element.classList.add(t[i])},t.prototype.updateRTL=function(){this.notify(lx,{enableRtl:this.enableRtl}),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.updateReadOnly=function(){this.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unbindEvents():this.enabled&&this.bindEvents())},t.prototype.print=function(){var e,t=this,i={element:this.inputElement,requestType:"print",cancel:!1};this.trigger("actionBegin",i,function(i){if(e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===bt.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=fe(t.inputElement,e),!i.cancel){t.trigger("actionComplete",{requestType:"print"})}})},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.enableToolbarItem=function(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!0,t)},t.prototype.disableToolbarItem=function(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!1,t)},t.prototype.removeToolbarItem=function(e){this.toolbarModule.removeTBarItems(e)},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register("rendererFactory",new aw),this.serviceLocator.register("rteLocale",this.localeObj=new Js(this.getModuleName(),Nx,this.locale)),this.serviceLocator.register("dialogRenderObject",new fk(this))},t.prototype.RTERender=function(){var e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(nx.Content),this.fullScreenModule=new lk(this),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),hk(this.htmlAttributes,this,!1,!0),this.iframeSettings&&this.setIframeSettings(),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!ae(this.value)&&this.setProperties({value:this.encode(ew(this.value))})},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t),this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e)}this.iframeSettings.attributes&&hk(this.iframeSettings.attributes,this,!0,!1)},t.prototype.InjectSheet=function(e,t){try{if(t&&t.length>0)for(var i=this.contentModule.getDocument().querySelector("head"),s=0;s<t.length;s++)if(e){var n=this.createScriptElement();n.src=t[s],i.appendChild(n)}else{var o=this.createStyleElement();o.href=t[s],i.appendChild(o)}}catch(e){return}},t.prototype.createScriptElement=function(){var e=this.createElement("script",{className:"rte-iframe-script-sheet"});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=this.createElement("link",{className:"rte-iframe-style-sheet"});return e.rel="stylesheet",e},t.prototype.isBlazor=function(){return!!ye()},t.prototype.setValue=function(){if(this.valueTemplate)if("string"==typeof this.valueTemplate)this.setProperties({value:this.valueTemplate});else{for(var e=Xt(this.valueTemplate)({}),t=0;t<e.length;t++){Ei([e[t]],this.element)}""!==this.element.innerHTML.trim()&&this.setProperties({value:this.element.innerHTML.trim()})}else{var i=!ae(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();""!==i&&("TEXTAREA"===this.element.tagName?this.setProperties({value:ew(i)}):this.setProperties({value:i}))}},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getInsertImgMaxWidth=function(){var e=this.insertImageSettings.maxWidth,t=this.contentModule.getEditPanel(),i=window.getComputedStyle(t),s=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return ae(e)?s:e},t.prototype.setContentHeight=function(e,t){var i,s,n,o=0,r=this.sourceCodeModule.getPanel()&&"block"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel(),a=this.element.offsetHeight;0!==this.element.offsetHeight||"auto"===this.height||this.getToolbar()||(a=parseInt(this.height,10),(n="string"==typeof this.height&&this.height.indexOf("%")>-1)&&(s=this.height));var l=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,h=this.element.querySelector(".e-resize-handle"),c=this.enableResize?ae(h)?0:h.offsetHeight+8:0,p=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;(this.toolbarSettings.type===ox.Expand&&t&&"preview"!==e?(i="auto"===this.height&&0===c?"auto":a-(l+p+c)+"px",o=this.toolbarSettings.enableFloating?0:p):i="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?n?s:a-(l+c)+"px":"auto",Ri(r,{height:i,marginTop:o+"px"}),this.iframeSettings.enable&&"sourceCode"===e)&&Ri(Ii(".e-rte-content",this.element),{height:i,marginTop:o+"px"});if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var d=(t?l+p:l)+"px";Ri(this.getToolbar().parentElement,{height:d})}0===c&&this.autoResize()},t.prototype.getHtml=function(){return this.value},t.prototype.getXhtml=function(){var e=this.value;return this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.showSourceCode=function(){this.readonly||this.notify("sourceCode",{})},t.prototype.getCharCount=function(){return("Markdown"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim()).length},t.prototype.getBaseToolbarObject=function(){return!this.inlineMode.enable||bt.isDevice&&!zx()?this.toolbarModule&&this.toolbarModule.getBaseToolbar():this.quickToolbarModule&&this.quickToolbarModule.getInlineBaseToolbar()},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return"TEXTAREA"===this.originalElement.tagName?this.valueContainer.id:this.element.id},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;bi([this.element],["e-focused"]),this.preventDefaultResize(e),this.notify("mouseDown",{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){"msie"===bt.info.name?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):"mozilla"===bt.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))},t.prototype.defaultResize=function(e){"msie"===bt.info.name?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):"mozilla"===bt.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))},t.prototype.resizeHandler=function(){var e=!1;document.body.contains(this.element)?(this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),e=this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains("e-expand-open")),this.setContentHeight("",e)):document.defaultView.removeEventListener("resize",this.onResizeHandler,!0)},t.prototype.scrollHandler=function(e){this.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.notify("contentscroll",{args:e})},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,bi([this.element],["e-focused"]),"HTML"===this.editorMode?this.cloneValue="<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(ew(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value;var t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.contentModule.getEditPanel()||this.iframeSettings.enable&&t===this.contentModule.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||Mi(t,".e-rte-toolbar")===this.getToolbarElement())&&(this.contentModule.getEditPanel().focus(),!ae(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var i=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),s=0;s<i.length;s++)i[s].setAttribute("tabindex","-1")}this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:0!==Object.keys(e).length}),!ae(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),Ct.add(document,"mousedown",this.onDocumentClick,this)}if(!ae(this.getToolbarElement())){var n=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]");for(s=0;s<n.length;s++)n[s].classList.contains("e-rte-dropdown-btn")||n[s].classList.contains("e-insert-table-btn")||n[s].hasAttribute("tabindex")&&"-1"===n[s].getAttribute("tabindex")||n[s].setAttribute("tabindex","-1")}},t.prototype.getUpdatedValue=function(){var e;ae(this.tableModule)||this.tableModule.removeResizeElement();var t=this.element.querySelector(".e-rte-srctextarea");return"HTML"===this.editorMode?(e="<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(ew(this.inputElement.innerHTML)):this.inputElement.innerHTML,t&&"block"===t.style.display&&(e=t.value)):e=""===this.inputElement.value?null:this.inputElement.value,e},t.prototype.updateValueOnIdle=function(){this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.invokeChangeEvent()},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.onDocumentClick=function(e){var t=e.target,i=Mi(t,".e-richtexteditor");this.element.contains(e.target)||document===e.target||i===this.element||Mi(t,'[aria-owns="'+this.getID()+'"]')||(this.isBlur=!0,this.isRTE=!1),this.notify("docClick",{args:e})},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var i=Mi(t,".e-richtexteditor");i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):Mi(t,'[aria-owns="'+this.getID()+'"]')?this.isBlur=!1:(this.isBlur=!0,t=null)}if(this.isBlur&&ae(t)){Ci([this.element],["e-focused"]),this.notify("focusChange",{});var s=this.getUpdatedValue();this.setProperties({value:s}),this.notify("toolbar-refresh",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,Xx(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:0!==Object.keys(e).length}),ae(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),Ct.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(ae(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.invokeChangeEvent=function(){var e={value:this.enableXhtml?this.getXhtml():this.value};this.value!==this.cloneValue&&(this.trigger("change",e),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=ho(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];Ct.add(i,"scroll",this.scrollHandler,this)}this.iframeSettings.enable||Ct.add(this.contentModule.getPanel(),"scroll",this.contentScrollHandler,this)},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(Ct.add(this.inputElement,"contextmenu",this.contextHandler,this),bt.isDevice&&(this.touchModule=new nn(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.unWireContextEvent=function(){Ct.remove(this.inputElement,"contextmenu",this.contextHandler),bt.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=ho(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];Ct.remove(i,"scroll",this.scrollHandler)}this.iframeSettings.enable||Ct.remove(this.contentModule.getPanel(),"scroll",this.contentScrollHandler)},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.contextHandler=function(e){var t=Mi(e.target,"a, table, img");!1!==this.inlineMode.onSelection&&(ae(t)||!this.inputElement.contains(t)||"IMG"!==t.tagName&&"TABLE"!==t.tagName&&"A"!==t.tagName)||e.preventDefault()},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:""===e?null:this.isBlazor()?this.defaultResetValue:e})},t.prototype.autoResize=function(){var e=this;if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout(function(){e.setAutoHeight(e.inputElement)},0);else if(this.iframeSettings.enable){var t=this.element.querySelector("#"+this.getID()+"_rte-view");setTimeout(function(){e.setAutoHeight(t)},100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){ae(e)||(e.style.height="",e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.on("content-changed",this.contentChanged,this),this.on("resizeInitialized",this.updateResizeFlag,this),this.readonly&&this.enabled||this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.contentModule.getText():e.currentTarget.textContent.trim(),i=[8,16,17,37,38,39,40,46,65],s=void 0,n=0;n<=i.length-1;n++)if(e.which===i[n]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(s=i[n])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==s&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new uw(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:Wk({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=Mi(this.valueContainer,"form");e&&Ct.add(e,"reset",this.resetHandler,this),Ct.add(this.inputElement,"keyup",this.keyUp,this),Ct.add(this.inputElement,"paste",this.onPaste,this),Ct.add(this.inputElement,bt.touchEndEvent,ce(this.mouseUp,30),this),Ct.add(this.inputElement,bt.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(Ct.add(this.inputElement,"focusin",this.focusHandler,this),Ct.add(this.inputElement,"focusout",this.blurHandler,this),Ct.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),Ct.add(this.inputElement.ownerDocument,bt.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.notify("iframe-click",e)},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.off("content-changed",this.contentChanged),this.off("resizeInitialized",this.updateResizeFlag),this.readonly&&this.enabled||this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=Mi(this.valueContainer,"form");e&&Ct.remove(e,"reset",this.resetHandler),Ct.remove(this.inputElement,"keyup",this.keyUp),Ct.remove(this.inputElement,"paste",this.onPaste),Ct.remove(this.inputElement,bt.touchEndEvent,ce(this.mouseUp,30)),Ct.remove(this.inputElement,bt.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(Ct.remove(this.inputElement,"focusin",this.focusHandler),Ct.remove(this.inputElement,"focusout",this.blurHandler),Ct.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),Ct.remove(this.inputElement.ownerDocument,bt.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},Uk([rs({},kk)],t.prototype,"toolbarSettings",void 0),Uk([rs({},Ik)],t.prototype,"quickToolbarSettings",void 0),Uk([rs({},Ok)],t.prototype,"pasteCleanupSettings",void 0),Uk([rs({},jk)],t.prototype,"iframeSettings",void 0),Uk([rs({},Tk)],t.prototype,"insertImageSettings",void 0),Uk([rs({},Dk)],t.prototype,"tableSettings",void 0),Uk([os(0)],t.prototype,"floatingToolbarOffset",void 0),Uk([rs({},_k)],t.prototype,"inlineMode",void 0),Uk([rs({},Lk)],t.prototype,"fileManagerSettings",void 0),Uk([os("100%")],t.prototype,"width",void 0),Uk([os(!1)],t.prototype,"enablePersistence",void 0),Uk([os(!1)],t.prototype,"enableResize",void 0),Uk([os({})],t.prototype,"htmlAttributes",void 0),Uk([os(null)],t.prototype,"placeholder",void 0),Uk([os(!1)],t.prototype,"autoSaveOnIdle",void 0),Uk([os(!1)],t.prototype,"readonly",void 0),Uk([os(!0)],t.prototype,"enabled",void 0),Uk([os(!0)],t.prototype,"enableHtmlSanitizer",void 0),Uk([os(!1)],t.prototype,"enableHtmlEncode",void 0),Uk([os(!1)],t.prototype,"enableXhtml",void 0),Uk([os("auto")],t.prototype,"height",void 0),Uk([os(null)],t.prototype,"cssClass",void 0),Uk([os(null)],t.prototype,"value",void 0),Uk([os(30)],t.prototype,"undoRedoSteps",void 0),Uk([os(300)],t.prototype,"undoRedoTimer",void 0),Uk([os("HTML")],t.prototype,"editorMode",void 0),Uk([os(null)],t.prototype,"keyConfig",void 0),Uk([os(!1)],t.prototype,"showCharCount",void 0),Uk([os(!1)],t.prototype,"enableTabKey",void 0),Uk([os(!1)],t.prototype,"enableAutoUrl",void 0),Uk([os(-1)],t.prototype,"maxLength",void 0),Uk([rs({},Pk)],t.prototype,"format",void 0),Uk([rs({},Ak)],t.prototype,"fontFamily",void 0),Uk([rs({},Mk)],t.prototype,"fontSize",void 0),Uk([rs({},Nk)],t.prototype,"fontColor",void 0),Uk([rs({},Rk)],t.prototype,"backgroundColor",void 0),Uk([os(null)],t.prototype,"valueTemplate",void 0),Uk([os(1e4)],t.prototype,"saveInterval",void 0),Uk([cs()],t.prototype,"actionBegin",void 0),Uk([cs()],t.prototype,"actionComplete",void 0),Uk([cs()],t.prototype,"beforeDialogOpen",void 0),Uk([cs()],t.prototype,"dialogOpen",void 0),Uk([cs()],t.prototype,"beforeDialogClose",void 0),Uk([cs()],t.prototype,"dialogClose",void 0),Uk([cs()],t.prototype,"beforeQuickToolbarOpen",void 0),Uk([cs()],t.prototype,"quickToolbarOpen",void 0),Uk([cs()],t.prototype,"quickToolbarClose",void 0),Uk([cs()],t.prototype,"toolbarStatusUpdate",void 0),Uk([cs()],t.prototype,"imageSelected",void 0),Uk([cs()],t.prototype,"beforeImageUpload",void 0),Uk([cs()],t.prototype,"imageUploading",void 0),Uk([cs()],t.prototype,"imageUploadSuccess",void 0),Uk([cs()],t.prototype,"imageUploadFailed",void 0),Uk([cs()],t.prototype,"imageRemoving",void 0),Uk([cs()],t.prototype,"afterImageDelete",void 0),Uk([cs()],t.prototype,"created",void 0),Uk([cs()],t.prototype,"destroyed",void 0),Uk([cs()],t.prototype,"beforeSanitizeHtml",void 0),Uk([cs()],t.prototype,"blur",void 0),Uk([cs()],t.prototype,"toolbarClick",void 0),Uk([cs()],t.prototype,"focus",void 0),Uk([cs()],t.prototype,"change",void 0),Uk([cs()],t.prototype,"resizing",void 0),Uk([cs()],t.prototype,"resizeStart",void 0),Uk([cs()],t.prototype,"resizeStop",void 0),Uk([cs()],t.prototype,"beforeImageDrop",void 0),Uk([os(null)],t.prototype,"formatter",void 0),t=Uk([ps],t)}(Ns),Yk={},Xk={},Kk={},Zk={},Qk={},Jk={},$k={};Gk.Inject(hw,pk,dk,yw,vw,LE,zw,mk,DE,IE),Object(Y.copy)(Yk,{RichTextEditor:Gk,Toolbar:hw,Link:pk,Image:dk,Count:yw,QuickToolbar:vw,HtmlEditor:LE,MarkdownEditor:zw,Table:mk,PasteCleanup:DE,Resize:IE}),Object(Y.copy)(Xk,s),Object(Y.copy)(Kk,x),Object(Y.copy)(Kk,f),Object(Y.copy)(Kk,b),Object(Y.copy)(Zk,a),Object(Y.copy)(Zk,l),Object(Y.copy)(Zk,h),Object(Y.copy)(Qk,r),Object(Y.copy)(Qk,o),Object(Y.copy)(Qk,d),Object(Y.copy)(Jk,F),Object(Y.copy)($k,C);var eT={},tT={},iT={},sT={},nT={},oT={},rT={},aT={},lT={},hT={},cT={},pT={},dT={},uT={},mT={},fT={},gT={};Object(Y.copy)(eT,Cn),Object(Y.copy)(tT,Sn),Object(Y.copy)(iT,Sd),Object(Y.copy)(tT,xd),Object(Y.copy)(sT,wd),Object(Y.copy)(nT,Ed),Object(Y.copy)(oT,kd),Object(Y.copy)(rT,Td),Object(Y.copy)(aT,Ld),Object(Y.copy)(iT,Sd),Object(Y.copy)(rT,Dd),Object(Y.copy)(tT,Id),Object(Y.copy)(rT,Od),Object(Y.copy)(tT,Ad),Object(Y.copy)(rT,Md),Object(Y.copy)(tT,Pd),Object(Y.copy)(iT,Nd),Object(Y.copy)(tT,Rd),Object(Y.copy)(sT,Bd),Object(Y.copy)(nT,Hd),Object(Y.copy)(oT,Fd),Object(Y.copy)(rT,jd),Object(Y.copy)(aT,Vd),Object(Y.copy)(iT,Nd),Object(Y.copy)(eT,cu),Object(Y.copy)(tT,pu),Object(Y.copy)(nT,du),Object(Y.copy)(aT,uu),Object(Y.copy)(eT,cu),Object(Y.copy)(lT,yu),Object(Y.copy)(tT,bu),Object(Y.copy)(hT,Mu),Object(Y.copy)(tT,Pu),Object(Y.copy)(aT,Nu),Object(Y.copy)(oT,Ru),Object(Y.copy)(hT,Mu),Object(Y.copy)(hT,$u),Object(Y.copy)(tT,em),Object(Y.copy)(aT,tm),Object(Y.copy)(rT,im),Object(Y.copy)(oT,sm),Object(Y.copy)(nT,nm),Object(Y.copy)(hT,$u),Object(Y.copy)(aT,om),Object(Y.copy)(tT,rm),Object(Y.copy)(aT,om),Object(Y.copy)(rT,am),Object(Y.copy)(cT,lm),Object(Y.copy)(tT,hm),Object(Y.copy)(aT,cm),Object(Y.copy)(rT,pm),Object(Y.copy)(iT,dm),Object(Y.copy)(tT,um),Object(Y.copy)(sT,mm),Object(Y.copy)(nT,fm),Object(Y.copy)(oT,gm),Object(Y.copy)(rT,vm),Object(Y.copy)(aT,ym),Object(Y.copy)(iT,bf),Object(Y.copy)(tT,Cf),Object(Y.copy)(sT,Sf),Object(Y.copy)(nT,xf),Object(Y.copy)(oT,wf),Object(Y.copy)(rT,Ef),Object(Y.copy)(eT,kf),Object(Y.copy)(aT,Tf),Object(Y.copy)(oT,Lf),Object(Y.copy)(tT,Df),Object(Y.copy)(oT,If),Object(Y.copy)(tT,Of),Object(Y.copy)(oT,If),Object(Y.copy)(oT,If),Object(Y.copy)(eT,Af),Object(Y.copy)(tT,Mf),Object(Y.copy)(nT,Pf),Object(Y.copy)(aT,Nf),Object(Y.copy)(eT,Af),Object(Y.copy)(oT,Rf),Object(Y.copy)(tT,Bf),Object(Y.copy)(oT,Rf),Object(Y.copy)(pT,mg),Object(Y.copy)(tT,fg),Object(Y.copy)(cT,gg),Object(Y.copy)(tT,vg),Object(Y.copy)(aT,yg),Object(Y.copy)(rT,bg),Object(Y.copy)(dT,Iv),Object(Y.copy)(tT,Ov),Object(Y.copy)(uT,Av),Object(Y.copy)(sT,Mv),Object(Y.copy)(rT,Pv),Object(Y.copy)(tT,Nv),Object(Y.copy)(rT,Rv),Object(Y.copy)(tT,Bv),Object(Y.copy)(eT,Hv),Object(Y.copy)(tT,Fv),Object(Y.copy)(rT,jv),Object(Y.copy)(aT,Vv),Object(Y.copy)(eT,Hv),Object(Y.copy)(eT,Hv),Object(Y.copy)(eT,Hv),Object(Y.copy)(oT,zv),Object(Y.copy)(tT,_v),Object(Y.copy)(oT,zv),Object(Y.copy)(mT,Jv),Object(Y.copy)(tT,$v),Object(Y.copy)(rT,ey),Object(Y.copy)(aT,ty),Object(Y.copy)(aT,iy),Object(Y.copy)(tT,sy),Object(Y.copy)(aT,iy),Object(Y.copy)(eT,ny),Object(Y.copy)(tT,oy),Object(Y.copy)(sT,ry),Object(Y.copy)(nT,ay),Object(Y.copy)(oT,ly),Object(Y.copy)(aT,hy),Object(Y.copy)(rT,cy),Object(Y.copy)(oT,py),Object(Y.copy)(tT,dy),Object(Y.copy)(iT,uy),Object(Y.copy)(tT,my),Object(Y.copy)(sT,fy),Object(Y.copy)(nT,gy),Object(Y.copy)(nT,vy),Object(Y.copy)(tT,yy),Object(Y.copy)(rT,by),Object(Y.copy)(sT,Cy),Object(Y.copy)(fT,YS),Object(Y.copy)(tT,XS),Object(Y.copy)(sT,KS),Object(Y.copy)(uT,ZS),Object(Y.copy)(iT,QS),Object(Y.copy)(tT,JS),Object(Y.copy)(sT,$S),Object(Y.copy)(nT,ex),Object(Y.copy)(oT,tx),Object(Y.copy)(rT,ix),Object(Y.copy)(aT,sx),Object(Y.copy)(gT,Yk),Object(Y.copy)(tT,Xk),Object(Y.copy)(oT,Kk),Object(Y.copy)(rT,Zk),Object(Y.copy)(aT,Qk),Object(Y.copy)(eT,Jk),Object(Y.copy)(cT,$k),Object(Y.copy)(gT,Yk);var vT={navigations:eT,base:tT,dropdowns:iT,data:sT,lists:nT,inputs:oT,buttons:rT,popups:aT,layouts:lT,calendars:hT,splitbuttons:cT,grids:pT,progressbar:dT,svgbase:uT,notifications:mT,maps:fT,richtexteditor:gT};window.ejs&&Object(Y.copy)(vT,window.ejs,null,!0),window.ejs=vT,window.ej=vT}]);